# CLAUDE.md

This is the tidyverse blog which uses the hugodown package (RMarkdown and hugo) to create the website. All blog posts live in `content/`, with each occupying it's own directory. Only ever edit `index.Rmd` files, as the other files are autogenerated. Most posts are for package releaess, and because we can't use `.` in file names the release post for (e.g.) "ellmer 0.4.0" will have path `ellmer-0-4-0`

## Style guidelines

* Headings should always use sentence case
* Automatically convert GitHub user names (e.g. `@hadley`) to links to their GitHub account (i.e. `[@hadley](https://github.com/hadley)`).
* Use the base pipe operator (`|>`) not the magrittr pipe (`%>%`)
* Set chunk options with `#| include: false`, `#| eval: false`, `#| echo: false`, `#| error: true`, etc.
* Avoid using `print()` statements in code chunks - just evaluate the object directly
* Use tidyverse-style code formatting (spaces around operators, after commas, etc.)
* Code examples should be self-contained and runnable
* When showing errors, use `#| error: true` chunk option

## Common blog post structure for package announcements

Package announcement posts follow this structure:

* **Introduction paragraph**: A brief introduction that:
  - Announces the release or topic
  - Includes a short tagline describing what the package does (copied from a previous announcement of the same package)
  - Provides context for the post
* **Installation instructions**: Standard code chunk showing `install.packages("package_name")`
* **Summary of changes**: A paragraph describing what the post will cover, typically ending with a link to full release notes on GitHub
* **Setup/library loading**: Code chunk with `library(package_name)`
* **Main content sections**: Multiple sections (using `##` headings) covering:
  - New features
  - Breaking changes/lifecycle changes
  - Improvements
  - Examples with code and output
* **Acknowledgements section**: Final `## Acknowledgements` section thanking contributors with GitHub handles as links

## Proofreading instructions

If you the user asks you to proofread a file, act as an expert proofreader and editor with a deep understanding of clear, engaging, and well-structured writing. Carefully copy edit the content ensuring that all spelling and grammar is correct, and each sentence makes sense. Work paragraph by paragraph, always starting by making a TODO list that includes individual items for each top-level heading.

## Social media summary

- Length: Aim for 2-3 sentences that can fit comfortably in a tweet/post with room for a link
- Opening: Start with the package name and version number, followed by an announcement phrase (e.g., "is now on CRAN!" or "is out!").
- Content selection: Highlight 3-4 of the most exciting or user-facing features. Choose features that are immediately understandable and valuable, not internal refactorings
- Feature grouping: Group related features together (e.g., "Claude caching & file uploads" rather than listing separately)
- Benefit-focused language: Include brief parentheticals that explain the "why" for key features (e.g., "caching (to reduce costs)")
- Closing: End with a call to action: "Read more at [link]"
- Tone: Enthusiastic but professional. Include one fun emoji.
- Technical level: Assume the audience knows the package's purpose, but explain new features clearly without jargon
- Include a `#rsats` hashtag.
