<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>ggplot2 | Tidyverse</title><link>https://www.tidyverse.org/tags/ggplot2/</link><atom:link href="https://www.tidyverse.org/tags/ggplot2/index.xml" rel="self" type="application/rss+xml"/><description>ggplot2</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Thu, 11 Sep 2025 00:00:00 +0000</lastBuildDate><item><title>ggplot2 4.0.0</title><link>https://www.tidyverse.org/blog/2025/09/ggplot2-4-0-0/</link><pubDate>Thu, 11 Sep 2025 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2025/09/ggplot2-4-0-0/</guid><description>&lt;!--
TODO:
* [x] Look over / edit the post's title in the yaml
* [x] Edit (or delete) the description; note this appears in the Twitter card
* [x] Pick category and tags (see existing with [`hugodown::tidy_show_meta()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html))
* [x] Find photo &amp; update yaml metadata
* [x] Create `thumbnail-sq.jpg`; height and width should be equal
* [x] Create `thumbnail-wd.jpg`; width should be >5x height
* [x] [`hugodown::use_tidy_thumbnails()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html)
* [x] Add intro sentence, e.g. the standard tagline for the package
* [x] [`usethis::use_tidy_thanks()`](https://usethis.r-lib.org/reference/use_tidy_thanks.html)
-->
&lt;p>We&amp;rsquo;re tickled pink to announce the release of
&lt;a href="https://ggplot2.tidyverse.org" target="_blank" rel="noopener">ggplot2&lt;/a> 4.0.0. ggplot2 is a system for declaratively creating graphics, based on The Grammar of Graphics. You provide the data, tell ggplot2 how to map variables to aesthetics, what graphical primitives to use, and it takes care of the details.&lt;/p>
&lt;p>The new version can be installed from CRAN using:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/utils/install.packages.html'>install.packages&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"ggplot2"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>This is a substantial release meriting a new major version, and contains a series of changes from a rewrite of the object oriented system from S3 to S7, large new features to smaller quality of life improvements and bugfixes. It is also the 18th anniversary of ggplot2 which is cause for celebration! In this blog post, we will highlight the most salient new features that come with this release. You can see a full list of changes in the
&lt;a href="https://ggplot2.tidyverse.org/news/index.html" target="_blank" rel="noopener">release notes&lt;/a>&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://ggplot2.tidyverse.org'>ggplot2&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://patchwork.data-imaginist.com'>patchwork&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;h2 id="adopting-s7">Adopting S7
&lt;a href="#adopting-s7">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>In ggplot2, we use major version increments to indicate that something at the core of the package has changed. In this release, we have replaced many of ggplot2&amp;rsquo;s S3 objects with S7 objects. Like S3 and S4, S7 is also an object oriented system that uses classes, generics and methods. S7 is a newer system that aims to strike a good balance between the flexibility of S3 and formality of S4.&lt;/p>
&lt;p>Mostly, this change shouldn&amp;rsquo;t be very noticeable when you&amp;rsquo;re just using ggplot2 for building regular plots. At best, you may notice that we&amp;rsquo;re more strictly enforcing types for certain arguments. For example, most ludicrous input is now rejected right away. This is due to how properties in S7 work, which get validated when a new object is instantiated.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>hjust &lt;span class='o'>=&lt;/span> &lt;span class='s'>"foo"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; Error: &amp;lt;ggplot2::element_text&amp;gt; object properties are invalid:&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; - @hjust must be &amp;lt;NULL&amp;gt;, &amp;lt;integer&amp;gt;, or &amp;lt;double&amp;gt;, not &amp;lt;character&amp;gt;&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>However, it may require some adaptation on your end if you use ggplot2&amp;rsquo;s innards in unusual ways. For extension builders, a major benefit of using S7 is that one can now use double dispatch. This is most important for the
&lt;a href="https://ggplot2.tidyverse.org/reference/update_ggplot.html" target="_blank" rel="noopener">&lt;code>update_ggplot()&lt;/code>&lt;/a> function (the successor of
&lt;a href="https://ggplot2.tidyverse.org/reference/update_ggplot.html" target="_blank" rel="noopener">&lt;code>ggplot_add()&lt;/code>&lt;/a>), which determines what happens when you &lt;code>+&lt;/code> an object to a plot. Now with S7, you can control what happens not only for right-hand side objects (which is how it used to work in S3), but also for the left-hand side objects.&lt;/p>
&lt;p>We have put various pieces of backwards compatibility in to not break many packages that assumed the S3 structures of ggplot2. For example, we still return the data property with &lt;code>ggplot()$data&lt;/code>, whereas the S7 way of accessing this should be &lt;code>ggplot()@data&lt;/code>. Expect these to be phased out over time in favour of S7. We are preparing another blog post to help migrating from S3 to S7 for ggplot2 related packages.&lt;/p>
&lt;h2 id="theme-improvements">Theme improvements
&lt;a href="#theme-improvements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Themes in ggplot2 have long served the role of capturing any non-data aspects of styling plots. We have come to realise that the default look of layers, from what the default shape of points is to what the default colour palette is, are also not truly data-driven choices. The idea to put these defaults into themes has been around for a while and Dana Page Seidel did pioneering work implementing this as early as 2018. Now, years of waiting have come to fruition and we&amp;rsquo;re proud to announce this new functionality.&lt;/p>
&lt;h3 id="ink-and-paper">Ink and paper
&lt;a href="#ink-and-paper">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>The way layer defaults are now implemented differs slightly from typical aesthetics you know and love. Whereas layers aesthetics distinguish &lt;code>colour&lt;/code> and &lt;code>fill&lt;/code>, the theme defaults distinguish &lt;code>ink&lt;/code> (foreground) and &lt;code>paper&lt;/code> (background). A boxplot is unreadable without &lt;code>colour&lt;/code>, but is perfectly interpretable without &lt;code>fill&lt;/code>. In the boxplot case, the &lt;code>ink&lt;/code> is thus clearly the &lt;code>colour&lt;/code> whereas &lt;code>paper&lt;/code> is the &lt;code>fill&lt;/code>. In bar charts or histograms, the
&lt;a href="https://clauswilke.com/dataviz/proportional-ink.html" target="_blank" rel="noopener">proportional ink&lt;/a> principle prescribes that the &lt;code>fill&lt;/code> aesthetic is considered foreground, and thus count as &lt;code>ink&lt;/code>. To accommodate special cases, like lines in
&lt;a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html" target="_blank" rel="noopener">&lt;code>geom_smooth()&lt;/code>&lt;/a> or
&lt;a href="https://ggplot2.tidyverse.org/reference/geom_contour.html" target="_blank" rel="noopener">&lt;code>geom_contour()&lt;/code>&lt;/a>, we also added a third &lt;code>accent&lt;/code> option. In short, the theme defaults have role-oriented settings that differ from the property-oriented settings in layers.&lt;/p>
&lt;p>We&amp;rsquo;ve added these three options to all built-in complete themes. Not only propagate these automatically to the layer defaults, they are also used to style additional theme components. You may notice that the panel background colour is a blend between &lt;code>paper&lt;/code> and &lt;code>ink&lt;/code>, which is now how many elements are parametrised in complete themes.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mpg&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>displ&lt;/span>, &lt;span class='nv'>hwy&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_smooth.html'>geom_smooth&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>method &lt;span class='o'>=&lt;/span> &lt;span class='s'>"lm"&lt;/span>, formula &lt;span class='o'>=&lt;/span> &lt;span class='nv'>y&lt;/span> &lt;span class='o'>~&lt;/span> &lt;span class='nv'>x&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_gray&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>paper &lt;span class='o'>=&lt;/span> &lt;span class='s'>"cornsilk"&lt;/span>, ink &lt;span class='o'>=&lt;/span> &lt;span class='s'>"navy"&lt;/span>, accent &lt;span class='o'>=&lt;/span> &lt;span class='s'>"tomato"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-3-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>If you&amp;rsquo;re customising a theme, you can use the &lt;code>theme(geom)&lt;/code> argument to set a collection of defaults. The new function
&lt;a href="https://ggplot2.tidyverse.org/reference/element.html" target="_blank" rel="noopener">&lt;code>element_geom()&lt;/code>&lt;/a> can be used to set these properties. Additionally, if you want a layer to read the property from this theme element, you can use the
&lt;a href="https://ggplot2.tidyverse.org/reference/aes_eval.html" target="_blank" rel="noopener">&lt;code>from_theme()&lt;/code>&lt;/a> function in the mapping to access these variables&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mpg&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>class&lt;/span>, &lt;span class='nv'>displ&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_boxplot.html'>geom_boxplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>colour &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes_eval.html'>from_theme&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>accent&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> geom &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>element_geom&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>accent &lt;span class='o'>=&lt;/span> &lt;span class='s'>"tomato"&lt;/span>, paper &lt;span class='o'>=&lt;/span> &lt;span class='s'>"cornsilk"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-4-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>A second conceptual difference in
&lt;a href="https://ggplot2.tidyverse.org/reference/element.html" target="_blank" rel="noopener">&lt;code>element_geom()&lt;/code>&lt;/a> pertains the the use of lines. In one role, like in a line graph, the line represents the data directly. In a second role, a line serves as separation between two units. For example, you can display countries as polygons and the line connecting the vertices separate out places that are inside a country versus places that are outside that country. These two roles are captured in a &lt;code>linewidth&lt;/code> and &lt;code>linetype&lt;/code> pair and a &lt;code>borderwidth&lt;/code> and &lt;code>bordertype&lt;/code> pair.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>faithful&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>waiting&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_histogram.html'>geom_histogram&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>bins &lt;span class='o'>=&lt;/span> &lt;span class='m'>30&lt;/span>, colour &lt;span class='o'>=&lt;/span> &lt;span class='s'>"black"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_histogram.html'>geom_freqpoly&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>bins &lt;span class='o'>=&lt;/span> &lt;span class='m'>30&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>geom &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>element_geom&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> bordertype &lt;span class='o'>=&lt;/span> &lt;span class='s'>"dashed"&lt;/span>,&lt;/span>
&lt;span> borderwidth &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.2&lt;/span>,&lt;/span>
&lt;span> linewidth &lt;span class='o'>=&lt;/span> &lt;span class='m'>2&lt;/span>,&lt;/span>
&lt;span> linetype &lt;span class='o'>=&lt;/span> &lt;span class='s'>"solid"&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-5-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;h3 id="scales-and-palettes">Scales and palettes
&lt;a href="#scales-and-palettes">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>In addition to the defaults for layers, default palettes are now also encapsulated in the theme. The relevant theme settings have the pattern &lt;code>palette.{aesthetic}.{type}&lt;/code>, where &lt;code>type&lt;/code> can be either discrete or continuous. This allows you to coordinate your colour palettes with the rest of the theme.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mpg&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>displ&lt;/span>, &lt;span class='nv'>hwy&lt;/span>, shape &lt;span class='o'>=&lt;/span> &lt;span class='nv'>drv&lt;/span>, colour &lt;span class='o'>=&lt;/span> &lt;span class='nv'>cty&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> palette.colour.continuous &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"chartreuse"&lt;/span>, &lt;span class='s'>"forestgreen"&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> palette.shape.discrete &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"triangle"&lt;/span>, &lt;span class='s'>"triangle open"&lt;/span>, &lt;span class='s'>"triangle down open"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-6-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>The way this works is that all defaults scales now have &lt;code>palette = NULL&lt;/code> as their default. During plot building, any &lt;code>NULL&lt;/code> palettes are replaced by those declared in the theme.&lt;/p>
&lt;h3 id="shortcuts">Shortcuts
&lt;a href="#shortcuts">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>We like to introduce a new family of short cuts. Looking at code in the wild, we&amp;rsquo;ve come to realise that theme declarations are very often chaotic. The
&lt;a href="https://ggplot2.tidyverse.org/reference/theme.html" target="_blank" rel="noopener">&lt;code>theme()&lt;/code>&lt;/a> functions has lots of arguments, long argument names (hello there, &lt;code>axis.minor.ticks.length.x.bottom&lt;/code>!) and very little structure. To make themes a little bit more digestible, we&amp;rsquo;ve created the following helper functions:&lt;/p>
&lt;ul>
&lt;li>
&lt;a href="https://ggplot2.tidyverse.org/reference/subtheme.html" target="_blank" rel="noopener">&lt;code>theme_sub_axis()&lt;/code>&lt;/a>
&lt;ul>
&lt;li>
&lt;a href="https://ggplot2.tidyverse.org/reference/subtheme.html" target="_blank" rel="noopener">&lt;code>theme_sub_axis_x()&lt;/code>&lt;/a>
&lt;ul>
&lt;li>
&lt;a href="https://ggplot2.tidyverse.org/reference/subtheme.html" target="_blank" rel="noopener">&lt;code>theme_sub_axis_bottom()&lt;/code>&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://ggplot2.tidyverse.org/reference/subtheme.html" target="_blank" rel="noopener">&lt;code>theme_sub_axis_top()&lt;/code>&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;a href="https://ggplot2.tidyverse.org/reference/subtheme.html" target="_blank" rel="noopener">&lt;code>theme_sub_axis_y()&lt;/code>&lt;/a>
&lt;ul>
&lt;li>
&lt;a href="https://ggplot2.tidyverse.org/reference/subtheme.html" target="_blank" rel="noopener">&lt;code>theme_sub_axis_left()&lt;/code>&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://ggplot2.tidyverse.org/reference/subtheme.html" target="_blank" rel="noopener">&lt;code>theme_sub_axis_right()&lt;/code>&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;a href="https://ggplot2.tidyverse.org/reference/subtheme.html" target="_blank" rel="noopener">&lt;code>theme_sub_legend()&lt;/code>&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://ggplot2.tidyverse.org/reference/subtheme.html" target="_blank" rel="noopener">&lt;code>theme_sub_panel()&lt;/code>&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://ggplot2.tidyverse.org/reference/subtheme.html" target="_blank" rel="noopener">&lt;code>theme_sub_plot()&lt;/code>&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://ggplot2.tidyverse.org/reference/subtheme.html" target="_blank" rel="noopener">&lt;code>theme_sub_strip()&lt;/code>&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>These helper functions pass on their arguments to
&lt;a href="https://ggplot2.tidyverse.org/reference/theme.html" target="_blank" rel="noopener">&lt;code>theme()&lt;/code>&lt;/a> after they&amp;rsquo;ve prepended a relevant prefix. For example, using &lt;code>theme_sub_legend(justification)&lt;/code> will translate to &lt;code>theme(legend.justification)&lt;/code>. When you have &amp;gt;1 theme element to change in a cluster of settings, it quickly becomes less typing to enlist the relevant shortcut. As a bonus, your theme code will tend to self-organise and become somewhat more readable.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='c'># Tired, verbose, chaotic&lt;/span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> panel.widths &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/unit.html'>unit&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>5&lt;/span>, &lt;span class='s'>"cm"&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> axis.ticks.x &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>element_line&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>colour &lt;span class='o'>=&lt;/span> &lt;span class='s'>"red"&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> axis.ticks.length.x &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/unit.html'>unit&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>5&lt;/span>, &lt;span class='s'>"mm"&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> panel.background &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>element_rect&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>fill &lt;span class='o'>=&lt;/span> &lt;span class='kc'>NA&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> panel.spacing.x &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/unit.html'>unit&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>5&lt;/span>, &lt;span class='s'>"mm"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='c'># Wired, terse, orderly&lt;/span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/subtheme.html'>theme_sub_axis_x&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> ticks &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>element_line&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>colour &lt;span class='o'>=&lt;/span> &lt;span class='s'>"red"&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> ticks.length &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/unit.html'>unit&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>5&lt;/span>, &lt;span class='s'>"mm"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/subtheme.html'>theme_sub_panel&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> widths &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/unit.html'>unit&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>5&lt;/span>, &lt;span class='s'>"cm"&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> spacing.x &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/unit.html'>unit&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>5&lt;/span>, &lt;span class='s'>"mm"&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> background &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>element_rect&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>fill &lt;span class='o'>=&lt;/span> &lt;span class='kc'>NA&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='o'>)&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>In addition to shortcuts for clusters of theme elements, we&amp;rsquo;ve also added a few variants to declare margins.&lt;/p>
&lt;ul>
&lt;li>
&lt;a href="https://ggplot2.tidyverse.org/reference/element.html" target="_blank" rel="noopener">&lt;code>margin_auto()&lt;/code>&lt;/a> sets the margins in a CSS-like fashion similar to the
&lt;a href="https://developer.mozilla.org/en-US/docs/Web/CSS/margin" target="_blank" rel="noopener">&lt;code>margin&lt;/code>&lt;/a> and
&lt;a href="https://developer.mozilla.org/en-US/docs/Web/CSS/padding" target="_blank" rel="noopener">&lt;code>padding&lt;/code>&lt;/a> property.
&lt;ul>
&lt;li>&lt;code>margin_auto(1)&lt;/code> sets all four sides at once. It expands to &lt;code>margin(t = 1, r = 1, b = 1, l = 1)&lt;/code>.&lt;/li>
&lt;li>&lt;code>margin_auto(1, 2)&lt;/code> sets horizontal and vertical sides. It expands to &lt;code>margin(t = 1, r = 2, b = 1, l = 2)&lt;/code>.&lt;/li>
&lt;li>&lt;code>margin_auto(1, 2, 3)&lt;/code> expands to &lt;code>margin(t = 1, r = 2, b = 3, l = 2)&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;a href="https://ggplot2.tidyverse.org/reference/element.html" target="_blank" rel="noopener">&lt;code>margin_part()&lt;/code>&lt;/a> has &lt;code>NA&lt;/code> units as default, which will get replaced when the theme gets resolved. It roughly equates to &amp;lsquo;set some of the sides, keep others as they are&amp;rsquo;.&lt;/li>
&lt;/ul>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/merge_element.html'>merge_element&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>margin_part&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>r &lt;span class='o'>=&lt;/span> &lt;span class='m'>20&lt;/span>&lt;span class='o'>)&lt;/span>, &lt;span class='c'># child&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>margin_auto&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>10&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='c'># parent&lt;/span>&lt;/span>
&lt;span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; [1] 10points 20points 10points 10points&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;h3 id="new-settings">New settings
&lt;a href="#new-settings">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>To coordinate (non-text) margins and spacings in a theme, we&amp;rsquo;ve introduced &lt;code>spacing&lt;/code> and &lt;code>margins&lt;/code> as new root elements in the theme. Other spacings and margins at the leaf elements inherit from (scale with) these root elements. To facilitate the different spacings in ggplot2, unit elements can now use
&lt;a href="https://ggplot2.tidyverse.org/reference/element.html" target="_blank" rel="noopener">&lt;code>rel()&lt;/code>&lt;/a> to modify the inherited value. For example the default &lt;code>axis.ticks.length&lt;/code> is now &lt;code>rel(0.5)&lt;/code>, making the y-axis ticks 0.5 cm in the plot below. If we set the &lt;code>axis.ticks.length.x&lt;/code> to &lt;code>rel(2)&lt;/code>, it will double the value coming from &lt;code>axis.ticks.length&lt;/code>, not double the value of &lt;code>spacing&lt;/code>.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>p&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>penguins&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>bill_dep&lt;/span>, &lt;span class='nv'>bill_len&lt;/span>, colour &lt;span class='o'>=&lt;/span> &lt;span class='nv'>species&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>na.rm &lt;span class='o'>=&lt;/span> &lt;span class='kc'>TRUE&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>p&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> spacing &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/unit.html'>unit&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>1&lt;/span>, &lt;span class='s'>"cm"&lt;/span>&lt;span class='o'>)&lt;/span>, &lt;/span>
&lt;span> margins &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>margin_auto&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>1&lt;/span>, unit &lt;span class='o'>=&lt;/span> &lt;span class='s'>"cm"&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> axis.ticks.length.x &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>rel&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>2&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-9-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>We also made it easier to set plot sizes. Using the &lt;code>panel.widths&lt;/code> and &lt;code>panel.heights&lt;/code> arguments, you can control the sizes of the panels. This mechanism is distinct from using &lt;code>ggsave(width, height)&lt;/code>, where the whole plot, including annotations such as axes and titles is included. There are two ways to use these arguments:&lt;/p>
&lt;ul>
&lt;li>Give a vector of units: each one will be applied to a panel separately and the vector will be recycled to fit the number of panels.&lt;/li>
&lt;li>Give a single unit: which sets the total panel area (including panel spacings and inner axes) to that size.&lt;/li>
&lt;/ul>
&lt;p>Naturally, if you only have a single panel, these approaches are identical. If you have multiple panels and you want to set individual panels all to the same size (as opposed to the total size), you can take advantage of the recycling and use a length 2 unit vector.&lt;/p>
&lt;p>In the plots below, you can notice that the panels span a different width despite the units adding up to the same amount (9 cm). This is because the &amp;lsquo;single unit&amp;rsquo; approach also includes the panel spacings, but not the &amp;lsquo;separate units&amp;rsquo; approach.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>p1&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nv'>p&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/facet_grid.html'>facet_grid&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>~&lt;/span> &lt;span class='nv'>island&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>title &lt;span class='o'>=&lt;/span> &lt;span class='s'>"Separate units (per panel)"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='c'># Using the new shortcut for panels&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/subtheme.html'>theme_sub_panel&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> widths &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/unit.html'>unit&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>2&lt;/span>, &lt;span class='m'>3&lt;/span>, &lt;span class='m'>4&lt;/span>&lt;span class='o'>)&lt;/span>, &lt;span class='s'>"cm"&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> heights &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/unit.html'>unit&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>3&lt;/span>, &lt;span class='s'>"cm"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>p2&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nv'>p&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/facet_grid.html'>facet_grid&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>~&lt;/span> &lt;span class='nv'>island&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>title &lt;span class='o'>=&lt;/span> &lt;span class='s'>"Single unit (all panels)"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/subtheme.html'>theme_sub_panel&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> widths &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/unit.html'>unit&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>9&lt;/span>, &lt;span class='s'>"cm"&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> heights &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/unit.html'>unit&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>3&lt;/span>, &lt;span class='s'>"cm"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>p1&lt;/span> &lt;span class='o'>/&lt;/span> &lt;span class='nv'>p2&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-10-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;h2 id="labels">Labels
&lt;a href="#labels">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>We have added new ways that a plot retrieves labels for your variables. It is an informal convention in several packages including gt, Hmisc, labelled and others to use the &amp;lsquo;label&amp;rsquo; attribute to store human readable labels for vectors. Now ggplot2 joins this convention and uses the &amp;lsquo;label&amp;rsquo; attribute as the default label for a variable if present.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='c'># The penguins dataset was incorporated into base R 4.5&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>df&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nv'>penguins&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='c'># Manually set label attributes.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'># Other packages may offer better tooling than this.&lt;/span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/attr.html'>attr&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>df&lt;/span>&lt;span class='o'>$&lt;/span>&lt;span class='nv'>species&lt;/span>, &lt;span class='s'>"label"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='s'>"Penguin Species"&lt;/span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/attr.html'>attr&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>df&lt;/span>&lt;span class='o'>$&lt;/span>&lt;span class='nv'>bill_dep&lt;/span>, &lt;span class='s'>"label"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='s'>"Bill depth (mm)"&lt;/span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/attr.html'>attr&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>df&lt;/span>&lt;span class='o'>$&lt;/span>&lt;span class='nv'>bill_len&lt;/span>, &lt;span class='s'>"label"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='s'>"Bill length (mm)"&lt;/span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/attr.html'>attr&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>df&lt;/span>&lt;span class='o'>$&lt;/span>&lt;span class='nv'>body_mass&lt;/span>, &lt;span class='s'>"label"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='s'>"Body mass (g)"&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>df&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>bill_dep&lt;/span>, &lt;span class='nv'>bill_len&lt;/span>, colour &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/MathFun.html'>sqrt&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>body_mass&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>na.rm &lt;span class='o'>=&lt;/span> &lt;span class='kc'>TRUE&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-11-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>It has also been entrenched in some workflows to use a &amp;lsquo;data dictionary&amp;rsquo; or codebook. For labelling purposes these dictionaries often contain column metadata that include labels or descriptions for variables (columns) in the dataset. To make it easier to work with column labels, we added the &lt;code>labs(dictionary)&lt;/code> argument. It takes a named vector of labels, that can easily be generated from a data dictionary by
&lt;a href="https://rdrr.io/r/stats/setNames.html" target="_blank" rel="noopener">&lt;code>setNames()&lt;/code>&lt;/a> or
&lt;a href="https://dplyr.tidyverse.org/reference/pull.html" target="_blank" rel="noopener">&lt;code>dplyr::pull()&lt;/code>&lt;/a>.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>dict&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>tibble&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://tibble.tidyverse.org/reference/tribble.html'>tribble&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>~&lt;/span>&lt;span class='nv'>var&lt;/span>, &lt;span class='o'>~&lt;/span>&lt;span class='nv'>label&lt;/span>,&lt;/span>
&lt;span> &lt;span class='s'>"species"&lt;/span>, &lt;span class='s'>"Penguin Species"&lt;/span>,&lt;/span>
&lt;span> &lt;span class='s'>"bill_dep"&lt;/span>, &lt;span class='s'>"Bill depth (mm)"&lt;/span>,&lt;/span>
&lt;span> &lt;span class='s'>"bill_len"&lt;/span>, &lt;span class='s'>"Bill length (mm)"&lt;/span>,&lt;/span>
&lt;span> &lt;span class='s'>"body_mass"&lt;/span>, &lt;span class='s'>"Body mass (g)"&lt;/span>&lt;/span>
&lt;span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>penguins&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>bill_dep&lt;/span>, &lt;span class='nv'>bill_len&lt;/span>, colour &lt;span class='o'>=&lt;/span> &lt;span class='nv'>body_mass&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>na.rm &lt;span class='o'>=&lt;/span> &lt;span class='kc'>TRUE&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='c'># Or:&lt;/span>&lt;/span>
&lt;span> &lt;span class='c'># labs(dictionary = dplyr::pull(dict, label, name = var))&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>dictionary &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/stats/setNames.html'>setNames&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>dict&lt;/span>&lt;span class='o'>$&lt;/span>&lt;span class='nv'>label&lt;/span>, &lt;span class='nv'>dict&lt;/span>&lt;span class='o'>$&lt;/span>&lt;span class='nv'>var&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-12-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>One benefit to the label attributes or data dictionary approaches is that it is linked to your variables, not aesthetics. This means you can easily rearrange your aesthetics for a different plot, without having to painstakingly reorient the labels towards the correct aesthetics.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/get_last_plot.html'>last_plot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>body_mass&lt;/span>, &lt;span class='nv'>bill_len&lt;/span>, colour &lt;span class='o'>=&lt;/span> &lt;span class='nv'>species&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-13-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>There are a few caveats to these label attributes and data dictionary approaches though:&lt;/p>
&lt;ul>
&lt;li>If the aesthetic is not a pure variable name the label is not used. You can see this in the &lt;code>sqrt(body_mass)&lt;/code> in the first example, which does not use the &amp;lsquo;Body mass (g)&amp;rsquo; label. We assume when a variable is adjusted in this way, this would need to be reflected in the label itself. It would therefore be inappropriate to use the label of the unadjusted variable. Use of the
&lt;a href="https://ggplot2.tidyverse.org/articles/ggplot2-in-packages.html#using-aes-and-vars-in-a-package-function" target="_blank" rel="noopener">&lt;code>.data&lt;/code>-pronoun&lt;/a> counts as a pure variable name for labelling purposes.&lt;/li>
&lt;li>Some attributes are more stable than others, and it is not ggplot2&amp;rsquo;s responsibility to babysit attributes. For example using &lt;code>head(&amp;lt;data.frame&amp;gt;)&lt;/code> will typically drop attributes from atomic columns, whereas &lt;code>head(&amp;lt;tibble&amp;gt;)&lt;/code> will not.&lt;/li>
&lt;/ul>
&lt;p>In addition, we&amp;rsquo;re also allowing to use functions in all the places you can declare labels. The
&lt;a href="https://ggplot2.tidyverse.org/reference/labs.html" target="_blank" rel="noopener">&lt;code>labs()&lt;/code>&lt;/a> function, scale names and guide titles now accept functions that take in the labels generated by the lower hierarchies and return amended labels. It should be spelled out that the hierarchy from lowest priority to highest priority is the following:&lt;/p>
&lt;ol>
&lt;li>The expression given in
&lt;a href="https://ggplot2.tidyverse.org/reference/aes.html" target="_blank" rel="noopener">&lt;code>aes()&lt;/code>&lt;/a>.&lt;/li>
&lt;li>The entry in &lt;code>labs(dictionary)&lt;/code>.&lt;/li>
&lt;li>The label attribute of the column.&lt;/li>
&lt;li>The entry in &lt;code>labs(&amp;lt;aesthetic&amp;gt; = &amp;lt;label&amp;gt;)&lt;/code>.&lt;/li>
&lt;li>The &lt;code>scale_*(name)&lt;/code> argument.&lt;/li>
&lt;li>The &lt;code>guide_*(title)&lt;/code> argument.&lt;/li>
&lt;/ol>
&lt;p>We can see this hierarchy in action in the plot below: the function in the axis guide transforms the input from the
&lt;a href="https://ggplot2.tidyverse.org/reference/labs.html" target="_blank" rel="noopener">&lt;code>labs()&lt;/code>&lt;/a> function.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>penguins&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>bill_dep&lt;/span>, &lt;span class='nv'>bill_len&lt;/span>, colour &lt;span class='o'>=&lt;/span> &lt;span class='nv'>species&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>na.rm &lt;span class='o'>=&lt;/span> &lt;span class='kc'>TRUE&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/scale_colour_discrete.html'>scale_colour_discrete&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>name &lt;span class='o'>=&lt;/span> &lt;span class='nv'>toupper&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/guides.html'>guides&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/guide_axis.html'>guide_axis&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>title &lt;span class='o'>=&lt;/span> &lt;span class='nf'>tools&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nv'>&lt;a href='https://rdrr.io/r/tools/toTitleCase.html'>toTitleCase&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> y &lt;span class='o'>=&lt;/span> \&lt;span class='o'>(&lt;/span>&lt;span class='nv'>x&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/paste.html'>paste0&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>x&lt;/span>, &lt;span class='s'>" variable"&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> x &lt;span class='o'>=&lt;/span> &lt;span class='s'>"the label for the x variable"&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-14-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>In addition to the
&lt;a href="https://ggplot2.tidyverse.org/reference/labs.html" target="_blank" rel="noopener">&lt;code>labs()&lt;/code>&lt;/a>-labels, we also made labelling the levels of discrete scales easier. When the scale&amp;rsquo;s &lt;code>breaks&lt;/code> are named, the scale&amp;rsquo;s labels will adopt the break&amp;rsquo;s names by default. This already was the case in continuous scales but now discrete scales have parity. A nice benefit of specifying labels this way is that they are directly linked to the breaks, which prevents the common mistake of specifying the &lt;code>labels&lt;/code> argument without also setting the &lt;code>breaks&lt;/code> argument, which may accidentally mismatch labels.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>penguins&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>bill_dep&lt;/span>, &lt;span class='nv'>bill_len&lt;/span>, colour &lt;span class='o'>=&lt;/span> &lt;span class='nv'>species&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>na.rm &lt;span class='o'>=&lt;/span> &lt;span class='kc'>TRUE&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/scale_colour_discrete.html'>scale_colour_discrete&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> breaks &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> &lt;span class='s'>"Pygoscelis adeliae"&lt;/span> &lt;span class='o'>=&lt;/span> &lt;span class='s'>"Adelie"&lt;/span>,&lt;/span>
&lt;span> &lt;span class='s'>"Pygoscelis papua"&lt;/span> &lt;span class='o'>=&lt;/span> &lt;span class='s'>"Gentoo"&lt;/span>,&lt;/span>
&lt;span> &lt;span class='s'>"Pygoscelis antarcticus"&lt;/span> &lt;span class='o'>=&lt;/span> &lt;span class='s'>"Chinstrap"&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-15-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;h2 id="discrete-scales">Discrete scales
&lt;a href="#discrete-scales">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>In this release we have tried to improve the &amp;lsquo;freedom&amp;rsquo; afforded by discrete position scales. Previously, discrete values were always mapped to an integer sequence starting at 1 going up to the number of levels. Instead, we wanted to allow for different mappings that deviated from that pattern. While it is a bit foreign for position scales, ggplot2 already had a mechanism to assign alternate values to the levels of a scale: palettes! You can now use the &lt;code>palette&lt;/code> argument like you would for non-position scales. It makes it easier to indicate any grouping structure along the axis, like separating the orange juice (OJ) groups from the vitamin C (VC) groups in the plot below.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>ToothGrowth&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/interaction.html'>interaction&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>dose&lt;/span>, &lt;span class='nv'>supp&lt;/span>, sep &lt;span class='o'>=&lt;/span> &lt;span class='s'>"\n"&lt;/span>&lt;span class='o'>)&lt;/span>, &lt;span class='nv'>len&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_boxplot.html'>geom_boxplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/scale_discrete.html'>scale_x_discrete&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> palette &lt;span class='o'>=&lt;/span> &lt;span class='nf'>scales&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://scales.r-lib.org/reference/pal_manual.html'>pal_manual&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>1&lt;/span>&lt;span class='o'>:&lt;/span>&lt;span class='m'>3&lt;/span>, &lt;span class='m'>5&lt;/span>&lt;span class='o'>:&lt;/span>&lt;span class='m'>7&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-16-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>A second improvement we made to the placement of discrete levels is that we give greater control over the continuous limits. The continuous limits of a discrete scale used to be an implementation detail that kept track of any &amp;lsquo;additional space&amp;rsquo; layers were taking up, for example because they use a &lt;code>width&lt;/code> parameter. Now, these can be declared directly, making it easier to synchronise limits across plots or even facets. In the plot below, we&amp;rsquo;re using the &lt;code>continuous.limits&lt;/code> argument to ensure that all the bars have the same width; regardless of how many levels the x scale has to accommodate.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>p1&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mpg&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>class&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_bar.html'>geom_bar&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/facet_wrap.html'>facet_wrap&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>~&lt;/span> &lt;span class='nv'>drv&lt;/span>, ncol &lt;span class='o'>=&lt;/span> &lt;span class='m'>1&lt;/span>, scales &lt;span class='o'>=&lt;/span> &lt;span class='s'>"free_x"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>p2&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nv'>p1&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/scale_discrete.html'>scale_x_discrete&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>continuous.limits &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>1&lt;/span>, &lt;span class='m'>5&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>p1&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>title &lt;span class='o'>=&lt;/span> &lt;span class='s'>"Free limits"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&lt;/span> &lt;/span>
&lt;span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>p2&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>title &lt;span class='o'>=&lt;/span> &lt;span class='s'>"Fixed limits"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-17-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>Also absent from discrete scales was the ability to set minor breaks. Admittedly, they are less useful than minor breaks in continuous scales. In contrast to discrete (major) &lt;code>breaks&lt;/code>, &lt;code>minor_breaks&lt;/code> uses numeric input instead, allowing you to fine-tune placement without being bound by the scale&amp;rsquo;s levels. With a few tweaks of the theme, you can conceivably use minor breaks to visually separate levels as an alternative to the centre-lines for major breaks.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>p1&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mpg&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>drv&lt;/span>, &lt;span class='nv'>hwy&lt;/span>, colour &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/factor.html'>factor&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>year&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>position &lt;span class='o'>=&lt;/span> &lt;span class='s'>"jitterdodge"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/guides.html'>guides&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>colour &lt;span class='o'>=&lt;/span> &lt;span class='s'>"none"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/scale_discrete.html'>scale_x_discrete&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> minor_breaks &lt;span class='o'>=&lt;/span> &lt;span class='nf'>scales&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://scales.r-lib.org/reference/breaks_width.html'>breaks_width&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>1&lt;/span>, offset &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.5&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> &lt;span class='c'># To show that the minor axis ticks take on these values&lt;/span>&lt;/span>
&lt;span> guide &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/guide_axis.html'>guide_axis&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>minor.ticks &lt;span class='o'>=&lt;/span> &lt;span class='kc'>TRUE&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>p2&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nv'>p1&lt;/span> &lt;span class='o'>+&lt;/span> &lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>panel.grid.major.x &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>element_blank&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/subtheme.html'>theme_sub_axis_bottom&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>ticks &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>element_blank&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>, minor.ticks &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>element_line&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>p1&lt;/span> &lt;span class='o'>|&lt;/span> &lt;span class='nv'>p2&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-18-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>Discrete position scales now also have access to secondary axes. In contrast to continuous scales, discrete scales don&amp;rsquo;t support transformations. So instead of
&lt;a href="https://ggplot2.tidyverse.org/reference/sec_axis.html" target="_blank" rel="noopener">&lt;code>sec_axis()&lt;/code>&lt;/a>, it is recommended to use
&lt;a href="https://ggplot2.tidyverse.org/reference/sec_axis.html" target="_blank" rel="noopener">&lt;code>dup_axis()&lt;/code>&lt;/a>. To allow for arbitrary positions for &lt;code>dup_axis(breaks)&lt;/code>, these can take numeric values or one of the discrete levels. They are not truly useful to for showing two aligned datasets of different scales, but they can serve as annotations. For example, they can display some summary statistics about the groups.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mpg&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>class&lt;/span>, &lt;span class='nv'>cty&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_boxplot.html'>geom_boxplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/scale_discrete.html'>scale_x_discrete&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> sec.axis &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/sec_axis.html'>dup_axis&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> name &lt;span class='o'>=&lt;/span> &lt;span class='s'>"Counts"&lt;/span>,&lt;/span>
&lt;span> &lt;span class='c'># You can use numeric input for breaks&lt;/span>&lt;/span>
&lt;span> breaks &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/seq.html'>seq_len&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/length.html'>length&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/unique.html'>unique&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mpg&lt;/span>&lt;span class='o'>$&lt;/span>&lt;span class='nv'>class&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> &lt;span class='c'># Watch out for the order of `table()` and your levels!&lt;/span>&lt;/span>
&lt;span> labels &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/paste.html'>paste0&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"n = "&lt;/span>, &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/table.html'>table&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mpg&lt;/span>&lt;span class='o'>$&lt;/span>&lt;span class='nv'>class&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-19-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;h2 id="position-aesthetics">Position aesthetics
&lt;a href="#position-aesthetics">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Layers consist of three components: stats, geoms and positions. While stats and geoms have their own aesthetics, like &lt;code>weight&lt;/code> or &lt;code>linewidth&lt;/code>, the position adjustments did not. In this release, positions can also declare their own aesthetics. You can map data to these aesthetics like you would for geom or stat aesthetics.&lt;/p>
&lt;p>In
&lt;a href="https://ggplot2.tidyverse.org/reference/position_nudge.html" target="_blank" rel="noopener">&lt;code>position_nudge()&lt;/code>&lt;/a> for example, we now have the &lt;code>nudge_x&lt;/code> and &lt;code>nudge_y&lt;/code> parameters as aesthetics. &lt;sup id="fnref:2">&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref">2&lt;/a>&lt;/sup> Two benefits are that we can now use expressions in
&lt;a href="https://ggplot2.tidyverse.org/reference/aes.html" target="_blank" rel="noopener">&lt;code>aes()&lt;/code>&lt;/a> to declare these and they are vectorised. We use that advantage in the plot below where we use
&lt;a href="https://rdrr.io/r/base/sign.html" target="_blank" rel="noopener">&lt;code>sign()&lt;/code>&lt;/a> in a divergent bar chart to determine the left-right direction of the nudge.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='c'># Taken from:&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'># https://ourworldindata.org/grapher/share-electricity-coal?tab=table&amp;amp;tableFilter=continents&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>coal&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>tibble&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://tibble.tidyverse.org/reference/tribble.html'>tribble&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>~&lt;/span>&lt;span class='nv'>continent&lt;/span>, &lt;span class='o'>~&lt;/span>&lt;span class='nv'>pct_1985&lt;/span>, &lt;span class='o'>~&lt;/span>&lt;span class='nv'>pct_2024&lt;/span>,&lt;/span>
&lt;span> &lt;span class='s'>"Africa"&lt;/span>, &lt;span class='m'>53.87&lt;/span>, &lt;span class='m'>24.68&lt;/span>,&lt;/span>
&lt;span> &lt;span class='s'>"Asia"&lt;/span>, &lt;span class='m'>32.60&lt;/span>, &lt;span class='m'>51.19&lt;/span>,&lt;/span>
&lt;span> &lt;span class='s'>"Europe"&lt;/span>, &lt;span class='m'>32.84&lt;/span>, &lt;span class='m'>12.91&lt;/span>,&lt;/span>
&lt;span> &lt;span class='s'>"North America"&lt;/span>, &lt;span class='m'>48.93&lt;/span>, &lt;span class='m'>13.79&lt;/span>,&lt;/span>
&lt;span> &lt;span class='s'>"South America"&lt;/span>, &lt;span class='m'>2.91&lt;/span>, &lt;span class='m'>3.31&lt;/span>,&lt;/span>
&lt;span> &lt;span class='s'>"Oceania"&lt;/span>, &lt;span class='m'>58.75&lt;/span>, &lt;span class='m'>39.26&lt;/span>&lt;/span>
&lt;span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>dplyr&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>pp_difference &lt;span class='o'>=&lt;/span> &lt;span class='nv'>pct_2024&lt;/span> &lt;span class='o'>-&lt;/span> &lt;span class='nv'>pct_1985&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>coal&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>pp_difference&lt;/span>, &lt;span class='nv'>continent&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_bar.html'>geom_col&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_text.html'>geom_text&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>nudge_x &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/sign.html'>sign&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>pp_difference&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>*&lt;/span> &lt;span class='m'>3&lt;/span>, &lt;/span>
&lt;span> label &lt;span class='o'>=&lt;/span> &lt;span class='nv'>pp_difference&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='s'>"Change in electricity generated by coal (pp)"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-20-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>A second position adjustment that has gotten its own aesthetic is
&lt;a href="https://ggplot2.tidyverse.org/reference/position_dodge.html" target="_blank" rel="noopener">&lt;code>position_dodge()&lt;/code>&lt;/a>. In the plot below, we see for sports where we do not have records for both &amp;lsquo;sex = &amp;ldquo;f&amp;rdquo;&amp;rsquo; and &amp;lsquo;sex = &amp;ldquo;m&amp;rdquo;&amp;rsquo; only one box is drawn just beneath the centre line. This is true for &amp;lsquo;water polo&amp;rsquo; where we have no records for &amp;lsquo;f&amp;rsquo;, but also netball and gymnastics where there are no records for &amp;lsquo;m&amp;rsquo;. For sports where there are records for both sexes, the &amp;ldquo;f&amp;rdquo; is depicted beneath the centre line and &amp;ldquo;m&amp;rdquo; is depicted above the centre line. Depending on your aesthetic sensibilities, this inconsistency can be a major pain.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>sports&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"water polo"&lt;/span>, &lt;span class='s'>"swimming"&lt;/span>, &lt;span class='s'>"gymnastics"&lt;/span>, &lt;span class='s'>"field"&lt;/span>, &lt;span class='s'>"netball"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>p&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>ggridges&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nv'>&lt;a href='https://wilkelab.org/ggridges/reference/Aus_athletes.html'>Aus_athletes&lt;/a>&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>dplyr&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/filter.html'>filter&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>sport&lt;/span> &lt;span class='o'>&lt;a href='https://rdrr.io/r/base/match.html'>%in%&lt;/a>&lt;/span> &lt;span class='nv'>sports&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>height&lt;/span>, &lt;span class='nv'>sport&lt;/span>, fill &lt;span class='o'>=&lt;/span> &lt;span class='nv'>sex&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_boxplot.html'>geom_boxplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>position &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/position_dodge.html'>position_dodge&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>preserve &lt;span class='o'>=&lt;/span> &lt;span class='s'>"single"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>p&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-21-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>The origin of this inconsistency is that ggplot2 doesn&amp;rsquo;t have an understanding of groups other than that &lt;em>they exist&lt;/em>. It doesn&amp;rsquo;t know that groups are formed by &lt;code>fill&lt;/code> and what levels populate this aesthetic. To break ggplot2&amp;rsquo;s ignorance, we now have the &lt;code>order&lt;/code> aesthetic for
&lt;a href="https://ggplot2.tidyverse.org/reference/position_dodge.html" target="_blank" rel="noopener">&lt;code>position_dodge()&lt;/code>&lt;/a>.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>p&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>order &lt;span class='o'>=&lt;/span> &lt;span class='nv'>sex&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-22-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>Using that aesthetic to the position adjustment soothes the soul by putting all the right groups in the right places.&lt;/p>
&lt;h2 id="facets">Facets
&lt;a href="#facets">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>
&lt;h3 id="wrapping-directions">Wrapping directions
&lt;a href="#wrapping-directions">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>The
&lt;a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" target="_blank" rel="noopener">&lt;code>facet_wrap()&lt;/code>&lt;/a> function has had two arguments controlling the layout: &lt;code>dir&lt;/code> which can be &lt;code>&amp;quot;h&amp;quot;&lt;/code> or &lt;code>&amp;quot;v&amp;quot;&lt;/code>, and &lt;code>as.table&lt;/code> with can be &lt;code>TRUE&lt;/code> or &lt;code>FALSE&lt;/code>. Together, these gave a total of 4 layout options. Arguably there are 8 sensible options in total though, so we were missing out on the layout. To simplify having to juggle two arguments for 4 options, we&amp;rsquo;re now just using one argument (&lt;code>dir&lt;/code>) for 8 options. The new options are all two letter codes using combinations of &lt;code>t&lt;/code> (top), &lt;code>r&lt;/code> (right), &lt;code>b&lt;/code> (bottom) and &lt;code>l&lt;/code> (left). The combination will tell you where the first facet level will be. Both &lt;code>br&lt;/code> and &lt;code>rb&lt;/code> will start in the bottom-right with the first facet. Then the order will tell you about the filling direction, where starting with &lt;code>b&lt;/code> will fill bottom-to-top and starting with &lt;code>r&lt;/code> will fill right-to-left.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>p&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mpg&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>displ&lt;/span>, &lt;span class='nv'>hwy&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>p1&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nv'>p&lt;/span> &lt;span class='o'>+&lt;/span> &lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/facet_wrap.html'>facet_wrap&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>~&lt;/span> &lt;span class='nf'>vctrs&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://vctrs.r-lib.org/reference/vec_group.html'>vec_group_id&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>class&lt;/span>&lt;span class='o'>)&lt;/span>, dir &lt;span class='o'>=&lt;/span> &lt;span class='s'>"br"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>title &lt;span class='o'>=&lt;/span> &lt;span class='s'>"dir = 'br'"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>p2&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nv'>p&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/facet_wrap.html'>facet_wrap&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>~&lt;/span> &lt;span class='nf'>vctrs&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://vctrs.r-lib.org/reference/vec_group.html'>vec_group_id&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>class&lt;/span>&lt;span class='o'>)&lt;/span>, dir &lt;span class='o'>=&lt;/span> &lt;span class='s'>"rb"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>title &lt;span class='o'>=&lt;/span> &lt;span class='s'>"dir = 'rb'"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>p1&lt;/span> &lt;span class='o'>|&lt;/span> &lt;span class='nv'>p2&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-23-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>To cover all 8 options, we list them here:&lt;/p>
&lt;ul>
&lt;li>&lt;code>&amp;quot;lt&amp;quot;&lt;/code>: start in the top-left, start filling left-to-right.&lt;/li>
&lt;li>&lt;code>&amp;quot;tl&amp;quot;&lt;/code>: start in the top-left, start filling top-to-bottom.&lt;/li>
&lt;li>&lt;code>&amp;quot;lb&amp;quot;&lt;/code>: start in the bottom-left, start filling left-to-right.&lt;/li>
&lt;li>&lt;code>&amp;quot;bl&amp;quot;&lt;/code>: start in the bottom-left, start filling bottom-to-top.&lt;/li>
&lt;li>&lt;code>&amp;quot;rt&amp;quot;&lt;/code>: start in the top-right, start filling right-to-left.&lt;/li>
&lt;li>&lt;code>&amp;quot;tr&amp;quot;&lt;/code>: start in the top-right, start filling top-to-bottom.&lt;/li>
&lt;li>&lt;code>&amp;quot;rb&amp;quot;&lt;/code>: start in the bottom-right, start filling right-to-left.&lt;/li>
&lt;li>&lt;code>&amp;quot;br&amp;quot;&lt;/code> start in the bottom-right, start filling bottom-to-top.&lt;/li>
&lt;/ul>
&lt;h3 id="free-space-in-wrapping">Free space in wrapping
&lt;a href="#free-space-in-wrapping">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>The &lt;code>facet_grid(space)&lt;/code> argument can ensure that panels are allocated space in proportion to their data range. This works because all data within a row share a y-axis, and data within a column share an x-axis. Historically, this argument did not have an equivalent in
&lt;a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" target="_blank" rel="noopener">&lt;code>facet_wrap()&lt;/code>&lt;/a> because axes aren&amp;rsquo;t shared. We realised that there is a narrow circumstance in which each column has a consistent axis, and this is when there is only one row. The inverse also holds true for rows when there is only one column. In this release, we&amp;rsquo;ve added &lt;code>facet_wrap(space)&lt;/code> that sets the panel sizes in these circumstances.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>penguins&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>bill_dep&lt;/span>, &lt;span class='nv'>bill_len&lt;/span>, colour &lt;span class='o'>=&lt;/span> &lt;span class='nv'>species&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>na.rm &lt;span class='o'>=&lt;/span> &lt;span class='kc'>TRUE&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/facet_wrap.html'>facet_wrap&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>~&lt;/span> &lt;span class='nv'>island&lt;/span>, scales &lt;span class='o'>=&lt;/span> &lt;span class='s'>"free_x"&lt;/span>, space &lt;span class='o'>=&lt;/span> &lt;span class='s'>"free_x"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-24-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>We can note that the Dream and Torgersen islands have narrower panels because they don&amp;rsquo;t have the Gentoo penguin with low bill depths.&lt;/p>
&lt;h3 id="layer-layout">Layer layout
&lt;a href="#layer-layout">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>We&amp;rsquo;ve added the argument &lt;code>layer(layout)&lt;/code>, which instructs facets on how to handle the data. Generally speaking, facets or custom layouts are free to interpret instructions as they see fit, so it is not set in stone. Nonetheless, we&amp;rsquo;ve come up with the following interpretations for
&lt;a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" target="_blank" rel="noopener">&lt;code>facet_wrap()&lt;/code>&lt;/a> and
&lt;a href="https://ggplot2.tidyverse.org/reference/facet_grid.html" target="_blank" rel="noopener">&lt;code>facet_grid()&lt;/code>&lt;/a>.&lt;/p>
&lt;ul>
&lt;li>&lt;code>layout = NULL&lt;/code> (the default) uses the faceting variables to assign data to a panel.&lt;/li>
&lt;li>&lt;code>layout = &amp;quot;fixed&amp;quot;&lt;/code> repeats the data for every panel and ignores faceting variables.&lt;/li>
&lt;li>&lt;code>layout = &amp;lt;integer&amp;gt;&lt;/code> assigns to data to a specific panel.&lt;/li>
&lt;/ul>
&lt;p>In addition, specifically for
&lt;a href="https://ggplot2.tidyverse.org/reference/facet_grid.html" target="_blank" rel="noopener">&lt;code>facet_grid()&lt;/code>&lt;/a> the following options also apply:&lt;/p>
&lt;ul>
&lt;li>&lt;code>layout = &amp;quot;fixed_cols&amp;quot;&lt;/code> pools data for every column and repeats it within the column&amp;rsquo;s panels.&lt;/li>
&lt;li>&lt;code>layout = &amp;quot;fixed_rows&amp;quot;&lt;/code> pools data for every row and repeats it within the row&amp;rsquo;s panels.&lt;/li>
&lt;/ul>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>penguins&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>bill_dep&lt;/span>, &lt;span class='nv'>bill_len&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='c'># Repeat within every row&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>na.rm &lt;span class='o'>=&lt;/span> &lt;span class='kc'>TRUE&lt;/span>, colour &lt;span class='o'>=&lt;/span> &lt;span class='s'>"grey"&lt;/span>, layout &lt;span class='o'>=&lt;/span> &lt;span class='s'>"fixed_rows"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='c'># Use facetting variables (default)&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>na.rm &lt;span class='o'>=&lt;/span> &lt;span class='kc'>TRUE&lt;/span>, layout &lt;span class='o'>=&lt;/span> &lt;span class='kc'>NULL&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='c'># Pick particular panel&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/annotate.html'>annotate&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> &lt;span class='s'>"text"&lt;/span>, x &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/AsIs.html'>I&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0.5&lt;/span>&lt;span class='o'>)&lt;/span>, y &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/AsIs.html'>I&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0.5&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> label &lt;span class='o'>=&lt;/span> &lt;span class='s'>"Panel 6"&lt;/span>, layout &lt;span class='o'>=&lt;/span> &lt;span class='m'>6&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/facet_grid.html'>facet_grid&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>island&lt;/span> &lt;span class='o'>~&lt;/span> &lt;span class='nv'>species&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-25-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>In previous incarnations of ggplot2, people went through some acrobatics to get data to repeat across panels. With these new options, this should be a walk in the park.&lt;/p>
&lt;h2 id="styling-updates">Styling updates
&lt;a href="#styling-updates">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>
&lt;h3 id="boxplots">Boxplots
&lt;a href="#boxplots">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>In
&lt;a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html" target="_blank" rel="noopener">&lt;code>geom_boxplot()&lt;/code>&lt;/a>, you may have become accustomed to all the different options for styling outliers like &lt;code>outlier.colour&lt;/code> or &lt;code>outlier.shape&lt;/code>. Now, we&amp;rsquo;re also enabling styling the different parts of the boxplot: the median line, the box, the whiskers and the staples. You can assign different colours, line type or line width to these parts of the boxplot.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mpg&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>class&lt;/span>, &lt;span class='nv'>hwy&lt;/span>, colour &lt;span class='o'>=&lt;/span> &lt;span class='nv'>class&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_boxplot.html'>geom_boxplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> whisker.linetype &lt;span class='o'>=&lt;/span> &lt;span class='s'>"dashed"&lt;/span>,&lt;/span>
&lt;span> box.colour &lt;span class='o'>=&lt;/span> &lt;span class='s'>"black"&lt;/span>,&lt;/span>
&lt;span> median.linewidth &lt;span class='o'>=&lt;/span> &lt;span class='m'>2&lt;/span>,&lt;/span>
&lt;span> staplewidth &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.5&lt;/span>, &lt;span class='c'># show staple&lt;/span>&lt;/span>
&lt;span> staple.colour &lt;span class='o'>=&lt;/span> &lt;span class='s'>"grey50"&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/guides.html'>guides&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>colour &lt;span class='o'>=&lt;/span> &lt;span class='s'>"none"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-26-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>For consistency,
&lt;a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html" target="_blank" rel="noopener">&lt;code>geom_crossbar()&lt;/code>&lt;/a> has been given the same treatment, but uses the &lt;code>middle.*&lt;/code> prefix where
&lt;a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html" target="_blank" rel="noopener">&lt;code>geom_boxplot()&lt;/code>&lt;/a> uses the &lt;code>median.*&lt;/code> prefix. Because &lt;code>middle.linewidth&lt;/code> and &lt;code>median.linewidth&lt;/code> have taken over the role of &lt;code>fatten&lt;/code> and are aligned with other graphical properties, the &lt;code>fatten&lt;/code> argument is now deprecated.&lt;/p>
&lt;h3 id="violin--quantiles">Violin &amp;amp; quantiles
&lt;a href="#violin--quantiles">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>It has been an inconvenience for some time that the quantile computation in violin layers was computed on the density data rather than the input data. To make the quantile computation more faithful to the real data, we had to properly delegate the responsibilities to the correct parts of the layer. The stat part of the layer is now in charge of calculating quantiles of the input data via the &lt;code>stat_ydensity(quantiles)&lt;/code> arguments. By default, the quantiles are the 25th, 50th and 75th percentiles and are always computed. Whether these quantiles are also displayed, is under the purview of the geom part of the layer. We&amp;rsquo;ve taken a similar approach as boxplots shown above, in that we now have &lt;code>quantile.colour&lt;/code>, &lt;code>quantile.linetype&lt;/code> and &lt;code>quantile.linewidth&lt;/code> arguments to style the quantile lines. Previously, quantiles were not displayed by default. To mirror that behaviour, we&amp;rsquo;ve set &lt;code>quantile.linetype = 0&lt;/code> (blank, no line) by default. This means that to turn on the display of quantiles, you have to set a non-blank line type.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mpg&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>class&lt;/span>, &lt;span class='nv'>hwy&lt;/span>, fill &lt;span class='o'>=&lt;/span> &lt;span class='nv'>class&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_violin.html'>geom_violin&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> quantiles &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0.1&lt;/span>, &lt;span class='m'>0.9&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> quantile.linetype &lt;span class='o'>=&lt;/span> &lt;span class='m'>1&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/guides.html'>guides&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>fill &lt;span class='o'>=&lt;/span> &lt;span class='s'>"none"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-27-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;h3 id="labels-1">Labels
&lt;a href="#labels-1">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>
&lt;a href="https://ggplot2.tidyverse.org/reference/geom_text.html" target="_blank" rel="noopener">&lt;code>geom_label()&lt;/code>&lt;/a> also has new styling options. It now has a &lt;code>linetype&lt;/code> and &lt;code>linewidth&lt;/code> aesthetic, which can be mapped from the data. The &lt;code>linewidth&lt;/code> aesthetic replaces the &lt;code>label.size&lt;/code> argument, which used to determine the line width of the label border. In addition to the new aesthetics,
&lt;a href="https://ggplot2.tidyverse.org/reference/geom_text.html" target="_blank" rel="noopener">&lt;code>geom_label()&lt;/code>&lt;/a> has two new arguments: &lt;code>border.colour&lt;/code> and &lt;code>text.colour&lt;/code> which set the colour for the border and text respectively. When these are set, it overrules the &lt;code>colour&lt;/code> aesthetic for a part of the label. In the plot below, we fix the &lt;code>text.colour&lt;/code> to black, so the &lt;code>colour&lt;/code> aesthetic applies to the border, not the text.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mtcars&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> &lt;span class='nv'>wt&lt;/span>, &lt;span class='nv'>mpg&lt;/span>,&lt;/span>
&lt;span> label &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/colnames.html'>rownames&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mtcars&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> colour &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/factor.html'>factor&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>cyl&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> linetype &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/factor.html'>factor&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>vs&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> linewidth &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/factor.html'>factor&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>am&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_text.html'>geom_label&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>text.colour &lt;span class='o'>=&lt;/span> &lt;span class='s'>"black"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_linewidth_manual&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>values &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0.3&lt;/span>, &lt;span class='m'>0.6&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-28-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;h3 id="area-and-ribbons">Area and ribbons
&lt;a href="#area-and-ribbons">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>Both
&lt;a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html" target="_blank" rel="noopener">&lt;code>geom_area()&lt;/code>&lt;/a> and
&lt;a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html" target="_blank" rel="noopener">&lt;code>geom_ribbon()&lt;/code>&lt;/a> now allow a varying &lt;code>fill&lt;/code> aesthetic within a group. Such a fill is displayed as a gradient, and therefore requires R 4.1.0+ and a compatible graphics device.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>economics&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>date&lt;/span>, &lt;span class='nv'>unemploy&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_ribbon.html'>geom_area&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>fill &lt;span class='o'>=&lt;/span> &lt;span class='nv'>uempmed&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-29-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;h2 id="new-stats">New stats
&lt;a href="#new-stats">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>
&lt;h3 id="manual">Manual
&lt;a href="#manual">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>Many ggplot extensions are based on stats, which allows you to perform arbitrary computations on data before handing it off the drawing functions. The new
&lt;a href="https://ggplot2.tidyverse.org/reference/stat_manual.html" target="_blank" rel="noopener">&lt;code>stat_manual()&lt;/code>&lt;/a> aims to give you the same extension powers, but without doing the formal ritual of defining a class and constructor. You can provide it any function that both ingests and returns a data frame. It can create new aesthetics or modify pre-existing aesthetics as long as eventually the geom part of the layer has their required aesthetics. In the example below, we use
&lt;a href="https://ggplot2.tidyverse.org/reference/stat_manual.html" target="_blank" rel="noopener">&lt;code>stat_manual()&lt;/code>&lt;/a> with a geom and a function, but also show you how to use a geom with &lt;code>stat = &amp;quot;manual&amp;quot;&lt;/code>.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>make_centroids&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='kr'>function&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>df&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&amp;#123;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/transform.html'>transform&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> &lt;span class='nv'>df&lt;/span>,&lt;/span>
&lt;span> xend &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/mean.html'>mean&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>x&lt;/span>, na.rm &lt;span class='o'>=&lt;/span> &lt;span class='kc'>TRUE&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> yend &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/mean.html'>mean&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>y&lt;/span>, na.rm &lt;span class='o'>=&lt;/span> &lt;span class='kc'>TRUE&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='o'>&amp;#125;&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>make_hull&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='kr'>function&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>df&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&amp;#123;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nv'>df&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nv'>df&lt;/span>&lt;span class='o'>[&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/stats/complete.cases.html'>complete.cases&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>df&lt;/span>&lt;span class='o'>)&lt;/span>, , drop &lt;span class='o'>=&lt;/span> &lt;span class='kc'>FALSE&lt;/span>&lt;span class='o'>]&lt;/span>&lt;/span>
&lt;span> &lt;span class='nv'>hull&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grDevices/chull.html'>chull&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>df&lt;/span>&lt;span class='o'>$&lt;/span>&lt;span class='nv'>x&lt;/span>, &lt;span class='nv'>df&lt;/span>&lt;span class='o'>$&lt;/span>&lt;span class='nv'>y&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span> &lt;span class='nv'>df&lt;/span>&lt;span class='o'>[&lt;/span>&lt;span class='nv'>hull&lt;/span>, , drop &lt;span class='o'>=&lt;/span> &lt;span class='kc'>FALSE&lt;/span>&lt;span class='o'>]&lt;/span>&lt;/span>
&lt;span>&lt;span class='o'>&amp;#125;&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>penguins&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>bill_len&lt;/span>, &lt;span class='nv'>bill_dep&lt;/span>, colour &lt;span class='o'>=&lt;/span> &lt;span class='nv'>species&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span> &lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>na.rm &lt;span class='o'>=&lt;/span> &lt;span class='kc'>TRUE&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span> &lt;/span>
&lt;span> &lt;span class='c'># As a stat, provide a geom&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/stat_manual.html'>stat_manual&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> geom &lt;span class='o'>=&lt;/span> &lt;span class='s'>"segment"&lt;/span>, &lt;span class='c'># function creates new xend/yend for segment&lt;/span>&lt;/span>
&lt;span> fun &lt;span class='o'>=&lt;/span> &lt;span class='nv'>make_centroids&lt;/span>,&lt;/span>
&lt;span> linewidth &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.2&lt;/span>,&lt;/span>
&lt;span> na.rm &lt;span class='o'>=&lt;/span> &lt;span class='kc'>TRUE&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='c'># As a geom, provide the stat&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_polygon.html'>geom_polygon&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> stat &lt;span class='o'>=&lt;/span> &lt;span class='s'>"manual"&lt;/span>,&lt;/span>
&lt;span> fun &lt;span class='o'>=&lt;/span> &lt;span class='nv'>make_hull&lt;/span>,&lt;/span>
&lt;span> fill &lt;span class='o'>=&lt;/span> &lt;span class='kc'>NA&lt;/span>,&lt;/span>
&lt;span> linetype &lt;span class='o'>=&lt;/span> &lt;span class='s'>"dotted"&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-30-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;h3 id="connection">Connection
&lt;a href="#connection">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>It has come to our attention that generalisations of
&lt;a href="https://ggplot2.tidyverse.org/reference/geom_path.html" target="_blank" rel="noopener">&lt;code>geom_step()&lt;/code>&lt;/a> have become commonplace in several extensions. Stairstep ribbons are used in Kaplan-Meier curves to indicate uncertainty. Stairstep area plots make for some great histograms. To this end, we&amp;rsquo;re introducing
&lt;a href="https://ggplot2.tidyverse.org/reference/stat_connect.html" target="_blank" rel="noopener">&lt;code>stat_connect()&lt;/code>&lt;/a>, which can connect observations in a stairstep fashion without constraining a geom choice. In the plot, you can see it work on the &lt;code>y&lt;/code>, &lt;code>ymin&lt;/code> and &lt;code>ymax&lt;/code> aesthetics indiscriminately with distinct geoms.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>eco&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nv'>economics&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>dplyr&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>year &lt;span class='o'>=&lt;/span> &lt;span class='nf'>lubridate&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://lubridate.tidyverse.org/reference/year.html'>year&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>date&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>dplyr&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> min &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/Extremes.html'>min&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>unemploy&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> max &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/Extremes.html'>max&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>unemploy&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> mid &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/stats/median.html'>median&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>unemploy&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> .by &lt;span class='o'>=&lt;/span> &lt;span class='nv'>year&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>eco&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>year&lt;/span>, y &lt;span class='o'>=&lt;/span> &lt;span class='nv'>mid&lt;/span>, ymin &lt;span class='o'>=&lt;/span> &lt;span class='nv'>min&lt;/span>, ymax &lt;span class='o'>=&lt;/span> &lt;span class='nv'>max&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_path.html'>geom_line&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>stat &lt;span class='o'>=&lt;/span> &lt;span class='s'>"connect"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_ribbon.html'>geom_ribbon&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>stat &lt;span class='o'>=&lt;/span> &lt;span class='s'>"connect"&lt;/span>, alpha &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.4&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-31-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>However, we aren&amp;rsquo;t necessarily limited to stairstep connections. We can use a 2-column numeric matrix to sketch out other types of connections. For example if we use
&lt;a href="https://rdrr.io/r/stats/Logistic.html" target="_blank" rel="noopener">&lt;code>plogis()&lt;/code>&lt;/a> to create a logistic transition, we can make &amp;lsquo;bump chart&amp;rsquo;-like connections. Or you can use a zigzag pattern if silliness is your cup of tea.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>x&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/seq.html'>seq&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0&lt;/span>, &lt;span class='m'>1&lt;/span>, length.out &lt;span class='o'>=&lt;/span> &lt;span class='m'>20&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>[&lt;/span>&lt;span class='o'>-&lt;/span>&lt;span class='m'>1&lt;/span>&lt;span class='o'>]&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>smooth&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/cbind.html'>cbind&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>x&lt;/span>, &lt;span class='nf'>scales&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://scales.r-lib.org/reference/rescale.html'>rescale&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/stats/Logistic.html'>plogis&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>x&lt;/span>, location &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.5&lt;/span>, scale &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.1&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>zigzag&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/cbind.html'>cbind&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0.4&lt;/span>, &lt;span class='m'>0.6&lt;/span>, &lt;span class='m'>1&lt;/span>&lt;span class='o'>)&lt;/span>, &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0.75&lt;/span>, &lt;span class='m'>0.25&lt;/span>, &lt;span class='m'>1&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/utils/head.html'>head&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>eco&lt;/span>, &lt;span class='m'>10&lt;/span>&lt;span class='o'>)&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>year&lt;/span>, y &lt;span class='o'>=&lt;/span> &lt;span class='nv'>mid&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/stat_connect.html'>stat_connect&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>colour &lt;span class='o'>=&lt;/span> &lt;span class='s'>"smooth"&lt;/span>&lt;span class='o'>)&lt;/span>, connection &lt;span class='o'>=&lt;/span> &lt;span class='nv'>smooth&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/stat_connect.html'>stat_connect&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>colour &lt;span class='o'>=&lt;/span> &lt;span class='s'>"zigzag"&lt;/span>&lt;span class='o'>)&lt;/span>, connection &lt;span class='o'>=&lt;/span> &lt;span class='nv'>zigzag&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-32-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;h2 id="coord-reversal">Coord reversal
&lt;a href="#coord-reversal">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>It has been possible to use reverse transformations for scales to flip a plot direction. You could even use
&lt;a href="https://scales.r-lib.org/reference/transform_compose.html" target="_blank" rel="noopener">&lt;code>scales::transform_compose()&lt;/code>&lt;/a> to do, for example, a reversed log&lt;sub>10&lt;/sub> transformation to highlight the smallest p-values. However, the transformation approach has a few limitations, notably that discrete scales do not support transformations and not all coords obeyed transformed scales. You can&amp;rsquo;t really combine &lt;code>coord_sf() + scale_x_log10()&lt;/code> for example. To remedy this limitation, coords now have a &lt;code>reverse&lt;/code> argument that can typically be &lt;code>&amp;quot;none&amp;quot;&lt;/code>, &lt;code>&amp;quot;x&amp;quot;&lt;/code>, &lt;code>&amp;quot;y&amp;quot;&lt;/code> or &lt;code>&amp;quot;xy&amp;quot;&lt;/code> that reverse some directions. If you are from the lands down under, you can now plot a map in your native orientation.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>world&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>sf&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://r-spatial.github.io/sf/reference/st_as_sf.html'>st_as_sf&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>maps&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/pkg/maps/man/map.html'>map&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>'world'&lt;/span>, plot &lt;span class='o'>=&lt;/span> &lt;span class='kc'>FALSE&lt;/span>, fill &lt;span class='o'>=&lt;/span> &lt;span class='kc'>TRUE&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>world&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggsf.html'>geom_sf&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggsf.html'>coord_sf&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>reverse &lt;span class='o'>=&lt;/span> &lt;span class='s'>"y"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-33-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>In
&lt;a href="https://ggplot2.tidyverse.org/reference/coord_radial.html" target="_blank" rel="noopener">&lt;code>coord_radial()&lt;/code>&lt;/a>, the &lt;code>reverse&lt;/code> argument replaces the &lt;code>direction&lt;/code> argument that only worked for the theta-direction. Contrary to many coords, &lt;code>coord_radial(reverse)&lt;/code> takes &lt;code>&amp;quot;none&amp;quot;&lt;/code>, &lt;code>&amp;quot;theta&amp;quot;&lt;/code>, &lt;code>&amp;quot;r&amp;quot;&lt;/code> and &lt;code>&amp;quot;thetar&amp;quot;&lt;/code> instead of the x/y directions.&lt;/p>
&lt;h2 id="goodies-for-extensions">Goodies for extensions
&lt;a href="#goodies-for-extensions">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>
&lt;h3 id="layers">Layers
&lt;a href="#layers">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>If you&amp;rsquo;ve ever written a &lt;code>Geom&lt;/code> class, chances are that you&amp;rsquo;ve danced with
&lt;a href="https://rdrr.io/r/grid/gpar.html" target="_blank" rel="noopener">&lt;code>grid::gpar()&lt;/code>&lt;/a> and frowned at the use of &lt;code>.pt&lt;/code> and &lt;code>.stroke&lt;/code> and whatnot. We&amp;rsquo;ve made a wrapper for
&lt;a href="https://rdrr.io/r/grid/gpar.html" target="_blank" rel="noopener">&lt;code>grid::gpar()&lt;/code>&lt;/a> that applies the ggplot2 interpretation of settings and translates them to grid settings. For example, &lt;code>linewidth&lt;/code> (or the &lt;code>lwd&lt;/code> grid setting) is interpreted in millimetres in ggplot2, whereas grid expects them in points. The
&lt;a href="https://ggplot2.tidyverse.org/reference/gg_par.html" target="_blank" rel="noopener">&lt;code>gg_par()&lt;/code>&lt;/a> function helps these translations, protects against &lt;code>NA&lt;/code>s in line types and strokes, removes 0-length vectors, and has additional logic for point strokes.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/gg_par.html'>gg_par&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>lwd &lt;span class='o'>=&lt;/span> &lt;span class='m'>5&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; $lwd&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; [1] 14.22638&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;span class='nf'>grid&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/grid.convert.html'>convertUnit&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/unit.html'>unit&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>5&lt;/span>, &lt;span class='s'>"mm"&lt;/span>&lt;span class='o'>)&lt;/span>, &lt;span class='s'>"pt"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; [1] 14.2263779527559points&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>For geom and stat extensions, the magic usually happens in the &lt;code>Geom*&lt;/code> or &lt;code>Stat*&lt;/code> classes and the constructor is simply boilerplate code used to populate a layer. To reduce the amount of boilerplate code, you can now use
&lt;a href="https://ggplot2.tidyverse.org/reference/make_constructor.html" target="_blank" rel="noopener">&lt;code>make_constructor()&lt;/code>&lt;/a> on &lt;code>Geom*&lt;/code> and &lt;code>Stat*&lt;/code> classes. It produces a typical constructor function that adheres to several conventions, like exposing arguments to compute/drawing methods. To illustrate, notice how the following constructor for &lt;code>GeomPath&lt;/code> includes arguments for &lt;code>lineend&lt;/code> and &lt;code>linejoin&lt;/code> automatically because they are arguments to the &lt;code>GeomPath$draw_panel()&lt;/code> method.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>geom_foo&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/make_constructor.html'>make_constructor&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>GeomPath&lt;/span>, position &lt;span class='o'>=&lt;/span> &lt;span class='s'>"stack"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/print.html'>print&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>geom_foo&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; function (mapping = NULL, data = NULL, stat = "identity", position = "stack", &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; ..., arrow = NULL, arrow.fill = NULL, lineend = "butt", linejoin = "round", &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; linemitre = 10, na.rm = FALSE, show.legend = NA, inherit.aes = TRUE) &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &amp;#123;&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; layer(mapping = mapping, data = data, geom = "path", stat = stat, &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; position = position, show.legend = show.legend, inherit.aes = inherit.aes, &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; params = list2(na.rm = na.rm, arrow = arrow, arrow.fill = arrow.fill, &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; lineend = lineend, linejoin = linejoin, linemitre = linemitre, &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; ...))&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &amp;#125;&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &amp;lt;environment: 0x00000223e1277e08&amp;gt;&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>In addition, you can now also use the &lt;code>#' @aesthetics &amp;lt;Geom/Stat/Position&amp;gt;&lt;/code> roxygen tag to automatically populate an &amp;lsquo;Aesthetics&amp;rsquo; section of your documentation. The code below;&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>GeomDummy&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggproto.html'>ggproto&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"GeomDummy"&lt;/span>, &lt;span class='nv'>Geom&lt;/span>, default_aes &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>foo &lt;span class='o'>=&lt;/span> &lt;span class='s'>"bar"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='c'>#' &amp;lt;rest of roxygen comments&amp;gt;&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#' @aesthetics GeomDummy&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>geom_foo&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/make_constructor.html'>make_constructor&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>GeomDummy&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>will generate the following .Rd code:&lt;/p>
&lt;pre>&lt;code>\section{Aesthetics}{
\code{geom_dummy()} understands the following aesthetics. Required aesthetics are displayed in bold and defaults are displayed for optional aesthetics:
\tabular{rll}{
• \tab \code{foo} \tab → \code{&amp;quot;bar&amp;quot;} \cr
• \tab \code{\link[ggplot2:aes_group_order]{group}} \tab → inferred \cr
}
Learn more about setting these aesthetics in \code{vignette(&amp;quot;ggplot2-specs&amp;quot;)}.
}
&lt;/code>&lt;/pre>
&lt;h3 id="themes">Themes
&lt;a href="#themes">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>To replicate how themes are handled internally, you can now use
&lt;a href="https://ggplot2.tidyverse.org/reference/complete_theme.html" target="_blank" rel="noopener">&lt;code>complete_theme()&lt;/code>&lt;/a>. It fills in all missing elements and performs typical checks.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>my_theme&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>plot.background &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>element_rect&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>fill &lt;span class='o'>=&lt;/span> &lt;span class='kc'>NA&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/length.html'>length&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>my_theme&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; [1] 1&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>completed&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/complete_theme.html'>complete_theme&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>my_theme&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/length.html'>length&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>completed&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; [1] 144&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;/span>
&lt;span>&lt;span class='c'># You should give rect elements to text settings&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>completed&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>legend.text &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>element_rect&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/complete_theme.html'>complete_theme&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00; font-weight: bold;'>Error&lt;/span>&lt;span style='font-weight: bold;'> in `plot_theme()`:&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00;'>!&lt;/span> Can't merge the `legend.text` theme element.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='font-weight: bold;'>Caused by error in `method(merge_element, list(ggplot2::element, class_any))`:&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00;'>!&lt;/span> Only elements of the same class can be merged.&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;/span>
&lt;span>&lt;span class='c'># Unknown elements&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>completed&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>foobar &lt;span class='o'>=&lt;/span> &lt;span class='m'>12&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/complete_theme.html'>complete_theme&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; Warning in plot_theme(list(theme = theme), default = default): The `foobar` theme element is not defined in the element hierarchy.&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>We&amp;rsquo;re also introducing point and polygon theme elements. These aren&amp;rsquo;t used in any of the base ggplot2 theme settings, but you can use them in extensions. The example below demonstrates registering new theme settings and that points and polygons follow inheritance and can be rendered.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='c'># Let's say your package 'my_pkg' registers custom point/polygon elements&lt;/span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/register_theme_elements.html'>register_theme_elements&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> my_pkg_point &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>element_point&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>colour &lt;span class='o'>=&lt;/span> &lt;span class='s'>"red"&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> my_pkg_polygon &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>element_polygon&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>fill &lt;span class='o'>=&lt;/span> &lt;span class='kc'>NA&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> element_tree &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/list.html'>list&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> my_pkg_point &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/register_theme_elements.html'>el_def&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>element_point&lt;/span>, inherit &lt;span class='o'>=&lt;/span> &lt;span class='s'>"point"&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> my_pkg_polygon &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/register_theme_elements.html'>el_def&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>element_polygon&lt;/span>, inherit &lt;span class='o'>=&lt;/span> &lt;span class='s'>"polygon"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='c'># Which should inherit from the root point/polygon theme elements&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>my_theme&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> point &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>element_point&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>shape &lt;span class='o'>=&lt;/span> &lt;span class='m'>17&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> polygon &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>element_polygon&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>linetype &lt;span class='o'>=&lt;/span> &lt;span class='s'>"dotted"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/complete_theme.html'>complete_theme&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='c'># Rendering your elements&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>pts&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/calc_element.html'>calc_element&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"my_pkg_point"&lt;/span>, &lt;span class='nv'>my_theme&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element_grob.html'>element_grob&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> x &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0.2&lt;/span>, &lt;span class='m'>0.5&lt;/span>, &lt;span class='m'>0.8&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> y &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0.8&lt;/span>, &lt;span class='m'>0.2&lt;/span>, &lt;span class='m'>0.5&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>poly&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/calc_element.html'>calc_element&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"my_pkg_polygon"&lt;/span>, &lt;span class='nv'>my_theme&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element_grob.html'>element_grob&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> x &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0.1&lt;/span>, &lt;span class='m'>0.5&lt;/span>, &lt;span class='m'>0.9&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> y &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0.9&lt;/span>, &lt;span class='m'>0.1&lt;/span>, &lt;span class='m'>0.5&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='c'># Drawing the elements&lt;/span>&lt;/span>
&lt;span>&lt;span class='nf'>grid&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/grid.newpage.html'>grid.newpage&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nf'>grid&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/grid.draw.html'>grid.draw&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>pts&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nf'>grid&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/grid.draw.html'>grid.draw&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>poly&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-38-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Thank you to all the people who contributed their issues, code and comments to this release:
&lt;a href="https://github.com/83221n4ndr34" target="_blank" rel="noopener">@83221n4ndr34&lt;/a>,
&lt;a href="https://github.com/Abiologist" target="_blank" rel="noopener">@Abiologist&lt;/a>,
&lt;a href="https://github.com/acebulsk" target="_blank" rel="noopener">@acebulsk&lt;/a>,
&lt;a href="https://github.com/adisarid" target="_blank" rel="noopener">@adisarid&lt;/a>,
&lt;a href="https://github.com/agila5" target="_blank" rel="noopener">@agila5&lt;/a>,
&lt;a href="https://github.com/agmurray" target="_blank" rel="noopener">@agmurray&lt;/a>,
&lt;a href="https://github.com/agneeshbarua" target="_blank" rel="noopener">@agneeshbarua&lt;/a>,
&lt;a href="https://github.com/aijordan" target="_blank" rel="noopener">@aijordan&lt;/a>,
&lt;a href="https://github.com/amarjitsinghchandhial" target="_blank" rel="noopener">@amarjitsinghchandhial&lt;/a>,
&lt;a href="https://github.com/amkilpatrick" target="_blank" rel="noopener">@amkilpatrick&lt;/a>,
&lt;a href="https://github.com/amongoodtx" target="_blank" rel="noopener">@amongoodtx&lt;/a>,
&lt;a href="https://github.com/Andtise" target="_blank" rel="noopener">@Andtise&lt;/a>,
&lt;a href="https://github.com/andybeet" target="_blank" rel="noopener">@andybeet&lt;/a>,
&lt;a href="https://github.com/antoine4ucsd" target="_blank" rel="noopener">@antoine4ucsd&lt;/a>,
&lt;a href="https://github.com/aphalo" target="_blank" rel="noopener">@aphalo&lt;/a>,
&lt;a href="https://github.com/aravind-j" target="_blank" rel="noopener">@aravind-j&lt;/a>,
&lt;a href="https://github.com/arcresu" target="_blank" rel="noopener">@arcresu&lt;/a>,
&lt;a href="https://github.com/arnaudgallou" target="_blank" rel="noopener">@arnaudgallou&lt;/a>,
&lt;a href="https://github.com/assaron" target="_blank" rel="noopener">@assaron&lt;/a>,
&lt;a href="https://github.com/baderstine" target="_blank" rel="noopener">@baderstine&lt;/a>,
&lt;a href="https://github.com/BajczA475" target="_blank" rel="noopener">@BajczA475&lt;/a>,
&lt;a href="https://github.com/bakaburg1" target="_blank" rel="noopener">@bakaburg1&lt;/a>,
&lt;a href="https://github.com/BegoniaCampos" target="_blank" rel="noopener">@BegoniaCampos&lt;/a>,
&lt;a href="https://github.com/benjaminhlina" target="_blank" rel="noopener">@benjaminhlina&lt;/a>,
&lt;a href="https://github.com/billdenney" target="_blank" rel="noopener">@billdenney&lt;/a>,
&lt;a href="https://github.com/binkleym" target="_blank" rel="noopener">@binkleym&lt;/a>,
&lt;a href="https://github.com/bkohrn" target="_blank" rel="noopener">@bkohrn&lt;/a>,
&lt;a href="https://github.com/bnprks" target="_blank" rel="noopener">@bnprks&lt;/a>,
&lt;a href="https://github.com/botanize" target="_blank" rel="noopener">@botanize&lt;/a>,
&lt;a href="https://github.com/Breeze-Hu" target="_blank" rel="noopener">@Breeze-Hu&lt;/a>,
&lt;a href="https://github.com/brianmsm" target="_blank" rel="noopener">@brianmsm&lt;/a>,
&lt;a href="https://github.com/brunomioto" target="_blank" rel="noopener">@brunomioto&lt;/a>,
&lt;a href="https://github.com/btupper" target="_blank" rel="noopener">@btupper&lt;/a>,
&lt;a href="https://github.com/bwu62" target="_blank" rel="noopener">@bwu62&lt;/a>,
&lt;a href="https://github.com/carljpearson" target="_blank" rel="noopener">@carljpearson&lt;/a>,
&lt;a href="https://github.com/catalamarti" target="_blank" rel="noopener">@catalamarti&lt;/a>,
&lt;a href="https://github.com/cbrnr" target="_blank" rel="noopener">@cbrnr&lt;/a>,
&lt;a href="https://github.com/ccani007" target="_blank" rel="noopener">@ccani007&lt;/a>,
&lt;a href="https://github.com/ccsarapas" target="_blank" rel="noopener">@ccsarapas&lt;/a>,
&lt;a href="https://github.com/cgoo4" target="_blank" rel="noopener">@cgoo4&lt;/a>,
&lt;a href="https://github.com/clauswilke" target="_blank" rel="noopener">@clauswilke&lt;/a>,
&lt;a href="https://github.com/Close-your-eyes" target="_blank" rel="noopener">@Close-your-eyes&lt;/a>,
&lt;a href="https://github.com/collinberke" target="_blank" rel="noopener">@collinberke&lt;/a>,
&lt;a href="https://github.com/const-ae" target="_blank" rel="noopener">@const-ae&lt;/a>,
&lt;a href="https://github.com/dafxy" target="_blank" rel="noopener">@dafxy&lt;/a>,
&lt;a href="https://github.com/DanChaltiel" target="_blank" rel="noopener">@DanChaltiel&lt;/a>,
&lt;a href="https://github.com/danli349" target="_blank" rel="noopener">@danli349&lt;/a>,
&lt;a href="https://github.com/dansmith01" target="_blank" rel="noopener">@dansmith01&lt;/a>,
&lt;a href="https://github.com/daorui" target="_blank" rel="noopener">@daorui&lt;/a>,
&lt;a href="https://github.com/david-romano" target="_blank" rel="noopener">@david-romano&lt;/a>,
&lt;a href="https://github.com/davidhodge931" target="_blank" rel="noopener">@davidhodge931&lt;/a>,
&lt;a href="https://github.com/dinosquash" target="_blank" rel="noopener">@dinosquash&lt;/a>,
&lt;a href="https://github.com/dominicroye" target="_blank" rel="noopener">@dominicroye&lt;/a>,
&lt;a href="https://github.com/dsconnell" target="_blank" rel="noopener">@dsconnell&lt;/a>,
&lt;a href="https://github.com/EA-Ammar" target="_blank" rel="noopener">@EA-Ammar&lt;/a>,
&lt;a href="https://github.com/EBukin" target="_blank" rel="noopener">@EBukin&lt;/a>,
&lt;a href="https://github.com/elgabbas" target="_blank" rel="noopener">@elgabbas&lt;/a>,
&lt;a href="https://github.com/eliocamp" target="_blank" rel="noopener">@eliocamp&lt;/a>,
&lt;a href="https://github.com/elipousson" target="_blank" rel="noopener">@elipousson&lt;/a>,
&lt;a href="https://github.com/erinnacland" target="_blank" rel="noopener">@erinnacland&lt;/a>,
&lt;a href="https://github.com/etiennebacher" target="_blank" rel="noopener">@etiennebacher&lt;/a>,
&lt;a href="https://github.com/EvaMaeRey" target="_blank" rel="noopener">@EvaMaeRey&lt;/a>,
&lt;a href="https://github.com/evanmascitti" target="_blank" rel="noopener">@evanmascitti&lt;/a>,
&lt;a href="https://github.com/eyayaw" target="_blank" rel="noopener">@eyayaw&lt;/a>,
&lt;a href="https://github.com/fabian-s" target="_blank" rel="noopener">@fabian-s&lt;/a>,
&lt;a href="https://github.com/fkohrt" target="_blank" rel="noopener">@fkohrt&lt;/a>,
&lt;a href="https://github.com/FloLecorvaisier" target="_blank" rel="noopener">@FloLecorvaisier&lt;/a>,
&lt;a href="https://github.com/fmarotta" target="_blank" rel="noopener">@fmarotta&lt;/a>,
&lt;a href="https://github.com/Fugwaaaa" target="_blank" rel="noopener">@Fugwaaaa&lt;/a>,
&lt;a href="https://github.com/fwunschel" target="_blank" rel="noopener">@fwunschel&lt;/a>,
&lt;a href="https://github.com/g-pacheco" target="_blank" rel="noopener">@g-pacheco&lt;/a>,
&lt;a href="https://github.com/gaborcsardi" target="_blank" rel="noopener">@gaborcsardi&lt;/a>,
&lt;a href="https://github.com/gregorp" target="_blank" rel="noopener">@gregorp&lt;/a>,
&lt;a href="https://github.com/guqicun" target="_blank" rel="noopener">@guqicun&lt;/a>,
&lt;a href="https://github.com/hadley" target="_blank" rel="noopener">@hadley&lt;/a>,
&lt;a href="https://github.com/heinonmatti" target="_blank" rel="noopener">@heinonmatti&lt;/a>,
&lt;a href="https://github.com/heor-robyoung" target="_blank" rel="noopener">@heor-robyoung&lt;/a>,
&lt;a href="https://github.com/herry23xet" target="_blank" rel="noopener">@herry23xet&lt;/a>,
&lt;a href="https://github.com/HMU-WH" target="_blank" rel="noopener">@HMU-WH&lt;/a>,
&lt;a href="https://github.com/HRodenhizer" target="_blank" rel="noopener">@HRodenhizer&lt;/a>,
&lt;a href="https://github.com/hsiaoyi0504" target="_blank" rel="noopener">@hsiaoyi0504&lt;/a>,
&lt;a href="https://github.com/Hy4m" target="_blank" rel="noopener">@Hy4m&lt;/a>,
&lt;a href="https://github.com/IndrajeetPatil" target="_blank" rel="noopener">@IndrajeetPatil&lt;/a>,
&lt;a href="https://github.com/jack-davison" target="_blank" rel="noopener">@jack-davison&lt;/a>,
&lt;a href="https://github.com/JacobBumgarner" target="_blank" rel="noopener">@JacobBumgarner&lt;/a>,
&lt;a href="https://github.com/JakubKomarek" target="_blank" rel="noopener">@JakubKomarek&lt;/a>,
&lt;a href="https://github.com/jansim" target="_blank" rel="noopener">@jansim&lt;/a>,
&lt;a href="https://github.com/japhir" target="_blank" rel="noopener">@japhir&lt;/a>,
&lt;a href="https://github.com/jbengler" target="_blank" rel="noopener">@jbengler&lt;/a>,
&lt;a href="https://github.com/jdonland" target="_blank" rel="noopener">@jdonland&lt;/a>,
&lt;a href="https://github.com/jeraldnoble" target="_blank" rel="noopener">@jeraldnoble&lt;/a>,
&lt;a href="https://github.com/Jigyasu4indp" target="_blank" rel="noopener">@Jigyasu4indp&lt;/a>,
&lt;a href="https://github.com/jiw181" target="_blank" rel="noopener">@jiw181&lt;/a>,
&lt;a href="https://github.com/jmbuhr" target="_blank" rel="noopener">@jmbuhr&lt;/a>,
&lt;a href="https://github.com/JMeyer31" target="_blank" rel="noopener">@JMeyer31&lt;/a>,
&lt;a href="https://github.com/jmgirard" target="_blank" rel="noopener">@jmgirard&lt;/a>,
&lt;a href="https://github.com/jnolis" target="_blank" rel="noopener">@jnolis&lt;/a>,
&lt;a href="https://github.com/joaopedrosusselbertogna" target="_blank" rel="noopener">@joaopedrosusselbertogna&lt;/a>,
&lt;a href="https://github.com/johow" target="_blank" rel="noopener">@johow&lt;/a>,
&lt;a href="https://github.com/jonocarroll" target="_blank" rel="noopener">@jonocarroll&lt;/a>,
&lt;a href="https://github.com/jpquast" target="_blank" rel="noopener">@jpquast&lt;/a>,
&lt;a href="https://github.com/JStorey42" target="_blank" rel="noopener">@JStorey42&lt;/a>,
&lt;a href="https://github.com/JThomasWatson" target="_blank" rel="noopener">@JThomasWatson&lt;/a>,
&lt;a href="https://github.com/julianbarg" target="_blank" rel="noopener">@julianbarg&lt;/a>,
&lt;a href="https://github.com/julou" target="_blank" rel="noopener">@julou&lt;/a>,
&lt;a href="https://github.com/junjunlab" target="_blank" rel="noopener">@junjunlab&lt;/a>,
&lt;a href="https://github.com/JWiley" target="_blank" rel="noopener">@JWiley&lt;/a>,
&lt;a href="https://github.com/kauedesousa" target="_blank" rel="noopener">@kauedesousa&lt;/a>,
&lt;a href="https://github.com/kdarras" target="_blank" rel="noopener">@kdarras&lt;/a>,
&lt;a href="https://github.com/kevinushey" target="_blank" rel="noopener">@kevinushey&lt;/a>,
&lt;a href="https://github.com/kevinwolz" target="_blank" rel="noopener">@kevinwolz&lt;/a>,
&lt;a href="https://github.com/kieran-mace" target="_blank" rel="noopener">@kieran-mace&lt;/a>,
&lt;a href="https://github.com/kkellysci" target="_blank" rel="noopener">@kkellysci&lt;/a>,
&lt;a href="https://github.com/kobetst" target="_blank" rel="noopener">@kobetst&lt;/a>,
&lt;a href="https://github.com/koheiw" target="_blank" rel="noopener">@koheiw&lt;/a>,
&lt;a href="https://github.com/krlmlr" target="_blank" rel="noopener">@krlmlr&lt;/a>,
&lt;a href="https://github.com/KryeKuzhinieri" target="_blank" rel="noopener">@KryeKuzhinieri&lt;/a>,
&lt;a href="https://github.com/kylebutts" target="_blank" rel="noopener">@kylebutts&lt;/a>,
&lt;a href="https://github.com/laurabrianna" target="_blank" rel="noopener">@laurabrianna&lt;/a>,
&lt;a href="https://github.com/lbenz730" target="_blank" rel="noopener">@lbenz730&lt;/a>,
&lt;a href="https://github.com/lcpmgh" target="_blank" rel="noopener">@lcpmgh&lt;/a>,
&lt;a href="https://github.com/lgaborini" target="_blank" rel="noopener">@lgaborini&lt;/a>,
&lt;a href="https://github.com/lgibson7" target="_blank" rel="noopener">@lgibson7&lt;/a>,
&lt;a href="https://github.com/LGraz" target="_blank" rel="noopener">@LGraz&lt;/a>,
&lt;a href="https://github.com/llrs" target="_blank" rel="noopener">@llrs&lt;/a>,
&lt;a href="https://github.com/louis-heraut" target="_blank" rel="noopener">@louis-heraut&lt;/a>,
&lt;a href="https://github.com/ltierney" target="_blank" rel="noopener">@ltierney&lt;/a>,
&lt;a href="https://github.com/Lucielclr" target="_blank" rel="noopener">@Lucielclr&lt;/a>,
&lt;a href="https://github.com/luhann" target="_blank" rel="noopener">@luhann&lt;/a>,
&lt;a href="https://github.com/m-muecke" target="_blank" rel="noopener">@m-muecke&lt;/a>,
&lt;a href="https://github.com/marcelglueck" target="_blank" rel="noopener">@marcelglueck&lt;/a>,
&lt;a href="https://github.com/margaret-colville" target="_blank" rel="noopener">@margaret-colville&lt;/a>,
&lt;a href="https://github.com/markus-schaffer" target="_blank" rel="noopener">@markus-schaffer&lt;/a>,
&lt;a href="https://github.com/Maschette" target="_blank" rel="noopener">@Maschette&lt;/a>,
&lt;a href="https://github.com/MathiasAmbuehl" target="_blank" rel="noopener">@MathiasAmbuehl&lt;/a>,
&lt;a href="https://github.com/MathieuYeche" target="_blank" rel="noopener">@MathieuYeche&lt;/a>,
&lt;a href="https://github.com/mattansb" target="_blank" rel="noopener">@mattansb&lt;/a>,
&lt;a href="https://github.com/MauricioCely" target="_blank" rel="noopener">@MauricioCely&lt;/a>,
&lt;a href="https://github.com/MaxAtoms" target="_blank" rel="noopener">@MaxAtoms&lt;/a>,
&lt;a href="https://github.com/mcol" target="_blank" rel="noopener">@mcol&lt;/a>,
&lt;a href="https://github.com/mfoos" target="_blank" rel="noopener">@mfoos&lt;/a>,
&lt;a href="https://github.com/MichaelChirico" target="_blank" rel="noopener">@MichaelChirico&lt;/a>,
&lt;a href="https://github.com/MichelineCampbell" target="_blank" rel="noopener">@MichelineCampbell&lt;/a>,
&lt;a href="https://github.com/mikmart" target="_blank" rel="noopener">@mikmart&lt;/a>,
&lt;a href="https://github.com/misea" target="_blank" rel="noopener">@misea&lt;/a>,
&lt;a href="https://github.com/mjskay" target="_blank" rel="noopener">@mjskay&lt;/a>,
&lt;a href="https://github.com/mkoohafkan" target="_blank" rel="noopener">@mkoohafkan&lt;/a>,
&lt;a href="https://github.com/mlaparie" target="_blank" rel="noopener">@mlaparie&lt;/a>,
&lt;a href="https://github.com/MLopez-Ibanez" target="_blank" rel="noopener">@MLopez-Ibanez&lt;/a>,
&lt;a href="https://github.com/mluerig" target="_blank" rel="noopener">@mluerig&lt;/a>,
&lt;a href="https://github.com/mohammad-numan" target="_blank" rel="noopener">@mohammad-numan&lt;/a>,
&lt;a href="https://github.com/MoREpro" target="_blank" rel="noopener">@MoREpro&lt;/a>,
&lt;a href="https://github.com/mtrsl" target="_blank" rel="noopener">@mtrsl&lt;/a>,
&lt;a href="https://github.com/muschellij2" target="_blank" rel="noopener">@muschellij2&lt;/a>,
&lt;a href="https://github.com/mzavattaro" target="_blank" rel="noopener">@mzavattaro&lt;/a>,
&lt;a href="https://github.com/nicholasdavies" target="_blank" rel="noopener">@nicholasdavies&lt;/a>,
&lt;a href="https://github.com/njspix" target="_blank" rel="noopener">@njspix&lt;/a>,
&lt;a href="https://github.com/nmercadeb" target="_blank" rel="noopener">@nmercadeb&lt;/a>,
&lt;a href="https://github.com/noejn2" target="_blank" rel="noopener">@noejn2&lt;/a>,
&lt;a href="https://github.com/npearlmu" target="_blank" rel="noopener">@npearlmu&lt;/a>,
&lt;a href="https://github.com/Olivia-Box-Power" target="_blank" rel="noopener">@Olivia-Box-Power&lt;/a>,
&lt;a href="https://github.com/olivroy" target="_blank" rel="noopener">@olivroy&lt;/a>,
&lt;a href="https://github.com/oracle5th" target="_blank" rel="noopener">@oracle5th&lt;/a>,
&lt;a href="https://github.com/oskard95" target="_blank" rel="noopener">@oskard95&lt;/a>,
&lt;a href="https://github.com/palderman" target="_blank" rel="noopener">@palderman&lt;/a>,
&lt;a href="https://github.com/PanfengZhang" target="_blank" rel="noopener">@PanfengZhang&lt;/a>,
&lt;a href="https://github.com/paulfajour" target="_blank" rel="noopener">@paulfajour&lt;/a>,
&lt;a href="https://github.com/PCEBrunaLab" target="_blank" rel="noopener">@PCEBrunaLab&lt;/a>,
&lt;a href="https://github.com/petrbouchal" target="_blank" rel="noopener">@petrbouchal&lt;/a>,
&lt;a href="https://github.com/pgmj" target="_blank" rel="noopener">@pgmj&lt;/a>,
&lt;a href="https://github.com/phispu" target="_blank" rel="noopener">@phispu&lt;/a>,
&lt;a href="https://github.com/PietrH" target="_blank" rel="noopener">@PietrH&lt;/a>,
&lt;a href="https://github.com/pn317" target="_blank" rel="noopener">@pn317&lt;/a>,
&lt;a href="https://github.com/ppoyk" target="_blank" rel="noopener">@ppoyk&lt;/a>,
&lt;a href="https://github.com/pradosj" target="_blank" rel="noopener">@pradosj&lt;/a>,
&lt;a href="https://github.com/psoldath" target="_blank" rel="noopener">@psoldath&lt;/a>,
&lt;a href="https://github.com/py9mrg" target="_blank" rel="noopener">@py9mrg&lt;/a>,
&lt;a href="https://github.com/qli84" target="_blank" rel="noopener">@qli84&lt;/a>,
&lt;a href="https://github.com/randyzwitch" target="_blank" rel="noopener">@randyzwitch&lt;/a>,
&lt;a href="https://github.com/raphaludwig" target="_blank" rel="noopener">@raphaludwig&lt;/a>,
&lt;a href="https://github.com/RaynorJim" target="_blank" rel="noopener">@RaynorJim&lt;/a>,
&lt;a href="https://github.com/rdboyes" target="_blank" rel="noopener">@rdboyes&lt;/a>,
&lt;a href="https://github.com/reechawong" target="_blank" rel="noopener">@reechawong&lt;/a>,
&lt;a href="https://github.com/rempsyc" target="_blank" rel="noopener">@rempsyc&lt;/a>,
&lt;a href="https://github.com/rfgoldberg" target="_blank" rel="noopener">@rfgoldberg&lt;/a>,
&lt;a href="https://github.com/rikivillalba" target="_blank" rel="noopener">@rikivillalba&lt;/a>,
&lt;a href="https://github.com/rishabh-mp3" target="_blank" rel="noopener">@rishabh-mp3&lt;/a>,
&lt;a href="https://github.com/RodDalBen" target="_blank" rel="noopener">@RodDalBen&lt;/a>,
&lt;a href="https://github.com/rogerssam" target="_blank" rel="noopener">@rogerssam&lt;/a>,
&lt;a href="https://github.com/rsh52" target="_blank" rel="noopener">@rsh52&lt;/a>,
&lt;a href="https://github.com/rwilson8" target="_blank" rel="noopener">@rwilson8&lt;/a>,
&lt;a href="https://github.com/salim-b" target="_blank" rel="noopener">@salim-b&lt;/a>,
&lt;a href="https://github.com/sambtalcott" target="_blank" rel="noopener">@sambtalcott&lt;/a>,
&lt;a href="https://github.com/samuel-marsh" target="_blank" rel="noopener">@samuel-marsh&lt;/a>,
&lt;a href="https://github.com/schloerke" target="_blank" rel="noopener">@schloerke&lt;/a>,
&lt;a href="https://github.com/schmittrjp" target="_blank" rel="noopener">@schmittrjp&lt;/a>,
&lt;a href="https://github.com/sierrajohnson" target="_blank" rel="noopener">@sierrajohnson&lt;/a>,
&lt;a href="https://github.com/smouksassi" target="_blank" rel="noopener">@smouksassi&lt;/a>,
&lt;a href="https://github.com/stitam" target="_blank" rel="noopener">@stitam&lt;/a>,
&lt;a href="https://github.com/stragu" target="_blank" rel="noopener">@stragu&lt;/a>,
&lt;a href="https://github.com/strengejacke" target="_blank" rel="noopener">@strengejacke&lt;/a>,
&lt;a href="https://github.com/sunta3iouxos" target="_blank" rel="noopener">@sunta3iouxos&lt;/a>,
&lt;a href="https://github.com/szkabel" target="_blank" rel="noopener">@szkabel&lt;/a>,
&lt;a href="https://github.com/taozhou2020" target="_blank" rel="noopener">@taozhou2020&lt;/a>,
&lt;a href="https://github.com/tdhock" target="_blank" rel="noopener">@tdhock&lt;/a>,
&lt;a href="https://github.com/telenskyt" target="_blank" rel="noopener">@telenskyt&lt;/a>,
&lt;a href="https://github.com/teunbrand" target="_blank" rel="noopener">@teunbrand&lt;/a>,
&lt;a href="https://github.com/the-Hull" target="_blank" rel="noopener">@the-Hull&lt;/a>,
&lt;a href="https://github.com/thgsponer" target="_blank" rel="noopener">@thgsponer&lt;/a>,
&lt;a href="https://github.com/thomasp85" target="_blank" rel="noopener">@thomasp85&lt;/a>,
&lt;a href="https://github.com/ThomasSoeiro" target="_blank" rel="noopener">@ThomasSoeiro&lt;/a>,
&lt;a href="https://github.com/Tiggax" target="_blank" rel="noopener">@Tiggax&lt;/a>,
&lt;a href="https://github.com/tikkss" target="_blank" rel="noopener">@tikkss&lt;/a>,
&lt;a href="https://github.com/TimTaylor" target="_blank" rel="noopener">@TimTaylor&lt;/a>,
&lt;a href="https://github.com/tombishop1" target="_blank" rel="noopener">@tombishop1&lt;/a>,
&lt;a href="https://github.com/tommmmi" target="_blank" rel="noopener">@tommmmi&lt;/a>,
&lt;a href="https://github.com/totajuliusd" target="_blank" rel="noopener">@totajuliusd&lt;/a>,
&lt;a href="https://github.com/trafficfan" target="_blank" rel="noopener">@trafficfan&lt;/a>,
&lt;a href="https://github.com/tungttnguyen" target="_blank" rel="noopener">@tungttnguyen&lt;/a>,
&lt;a href="https://github.com/tvatter" target="_blank" rel="noopener">@tvatter&lt;/a>,
&lt;a href="https://github.com/twest820" target="_blank" rel="noopener">@twest820&lt;/a>,
&lt;a href="https://github.com/ujtwr" target="_blank" rel="noopener">@ujtwr&lt;/a>,
&lt;a href="https://github.com/venpopov" target="_blank" rel="noopener">@venpopov&lt;/a>,
&lt;a href="https://github.com/vgregoire1" target="_blank" rel="noopener">@vgregoire1&lt;/a>,
&lt;a href="https://github.com/victorcat4" target="_blank" rel="noopener">@victorcat4&lt;/a>,
&lt;a href="https://github.com/victorfeagins" target="_blank" rel="noopener">@victorfeagins&lt;/a>,
&lt;a href="https://github.com/vivekJax" target="_blank" rel="noopener">@vivekJax&lt;/a>,
&lt;a href="https://github.com/wbvguo" target="_blank" rel="noopener">@wbvguo&lt;/a>,
&lt;a href="https://github.com/willgearty" target="_blank" rel="noopener">@willgearty&lt;/a>,
&lt;a href="https://github.com/williamlai2" target="_blank" rel="noopener">@williamlai2&lt;/a>,
&lt;a href="https://github.com/withr" target="_blank" rel="noopener">@withr&lt;/a>,
&lt;a href="https://github.com/wvictor14" target="_blank" rel="noopener">@wvictor14&lt;/a>,
&lt;a href="https://github.com/XdahaX" target="_blank" rel="noopener">@XdahaX&lt;/a>,
&lt;a href="https://github.com/yjunechoe" target="_blank" rel="noopener">@yjunechoe&lt;/a>,
&lt;a href="https://github.com/yoshidk6" target="_blank" rel="noopener">@yoshidk6&lt;/a>,
&lt;a href="https://github.com/YUCHENG-ZHAO" target="_blank" rel="noopener">@YUCHENG-ZHAO&lt;/a>,
&lt;a href="https://github.com/Yunuuuu" target="_blank" rel="noopener">@Yunuuuu&lt;/a>,
&lt;a href="https://github.com/yutannihilation" target="_blank" rel="noopener">@yutannihilation&lt;/a>,
&lt;a href="https://github.com/yzz32" target="_blank" rel="noopener">@yzz32&lt;/a>,
&lt;a href="https://github.com/zhengxiaoUVic" target="_blank" rel="noopener">@zhengxiaoUVic&lt;/a>, and
&lt;a href="https://github.com/zjwinn" target="_blank" rel="noopener">@zjwinn&lt;/a>.&lt;/p>
&lt;section class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1" role="doc-endnote">
&lt;p>Normally,
&lt;a href="https://ggplot2.tidyverse.org/reference/aes.html" target="_blank" rel="noopener">&lt;code>aes()&lt;/code>&lt;/a> is strictly used to map data instead of setting a fixed property. We diverge from this API for pragmatic reasons, not theoretical ones. &lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:2" role="doc-endnote">
&lt;p>Aesthetics of the position adjustment are not be confused with position aesthetics. Position aesthetics like &lt;code>x&lt;/code> and &lt;code>y&lt;/code> are transformed by a scale, whereas aesthetics of the position adjustment like &lt;code>nudge_x&lt;/code> and &lt;code>nudge_y&lt;/code> are not (akin to &lt;code>width&lt;/code> and &lt;code>height&lt;/code>). &lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/section></description></item><item><title>Joining the ggplot2 team</title><link>https://www.tidyverse.org/blog/2025/01/joining-ggplot2/</link><pubDate>Thu, 09 Jan 2025 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2025/01/joining-ggplot2/</guid><description>&lt;!--
TODO:
* [x] Look over / edit the post's title in the yaml
* [x] Edit (or delete) the description; note this appears in the Twitter card
* [x] Pick category and tags (see existing with [`hugodown::tidy_show_meta()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html))
* [x] Find photo &amp; update yaml metadata
* [x] Create `thumbnail-sq.jpg`; height and width should be equal
* [x] Create `thumbnail-wd.jpg`; width should be >5x height
* [x] [`hugodown::use_tidy_thumbnails()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html)
* [ ] Add intro sentence, e.g. the standard tagline for the package
* [ ] [`usethis::use_tidy_thanks()`](https://usethis.r-lib.org/reference/use_tidy_thanks.html)
-->
&lt;p>Hello there! I&amp;rsquo;ve been working on ggplot2 for a while now, and I&amp;rsquo;d like to tell you how that came about and what it is like.&lt;/p>
&lt;h2 id="how-i-got-involved">How I got involved
&lt;a href="#how-i-got-involved">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>My journey into learning R started in 2017 during an internship at the EMBL-EBI. The main gripe about base R plotting that drove me into ggplot2&amp;rsquo;s arms were the arcane invocations to get anything else than one of the pre-approved chart types. In contrast, ggplot2 absorbs a bunch of small paper cuts, is very compositional in nature while remaining highly customisable. In a bid to &amp;ldquo;learn from the mistakes of others&amp;rdquo; rather than (continue to copiously) make my own, I became active on Stack Overflow answering questions and solving plotting issues. For posterity: this was in the days before you could ask an large language model for personalised advice and actual humans were equally frustrated on both sides of the question.&lt;/p>
&lt;p>I was keeping track of solutions to common problems in a personal cookbook that had its own arcane invocations. To give a bit of flavour: much of the cookbook was about preparing gtables (the data structure that comes out of building a plot) for combining and aligning plots. &lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup> The cookbook eventually grew into my first ggplot2 extension package:
&lt;a href="https://teunbrand.github.io/ggh4x/" target="_blank" rel="noopener">ggh4x&lt;/a>. Perhaps that package would be best subtitled: &amp;lsquo;Remedies to my common ggplot2 ailments&amp;rsquo;. It contains a bunch of miscellaneous functions ranging from reorganising facets to putting minor ticks on the axes. The nature of the package was also its downside, as ggh4x lacked any sense of scope (and still does, as befits any first package).&lt;/p>
&lt;p>Around the time when I was really getting into ggplot extensions,
&lt;a href="https://github.com/EvaMaeRey" target="_blank" rel="noopener">Gina Reynolds&lt;/a> had started organising a meeting for people who build ggplot2 extensions. It is an interesting place to meet others and hear about their packages and how they face interacting with the ggplot2 extension system. I started attending with some degree of regularity and made a discussion place on GitHub. We now use this for general exchange of ideas, but also package specific issues.&lt;/p>
&lt;p>Meanwhile, the questions on Stack Overflow kept directing my attention at the ggplot2 issue tracker every once in a while. After lurking in there for a bit, I started my first informal contributions to ggplot2 itself by answering the simple stuff just as I did on Stack Overflow. It may not seem like much of a contribution, but in retrospect, answering issues helps triaging them: it separates those issues that need additional changes in ggplot2 from those that do not. My first &amp;lsquo;proper contribution&amp;rsquo; in the shape of a pull request was in 2020. It replaced 3 lines of code with 2 lines of code to benefit type stability (this was prior to
&lt;a href="https://vctrs.r-lib.org/" target="_blank" rel="noopener">vctrs&lt;/a>)&lt;sup id="fnref:2">&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref">2&lt;/a>&lt;/sup>.&lt;/p>
&lt;p>In 2022, I commented &amp;ldquo;I&amp;rsquo;d be willing to take a stab at this&amp;rdquo; on an issue proposing a large refactor of the guide system. I like to think it was this precise moment that Thomas, the project lead after having taken over for Hadley, took notice and later invited me to join the team&lt;sup id="fnref:3">&lt;a href="#fn:3" class="footnote-ref" role="doc-noteref">3&lt;/a>&lt;/sup>. This new guide system ended up laying the foundation for
&lt;a href="https://teunbrand.github.io/legendry/" target="_blank" rel="noopener">legendry&lt;/a>, so it wasn&amp;rsquo;t entirely out of unselfish reasons that I volunteered. At any rate, this is a great opportunity to fill big shoes on a major R project, so I&amp;rsquo;m very excited to have joined!&lt;/p>
&lt;h2 id="becoming-an-insider">Becoming an insider
&lt;a href="#becoming-an-insider">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Part of being on the team is straightforward. You triage issues. You fix bugs. You implement new features. At the point that I joined, I had already done these things as an outsider. The only thing that really changes is that you get the keys to the kingdom: you can now close issues and merge pull requests &lt;sup id="fnref:4">&lt;a href="#fn:4" class="footnote-ref" role="doc-noteref">4&lt;/a>&lt;/sup>. You&amp;rsquo;re then trusted to wield this power wisely. You then hope you do.&lt;/p>
&lt;p>At the time I joined the most active maintainers were Thomas, Claus and Hiroaki. I was surprised to learn that really most communication happens on GitHub and it is all public discussion. Even more abstract coordination that does not neatly fit into a single issue, like preparing a new release, didn&amp;rsquo;t occur behind closed doors. I think what made my introduction to the team more awkward than it needed to be was that GitHub issues is not really a good place for announcements where you can say &amp;lsquo;Hi everyone, this person is on the team now and will be doing stuff in the project&amp;rsquo;. I had interacted with the other active maintainers before, so I wasn&amp;rsquo;t a completely alien actor, but I felt some unclarity lingered longer than it ought have. Perhaps I should more assertively have introduced myself &lt;sup id="fnref:5">&lt;a href="#fn:5" class="footnote-ref" role="doc-noteref">5&lt;/a>&lt;/sup>.&lt;/p>
&lt;p>However, by the time posit::conf(2024) was over, I&amp;rsquo;ve met 6 out of the 9 other authors in person. I have more thoughts about conf and my first time in the United States, but it has been amazing to meet all these people in person whose work you&amp;rsquo;ve been admiring for a while!&lt;/p>
&lt;h2 id="maintaining-ggplot2">Maintaining ggplot2
&lt;a href="#maintaining-ggplot2">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>The ggplot2 package has both the blessing and the curse of being a popular package. One the one hand, it is a blessing that people care about the project, post issues that they find and make intermittent contributions. The curse is that it is such a staple in the R ecosystem, that almost any change will inadvertently affect somebody else&amp;rsquo;s code. Not only because ggplot2 is widely used, but also because people have been &amp;hellip;creative&amp;hellip; with how they are using ggplot2. The art of making changes is to largely affect plots in a good way.&lt;/p>
&lt;p>The first big project I was rummaging through was the guide system I proposed to rewrite. The guide system had never been advertised as an official extension point, but naturally that didn&amp;rsquo;t preclude people from using it as an extension point anyway.&lt;sup id="fnref:6">&lt;a href="#fn:6" class="footnote-ref" role="doc-noteref">6&lt;/a>&lt;/sup> So in addition to rewriting the system, we also had to prevent terribly breaking extensions that relied on the old system. In some cases, this meant sending out PRs to other packages to be compatible with both systems.&lt;/p>
&lt;p>Having worked through a good number of issues at this point in time, I can see some emergent patterns. Different patterns can be partially explained by different audiences. The regular user wants to be empowered to execute their vision of a plot effectively. Maintainers of extensions would often like things to work consistently or change a very obscure line somewhere that they have identified as blocking a niche use case. Teachers would like their students to get stuck less often, which often involves improving error messages. All in all, there is no shortage of issues to work through.&lt;/p>
&lt;p>The next big thing we&amp;rsquo;re working on is some practical necromancy in getting themeable aesthetics resurrected, which was
&lt;a href="https://www.danaseidel.com/2018-09-01-ATidySummer/" target="_blank" rel="noopener">initiated by Dana Paige Seidel&lt;/a> all the way back in 2018! We&amp;rsquo;d like the theme to be a home for more default choices than just non-data elements. Default layer aesthetics are a start, but we plan on putting in default palettes too.&lt;/p>
&lt;h2 id="a-few-words-of-thanks">A few words of thanks
&lt;a href="#a-few-words-of-thanks">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>I&amp;rsquo;ve been plucked from a level of relative obscurity &amp;mdash;a package maintainer that has this weird miscellaneous package&amp;mdash; into the path of a flagship R project, for which I&amp;rsquo;m very grateful. First and foremost I&amp;rsquo;m thankful to Thomas Lin Pedersen, who has put me into this position and steers the ggplot2 project. Secondly to Hadley Wickham and the rest of the tidyverse team, who make me feel included; both at conf and during regular meetings&lt;sup id="fnref:7">&lt;a href="#fn:7" class="footnote-ref" role="doc-noteref">7&lt;/a>&lt;/sup>. Thirdly, the co-authors I met during conf: Claus Wilke, for whose workshop I TA&amp;rsquo;d, but also Kara Woo and Winston Chang. Lastly, I&amp;rsquo;d like to thank Posit the company for contracting me to do work I also enjoy as a hobby!&lt;/p>
&lt;section class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1" role="doc-endnote">
&lt;p>Luckily, we don&amp;rsquo;t have to think about this &lt;em>at all&lt;/em>, thanks to the
&lt;a href="https://patchwork.data-imaginist.com/" target="_blank" rel="noopener">patchwork&lt;/a> package! &lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:2" role="doc-endnote">
&lt;p>I&amp;rsquo;m omitting here that I also had to write 50 lines of tests for this small change &lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:3" role="doc-endnote">
&lt;p>How much this actually reflects any truth is for any of us to guess and for Thomas to know. Later, I learned that this was also
&lt;a href="https://www.data-imaginist.com/posts/2016-10-31-becoming-the-intern/" target="_blank" rel="noopener">how Thomas himself was roped into the project&lt;/a>! &lt;a href="#fnref:3" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:4" role="doc-endnote">
&lt;p>After review though. You&amp;rsquo;re not given &lt;em>that&lt;/em> much power! &lt;a href="#fnref:4" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:5" role="doc-endnote">
&lt;p>But I&amp;rsquo;m not celebrated for my social graces :) &lt;a href="#fnref:5" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:6" role="doc-endnote">
&lt;p>I don&amp;rsquo;t have a moral high ground here: I was one of the worst offenders! &lt;a href="#fnref:6" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:7" role="doc-endnote">
&lt;p>Mostly for The Golden Hex Sticker though! &lt;a href="#fnref:7" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/section></description></item><item><title>patchwork 1.3.0</title><link>https://www.tidyverse.org/blog/2024/09/patchwork-1-3-0/</link><pubDate>Fri, 13 Sep 2024 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2024/09/patchwork-1-3-0/</guid><description>&lt;!--
TODO:
* [x] Look over / edit the post's title in the yaml
* [x] Edit (or delete) the description; note this appears in the Twitter card
* [x] Pick category and tags (see existing with [`hugodown::tidy_show_meta()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html))
* [x] Find photo &amp; update yaml metadata
* [x] Create `thumbnail-sq.jpg`; height and width should be equal
* [x] Create `thumbnail-wd.jpg`; width should be >5x height
* [x] [`hugodown::use_tidy_thumbnails()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html)
* [x] Add intro sentence, e.g. the standard tagline for the package
* [x] [`usethis::use_tidy_thanks()`](https://usethis.r-lib.org/reference/use_tidy_thanks.html)
-->
&lt;p>I&amp;rsquo;m excited to present
&lt;a href="https://patchwork.data-imaginist.com" target="_blank" rel="noopener">patchwork&lt;/a> 1.3.0, our package for creating multifigure plot compositions. This versions adds table support and improves support for &amp;ldquo;free&amp;quot;ing components to span across multiple grid cells.&lt;/p>
&lt;p>You can install patchwork from CRAN with:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/utils/install.packages.html'>install.packages&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"patchwork"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>You can see a full list of changes in the
&lt;a href="https://patchwork.data-imaginist.com/news/index.html" target="_blank" rel="noopener">release notes&lt;/a>&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://patchwork.data-imaginist.com'>patchwork&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://ggplot2.tidyverse.org'>ggplot2&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://gt.rstudio.com'>gt&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;h2 id="tables-are-figures-too">Tables are figures too
&lt;a href="#tables-are-figures-too">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>The new and shiny feature of the release is that patchwork now has native support for gt objects, making it possible to compose beautifully formatted tables together with your figures. This has been made possible through Teun Van den Brand&amp;rsquo;s effort to provide grob output to gt. While this means that you can now pass in gt objects to
&lt;a href="https://patchwork.data-imaginist.com/reference/wrap_elements.html" target="_blank" rel="noopener">&lt;code>wrap_elements()&lt;/code>&lt;/a> in the same way as other supported data types, it also goes one step further, using the semantics of the table design to add table specific formatting options through the new
&lt;a href="https://patchwork.data-imaginist.com/reference/wrap_table.html" target="_blank" rel="noopener">&lt;code>wrap_table()&lt;/code>&lt;/a> function.&lt;/p>
&lt;p>But let&amp;rsquo;s take a step back and see how the simplest support works in reality:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>p1&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>airquality&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_path.html'>geom_line&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='nv'>Day&lt;/span>, y &lt;span class='o'>=&lt;/span> &lt;span class='nv'>Temp&lt;/span>, colour &lt;span class='o'>=&lt;/span> &lt;span class='nv'>month.name&lt;/span>&lt;span class='o'>[&lt;/span>&lt;span class='nv'>Month&lt;/span>&lt;span class='o'>]&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>colour &lt;span class='o'>=&lt;/span> &lt;span class='s'>"Month"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>aq&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nv'>airquality&lt;/span>&lt;span class='o'>[&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/sample.html'>sample&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/nrow.html'>nrow&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>airquality&lt;/span>&lt;span class='o'>)&lt;/span>, &lt;span class='m'>10&lt;/span>&lt;span class='o'>)&lt;/span>, &lt;span class='o'>]&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>p1&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nf'>&lt;a href='https://gt.rstudio.com/reference/gt.html'>gt&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>aq&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"Sample of the dataset"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-2-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>A few things can be gathered already from this small example. Tables can have titles (and subtitles, captions, and tags) like regular plots (in that sense they behave like
&lt;a href="https://patchwork.data-imaginist.com/reference/wrap_elements.html" target="_blank" rel="noopener">&lt;code>wrap_elements()&lt;/code>&lt;/a> output). Also, and this is perhaps more interesting, patchwork is aware that the first row is special (a header row), and thus places that on top of the panel area so that the plot region of the left plot is aligned with the body of the table, not the full table.&lt;/p>
&lt;p>Lastly, we see that tables often have a fixed size, contrary to plots which can shrink and expand based on how much room they have. Because of this, our table is overflowing it&amp;rsquo;s region in the plot above creating a not-so-great look.&lt;/p>
&lt;p>Let&amp;rsquo;s see how we can use
&lt;a href="https://patchwork.data-imaginist.com/reference/wrap_table.html" target="_blank" rel="noopener">&lt;code>wrap_table()&lt;/code>&lt;/a> to control some of these behaviors. First, while we could decrease the font size in the table to make it smaller, we could also allow it some more space instead. We could do this by using &lt;code>plot_layout(widths = ...)&lt;/code> but it would require a fair amount of guessing on our side to get it just right. Thankfully, patchwork is smart enough to figure it out for us and we can instruct it to do so using the &lt;code>space&lt;/code> argument in
&lt;a href="https://patchwork.data-imaginist.com/reference/wrap_table.html" target="_blank" rel="noopener">&lt;code>wrap_table()&lt;/code>&lt;/a>. Setting it to &lt;code>&amp;quot;free_y&amp;quot;&lt;/code> instructs it to fix the width to the table width but keep the height free:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>p1&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nf'>&lt;a href='https://patchwork.data-imaginist.com/reference/wrap_table.html'>wrap_table&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>aq&lt;/span>, space &lt;span class='o'>=&lt;/span> &lt;span class='s'>"free_y"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-3-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>Setting &lt;code>space&lt;/code> to &lt;code>&amp;quot;fixed&amp;quot;&lt;/code> would constrain both the width and the height of the area it occupies. Since we only have a single row in our layout this would leave us with some empty horizontal space:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>p1&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nf'>&lt;a href='https://patchwork.data-imaginist.com/reference/wrap_table.html'>wrap_table&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>aq&lt;/span>, space &lt;span class='o'>=&lt;/span> &lt;span class='s'>"fixed"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-4-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>If the space is fixed in the y direction and the table has any source notes or footnotes, these will behave like the column header and be placed outside the panel area depending on the &lt;code>panel&lt;/code> setting&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>aq_footer&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://gt.rstudio.com/reference/gt.html'>gt&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>aq&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://gt.rstudio.com/reference/tab_source_note.html'>tab_source_note&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"This is not part of the table body"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>p1&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nf'>&lt;a href='https://patchwork.data-imaginist.com/reference/wrap_table.html'>wrap_table&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>aq_footer&lt;/span>, space &lt;span class='o'>=&lt;/span> &lt;span class='s'>"fixed"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-5-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>While the space argument is great for making the composition look good and the table well placed in the whole, it can also serve a different purpose of making sure that rows (or columns) are aligned with the axis of a plot. There are no facilities to ensure that the breaks order matches between plots and tables so that is the responsibility of the user, but otherwise this is a great way to use tables to directly augment a plot:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>p2&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>airquality&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_boxplot.html'>geom_boxplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='nv'>month.name&lt;/span>&lt;span class='o'>[&lt;/span>&lt;span class='nv'>Month&lt;/span>&lt;span class='o'>]&lt;/span>, y &lt;span class='o'>=&lt;/span> &lt;span class='nv'>Temp&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>axis.text.x &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>element_blank&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>, axis.title.x &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>element_blank&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/scale_discrete.html'>scale_x_discrete&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>expand &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0&lt;/span>, &lt;span class='m'>0.5&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='c'># Construct our table&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>table&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/cbind.html'>rbind&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/tapply.html'>tapply&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>airquality&lt;/span>&lt;span class='o'>$&lt;/span>&lt;span class='nv'>Temp&lt;/span>, &lt;span class='nv'>airquality&lt;/span>&lt;span class='o'>$&lt;/span>&lt;span class='nv'>Month&lt;/span>, &lt;span class='nv'>max&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/tapply.html'>tapply&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>airquality&lt;/span>&lt;span class='o'>$&lt;/span>&lt;span class='nv'>Temp&lt;/span>, &lt;span class='nv'>airquality&lt;/span>&lt;span class='o'>$&lt;/span>&lt;span class='nv'>Month&lt;/span>, &lt;span class='nv'>median&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/tapply.html'>tapply&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>airquality&lt;/span>&lt;span class='o'>$&lt;/span>&lt;span class='nv'>Temp&lt;/span>, &lt;span class='nv'>airquality&lt;/span>&lt;span class='o'>$&lt;/span>&lt;span class='nv'>Month&lt;/span>, &lt;span class='nv'>min&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/colnames.html'>colnames&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>table&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nv'>month.name&lt;/span>&lt;span class='o'>[&lt;/span>&lt;span class='m'>5&lt;/span>&lt;span class='o'>:&lt;/span>&lt;span class='m'>9&lt;/span>&lt;span class='o'>]&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>table&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/data.frame.html'>data.frame&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> Measure &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"Max"&lt;/span>, &lt;span class='s'>"Median"&lt;/span>, &lt;span class='s'>"Min"&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> &lt;span class='nv'>table&lt;/span>&lt;/span>
&lt;span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>table&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://gt.rstudio.com/reference/gt.html'>gt&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>table&lt;/span>, rowname_col &lt;span class='o'>=&lt;/span> &lt;span class='s'>"Measure"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://gt.rstudio.com/reference/cols_width.html'>cols_width&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://tidyselect.r-lib.org/reference/starts_with.html'>contains&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>month.name&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>~&lt;/span> &lt;span class='nf'>&lt;a href='https://gt.rstudio.com/reference/px.html'>px&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>100&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://gt.rstudio.com/reference/cols_align.html'>cols_align&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>align &lt;span class='o'>=&lt;/span> &lt;span class='s'>"center"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://gt.rstudio.com/reference/cols_align.html'>cols_align&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>align &lt;span class='o'>=&lt;/span> &lt;span class='s'>"right"&lt;/span>, columns &lt;span class='o'>=&lt;/span> &lt;span class='s'>"Measure"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>p2&lt;/span> &lt;span class='o'>/&lt;/span> &lt;span class='nf'>&lt;a href='https://patchwork.data-imaginist.com/reference/wrap_table.html'>wrap_table&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>table&lt;/span>, space &lt;span class='o'>=&lt;/span> &lt;span class='s'>"fixed"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-6-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>Circling back, there was another argument to
&lt;a href="https://patchwork.data-imaginist.com/reference/wrap_table.html" target="_blank" rel="noopener">&lt;code>wrap_table()&lt;/code>&lt;/a> we didn&amp;rsquo;t get into yet. In the plot above, we see that the row names are conveniently aligned with the axis rather than the panel of the plot above, in the same way as the headers where placed outside the panel area. This is a nice default and generally makes sense for the semantics of a table, but you might want something different. The &lt;code>panel&lt;/code> argument allows you to control this exact behavior. It takes &lt;code>&amp;quot;body&amp;quot;&lt;/code>, &lt;code>&amp;quot;full&amp;quot;&lt;/code>, &lt;code>&amp;quot;rows&amp;quot;&lt;/code>, or &lt;code>&amp;quot;cols&amp;quot;&lt;/code> which indicate what portion of the table should be inside the panel area. The default is &lt;code>&amp;quot;body&amp;quot;&lt;/code> which places row and column names outside the panel. &lt;code>&amp;quot;full&amp;quot;&lt;/code>, on the contrary, places everything inside, while &lt;code>&amp;quot;rows&amp;quot;&lt;/code> and &lt;code>&amp;quot;cols&amp;quot;&lt;/code> are half versions that allows you to keep either column &lt;em>or&lt;/em> row names outside the panel respectively.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='c'># Place all rows (including the header row) inside the panel area&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>p1&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nf'>&lt;a href='https://patchwork.data-imaginist.com/reference/wrap_table.html'>wrap_table&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>aq&lt;/span>, panel &lt;span class='o'>=&lt;/span> &lt;span class='s'>"rows"&lt;/span>, space &lt;span class='o'>=&lt;/span> &lt;span class='s'>"free_y"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-7-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>Just like the tables support ggplot2-like titles, they also support tags, meaning that patchworks auto-tagging works as expected. It can be turned off using the &lt;code>ignore_tag&lt;/code> argument but often you&amp;rsquo;d want to treat it as a figure in the figure text:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>p1&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nf'>&lt;a href='https://patchwork.data-imaginist.com/reference/wrap_table.html'>wrap_table&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>aq&lt;/span>, panel &lt;span class='o'>=&lt;/span> &lt;span class='s'>"rows"&lt;/span>, space &lt;span class='o'>=&lt;/span> &lt;span class='s'>"free_y"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://patchwork.data-imaginist.com/reference/plot_annotation.html'>plot_annotation&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>tag_levels &lt;span class='o'>=&lt;/span> &lt;span class='s'>"A"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&amp;amp;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>plot.tag &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>margin &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>margin&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0&lt;/span>, &lt;span class='m'>6&lt;/span>, &lt;span class='m'>6&lt;/span>, &lt;span class='m'>0&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-8-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;h3 id="accesibility">Accesibility
&lt;a href="#accesibility">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>We truly believe that the features laid out above will be a boon for augmenting your data visualisation with data that can be read precisely at a glance. However, we would be remiss to not note how tables that are part of a patchwork visualisation doesn&amp;rsquo;t have the same accessibility featurees as a gt table included directly in e.g. an HTML output. This is because graphics are rasterised into a PNG file and thus looses all semantical information that is inherent in a table. This should be kept in mind when providing Alt text for your figures so you ensure they are legible for everyone.&lt;/p>
&lt;h3 id="future">Future
&lt;a href="#future">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>The support on the patchwork end is likely done at this point, but the conversion to grobs that has been added to gt is still somewhat young and will improve over time. It is likely that markdown formatting (through marquee) and other niceties will get added, leading to even more power in composing tables with plots using patchwork as the glue between them. As with the
&lt;a href="https://quarto.org/docs/blog/posts/2024-07-02-beautiful-tables-in-typst/" target="_blank" rel="noopener">support for gt in typst&lt;/a> the support for gt in patchwork is part of our larger effort to bring the power of gt to more environments and create a single unified solution to table styling.&lt;/p>
&lt;h2 id="with-freedom-comes-great-responsibility">With freedom comes great responsibility
&lt;a href="#with-freedom-comes-great-responsibility">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>The second leg of this release concerns the
&lt;a href="https://patchwork.data-imaginist.com/reference/free.html" target="_blank" rel="noopener">&lt;code>free()&lt;/code>&lt;/a> function which was introduced in the last release. I devoted a whole section of my posit::conf talk this year to talk about
&lt;a href="https://patchwork.data-imaginist.com/reference/free.html" target="_blank" rel="noopener">&lt;code>free()&lt;/code>&lt;/a> and how it was a good thing to say no to requests for functionality until you have a solution that fits into your API and doesn&amp;rsquo;t add clutter. I really like how the API for
&lt;a href="https://patchwork.data-imaginist.com/reference/free.html" target="_blank" rel="noopener">&lt;code>free()&lt;/code>&lt;/a> turned out but I also knew it could do more. In this release it delivers on those promises with two additional arguments.&lt;/p>
&lt;h3 id="which-side">Which side?
&lt;a href="#which-side">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>As it were,
&lt;a href="https://patchwork.data-imaginist.com/reference/free.html" target="_blank" rel="noopener">&lt;code>free()&lt;/code>&lt;/a> could only be used to completely turn off alignment of a plot, e.g. like below:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>p1&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mtcars&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_bar.html'>geom_bar&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>y &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/factor.html'>factor&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>gear&lt;/span>&lt;span class='o'>)&lt;/span>, fill &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/factor.html'>factor&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>gear&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/scale_discrete.html'>scale_y_discrete&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> &lt;span class='s'>""&lt;/span>,&lt;/span>
&lt;span> labels &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"3 gears are often enough"&lt;/span>,&lt;/span>
&lt;span> &lt;span class='s'>"But, you know, 4 is a nice number"&lt;/span>,&lt;/span>
&lt;span> &lt;span class='s'>"I would def go with 5 gears in a modern car"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>p2&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mtcars&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mpg&lt;/span>, &lt;span class='nv'>disp&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://patchwork.data-imaginist.com/reference/free.html'>free&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>p1&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>/&lt;/span> &lt;span class='nv'>p2&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-9-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>We can see that panel alignment has been turned off both to the left and to the right (and top and bottom if it were visible). But perhaps you are only interested in un-aligning the left side, keeping the legend to the right of both plots. Now you can, thanks to the &lt;code>side&lt;/code> argument which takes a string containing one or more of the &lt;code>t&lt;/code>, &lt;code>r&lt;/code>, &lt;code>b&lt;/code>, and &lt;code>l&lt;/code> characters to indicate which sides to apply the freeing to (default is &lt;code>&amp;quot;trbl&amp;quot;&lt;/code> meaning &amp;ldquo;target all sides&amp;rdquo;).&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://patchwork.data-imaginist.com/reference/free.html'>free&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>p1&lt;/span>, side &lt;span class='o'>=&lt;/span> &lt;span class='s'>"l"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>/&lt;/span> &lt;span class='nv'>p2&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-10-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>Freeing works inside nested patchworks, where you can target various sides at various levels:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>p3&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mtcars&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_boxplot.html'>geom_boxplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>y &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/factor.html'>factor&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>gear&lt;/span>&lt;span class='o'>)&lt;/span>, &lt;span class='nv'>disp&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/scale_discrete.html'>scale_y_discrete&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> &lt;span class='s'>""&lt;/span>,&lt;/span>
&lt;span> labels &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"... and 3"&lt;/span>,&lt;/span>
&lt;span> &lt;span class='s'>"4 of them"&lt;/span>,&lt;/span>
&lt;span> &lt;span class='s'>"5 gears"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>nested&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nv'>p2&lt;/span> &lt;span class='o'>/&lt;/span> &lt;span class='nf'>&lt;a href='https://patchwork.data-imaginist.com/reference/free.html'>free&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>p1&lt;/span>, side &lt;span class='o'>=&lt;/span> &lt;span class='s'>"l"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://patchwork.data-imaginist.com/reference/free.html'>free&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>nested&lt;/span>, side &lt;span class='o'>=&lt;/span> &lt;span class='s'>"r"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>/&lt;/span>&lt;/span>
&lt;span> &lt;span class='nv'>p3&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-11-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;h3 id="what-does-freeing-means-anyway">What does &amp;ldquo;freeing&amp;rdquo; means anyway?
&lt;a href="#what-does-freeing-means-anyway">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>While being able to target specific sides is pretty great in and off itself, we are not done yet. After being able to &lt;em>not&lt;/em> align panels the most requested feature was the possibility of moving the axis title closer to the axis text if alignment had pushed it apart. Consider again our unfreed patchwork:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>p1&lt;/span> &lt;span class='o'>/&lt;/span> &lt;span class='nv'>p2&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-12-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>While we can &amp;ldquo;fix&amp;rdquo; it by letting the top panel stretch, another way to improve upon it would be to move the dangling y-axis title of the bottom plot closer to the axis. Enter the &lt;code>type&lt;/code> argument to
&lt;a href="https://patchwork.data-imaginist.com/reference/free.html" target="_blank" rel="noopener">&lt;code>free()&lt;/code>&lt;/a> which informs patchwork how to not align the input. The default (&lt;code>&amp;quot;panel&amp;quot;&lt;/code>) works just as
&lt;a href="https://patchwork.data-imaginist.com/reference/free.html" target="_blank" rel="noopener">&lt;code>free()&lt;/code>&lt;/a> always has, but the other two values opens up some new nifty goodies. Setting &lt;code>type = &amp;quot;label&amp;quot;&lt;/code> does exactly what we discussed above, freeing the label from alignment so it sticks together with the axis and axis text:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>p1&lt;/span> &lt;span class='o'>/&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://patchwork.data-imaginist.com/reference/free.html'>free&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>p2&lt;/span>, type &lt;span class='o'>=&lt;/span> &lt;span class='s'>"label"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-13-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>The other type is &lt;code>&amp;quot;space&amp;quot;&lt;/code> which works slightly different. Using this you tell patchwork to not reserve any space for what the side(s) contain. This is perfect in situation where you already have empty space next to it that can fit the content. Consider this plot:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://patchwork.data-imaginist.com/reference/plot_spacer.html'>plot_spacer&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nv'>p1&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nv'>p2&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nv'>p2&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-14-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>Ugh, the axis text of the top plot pushes everything apart even though there is ample of space for it in the empty region on the left. This is where &lt;code>type = &amp;quot;space&amp;quot;&lt;/code> comes in handy:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://patchwork.data-imaginist.com/reference/plot_spacer.html'>plot_spacer&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nf'>&lt;a href='https://patchwork.data-imaginist.com/reference/free.html'>free&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>p1&lt;/span>, type &lt;span class='o'>=&lt;/span> &lt;span class='s'>"space"&lt;/span>, side &lt;span class='o'>=&lt;/span> &lt;span class='s'>"l"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nv'>p2&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nv'>p2&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-15-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>Of course, such power comes with the responsibility of you ensuring there is actually space for it &amp;mdash; otherwise it will escape out of the figure area:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://patchwork.data-imaginist.com/reference/free.html'>free&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>p1&lt;/span>, type &lt;span class='o'>=&lt;/span> &lt;span class='s'>"space"&lt;/span>, side &lt;span class='o'>=&lt;/span> &lt;span class='s'>"l"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>/&lt;/span>&lt;/span>
&lt;span> &lt;span class='nv'>p2&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-16-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>All the different types of freeing can be stacked on top of each other so you can have a plot that keeps the left axis label together with the axis while also stretches the right side to take up empty space:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>p1&lt;/span> &lt;span class='o'>/&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://patchwork.data-imaginist.com/reference/free.html'>free&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://patchwork.data-imaginist.com/reference/free.html'>free&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>p2&lt;/span>, &lt;span class='s'>"panel"&lt;/span>, &lt;span class='s'>"r"&lt;/span>&lt;span class='o'>)&lt;/span>, &lt;span class='s'>"label"&lt;/span>, &lt;span class='s'>"l"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-17-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>But as always, don&amp;rsquo;t go overboard. If you find yourself needing to use an elaborate combination of stacked
&lt;a href="https://patchwork.data-imaginist.com/reference/free.html" target="_blank" rel="noopener">&lt;code>free()&lt;/code>&lt;/a> calls there is a good chance that something with your core composition needs rethinking.&lt;/p>
&lt;h2 id="the-rest">The rest
&lt;a href="#the-rest">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>The above are the clear highlights of this release. It also contains the standard bug fixes &amp;mdash; especially in the area of axis collecting which was introduced in the last release and came with a bunch of edge cases that were unaccounted for. There is also a new utility function:
&lt;a href="https://rdrr.io/r/base/merge.html" target="_blank" rel="noopener">&lt;code>merge()&lt;/code>&lt;/a> which is an alternative to the &lt;code>-&lt;/code> operator that I don&amp;rsquo;t think many users understood or used. It allows you to merge all plots together into a nested patchwork so that the right hand side is added to a new composition.&lt;/p>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Thank you to all people who have contributed issues, code and comments to this release:&lt;/p>
&lt;p>
&lt;a href="https://github.com/BenVolpe94" target="_blank" rel="noopener">@BenVolpe94&lt;/a>,
&lt;a href="https://github.com/daniellembecker" target="_blank" rel="noopener">@daniellembecker&lt;/a>,
&lt;a href="https://github.com/dchiu911" target="_blank" rel="noopener">@dchiu911&lt;/a>,
&lt;a href="https://github.com/ericKuo722" target="_blank" rel="noopener">@ericKuo722&lt;/a>,
&lt;a href="https://github.com/Fan-iX" target="_blank" rel="noopener">@Fan-iX&lt;/a>,
&lt;a href="https://github.com/IndrajeetPatil" target="_blank" rel="noopener">@IndrajeetPatil&lt;/a>,
&lt;a href="https://github.com/jack-davison" target="_blank" rel="noopener">@jack-davison&lt;/a>,
&lt;a href="https://github.com/karchern" target="_blank" rel="noopener">@karchern&lt;/a>,
&lt;a href="https://github.com/laresbernardo" target="_blank" rel="noopener">@laresbernardo&lt;/a>,
&lt;a href="https://github.com/marchtaylor" target="_blank" rel="noopener">@marchtaylor&lt;/a>,
&lt;a href="https://github.com/mariadelmarq" target="_blank" rel="noopener">@mariadelmarq&lt;/a>,
&lt;a href="https://github.com/Maschette" target="_blank" rel="noopener">@Maschette&lt;/a>,
&lt;a href="https://github.com/michaeltopper1" target="_blank" rel="noopener">@michaeltopper1&lt;/a>,
&lt;a href="https://github.com/mkoohafkan" target="_blank" rel="noopener">@mkoohafkan&lt;/a>,
&lt;a href="https://github.com/n-kall" target="_blank" rel="noopener">@n-kall&lt;/a>,
&lt;a href="https://github.com/person-c" target="_blank" rel="noopener">@person-c&lt;/a>,
&lt;a href="https://github.com/pettyalex" target="_blank" rel="noopener">@pettyalex&lt;/a>,
&lt;a href="https://github.com/petzi53" target="_blank" rel="noopener">@petzi53&lt;/a>,
&lt;a href="https://github.com/phispu" target="_blank" rel="noopener">@phispu&lt;/a>,
&lt;a href="https://github.com/psychelzh" target="_blank" rel="noopener">@psychelzh&lt;/a>,
&lt;a href="https://github.com/rinivarg" target="_blank" rel="noopener">@rinivarg&lt;/a>,
&lt;a href="https://github.com/selkamand" target="_blank" rel="noopener">@selkamand&lt;/a>,
&lt;a href="https://github.com/Soham6298" target="_blank" rel="noopener">@Soham6298&lt;/a>,
&lt;a href="https://github.com/svraka" target="_blank" rel="noopener">@svraka&lt;/a>,
&lt;a href="https://github.com/teng-gao" target="_blank" rel="noopener">@teng-gao&lt;/a>,
&lt;a href="https://github.com/teunbrand" target="_blank" rel="noopener">@teunbrand&lt;/a>,
&lt;a href="https://github.com/thomasp85" target="_blank" rel="noopener">@thomasp85&lt;/a>,
&lt;a href="https://github.com/timz0605" target="_blank" rel="noopener">@timz0605&lt;/a>,
&lt;a href="https://github.com/wish1832" target="_blank" rel="noopener">@wish1832&lt;/a>, and
&lt;a href="https://github.com/Yunuuuu" target="_blank" rel="noopener">@Yunuuuu&lt;/a>.&lt;/p></description></item><item><title>marquee 0.1.0</title><link>https://www.tidyverse.org/blog/2024/05/marquee-0-1-0/</link><pubDate>Wed, 29 May 2024 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2024/05/marquee-0-1-0/</guid><description>&lt;!--
TODO:
* [x] Look over / edit the post's title in the yaml
* [x] Edit (or delete) the description; note this appears in the Twitter card
* [x] Pick category and tags (see existing with [`hugodown::tidy_show_meta()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html))
* [x] Find photo &amp; update yaml metadata
* [x] Create `thumbnail-sq.jpg`; height and width should be equal
* [x] Create `thumbnail-wd.jpg`; width should be >5x height
* [x] [`hugodown::use_tidy_thumbnails()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html)
* [x] Add intro sentence, e.g. the standard tagline for the package
* [-] [`usethis::use_tidy_thanks()`](https://usethis.r-lib.org/reference/use_tidy_thanks.html)
-->
&lt;p>I am super excited to announce the initial release of
&lt;a href="https://marquee.r-lib.org" target="_blank" rel="noopener">marquee&lt;/a>, a markdown parser and renderer for R graphics that allows native rich text formatting of text in graphics created with grid (which includes ggplot2 and lattice).&lt;/p>
&lt;p>The inception of this package goes all the way back to 2017:&lt;/p>
&lt;blockquote class="twitter-tweet">
&lt;p lang="en" dir="ltr">
&lt;p>May I present: Text wrapping of theme elements in &lt;a href="https://twitter.com/hashtag/ggplot2?src=hash&amp;amp;ref_src=twsrc%5Etfw">#ggplot2&lt;/a> with the new (experimental) element_textbox in &lt;a href="https://twitter.com/hashtag/ggforce?src=hash&amp;amp;ref_src=twsrc%5Etfw">#ggforce&lt;/a>&lt;a href="https://twitter.com/hashtag/rstats?src=hash&amp;amp;ref_src=twsrc%5Etfw">#rstats&lt;/a> &lt;a href="https://twitter.com/hashtag/dataviz?src=hash&amp;amp;ref_src=twsrc%5Etfw">#dataviz&lt;/a> &lt;a href="https://t.co/JJMLcuTBqx">pic.twitter.com/JJMLcuTBqx&lt;/a>&lt;/p>
&lt;/p>
&lt;p>&amp;mdash; Thomas Lin Pedersen (@thomasp85) &lt;a href="https://twitter.com/thomasp85/status/816967301014634497?ref_src=twsrc%5Etfw">January 5, 2017&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;script async src="https://platform.twitter.com/widgets.js" charset="utf-8">&lt;/script>
&lt;p>(yeah&amp;hellip;) where I developed an experimental feature for ggforce that allowed automatic text wrapping in
&lt;a href="https://ggplot2.tidyverse.org/reference/element.html" target="_blank" rel="noopener">&lt;code>element_text()&lt;/code>&lt;/a>. Years passed, slowly improving the text rendering capabilities in R until we are finally at a point in the toolchain where something like marquee can deliver on my initial plans.&lt;/p>
&lt;p>If this has you intrigued you can install it from CRAN with:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/utils/install.packages.html'>install.packages&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"marquee"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>This blog post will go through the features of marquee, along with discussing some of its current limitations, all of which are hopefully transient.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://marquee.r-lib.org'>marquee&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;h2 id="an-example">An example
&lt;a href="#an-example">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Since the use of markdown is second-hand nature for most people at this point, there shouldn&amp;rsquo;t be much surprise in what marquee is capable off, so let&amp;rsquo;s start with an example to show the main use:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>md_text&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;/span>
&lt;span>&lt;span class='s'>"# Intro&lt;/span>&lt;/span>
&lt;span>&lt;span class='s'>markdown has been *quite* succesful in creating a unified way of specifying &lt;/span>&lt;/span>
&lt;span>&lt;span class='s'>_semantic_ rich text. While limited, it provides both &amp;#123;.steelblue readability&amp;#125; and&lt;/span>&lt;/span>
&lt;span>&lt;span class='s'>just enough ~power~ features.&lt;/span>&lt;/span>
&lt;span>&lt;span class='s'>&lt;/span>&lt;/span>
&lt;span>&lt;span class='s'> text &amp;lt;- \"markdown **text**\"&lt;/span>&lt;/span>
&lt;span>&lt;span class='s'> marquee_grob(text)&lt;/span>&lt;/span>
&lt;span>&lt;span class='s'>&lt;/span>&lt;/span>
&lt;span>&lt;span class='s'>It features, among others:&lt;/span>&lt;/span>
&lt;span>&lt;span class='s'>&lt;/span>&lt;/span>
&lt;span>&lt;span class='s'>1. lists&lt;/span>&lt;/span>
&lt;span>&lt;span class='s'>&lt;/span>&lt;/span>
&lt;span>&lt;span class='s'>2. code blocks&lt;/span>&lt;/span>
&lt;span>&lt;span class='s'>&lt;/span>&lt;/span>
&lt;span>&lt;span class='s'> * Indented lists&lt;/span>&lt;/span>
&lt;span>&lt;span class='s'> &lt;/span>&lt;/span>
&lt;span>&lt;span class='s'>3. and more...&lt;/span>&lt;/span>
&lt;span>&lt;span class='s'>"&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nf'>grid&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/grid.draw.html'>grid.draw&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://marquee.r-lib.org/reference/marquee_grob.html'>marquee_grob&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>md_text&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-3-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>The above illustrates a couple of things. First and foremost, that markdown works in very unsurprising ways and you get what you type. In fact, the full CommonMark syntax is supported along with extensions for underline and strikethrough. Further, it shows that marquee provides its own extension for specifying custom span elements in the form of the &lt;code>{.class &amp;lt;text&amp;gt;}&lt;/code> syntax. The renderer is clever in interpreting the class so that if it corresponds to a colour name, the colour is automatically applied to the text. Lastly, it shows that the default styling of markdown closely follows the look you&amp;rsquo;ve come to expect from markdown rendered to HTML.&lt;/p>
&lt;h2 id="use-in-ggplot2">Use in ggplot2
&lt;a href="#use-in-ggplot2">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>The number of people using this directly in grid is probably small. It is more likely that you access the functionality of marquee through higher level functions. Marquee provides two such functions aimed at making it easy to use marquee in ggplot2. The aim is to eventually move these into ggplot2 proper, but while we are in the initial phase of development they will stay in this package.&lt;/p>
&lt;h3 id="geom_marquee">&lt;code>geom_marquee()&lt;/code>
&lt;a href="#geom_marquee">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>The first function is (obviously) a geom. It is intended as a stand-in replacement for both
&lt;a href="https://ggplot2.tidyverse.org/reference/geom_text.html" target="_blank" rel="noopener">&lt;code>geom_text()&lt;/code>&lt;/a> and
&lt;a href="https://ggplot2.tidyverse.org/reference/geom_text.html" target="_blank" rel="noopener">&lt;code>geom_label()&lt;/code>&lt;/a>. As with
&lt;a href="https://marquee.r-lib.org/reference/marquee_grob.html" target="_blank" rel="noopener">&lt;code>marquee_grob()&lt;/code>&lt;/a> it works very unsurprisingly:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://ggplot2.tidyverse.org'>ggplot2&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'># Add styling around the first word&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>red_bold_names&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/grep.html'>sub&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"(\\w+)"&lt;/span>, &lt;span class='s'>"&amp;#123;.red **\\1**&amp;#125;"&lt;/span>, &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/colnames.html'>rownames&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mtcars&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mtcars&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span> &lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://marquee.r-lib.org/reference/geom_marquee.html'>geom_marquee&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='nv'>mpg&lt;/span>, y &lt;span class='o'>=&lt;/span> &lt;span class='nv'>disp&lt;/span>, label &lt;span class='o'>=&lt;/span> &lt;span class='nv'>red_bold_names&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-4-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>Apart from standard, but markdown-aware,
&lt;a href="https://ggplot2.tidyverse.org/reference/geom_text.html" target="_blank" rel="noopener">&lt;code>geom_text()&lt;/code>&lt;/a> behaviour, the geom also gains a &lt;code>width&lt;/code> aesthetic that allows you to turn on automatic soft wrapping of the text. In addition to this it gains a &lt;code>style&lt;/code> aesthetic to finely control the style (more about styling below)&lt;/p>
&lt;h3 id="element_marquee">&lt;code>element_marquee()&lt;/code>
&lt;a href="#element_marquee">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>The second obvious use for marquee in ggplot2 is in formatting text elements.
&lt;a href="https://marquee.r-lib.org/reference/element_marquee.html" target="_blank" rel="noopener">&lt;code>element_marquee()&lt;/code>&lt;/a> is a replacement for
&lt;a href="https://ggplot2.tidyverse.org/reference/element.html" target="_blank" rel="noopener">&lt;code>element_text()&lt;/code>&lt;/a> that does just that.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mtcars&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span> &lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='nv'>mpg&lt;/span>, y &lt;span class='o'>=&lt;/span> &lt;span class='nv'>disp&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span> &lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>md_text&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span> &lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>plot.title &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://marquee.r-lib.org/reference/element_marquee.html'>element_marquee&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>size &lt;span class='o'>=&lt;/span> &lt;span class='m'>8&lt;/span>, width &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/unit.html'>unit&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>16&lt;/span>, &lt;span class='s'>"cm"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-5-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;h2 id="styling">Styling
&lt;a href="#styling">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>As alluded to above, marquee comes with a styling API that is reminiscent of CSS but completely its own. In some sense it takes the &amp;ldquo;simplicity over power&amp;rdquo; approach from markdown and applies it to styling.&lt;/p>
&lt;p>In marquee, each element type (e.g. a code block) has its own style. This style can be incomplete in which case it inherits the remaining specifications from the parent element in the document. As an example, the &lt;code>em&lt;/code> element has the following default style &lt;code>style(italic = TRUE)&lt;/code>, that is, take whatever style is currently in effect but also make the text italic.&lt;/p>
&lt;p>Apart from the direct inheritance of the marquee styling, it is also possible to use relative inheritance for numeric specifications (e.g. &lt;code>lineheight = relative(2)&lt;/code> to double the current lineheight) or set sizes based on the current or root element font size (using
&lt;a href="https://marquee.r-lib.org/reference/style_helpers.html" target="_blank" rel="noopener">&lt;code>em()&lt;/code>&lt;/a> and
&lt;a href="https://marquee.r-lib.org/reference/style_helpers.html" target="_blank" rel="noopener">&lt;code>rem()&lt;/code>&lt;/a> respectively). Lastly, you can also mark a specification as &amp;ldquo;non-inheritable&amp;rdquo; using
&lt;a href="https://marquee.r-lib.org/reference/style_helpers.html" target="_blank" rel="noopener">&lt;code>skip_inherit()&lt;/code>&lt;/a>. This essentially instructs any children to not inherit the value but instead inherit the value from the grand-parent element.&lt;/p>
&lt;h2 id="images">Images
&lt;a href="#images">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Markdown (famously) supports adding images through the &lt;code>![alt text](path/to/image)&lt;/code> syntax. Since marquee supports the full CommonMark spec, this is of course also supported. The only limitation is that the &amp;ldquo;alt text&amp;rdquo; is ignored since hovering tool-tips or screen-readers are not supported for the output types that marquee renders to.&lt;/p>
&lt;p>If an image is placed on a line together with surrounding text it will be rendered to fit the line height of the line. If it is placed by itself on its own line it will span the width available:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>logo&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/system.file.html'>system.file&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"help"&lt;/span>, &lt;span class='s'>"figures"&lt;/span>, &lt;span class='s'>"logo.png"&lt;/span>, package &lt;span class='o'>=&lt;/span> &lt;span class='s'>"marquee"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>header_img&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='s'>"thumbnail-wd.jpg"&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>md_img&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;/span>
&lt;span>&lt;span class='s'>"# About marquee ![](&amp;#123;logo&amp;#125;)&lt;/span>&lt;/span>
&lt;span>&lt;span class='s'>&lt;/span>&lt;/span>
&lt;span>&lt;span class='s'>Both PNG (above), JPEG (below), and SVG (not shown) are supported&lt;/span>&lt;/span>
&lt;span>&lt;span class='s'>&lt;/span>&lt;/span>
&lt;span>&lt;span class='s'>![](&amp;#123;header_img&amp;#125;)&lt;/span>&lt;/span>
&lt;span>&lt;span class='s'>&lt;/span>&lt;/span>
&lt;span>&lt;span class='s'>The above image is treated like a block element&lt;/span>&lt;/span>
&lt;span>&lt;span class='s'>"&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>md_img&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://marquee.r-lib.org/reference/marquee_glue.html'>marquee_glue&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>md_img&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nf'>grid&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/grid.draw.html'>grid.draw&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://marquee.r-lib.org/reference/marquee_grob.html'>marquee_grob&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>md_img&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-6-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>Apart from showing support for images we also introduce a new function above,
&lt;a href="https://marquee.r-lib.org/reference/marquee_glue.html" target="_blank" rel="noopener">&lt;code>marquee_glue()&lt;/code>&lt;/a>. It is a function that works very much like
&lt;a href="https://glue.tidyverse.org/reference/glue.html" target="_blank" rel="noopener">&lt;code>glue::glue()&lt;/code>&lt;/a> and performs text interpolation. However, this variant understands the custom span syntax of marquee so that these will not be treated as interpolation sites. Further, it turns off the &lt;code>#&lt;/code> interpretation as a comment character as this interferes with the markdown header syntax.&lt;/p>
&lt;p>All of the above is pretty standard markdown and since I prefixed this whole blog post with &amp;ldquo;full markdown support&amp;rdquo; it shouldn&amp;rsquo;t come as a big surprise. However, marquee has one last trick up its sleeve: R graphics interpolation. Quite simply, if you, instead of providing a path to a file, provide the name of an R variable holding a graphic object, this will be included as an image. Here&amp;rsquo;s how it works:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>plot&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mtcars&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span> &lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mpg&lt;/span>, &lt;span class='nv'>disp&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span> &lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mpg&lt;/span>, &lt;span class='nv'>disp&lt;/span>&lt;span class='o'>)&lt;/span>, &lt;span class='nv'>mtcars&lt;/span>&lt;span class='o'>[&lt;/span>&lt;span class='m'>1&lt;/span>,&lt;span class='o'>]&lt;/span>, colour &lt;span class='o'>=&lt;/span> &lt;span class='s'>"red"&lt;/span>, size &lt;span class='o'>=&lt;/span> &lt;span class='m'>3&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>point&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>grid&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/grid.points.html'>pointsGrob&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.5&lt;/span>, y &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.5&lt;/span>, pch &lt;span class='o'>=&lt;/span> &lt;span class='m'>19&lt;/span>, gp &lt;span class='o'>=&lt;/span> &lt;span class='nf'>grid&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/gpar.html'>gpar&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>col &lt;span class='o'>=&lt;/span> &lt;span class='s'>"red"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>md_plots&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;/span>
&lt;span>&lt;span class='s'>"# Plots&lt;/span>&lt;/span>
&lt;span>&lt;span class='s'>In the plot below, the red dot (![](point)) shows the Mazda RX4&lt;/span>&lt;/span>
&lt;span>&lt;span class='s'>&lt;/span>&lt;/span>
&lt;span>&lt;span class='s'>![](plot)&lt;/span>&lt;/span>
&lt;span>&lt;span class='s'>"&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nf'>grid&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/grid.draw.html'>grid.draw&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://marquee.r-lib.org/reference/marquee_grob.html'>marquee_grob&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>md_plots&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-7-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>This also means that your ggplots can contain additional ggplots (or other graphics) anywhere you are allowed to place text (using
&lt;a href="https://marquee.r-lib.org/reference/geom_marquee.html" target="_blank" rel="noopener">&lt;code>geom_marquee()&lt;/code>&lt;/a> and
&lt;a href="https://marquee.r-lib.org/reference/element_marquee.html" target="_blank" rel="noopener">&lt;code>element_marquee()&lt;/code>&lt;/a>) - for better or worse&amp;hellip;&lt;/p>
&lt;p>&lt;img src="figs/they_didnt_stop.gif" style="display:block;margin:auto;" />&lt;/p>
&lt;h2 id="limitations">Limitations
&lt;a href="#limitations">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Marquee&amp;rsquo;s biggest limitation is its reliance on very new features in the graphics engine. The rendering will &lt;em>not&lt;/em> work on anything before R 4.3, but even then it requires the graphics device to support a range of new features, most importantly the new glyph specification introduced in R 4.3. While several graphics devices do support the required features, most notably those powered by Cairo as well as all devices in ragg, many do not. The default Windows graphics device continues to lag behind and the default on macOS, while supporting glyphs, can crash in some situations bringing the whole R session down with it (this is still being investigated). So we are in no doubt threading the frontier here. All of this is set to resolve itself (maybe except for the default Windows device) as time passes.&lt;/p>
&lt;p>A limitation of great interest to me is the lack of support in svglite. svglite is build on a core idea of post-editability and thus wants all its text to be selectable and editable when opened in a capable program such as Adobe Illustrator. However, the graphics engine API that powers the new capabilities does not really allow this and I&amp;rsquo;m still figuring out how to reconcile it. It will eventually be solved though.&lt;/p>
&lt;p>Lastly, while not really part of HTML syntax directly, many people rely on HTML inside markdown documents to solve layout and styling tasks that markdown doesn&amp;rsquo;t support. The way it works is that markdown passes the HTML through unmodified and then the HTML is parsed by the HTML renderer (often the browser) used to display the rendered markdown document. This makes it seem like understanding HTML is part of markdown, while it&amp;rsquo;s really not. The reason I&amp;rsquo;m going through all this explanation is to say that marquee has no understanding of HTML and will not render it as expected. While some HTML tags and CSS settings have clear counterparts in markdown and the marquee styling system it is much better to have a clear &amp;ldquo;no-support&amp;rdquo; over an arbitrary limited support.
&lt;a href="https://marquee.r-lib.org/reference/marquee_grob.html" target="_blank" rel="noopener">&lt;code>marquee_grob()&lt;/code>&lt;/a>/
&lt;a href="https://marquee.r-lib.org/reference/marquee_parse.html" target="_blank" rel="noopener">&lt;code>marquee_parse()&lt;/code>&lt;/a> have an argument (&lt;code>ignore_html&lt;/code>) that controls whether HTML are outright removed from the output (default), or if it is included verbatim.&lt;/p>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Marquee is the latest in a stream of advancements when it comes to text rendering and font support in R. It builds on top of my work with
&lt;a href="https://systemfonts.r-lib.org/index.html" target="_blank" rel="noopener">systemfonts&lt;/a>,
&lt;a href="https://github.com/r-lib/textshaping" target="_blank" rel="noopener">textshaping&lt;/a>, and
&lt;a href="https://ragg.r-lib.org/index.html" target="_blank" rel="noopener">ragg&lt;/a>, but also pays great debt to Paul Murrell&amp;rsquo;s work on adding a new, more low level API for text rendering to grid and the graphics engine. Lastly, Claus Wilke&amp;rsquo;s work on
&lt;a href="https://wilkelab.org/gridtext/" target="_blank" rel="noopener">gridtext&lt;/a> and
&lt;a href="https://wilkelab.org/ggtext/" target="_blank" rel="noopener">ggtext&lt;/a> showed the power and need for rich text support in R and filled a gap until the technical foundation for marquee was built out.&lt;/p></description></item><item><title>ggplot2 3.5.0: Introducing: coord_radial()</title><link>https://www.tidyverse.org/blog/2024/03/ggplot2-3-5-0-coord-radial/</link><pubDate>Fri, 01 Mar 2024 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2024/03/ggplot2-3-5-0-coord-radial/</guid><description>&lt;!--
TODO:
* [x] Look over / edit the post's title in the yaml
* [x] Edit (or delete) the description; note this appears in the Twitter card
* [x] Pick category and tags (see existing with [`hugodown::tidy_show_meta()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html))
* [x] Find photo &amp; update yaml metadata
* [x] Create `thumbnail-sq.jpg`; height and width should be equal
* [x] Create `thumbnail-wd.jpg`; width should be >5x height
* [x] [`hugodown::use_tidy_thumbnails()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html)
* [ ] Add intro sentence, e.g. the standard tagline for the package
* [ ] [`usethis::use_tidy_thanks()`](https://usethis.r-lib.org/reference/use_tidy_thanks.html)
-->
&lt;p>We are happy to announce the release of
&lt;a href="https://ggplot2.tidyverse.org" target="_blank" rel="noopener">ggplot2&lt;/a> 3.5.0. This is one blogpost among several outlining a new polar coordinate system. Please find the
&lt;a href="https://www.tidyverse.org/blog/2024/02/ggplot2-3-5-0/">main release post&lt;/a> to read about other exciting changes.&lt;/p>
&lt;p>Polar coordinates are a good reminder of the flexibility of the Grammar of Graphics: pie charts are just bar charts with polar coordinates. While the tried and tested
&lt;a href="https://ggplot2.tidyverse.org/reference/coord_polar.html" target="_blank" rel="noopener">&lt;code>coord_polar()&lt;/code>&lt;/a> has served well in the past to fulfill your pie chart needs, we felt it was due some modernisation. We realised we could not adapt
&lt;a href="https://ggplot2.tidyverse.org/reference/coord_polar.html" target="_blank" rel="noopener">&lt;code>coord_polar()&lt;/code>&lt;/a> to fit with the
&lt;a href="https://www.tidyverse.org/blog/2024/02/ggplot2-3-5-0/#guide-rewrite">new guide system&lt;/a> without severely breaking existing plots, so
&lt;a href="https://ggplot2.tidyverse.org/reference/coord_polar.html" target="_blank" rel="noopener">&lt;code>coord_radial()&lt;/code>&lt;/a> was born to give a facelift to the polar coordinate system in ggplot2.&lt;/p>
&lt;p>Relative to
&lt;a href="https://ggplot2.tidyverse.org/reference/coord_polar.html" target="_blank" rel="noopener">&lt;code>coord_polar()&lt;/code>&lt;/a>,
&lt;a href="https://ggplot2.tidyverse.org/reference/coord_polar.html" target="_blank" rel="noopener">&lt;code>coord_radial()&lt;/code>&lt;/a> can:&lt;/p>
&lt;ol>
&lt;li>Draw circle sectors instead of only full circles.&lt;/li>
&lt;li>Avoid data vanishing in the centre of the plot.&lt;/li>
&lt;li>Adjust text angles on the fly.&lt;/li>
&lt;li>Use the new guide system.&lt;/li>
&lt;/ol>
&lt;h2 id="an-updated-look">An updated look
&lt;a href="#an-updated-look">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>The first noticeable contrast with
&lt;a href="https://ggplot2.tidyverse.org/reference/coord_polar.html" target="_blank" rel="noopener">&lt;code>coord_polar()&lt;/code>&lt;/a> is that
&lt;a href="https://ggplot2.tidyverse.org/reference/coord_polar.html" target="_blank" rel="noopener">&lt;code>coord_radial()&lt;/code>&lt;/a> is not particularly suited to building pie charts. Instead, it uses the scale expansion conventions like
&lt;a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html" target="_blank" rel="noopener">&lt;code>coord_cartesian()&lt;/code>&lt;/a>. This makes sense for most chart types, but not pie charts. Nonetheless, you can use the &lt;code>expand = FALSE&lt;/code> setting to use
&lt;a href="https://ggplot2.tidyverse.org/reference/coord_polar.html" target="_blank" rel="noopener">&lt;code>coord_radial()&lt;/code>&lt;/a> for pie charts.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://ggplot2.tidyverse.org'>ggplot2&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://patchwork.data-imaginist.com'>patchwork&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://scales.r-lib.org'>scales&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>pie&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mtcars&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>y &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/factor.html'>factor&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>1&lt;/span>&lt;span class='o'>)&lt;/span>, fill &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/factor.html'>factor&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>cyl&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_bar.html'>geom_bar&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>width &lt;span class='o'>=&lt;/span> &lt;span class='m'>1&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/scale_discrete.html'>scale_y_discrete&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>guide &lt;span class='o'>=&lt;/span> &lt;span class='s'>"none"&lt;/span>, name &lt;span class='o'>=&lt;/span> &lt;span class='kc'>NULL&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/guides.html'>guides&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>fill &lt;span class='o'>=&lt;/span> &lt;span class='s'>"none"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>default&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nv'>pie&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/coord_polar.html'>coord_radial&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"default"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>no_expand&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nv'>pie&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/coord_polar.html'>coord_radial&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>expand &lt;span class='o'>=&lt;/span> &lt;span class='kc'>FALSE&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"expand = FALSE"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>polar&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nv'>pie&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/coord_polar.html'>coord_polar&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"coord_polar()"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>default&lt;/span> &lt;span class='o'>|&lt;/span> &lt;span class='nv'>no_expand&lt;/span> &lt;span class='o'>|&lt;/span> &lt;span class='nv'>polar&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/compare_polar-1.png" alt="Three pie charts showing the proportion of each cylinder number. The first has a gap in the middle and at the top with a grey circle in the background and is titled 'default'. The second is titled 'expand = FALSE' and shows a full pie chart with tick marks labelling the angle positions. The last plot is a full pie chart with a gray rectangular background without tick marks and a white line around the pie." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>Some visual differences stand out in the plots above. In
&lt;a href="https://ggplot2.tidyverse.org/reference/coord_polar.html" target="_blank" rel="noopener">&lt;code>coord_radial()&lt;/code>&lt;/a>, the panel background covers the data area of the plot, not a rectangle. It also does not have a grid-line encircling the plot and instead uses tick marks to indicate values along the theta (angle) coordinate. You may also notice that
&lt;a href="https://ggplot2.tidyverse.org/reference/coord_polar.html" target="_blank" rel="noopener">&lt;code>coord_polar()&lt;/code>&lt;/a> still draws the radius axis, despite instructions to use &lt;code>guide = &amp;quot;none&amp;quot;&lt;/code>. That is the integration with the guide system that birthed
&lt;a href="https://ggplot2.tidyverse.org/reference/coord_polar.html" target="_blank" rel="noopener">&lt;code>coord_radial()&lt;/code>&lt;/a>.&lt;/p>
&lt;h2 id="partial-polar-plots">Partial polar plots
&lt;a href="#partial-polar-plots">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Another important difference is that
&lt;a href="https://ggplot2.tidyverse.org/reference/coord_polar.html" target="_blank" rel="noopener">&lt;code>coord_radial()&lt;/code>&lt;/a> does not necessarily need to display a full circle. By setting the &lt;code>start&lt;/code> and &lt;code>end&lt;/code> arguments separately, you can now make a partial polar plot. This makes it much easier to make semi- or quarter-circle plots.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>p&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mpg&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>displ&lt;/span>, &lt;span class='nv'>hwy&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>half&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nv'>p&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/coord_polar.html'>coord_radial&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>start &lt;span class='o'>=&lt;/span> &lt;span class='o'>-&lt;/span>&lt;span class='m'>0.5&lt;/span> &lt;span class='o'>*&lt;/span> &lt;span class='nv'>pi&lt;/span>, end &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.5&lt;/span> &lt;span class='o'>*&lt;/span> &lt;span class='nv'>pi&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"−0.5π to +0.5π"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>quarter&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nv'>p&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/coord_polar.html'>coord_radial&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>start &lt;span class='o'>=&lt;/span> &lt;span class='m'>0&lt;/span>, end &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.5&lt;/span> &lt;span class='o'>*&lt;/span> &lt;span class='nv'>pi&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"0 to +0.5π"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>half&lt;/span> &lt;span class='o'>|&lt;/span> &lt;span class='nv'>quarter&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/partial_polar-1.png" alt="Two polar scatterplots of the 'mpg' dataset. The left plot is shaped like as a semicircle and the right plot as a quarter circle." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;h2 id="donuts">Donuts
&lt;a href="#donuts">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>It was already possible to turn a pie-chart into a donut-chart with
&lt;a href="https://ggplot2.tidyverse.org/reference/coord_polar.html" target="_blank" rel="noopener">&lt;code>coord_polar()&lt;/code>&lt;/a>. This is made even easier in
&lt;a href="https://ggplot2.tidyverse.org/reference/coord_polar.html" target="_blank" rel="noopener">&lt;code>coord_radial()&lt;/code>&lt;/a> by setting the &lt;code>inner.radius&lt;/code> argument to make a donut hole. For most plots, this avoids crowding data points in the center of the plot: points with a widely different &lt;code>theta&lt;/code> coordinate but similarly small &lt;code>r&lt;/code> coordinate are placed further apart.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>p&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/coord_polar.html'>coord_radial&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>inner.radius &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.3&lt;/span>, r_axis_inside &lt;span class='o'>=&lt;/span> &lt;span class='kc'>TRUE&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/open_radial_plot-1.png" alt="A donut-shaped scatterplot of the 'mpg' dataset." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;h2 id="text-annotations">Text annotations
&lt;a href="#text-annotations">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>A common grievance with about polar coordinates is that it was cumbersome to rotate text annotations along with the &lt;code>theta&lt;/code> coordinate. Calculating the correct angles for labels is pretty involved and usually changes from plot to plot depending on how many items need to be displayed. To remove some of this hassle
&lt;a href="https://ggplot2.tidyverse.org/reference/coord_polar.html" target="_blank" rel="noopener">&lt;code>coord_radial()&lt;/code>&lt;/a> has a &lt;code>rotate_angle&lt;/code> switch, that will line up the text&amp;rsquo;s &lt;code>angle&lt;/code> aesthetic with the theta coordinate. For text angles of 0 degrees, this will place text in a tangent orientation to the circle and for angles of 90 degrees, this places text along the radius, as in the plot below.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mtcars&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/seq.html'>seq_along&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mpg&lt;/span>&lt;span class='o'>)&lt;/span>, &lt;span class='nv'>mpg&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_bar.html'>geom_col&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>width &lt;span class='o'>=&lt;/span> &lt;span class='m'>1&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_text.html'>geom_text&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>y &lt;span class='o'>=&lt;/span> &lt;span class='m'>32&lt;/span>, label &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/colnames.html'>rownames&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mtcars&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> angle &lt;span class='o'>=&lt;/span> &lt;span class='m'>90&lt;/span>, hjust &lt;span class='o'>=&lt;/span> &lt;span class='m'>1&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/coord_polar.html'>coord_radial&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>rotate_angle &lt;span class='o'>=&lt;/span> &lt;span class='kc'>TRUE&lt;/span>, expand &lt;span class='o'>=&lt;/span> &lt;span class='kc'>FALSE&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/text_angles-1.png" alt="A wind rose plot showing miles per gallon for different cars. The car names skirt the outer edge of the plot and are oriented towards the centre." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;h2 id="axes">Axes
&lt;a href="#axes">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Because the logic of drawing axes for polar coordinates is not the same as when axes are perfectly vertical or horizontal, we used the new guide system to build an axis specific to
&lt;a href="https://ggplot2.tidyverse.org/reference/coord_polar.html" target="_blank" rel="noopener">&lt;code>coord_radial()&lt;/code>&lt;/a>: the
&lt;a href="https://ggplot2.tidyverse.org/reference/guide_axis_theta.html" target="_blank" rel="noopener">&lt;code>guide_axis_theta()&lt;/code>&lt;/a> axis. Guides for
&lt;a href="https://ggplot2.tidyverse.org/reference/coord_polar.html" target="_blank" rel="noopener">&lt;code>coord_radial()&lt;/code>&lt;/a> can be set using &lt;code>theta&lt;/code> and &lt;code>r&lt;/code> name in the
&lt;a href="https://ggplot2.tidyverse.org/reference/guides.html" target="_blank" rel="noopener">&lt;code>guides()&lt;/code>&lt;/a> function. While the &lt;code>r&lt;/code> axis can be the regular
&lt;a href="https://ggplot2.tidyverse.org/reference/guide_axis.html" target="_blank" rel="noopener">&lt;code>guide_axis()&lt;/code>&lt;/a>, the &lt;code>theta&lt;/code> axis uses the highly specialised
&lt;a href="https://ggplot2.tidyverse.org/reference/guide_axis_theta.html" target="_blank" rel="noopener">&lt;code>guide_axis_theta()&lt;/code>&lt;/a>. The theta axis shares many features with typical axes, like setting the text angle or the new &lt;code>minor.ticks&lt;/code> and &lt;code>cap&lt;/code> settings. More on these settings in the
&lt;a href="https://www.tidyverse.org/blog/2024/02/ggplot2-3-5-0-axes/">axis blog&lt;/a>. As seen in previous plots, the default is to place text horizontally. One neat trick we&amp;rsquo;ve put into
&lt;a href="https://ggplot2.tidyverse.org/reference/coord_polar.html" target="_blank" rel="noopener">&lt;code>coord_radial()&lt;/code>&lt;/a> is that we can set a &lt;em>relative&lt;/em> text angle in the guides, such as in the plot below.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mpg&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>class&lt;/span>, &lt;span class='nv'>displ&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_boxplot.html'>geom_boxplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/coord_polar.html'>coord_radial&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>start &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.25&lt;/span> &lt;span class='o'>*&lt;/span> &lt;span class='nv'>pi&lt;/span>, end &lt;span class='o'>=&lt;/span> &lt;span class='m'>1.75&lt;/span> &lt;span class='o'>*&lt;/span> &lt;span class='nv'>pi&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/guides.html'>guides&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> theta &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/guide_axis_theta.html'>guide_axis_theta&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>angle &lt;span class='o'>=&lt;/span> &lt;span class='m'>0&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> r &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/guide_axis.html'>guide_axis&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>angle &lt;span class='o'>=&lt;/span> &lt;span class='m'>0&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/axis_angles-1.png" alt="Boxplot of the 'mpg' dataset displayed in partial polar coordinates. The theta labels are placed tangential to the circle. The radius labels line up with the tick mark direction." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>The theme elements to style these axes have the &lt;code>theta&lt;/code> or &lt;code>r&lt;/code> position indication, so to change the the axis line, you use the &lt;code>axis.line.theta&lt;/code> and &lt;code>axis.line.r&lt;/code> arguments. The theme settings can also be used to set the &lt;em>absolute&lt;/em> angle of text.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mpg&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>class&lt;/span>, &lt;span class='nv'>displ&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_boxplot.html'>geom_boxplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/coord_polar.html'>coord_radial&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>start &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.25&lt;/span> &lt;span class='o'>*&lt;/span> &lt;span class='nv'>pi&lt;/span>, end &lt;span class='o'>=&lt;/span> &lt;span class='m'>1.75&lt;/span> &lt;span class='o'>*&lt;/span> &lt;span class='nv'>pi&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> axis.line.theta &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>element_line&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>colour &lt;span class='o'>=&lt;/span> &lt;span class='s'>"red"&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> axis.text.theta &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>angle &lt;span class='o'>=&lt;/span> &lt;span class='m'>90&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> axis.text.r &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>colour &lt;span class='o'>=&lt;/span> &lt;span class='s'>"blue"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/axis_styling-1.png" alt="Boxplot of the 'mpg' dataset displayed in partial polar coordinates. The theta labels are placed vertically and a red line traces the outer circle. The radius labels are displayed in blue." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>Lastly, there can also be secondary axes. We anticipate that this is practically never needed, as grid lines follow the primary axes and without them, it is very hard to read from axes in polar coordinates. However, if there is some reason for using secondary axes on polar coordinates, you can use the &lt;code>theta.sec&lt;/code> and &lt;code>r.sec&lt;/code> names in the
&lt;a href="https://ggplot2.tidyverse.org/reference/guides.html" target="_blank" rel="noopener">&lt;code>guides()&lt;/code>&lt;/a> function to control the guides. Please note that a secondary theta axis is entirely useless when &lt;code>inner.radius = 0&lt;/code> (the default). There are no separate theme options for secondary r/theta axes, but to style them separately from the primary axes, you can use the &lt;code>theme&lt;/code> argument in the guide instead.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>pressure&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>temperature&lt;/span>, &lt;span class='nv'>pressure&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_path.html'>geom_line&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>colour &lt;span class='o'>=&lt;/span> &lt;span class='s'>"blue"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/scale_continuous.html'>scale_x_continuous&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> labels &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://scales.r-lib.org/reference/label_number.html'>label_number&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>suffix &lt;span class='o'>=&lt;/span> &lt;span class='s'>"°C"&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> sec.axis &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/sec_axis.html'>sec_axis&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>~&lt;/span> &lt;span class='nv'>.x&lt;/span> &lt;span class='o'>*&lt;/span> &lt;span class='m'>9&lt;/span>&lt;span class='o'>/&lt;/span>&lt;span class='m'>5&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='m'>35&lt;/span>, labels &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://scales.r-lib.org/reference/label_number.html'>label_number&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>suffix &lt;span class='o'>=&lt;/span> &lt;span class='s'>"°F"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/scale_continuous.html'>scale_y_continuous&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> labels &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://scales.r-lib.org/reference/label_number.html'>label_number&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>suffix &lt;span class='o'>=&lt;/span> &lt;span class='s'>" mmHg"&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> sec.axis &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/sec_axis.html'>sec_axis&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>~&lt;/span> &lt;span class='nv'>.x&lt;/span> &lt;span class='o'>*&lt;/span> &lt;span class='m'>0.133322&lt;/span>, labels &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://scales.r-lib.org/reference/label_number.html'>label_number&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>suffix &lt;span class='o'>=&lt;/span> &lt;span class='s'>" kPa"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/guides.html'>guides&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> theta.sec &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/guide_axis_theta.html'>guide_axis_theta&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>theme &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>axis.line.theta &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>element_line&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> r.sec &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/guide_axis.html'>guide_axis&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>theme &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>axis.text.r &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>colour &lt;span class='o'>=&lt;/span> &lt;span class='s'>"red"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/coord_polar.html'>coord_radial&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> start &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.25&lt;/span> &lt;span class='o'>*&lt;/span> &lt;span class='nv'>pi&lt;/span>, end &lt;span class='o'>=&lt;/span> &lt;span class='m'>1.75&lt;/span> &lt;span class='o'>*&lt;/span> &lt;span class='nv'>pi&lt;/span>,&lt;/span>
&lt;span> inner.radius &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.3&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/secondary_axes-1.png" alt="A lineplot of the 'pressure' dataset in partial polar coordinates that is shaped like a donut with a bite taken out on top. The primary, outer theta axis displays temperature in degrees Celcius. The secondary, inner theta axis displays temperature in degrees Fahrenheit and has an axis line. The primary radius axis on the right displays pressure in millimetres of mercury. The secondary radius axis on the left displays pressure in kilo-Pascals in red text." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div></description></item><item><title>ggplot2 3.5.0: Axes</title><link>https://www.tidyverse.org/blog/2024/02/ggplot2-3-5-0-axes/</link><pubDate>Wed, 28 Feb 2024 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2024/02/ggplot2-3-5-0-axes/</guid><description>&lt;!--
TODO:
* [x] Look over / edit the post's title in the yaml
* [x] Edit (or delete) the description; note this appears in the Twitter card
* [x] Pick category and tags (see existing with [`hugodown::tidy_show_meta()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html))
* [x] Find photo &amp; update yaml metadata
* [x] Create `thumbnail-sq.jpg`; height and width should be equal
* [x] Create `thumbnail-wd.jpg`; width should be >5x height
* [x] [`hugodown::use_tidy_thumbnails()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html)
* [ ] Add intro sentence, e.g. the standard tagline for the package
* [ ] [`usethis::use_tidy_thanks()`](https://usethis.r-lib.org/reference/use_tidy_thanks.html)
-->
&lt;p>We are pleased to release
&lt;a href="https://ggplot2.tidyverse.org" target="_blank" rel="noopener">ggplot2&lt;/a> 3.5.0. This release is a large one, so we have split the updates into multiple posts. This posts outlines changes to axes; see the
&lt;a href="https://www.tidyverse.org/blog/2024/02/ggplot2-3-5-0/">main release post&lt;/a> to learn about other changes.&lt;/p>
&lt;p>Axes, alongside
&lt;a href="https://www.tidyverse.org/blog/2024/02/ggplot2-3-5-0-legends/">legends&lt;/a>, are visual representations of scales and allow observers to read values off of a plot. The innards of axes, like other guides, underwent a major overhaul with the guide system rewrite. Axes specifically are guides for positions and classically display labelled tick marks. In Cartesian coordinates, these are the x- and y-positions, but in non-Cartesian systems may reflect a theta, radius, longitude or latitude. In ggplot2, an axis is usually represented by the
&lt;a href="https://ggplot2.tidyverse.org/reference/guide_axis.html" target="_blank" rel="noopener">&lt;code>guide_axis()&lt;/code>&lt;/a> function. We outline the following changes to axes:&lt;/p>
&lt;ul>
&lt;li>
&lt;a href="#minor-ticks">Minor ticks&lt;/a>&lt;/li>
&lt;li>
&lt;a href="#capping">Capping the axis line&lt;/a>&lt;/li>
&lt;li>
&lt;a href="#logarithmic-axes">Logartihmic axes&lt;/a>&lt;/li>
&lt;li>
&lt;a href="#stacked-axes">Stacking axes&lt;/a>&lt;/li>
&lt;li>
&lt;a href="#display-in-facets">Display in facets&lt;/a>&lt;/li>
&lt;/ul>
&lt;div class="highlight">
&lt;/div>
&lt;h2 id="minor-ticks">Minor ticks
&lt;a href="#minor-ticks">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>A much requested expansion of axis capabilities is the ability to draw minor ticks. To draw minor ticks, you can use the &lt;code>minor.ticks&lt;/code> argument of
&lt;a href="https://ggplot2.tidyverse.org/reference/guide_axis.html" target="_blank" rel="noopener">&lt;code>guide_axis()&lt;/code>&lt;/a>.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://ggplot2.tidyverse.org'>ggplot2&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>p&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mpg&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>displ&lt;/span>, &lt;span class='nv'>hwy&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/guides.html'>guides&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> x &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/guide_axis.html'>guide_axis&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>minor.ticks &lt;span class='o'>=&lt;/span> &lt;span class='kc'>TRUE&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> y &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/guide_axis.html'>guide_axis&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>minor.ticks &lt;span class='o'>=&lt;/span> &lt;span class='kc'>TRUE&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>p&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/minor_ticks-1.png" alt="Scatterplot of engine displacement versus highway miles per gallon. Both the x and y axes have smaller ticks in between normal ticks." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>The minor ticks are unlabelled ticks and follow the &lt;code>minor_breaks&lt;/code> provided to the scale. Their length is determined by the &lt;code>axis.minor.ticks.length&lt;/code> and their positional children. The rest of their appearance is inherited from the major ticks, as can be seen in the plot below where the minor ticks on the y-axis are also blue. To tweak their style separately from the major ticks, the &lt;code>axis.minor.ticks.{x.bottom/x.top/y.left/y.right}&lt;/code> setting can be used. Please note that there is &lt;em>no&lt;/em> &lt;code>axis.minor.ticks&lt;/code> setting without the position suffixes, as they inherit from the major ticks.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>p&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/scale_continuous.html'>scale_x_continuous&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>minor_breaks &lt;span class='o'>=&lt;/span> &lt;span class='nf'>scales&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://scales.r-lib.org/reference/breaks_width.html'>breaks_width&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0.2&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> axis.ticks.length &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/unit.html'>unit&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>5&lt;/span>, &lt;span class='s'>"pt"&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> axis.minor.ticks.length &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>rel&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0.5&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> axis.minor.ticks.x.bottom &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>element_line&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>colour &lt;span class='o'>=&lt;/span> &lt;span class='s'>'red'&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> axis.ticks.y &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>element_line&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>colour &lt;span class='o'>=&lt;/span> &lt;span class='s'>"blue"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/minor_ticks_theming-1.png" alt="Scatterplot of engine displacement versus highway miles per gallon. The y-axis has blue larger and smaller tick marks, whereas the x-axis has the larger ticks in black and the smaller ticks in red. The x-axis has 4 smaller ticks in between large ones and the smaller ticks are half the size of larger ticks." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;h2 id="capping">Capping
&lt;a href="#capping">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Axes can now also be &amp;lsquo;capped&amp;rsquo; at the upper and lower end. We hesitate to call this improvement &amp;lsquo;new&amp;rsquo;, as it has been a part of base R plotting since time immemorial. When axes are capped, the axis line will not be drawn up to the panel edge, but up to the first and last breaks. Unsurprisingly, this only affects plots where the axis line is not blank.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mpg&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>displ&lt;/span>, &lt;span class='nv'>hwy&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/guides.html'>guides&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> x &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/guide_axis.html'>guide_axis&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>cap &lt;span class='o'>=&lt;/span> &lt;span class='s'>"both"&lt;/span>&lt;span class='o'>)&lt;/span>, &lt;span class='c'># Cap both ends&lt;/span>&lt;/span>
&lt;span> y &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/guide_axis.html'>guide_axis&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>cap &lt;span class='o'>=&lt;/span> &lt;span class='s'>"upper"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='c'># Cap the upper end&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>axis.line &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>element_line&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/capped_axes-1.png" alt="Scatterplot of engine displacement versus highway miles per gallon. The y-axis line starts at the bottom of the panel and continues to the top break. The x-axis line starts at the most left break and ends at the most right break." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;h2 id="logarithmic-axes">Logarithmic axes
&lt;a href="#logarithmic-axes">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>A new axis for displaying logarithmic (and related) scales has been added:
&lt;a href="https://ggplot2.tidyverse.org/reference/guide_axis_logticks.html" target="_blank" rel="noopener">&lt;code>guide_axis_logticks()&lt;/code>&lt;/a>. This axis draws three types of tick marks at log10-spaced positions. The ticks positions are placed in the original, untransformed data-space, so the axis plays well with scale- and coord-transformations. To accommodate a series of logarithmic-like transformations, such as
&lt;a href="https://scales.r-lib.org/reference/transform_log.html" target="_blank" rel="noopener">&lt;code>scales::transform_pseudo_log()&lt;/code>&lt;/a> or
&lt;a href="https://scales.r-lib.org/reference/transform_asinh.html" target="_blank" rel="noopener">&lt;code>scales::transform_asinh()&lt;/code>&lt;/a>, scales that include 0 in their limits have the ticks mirrored around 0.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>r&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/seq.html'>seq&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0.001&lt;/span>, &lt;span class='m'>0.999&lt;/span>, length.out &lt;span class='o'>=&lt;/span> &lt;span class='m'>100&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>df&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/data.frame.html'>data.frame&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> x &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/stats/Cauchy.html'>qcauchy&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>r&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> y &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/stats/Lognormal.html'>qlnorm&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>r&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>p&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>df&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>x&lt;/span>, &lt;span class='nv'>y&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_path.html'>geom_line&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/coord_trans.html'>coord_trans&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>y &lt;span class='o'>=&lt;/span> &lt;span class='s'>"reverse"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/scale_continuous.html'>scale_y_continuous&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> transform &lt;span class='o'>=&lt;/span> &lt;span class='s'>"log10"&lt;/span>,&lt;/span>
&lt;span> breaks &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0.1&lt;/span>, &lt;span class='m'>1&lt;/span>, &lt;span class='m'>10&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> guide &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/guide_axis_logticks.html'>guide_axis_logticks&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>long &lt;span class='o'>=&lt;/span> &lt;span class='m'>2&lt;/span>, mid &lt;span class='o'>=&lt;/span> &lt;span class='m'>1&lt;/span>, short &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.5&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/scale_continuous.html'>scale_x_continuous&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> transform &lt;span class='o'>=&lt;/span> &lt;span class='s'>"asinh"&lt;/span>,&lt;/span>
&lt;span> breaks &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>-&lt;/span>&lt;span class='m'>100&lt;/span>, &lt;span class='o'>-&lt;/span>&lt;span class='m'>10&lt;/span>, &lt;span class='o'>-&lt;/span>&lt;span class='m'>1&lt;/span>, &lt;span class='m'>0&lt;/span>, &lt;span class='m'>1&lt;/span>, &lt;span class='m'>10&lt;/span>, &lt;span class='m'>100&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> guide &lt;span class='o'>=&lt;/span> &lt;span class='s'>"axis_logticks"&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>p&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/log_axes-1.png" alt="A line plot showing a negatively sloped line with a reversed log10-transformation on the y-axis and inverse hyberbolic sine transformation on the x-axis. Large ticks appears at multiples of 10, medium ticks at multiples of 5 and small ticks at multiples of 1." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>The log-ticks axis supersedes the earlier
&lt;a href="https://ggplot2.tidyverse.org/reference/annotation_logticks.html" target="_blank" rel="noopener">&lt;code>annotation_logticks()&lt;/code>&lt;/a> function. Because it is implemented as an axis, it has minimal fuss with the placement of labels and is immune to the clipping options in the coord. To mirror
&lt;a href="https://ggplot2.tidyverse.org/reference/annotation_logticks.html" target="_blank" rel="noopener">&lt;code>annotation_logticks()&lt;/code>&lt;/a> more closely, you can set a negative tick length in the theme.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>p&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>axis.ticks.length &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/unit.html'>unit&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>-&lt;/span>&lt;span class='m'>2.25&lt;/span>, &lt;span class='s'>"pt"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/log_ticks_inward-1.png" alt="The same plot as above, but the tick marks now point inwards." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;h2 id="stacked-axes">Stacked axes
&lt;a href="#stacked-axes">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>The last new axis is technically not an axis, but a way to combine axes.
&lt;a href="https://ggplot2.tidyverse.org/reference/guide_axis_stack.html" target="_blank" rel="noopener">&lt;code>guide_axis_stack()&lt;/code>&lt;/a> can take multiple other axes and combine them by placing them next to one another. On its own, the usefulness of stacking axes is pretty limited. However, when extensions start defining custom position guides, it is an easy way to mix-and-match axes from different extensions. The first axis is placed next to the panel and subsequent axes are placed further away from the panel. Axes, like legends, have acquired a &lt;code>theme&lt;/code> argument that can be used to customise the display of individual axes. Currently, there is not a compelling case to use
&lt;a href="https://ggplot2.tidyverse.org/reference/guide_axis_stack.html" target="_blank" rel="noopener">&lt;code>guide_axis_stack()&lt;/code>&lt;/a>, but it is an important building block for when axis extensions arrive.&lt;/p>
&lt;h2 id="display-in-facets">Display in facets
&lt;a href="#display-in-facets">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>More of an indirect improvement to axes, is the ability of facets to tweak the appearance of inner axes when scales are fixed. This facilitates requirements in some journals that every panel should have labelled axes.
&lt;a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" target="_blank" rel="noopener">&lt;code>facet_wrap()&lt;/code>&lt;/a> and
&lt;a href="https://ggplot2.tidyverse.org/reference/facet_grid.html" target="_blank" rel="noopener">&lt;code>facet_grid()&lt;/code>&lt;/a> would previously only display axes in between panels when &lt;code>scales = &amp;quot;free&amp;quot;&lt;/code> was set. This is still the case, but there are more options available for
&lt;a href="https://ggplot2.tidyverse.org/reference/facet_grid.html" target="_blank" rel="noopener">&lt;code>facet_grid()&lt;/code>&lt;/a> and fixed scales. Using the &lt;code>axes = &amp;quot;all&amp;quot;&lt;/code> option, all axes are displayed, including those in between panels. When using &lt;code>axes = &amp;quot;all_x&amp;quot;&lt;/code> or &lt;code>axes = &amp;quot;all_y&amp;quot;&lt;/code>, you can narrow down which axes are displayed.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>p&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mpg&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>displ&lt;/span>, &lt;span class='nv'>hwy&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>p&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/facet_grid.html'>facet_grid&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>year&lt;/span> &lt;span class='o'>~&lt;/span> &lt;span class='nv'>drv&lt;/span>, axes &lt;span class='o'>=&lt;/span> &lt;span class='s'>"all_y"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/facet_axes_display-1.png" alt="A scatterplot facetted by the 'drv' and 'year' variables. The x-axes appear only at the bottom panels, whereas y-axes are displayed for every panel." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>In addition, you can choose to selectively suppress labels and only show ticks marks by using the &lt;code>axis.labels&lt;/code> argument.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>p&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/facet_grid.html'>facet_grid&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>year&lt;/span> &lt;span class='o'>~&lt;/span> &lt;span class='nv'>drv&lt;/span>, axes &lt;span class='o'>=&lt;/span> &lt;span class='s'>"all"&lt;/span>, axis.labels &lt;span class='o'>=&lt;/span> &lt;span class='s'>"all_y"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/facet_axes_label_display-1.png" alt="A scatterplot facetted by the 'drv' and 'year' variables. The x-axes appear in full only at the bottom panels, and as tick marks in the first row of panels. The y-axes are displayed in full at every panel." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>That wraps up the visible changes to axes for this post. To read about general changes, see the
&lt;a href="https://www.tidyverse.org/blog/2024/02/ggplot2-3-5-0/">main post&lt;/a>. The changes to legends are covered in a
&lt;a href="https://www.tidyverse.org/blog/2024/02/ggplot2-3-5-0-legends/">separate post&lt;/a> and for the new polar coordinate system (and their axes) will be in a future post.&lt;/p></description></item><item><title>ggplot2 3.5.0: Legends</title><link>https://www.tidyverse.org/blog/2024/02/ggplot2-3-5-0-legends/</link><pubDate>Mon, 26 Feb 2024 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2024/02/ggplot2-3-5-0-legends/</guid><description>&lt;!--
TODO:
* [x] Look over / edit the post's title in the yaml
* [x] Edit (or delete) the description; note this appears in the Twitter card
* [x] Pick category and tags (see existing with [`hugodown::tidy_show_meta()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html))
* [x] Find photo &amp; update yaml metadata
* [x] Create `thumbnail-sq.jpg`; height and width should be equal
* [x] Create `thumbnail-wd.jpg`; width should be >5x height
* [x] [`hugodown::use_tidy_thumbnails()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html)
* [ ] Add intro sentence, e.g. the standard tagline for the package
* [ ] [`usethis::use_tidy_thanks()`](https://usethis.r-lib.org/reference/use_tidy_thanks.html)
-->
&lt;p>We are pleased to release
&lt;a href="https://ggplot2.tidyverse.org" target="_blank" rel="noopener">ggplot2&lt;/a> 3.5.0. This is one blogpost among several outlining changes to legend guides. Please find the
&lt;a href="https://www.tidyverse.org/blog/2024/02/ggplot2-3-5-0/">main release post&lt;/a> to read about other changes.&lt;/p>
&lt;p>Legends, alongside axes, are visual representations of scales and allow observes to translate graphical properties of a plot into information. To no surprise, legends in ggplot2 comprise the guides called
&lt;a href="https://ggplot2.tidyverse.org/reference/guide_legend.html" target="_blank" rel="noopener">&lt;code>guide_legend()&lt;/code>&lt;/a>, but also
&lt;a href="https://ggplot2.tidyverse.org/reference/guide_colourbar.html" target="_blank" rel="noopener">&lt;code>guide_colourbar()&lt;/code>&lt;/a>,
&lt;a href="https://ggplot2.tidyverse.org/reference/guide_coloursteps.html" target="_blank" rel="noopener">&lt;code>guide_coloursteps()&lt;/code>&lt;/a> and
&lt;a href="https://ggplot2.tidyverse.org/reference/guide_bins.html" target="_blank" rel="noopener">&lt;code>guide_bins()&lt;/code>&lt;/a>.&lt;/p>
&lt;h2 id="styling">Styling
&lt;a href="#styling">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>One of the more user-visible changes is that these guides no longer have styling options. Or at least, they have been soft-deprecated: they continue to work for now, but are scheduled for removal. Gone are the days where there were 4 possible ways to set the horizontal justification of legend text in 5 different functions. There is only one way to style guides now, and that is by using
&lt;a href="https://ggplot2.tidyverse.org/reference/theme.html" target="_blank" rel="noopener">&lt;code>theme()&lt;/code>&lt;/a>. The
&lt;a href="https://ggplot2.tidyverse.org/reference/theme.html" target="_blank" rel="noopener">&lt;code>theme()&lt;/code>&lt;/a> function has new arguments to control the appearance of legends, which makes it easier to globally control the appearance of legends. For example: &lt;code>theme(legend.frame)&lt;/code> replaces &lt;code>guide_colourbar(frame.colour, frame.linewidth, frame.linetype)&lt;/code> and &lt;code>theme(legend.axis.line)&lt;/code> replaces &lt;code>guide_bins(axis, axis.colour, axis.linewidth, axis.arrow)&lt;/code>. To allow for tweaking the style of any individual guide, the guide functions now have a &lt;code>theme&lt;/code> argument that can accept a theme specific to that guide.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://ggplot2.tidyverse.org'>ggplot2&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mpg&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>displ&lt;/span>, &lt;span class='nv'>hwy&lt;/span>, shape &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/factor.html'>factor&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>cyl&lt;/span>&lt;span class='o'>)&lt;/span>, colour &lt;span class='o'>=&lt;/span> &lt;span class='nv'>cty&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='c'># Styling individual guides&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/guides.html'>guides&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> shape &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/guide_legend.html'>guide_legend&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>theme &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>legend.text &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>colour &lt;span class='o'>=&lt;/span> &lt;span class='s'>"red"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> colour &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/guide_colourbar.html'>guide_colorbar&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>theme &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>legend.frame &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>element_rect&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>colour &lt;span class='o'>=&lt;/span> &lt;span class='s'>"red"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='c'># Styling guides globally&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> legend.title.position &lt;span class='o'>=&lt;/span> &lt;span class='s'>"left"&lt;/span>,&lt;/span>
&lt;span> &lt;span class='c'># Title justification is controlled by hjust/vjust in the element&lt;/span>&lt;/span>
&lt;span> legend.title &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>angle &lt;span class='o'>=&lt;/span> &lt;span class='m'>90&lt;/span>, hjust &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.5&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/guide_theming-1.png" alt="Scatterplot of engine displacement versus highway miles per gallon. The legend indicating shapes for the number of cylinders has red text. The colour bar indicating city miles per gallon has a red rectangle around the bar. Both the legend and colour bar titles are rotated, centered and on the left of the guide." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>In the plot above, notice how the legend title settings affect both the colour bar and the legend, whereas the local options, like red legend text, only apply to a single guide.&lt;/p>
&lt;h2 id="awareness">Awareness
&lt;a href="#awareness">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Legends are now more aware what discrete variables should be placed in which keys. By default, they now only draw keys for the layer which contain the relevant value. This saves one having to hassle with the &lt;code>guide_legend(override.aes)&lt;/code> argument to get the keys to display just right. In the plot below, notice how the points and line have separate keys.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>p&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mpg&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>displ&lt;/span>, &lt;span class='nv'>hwy&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_alpha_manual&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>values &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0.5&lt;/span>, &lt;span class='m'>1&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>p&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>colour &lt;span class='o'>=&lt;/span> &lt;span class='s'>"points"&lt;/span>, alpha &lt;span class='o'>=&lt;/span> &lt;span class='s'>"points"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_path.html'>geom_line&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>colour &lt;span class='o'>=&lt;/span> &lt;span class='s'>"line"&lt;/span>, alpha &lt;span class='o'>=&lt;/span> &lt;span class='s'>"line"&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> stat &lt;span class='o'>=&lt;/span> &lt;span class='s'>"smooth"&lt;/span>, formula &lt;span class='o'>=&lt;/span> &lt;span class='nv'>y&lt;/span> &lt;span class='o'>~&lt;/span> &lt;span class='nv'>x&lt;/span>, method &lt;span class='o'>=&lt;/span> &lt;span class='s'>"lm"&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/legend_awareness-1.png" alt="A scatterplot with trendline showing engine displacement versus highway miles per gallon. There are two legends for colour and alpha. Both legends show points and lines separately." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>To revert back to the old behaviour, you can set the &lt;code>show.legend = TRUE&lt;/code> option in the layers. Like before, the &lt;code>show.legend&lt;/code> argument can still be set in an aesthetic-specific way. Setting it to &lt;code>TRUE&lt;/code> means &amp;lsquo;always show&amp;rsquo;, &lt;code>FALSE&lt;/code> means &amp;lsquo;never show&amp;rsquo; and &lt;code>NA&lt;/code> means &amp;lsquo;show if found&amp;rsquo;.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>p&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>colour &lt;span class='o'>=&lt;/span> &lt;span class='s'>"points"&lt;/span>, alpha &lt;span class='o'>=&lt;/span> &lt;span class='s'>"points"&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> show.legend &lt;span class='o'>=&lt;/span> &lt;span class='kc'>TRUE&lt;/span> &lt;span class='c'># always show&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_path.html'>geom_line&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>colour &lt;span class='o'>=&lt;/span> &lt;span class='s'>"line"&lt;/span>, alpha &lt;span class='o'>=&lt;/span> &lt;span class='s'>"line"&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> stat &lt;span class='o'>=&lt;/span> &lt;span class='s'>"smooth"&lt;/span>, formula &lt;span class='o'>=&lt;/span> &lt;span class='nv'>y&lt;/span> &lt;span class='o'>~&lt;/span> &lt;span class='nv'>x&lt;/span>, method &lt;span class='o'>=&lt;/span> &lt;span class='s'>"lm"&lt;/span>,&lt;/span>
&lt;span> show.legend &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>colour &lt;span class='o'>=&lt;/span> &lt;span class='kc'>NA&lt;/span>, alpha &lt;span class='o'>=&lt;/span> &lt;span class='kc'>TRUE&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='c'># always show in alpha&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/show_key_setting-1.png" alt="The same plot as before, but every legend keys displays points. Lines are shown in every 'alpha' legend key, but only one 'colour' key." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;h2 id="placement">Placement
&lt;a href="#placement">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Legend positions are no longer restricted to just a single side of the plot. By setting the &lt;code>position&lt;/code> argument of guides, you can tailor which guides appear where in the plot. Guides that do not have a position set, like the &amp;lsquo;drv&amp;rsquo; shape legend below, follow the global theme&amp;rsquo;s &lt;code>legend.position&lt;/code> setting. If we suspend our belief in good data visualisation practice, we can showcase this as follows:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>p&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mpg&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>displ&lt;/span>, &lt;span class='nv'>hwy&lt;/span>, shape &lt;span class='o'>=&lt;/span> &lt;span class='nv'>drv&lt;/span>, colour &lt;span class='o'>=&lt;/span> &lt;span class='nv'>cty&lt;/span>, size &lt;span class='o'>=&lt;/span> &lt;span class='nv'>year&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>alpha &lt;span class='o'>=&lt;/span> &lt;span class='nv'>cyl&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/guides.html'>guides&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> colour &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/guide_colourbar.html'>guide_colourbar&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>position &lt;span class='o'>=&lt;/span> &lt;span class='s'>"bottom"&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> size &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/guide_legend.html'>guide_legend&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>position &lt;span class='o'>=&lt;/span> &lt;span class='s'>"top"&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> alpha &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/guide_legend.html'>guide_legend&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>position &lt;span class='o'>=&lt;/span> &lt;span class='s'>"inside"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>legend.position &lt;span class='o'>=&lt;/span> &lt;span class='s'>"left"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>p&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/legend_positions-1.png" alt="A scatterplot showing engine displacement versus highway miles per gallon. It has four legend placed at the top, left, bottom of the panel and one inside the panel." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>In the plot above, the legend for the &amp;lsquo;cyl&amp;rsquo; variable is in the middle of the plot. In previous versions of ggplot2, you could set the &lt;code>legend.position&lt;/code> to a coordinate to control the placement. However, doing this would change the default legend position, which is not always desirable. To cover such cases, there is now a specialised &lt;code>legend.position.inside&lt;/code> argument that controls the positioning of legends with &lt;code>position = &amp;quot;inside&amp;quot;&lt;/code> regardless of whether the position was specified in the theme or in the guide.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>p&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>legend.position.inside &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0.7&lt;/span>, &lt;span class='m'>0.7&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/legend_inside-1.png" alt="The same plot as before, but the legend for the 'cyl' variable is to the top-right of the centre." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>The justification of legends is controllable by using the &lt;code>legend.justification.{position}&lt;/code> theme setting. Moreover, the top and bottom guides can be aligned to the plot rather than the panel by setting the &lt;code>legend.location&lt;/code> argument. The main reason behind this is that you can then align the legends with the plot&amp;rsquo;s title. By default, when &lt;code>plot.title.position = &amp;quot;plot&amp;quot;&lt;/code>, left legends are already aligned. For this reason, the top and bottom guides are prioritised for the &lt;code>legend.location&lt;/code> setting. Moreover, it avoids overlapping of legends in the corners if the justifications would dictate it.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>p&lt;/span> &lt;span class='o'>+&lt;/span> &lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>title &lt;span class='o'>=&lt;/span> &lt;span class='s'>"Plot-aligned title"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> legend.margin &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>margin&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0&lt;/span>, &lt;span class='m'>0&lt;/span>, &lt;span class='m'>0&lt;/span>, &lt;span class='m'>0&lt;/span>&lt;span class='o'>)&lt;/span>, &lt;span class='c'># turned off for alignment&lt;/span>&lt;/span>
&lt;span> legend.justification.top &lt;span class='o'>=&lt;/span> &lt;span class='s'>"left"&lt;/span>,&lt;/span>
&lt;span> legend.justification.left &lt;span class='o'>=&lt;/span> &lt;span class='s'>"top"&lt;/span>,&lt;/span>
&lt;span> legend.justification.bottom &lt;span class='o'>=&lt;/span> &lt;span class='s'>"right"&lt;/span>,&lt;/span>
&lt;span> legend.justification.inside &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>1&lt;/span>, &lt;span class='m'>1&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> legend.location &lt;span class='o'>=&lt;/span> &lt;span class='s'>"plot"&lt;/span>,&lt;/span>
&lt;span> plot.title.position &lt;span class='o'>=&lt;/span> &lt;span class='s'>"plot"&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/legend_alignments-1.png" alt="The same plot as before, but with a plot-aligned title and different alignments of the legends. The left and top legends are left-aligned with the title." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;h2 id="spacing-and-margins">Spacing and margins
&lt;a href="#spacing-and-margins">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>In this release, the way spacing in legends work has been reworked.&lt;/p>
&lt;ul>
&lt;li>The &lt;code>legend.spacing{.x/.y}&lt;/code> theme setting is now used to space different guides apart. Previously, it was also used to space legend keys apart; that is no longer the case.&lt;/li>
&lt;li>Spacing legend key-label pairs apart is now controlled by the &lt;code>legend.key.spacing{.x/.y}&lt;/code> theme setting.&lt;/li>
&lt;li>Spacing the labels from the keys is now controlled by the label element&amp;rsquo;s &lt;code>margin&lt;/code> argument.&lt;/li>
&lt;/ul>
&lt;p>Because the legend spacing and margin options can be a bit bewildering, a small overview is added below. One setting not included in the overview is &lt;code>legend.spacing.x&lt;/code>, which only applies when &lt;code>legend.box = &amp;quot;horizontal&amp;quot;&lt;/code>. Which exact text margin is relevant for spacing apart keys and labels, or titles and the rest of the guide, depends on the &lt;code>legend.text.position&lt;/code> and &lt;code>legend.title.position&lt;/code> theme elements.&lt;/p>
&lt;div class="highlight">
&lt;p>&lt;img src="figs/spacing_overview-1.png" alt="Overview of legend spacing and margin options. Two abstract legends are placed above one another to the right of an area called 'plot'. Various arrows with labels point out different theme settings." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>When the titles and keys don&amp;rsquo;t have explicit margins, appropriate margins are added automatically depending on the text or title position. However, if you override the margins, they will be interpreted literally.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mpg&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>displ&lt;/span>, &lt;span class='nv'>hwy&lt;/span>, colour &lt;span class='o'>=&lt;/span> &lt;span class='nv'>class&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/guides.html'>guides&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>colour &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/guide_legend.html'>guide_legend&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>ncol &lt;span class='o'>=&lt;/span> &lt;span class='m'>2&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> legend.key.spacing.x &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/unit.html'>unit&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>10&lt;/span>, &lt;span class='s'>"pt"&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> legend.key.spacing.y &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/unit.html'>unit&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>20&lt;/span>, &lt;span class='s'>"pt"&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> legend.text &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>margin &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>margin&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>l &lt;span class='o'>=&lt;/span> &lt;span class='m'>0&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> legend.title &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>margin &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>margin&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>b &lt;span class='o'>=&lt;/span> &lt;span class='m'>20&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/legend_spacing-1.png" alt="A scatterplot showing engine displacement versus highway miles per gallon. The legend for the 'class' variable shows a key layout with two columns. Keys are widely spacing in the vertical direction and more narrowly in the horizontal direction. There is no space between the keys and their labels, but plenty of space between the legend and its title." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>For all intents and purposes, colour bar/step and bins guides are treated as legend guides with just a single key-label pair. While the &lt;code>legend.key.spacing&lt;/code> setting does not apply due to it being one single key, the other spacings and margins do apply equally.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mpg&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>displ&lt;/span>, &lt;span class='nv'>hwy&lt;/span>, colour &lt;span class='o'>=&lt;/span> &lt;span class='nv'>cty&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> legend.text &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>margin &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>margin&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>l &lt;span class='o'>=&lt;/span> &lt;span class='m'>0&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> legend.title &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>margin &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>margin&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>b &lt;span class='o'>=&lt;/span> &lt;span class='m'>20&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/legend_spacing_bar-1.png" alt="The same plot as before, but with a colourbar indicating the 'cty' variable. Again, there is no space between the bar and the labels and ample space between the bar and the title." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;h2 id="stretching">Stretching
&lt;a href="#stretching">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Another experimental tweak to legends is that they can now have stretching keys (or bars). The option is still considered &amp;lsquo;experimental&amp;rsquo; because there are some things that may go wrong. By setting the &lt;code>legend.key{.height/.width}&lt;/code> theme argument as a &lt;code>&amp;quot;null&amp;quot;&lt;/code> unit, legends can now expand to fill the available space.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>p&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mpg&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>displ&lt;/span>, &lt;span class='nv'>hwy&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>colour &lt;span class='o'>=&lt;/span> &lt;span class='nv'>cty&lt;/span>, size &lt;span class='o'>=&lt;/span> &lt;span class='nv'>cyl&lt;/span>&lt;span class='o'>)&lt;/span>, shape &lt;span class='o'>=&lt;/span> &lt;span class='m'>21&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>legend.key.height &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/unit.html'>unit&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>1&lt;/span>, &lt;span class='s'>"null"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>p&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/stretch_keys-1.png" alt="Scatterplot of engine displacement versus highway miles per gallon. There is a legend guide showing the point's size and a colour. Both the legend and the bar take up an approximately equal amount of space on the right-hand side of the panel." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>The term &amp;lsquo;available space&amp;rsquo; is a tricky one. For starters, other legends placed in the same position take up space, as can be seen in the plot above. If your legend is the only legend in a position, more space is available and it stretches more. As you can see in the plot below, the legends are not aligned with the panel even when stretched. This is because the titles, margins and various spacings all take up space that is &lt;em>not&lt;/em> available to stretch into.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>p&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/guides.html'>guides&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>colour &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/guide_colourbar.html'>guide_colourbar&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>position &lt;span class='o'>=&lt;/span> &lt;span class='s'>"left"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/isolated_stretch-1.png" alt="Same plot as before, but the colour bar is placed on the left. Both the colour bar and legend take up a lot of vertical space." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>On the other hand, if one position is packed with legends, the keys may shrink instead of stretch. The keys can become too small to show the aesthetics properly. You can see in the example below that the size legend becomes cut-off due to small keys and text is spaced too closely to comfortably read.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>p&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>fill &lt;span class='o'>=&lt;/span> &lt;span class='nv'>model&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/shrinking_keys-1.png" alt="Same plot as before, but all legends are on the right, including a new legend for the 'model' variable. All legends have keys that are too small to read the text comfortably, and the points indicating size are clipped." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>Another issue that may come up is that the &amp;lsquo;available space&amp;rsquo; might be 0. Because the plot itself is also space-filling, setting null-heights for top/bottom positions or null-widths for left/right positions means there is no available space. This may result in the keys or bars becoming invisible. For the plot below, recall that we&amp;rsquo;ve set the &lt;code>legend.key.height&lt;/code> setting to a null unit.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>p&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>legend.position &lt;span class='o'>=&lt;/span> &lt;span class='s'>"top"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/disappearing_keys-1.png" alt="Still the same scatterplot but without the fill variable. Legends are placed at the top of the panel, but the bar and key backgrounds have disappeared. The text labels are still present." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;h2 id="other-improvements">Other improvements
&lt;a href="#other-improvements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>We welcome a new type of legend:
&lt;a href="https://ggplot2.tidyverse.org/reference/guide_custom.html" target="_blank" rel="noopener">&lt;code>guide_custom()&lt;/code>&lt;/a>. It can be used to add any graphical object (grob) to a plot, like
&lt;a href="https://ggplot2.tidyverse.org/reference/annotation_custom.html" target="_blank" rel="noopener">&lt;code>annotation_custom()&lt;/code>&lt;/a>. There are a few differences though: it is positioned just like a legend and adds titles and margins. In some sense, this guide is &amp;lsquo;special&amp;rsquo;, as it is the only guide that does not directly reflect a scale. The downside is that it cannot read properties from the plot, but the upside is that it is very flexible. Be careful when your grob does not have an absolute size, you should set the &lt;code>width&lt;/code> and &lt;code>height&lt;/code> arguments.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>x&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0.5&lt;/span>, &lt;span class='m'>1&lt;/span>, &lt;span class='m'>1.5&lt;/span>, &lt;span class='m'>1.2&lt;/span>, &lt;span class='m'>1.5&lt;/span>, &lt;span class='m'>1&lt;/span>, &lt;span class='m'>0.5&lt;/span>, &lt;span class='m'>0.8&lt;/span>, &lt;span class='m'>1&lt;/span>, &lt;span class='m'>1.15&lt;/span>, &lt;span class='m'>2&lt;/span>, &lt;span class='m'>1.15&lt;/span>, &lt;span class='m'>1&lt;/span>, &lt;span class='m'>0.85&lt;/span>, &lt;span class='m'>0&lt;/span>, &lt;span class='m'>0.85&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>y&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>1.5&lt;/span>, &lt;span class='m'>1.2&lt;/span>, &lt;span class='m'>1.5&lt;/span>, &lt;span class='m'>1&lt;/span>, &lt;span class='m'>0.5&lt;/span>, &lt;span class='m'>0.8&lt;/span>, &lt;span class='m'>0.5&lt;/span>, &lt;span class='m'>1&lt;/span>, &lt;span class='m'>2&lt;/span>, &lt;span class='m'>1.15&lt;/span>, &lt;span class='m'>1&lt;/span>, &lt;span class='m'>0.85&lt;/span>, &lt;span class='m'>0&lt;/span>, &lt;span class='m'>0.85&lt;/span>, &lt;span class='m'>1&lt;/span>, &lt;span class='m'>1.15&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>compass_rose&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>grid&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/grid.polygon.html'>polygonGrob&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> x &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/unit.html'>unit&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>x&lt;/span>, &lt;span class='s'>"cm"&lt;/span>&lt;span class='o'>)&lt;/span>, y &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/unit.html'>unit&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>y&lt;/span>, &lt;span class='s'>"cm"&lt;/span>&lt;span class='o'>)&lt;/span>, id.lengths &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>8&lt;/span>, &lt;span class='m'>8&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> gp &lt;span class='o'>=&lt;/span> &lt;span class='nf'>grid&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/gpar.html'>gpar&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>fill &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"grey50"&lt;/span>, &lt;span class='s'>"grey25"&lt;/span>&lt;span class='o'>)&lt;/span>, col &lt;span class='o'>=&lt;/span> &lt;span class='kc'>NA&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>nc&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>sf&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://r-spatial.github.io/sf/reference/st_read.html'>st_read&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/system.file.html'>system.file&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"shape/nc.shp"&lt;/span>, package &lt;span class='o'>=&lt;/span> &lt;span class='s'>"sf"&lt;/span>&lt;span class='o'>)&lt;/span>, quiet &lt;span class='o'>=&lt;/span> &lt;span class='kc'>TRUE&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>nc&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggsf.html'>geom_sf&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>fill &lt;span class='o'>=&lt;/span> &lt;span class='nv'>AREA&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/guides.html'>guides&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>custom &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/guide_custom.html'>guide_custom&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>compass_rose&lt;/span>, title &lt;span class='o'>=&lt;/span> &lt;span class='s'>"compass"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/custom_guide-1.png" alt="A map of the US state North Carolina, where fill colour indicates the area of counties. Underneath the colour bar for the fill, there is an eight-pointed star to the right of the panel with the title 'compass'." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>In previous version of ggplot2, when legend titles are wider than the legends, the guide-title alignment was always left aligned. Now, the justification setting of the legend text determines the alignment: 1 is right or top aligned and 0 is left or bottom aligned.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mpg&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>displ&lt;/span>, &lt;span class='nv'>hwy&lt;/span>, shape &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/factor.html'>factor&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>cyl&lt;/span>&lt;span class='o'>)&lt;/span>, colour &lt;span class='o'>=&lt;/span> &lt;span class='nv'>drv&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/guides.html'>guides&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> shape &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/guide_legend.html'>guide_legend&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> title &lt;span class='o'>=&lt;/span> &lt;span class='s'>"A title that is pretty long"&lt;/span>,&lt;/span>
&lt;span> theme &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>legend.title &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>hjust &lt;span class='o'>=&lt;/span> &lt;span class='m'>1&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> order &lt;span class='o'>=&lt;/span> &lt;span class='m'>1&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> colour &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/guide_legend.html'>guide_legend&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> title &lt;span class='o'>=&lt;/span> &lt;span class='s'>"Another long title"&lt;/span>,&lt;/span>
&lt;span> theme &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>legend.title &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>hjust &lt;span class='o'>=&lt;/span> &lt;span class='m'>0&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/title_justification-1.png" alt="Scatterplot of engine displacement versus highway miles per gallon. The 'drv' variable has a legend that is left aligned, whereas the 'cyl' variable has a legend that is right-aligned." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div></description></item><item><title>ggplot2 3.5.0</title><link>https://www.tidyverse.org/blog/2024/02/ggplot2-3-5-0/</link><pubDate>Fri, 23 Feb 2024 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2024/02/ggplot2-3-5-0/</guid><description>&lt;!--
TODO:
* [x] Look over / edit the post's title in the yaml
* [x] Edit (or delete) the description; note this appears in the Twitter card
* [x] Pick category and tags (see existing with [`hugodown::tidy_show_meta()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html))
* [x] Find photo &amp; update yaml metadata
* [x] Create `thumbnail-sq.jpg`; height and width should be equal
* [x] Create `thumbnail-wd.jpg`; width should be >5x height
* [x] [`hugodown::use_tidy_thumbnails()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html)
* [x] Add intro sentence, e.g. the standard tagline for the package
* [x] [`usethis::use_tidy_thanks()`](https://usethis.r-lib.org/reference/use_tidy_thanks.html)
-->
&lt;p>We&amp;rsquo;re tickled pink to announce the release of
&lt;a href="https://ggplot2.tidyverse.org" target="_blank" rel="noopener">ggplot2&lt;/a> 3.5.0. ggplot2 is a system for declaratively creating graphics, based on The Grammar of Graphics. You provide the data, tell ggplot2 how to map variables to aesthetics, what graphical primitives to use, and it takes care of the details.&lt;/p>
&lt;p>You can install it from CRAN with:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/utils/install.packages.html'>install.packages&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"ggplot2"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>This blog post will cover a bunch of new features included in the latest release. In addition to rewriting the guide system, we made progress supporting newer R graphics capabilities, re-purposed the use of
&lt;a href="https://rdrr.io/r/base/AsIs.html" target="_blank" rel="noopener">&lt;code>I()&lt;/code>&lt;/a>, and introduce an improved polar coordinate system, along with other improvements. As the release is quite large, we are making a
&lt;a href="https://www.tidyverse.org/tags/ggplot2-3-5-0/" target="_blank" rel="noopener">series of blog posts&lt;/a> covering the major changes.&lt;/p>
&lt;p>You can see a full list of changes in the
&lt;a href="https://ggplot2.tidyverse.org/news/index.html" target="_blank" rel="noopener">release notes&lt;/a>&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://ggplot2.tidyverse.org'>ggplot2&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://patchwork.data-imaginist.com'>patchwork&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>grid&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;h2 id="guide-rewrite">Guide rewrite
&lt;a href="#guide-rewrite">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Axes and legends, collectively called guides, are an important component to plots, as they allow the translation of visual information back to data qualities. The extension mechanism of ggplot2 allows others to develop their own layers, facets, coords and scales through the ggproto object-oriented system. Finally, after years of being the only major system in ggplot2 still clinging to the S3 system, guides have been rewritten to use ggproto. With this rewrite, guides officially become an extension point that let developers implement their own guides. We have added a section to the
&lt;a href="https://ggplot2.tidyverse.org/articles/extending-ggplot2.html#creating-new-guides" target="_blank" rel="noopener">Extending ggplot2&lt;/a> vignette on how to develop a new guide.&lt;/p>
&lt;p>Alongside the rewrite, we made a slew of improvements to guides along the way. As these are somewhat meaty and focused topics, we are going to cover them in separate blog posts about axes and legends.&lt;/p>
&lt;h2 id="patterns-and-gradients">Patterns and gradients
&lt;a href="#patterns-and-gradients">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Patterns and gradients are provided by the grid package, which ggplot2 builds on top of. They were first introduced in R 4.1.0 and were refined in R 4.2.0 to support multiple patterns and gradients. If your graphics device supported it, theme elements could already be set to patterns or gradients, even before this release.&lt;/p>
&lt;blockquote>
&lt;p>Note: On Windows machines, the default device in RStudio and in the knitr package is
&lt;a href="https://rdrr.io/r/grDevices/png.html" target="_blank" rel="noopener">&lt;code>png()&lt;/code>&lt;/a>, which does not support patterns. In RStudio, you can go to &amp;lsquo;Tools &amp;gt; Global Options &amp;gt; General &amp;gt; Graphics&amp;rsquo; and choose the &amp;lsquo;ragg&amp;rsquo; or &amp;lsquo;Cairo PNG&amp;rsquo; device from the dropdown menu to display patterns.&lt;/p>
&lt;/blockquote>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>gray_gradient&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/patterns.html'>linearGradient&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>scales&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://scales.r-lib.org/reference/pal_grey.html'>pal_grey&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>10&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mpg&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>displ&lt;/span>, &lt;span class='nv'>hwy&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>panel.background &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>element_rect&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>fill &lt;span class='o'>=&lt;/span> &lt;span class='nv'>gray_gradient&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/theme_gradient-1.png" alt="Scatterplot of engine displacement versus highway miles per gallon. The panel background is a colour gradient starting from dark grey in the bottom-left corner ending at light grey in the upper-right corner." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>We are pleased to report that as of this release, patterns can be used as the &lt;code>fill&lt;/code> aesthetic in most layers. To use a pattern, first build a gradient using {grid}&amp;lsquo;s
&lt;a href="https://rdrr.io/r/grid/patterns.html" target="_blank" rel="noopener">&lt;code>linearGradient()&lt;/code>&lt;/a>,
&lt;a href="https://rdrr.io/r/grid/patterns.html" target="_blank" rel="noopener">&lt;code>radialGradient()&lt;/code>&lt;/a> functions, or a pattern using the
&lt;a href="https://rdrr.io/r/grid/patterns.html" target="_blank" rel="noopener">&lt;code>pattern()&lt;/code>&lt;/a> function. Because handling patterns and gradients is very similar, we will treat gradients as if they were patterns: when we say &amp;lsquo;pattern&amp;rsquo; in the text below, please mind that we mean patterns and gradients alike. These patterns can be passed to a layer as the &lt;code>fill&lt;/code> aesthetic. Below, you can see two behaviours of the
&lt;a href="https://rdrr.io/r/grid/patterns.html" target="_blank" rel="noopener">&lt;code>linearGradient()&lt;/code>&lt;/a> pattern, depending on its &lt;code>group&lt;/code> argument. The pattern with &lt;code>group = FALSE&lt;/code> will display the gradient in every rectangle and &lt;code>group = TRUE&lt;/code> will apply the gradient to all rectangles together.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>colours&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>scales&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://scales.r-lib.org/reference/pal_viridis.html'>viridis_pal&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>10&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>grad_ungroup&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/patterns.html'>linearGradient&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>colours&lt;/span>, group &lt;span class='o'>=&lt;/span> &lt;span class='kc'>FALSE&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>grad_grouped&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/patterns.html'>linearGradient&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>colours&lt;/span>, group &lt;span class='o'>=&lt;/span> &lt;span class='kc'>TRUE&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>ungroup&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mpg&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/factor.html'>factor&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>cyl&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_bar.html'>geom_bar&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>fill &lt;span class='o'>=&lt;/span> &lt;span class='nv'>grad_ungroup&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>title &lt;span class='o'>=&lt;/span> &lt;span class='s'>"Ungrouped gradient"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>grouped&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mpg&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/factor.html'>factor&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>cyl&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_bar.html'>geom_bar&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>fill &lt;span class='o'>=&lt;/span> &lt;span class='nv'>grad_grouped&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>title &lt;span class='o'>=&lt;/span> &lt;span class='s'>"Grouped gradient"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>ungroup&lt;/span> &lt;span class='o'>|&lt;/span> &lt;span class='nv'>grouped&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/grouping_gradient-1.png" alt="Two barplots showing the counts of number of cylinders. The first plot is titled 'Ungrouped gradient' and shows individual gradients in the bars. The second is titled 'Grouped gradient' and shows a single gradient along all bars." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>Besides passing a static pattern as the &lt;code>fill&lt;/code> aesthetic, it is also possible to map values to patterns using
&lt;a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" target="_blank" rel="noopener">&lt;code>scale_fill_manual()&lt;/code>&lt;/a>. To map values to patterns, pass a list of patterns to the &lt;code>values&lt;/code> argument of the scale. When providing patterns as a list, the list can be a mix of patterns and plain colours, like &lt;code>&amp;quot;limegreen&amp;quot;&lt;/code> in the plot below. We are excited that people may come up with nice pattern palettes that can be used in similar fashion.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>patterns&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/list.html'>list&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/patterns.html'>linearGradient&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>colours&lt;/span>, group &lt;span class='o'>=&lt;/span> &lt;span class='kc'>FALSE&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> &lt;span class='s'>"limegreen"&lt;/span>,&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/patterns.html'>radialGradient&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>colours&lt;/span>, group &lt;span class='o'>=&lt;/span> &lt;span class='kc'>FALSE&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/patterns.html'>pattern&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/grid.rect.html'>rectGrob&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0.25&lt;/span>, &lt;span class='m'>0.75&lt;/span>&lt;span class='o'>)&lt;/span>, y &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0.25&lt;/span>, &lt;span class='m'>0.75&lt;/span>&lt;span class='o'>)&lt;/span>, width &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.5&lt;/span>, height &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.5&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> width &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/unit.html'>unit&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>5&lt;/span>, &lt;span class='s'>"mm"&lt;/span>&lt;span class='o'>)&lt;/span>, height &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/unit.html'>unit&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>5&lt;/span>, &lt;span class='s'>"mm"&lt;/span>&lt;span class='o'>)&lt;/span>, extend &lt;span class='o'>=&lt;/span> &lt;span class='s'>"repeat"&lt;/span>,&lt;/span>
&lt;span> gp &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/gpar.html'>gpar&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>fill &lt;span class='o'>=&lt;/span> &lt;span class='s'>"limegreen"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mpg&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/factor.html'>factor&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>cyl&lt;/span>&lt;span class='o'>)&lt;/span>, fill &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/factor.html'>factor&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>cyl&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_bar.html'>geom_bar&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_fill_manual&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>values &lt;span class='o'>=&lt;/span> &lt;span class='nv'>patterns&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/pattern_scale-1.png" alt="Barplot showing counts of number of cylinders with the bars filled by a linear gradient, a plain green colour, a radial gradient and a green checkerboard pattern." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>The largest obstacle we had to overcome to support gradients in ggplot2 was to apply the &lt;code>alpha&lt;/code> aesthetic consistently to the patterns. The regular
&lt;a href="https://scales.r-lib.org/reference/alpha.html" target="_blank" rel="noopener">&lt;code>scales::alpha()&lt;/code>&lt;/a> function does not work with patterns, so we implemented a new
&lt;a href="https://ggplot2.tidyverse.org/reference/fill_alpha.html" target="_blank" rel="noopener">&lt;code>fill_alpha()&lt;/code>&lt;/a> function that applies the &lt;code>alpha&lt;/code> aesthetic to the patterns. By switching out &lt;code>fill = alpha(fill, alpha)&lt;/code> with &lt;code>fill = fill_alpha(fill, alpha)&lt;/code> in the
&lt;a href="https://rdrr.io/r/grid/gpar.html" target="_blank" rel="noopener">&lt;code>grid::gpar()&lt;/code>&lt;/a> function, extension developers can enable pattern fills in their own layer extensions.&lt;/p>
&lt;p>The
&lt;a href="https://ggplot2.tidyverse.org/reference/fill_alpha.html" target="_blank" rel="noopener">&lt;code>fill_alpha()&lt;/code>&lt;/a> function checks if the active device supports patterns and spits out a friendlier warning or error on demand. For extension developers that want to use newer graphics features, you can reuse the
&lt;a href="https://ggplot2.tidyverse.org/reference/check_device.html" target="_blank" rel="noopener">&lt;code>check_device()&lt;/code>&lt;/a> function to check feature availability or throw messages in a similar fashion.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='c'># The currently active device is the ragg::agg_png() device&lt;/span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/check_device.html'>check_device&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>feature &lt;span class='o'>=&lt;/span> &lt;span class='s'>"patterns"&lt;/span>, action &lt;span class='o'>=&lt;/span> &lt;span class='s'>"test"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; [1] TRUE&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/check_device.html'>check_device&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>feature &lt;span class='o'>=&lt;/span> &lt;span class='s'>"glyphs"&lt;/span>, action &lt;span class='o'>=&lt;/span> &lt;span class='s'>"abort"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00; font-weight: bold;'>Error&lt;/span>&lt;span style='font-weight: bold;'>:&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00;'>!&lt;/span> The &lt;span style='color: #00BB00;'>agg_png&lt;/span> device does not support &lt;span style='font-style: italic;'>typeset glyphs&lt;/span>.&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;h2 id="ignoring-scales">Ignoring scales
&lt;a href="#ignoring-scales">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>In this release, ggplot2 has changed how the plots interact with variables created with
&lt;a href="https://rdrr.io/r/base/AsIs.html" target="_blank" rel="noopener">&lt;code>I()&lt;/code>&lt;/a> (&amp;lsquo;AsIs&amp;rsquo; variables). The change is somewhat subtle, so it takes a bit of explaining.&lt;/p>
&lt;p>It &lt;em>used to be&lt;/em> the case that &amp;lsquo;AsIs&amp;rsquo; variables automatically added an identity scale to the plot. Identity scales in ggplot2 preserve the original input, without mapping or transforming them. For example, iif you give literal colour names as the &lt;code>colour&lt;/code> aesthetic, the plot will use these exact colours.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/Random.html'>set.seed&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>42&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>my_colours&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/sample.html'>sample&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"red"&lt;/span>, &lt;span class='s'>"green"&lt;/span>, &lt;span class='s'>"blue"&lt;/span>&lt;span class='o'>)&lt;/span>, &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/nrow.html'>nrow&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mpg&lt;/span>&lt;span class='o'>)&lt;/span>, replace &lt;span class='o'>=&lt;/span> &lt;span class='kc'>TRUE&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mpg&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>displ&lt;/span>, &lt;span class='nv'>hwy&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>colour &lt;span class='o'>=&lt;/span> &lt;span class='nv'>my_colours&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/scale_identity.html'>scale_colour_identity&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/literal_colours-1.png" alt="Scatterplot of engine displacement versus highway miles per gallon with points in red, green and blue." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>However, because identity scales &lt;em>are&lt;/em> true scales, you cannot combine literal colours in one layer with mapped colours in the next. Trying to do so, will confront you with the &amp;lsquo;unknown colour name&amp;rsquo; error.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mpg&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>displ&lt;/span>, &lt;span class='nv'>hwy&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>colour &lt;span class='o'>=&lt;/span> &lt;span class='nv'>drv&lt;/span>&lt;span class='o'>)&lt;/span>, shape &lt;span class='o'>=&lt;/span> &lt;span class='m'>1&lt;/span>, size &lt;span class='o'>=&lt;/span> &lt;span class='m'>5&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>colour &lt;span class='o'>=&lt;/span> &lt;span class='nv'>my_colours&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/scale_identity.html'>scale_colour_identity&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00; font-weight: bold;'>Error&lt;/span>&lt;span style='font-weight: bold;'> in `geom_point()`:&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00;'>!&lt;/span> Problem while converting geom to grob.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BBBB;'>ℹ&lt;/span> Error occurred in the 1st layer.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='font-weight: bold;'>Caused by error:&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00;'>!&lt;/span> Unknown colour name: f&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>In order to prevent such clashes between identity scales that map nothing and regular scales, we have changed how &amp;lsquo;AsIs&amp;rsquo; variables interact with scales. Instead of adding an identity scale, &amp;lsquo;AsIs&amp;rsquo; variables are now altogether &lt;em>ignored&lt;/em> by the scale systems. On the surface, the new behaviour is very similar to the old one, in that for example literal colours are used. However, with &amp;lsquo;AsIs&amp;rsquo; variables ignored, you can now freely combine layers with &amp;lsquo;AsIs&amp;rsquo; input with layers that map input. If you need a legend for the literal variable, we recommend to use the identity scale mechanism instead.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mpg&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>displ&lt;/span>, &lt;span class='nv'>hwy&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>colour &lt;span class='o'>=&lt;/span> &lt;span class='nv'>drv&lt;/span>&lt;span class='o'>)&lt;/span>, shape &lt;span class='o'>=&lt;/span> &lt;span class='m'>1&lt;/span>, size &lt;span class='o'>=&lt;/span> &lt;span class='m'>5&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>colour &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/AsIs.html'>I&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>my_colours&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>, show.legend &lt;span class='o'>=&lt;/span> &lt;span class='kc'>FALSE&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/asis_aesthetic-1.png" alt="Scatterplot of engine displacement versus highway miles per gallon. Every point has two circles: a smaller one in red, green or blue and a larger one mapped to the 'drv' variable." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>Perhaps more salient than avoid scale clashes, is that the same applies to the &lt;code>x&lt;/code> and &lt;code>y&lt;/code> position aesthetics. There has never been a &lt;code>scale_x_identity()&lt;/code> or &lt;code>scale_y_identity()&lt;/code> function, so what this means may be unexpected. Internally, scales transform every continuous variable to the 0-1 range before drawing the graphics. So too do &amp;lsquo;AsIs&amp;rsquo; position aesthetics work: you can use numbers between 0 and 1 to set the position. These positions are relative to the plot&amp;rsquo;s panel and this mechanism opens up a great way to add plot annotations that are independent of the data.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>t&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/seq.html'>seq&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0&lt;/span>, &lt;span class='m'>2&lt;/span> &lt;span class='o'>*&lt;/span> &lt;span class='nv'>pi&lt;/span>, length.out &lt;span class='o'>=&lt;/span> &lt;span class='m'>100&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mpg&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>displ&lt;/span>, &lt;span class='nv'>hwy&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>colour &lt;span class='o'>=&lt;/span> &lt;span class='s'>"grey50"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/annotate.html'>annotate&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> &lt;span class='s'>"rect"&lt;/span>, &lt;/span>
&lt;span> xmin &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/AsIs.html'>I&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0.05&lt;/span>&lt;span class='o'>)&lt;/span>, xmax &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/AsIs.html'>I&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0.95&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> ymin &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/AsIs.html'>I&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0.05&lt;/span>&lt;span class='o'>)&lt;/span>, ymax &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/AsIs.html'>I&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0.95&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> fill &lt;span class='o'>=&lt;/span> &lt;span class='kc'>NA&lt;/span>, colour &lt;span class='o'>=&lt;/span> &lt;span class='s'>"red"&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/annotate.html'>annotate&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> &lt;span class='s'>"path"&lt;/span>,&lt;/span>
&lt;span> x &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/AsIs.html'>I&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/Trig.html'>cos&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>t&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>/&lt;/span> &lt;span class='m'>2&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='m'>0.5&lt;/span>&lt;span class='o'>)&lt;/span>, y &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/AsIs.html'>I&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/Trig.html'>sin&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>t&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>/&lt;/span> &lt;span class='m'>2&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='m'>0.5&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> colour &lt;span class='o'>=&lt;/span> &lt;span class='s'>"blue"&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/annotate.html'>annotate&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> &lt;span class='s'>"text"&lt;/span>, &lt;/span>
&lt;span> label &lt;span class='o'>=&lt;/span> &lt;span class='s'>"Text in the middle"&lt;/span>,&lt;/span>
&lt;span> x &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/AsIs.html'>I&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0.5&lt;/span>&lt;span class='o'>)&lt;/span>, y &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/AsIs.html'>I&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0.5&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> size &lt;span class='o'>=&lt;/span> &lt;span class='m'>8&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/asis_annotation-1.png" alt="Scatterplot of engine displacement versus highway miles per gallon. The plot has a red rectangle slightly smaller than the panel, a blue circle touching the panel edges and text in the middle that reads: 'text in the middle'." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>Please take note that discrete variables as &amp;lsquo;AsIs&amp;rsquo; position aesthetic have no interpretation and will likely result in errors.&lt;/p>
&lt;h2 id="other-improvements">Other improvements
&lt;a href="#other-improvements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Coordinating text sizes between the theme and
&lt;a href="https://ggplot2.tidyverse.org/reference/geom_text.html" target="_blank" rel="noopener">&lt;code>geom_text()&lt;/code>&lt;/a>/
&lt;a href="https://ggplot2.tidyverse.org/reference/geom_text.html" target="_blank" rel="noopener">&lt;code>geom_label()&lt;/code>&lt;/a> has been a hassle, since the theme uses text sizes in points (pt) and geoms use text size in millimetres. Now, one can control what the &lt;code>size&lt;/code> aesthetic means for text, by setting the &lt;code>size.unit&lt;/code> argument.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>p&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mtcars&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>wt&lt;/span>, &lt;span class='nv'>mpg&lt;/span>, label &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/colnames.html'>rownames&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mtcars&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>p&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_text.html'>geom_text&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>size &lt;span class='o'>=&lt;/span> &lt;span class='m'>10&lt;/span>, size.unit &lt;span class='o'>=&lt;/span> &lt;span class='s'>"pt"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>axis.text &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>size &lt;span class='o'>=&lt;/span> &lt;span class='m'>10&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/size_unit_arg-1.png" alt="A plot showing weight versus miles per gallon with individual cars labelled by text. The text in the plot has the same size as the text labelling the axes." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>Two improvements have been made to
&lt;a href="https://ggplot2.tidyverse.org/reference/geom_text.html" target="_blank" rel="noopener">&lt;code>geom_label()&lt;/code>&lt;/a>. The first is that it now obeys an &lt;code>angle&lt;/code> aesthetic.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>p&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_text.html'>geom_label&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>angle &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/stats/Uniform.html'>runif&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/nrow.html'>nrow&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mtcars&lt;/span>&lt;span class='o'>)&lt;/span>, &lt;span class='o'>-&lt;/span>&lt;span class='m'>45&lt;/span>, &lt;span class='m'>45&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/label_angle-1.png" alt="A plot showing weight versus miles per gallon with individual cars labelled by textboxes. The textboxes are displayed in different angles." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>In addition,
&lt;a href="https://ggplot2.tidyverse.org/reference/geom_text.html" target="_blank" rel="noopener">&lt;code>geom_label()&lt;/code>&lt;/a>&amp;lsquo;s &lt;code>label.padding&lt;/code> argument can be controlled individually for every side of the text by using the
&lt;a href="https://ggplot2.tidyverse.org/reference/element.html" target="_blank" rel="noopener">&lt;code>margin()&lt;/code>&lt;/a> function. The legend keys for labels has also changed to reflect the geom more accurately.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>p&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_text.html'>geom_label&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>colour &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/factor.html'>factor&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>cyl&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>, &lt;/span>
&lt;span> label.padding &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>margin&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>t &lt;span class='o'>=&lt;/span> &lt;span class='m'>2&lt;/span>, r &lt;span class='o'>=&lt;/span> &lt;span class='m'>20&lt;/span>, b &lt;span class='o'>=&lt;/span> &lt;span class='m'>1&lt;/span>, l &lt;span class='o'>=&lt;/span> &lt;span class='m'>0&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/label_padding-1.png" alt="A plot showing weight versus miles per gallon with individual cars labelled by textboxes. The textboxes have a large margin on the right." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>Like
&lt;a href="https://ggplot2.tidyverse.org/reference/geom_density.html" target="_blank" rel="noopener">&lt;code>geom_density()&lt;/code>&lt;/a> before it,
&lt;a href="https://ggplot2.tidyverse.org/reference/geom_violin.html" target="_blank" rel="noopener">&lt;code>geom_violin()&lt;/code>&lt;/a> now gains a &lt;code>bounds&lt;/code> argument to restrict the range wherein density is estimated.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>df&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/data.frame.html'>data.frame&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> x &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/stats/Beta.html'>rbeta&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>100&lt;/span>, &lt;span class='m'>0.5&lt;/span>, &lt;span class='m'>0.5&lt;/span>&lt;span class='o'>)&lt;/span>, &lt;span class='nf'>&lt;a href='https://rdrr.io/r/stats/Beta.html'>rbeta&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>100&lt;/span>, &lt;span class='m'>1&lt;/span>, &lt;span class='m'>1&lt;/span>&lt;span class='o'>)&lt;/span>, &lt;span class='nf'>&lt;a href='https://rdrr.io/r/stats/Beta.html'>rbeta&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>100&lt;/span>, &lt;span class='m'>2&lt;/span>, &lt;span class='m'>2&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> group &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/rep.html'>rep&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"A"&lt;/span>, &lt;span class='s'>"B"&lt;/span>, &lt;span class='s'>"C"&lt;/span>&lt;span class='o'>)&lt;/span>, each &lt;span class='o'>=&lt;/span> &lt;span class='m'>100&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>df&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>group&lt;/span>, &lt;span class='nv'>x&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_violin.html'>geom_violin&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>bounds &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0&lt;/span>, &lt;span class='m'>1&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/violin_bounds-1.png" alt="Violin plot showing random numbers drawn from beta distributions with different parameters. The ends of the first two violins are flat at the top and bottom." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>The
&lt;a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html" target="_blank" rel="noopener">&lt;code>geom_boxplot()&lt;/code>&lt;/a> has acquired an option to remove (rather than hide) outliers. Setting &lt;code>outliers = FALSE&lt;/code> removes outliers so that the plot limits do not take these into account. For hiding (and not removing) outliers, you can still set &lt;code>outlier.shape = NA&lt;/code>. Also, it has gained a &lt;code>staplewidth&lt;/code> argument that can be used to draw staples: horizontal lines at the end of the boxplot whiskers. The default, &lt;code>staplewidth = 0&lt;/code>, will suppress the staples so your current box plots continue to look the same.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>diamonds&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>cut&lt;/span>, &lt;span class='nv'>price&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_boxplot.html'>geom_boxplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>outliers &lt;span class='o'>=&lt;/span> &lt;span class='kc'>FALSE&lt;/span>, staplewidth &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.5&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/boxplot_outliers_staples-1.png" alt="Boxplot showing the price of diamonds per cut. The y-axis does not go much beyond the whiskers, and whiskers are decorated with a staple." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>The scales functions now do a better job at reporting &lt;em>which&lt;/em> scale has encountered an error.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/scale_brewer.html'>scale_colour_brewer&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>breaks &lt;span class='o'>=&lt;/span> &lt;span class='m'>1&lt;/span>&lt;span class='o'>:&lt;/span>&lt;span class='m'>5&lt;/span>, labels &lt;span class='o'>=&lt;/span> &lt;span class='m'>1&lt;/span>&lt;span class='o'>:&lt;/span>&lt;span class='m'>4&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00; font-weight: bold;'>Error&lt;/span>&lt;span style='font-weight: bold;'> in `scale_colour_brewer()`:&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00;'>!&lt;/span> `breaks` and `labels` must have the same length.&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mpg&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>class&lt;/span>, &lt;span class='nv'>displ&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_boxplot.html'>geom_boxplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/scale_continuous.html'>scale_x_continuous&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00; font-weight: bold;'>Error&lt;/span>&lt;span style='font-weight: bold;'> in `scale_x_continuous()`:&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00;'>!&lt;/span> Discrete values supplied to continuous scale.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BBBB;'>ℹ&lt;/span> Example values: &lt;span style='color: #0000BB;'>"compact"&lt;/span>, &lt;span style='color: #0000BB;'>"compact"&lt;/span>, &lt;span style='color: #0000BB;'>"compact"&lt;/span>, &lt;span style='color: #0000BB;'>"compact"&lt;/span>, and &lt;span style='color: #0000BB;'>"compact"&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>msleep&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>bodywt&lt;/span> &lt;span class='o'>-&lt;/span> &lt;span class='m'>1&lt;/span>, &lt;span class='nv'>brainwt&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>na.rm &lt;span class='o'>=&lt;/span> &lt;span class='kc'>TRUE&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/scale_continuous.html'>scale_x_log10&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; Warning in transformation$transform(x): NaNs produced&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;span class='c'>#&amp;gt; Warning in scale_x_log10(): &lt;span style='color: #00BB00;'>log-10&lt;/span> transformation introduced infinite values.&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/scale_messages-1.png" alt="Scatterplot showing body weight minus one versus brain weight of mammals. The x-axis is log-transformed." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Thank you to all people who have contributed issues, code and comments to this release:&lt;/p>
&lt;p>
&lt;a href="https://github.com/92amartins" target="_blank" rel="noopener">@92amartins&lt;/a>,
&lt;a href="https://github.com/a-torgovitsky" target="_blank" rel="noopener">@a-torgovitsky&lt;/a>,
&lt;a href="https://github.com/aarongraybill" target="_blank" rel="noopener">@aarongraybill&lt;/a>,
&lt;a href="https://github.com/aavogt" target="_blank" rel="noopener">@aavogt&lt;/a>,
&lt;a href="https://github.com/agila5" target="_blank" rel="noopener">@agila5&lt;/a>,
&lt;a href="https://github.com/ahcyip" target="_blank" rel="noopener">@ahcyip&lt;/a>,
&lt;a href="https://github.com/AlexanderCasper" target="_blank" rel="noopener">@AlexanderCasper&lt;/a>,
&lt;a href="https://github.com/alexkrohn" target="_blank" rel="noopener">@alexkrohn&lt;/a>,
&lt;a href="https://github.com/alofting" target="_blank" rel="noopener">@alofting&lt;/a>,
&lt;a href="https://github.com/andrewgustar" target="_blank" rel="noopener">@andrewgustar&lt;/a>,
&lt;a href="https://github.com/antagomir" target="_blank" rel="noopener">@antagomir&lt;/a>,
&lt;a href="https://github.com/aphalo" target="_blank" rel="noopener">@aphalo&lt;/a>,
&lt;a href="https://github.com/Ari04T" target="_blank" rel="noopener">@Ari04T&lt;/a>,
&lt;a href="https://github.com/AroneyS" target="_blank" rel="noopener">@AroneyS&lt;/a>,
&lt;a href="https://github.com/Asa12138" target="_blank" rel="noopener">@Asa12138&lt;/a>,
&lt;a href="https://github.com/ashgreat" target="_blank" rel="noopener">@ashgreat&lt;/a>,
&lt;a href="https://github.com/averissimo" target="_blank" rel="noopener">@averissimo&lt;/a>,
&lt;a href="https://github.com/bakerwm" target="_blank" rel="noopener">@bakerwm&lt;/a>,
&lt;a href="https://github.com/balling-dev" target="_blank" rel="noopener">@balling-dev&lt;/a>,
&lt;a href="https://github.com/banbh" target="_blank" rel="noopener">@banbh&lt;/a>,
&lt;a href="https://github.com/barracuda156" target="_blank" rel="noopener">@barracuda156&lt;/a>,
&lt;a href="https://github.com/BartJanvanRossum" target="_blank" rel="noopener">@BartJanvanRossum&lt;/a>,
&lt;a href="https://github.com/beansrowning" target="_blank" rel="noopener">@beansrowning&lt;/a>,
&lt;a href="https://github.com/benimwolfspelz" target="_blank" rel="noopener">@benimwolfspelz&lt;/a>,
&lt;a href="https://github.com/bfordAIMS" target="_blank" rel="noopener">@bfordAIMS&lt;/a>,
&lt;a href="https://github.com/bguiastr" target="_blank" rel="noopener">@bguiastr&lt;/a>,
&lt;a href="https://github.com/bnicenboim" target="_blank" rel="noopener">@bnicenboim&lt;/a>,
&lt;a href="https://github.com/BrianDiggs" target="_blank" rel="noopener">@BrianDiggs&lt;/a>,
&lt;a href="https://github.com/bsgerber" target="_blank" rel="noopener">@bsgerber&lt;/a>,
&lt;a href="https://github.com/burrapreeti" target="_blank" rel="noopener">@burrapreeti&lt;/a>,
&lt;a href="https://github.com/bwiernik" target="_blank" rel="noopener">@bwiernik&lt;/a>,
&lt;a href="https://github.com/ccsarapas" target="_blank" rel="noopener">@ccsarapas&lt;/a>,
&lt;a href="https://github.com/CGlemser" target="_blank" rel="noopener">@CGlemser&lt;/a>,
&lt;a href="https://github.com/chiajungTung" target="_blank" rel="noopener">@chiajungTung&lt;/a>,
&lt;a href="https://github.com/chipsin87" target="_blank" rel="noopener">@chipsin87&lt;/a>,
&lt;a href="https://github.com/cjvanlissa" target="_blank" rel="noopener">@cjvanlissa&lt;/a>,
&lt;a href="https://github.com/CorradoLanera" target="_blank" rel="noopener">@CorradoLanera&lt;/a>,
&lt;a href="https://github.com/danielneilson" target="_blank" rel="noopener">@danielneilson&lt;/a>,
&lt;a href="https://github.com/danli349" target="_blank" rel="noopener">@danli349&lt;/a>,
&lt;a href="https://github.com/DasHammett" target="_blank" rel="noopener">@DasHammett&lt;/a>,
&lt;a href="https://github.com/davidhodge931" target="_blank" rel="noopener">@davidhodge931&lt;/a>,
&lt;a href="https://github.com/DavisVaughan" target="_blank" rel="noopener">@DavisVaughan&lt;/a>,
&lt;a href="https://github.com/dieghernan" target="_blank" rel="noopener">@dieghernan&lt;/a>,
&lt;a href="https://github.com/Ductmonkey" target="_blank" rel="noopener">@Ductmonkey&lt;/a>,
&lt;a href="https://github.com/edent" target="_blank" rel="noopener">@edent&lt;/a>,
&lt;a href="https://github.com/Elham-adabi" target="_blank" rel="noopener">@Elham-adabi&lt;/a>,
&lt;a href="https://github.com/ELICHOS" target="_blank" rel="noopener">@ELICHOS&lt;/a>,
&lt;a href="https://github.com/eliocamp" target="_blank" rel="noopener">@eliocamp&lt;/a>,
&lt;a href="https://github.com/ellisp" target="_blank" rel="noopener">@ellisp&lt;/a>,
&lt;a href="https://github.com/emuise" target="_blank" rel="noopener">@emuise&lt;/a>,
&lt;a href="https://github.com/erikdeluca" target="_blank" rel="noopener">@erikdeluca&lt;/a>,
&lt;a href="https://github.com/f2il-kieranmace" target="_blank" rel="noopener">@f2il-kieranmace&lt;/a>,
&lt;a href="https://github.com/FDylanT" target="_blank" rel="noopener">@FDylanT&lt;/a>,
&lt;a href="https://github.com/fkohrt" target="_blank" rel="noopener">@fkohrt&lt;/a>,
&lt;a href="https://github.com/francisbarton" target="_blank" rel="noopener">@francisbarton&lt;/a>,
&lt;a href="https://github.com/fredcallaway" target="_blank" rel="noopener">@fredcallaway&lt;/a>,
&lt;a href="https://github.com/frezza-metabolomics" target="_blank" rel="noopener">@frezza-metabolomics&lt;/a>,
&lt;a href="https://github.com/GabrielHoffman" target="_blank" rel="noopener">@GabrielHoffman&lt;/a>,
&lt;a href="https://github.com/gaospecial" target="_blank" rel="noopener">@gaospecial&lt;/a>,
&lt;a href="https://github.com/garyzhubc" target="_blank" rel="noopener">@garyzhubc&lt;/a>,
&lt;a href="https://github.com/gavinsimpson" target="_blank" rel="noopener">@gavinsimpson&lt;/a>,
&lt;a href="https://github.com/Generalized" target="_blank" rel="noopener">@Generalized&lt;/a>,
&lt;a href="https://github.com/ghost" target="_blank" rel="noopener">@ghost&lt;/a>,
&lt;a href="https://github.com/giadasp" target="_blank" rel="noopener">@giadasp&lt;/a>,
&lt;a href="https://github.com/GMSL1" target="_blank" rel="noopener">@GMSL1&lt;/a>,
&lt;a href="https://github.com/grantmcdermott" target="_blank" rel="noopener">@grantmcdermott&lt;/a>,
&lt;a href="https://github.com/hadley" target="_blank" rel="noopener">@hadley&lt;/a>,
&lt;a href="https://github.com/hlynurhallgrims" target="_blank" rel="noopener">@hlynurhallgrims&lt;/a>,
&lt;a href="https://github.com/holgerbrandl" target="_blank" rel="noopener">@holgerbrandl&lt;/a>,
&lt;a href="https://github.com/hpages" target="_blank" rel="noopener">@hpages&lt;/a>,
&lt;a href="https://github.com/HRodenhizer" target="_blank" rel="noopener">@HRodenhizer&lt;/a>,
&lt;a href="https://github.com/hub-shale" target="_blank" rel="noopener">@hub-shale&lt;/a>,
&lt;a href="https://github.com/hughjonesd" target="_blank" rel="noopener">@hughjonesd&lt;/a>,
&lt;a href="https://github.com/ibuiltthis" target="_blank" rel="noopener">@ibuiltthis&lt;/a>,
&lt;a href="https://github.com/ingewortel" target="_blank" rel="noopener">@ingewortel&lt;/a>,
&lt;a href="https://github.com/isaacvock" target="_blank" rel="noopener">@isaacvock&lt;/a>,
&lt;a href="https://github.com/Istalan" target="_blank" rel="noopener">@Istalan&lt;/a>,
&lt;a href="https://github.com/istvankleijn" target="_blank" rel="noopener">@istvankleijn&lt;/a>,
&lt;a href="https://github.com/jacobkasper" target="_blank" rel="noopener">@jacobkasper&lt;/a>,
&lt;a href="https://github.com/jammainen" target="_blank" rel="noopener">@jammainen&lt;/a>,
&lt;a href="https://github.com/jan-glx" target="_blank" rel="noopener">@jan-glx&lt;/a>,
&lt;a href="https://github.com/JaredAllen2" target="_blank" rel="noopener">@JaredAllen2&lt;/a>,
&lt;a href="https://github.com/jashapiro" target="_blank" rel="noopener">@jashapiro&lt;/a>,
&lt;a href="https://github.com/jimjam-slam" target="_blank" rel="noopener">@jimjam-slam&lt;/a>,
&lt;a href="https://github.com/jmuhlenkamp" target="_blank" rel="noopener">@jmuhlenkamp&lt;/a>,
&lt;a href="https://github.com/jonspring" target="_blank" rel="noopener">@jonspring&lt;/a>,
&lt;a href="https://github.com/JorisChau" target="_blank" rel="noopener">@JorisChau&lt;/a>,
&lt;a href="https://github.com/joshhwuu" target="_blank" rel="noopener">@joshhwuu&lt;/a>,
&lt;a href="https://github.com/jpeasari" target="_blank" rel="noopener">@jpeasari&lt;/a>,
&lt;a href="https://github.com/jromanowska" target="_blank" rel="noopener">@jromanowska&lt;/a>,
&lt;a href="https://github.com/jsacerot" target="_blank" rel="noopener">@jsacerot&lt;/a>,
&lt;a href="https://github.com/jtlandis" target="_blank" rel="noopener">@jtlandis&lt;/a>,
&lt;a href="https://github.com/jtr13" target="_blank" rel="noopener">@jtr13&lt;/a>,
&lt;a href="https://github.com/jttoivon" target="_blank" rel="noopener">@jttoivon&lt;/a>,
&lt;a href="https://github.com/karchern" target="_blank" rel="noopener">@karchern&lt;/a>,
&lt;a href="https://github.com/klin333" target="_blank" rel="noopener">@klin333&lt;/a>,
&lt;a href="https://github.com/kmavrommatis" target="_blank" rel="noopener">@kmavrommatis&lt;/a>,
&lt;a href="https://github.com/kramerrs" target="_blank" rel="noopener">@kramerrs&lt;/a>,
&lt;a href="https://github.com/krlmlr" target="_blank" rel="noopener">@krlmlr&lt;/a>,
&lt;a href="https://github.com/kylebutts" target="_blank" rel="noopener">@kylebutts&lt;/a>,
&lt;a href="https://github.com/larmarange" target="_blank" rel="noopener">@larmarange&lt;/a>,
&lt;a href="https://github.com/latot" target="_blank" rel="noopener">@latot&lt;/a>,
&lt;a href="https://github.com/lhami" target="_blank" rel="noopener">@lhami&lt;/a>,
&lt;a href="https://github.com/liang09255" target="_blank" rel="noopener">@liang09255&lt;/a>,
&lt;a href="https://github.com/linzi-sg" target="_blank" rel="noopener">@linzi-sg&lt;/a>,
&lt;a href="https://github.com/lionel-" target="_blank" rel="noopener">@lionel-&lt;/a>,
&lt;a href="https://github.com/lnarwhale" target="_blank" rel="noopener">@lnarwhale&lt;/a>,
&lt;a href="https://github.com/manjumc1975" target="_blank" rel="noopener">@manjumc1975&lt;/a>,
&lt;a href="https://github.com/mariadelmarq" target="_blank" rel="noopener">@mariadelmarq&lt;/a>,
&lt;a href="https://github.com/matanhakim" target="_blank" rel="noopener">@matanhakim&lt;/a>,
&lt;a href="https://github.com/math-mcshane" target="_blank" rel="noopener">@math-mcshane&lt;/a>,
&lt;a href="https://github.com/mattgalbraith" target="_blank" rel="noopener">@mattgalbraith&lt;/a>,
&lt;a href="https://github.com/matthewjnield" target="_blank" rel="noopener">@matthewjnield&lt;/a>,
&lt;a href="https://github.com/mcwayrm" target="_blank" rel="noopener">@mcwayrm&lt;/a>,
&lt;a href="https://github.com/melissagwolf" target="_blank" rel="noopener">@melissagwolf&lt;/a>,
&lt;a href="https://github.com/MichaelChirico" target="_blank" rel="noopener">@MichaelChirico&lt;/a>,
&lt;a href="https://github.com/MikkoVihtakari" target="_blank" rel="noopener">@MikkoVihtakari&lt;/a>,
&lt;a href="https://github.com/MjelleLab" target="_blank" rel="noopener">@MjelleLab&lt;/a>,
&lt;a href="https://github.com/mjskay" target="_blank" rel="noopener">@mjskay&lt;/a>,
&lt;a href="https://github.com/mkoohafkan" target="_blank" rel="noopener">@mkoohafkan&lt;/a>,
&lt;a href="https://github.com/mmokrejs" target="_blank" rel="noopener">@mmokrejs&lt;/a>,
&lt;a href="https://github.com/modmost" target="_blank" rel="noopener">@modmost&lt;/a>,
&lt;a href="https://github.com/moodymudskipper" target="_blank" rel="noopener">@moodymudskipper&lt;/a>,
&lt;a href="https://github.com/morrisseyj" target="_blank" rel="noopener">@morrisseyj&lt;/a>,
&lt;a href="https://github.com/mps9506" target="_blank" rel="noopener">@mps9506&lt;/a>,
&lt;a href="https://github.com/Nh-code" target="_blank" rel="noopener">@Nh-code&lt;/a>,
&lt;a href="https://github.com/njtierney" target="_blank" rel="noopener">@njtierney&lt;/a>,
&lt;a href="https://github.com/oliviercailloux" target="_blank" rel="noopener">@oliviercailloux&lt;/a>,
&lt;a href="https://github.com/olivroy" target="_blank" rel="noopener">@olivroy&lt;/a>,
&lt;a href="https://github.com/otaviolovison" target="_blank" rel="noopener">@otaviolovison&lt;/a>,
&lt;a href="https://github.com/pablobernabeu" target="_blank" rel="noopener">@pablobernabeu&lt;/a>,
&lt;a href="https://github.com/paulatn240" target="_blank" rel="noopener">@paulatn240&lt;/a>,
&lt;a href="https://github.com/phauchamps" target="_blank" rel="noopener">@phauchamps&lt;/a>,
&lt;a href="https://github.com/quantixed" target="_blank" rel="noopener">@quantixed&lt;/a>,
&lt;a href="https://github.com/ralmond" target="_blank" rel="noopener">@ralmond&lt;/a>,
&lt;a href="https://github.com/ramiromagno" target="_blank" rel="noopener">@ramiromagno&lt;/a>,
&lt;a href="https://github.com/reallzg" target="_blank" rel="noopener">@reallzg&lt;/a>,
&lt;a href="https://github.com/retodomax" target="_blank" rel="noopener">@retodomax&lt;/a>,
&lt;a href="https://github.com/robbiebatley" target="_blank" rel="noopener">@robbiebatley&lt;/a>,
&lt;a href="https://github.com/Rong-Zh" target="_blank" rel="noopener">@Rong-Zh&lt;/a>,
&lt;a href="https://github.com/rossellhayes" target="_blank" rel="noopener">@rossellhayes&lt;/a>,
&lt;a href="https://github.com/RoyalTS" target="_blank" rel="noopener">@RoyalTS&lt;/a>,
&lt;a href="https://github.com/rvalieris" target="_blank" rel="noopener">@rvalieris&lt;/a>,
&lt;a href="https://github.com/s-andrews" target="_blank" rel="noopener">@s-andrews&lt;/a>,
&lt;a href="https://github.com/s-elsheikh" target="_blank" rel="noopener">@s-elsheikh&lt;/a>,
&lt;a href="https://github.com/schloerke" target="_blank" rel="noopener">@schloerke&lt;/a>,
&lt;a href="https://github.com/Sckende" target="_blank" rel="noopener">@Sckende&lt;/a>,
&lt;a href="https://github.com/sdmason" target="_blank" rel="noopener">@sdmason&lt;/a>,
&lt;a href="https://github.com/sirallen" target="_blank" rel="noopener">@sirallen&lt;/a>,
&lt;a href="https://github.com/slowkow" target="_blank" rel="noopener">@slowkow&lt;/a>,
&lt;a href="https://github.com/spaette" target="_blank" rel="noopener">@spaette&lt;/a>,
&lt;a href="https://github.com/steveharoz" target="_blank" rel="noopener">@steveharoz&lt;/a>,
&lt;a href="https://github.com/sunroofgod" target="_blank" rel="noopener">@sunroofgod&lt;/a>,
&lt;a href="https://github.com/szimmer" target="_blank" rel="noopener">@szimmer&lt;/a>,
&lt;a href="https://github.com/tbates" target="_blank" rel="noopener">@tbates&lt;/a>,
&lt;a href="https://github.com/teunbrand" target="_blank" rel="noopener">@teunbrand&lt;/a>,
&lt;a href="https://github.com/tfjaeger" target="_blank" rel="noopener">@tfjaeger&lt;/a>,
&lt;a href="https://github.com/thomasp85" target="_blank" rel="noopener">@thomasp85&lt;/a>,
&lt;a href="https://github.com/TimBMK" target="_blank" rel="noopener">@TimBMK&lt;/a>,
&lt;a href="https://github.com/TimTaylor" target="_blank" rel="noopener">@TimTaylor&lt;/a>,
&lt;a href="https://github.com/tjebo" target="_blank" rel="noopener">@tjebo&lt;/a>,
&lt;a href="https://github.com/trekonom" target="_blank" rel="noopener">@trekonom&lt;/a>,
&lt;a href="https://github.com/tungttnguyen" target="_blank" rel="noopener">@tungttnguyen&lt;/a>,
&lt;a href="https://github.com/twest820" target="_blank" rel="noopener">@twest820&lt;/a>,
&lt;a href="https://github.com/UliSchopp" target="_blank" rel="noopener">@UliSchopp&lt;/a>,
&lt;a href="https://github.com/vnijs" target="_blank" rel="noopener">@vnijs&lt;/a>,
&lt;a href="https://github.com/warnes" target="_blank" rel="noopener">@warnes&lt;/a>,
&lt;a href="https://github.com/wbvguo" target="_blank" rel="noopener">@wbvguo&lt;/a>,
&lt;a href="https://github.com/willgearty" target="_blank" rel="noopener">@willgearty&lt;/a>,
&lt;a href="https://github.com/Yann-C-INN" target="_blank" rel="noopener">@Yann-C-INN&lt;/a>,
&lt;a href="https://github.com/yannk-lm" target="_blank" rel="noopener">@yannk-lm&lt;/a>,
&lt;a href="https://github.com/Yunuuuu" target="_blank" rel="noopener">@Yunuuuu&lt;/a>,
&lt;a href="https://github.com/yutannihilation" target="_blank" rel="noopener">@yutannihilation&lt;/a>,
&lt;a href="https://github.com/yuw444" target="_blank" rel="noopener">@yuw444&lt;/a>,
&lt;a href="https://github.com/zekiakyol" target="_blank" rel="noopener">@zekiakyol&lt;/a>, and
&lt;a href="https://github.com/zhenglukai" target="_blank" rel="noopener">@zhenglukai&lt;/a>.&lt;/p></description></item><item><title>ggplot2 3.4.0</title><link>https://www.tidyverse.org/blog/2022/11/ggplot2-3-4-0/</link><pubDate>Mon, 07 Nov 2022 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2022/11/ggplot2-3-4-0/</guid><description>&lt;!--
TODO:
* [ ] Look over / edit the post's title in the yaml
* [ ] Edit (or delete) the description; note this appears in the Twitter card
* [ ] Pick category and tags (see existing with [`hugodown::tidy_show_meta()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html))
* [ ] Find photo &amp; update yaml metadata
* [ ] Create `thumbnail-sq.jpg`; height and width should be equal
* [ ] Create `thumbnail-wd.jpg`; width should be >5x height
* [ ] [`hugodown::use_tidy_thumbnails()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html)
* [ ] Add intro sentence, e.g. the standard tagline for the package
* [ ] [`usethis::use_tidy_thanks()`](https://usethis.r-lib.org/reference/use_tidy_thanks.html)
-->
&lt;p>We&amp;rsquo;re so happy to announce the release of
&lt;a href="https://ggplot2.tidyverse.org" target="_blank" rel="noopener">ggplot2&lt;/a> 3.4.0 on CRAN. ggplot2 is a system for declaratively creating graphics, based on The Grammar of Graphics. You provide the data, tell ggplot2 how to map variables to aesthetics, what graphical primitives to use, and it takes care of the details. The new version can be installed from CRAN using &lt;code>install.packages(&amp;quot;ggplot2&amp;quot;)&lt;/code>.&lt;/p>
&lt;p>This release is not full of exciting new features. Instead we have focused on the internals, tightening up of the API, and improving the messaging, especially when it comes to errors and warnings. While the release also contains a few new features these other aspects are the stars of this release.&lt;/p>
&lt;p>You can see a full list of changes in the
&lt;a href="https://ggplot2.tidyverse.org/news/index.html" target="_blank" rel="noopener">release notes&lt;/a>&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://ggplot2.tidyverse.org'>ggplot2&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://patchwork.data-imaginist.com'>patchwork&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://dplyr.tidyverse.org'>dplyr&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;h2 id="hello-linewidth">Hello &lt;code>linewidth&lt;/code>
&lt;a href="#hello-linewidth">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Arguably the biggest user.visible change in this release is the introduction of a new fundamental aesthetic. From this release on, &lt;code>linewidth&lt;/code> will take over sizing of the width of lines&amp;mdash;something that was earlier handled by &lt;code>size&lt;/code>. The reason for this change is that prior to this release &lt;code>size&lt;/code> was used for two related, but different, properties: the size of points (and glyphs) and the width of lines. Since one is area based and one is length based they fundamentally needs different scaling and the default size scale has always catered to area sizing, using a square root transform. This conflation has also made it hard for composite geoms like
&lt;a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html" target="_blank" rel="noopener">&lt;code>geom_pointrange()&lt;/code>&lt;/a> to control the line width and point size separately.&lt;/p>
&lt;p>There is not much to discuss when it comes to how to use this &amp;ldquo;feature&amp;rdquo;, as it is a matter of switching out &lt;code>size&lt;/code> with &lt;code>linewidth&lt;/code> whenever you target stroke sizing:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>airquality&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_path.html'>geom_line&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>Day&lt;/span>, &lt;span class='nv'>Temp&lt;/span>, linewidth &lt;span class='o'>=&lt;/span> &lt;span class='nv'>Month&lt;/span>, group &lt;span class='o'>=&lt;/span> &lt;span class='nv'>Month&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/scale_linewidth.html'>scale_linewidth&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>range &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0.5&lt;/span>, &lt;span class='m'>3&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-1-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>Now, changing such a fundamental thing when a package is as old and widely used as ggplot2 is no small undertaking, and I wish it had been done earlier, but better late than never. We have gone to great lengths to ensure that old code continues to work. For the most part using size will continue to behave like before:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>airquality&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_path.html'>geom_line&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>Day&lt;/span>, &lt;span class='nv'>Temp&lt;/span>, size &lt;span class='o'>=&lt;/span> &lt;span class='nv'>Month&lt;/span>, group &lt;span class='o'>=&lt;/span> &lt;span class='nv'>Month&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/scale_size.html'>scale_size&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>range &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0.5&lt;/span>, &lt;span class='m'>3&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BBBB;'>ℹ&lt;/span> Please use `linewidth` instead.&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-2-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>As you can see you get the expected plot but also gets a deprecation warning asking you to update your code. Comparing the two legends we can also see the discrepancy in scaling that we discussed above, showing a much more even progression with &lt;code>linewidth&lt;/code>.&lt;/p>
&lt;p>All of this should work with all the geoms provided by ggplot2 (and we have described
&lt;a href="https://www.tidyverse.org/blog/2022/08/ggplot2-3-4-0-size-to-linewidth/" target="_blank" rel="noopener">a clear upgrade path for extension developers to adopt this&lt;/a>), except for a few instances where &lt;code>size&lt;/code> remains a valid aesthetic for the geom. In these cases you will not get a deprecation warning and your output may change in look when running old code. The two geoms this concerns are
&lt;a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html" target="_blank" rel="noopener">&lt;code>geom_pointrange()&lt;/code>&lt;/a> and
&lt;a href="https://ggplot2.tidyverse.org/reference/ggsf.html" target="_blank" rel="noopener">&lt;code>geom_sf()&lt;/code>&lt;/a> which both continues to use &lt;code>size&lt;/code> to scale points. Comparing the output from e.g. 
&lt;a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html" target="_blank" rel="noopener">&lt;code>geom_pointrange()&lt;/code>&lt;/a> we can see how using &lt;code>size&lt;/code> now only targets the point and not the line:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>airquality&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_linerange.html'>geom_pointrange&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/factor.html'>factor&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>Month&lt;/span>&lt;span class='o'>)&lt;/span>, y &lt;span class='o'>=&lt;/span> &lt;span class='nv'>Temp&lt;/span>&lt;span class='o'>)&lt;/span>, stat &lt;span class='o'>=&lt;/span> &lt;span class='s'>"summary"&lt;/span>, size &lt;span class='o'>=&lt;/span> &lt;span class='m'>2&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; No summary function supplied, defaulting to `mean_se()`&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-3-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>We recognize that introducing silent visual changes like this is not optimal but we weighted both sides and decided that it was better in the long run to rip the band-aid off and commit fully to the &lt;code>linewidth&lt;/code> change in one release.&lt;/p>
&lt;p>The switch to &lt;code>linewidth&lt;/code> goes beyond aesthetics and should target every part of the API that have used &lt;code>size&lt;/code> to target line width. This is mostly present in theming where
&lt;a href="https://ggplot2.tidyverse.org/reference/element.html" target="_blank" rel="noopener">&lt;code>element_rect()&lt;/code>&lt;/a> and
&lt;a href="https://ggplot2.tidyverse.org/reference/element.html" target="_blank" rel="noopener">&lt;code>element_line()&lt;/code>&lt;/a> now uses &lt;code>linewidth&lt;/code> as argument instead of &lt;code>size&lt;/code>. As above a deprecation warning will inform you of this change:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mtcars&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='nv'>mpg&lt;/span>, y &lt;span class='o'>=&lt;/span> &lt;span class='nv'>disp&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>panel.grid &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>element_line&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>linewidth &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.2&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-4-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>We have done our best to ensure that it is easy for our extension developers to follow the path laid out by ggplot2 when it comes to embracing the new aesthetic, but you will probably experience a period of discrepancy between some of your favorite extensions and ggplot2. I have full confidence that our amazing extension developers will adapt quickly so that period will probably be short.&lt;/p>
&lt;h3 id="on-the-topic-of-line-width">On the topic of line width
&lt;a href="#on-the-topic-of-line-width">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>We have made a few other internal changes when it comes to line widths. The biggest of these are perhaps a new default for polygon line width in
&lt;a href="https://ggplot2.tidyverse.org/reference/ggsf.html" target="_blank" rel="noopener">&lt;code>geom_sf()&lt;/code>&lt;/a>. The change came about as we already had induced visual changes to old code due to the &lt;code>linewidth&lt;/code> aesthetic introduction and based on feedback from the spatial community we saw that &lt;code>size&lt;/code> was most often used to thin the polygon borders. The new default is 0.2 (down from 0.5) and hopefully strikes a nice balance:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>nc&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>sf&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://r-spatial.github.io/sf/reference/st_read.html'>st_read&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/system.file.html'>system.file&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"shape/nc.shp"&lt;/span>, package &lt;span class='o'>=&lt;/span> &lt;span class='s'>"sf"&lt;/span>&lt;span class='o'>)&lt;/span>, quiet &lt;span class='o'>=&lt;/span> &lt;span class='kc'>TRUE&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>p1&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>nc&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggsf.html'>geom_sf&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>linewidth &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.5&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"Old default"&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>p2&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>nc&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggsf.html'>geom_sf&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"New default"&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>p1&lt;/span>&lt;span class='o'>/&lt;/span>&lt;span class='nv'>p2&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-5-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>More minor is a small fix we did to
&lt;a href="https://ggplot2.tidyverse.org/reference/guide_colourbar.html" target="_blank" rel="noopener">&lt;code>guide_colorbar()&lt;/code>&lt;/a> where it was brought to our attention that the &lt;code>ticks.linewidth&lt;/code> and &lt;code>frame.linewidth&lt;/code> weren&amp;rsquo;t given in the same unit as every other line width in ggplot2. This has been corrected and the default has been adjusted to retain the same look but if you have given these specifically in your code you are likely to notice a visual change.&lt;/p>
&lt;h2 id="other-breaking-changes">Other breaking changes
&lt;a href="#other-breaking-changes">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>In the grab-bag of breaking changes we have now formally deprecated
&lt;a href="https://ggplot2.tidyverse.org/reference/qplot.html" target="_blank" rel="noopener">&lt;code>qplot()&lt;/code>&lt;/a>. It will continue to work as always but will be a bit noisy about it. Don&amp;rsquo;t expect the function to disappear, but the deprecation signals that we don&amp;rsquo;t intend to do further work on
&lt;a href="https://ggplot2.tidyverse.org/reference/qplot.html" target="_blank" rel="noopener">&lt;code>qplot()&lt;/code>&lt;/a> to keep it current with new features etc. In the same vein,
&lt;a href="https://ggplot2.tidyverse.org/reference/aes_eval.html" target="_blank" rel="noopener">&lt;code>stat()&lt;/code>&lt;/a> and &lt;code>..var..&lt;/code> for marking aesthetics from stats are also formally deprecated in favor of
&lt;a href="https://ggplot2.tidyverse.org/reference/aes_eval.html" target="_blank" rel="noopener">&lt;code>after_stat()&lt;/code>&lt;/a>. Again, the result is that using these old APIs will be noisy but still work.&lt;/p>
&lt;p>On the topic of
&lt;a href="https://ggplot2.tidyverse.org/reference/aes_eval.html" target="_blank" rel="noopener">&lt;code>after_stat()&lt;/code>&lt;/a>, the values and computations inside of it now use the un-transformed variables rather than the transformed ones. This is a bit esoteric and only applies to aesthetics that have had a scale transformation applied to them, so you may never notice.&lt;/p>
&lt;p>Lastly, we have made a switch to using
&lt;a href="https://rlang.r-lib.org/reference/hash.html" target="_blank" rel="noopener">&lt;code>rlang::hash()&lt;/code>&lt;/a> instead of
&lt;a href="https://rdrr.io/pkg/digest/man/digest.html" target="_blank" rel="noopener">&lt;code>digest::digest()&lt;/code>&lt;/a> which may result in the automatic ordering of legends changing, again a pretty minor change. If you care about the ordering of the legends you can always take control of it using the &lt;code>order&lt;/code> argument inside the different &lt;code>guide_*()&lt;/code> constructors.&lt;/p>
&lt;h2 id="better-errors">Better errors
&lt;a href="#better-errors">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>One of the most substantial changes in usability in this release is a complete rewrite of the errors and warnings. This goes deeper than changing wordings as the messaging is now based on the signal handling in the
&lt;a href="https://cli.r-lib.org" target="_blank" rel="noopener">cli&lt;/a> package that provides rich text formatting and better ways to guide the user to a resolution. Consider the following easy to make mistake of using the pipe instead of &lt;code>+&lt;/code>:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mtcars&lt;/span>&lt;span class='o'>)&lt;/span> |&amp;gt;
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mpg&lt;/span>, &lt;span class='nv'>disp&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00; font-weight: bold;'>Error&lt;/span>&lt;span style='font-weight: bold;'> in `geom_point()`:&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00;'>!&lt;/span> `mapping` must be created by `aes()`&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BBBB;'>ℹ&lt;/span> Did you use `%&amp;gt;%` or `|&amp;gt;` instead of `+`?&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>As can be seen, the error now clearly states where it is happening, then tells you what is wrong, and lastly gives you a hint at what might be the solution.&lt;/p>
&lt;p>However, this is not all. One of the biggest issues with error reporting in ggplot2 is that most code is evaluated during rendering, not when the API calls are made. Because of this it has been difficult to link a user error in a geom specification to the actual error message that arises. This could send the user on a treasure hunt to identify what to change in order to fix the code. With the changes in 3.4.0 we are now much better at directing the user to the right place in their code when errors in the rendering happens:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>huron&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/data.frame.html'>data.frame&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>year &lt;span class='o'>=&lt;/span> &lt;span class='m'>1875&lt;/span>&lt;span class='o'>:&lt;/span>&lt;span class='m'>1972&lt;/span>, level &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/vector.html'>as.vector&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>LakeHuron&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>huron&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_path.html'>geom_line&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>year&lt;/span>, &lt;span class='nv'>level&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_ribbon.html'>geom_ribbon&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>year&lt;/span>, xmin &lt;span class='o'>=&lt;/span> &lt;span class='nv'>level&lt;/span> &lt;span class='o'>-&lt;/span> &lt;span class='m'>5&lt;/span>, xmax &lt;span class='o'>=&lt;/span> &lt;span class='nv'>level&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='m'>5&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00; font-weight: bold;'>Error&lt;/span>&lt;span style='font-weight: bold;'> in `geom_ribbon()`:&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00;'>!&lt;/span> Problem while setting up geom.&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BBBB;'>ℹ&lt;/span> Error occurred in the 2nd layer.&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='font-weight: bold;'>Caused by error in `compute_geom_1()` at &lt;/span>&lt;a href='file:///Users/thomas/Dropbox/GitHub/ggplot2/R/ggproto.r'>&lt;span style='font-weight: bold;'>ggplot2/R/ggproto.r:182:16&lt;/span>&lt;/a>&lt;span style='font-weight: bold;'>:&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00;'>!&lt;/span> `geom_ribbon()` requires the following missing aesthetics: &lt;span style='color: #00BB00;'>ymin&lt;/span> and&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BB00;'>ymax&lt;/span> &lt;span style='font-weight: bold;'>or&lt;/span> &lt;span style='color: #00BB00;'>y&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>We can see that the error message correctly identifies the geom responsible for the layer, communicates during what part of the rendering it happened during, and points to the index of the layer in the case that multiple layers from the same geom have been used. Lastly it shows the original error that can help you with solving the issue.&lt;/p>
&lt;p>Hopefully the changes goes a long way to make ggplot2 even more welcoming to new and seasoned users alike. However, this effort is never done and we continue to appreciate issues in the github repository pointing out unhelpful errors or warnings that arises so that we may improve it further.&lt;/p>
&lt;h2 id="vctrs-inside">vctrs inside
&lt;a href="#vctrs-inside">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>The last part of the large housekeeping changes in this release is that ggplot2 finally embraces
&lt;a href="https://vctrs.r-lib.org" target="_blank" rel="noopener">vctrs&lt;/a> and uses it&amp;rsquo;s functions internally primarily for binding data together. Apart from a nice bump in rendering speed it also means that we now better support data types built upon vctrs and subscribe to the more well-defined coercion rules that it provides. The last point is a double edged sword though, as your code may contain a diverse mix of data types in different layers that worked before but doesn&amp;rsquo;t align with the strictness of vctrs. While we have gone to lengths to ensure that your code still works you will begin to see deprecation notices if you e.g. factor on a variable that is incompatible across layers:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>labels&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/data.frame.html'>data.frame&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
label &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/paste.html'>paste&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"gear"&lt;/span>, &lt;span class='m'>3&lt;/span>&lt;span class='o'>:&lt;/span>&lt;span class='m'>5&lt;/span>&lt;span class='o'>)&lt;/span>,
gear &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/character.html'>as.character&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>3&lt;/span>&lt;span class='o'>:&lt;/span>&lt;span class='m'>5&lt;/span>&lt;span class='o'>)&lt;/span>,
x &lt;span class='o'>=&lt;/span> &lt;span class='m'>100&lt;/span>,
y &lt;span class='o'>=&lt;/span> &lt;span class='m'>11&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mtcars&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>disp&lt;/span>, &lt;span class='nv'>mpg&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_text.html'>geom_text&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>x&lt;/span>, &lt;span class='nv'>y&lt;/span>, label &lt;span class='o'>=&lt;/span> &lt;span class='nv'>label&lt;/span>&lt;span class='o'>)&lt;/span>, &lt;span class='nv'>labels&lt;/span>, hjust &lt;span class='o'>=&lt;/span> &lt;span class='s'>"left"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/facet_wrap.html'>facet_wrap&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>~&lt;/span>&lt;span class='nv'>gear&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; Warning: Combining variables of class &amp;lt;numeric&amp;gt; and &amp;lt;character&amp;gt; was deprecated in&lt;/span>
&lt;span class='c'>#&amp;gt; ggplot2 3.4.0.&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BBBB;'>ℹ&lt;/span> Please ensure your variables are compatible before plotting (location:&lt;/span>
&lt;span class='c'>#&amp;gt; `combine_vars()`)&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-8-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>While this may seem like an unnecessary annoyance we hope that you&amp;rsquo;ll learn to appreciate that this strictness can save you from silent bugs where you end up combining variables that are basically incompatible.&lt;/p>
&lt;h2 id="new-features">New features
&lt;a href="#new-features">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>While most of the focus has been on internal housekeeping in this release a few new features has also crept in, courtesy of our amazing contributors from the community:&lt;/p>
&lt;h3 id="stacking-non-aligned-data">Stacking non-aligned data
&lt;a href="#stacking-non-aligned-data">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>
&lt;a href="https://ggplot2.tidyverse.org/reference/position_stack.html" target="_blank" rel="noopener">&lt;code>position_stack()&lt;/code>&lt;/a> has always required that groups share a common x-value to be stacked. The nature of most time series data etc. makes it so that this is often the case, but not always. We have now introduced a
&lt;a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html" target="_blank" rel="noopener">&lt;code>stat_align()&lt;/code>&lt;/a> that takes care of interpolating y-values in each group at every unique x-value in the data so that they can be stacked. This stat is now the default for
&lt;a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html" target="_blank" rel="noopener">&lt;code>geom_area()&lt;/code>&lt;/a>:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>df&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>tibble&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://tibble.tidyverse.org/reference/tribble.html'>tribble&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
&lt;span class='o'>~&lt;/span>&lt;span class='nv'>g&lt;/span>, &lt;span class='o'>~&lt;/span>&lt;span class='nv'>x&lt;/span>, &lt;span class='o'>~&lt;/span>&lt;span class='nv'>y&lt;/span>,
&lt;span class='s'>"a"&lt;/span>, &lt;span class='m'>1&lt;/span>, &lt;span class='m'>2&lt;/span>,
&lt;span class='s'>"a"&lt;/span>, &lt;span class='m'>3&lt;/span>, &lt;span class='m'>5&lt;/span>,
&lt;span class='s'>"a"&lt;/span>, &lt;span class='m'>5&lt;/span>, &lt;span class='m'>1&lt;/span>,
&lt;span class='s'>"b"&lt;/span>, &lt;span class='m'>2&lt;/span>, &lt;span class='m'>0&lt;/span>,
&lt;span class='s'>"b"&lt;/span>, &lt;span class='m'>4&lt;/span>, &lt;span class='m'>6&lt;/span>,
&lt;span class='s'>"b"&lt;/span>, &lt;span class='m'>6&lt;/span>, &lt;span class='m'>7&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>p1&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>df&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>x&lt;/span>, &lt;span class='nv'>y&lt;/span>, fill &lt;span class='o'>=&lt;/span> &lt;span class='nv'>g&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_ribbon.html'>geom_area&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>stat &lt;span class='o'>=&lt;/span> &lt;span class='s'>"identity"&lt;/span>, alpha &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.5&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"stat_identity()"&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>p2&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>df&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>x&lt;/span>, &lt;span class='nv'>y&lt;/span>, fill &lt;span class='o'>=&lt;/span> &lt;span class='nv'>g&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_ribbon.html'>geom_area&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>alpha &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.5&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"stat_align()"&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='o'>(&lt;/span>&lt;span class='nv'>p1&lt;/span> &lt;span class='o'>|&lt;/span> &lt;span class='nv'>p2&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&amp;amp;&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>legend.position &lt;span class='o'>=&lt;/span> &lt;span class='s'>"none"&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-9-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;h3 id="bounded-density-estimation">Bounded density estimation
&lt;a href="#bounded-density-estimation">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>
&lt;a href="https://ggplot2.tidyverse.org/reference/geom_density.html" target="_blank" rel="noopener">&lt;code>geom_density()&lt;/code>&lt;/a> have gained a &lt;code>bounds&lt;/code> argument allowing you to perform density estimation with bound correction. This can leads to might better edge estimates when bounds are known for a sample:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>data&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/data.frame.html'>data.frame&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/stats/Exponential.html'>rexp&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>100&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>data&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>x&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_density.html'>geom_density&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>colour &lt;span class='o'>=&lt;/span> &lt;span class='s'>"unbounded"&lt;/span>&lt;span class='o'>)&lt;/span>, key_glyph &lt;span class='o'>=&lt;/span> &lt;span class='s'>"path"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_density.html'>geom_density&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>colour &lt;span class='o'>=&lt;/span> &lt;span class='s'>"bounded"&lt;/span>&lt;span class='o'>)&lt;/span>, bounds &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0&lt;/span>, &lt;span class='kc'>Inf&lt;/span>&lt;span class='o'>)&lt;/span>, key_glyph &lt;span class='o'>=&lt;/span> &lt;span class='s'>"path"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_function.html'>stat_function&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>colour &lt;span class='o'>=&lt;/span> &lt;span class='s'>"true distribution"&lt;/span>&lt;span class='o'>)&lt;/span>, fun &lt;span class='o'>=&lt;/span> &lt;span class='nv'>dexp&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_colour_manual&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
name &lt;span class='o'>=&lt;/span> &lt;span class='kc'>NULL&lt;/span>,
values &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"black"&lt;/span>, &lt;span class='s'>"firebrick"&lt;/span>, &lt;span class='s'>"forestgreen"&lt;/span>&lt;span class='o'>)&lt;/span>,
breaks &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"true distribution"&lt;/span>, &lt;span class='s'>"unbounded"&lt;/span>, &lt;span class='s'>"bounded"&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-10-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;h3 id="no-clipping-in-facet-strips">No clipping in facet strips
&lt;a href="#no-clipping-in-facet-strips">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>It is now possible to turn clipping in the facet strips off. For the most part the default works fine but in certain situations you&amp;rsquo;d like the strip text or the border to be seen in full. The new feature is a theme setting:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>p&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>diamonds&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_bar.html'>geom_bar&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>y &lt;span class='o'>=&lt;/span> &lt;span class='nv'>color&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/facet_wrap.html'>facet_wrap&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>~&lt;/span> &lt;span class='nv'>cut&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_minimal&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
strip.background &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>element_rect&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"grey90"&lt;/span>, colour &lt;span class='o'>=&lt;/span> &lt;span class='s'>"grey90"&lt;/span>, linewidth &lt;span class='o'>=&lt;/span> &lt;span class='m'>1&lt;/span>&lt;span class='o'>)&lt;/span>,
axis.line.y &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/element.html'>element_line&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>linewidth &lt;span class='o'>=&lt;/span> &lt;span class='m'>1&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>p&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-11-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>In the (a bit contrived) theme above we see a jarring step between the strip background and the axis line because the border of the strip is clipped to the extent of the strip. We can fix this by turning off clipping:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>p&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>strip.clip &lt;span class='o'>=&lt;/span> &lt;span class='s'>"off"&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-12-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;h3 id="justification-in-geom_bargeom_col">Justification in &lt;code>geom_bar()&lt;/code>/&lt;code>geom_col()&lt;/code>
&lt;a href="#justification-in-geom_bargeom_col">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>You can now specify how the bars in
&lt;a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" target="_blank" rel="noopener">&lt;code>geom_bar()&lt;/code>&lt;/a> should be justified with respect to the position on the axis they are tied to:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>mtcars_centered&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mtcars&lt;/span>, justification &lt;span class='o'>=&lt;/span> &lt;span class='s'>"centered"&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>mtcars_left&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mtcars&lt;/span>, justification &lt;span class='o'>=&lt;/span> &lt;span class='s'>"left aligned"&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>mapping &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='nv'>gear&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_bar.html'>geom_bar&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>data &lt;span class='o'>=&lt;/span> &lt;span class='nv'>mtcars_centered&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_bar.html'>geom_bar&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>data &lt;span class='o'>=&lt;/span> &lt;span class='nv'>mtcars_left&lt;/span>, just &lt;span class='o'>=&lt;/span> &lt;span class='m'>0&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/facet_wrap.html'>facet_wrap&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>~&lt;/span>&lt;span class='nv'>justification&lt;/span>, ncol &lt;span class='o'>=&lt;/span> &lt;span class='m'>1&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-13-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>It goes without saying that you should only do this for good reasons because it goes against how people in general expect bar plots to behave, but for certain layout needs it can be a boon.&lt;/p>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>As always, this release could not be possible without contributions from our amazing community. A huge thanks goes out to everyone who has helped made ggplot2 3.4.0 a reality:&lt;/p>
&lt;p>
&lt;a href="https://github.com/92amartins" target="_blank" rel="noopener">@92amartins&lt;/a>,
&lt;a href="https://github.com/acircleda" target="_blank" rel="noopener">@acircleda&lt;/a>,
&lt;a href="https://github.com/AlgaeKat" target="_blank" rel="noopener">@AlgaeKat&lt;/a>,
&lt;a href="https://github.com/andreaskuepfer" target="_blank" rel="noopener">@andreaskuepfer&lt;/a>,
&lt;a href="https://github.com/angleik" target="_blank" rel="noopener">@angleik&lt;/a>,
&lt;a href="https://github.com/aphalo" target="_blank" rel="noopener">@aphalo&lt;/a>,
&lt;a href="https://github.com/artuurC" target="_blank" rel="noopener">@artuurC&lt;/a>,
&lt;a href="https://github.com/asolisc" target="_blank" rel="noopener">@asolisc&lt;/a>,
&lt;a href="https://github.com/baderstine" target="_blank" rel="noopener">@baderstine&lt;/a>,
&lt;a href="https://github.com/basille" target="_blank" rel="noopener">@basille&lt;/a>,
&lt;a href="https://github.com/bergsmat" target="_blank" rel="noopener">@bergsmat&lt;/a>,
&lt;a href="https://github.com/bersbersbers" target="_blank" rel="noopener">@bersbersbers&lt;/a>,
&lt;a href="https://github.com/billdenney" target="_blank" rel="noopener">@billdenney&lt;/a>,
&lt;a href="https://github.com/brianmsm" target="_blank" rel="noopener">@brianmsm&lt;/a>,
&lt;a href="https://github.com/brunomioto" target="_blank" rel="noopener">@brunomioto&lt;/a>,
&lt;a href="https://github.com/bwiernik" target="_blank" rel="noopener">@bwiernik&lt;/a>,
&lt;a href="https://github.com/capnrefsmmat" target="_blank" rel="noopener">@capnrefsmmat&lt;/a>,
&lt;a href="https://github.com/clauswilke" target="_blank" rel="noopener">@clauswilke&lt;/a>,
&lt;a href="https://github.com/cmartin" target="_blank" rel="noopener">@cmartin&lt;/a>,
&lt;a href="https://github.com/ConchuirohAodha" target="_blank" rel="noopener">@ConchuirohAodha&lt;/a>,
&lt;a href="https://github.com/corybrunson" target="_blank" rel="noopener">@corybrunson&lt;/a>,
&lt;a href="https://github.com/DanChaltiel" target="_blank" rel="noopener">@DanChaltiel&lt;/a>,
&lt;a href="https://github.com/DarioS" target="_blank" rel="noopener">@DarioS&lt;/a>,
&lt;a href="https://github.com/Darxor" target="_blank" rel="noopener">@Darxor&lt;/a>,
&lt;a href="https://github.com/davidchall" target="_blank" rel="noopener">@davidchall&lt;/a>,
&lt;a href="https://github.com/davidhodge931" target="_blank" rel="noopener">@davidhodge931&lt;/a>,
&lt;a href="https://github.com/dhrhzz" target="_blank" rel="noopener">@dhrhzz&lt;/a>,
&lt;a href="https://github.com/DiegoJArg" target="_blank" rel="noopener">@DiegoJArg&lt;/a>,
&lt;a href="https://github.com/DISOhda" target="_blank" rel="noopener">@DISOhda&lt;/a>,
&lt;a href="https://github.com/drtoche" target="_blank" rel="noopener">@drtoche&lt;/a>,
&lt;a href="https://github.com/Enterprise-J" target="_blank" rel="noopener">@Enterprise-J&lt;/a>,
&lt;a href="https://github.com/ewallace" target="_blank" rel="noopener">@ewallace&lt;/a>,
&lt;a href="https://github.com/gbrlrgrs" target="_blank" rel="noopener">@gbrlrgrs&lt;/a>,
&lt;a href="https://github.com/ggrothendieck" target="_blank" rel="noopener">@ggrothendieck&lt;/a>,
&lt;a href="https://github.com/GregorDall" target="_blank" rel="noopener">@GregorDall&lt;/a>,
&lt;a href="https://github.com/hadley" target="_blank" rel="noopener">@hadley&lt;/a>,
&lt;a href="https://github.com/henningpohl" target="_blank" rel="noopener">@henningpohl&lt;/a>,
&lt;a href="https://github.com/Hugh-Mungo" target="_blank" rel="noopener">@Hugh-Mungo&lt;/a>,
&lt;a href="https://github.com/IndrajeetPatil" target="_blank" rel="noopener">@IndrajeetPatil&lt;/a>,
&lt;a href="https://github.com/JacobElder" target="_blank" rel="noopener">@JacobElder&lt;/a>,
&lt;a href="https://github.com/jarauh" target="_blank" rel="noopener">@jarauh&lt;/a>,
&lt;a href="https://github.com/javlon" target="_blank" rel="noopener">@javlon&lt;/a>,
&lt;a href="https://github.com/jdonland" target="_blank" rel="noopener">@jdonland&lt;/a>,
&lt;a href="https://github.com/jessexknight" target="_blank" rel="noopener">@jessexknight&lt;/a>,
&lt;a href="https://github.com/jfunction" target="_blank" rel="noopener">@jfunction&lt;/a>,
&lt;a href="https://github.com/JobNmadu" target="_blank" rel="noopener">@JobNmadu&lt;/a>,
&lt;a href="https://github.com/JoFAM" target="_blank" rel="noopener">@JoFAM&lt;/a>,
&lt;a href="https://github.com/jooyoungseo" target="_blank" rel="noopener">@jooyoungseo&lt;/a>,
&lt;a href="https://github.com/jpquast" target="_blank" rel="noopener">@jpquast&lt;/a>,
&lt;a href="https://github.com/jtlandis" target="_blank" rel="noopener">@jtlandis&lt;/a>,
&lt;a href="https://github.com/junjunlab" target="_blank" rel="noopener">@junjunlab&lt;/a>,
&lt;a href="https://github.com/jwhendy" target="_blank" rel="noopener">@jwhendy&lt;/a>,
&lt;a href="https://github.com/kapsner" target="_blank" rel="noopener">@kapsner&lt;/a>,
&lt;a href="https://github.com/KasperThystrup" target="_blank" rel="noopener">@KasperThystrup&lt;/a>,
&lt;a href="https://github.com/kongdd" target="_blank" rel="noopener">@kongdd&lt;/a>,
&lt;a href="https://github.com/LarryVincent" target="_blank" rel="noopener">@LarryVincent&lt;/a>,
&lt;a href="https://github.com/leonjessen" target="_blank" rel="noopener">@leonjessen&lt;/a>,
&lt;a href="https://github.com/Lisamrshhsr" target="_blank" rel="noopener">@Lisamrshhsr&lt;/a>,
&lt;a href="https://github.com/llrs" target="_blank" rel="noopener">@llrs&lt;/a>,
&lt;a href="https://github.com/LuisLauM" target="_blank" rel="noopener">@LuisLauM&lt;/a>,
&lt;a href="https://github.com/lynn242" target="_blank" rel="noopener">@lynn242&lt;/a>,
&lt;a href="https://github.com/makrez" target="_blank" rel="noopener">@makrez&lt;/a>,
&lt;a href="https://github.com/MichaelChirico" target="_blank" rel="noopener">@MichaelChirico&lt;/a>,
&lt;a href="https://github.com/michaelgrund" target="_blank" rel="noopener">@michaelgrund&lt;/a>,
&lt;a href="https://github.com/mikeroswell" target="_blank" rel="noopener">@mikeroswell&lt;/a>,
&lt;a href="https://github.com/mjsmith037" target="_blank" rel="noopener">@mjsmith037&lt;/a>,
&lt;a href="https://github.com/moodymudskipper" target="_blank" rel="noopener">@moodymudskipper&lt;/a>,
&lt;a href="https://github.com/mvanaman" target="_blank" rel="noopener">@mvanaman&lt;/a>,
&lt;a href="https://github.com/netique" target="_blank" rel="noopener">@netique&lt;/a>,
&lt;a href="https://github.com/nfancy" target="_blank" rel="noopener">@nfancy&lt;/a>,
&lt;a href="https://github.com/ngreifer" target="_blank" rel="noopener">@ngreifer&lt;/a>,
&lt;a href="https://github.com/nkehrein" target="_blank" rel="noopener">@nkehrein&lt;/a>,
&lt;a href="https://github.com/olobiolo" target="_blank" rel="noopener">@olobiolo&lt;/a>,
&lt;a href="https://github.com/orgadish" target="_blank" rel="noopener">@orgadish&lt;/a>,
&lt;a href="https://github.com/pachadotdev" target="_blank" rel="noopener">@pachadotdev&lt;/a>,
&lt;a href="https://github.com/padpadpadpad" target="_blank" rel="noopener">@padpadpadpad&lt;/a>,
&lt;a href="https://github.com/paupaiz" target="_blank" rel="noopener">@paupaiz&lt;/a>,
&lt;a href="https://github.com/ProfessorPeregrine" target="_blank" rel="noopener">@ProfessorPeregrine&lt;/a>,
&lt;a href="https://github.com/PursuitOfDataScience" target="_blank" rel="noopener">@PursuitOfDataScience&lt;/a>,
&lt;a href="https://github.com/rikudoukarthik" target="_blank" rel="noopener">@rikudoukarthik&lt;/a>,
&lt;a href="https://github.com/rjake" target="_blank" rel="noopener">@rjake&lt;/a>,
&lt;a href="https://github.com/rressler" target="_blank" rel="noopener">@rressler&lt;/a>,
&lt;a href="https://github.com/SarenT" target="_blank" rel="noopener">@SarenT&lt;/a>,
&lt;a href="https://github.com/Sebas256" target="_blank" rel="noopener">@Sebas256&lt;/a>,
&lt;a href="https://github.com/shenzhenzth" target="_blank" rel="noopener">@shenzhenzth&lt;/a>,
&lt;a href="https://github.com/skyroam" target="_blank" rel="noopener">@skyroam&lt;/a>,
&lt;a href="https://github.com/stargorg" target="_blank" rel="noopener">@stargorg&lt;/a>,
&lt;a href="https://github.com/stefanoborini" target="_blank" rel="noopener">@stefanoborini&lt;/a>,
&lt;a href="https://github.com/steveharoz" target="_blank" rel="noopener">@steveharoz&lt;/a>,
&lt;a href="https://github.com/stragu" target="_blank" rel="noopener">@stragu&lt;/a>,
&lt;a href="https://github.com/szimmer" target="_blank" rel="noopener">@szimmer&lt;/a>,
&lt;a href="https://github.com/tamas-ferenci" target="_blank" rel="noopener">@tamas-ferenci&lt;/a>,
&lt;a href="https://github.com/teunbrand" target="_blank" rel="noopener">@teunbrand&lt;/a>,
&lt;a href="https://github.com/tfjaeger" target="_blank" rel="noopener">@tfjaeger&lt;/a>,
&lt;a href="https://github.com/thomasp85" target="_blank" rel="noopener">@thomasp85&lt;/a>,
&lt;a href="https://github.com/thoolihan" target="_blank" rel="noopener">@thoolihan&lt;/a>,
&lt;a href="https://github.com/tjebo" target="_blank" rel="noopener">@tjebo&lt;/a>,
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>,
&lt;a href="https://github.com/trevorld" target="_blank" rel="noopener">@trevorld&lt;/a>,
&lt;a href="https://github.com/tungttnguyen" target="_blank" rel="noopener">@tungttnguyen&lt;/a>,
&lt;a href="https://github.com/twest820" target="_blank" rel="noopener">@twest820&lt;/a>,
&lt;a href="https://github.com/waynerroper" target="_blank" rel="noopener">@waynerroper&lt;/a>,
&lt;a href="https://github.com/willgearty" target="_blank" rel="noopener">@willgearty&lt;/a>,
&lt;a href="https://github.com/wmacnair" target="_blank" rel="noopener">@wmacnair&lt;/a>,
&lt;a href="https://github.com/wurli" target="_blank" rel="noopener">@wurli&lt;/a>,
&lt;a href="https://github.com/yutannihilation" target="_blank" rel="noopener">@yutannihilation&lt;/a>, and
&lt;a href="https://github.com/zeehio" target="_blank" rel="noopener">@zeehio&lt;/a>.&lt;/p></description></item><item><title>Make your ggplot2 extension package understand the new linewidth aesthetic</title><link>https://www.tidyverse.org/blog/2022/08/ggplot2-3-4-0-size-to-linewidth/</link><pubDate>Wed, 24 Aug 2022 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2022/08/ggplot2-3-4-0-size-to-linewidth/</guid><description>&lt;p>We are hard at work finishing the next release of ggplot2. While this release is mostly about internal changes, there are a few quite user visible changes as well. One of these upends the idea that the &lt;code>size&lt;/code> aesthetic is responsible for &lt;em>both&lt;/em> the sizing of point/text and the width of lines. With the next release we will have a &lt;code>linewidth&lt;/code> aesthetic to take care of the latter, while &lt;code>size&lt;/code> will continue handling the former.&lt;/p>
&lt;p>There are many excellent reasons for this change, all of which will have to wait until the release post to be discussed. This blog post is for those that maintain an extension package for ggplot2 and are left wondering how they should respond to this &amp;mdash; if that is you, please read on!&lt;/p>
&lt;h2 id="the-way-it-works">The way it works
&lt;a href="#the-way-it-works">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Before going into technicalities we&amp;rsquo;ll describe how it is intended to work. We are well aware that we can&amp;rsquo;t just make a change that would instantly break everyone&amp;rsquo;s code. So, we have gone to great length to make old code work as before while gently coercing users into adopting the new paradigm. For example, take a look at this old code:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://ggplot2.tidyverse.org'>ggplot2&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>airquality&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_path.html'>geom_line&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='nv'>Day&lt;/span>, y &lt;span class='o'>=&lt;/span> &lt;span class='nv'>Temp&lt;/span>, size &lt;span class='o'>=&lt;/span> &lt;span class='nv'>Wind&lt;/span>, group &lt;span class='o'>=&lt;/span> &lt;span class='nv'>Month&lt;/span>&lt;span class='o'>)&lt;/span>,
lineend &lt;span class='o'>=&lt;/span> &lt;span class='s'>"round"&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BB00;'>size&lt;/span> aesthetic has been deprecated for use with lines as of ggplot2 3.4.0&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BBBB;'>ℹ&lt;/span> Please use &lt;span style='color: #00BB00;'>linewidth&lt;/span> aesthetic instead&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>This message is displayed once every 8 hours.&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-1-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>As you can see, ggplot2 detects the use of the &lt;code>size&lt;/code> aesthetic and informs the user about the new &lt;code>linewidth&lt;/code> aesthetic but otherwise proceeds as before, producing the expected plot. As expected,
&lt;a href="https://ggplot2.tidyverse.org/reference/scale_size.html" target="_blank" rel="noopener">&lt;code>scale_size()&lt;/code>&lt;/a> also works in this situation:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>airquality&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_path.html'>geom_line&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='nv'>Day&lt;/span>, y &lt;span class='o'>=&lt;/span> &lt;span class='nv'>Temp&lt;/span>, size &lt;span class='o'>=&lt;/span> &lt;span class='nv'>Wind&lt;/span>, group &lt;span class='o'>=&lt;/span> &lt;span class='nv'>Month&lt;/span>&lt;span class='o'>)&lt;/span>,
lineend &lt;span class='o'>=&lt;/span> &lt;span class='s'>"round"&lt;/span>
&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/scale_size.html'>scale_size&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"Windspeed (mph)"&lt;/span>, range &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0.5&lt;/span>, &lt;span class='m'>3&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BB00;'>size&lt;/span> aesthetic has been deprecated for use with lines as of ggplot2 3.4.0&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BBBB;'>ℹ&lt;/span> Please use &lt;span style='color: #00BB00;'>linewidth&lt;/span> aesthetic instead&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>This message is displayed once every 8 hours.&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-2-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>but ultimately we want users to migrate to the following code:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>airquality&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_path.html'>geom_line&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='nv'>Day&lt;/span>, y &lt;span class='o'>=&lt;/span> &lt;span class='nv'>Temp&lt;/span>, linewidth &lt;span class='o'>=&lt;/span> &lt;span class='nv'>Wind&lt;/span>, group &lt;span class='o'>=&lt;/span> &lt;span class='nv'>Month&lt;/span>&lt;span class='o'>)&lt;/span>,
lineend &lt;span class='o'>=&lt;/span> &lt;span class='s'>"round"&lt;/span>
&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/scale_linewidth.html'>scale_linewidth&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"Windspeed (mph)"&lt;/span>, range &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0.5&lt;/span>, &lt;span class='m'>3&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-3-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;blockquote>
&lt;p>Note that there&amp;rsquo;s an important difference between these two plots (and one of the reasons we&amp;rsquo;re making the change): The last two plots differ because the default &lt;code>linewidth&lt;/code> scale correctly use a linear transform instead of a square root transform (which is only sensible for scaling of areas).&lt;/p>
&lt;/blockquote>
&lt;h2 id="how-to-adopt-this">How to adopt this
&lt;a href="#how-to-adopt-this">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>We have been able to add this automatic translation in a quite non-intrusive way which means that you as a package developer don&amp;rsquo;t need to do that much to adapt to the new naming. To show this I&amp;rsquo;ll create a geom drawing circles then update it to use linewidth instead:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>GeomCircle&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggproto.html'>ggproto&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"GeomCircle"&lt;/span>, &lt;span class='nv'>Geom&lt;/span>,
draw_panel &lt;span class='o'>=&lt;/span> &lt;span class='kr'>function&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>data&lt;/span>, &lt;span class='nv'>panel_params&lt;/span>, &lt;span class='nv'>coord&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&amp;#123;&lt;/span>
&lt;span class='c'># Expand x, y, radius data to points along circle&lt;/span>
&lt;span class='nv'>circle_data&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/funprog.html'>Map&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='kr'>function&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>x&lt;/span>, &lt;span class='nv'>y&lt;/span>, &lt;span class='nv'>r&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&amp;#123;&lt;/span>
&lt;span class='nv'>radians&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/seq.html'>seq&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0&lt;/span>, &lt;span class='m'>2&lt;/span>&lt;span class='o'>*&lt;/span>&lt;span class='nv'>pi&lt;/span>, length.out &lt;span class='o'>=&lt;/span> &lt;span class='m'>101&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>[&lt;/span>&lt;span class='o'>-&lt;/span>&lt;span class='m'>1&lt;/span>&lt;span class='o'>]&lt;/span>
&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/data.frame.html'>data.frame&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
x &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/Trig.html'>cos&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>radians&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>*&lt;/span> &lt;span class='nv'>r&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nv'>x&lt;/span>,
y &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/Trig.html'>sin&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>radians&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>*&lt;/span> &lt;span class='nv'>r&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nv'>y&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;span class='o'>&amp;#125;&lt;/span>, x &lt;span class='o'>=&lt;/span> &lt;span class='nv'>data&lt;/span>&lt;span class='o'>$&lt;/span>&lt;span class='nv'>x&lt;/span>, y &lt;span class='o'>=&lt;/span> &lt;span class='nv'>data&lt;/span>&lt;span class='o'>$&lt;/span>&lt;span class='nv'>y&lt;/span>, r &lt;span class='o'>=&lt;/span> &lt;span class='nv'>data&lt;/span>&lt;span class='o'>$&lt;/span>&lt;span class='nv'>radius&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>circle_data&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/do.call.html'>do.call&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>rbind&lt;/span>, &lt;span class='nv'>circle_data&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'># Transform to viewport coords&lt;/span>
&lt;span class='nv'>circle_data&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nv'>coord&lt;/span>&lt;span class='o'>$&lt;/span>&lt;span class='nf'>transform&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>circle_data&lt;/span>, &lt;span class='nv'>panel_params&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'># Draw as grob&lt;/span>
&lt;span class='nf'>grid&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/grid.polygon.html'>polygonGrob&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
x &lt;span class='o'>=&lt;/span> &lt;span class='nv'>circle_data&lt;/span>&lt;span class='o'>$&lt;/span>&lt;span class='nv'>x&lt;/span>,
y &lt;span class='o'>=&lt;/span> &lt;span class='nv'>circle_data&lt;/span>&lt;span class='o'>$&lt;/span>&lt;span class='nv'>y&lt;/span>,
id.lengths &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/rep.html'>rep&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>100&lt;/span>, &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/nrow.html'>nrow&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>data&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>,
default.units &lt;span class='o'>=&lt;/span> &lt;span class='s'>"native"&lt;/span>,
gp &lt;span class='o'>=&lt;/span> &lt;span class='nf'>grid&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/gpar.html'>gpar&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
col &lt;span class='o'>=&lt;/span> &lt;span class='nv'>data&lt;/span>&lt;span class='o'>$&lt;/span>&lt;span class='nv'>colour&lt;/span>,
fill &lt;span class='o'>=&lt;/span> &lt;span class='nv'>data&lt;/span>&lt;span class='o'>$&lt;/span>&lt;span class='nv'>fill&lt;/span>,
lwd &lt;span class='o'>=&lt;/span> &lt;span class='nv'>data&lt;/span>&lt;span class='o'>$&lt;/span>&lt;span class='nv'>size&lt;/span> &lt;span class='o'>*&lt;/span> &lt;span class='nv'>.pt&lt;/span>,
lty &lt;span class='o'>=&lt;/span> &lt;span class='nv'>data&lt;/span>&lt;span class='o'>$&lt;/span>&lt;span class='nv'>linetype&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;span class='o'>&amp;#125;&lt;/span>,
required_aes &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"x"&lt;/span>, &lt;span class='s'>"y"&lt;/span>, &lt;span class='s'>"radius"&lt;/span>&lt;span class='o'>)&lt;/span>,
default_aes &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
colour &lt;span class='o'>=&lt;/span> &lt;span class='s'>"black"&lt;/span>,
fill &lt;span class='o'>=&lt;/span> &lt;span class='s'>"grey"&lt;/span>,
size &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.5&lt;/span>,
linetype &lt;span class='o'>=&lt;/span> &lt;span class='m'>1&lt;/span>,
alpha &lt;span class='o'>=&lt;/span> &lt;span class='kc'>NA&lt;/span>
&lt;span class='o'>)&lt;/span>,
draw_key &lt;span class='o'>=&lt;/span> &lt;span class='nv'>draw_key_polygon&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>geom_circle&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='kr'>function&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mapping&lt;/span> &lt;span class='o'>=&lt;/span> &lt;span class='kc'>NULL&lt;/span>, &lt;span class='nv'>data&lt;/span> &lt;span class='o'>=&lt;/span> &lt;span class='kc'>NULL&lt;/span>, &lt;span class='nv'>stat&lt;/span> &lt;span class='o'>=&lt;/span> &lt;span class='s'>"identity"&lt;/span>,
&lt;span class='nv'>position&lt;/span> &lt;span class='o'>=&lt;/span> &lt;span class='s'>"identity"&lt;/span>, &lt;span class='nv'>...&lt;/span>, &lt;span class='nv'>na.rm&lt;/span> &lt;span class='o'>=&lt;/span> &lt;span class='kc'>FALSE&lt;/span>,
&lt;span class='nv'>show.legend&lt;/span> &lt;span class='o'>=&lt;/span> &lt;span class='kc'>NA&lt;/span>, &lt;span class='nv'>inherit.aes&lt;/span> &lt;span class='o'>=&lt;/span> &lt;span class='kc'>TRUE&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&amp;#123;&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/layer.html'>layer&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
data &lt;span class='o'>=&lt;/span> &lt;span class='nv'>data&lt;/span>,
mapping &lt;span class='o'>=&lt;/span> &lt;span class='nv'>mapping&lt;/span>,
stat &lt;span class='o'>=&lt;/span> &lt;span class='nv'>stat&lt;/span>,
geom &lt;span class='o'>=&lt;/span> &lt;span class='nv'>GeomCircle&lt;/span>,
position &lt;span class='o'>=&lt;/span> &lt;span class='nv'>position&lt;/span>,
show.legend &lt;span class='o'>=&lt;/span> &lt;span class='nv'>show.legend&lt;/span>,
inherit.aes &lt;span class='o'>=&lt;/span> &lt;span class='nv'>inherit.aes&lt;/span>,
params &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/list.html'>list&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
na.rm &lt;span class='o'>=&lt;/span> &lt;span class='nv'>na.rm&lt;/span>,
&lt;span class='nv'>...&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;span class='o'>&amp;#125;&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>As a sanity check, let us check that this actually works:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>random_points&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/data.frame.html'>data.frame&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
x &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/stats/Uniform.html'>runif&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>20&lt;/span>&lt;span class='o'>)&lt;/span>,
y &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/stats/Uniform.html'>runif&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>20&lt;/span>&lt;span class='o'>)&lt;/span>,
radius &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/stats/Uniform.html'>runif&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>20&lt;/span>, max &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.1&lt;/span>&lt;span class='o'>)&lt;/span>,
value &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/stats/Uniform.html'>runif&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>20&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>random_points&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>geom_circle&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='nv'>x&lt;/span>, y &lt;span class='o'>=&lt;/span> &lt;span class='nv'>y&lt;/span>, radius &lt;span class='o'>=&lt;/span> &lt;span class='nv'>radius&lt;/span>, size &lt;span class='o'>=&lt;/span> &lt;span class='nv'>value&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-5-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>It seems to work as intended. As can be seen from the code above, the &lt;code>size&lt;/code> aesthetics is not used much and is passed directly into &lt;code>polygonGrob()&lt;/code>. It follows that updating the code to using linewidth is not a huge operation.&lt;/p>
&lt;blockquote>
&lt;p>There is nothing preventing you from keeping the code as is &amp;mdash; it will continue to work as always. However, your users may begin to feel a disconnect with the style as they adapt to the new &lt;code>linewidth&lt;/code> aesthetic so it is highly recommended to make the proposed changes&lt;/p>
&lt;/blockquote>
&lt;h3 id="the-fix">The fix
&lt;a href="#the-fix">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>There are a few things you need to do to update the old code but they are all pretty benign. The changes are commented in the code below and will also be discussed afterwards.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>GeomCircle&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggproto.html'>ggproto&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"GeomCircle"&lt;/span>, &lt;span class='nv'>Geom&lt;/span>,
draw_panel &lt;span class='o'>=&lt;/span> &lt;span class='kr'>function&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>data&lt;/span>, &lt;span class='nv'>panel_params&lt;/span>, &lt;span class='nv'>coord&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&amp;#123;&lt;/span>
&lt;span class='c'># Expand x, y, radius data to points along circle&lt;/span>
&lt;span class='nv'>circle_data&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/funprog.html'>Map&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='kr'>function&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>x&lt;/span>, &lt;span class='nv'>y&lt;/span>, &lt;span class='nv'>r&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&amp;#123;&lt;/span>
&lt;span class='nv'>radians&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/seq.html'>seq&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0&lt;/span>, &lt;span class='m'>2&lt;/span>&lt;span class='o'>*&lt;/span>&lt;span class='nv'>pi&lt;/span>, length.out &lt;span class='o'>=&lt;/span> &lt;span class='m'>101&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>[&lt;/span>&lt;span class='o'>-&lt;/span>&lt;span class='m'>1&lt;/span>&lt;span class='o'>]&lt;/span>
&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/data.frame.html'>data.frame&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
x &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/Trig.html'>cos&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>radians&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>*&lt;/span> &lt;span class='nv'>r&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nv'>x&lt;/span>,
y &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/Trig.html'>sin&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>radians&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>*&lt;/span> &lt;span class='nv'>r&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nv'>y&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;span class='o'>&amp;#125;&lt;/span>, x &lt;span class='o'>=&lt;/span> &lt;span class='nv'>data&lt;/span>&lt;span class='o'>$&lt;/span>&lt;span class='nv'>x&lt;/span>, y &lt;span class='o'>=&lt;/span> &lt;span class='nv'>data&lt;/span>&lt;span class='o'>$&lt;/span>&lt;span class='nv'>y&lt;/span>, r &lt;span class='o'>=&lt;/span> &lt;span class='nv'>data&lt;/span>&lt;span class='o'>$&lt;/span>&lt;span class='nv'>radius&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>circle_data&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/do.call.html'>do.call&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>rbind&lt;/span>, &lt;span class='nv'>circle_data&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'># Transform to viewport coords&lt;/span>
&lt;span class='nv'>circle_data&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nv'>coord&lt;/span>&lt;span class='o'>$&lt;/span>&lt;span class='nf'>transform&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>circle_data&lt;/span>, &lt;span class='nv'>panel_params&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'># Draw as grob&lt;/span>
&lt;span class='nf'>grid&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/grid.polygon.html'>polygonGrob&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
x &lt;span class='o'>=&lt;/span> &lt;span class='nv'>circle_data&lt;/span>&lt;span class='o'>$&lt;/span>&lt;span class='nv'>x&lt;/span>,
y &lt;span class='o'>=&lt;/span> &lt;span class='nv'>circle_data&lt;/span>&lt;span class='o'>$&lt;/span>&lt;span class='nv'>y&lt;/span>,
id.lengths &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/rep.html'>rep&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>100&lt;/span>, &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/nrow.html'>nrow&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>data&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>,
default.units &lt;span class='o'>=&lt;/span> &lt;span class='s'>"native"&lt;/span>,
gp &lt;span class='o'>=&lt;/span> &lt;span class='nf'>grid&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/gpar.html'>gpar&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
col &lt;span class='o'>=&lt;/span> &lt;span class='nv'>data&lt;/span>&lt;span class='o'>$&lt;/span>&lt;span class='nv'>colour&lt;/span>,
fill &lt;span class='o'>=&lt;/span> &lt;span class='nv'>data&lt;/span>&lt;span class='o'>$&lt;/span>&lt;span class='nv'>fill&lt;/span>,
&lt;span class='c'># Use linewidth or fall back to size in old ggplot2 versions&lt;/span>
lwd &lt;span class='o'>=&lt;/span> &lt;span class='o'>(&lt;/span>&lt;span class='nv'>data&lt;/span>&lt;span class='o'>$&lt;/span>&lt;span class='nv'>linewidth&lt;/span> &lt;span class='o'>&lt;a href='https://rlang.r-lib.org/reference/op-null-default.html'>%||%&lt;/a>&lt;/span> &lt;span class='nv'>data&lt;/span>&lt;span class='o'>$&lt;/span>&lt;span class='nv'>size&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>*&lt;/span> &lt;span class='nv'>.pt&lt;/span>,
lty &lt;span class='o'>=&lt;/span> &lt;span class='nv'>data&lt;/span>&lt;span class='o'>$&lt;/span>&lt;span class='nv'>linetype&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;span class='o'>&amp;#125;&lt;/span>,
required_aes &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"x"&lt;/span>, &lt;span class='s'>"y"&lt;/span>, &lt;span class='s'>"radius"&lt;/span>&lt;span class='o'>)&lt;/span>,
default_aes &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
colour &lt;span class='o'>=&lt;/span> &lt;span class='s'>"black"&lt;/span>,
fill &lt;span class='o'>=&lt;/span> &lt;span class='s'>"grey"&lt;/span>,
&lt;span class='c'># Switch size to linewidth&lt;/span>
linewidth &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.5&lt;/span>,
linetype &lt;span class='o'>=&lt;/span> &lt;span class='m'>1&lt;/span>,
alpha &lt;span class='o'>=&lt;/span> &lt;span class='kc'>NA&lt;/span>
&lt;span class='o'>)&lt;/span>,
draw_key &lt;span class='o'>=&lt;/span> &lt;span class='nv'>draw_key_polygon&lt;/span>,
&lt;span class='c'># To allow using size in ggplot2 &amp;lt; 3.4.0&lt;/span>
non_missing_aes &lt;span class='o'>=&lt;/span> &lt;span class='s'>"size"&lt;/span>,
&lt;span class='c'># Tell ggplot2 to perform automatic renaming&lt;/span>
rename_size &lt;span class='o'>=&lt;/span> &lt;span class='kc'>TRUE&lt;/span>
&lt;span class='o'>)&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>As we can see above, we need two changes and two additions to our implementation. First (but last in the code), we add &lt;code>rename_size = TRUE&lt;/code> to our geom implementation. This instructs ggplot2 that this layer has a &lt;code>size&lt;/code> aesthetic that should be converted automatically with a deprecation warning. Setting this to &lt;code>TRUE&lt;/code> allows you to rest assured that as far as your code goes you can expect to have a &lt;code>linewidth&lt;/code> aesthetic. Second, we update the &lt;code>default_aes&lt;/code> to use &lt;code>linewidth&lt;/code> instead of &lt;code>size&lt;/code>. Third, wherever we use &lt;code>size&lt;/code> in our geom logic we instead use &lt;code>linewidth %||% size&lt;/code>. The reason for the fallback is that if your package is used together with an older version of ggplot2 the &lt;code>rename_size = TRUE&lt;/code> line has no effect and you need to fall back to &lt;code>size&lt;/code> if that is what the user has specified. Fourth, we add &lt;code>size&lt;/code> to the &lt;code>non_missing_aes&lt;/code> field. As with the last point, this is only relevant for use with older versions of ggplot2 as it instructs the geom to not warn when &lt;code>size&lt;/code> is used.&lt;/p>
&lt;p>Let&amp;rsquo;s try out the new implementation:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>random_points&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>geom_circle&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='nv'>x&lt;/span>, y &lt;span class='o'>=&lt;/span> &lt;span class='nv'>y&lt;/span>, radius &lt;span class='o'>=&lt;/span> &lt;span class='nv'>radius&lt;/span>, size &lt;span class='o'>=&lt;/span> &lt;span class='nv'>value&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BB00;'>size&lt;/span> aesthetic has been deprecated for use with lines as of ggplot2 3.4.0&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BBBB;'>ℹ&lt;/span> Please use &lt;span style='color: #00BB00;'>linewidth&lt;/span> aesthetic instead&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>This message is displayed once every 8 hours.&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-7-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>We see that we get the deprecation warning we know and that everything also renders as expected. Using the new naming also works, picks up the linear &lt;code>linewidth&lt;/code> scale, and doesn&amp;rsquo;t have a warning.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>random_points&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>geom_circle&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='nv'>x&lt;/span>, y &lt;span class='o'>=&lt;/span> &lt;span class='nv'>y&lt;/span>, radius &lt;span class='o'>=&lt;/span> &lt;span class='nv'>radius&lt;/span>, linewidth &lt;span class='o'>=&lt;/span> &lt;span class='nv'>value&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-8-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>The legend looks a bit wonky, but that is because the polygon key function caps the linewidth at a certain size relative to the size of the key. We can see that it works fine using a lower range:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/last_plot.html'>last_plot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/scale_linewidth.html'>scale_linewidth&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>range &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0.1&lt;/span>, &lt;span class='m'>2&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-9-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;h2 id="faq">FAQ
&lt;a href="#faq">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>&lt;em>I&amp;rsquo;m creating a geom as a subclass of one of the ggplot2 geoms that now uses &lt;code>linewidth&lt;/code> &amp;mdash; what should I do?&lt;/em>&lt;/p>
&lt;p>If your geom inherits from e.g. 
&lt;a href="https://ggplot2.tidyverse.org/reference/geom_polygon.html" target="_blank" rel="noopener">&lt;code>geom_polygon()&lt;/code>&lt;/a> which in the next version will begin using &lt;code>linewidth&lt;/code> all you have to do is to update your code to refer to &lt;code>linetype&lt;/code> instead of &lt;code>size&lt;/code> if it uses that anywhere. Your geom will already inherit the correct &lt;code>rename_size&lt;/code> value.&lt;/p>
&lt;p>&lt;em>I&amp;rsquo;m creating a stat &amp;mdash; should I do anything?&lt;/em>&lt;/p>
&lt;p>Probably not. The only exception is if you set &lt;code>size&lt;/code> in &lt;code>default_aes&lt;/code> to a calculated value and the expectance is that the geom used with the stat will change to using &lt;code>linewidth&lt;/code>. In such situations you should change the &lt;code>default_aes&lt;/code> setting to use &lt;code>linewidth&lt;/code> instead. We haven&amp;rsquo;t had any such situations in the ggplot2 code base so the chance of this being relevant is pretty low.&lt;/p>
&lt;p>&lt;em>I&amp;rsquo;m creating a geom that uses &lt;code>size&lt;/code> for both point sizing and line width &amp;mdash; how should I proceed?&lt;/em>&lt;/p>
&lt;p>If you have a geom where &lt;code>size&lt;/code> doubles for both point sizes and linewidth (an example from ggplot2 is
&lt;a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html" target="_blank" rel="noopener">&lt;code>geom_pointrange()&lt;/code>&lt;/a>) you shouldn&amp;rsquo;t set &lt;code>rename_size = TRUE&lt;/code> since &lt;code>size&lt;/code> remains a valid aesthetic. However, you should add &lt;code>linewidth&lt;/code> to &lt;code>default_aes&lt;/code> and use this wherever in your code &lt;code>size&lt;/code> was used for linewidth scaling before. Do note that this is a breaking change for your users since the same piece of code may no longer produce the same output.&lt;/p></description></item><item><title>scales 1.2.0</title><link>https://www.tidyverse.org/blog/2022/04/scales-1-2-0/</link><pubDate>Wed, 13 Apr 2022 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2022/04/scales-1-2-0/</guid><description>&lt;!--
TODO:
* [x] Look over / edit the post's title in the yaml
* [x] Edit (or delete) the description; note this appears in the Twitter card
* [x] Pick category and tags (see existing with [`hugodown::tidy_show_meta()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html))
* [x] Find photo &amp; update yaml metadata
* [x] Create `thumbnail-sq.jpg`; height and width should be equal
* [x] Create `thumbnail-wd.jpg`; width should be >5x height
* [x] [`hugodown::use_tidy_thumbnails()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html)
* [x] Add intro sentence, e.g. the standard tagline for the package
* [x] [`usethis::use_tidy_thanks()`](https://usethis.r-lib.org/reference/use_tidy_thanks.html)
-->
&lt;p>We&amp;rsquo;re very pleased to announce the release of
&lt;a href="https://scales.r-lib.org" target="_blank" rel="noopener">scales&lt;/a> 1.2.0. The scales package provides much of the infrastructure that underlies ggplot2&amp;rsquo;s scales, and using it allow you to customize the transformations, breaks, and labels used by ggplot2. You can install it from CRAN with:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/utils/install.packages.html'>install.packages&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"scales"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>This blog post will show off a few new features for labeling numbers, log scales, and currencies. You can see a full list of changes in the
&lt;a href="https://github.com/r-lib/scales/blob/main/NEWS.md" target="_blank" rel="noopener">release notes&lt;/a>.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://ggplot2.tidyverse.org'>ggplot2&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://scales.r-lib.org'>scales&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;h2 id="numbers">Numbers
&lt;a href="#numbers">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>
&lt;a href="https://scales.r-lib.org/reference/label_number.html" target="_blank" rel="noopener">&lt;code>label_number()&lt;/code>&lt;/a> is the workhorse that powers ggplot2&amp;rsquo;s formatting of numbers, including
&lt;a href="https://scales.r-lib.org/reference/label_dollar.html" target="_blank" rel="noopener">&lt;code>label_dollar()&lt;/code>&lt;/a> and
&lt;a href="https://scales.r-lib.org/reference/label_number.html" target="_blank" rel="noopener">&lt;code>label_comma()&lt;/code>&lt;/a>. This release added a number of useful new features.&lt;/p>
&lt;p>The most important is a new &lt;code>scale_cut&lt;/code> argument that makes it possible to independently scales different parts of the range. This is useful for scales which span multiple orders of magnitude. Take the following two examples which don&amp;rsquo;t get great labels by default:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>df1&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/data.frame.html'>data.frame&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
x &lt;span class='o'>=&lt;/span> &lt;span class='m'>10&lt;/span> &lt;span class='o'>^&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/stats/Uniform.html'>runif&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>1000&lt;/span>, &lt;span class='m'>2&lt;/span>, &lt;span class='m'>9&lt;/span>&lt;span class='o'>)&lt;/span>,
y &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/stats/Uniform.html'>runif&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>1000&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>df2&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nv'>df1&lt;/span> |&amp;gt; &lt;span class='nf'>dplyr&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/filter.html'>filter&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>x&lt;/span> &lt;span class='o'>&amp;lt;=&lt;/span> &lt;span class='m'>1.25&lt;/span> &lt;span class='o'>*&lt;/span> &lt;span class='m'>10&lt;/span>&lt;span class='o'>^&lt;/span>&lt;span class='m'>6&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>plot1&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>df1&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>x&lt;/span>, &lt;span class='nv'>y&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='kc'>NULL&lt;/span>, y &lt;span class='o'>=&lt;/span> &lt;span class='kc'>NULL&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>plot1&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/scale_continuous.html'>scale_x_log10&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-3-1.png" title="Scatterplot with x-axis labels 1e+03, 1e+05, 1e+07, and 1e+09." alt="Scatterplot with x-axis labels 1e+03, 1e+05, 1e+07, and 1e+09." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>plot2&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>df2&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>x&lt;/span>, &lt;span class='nv'>y&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='kc'>NULL&lt;/span>, y &lt;span class='o'>=&lt;/span> &lt;span class='kc'>NULL&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>plot2&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-4-1.png" title="Scatterplot with x-axis labels 0, 250000, 500000, 750000, 1000000, 12500000." alt="Scatterplot with x-axis labels 0, 250000, 500000, 750000, 1000000, 12500000." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>You can use
&lt;a href="https://scales.r-lib.org/reference/number.html" target="_blank" rel="noopener">&lt;code>cut_short_scale()&lt;/code>&lt;/a> to show thousands with a K suffix, millions with a M suffix, and billions with a B suffix:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>plot1&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/scale_continuous.html'>scale_x_log10&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
labels &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://scales.r-lib.org/reference/label_number.html'>label_number&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>scale_cut &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://scales.r-lib.org/reference/number.html'>cut_short_scale&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-5-1.png" title="Scatterplot with x-axis labels 1K, 100K, 10M, 1B." alt="Scatterplot with x-axis labels 1K, 100K, 10M, 1B." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>plot2&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/scale_continuous.html'>scale_x_continuous&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
labels &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://scales.r-lib.org/reference/label_number.html'>label_number&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>scale_cut &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://scales.r-lib.org/reference/number.html'>cut_short_scale&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-6-1.png" title="Scatterplot with x-axis labels 0, 250K, 500K, 750K, 1.00M, 1.25M" alt="Scatterplot with x-axis labels 0, 250K, 500K, 750K, 1.00M, 1.25M" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>(If your country uses 1 billion to mean 1 million million, then you can use
&lt;a href="https://scales.r-lib.org/reference/number.html" target="_blank" rel="noopener">&lt;code>cut_long_scale()&lt;/code>&lt;/a> instead of
&lt;a href="https://scales.r-lib.org/reference/number.html" target="_blank" rel="noopener">&lt;code>cut_short_scale()&lt;/code>&lt;/a>.)&lt;/p>
&lt;p>You can use
&lt;a href="https://scales.r-lib.org/reference/number.html" target="_blank" rel="noopener">&lt;code>cut_si()&lt;/code>&lt;/a> for SI labels:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>plot1&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/scale_continuous.html'>scale_x_log10&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
labels &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://scales.r-lib.org/reference/label_number.html'>label_number&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>scale_cut &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://scales.r-lib.org/reference/number.html'>cut_si&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"g"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-7-1.png" title="Scatterplot with x-axis labels 1 kg, 100 kg, 10 Mg, 1 Gg." alt="Scatterplot with x-axis labels 1 kg, 100 kg, 10 Mg, 1 Gg." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>plot2&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/scale_continuous.html'>scale_x_continuous&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
labels &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://scales.r-lib.org/reference/label_number.html'>label_number&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>scale_cut &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://scales.r-lib.org/reference/number.html'>cut_si&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"Hz"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-8-1.png" title="Scatterplot with x-axis labels 0, 250 KMz, 500 KHz, 750 KHz, 1.00 MHz, 1.25 MHz" alt="Scatterplot with x-axis labels 0, 250 KMz, 500 KHz, 750 KHz, 1.00 MHz, 1.25 MHz" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>This replaces
&lt;a href="https://scales.r-lib.org/reference/label_number_si.html" target="_blank" rel="noopener">&lt;code>label_number_si()&lt;/code>&lt;/a> because it incorrectly used the
&lt;a href="https://en.wikipedia.org/wiki/Long_and_short_scales" target="_blank" rel="noopener">short-scale abbreviations&lt;/a> instead of the correct
&lt;a href="https://en.wikipedia.org/wiki/Metric_prefix" target="_blank" rel="noopener">SI prefixes&lt;/a>.&lt;/p>
&lt;h2 id="log-labels">Log labels
&lt;a href="#log-labels">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Another way to label logs scales, thanks to
&lt;a href="https://github.com/davidchall" target="_blank" rel="noopener">David C Hall&lt;/a>, you can now use &lt;code>scales::label_log()&lt;/code> to display&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>plot1&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/scale_continuous.html'>scale_x_log10&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
labels &lt;span class='o'>=&lt;/span> &lt;span class='nf'>scales&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://scales.r-lib.org/reference/label_log.html'>label_log&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-9-1.png" title="Scatterplot with x-axis labels in mathematical notation: 10^3, 10^5, 10^7, 10^9." alt="Scatterplot with x-axis labels in mathematical notation: 10^3, 10^5, 10^7, 10^9." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>You can use the &lt;code>base&lt;/code> argument if you need a different base for the a logarithm:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>plot1&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/scale_continuous.html'>scale_x_continuous&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
trans &lt;span class='o'>=&lt;/span> &lt;span class='nf'>scales&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://scales.r-lib.org/reference/log_trans.html'>log_trans&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>2&lt;/span>&lt;span class='o'>)&lt;/span>,
labels &lt;span class='o'>=&lt;/span> &lt;span class='nf'>scales&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://scales.r-lib.org/reference/label_log.html'>label_log&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>2&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-10-1.png" title="Scatterplot with x-axis labels in mathematical notation: 2^11, 2^17, 2^23, 2^29." alt="Scatterplot with x-axis labels in mathematical notation: 2^11, 2^17, 2^23, 2^29." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;h2 id="currency">Currency
&lt;a href="#currency">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Finally,
&lt;a href="https://scales.r-lib.org/reference/label_dollar.html" target="_blank" rel="noopener">&lt;code>label_dollar()&lt;/code>&lt;/a> receives a couple of small improvements. The &lt;code>prefix&lt;/code> is now placed before the negative sign, rather than after it, yielding (e.g) the correct &lt;code>-$1&lt;/code> instead of &lt;code>$-1&lt;/code>:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>df3&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/data.frame.html'>data.frame&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
date &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/as.Date.html'>as.Date&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"2022-01-01"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='m'>1&lt;/span>&lt;span class='o'>:&lt;/span>&lt;span class='m'>1e3&lt;/span>,
balance &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/cumsum.html'>cumsum&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/stats/Uniform.html'>runif&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>1e3&lt;/span>, &lt;span class='o'>-&lt;/span>&lt;span class='m'>1e3&lt;/span>, &lt;span class='m'>1e3&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>plot3&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>df3&lt;/span>, &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>date&lt;/span>, &lt;span class='nv'>balance&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_path.html'>geom_line&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='kc'>NULL&lt;/span>, y &lt;span class='o'>=&lt;/span> &lt;span class='kc'>NULL&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>plot3&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-11-1.png" title="Line with y-axis labels in mathematical notation: 0, -10000, -20000, -30000, -40000." alt="Line with y-axis labels in mathematical notation: 0, -10000, -20000, -30000, -40000." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>plot3&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/scale_continuous.html'>scale_y_continuous&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
labels &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://scales.r-lib.org/reference/label_dollar.html'>label_dollar&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>scale_cut &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://scales.r-lib.org/reference/number.html'>cut_short_scale&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-12-1.png" title="Line with y-axis labels in mathematical notation: $0, -$10K, -$20K, -$30K, -$40K." alt="Line with y-axis labels in mathematical notation: $0, -$10K, -$20K, -$30K, -$40K." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>It also no longer uses its own &lt;code>negative_parens&lt;/code> argument, but instead inherits the new &lt;code>style_negative&lt;/code> argument from
&lt;a href="https://scales.r-lib.org/reference/label_number.html" target="_blank" rel="noopener">&lt;code>label_number()&lt;/code>&lt;/a>:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>plot3&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/scale_continuous.html'>scale_y_continuous&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
labels &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://scales.r-lib.org/reference/label_dollar.html'>label_dollar&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
scale_cut &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://scales.r-lib.org/reference/number.html'>cut_short_scale&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>,
style_negative &lt;span class='o'>=&lt;/span> &lt;span class='s'>"parens"&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-13-1.png" title="Line with y-axis labels in mathematical notation: $0, ($10K), ($20K), ($30K), ($40K)." alt="Line with y-axis labels in mathematical notation: $0, ($10K), ($20K), ($30K), ($40K)." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>A big thanks goes to
&lt;a href="https://github.com/davidchall" target="_blank" rel="noopener">David C Hall&lt;/a>, who contributed to the majority of new features in this version. 40 others contributed by asking questions, identifying bugs, and suggesting patches:
&lt;a href="https://github.com/aalucaci" target="_blank" rel="noopener">@aalucaci&lt;/a>,
&lt;a href="https://github.com/adamkemberling" target="_blank" rel="noopener">@adamkemberling&lt;/a>,
&lt;a href="https://github.com/akonkel-aek" target="_blank" rel="noopener">@akonkel-aek&lt;/a>,
&lt;a href="https://github.com/billdenney" target="_blank" rel="noopener">@billdenney&lt;/a>,
&lt;a href="https://github.com/brunocarlin" target="_blank" rel="noopener">@brunocarlin&lt;/a>,
&lt;a href="https://github.com/campbead" target="_blank" rel="noopener">@campbead&lt;/a>,
&lt;a href="https://github.com/cawthm" target="_blank" rel="noopener">@cawthm&lt;/a>,
&lt;a href="https://github.com/DanChaltiel" target="_blank" rel="noopener">@DanChaltiel&lt;/a>,
&lt;a href="https://github.com/davidhodge931" target="_blank" rel="noopener">@davidhodge931&lt;/a>,
&lt;a href="https://github.com/davidski" target="_blank" rel="noopener">@davidski&lt;/a>,
&lt;a href="https://github.com/dkahle" target="_blank" rel="noopener">@dkahle&lt;/a>,
&lt;a href="https://github.com/donboyd5" target="_blank" rel="noopener">@donboyd5&lt;/a>,
&lt;a href="https://github.com/dpseidel" target="_blank" rel="noopener">@dpseidel&lt;/a>,
&lt;a href="https://github.com/ds-jim" target="_blank" rel="noopener">@ds-jim&lt;/a>,
&lt;a href="https://github.com/EBukin" target="_blank" rel="noopener">@EBukin&lt;/a>,
&lt;a href="https://github.com/elong0527" target="_blank" rel="noopener">@elong0527&lt;/a>,
&lt;a href="https://github.com/eutwt" target="_blank" rel="noopener">@eutwt&lt;/a>,
&lt;a href="https://github.com/ewenme" target="_blank" rel="noopener">@ewenme&lt;/a>,
&lt;a href="https://github.com/fontikar" target="_blank" rel="noopener">@fontikar&lt;/a>,
&lt;a href="https://github.com/frederikziebell" target="_blank" rel="noopener">@frederikziebell&lt;/a>,
&lt;a href="https://github.com/hadley" target="_blank" rel="noopener">@hadley&lt;/a>,
&lt;a href="https://github.com/IndrajeetPatil" target="_blank" rel="noopener">@IndrajeetPatil&lt;/a>,
&lt;a href="https://github.com/jennybc" target="_blank" rel="noopener">@jennybc&lt;/a>,
&lt;a href="https://github.com/karawoo" target="_blank" rel="noopener">@karawoo&lt;/a>,
&lt;a href="https://github.com/mfherman" target="_blank" rel="noopener">@mfherman&lt;/a>,
&lt;a href="https://github.com/mikmart" target="_blank" rel="noopener">@mikmart&lt;/a>,
&lt;a href="https://github.com/mine-cetinkaya-rundel" target="_blank" rel="noopener">@mine-cetinkaya-rundel&lt;/a>,
&lt;a href="https://github.com/mjskay" target="_blank" rel="noopener">@mjskay&lt;/a>,
&lt;a href="https://github.com/nicolaspayette" target="_blank" rel="noopener">@nicolaspayette&lt;/a>,
&lt;a href="https://github.com/NunoSempere" target="_blank" rel="noopener">@NunoSempere&lt;/a>,
&lt;a href="https://github.com/SimonDedman" target="_blank" rel="noopener">@SimonDedman&lt;/a>,
&lt;a href="https://github.com/sjackman" target="_blank" rel="noopener">@sjackman&lt;/a>,
&lt;a href="https://github.com/stragu" target="_blank" rel="noopener">@stragu&lt;/a>,
&lt;a href="https://github.com/teunbrand" target="_blank" rel="noopener">@teunbrand&lt;/a>,
&lt;a href="https://github.com/thomasp85" target="_blank" rel="noopener">@thomasp85&lt;/a>,
&lt;a href="https://github.com/TonyLadson" target="_blank" rel="noopener">@TonyLadson&lt;/a>,
&lt;a href="https://github.com/tuoheyd" target="_blank" rel="noopener">@tuoheyd&lt;/a>,
&lt;a href="https://github.com/vinhtantran" target="_blank" rel="noopener">@vinhtantran&lt;/a>,
&lt;a href="https://github.com/vsocrates" target="_blank" rel="noopener">@vsocrates&lt;/a>, and
&lt;a href="https://github.com/yutannihilation" target="_blank" rel="noopener">@yutannihilation&lt;/a>.&lt;/p></description></item><item><title>ragg, svglite, and the new graphics features</title><link>https://www.tidyverse.org/blog/2022/02/new-graphic-features/</link><pubDate>Fri, 25 Feb 2022 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2022/02/new-graphic-features/</guid><description>&lt;!--
TODO:
* [ ] Look over / edit the post's title in the yaml
* [ ] Edit (or delete) the description; note this appears in the Twitter card
* [ ] Pick category and tags (see existing with [`hugodown::tidy_show_meta()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html))
* [ ] Find photo &amp; update yaml metadata
* [ ] Create `thumbnail-sq.jpg`; height and width should be equal
* [ ] Create `thumbnail-wd.jpg`; width should be >5x height
* [ ] [`hugodown::use_tidy_thumbnails()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html)
* [ ] Add intro sentence, e.g. the standard tagline for the package
* [ ] [`usethis::use_tidy_thanks()`](https://usethis.r-lib.org/reference/use_tidy_thanks.html)
-->
&lt;p>The release of
&lt;a href="https://ragg.r-lib.org" target="_blank" rel="noopener">ragg 1.2&lt;/a> and
&lt;a href="https://svglite.r-lib.org" target="_blank" rel="noopener">svglite 2.1&lt;/a> brought support for some exciting new graphics engine features, including gradients and patterns, which were
&lt;a href="https://developer.r-project.org/Blog/public/2020/07/15/new-features-in-the-r-graphics-engine/" target="_blank" rel="noopener">added in R 4.1&lt;/a> by Paul Murrell from R Core. This post will dive into these new features, as well as discuss what the future might hold for the R graphics engine.&lt;/p>
&lt;p>If you want to follow along on your own computer, you can install the latest versions of ragg and svglite from CRAN&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/utils/install.packages.html'>install.packages&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"ragg"&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nf'>&lt;a href='https://rdrr.io/r/utils/install.packages.html'>install.packages&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"svglite"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>This post will rarely make any specific call-outs to ragg or svglite, as these are simply the packages that facilitate what is now possible with R graphics.&lt;/p>
&lt;h2 id="what-is-the-graphics-engine">What is the graphics engine?
&lt;a href="#what-is-the-graphics-engine">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>You might wonder what is meant by the &lt;em>R graphics engine&lt;/em>. It&amp;rsquo;s pretty deep in the R graphics stack, so as a user, you are unlikely to ever engage with it directly. But, since I somehow caught your attention, we might as well indulge in the finer points of the graphics implementation.&lt;/p>
&lt;p>While you may mainly be familiar with ggplot2 and perhaps a variety of graphics devices (e.g. 
&lt;a href="https://rdrr.io/r/grDevices/pdf.html" target="_blank" rel="noopener">&lt;code>pdf()&lt;/code>&lt;/a> or
&lt;a href="https://rdrr.io/r/grDevices/png.html" target="_blank" rel="noopener">&lt;code>png()&lt;/code>&lt;/a>), they sit at opposite ends of a fairly elaborate graphics pipeline. ggplot2 is a high(er) level plotting package that allows you to express your data-visualization intent through a structured grammar. Graphics devices such as ragg and svglite are low-level packages that translate simple graphics instructions into a given file format. In between these two poles we have a two additional abstractions that helps translate between the extremes. In very broad terms, the R graphic stack looks like this:&lt;/p>
&lt;p>&lt;img src="pipeline.png" alt="An overview of the different steps in the R graphics pipeline. A graphics package is build on top of a graphic system. All graphic systems calls into the same shared graphics engine which then relay graphic instructions to the active graphic device." title="graphics pipeline">&lt;/p>
&lt;h3 id="graphic-systems">Graphic systems
&lt;a href="#graphic-systems">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>R currently sports two different systems, one colloquially known as &lt;em>base&lt;/em> graphics (implemented in the graphics package), and one called &lt;em>grid&lt;/em> graphics (implemented in the grid package). If you call
&lt;a href="https://rdrr.io/r/graphics/plot.default.html" target="_blank" rel="noopener">&lt;code>plot()&lt;/code>&lt;/a> you are most likely to end up using the base graphics system, while grid is used as the basis for e.g. ggplot2. The two systems are largely silos, though effort has been made to allow users to embed base graphics into grid graphics. In RStudio we are mainly invested in the grid graphics system since it powers ggplot2, but by and large, this is all an implementation detail that the user shouldn&amp;rsquo;t care too much about. There might come other graphic systems in the future, and other ways of drawing things on screen or to files also exist outside of the R graphics pipeline (e.g. rgl which allows you to create 3D graphics using an OpenGL/WebGL interface).&lt;/p>
&lt;h3 id="the-graphics-engine">The graphics engine
&lt;a href="#the-graphics-engine">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>What unites base and grid graphics and sets them apart from e.g. rgl is that they both call into the same low-level C API provided by R, the &lt;strong>graphics engine&lt;/strong>. The graphics engine is responsible for communicating with the graphics devices while also providing selected utility functionality common for both base and grid graphics. It is because of this abstraction that creating graphics in R is largely decoupled from how it is outputted, be it on screen, in a file, or directly to a printer.&lt;/p>
&lt;p>While it sounds nice and neat when it is all laid out like this, the current structure and division has grown out over many years, and the boundaries between the graphic systems, the graphics engine, and the graphic devices are blurry. Still, the design is much more mature than what we see in other languages, and as graphics/data-viz developers in R we are pretty spoiled compared to our peers in other languages &amp;mdash; perhaps without really knowing it.&lt;/p>
&lt;h2 id="a-fragmented-future">A fragmented future
&lt;a href="#a-fragmented-future">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>With the division of responsibility described above, there are many points in the pipeline that may impose limitations in functionality. The graphic system might not provide the higher-level API to use functionality in the graphics engine, or a graphic device might not provide support for instructions coming in from the graphics engine. While this has mainly been a hypothetical situation prior to R 4.1, it is now the new reality. The new features in the graphics engine were implemented along with high-level support in grid, and low-level support in the pdf device along with the cairo-based devices. This leaves base plot in the dark, and also excludes a range of built-in devices, including the default devices on Windows and macOS. At this point, where high-level support from e.g. ggplot2 is still not present, it might not be a big problem, as you will probably use these features quite deliberately and know their limitations in support. In the future, however, this could lead to surprises.&lt;/p>
&lt;p>As users, this fragmentation is most apparent in the choice of graphic device. After all, you don&amp;rsquo;t expect the graphic system to be capable of something outside of its API, simply because new features were announced for the graphics device. However, if a graphic device lacks support it will simply not use the new features, and you may end up surprised at what it renders.&lt;/p>
&lt;p>When it comes to graphic systems, you can expect that grid will be the first (perhaps only) system that ends up supporting new features in the graphics engine. Part of the reason for that is that the grid API is more powerful in general, and, as new and more complex graphic powers are exposed, it can be easiest to make them fit into the most expressive API. This is definitely the case for the latest batch of new features, but I also expect it to be the case going forward. Just because a functionality is exposed in grid, doesn&amp;rsquo;t mean that it can easily be handled in e.g. ggplot2. I&amp;rsquo;ll address what the new features may mean for the future of ggplot2 at the end of the post.&lt;/p>
&lt;p>For graphic &lt;em>devices&lt;/em> the water is more muddled. Not all devices are under active development, and such devices are unlikely to add support for new features. Further, it may be that a graphics device writes to a format, or uses a library that does not support a new feature provided by the graphics engine. The bottom line is that we can expect an increased fragmentation of the graphics devices in R in terms of which will be up to spec with the latest graphics engine features. It appears that the cairo-based devices along with the pdf device from grDevices can be expected to stay current. On our end, we will do our best to make sure that our graphic-device packages (currently ragg and svglite) will stay on top of any new additions to the graphics engine.&lt;/p>
&lt;h2 id="the-new-features">The new features
&lt;a href="#the-new-features">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>OK, so we&amp;rsquo;ve talked a lot about some new features without ever going into detail about what they are. If you&amp;rsquo;ve never felt constrained by the capabilities of the graphics in R, you may be forgiven for thinking that this is all a big fuss over nothing. You may be right, but new capabilities will often allow the ecosystem to evolve in new and unexpected ways to the benefit of all.&lt;/p>
&lt;h3 id="gradients">Gradients
&lt;a href="#gradients">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>While gradients have been a part of R graphics for a while, they have always relied on some hack - most often cutting the line or polygon in smaller bits and coloring these with color sampled from a gradient. However, now gradients are supported at the device level, meaning that the pixel color is calculated based on a gradient function. This means that the gradient is pixel-perfect at any resolution, and if you are writing to vector format (e.g. svg), you can reduce the file size by not having to write the coordinates for a chopped-up polygon to support the gradient. For now, the functionality is limited to fills. So, if you want to draw a gradient line, you still have to cut it up into small segments.&lt;/p>
&lt;p>Gradients can be created with the
&lt;a href="https://rdrr.io/r/grid/patterns.html" target="_blank" rel="noopener">&lt;code>linearGradient()&lt;/code>&lt;/a> and
&lt;a href="https://rdrr.io/r/grid/patterns.html" target="_blank" rel="noopener">&lt;code>radialGradient()&lt;/code>&lt;/a> which can be assigned to the fill of a grob:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>grid&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/grid.circle.html'>grid.circle&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
gp &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/gpar.html'>gpar&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
fill &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/patterns.html'>linearGradient&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"firebrick"&lt;/span>, &lt;span class='s'>"steelblue"&lt;/span>, &lt;span class='s'>"forestgreen"&lt;/span>&lt;span class='o'>)&lt;/span>,
stops &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0&lt;/span>, &lt;span class='m'>0.7&lt;/span>, &lt;span class='m'>1&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='o'>)&lt;/span>,
col &lt;span class='o'>=&lt;/span> &lt;span class='kc'>NA&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-3-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/grid.circle.html'>grid.circle&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
gp &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/gpar.html'>gpar&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
fill &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/patterns.html'>radialGradient&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"white"&lt;/span>, &lt;span class='s'>"steelblue"&lt;/span>&lt;span class='o'>)&lt;/span>,
cx1 &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.8&lt;/span>,
cy1 &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.8&lt;/span>
&lt;span class='o'>)&lt;/span>,
col &lt;span class='o'>=&lt;/span> &lt;span class='kc'>NA&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-4-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>At the basic level, both of the constructors takes a vector of colors. Optionally, you can provide a vector of stops that define where along the span of the gradient each color is placed. Each gradient type also lets you specify where in the graphic the gradient runs between. For a linear gradient, you provide the x and y position of the start and end of the gradient. For a radial gradient, you provide the center and radius of the start and end circle. Lastly, you can also tell it how it should behave outside of the given range using the &lt;code>extend&lt;/code> argument:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/grid.circle.html'>grid.circle&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
gp &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/gpar.html'>gpar&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
fill &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/patterns.html'>linearGradient&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"firebrick"&lt;/span>, &lt;span class='s'>"steelblue"&lt;/span>&lt;span class='o'>)&lt;/span>,
x1 &lt;span class='o'>=&lt;/span> &lt;span class='m'>0&lt;/span>, y1 &lt;span class='o'>=&lt;/span> &lt;span class='m'>0&lt;/span>, x2 &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.5&lt;/span>, y2 &lt;span class='o'>=&lt;/span> &lt;span class='m'>0&lt;/span>,
extend &lt;span class='o'>=&lt;/span> &lt;span class='s'>"repeat"&lt;/span>
&lt;span class='o'>)&lt;/span>,
col &lt;span class='o'>=&lt;/span> &lt;span class='kc'>NA&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-5-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/grid.circle.html'>grid.circle&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
gp &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/gpar.html'>gpar&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
fill &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/patterns.html'>linearGradient&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"firebrick"&lt;/span>, &lt;span class='s'>"steelblue"&lt;/span>&lt;span class='o'>)&lt;/span>,
x1 &lt;span class='o'>=&lt;/span> &lt;span class='m'>0&lt;/span>, y1 &lt;span class='o'>=&lt;/span> &lt;span class='m'>0&lt;/span>, x2 &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.5&lt;/span>, y2 &lt;span class='o'>=&lt;/span> &lt;span class='m'>0&lt;/span>,
extend &lt;span class='o'>=&lt;/span> &lt;span class='s'>"pad"&lt;/span>
&lt;span class='o'>)&lt;/span>,
col &lt;span class='o'>=&lt;/span> &lt;span class='kc'>NA&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-6-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>One thing to note is that the extent of the gradient is given relative to the bounding box of the grob being drawn. We could move the circle above around and the gradient would follow along with it.&lt;/p>
&lt;h3 id="patterns">Patterns
&lt;a href="#patterns">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>Like gradients, patterns are a new type of fill made possible in grid through the new features in the graphic engine. Patterns are crazy powerful in that they can be &lt;em>any&lt;/em> grob you can imagine. The grob itself can consist of other grobs and these grobs could have patterned fill as well (or gradient fills for that matter).&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>gradient_rec&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/grid.rect.html'>rectGrob&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
width &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.1&lt;/span>,
height &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.1&lt;/span>,
gp &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/gpar.html'>gpar&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>fill &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/patterns.html'>linearGradient&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"firebrick"&lt;/span>, &lt;span class='s'>"steelblue"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/grid.draw.html'>grid.draw&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>gradient_rec&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-7-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/grid.circle.html'>grid.circle&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
gp &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/gpar.html'>gpar&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>fill &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/patterns.html'>pattern&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>gradient_rec&lt;/span>, width &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.15&lt;/span>, height &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.15&lt;/span>, extend &lt;span class='o'>=&lt;/span> &lt;span class='s'>"reflect"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-8-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>Understanding the sizing of the grob used for the pattern can take some getting used to. Basically, the pattern is drawn relative to the grob. The &lt;code>width&lt;/code> and &lt;code>height&lt;/code> arguments in the
&lt;a href="https://rdrr.io/r/grid/patterns.html" target="_blank" rel="noopener">&lt;code>pattern()&lt;/code>&lt;/a> call is then used to define a region of the grob that will be used as a pattern. Thus, you cannot scale the pattern grob using the &lt;code>width&lt;/code> and &lt;code>height&lt;/code> arguments in
&lt;a href="https://rdrr.io/r/grid/patterns.html" target="_blank" rel="noopener">&lt;code>pattern()&lt;/code>&lt;/a>. This can be seen below&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/grid.circle.html'>grid.circle&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
gp &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/gpar.html'>gpar&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>fill &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/patterns.html'>pattern&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>gradient_rec&lt;/span>, width &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.35&lt;/span>, height &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.35&lt;/span>, extend &lt;span class='o'>=&lt;/span> &lt;span class='s'>"reflect"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-9-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>As we see, we are just defining a larger (empty) region from our rect grob, effectively adding more space between each rectangle, rather than creating larger rectangles. This also means that the pattern scales with the grob:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>pat&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/patterns.html'>pattern&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
&lt;span class='nv'>gradient_rec&lt;/span>,
width &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.15&lt;/span>,
height &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.15&lt;/span>,
extend &lt;span class='o'>=&lt;/span> &lt;span class='s'>"reflect"&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/grid.circle.html'>grid.circle&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
x &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.25&lt;/span>, r &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.25&lt;/span>,
gp &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/gpar.html'>gpar&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>fill &lt;span class='o'>=&lt;/span> &lt;span class='nv'>pat&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/grid.circle.html'>grid.circle&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
x &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.75&lt;/span>, r &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.5&lt;/span>,
gp &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/gpar.html'>gpar&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>fill &lt;span class='o'>=&lt;/span> &lt;span class='nv'>pat&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-10-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>In order to ensure the same scale of pattern is used across separate grobs, be sure to use absolute units when defining the pattern grob as well as the region:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>gradient_rec&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/grid.rect.html'>rectGrob&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
width &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/unit.html'>unit&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>1&lt;/span>, &lt;span class='s'>"cm"&lt;/span>&lt;span class='o'>)&lt;/span>,
height &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/unit.html'>unit&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>1&lt;/span>, &lt;span class='s'>"cm"&lt;/span>&lt;span class='o'>)&lt;/span>,
gp &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/gpar.html'>gpar&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>fill &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/patterns.html'>linearGradient&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"firebrick"&lt;/span>, &lt;span class='s'>"steelblue"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>pat&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/patterns.html'>pattern&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
&lt;span class='nv'>gradient_rec&lt;/span>,
width &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/unit.html'>unit&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>1.5&lt;/span>, &lt;span class='s'>"cm"&lt;/span>&lt;span class='o'>)&lt;/span>,
height &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/unit.html'>unit&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>1.5&lt;/span>, &lt;span class='s'>"cm"&lt;/span>&lt;span class='o'>)&lt;/span>,
extend &lt;span class='o'>=&lt;/span> &lt;span class='s'>"reflect"&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/grid.circle.html'>grid.circle&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
x &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.25&lt;/span>, r &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.25&lt;/span>,
gp &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/gpar.html'>gpar&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>fill &lt;span class='o'>=&lt;/span> &lt;span class='nv'>pat&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/grid.circle.html'>grid.circle&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
x &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.75&lt;/span>, r &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.5&lt;/span>,
gp &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/gpar.html'>gpar&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>fill &lt;span class='o'>=&lt;/span> &lt;span class='nv'>pat&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-11-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>As you can see, patterns can take some getting used to, but this is mainly because the API covers such a large span of functionality in terms of sizing, etc.&lt;/p>
&lt;h3 id="arbitrary-clipping-paths">Arbitrary clipping paths
&lt;a href="#arbitrary-clipping-paths">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>Clipping is an integral part of graphics. You set up a region in your canvas and only this region will get drawn to. Up until now, the graphics engine has supported clipping, but only of rectangular, axis-aligned regions. Now, however, any grob can be used to define a clipping region. This is done at the viewport level, where the &lt;code>clip&lt;/code> argument now can take a grob in addition to the standard &lt;code>&amp;quot;on&amp;quot;&lt;/code>/&lt;code>&amp;quot;off&amp;quot;&lt;/code> values.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>clip_path&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/grid.text.html'>textGrob&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"Clipping"&lt;/span>, gp &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/gpar.html'>gpar&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>fontface &lt;span class='o'>=&lt;/span> &lt;span class='s'>"bold"&lt;/span>, fontsize &lt;span class='o'>=&lt;/span> &lt;span class='m'>100&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/grid.points.html'>grid.points&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
x &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/stats/Uniform.html'>runif&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>5000&lt;/span>&lt;span class='o'>)&lt;/span>,
y &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/stats/Uniform.html'>runif&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>5000&lt;/span>&lt;span class='o'>)&lt;/span>,
default.units &lt;span class='o'>=&lt;/span> &lt;span class='s'>'npc'&lt;/span>,
vp &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/viewport.html'>viewport&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>clip &lt;span class='o'>=&lt;/span> &lt;span class='nv'>clip_path&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-12-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>Clipping is not only possible with single grobs. By combining grobs in a gList, you can making the clipping region arbitrarily complex:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>circle&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/grid.circle.html'>circleGrob&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0.2&lt;/span>, &lt;span class='m'>0.8&lt;/span>&lt;span class='o'>)&lt;/span>, r &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.3&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>rect&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/grid.rect.html'>rectGrob&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
width &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/unit.html'>unit&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0.7&lt;/span>, &lt;span class='s'>'snpc'&lt;/span>&lt;span class='o'>)&lt;/span>,
height &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/unit.html'>unit&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0.7&lt;/span>, &lt;span class='s'>'snpc'&lt;/span>&lt;span class='o'>)&lt;/span>,
vp &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/viewport.html'>viewport&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>angle &lt;span class='o'>=&lt;/span> &lt;span class='m'>45&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>clip_path&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/grid.grob.html'>gTree&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>children &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/grid.grob.html'>gList&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>circle&lt;/span>, &lt;span class='nv'>rect&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/grid.points.html'>grid.points&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
x &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/stats/Uniform.html'>runif&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>5000&lt;/span>&lt;span class='o'>)&lt;/span>,
y &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/stats/Uniform.html'>runif&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>5000&lt;/span>&lt;span class='o'>)&lt;/span>,
default.units &lt;span class='o'>=&lt;/span> &lt;span class='s'>'npc'&lt;/span>,
vp &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/viewport.html'>viewport&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>clip &lt;span class='o'>=&lt;/span> &lt;span class='nv'>clip_path&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-13-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>The examples above seems quite contrived and decoupled from data visualization, but there are of course real world usages, e.g. clipping a 2D density estimate to the shape of a country or clipping data points inside a circular canvas for polar plots.&lt;/p>
&lt;p>The user interface for clipping paths is easy enough to understand, but it should be noted that there may be slight differences between devices as to which grob types can be used. Most notably, the use of text grobs for defining clipping paths is not something that will work for every device (but does work in ragg).&lt;/p>
&lt;h3 id="alpha-masks">Alpha masks
&lt;a href="#alpha-masks">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>The last feature added to the graphics engine in this round is the ability of viewports to have an alpha mask assigned. When a mask is present, the grobs being drawn will apply the opacity of the mask. Note that this is different than a luminosity mask, which uses the lightness of the mask as the alpha value. A mask can be any grob you want, or a collection of multiples:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>circle&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/grid.circle.html'>circleGrob&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
x &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0.2&lt;/span>, &lt;span class='m'>0.8&lt;/span>&lt;span class='o'>)&lt;/span>,
r &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.3&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>rect&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/grid.rect.html'>rectGrob&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
width &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/unit.html'>unit&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0.7&lt;/span>, &lt;span class='s'>'snpc'&lt;/span>&lt;span class='o'>)&lt;/span>,
height &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/unit.html'>unit&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0.7&lt;/span>, &lt;span class='s'>'snpc'&lt;/span>&lt;span class='o'>)&lt;/span>,
vp &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/viewport.html'>viewport&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>angle &lt;span class='o'>=&lt;/span> &lt;span class='m'>45&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>mask&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/grid.grob.html'>gTree&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>children &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/grid.grob.html'>gList&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>circle&lt;/span>, &lt;span class='nv'>rect&lt;/span>&lt;span class='o'>)&lt;/span>, gp &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/gpar.html'>gpar&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>fill &lt;span class='o'>=&lt;/span> &lt;span class='s'>"#00000066"&lt;/span>, col &lt;span class='o'>=&lt;/span> &lt;span class='kc'>NA&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/grid.rect.html'>grid.rect&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
x &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0.25&lt;/span>, &lt;span class='m'>0.25&lt;/span>, &lt;span class='m'>0.75&lt;/span>, &lt;span class='m'>0.75&lt;/span>&lt;span class='o'>)&lt;/span>,
y &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0.25&lt;/span>, &lt;span class='m'>0.75&lt;/span>, &lt;span class='m'>0.75&lt;/span>, &lt;span class='m'>0.25&lt;/span>&lt;span class='o'>)&lt;/span>,
width &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.5&lt;/span>,
height &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.5&lt;/span>,
gp &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/gpar.html'>gpar&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>fill &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"steelblue"&lt;/span>, &lt;span class='s'>"firebrick"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>,
vp &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/grid/viewport.html'>viewport&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>mask &lt;span class='o'>=&lt;/span> &lt;span class='nv'>mask&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-14-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>As we see above, the areas in the mask where nothing is drawn have an opacity of 0, meaning that whatever is being drawn by the rectangle grob in these areas will be invisible. We also see that opacity is compounded by overlaying shapes as the areas covered both by the circle and the square in the mask has a higher opacity.&lt;/p>
&lt;h2 id="future-features">Future features
&lt;a href="#future-features">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>It is, of course, dangerous to promise what the future brings. However, I do know of a few features adjacent to what has been discussed above that might make sense to know about.&lt;/p>
&lt;p>When it comes to clipping paths, there is currently a lack of way to describe how multiple shapes are combined, since the fill rule is implicitly &amp;ldquo;winding&amp;rdquo; and you have no control over the direction the graphic device trace circles and rectangles. Work is already being done to let you control this from grid, so it will become easier to e.g. punch out holes in a clipping path by overlaying two grobs.&lt;/p>
&lt;p>As noted in the discussion about masks, only alpha masks are currently possible. However, producing an exact transparency through compounded shapes can be tough because of the way opacity combines. In the future there will also be support for luminosity masks and this should greatly improve the user experience of this feature in my opinion.&lt;/p>
&lt;p>Still, the main takeaway from all of the above is that the graphic engine is once again a living breathing code-base with big user-facing features on the horizon.&lt;/p>
&lt;h2 id="the-ggplot2-implications">The ggplot2 implications
&lt;a href="#the-ggplot2-implications">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>While ggplot2 uses grid underneath it&amp;rsquo;s grammar API, these features are generally not directly available in ggplot2. This is because most of these features are not directly applicable to the current API. Both gradients and patterns are obvious candidates for extensions of the ggplot2 API. But, for now, the grid API doesn&amp;rsquo;t support a vector of patterns/gradients. Once this limitation is removed (it is in the works), we will need to figure out how scaling of these more flexible fill types should work. The starting point is, of course, to allow mapping from one data-value to a predefined pattern/gradient, but it would be interesting to think about how to map data-values to features of the pattern/gradient, e.g. have the gradient defined by two or more columns that all maps to different colors. Some of this work and exploration is already happening in
&lt;a href="https://coolbutuseless.github.io/package/ggpattern" target="_blank" rel="noopener">ggpattern&lt;/a>, which could form the basis of future ggplot2 support.&lt;/p>
&lt;p>As for path clipping, we could imagine that geoms could take a clipping grob, but it is not obvious how this grob should be constructed in a manner consistent with the grammar. The same goes for masks. Maybe most of this work should be relegated to
&lt;a href="https://ggfx.data-imaginist.com" target="_blank" rel="noopener">ggfx&lt;/a> which has an extended API that seems better suited to masks and arbitrary clipping.&lt;/p>
&lt;h2 id="acknowledgement">Acknowledgement
&lt;a href="#acknowledgement">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>I&amp;rsquo;d like to extend a huge thanks to Paul Murrell for continuing to support and improve the graphics API in R, and for his willingness to answer questions during the implementation of the new features in ragg and svglite. The new graphics engine features were joint work with Paul Murrell, partly sponsored by RStudio.&lt;/p></description></item><item><title>Off-label uses in ggplot2</title><link>https://www.tidyverse.org/blog/2021/06/off-label-uses-in-ggplot2/</link><pubDate>Thu, 24 Jun 2021 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2021/06/off-label-uses-in-ggplot2/</guid><description>&lt;!--
TODO:
* [ ] Look over / edit the post's title in the yaml
* [ ] Edit (or delete) the description; note this appears in the Twitter card
* [ ] Pick category and tags (see existing with [`hugodown::tidy_show_meta()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html))
* [ ] Find photo &amp; update yaml metadata
* [ ] Create `thumbnail-sq.jpg`; height and width should be equal
* [ ] Create `thumbnail-wd.jpg`; width should be >5x height
* [ ] [`hugodown::use_tidy_thumbnails()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html)
* [ ] Add intro sentence, e.g. the standard tagline for the package
* [ ] [`usethis::use_tidy_thanks()`](https://usethis.r-lib.org/reference/use_tidy_thanks.html)
-->
&lt;p>ggplot2 v3.3.4 landed on CRAN recently, and while every release of ggplot2 is cause for celebration, this was merely a patch release fixing a large number of bugs and so it came and went without much fanfare. However, for a couple of users this release brought an unwelcome and surprising change. We feel that this is a great opportunity to talk a bit about some of the topics that Hadley discussed in his
&lt;a href="https://www.rstudio.com/resources/rstudioglobal-2021/maintaining-the-house-the-tidyverse-built/" target="_blank" rel="noopener">rstudio::global(2021) keynote&lt;/a>, particularly the nature of breaking changes.&lt;/p>
&lt;h2 id="the-surprising-use-of-ggsave">The surprising use of &lt;code>ggsave()&lt;/code>
&lt;a href="#the-surprising-use-of-ggsave">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>We created
&lt;a href="https://ggplot2.tidyverse.org/reference/ggsave.html" target="_blank" rel="noopener">&lt;code>ggsave()&lt;/code>&lt;/a> as an easy way to save a ggplot object to an image file, using the following API:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nf'>ggplot&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mpg&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>geom_point&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>aes&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='nv'>displ&lt;/span>, y &lt;span class='o'>=&lt;/span> &lt;span class='nv'>hwy&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nf'>ggsave&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"my_mpg_plot.png"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>
&lt;a href="https://ggplot2.tidyverse.org/reference/ggsave.html" target="_blank" rel="noopener">&lt;code>ggsave()&lt;/code>&lt;/a> is designed so that it automatically picks up the last created (or rendered) plot, and coupled with automatic graphic device selection determined from the file extension it provides a very lean API.&lt;/p>
&lt;p>The issue we will discuss in this blog post revolves around the use of
&lt;a href="https://ggplot2.tidyverse.org/reference/ggsave.html" target="_blank" rel="noopener">&lt;code>ggsave()&lt;/code>&lt;/a> in the following manner:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://ggplot2.tidyverse.org'>ggplot2&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mpg&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='nv'>displ&lt;/span>, y &lt;span class='o'>=&lt;/span> &lt;span class='nv'>hwy&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggsave.html'>ggsave&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"my_mpg_plot.png"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>Now, if this is the first time you&amp;rsquo;ve seen
&lt;a href="https://ggplot2.tidyverse.org/reference/ggsave.html" target="_blank" rel="noopener">&lt;code>ggsave()&lt;/code>&lt;/a> being added to a plot, you are not alone. This certainly caught us by surprise. Prior to v3.3.4, this actually worked (more on that later) but with the recent release running this code will result in the following error:&lt;/p>
&lt;pre>&lt;code>Error: Can't add [`ggsave(&amp;quot;my_mpg_plot.png&amp;quot;)`](https://ggplot2.tidyverse.org/reference/ggsave.html) to a ggplot object.
&lt;/code>&lt;/pre>
&lt;p>If you were a user that had used this pattern for saving plots it very much felt like we had removed a feature, pulling the rug out from under your script with no warning. However, this use of
&lt;a href="https://ggplot2.tidyverse.org/reference/ggsave.html" target="_blank" rel="noopener">&lt;code>ggsave()&lt;/code>&lt;/a> had never been advertised in any of the documentation and while it worked, it could not be considered a feature as such.&lt;/p>
&lt;h2 id="off-label-saving">Off-label saving
&lt;a href="#off-label-saving">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>We believe that this usage of
&lt;a href="https://ggplot2.tidyverse.org/reference/ggsave.html" target="_blank" rel="noopener">&lt;code>ggsave()&lt;/code>&lt;/a> is the off-label use that Hadley talks about in his keynote. Off-label use of functions comprise of using functions in a way that only work &lt;em>by accident&lt;/em>, and are thus susceptible to breakage at any point due to changes in the code. Another common word for this is &amp;ldquo;a hack&amp;rdquo;, but this term can often imply that the user is full aware of the brittle nature of the setup. Off-label use can just as well be passed on between users to a point where some thinks that this is the correct, supported, way of doing things (this was certainly the case with the above issue).&lt;/p>
&lt;p>In an age of the pipe it is easy to understand why this use was picked up and thought off as a real feature.
&lt;a href="https://rdrr.io/r/base/Arithmetic.html" target="_blank" rel="noopener">&lt;code>+&lt;/code>&lt;/a>, however, is not &lt;code>%&amp;gt;%&lt;/code> (or &lt;code>|&amp;gt;&lt;/code>). It is a compositional operator meant to assemble the description of a plot. There is no execution of logic (besides the assembly) going on, and thus the idea of adding
&lt;a href="https://ggplot2.tidyverse.org/reference/ggsave.html" target="_blank" rel="noopener">&lt;code>ggsave()&lt;/code>&lt;/a> does not make theoretical nor practical sense. This is also the reason why we do not want to &amp;ldquo;fix&amp;rdquo; this issue and turn it into a regular feature.&lt;/p>
&lt;h2 id="why-did-it-work-why-did-it-fail">Why did it work, why did it fail
&lt;a href="#why-did-it-work-why-did-it-fail">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>For those interested in the cause of both the accidental functionality and its breakage, here follows a description.
&lt;a href="https://ggplot2.tidyverse.org/reference/ggsave.html" target="_blank" rel="noopener">&lt;code>ggsave()&lt;/code>&lt;/a> can be used to save any plot object but defaults to the object returned by
&lt;a href="https://ggplot2.tidyverse.org/reference/last_plot.html" target="_blank" rel="noopener">&lt;code>ggplot2::last_plot()&lt;/code>&lt;/a>. This function returns the last rendered &lt;em>or&lt;/em> modified plot object. That means that whenever you add something to a plot the result will be retrievable with
&lt;a href="https://ggplot2.tidyverse.org/reference/last_plot.html" target="_blank" rel="noopener">&lt;code>last_plot()&lt;/code>&lt;/a> but only until you manipulate or render another plot. What happens when adding
&lt;a href="https://ggplot2.tidyverse.org/reference/ggsave.html" target="_blank" rel="noopener">&lt;code>ggsave()&lt;/code>&lt;/a> to a plot is that all the additions are resolved from the left and at each point the result is pushed to the
&lt;a href="https://ggplot2.tidyverse.org/reference/last_plot.html" target="_blank" rel="noopener">&lt;code>last_plot()&lt;/code>&lt;/a> store. When it comes to the
&lt;a href="https://ggplot2.tidyverse.org/reference/ggsave.html" target="_blank" rel="noopener">&lt;code>ggsave()&lt;/code>&lt;/a> term, it will evaluate it and add the result to the plot. Since the expected plot is present in the
&lt;a href="https://ggplot2.tidyverse.org/reference/last_plot.html" target="_blank" rel="noopener">&lt;code>last_plot()&lt;/code>&lt;/a> store the evaluation of
&lt;a href="https://ggplot2.tidyverse.org/reference/ggsave.html" target="_blank" rel="noopener">&lt;code>ggsave()&lt;/code>&lt;/a> will proceed as expected. Prior to ggplot2 v3.3.4
&lt;a href="https://ggplot2.tidyverse.org/reference/ggsave.html" target="_blank" rel="noopener">&lt;code>ggsave()&lt;/code>&lt;/a> returned &lt;code>NULL&lt;/code> which, when added to a ggplot object is a no-op (i.e. it does nothing). The change that provoked the error is that with v3.3.4
&lt;a href="https://ggplot2.tidyverse.org/reference/ggsave.html" target="_blank" rel="noopener">&lt;code>ggsave()&lt;/code>&lt;/a> now returns the path to the saved file invisibly, and adding a string to a plot object is an error.&lt;/p>
&lt;p>Based on this understanding there are some interesting observations we can make: First, while you&amp;rsquo;ll get an error in v3.3.4, the plot is actually saved to a file since the error is thrown after the evaluation of
&lt;a href="https://ggplot2.tidyverse.org/reference/ggsave.html" target="_blank" rel="noopener">&lt;code>ggsave()&lt;/code>&lt;/a>. This means that you can &amp;ldquo;fix&amp;rdquo; your code by putting the whole expression in a
&lt;a href="https://rdrr.io/r/base/try.html" target="_blank" rel="noopener">&lt;code>try()&lt;/code>&lt;/a> block (please don&amp;rsquo;t do this though 😬):&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/try.html'>try&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mpg&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='nv'>displ&lt;/span>, y &lt;span class='o'>=&lt;/span> &lt;span class='nv'>hwy&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggsave.html'>ggsave&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"my_mpg_plot.png"&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='o'>)&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>Another tidbit is that the perceived feature was extremely brittle, even when it worked. Consider the following code:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>p1&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mpg&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='nv'>displ&lt;/span>, y &lt;span class='o'>=&lt;/span> &lt;span class='nv'>hwy&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>p2&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mpg&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_bar.html'>geom_bar&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='nv'>cyl&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>p1&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggsave.html'>ggsave&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"scatterplot.png"&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>p2&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggsave.html'>ggsave&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"barplot.png"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>If you assumed that
&lt;a href="https://ggplot2.tidyverse.org/reference/ggsave.html" target="_blank" rel="noopener">&lt;code>ggsave()&lt;/code>&lt;/a> could be added to a plot you&amp;rsquo;d expect the above to be totally valid code and that &lt;code>scatterplot.png&lt;/code> would contain the plot from &lt;code>p1&lt;/code>, and &lt;code>barplot.png&lt;/code> would contain the plot from &lt;code>p2&lt;/code>. However, since
&lt;a href="https://ggplot2.tidyverse.org/reference/ggsave.html" target="_blank" rel="noopener">&lt;code>ggsave()&lt;/code>&lt;/a> just fetched the last modified or rendered plot by default, both png files would be identical and contain the barplot in &lt;code>p2&lt;/code>.&lt;/p>
&lt;h2 id="wrapping-up">Wrapping up
&lt;a href="#wrapping-up">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>In the end this short post is not intended to shame the users who used
&lt;a href="https://ggplot2.tidyverse.org/reference/ggsave.html" target="_blank" rel="noopener">&lt;code>ggsave()&lt;/code>&lt;/a> in an unsupported way. ggplot2 is such a huge package that it is easy to pick up usage patterns without ever thinking about whether it is the correct way - if it works it works. Instead, this post is meant to showcase how, even with rigorous testing and no breaking changes, an update can break someones workflow, often to the surprise of the developer. Once a package becomes popular enough, even the slightest change in the code have the capacity for disruption.&lt;/p></description></item><item><title>vdiffr 1.0.0</title><link>https://www.tidyverse.org/blog/2021/06/vdiffr-1-0-0/</link><pubDate>Mon, 21 Jun 2021 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2021/06/vdiffr-1-0-0/</guid><description>&lt;p>We&amp;rsquo;re delighted to announce the release of
&lt;a href="https://vdiffr.r-lib.org/" target="_blank" rel="noopener">vdiffr&lt;/a> 1.0.0. vdiffr is a testthat extension that makes it easy to automatically check code that generates R graphics. In particular, vdiffr is used by the ggplot2 team to ensure that changes and contributions do not affect the expected output of plots.&lt;/p>
&lt;p>You can install vdiffr from CRAN with:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/utils/install.packages.html'>install.packages&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"vdiffr"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>This blog post briefly introduces the vdiffr workflow and describes the changes in this 1.0 version. In the last section you will learn how to migrate your existing vdiffr snapshots to the new version. You can see a full list of changes in the
&lt;a href="https://vdiffr.r-lib.org/news/index.html#vdiffr-1-0-0-2021-06-08" target="_blank" rel="noopener">release notes&lt;/a>.&lt;/p>
&lt;p>Attach these three packages to follow the examples:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://testthat.r-lib.org'>testthat&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://vdiffr.r-lib.org/'>vdiffr&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://ggplot2.tidyverse.org'>ggplot2&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;h2 id="regression-testing-for-r-graphics">Regression testing for R graphics
&lt;a href="#regression-testing-for-r-graphics">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>vdiffr is a
&lt;a href="https://testthat.r-lib.org/" target="_blank" rel="noopener">testthat&lt;/a> extension for monitoring the appearance of R plots and graphics over time. Its goals are to make it easy to test graphics, make it easy to review changes, and to be reproducible across platforms.&lt;/p>
&lt;p>The only vdiffr function you will need to use is
&lt;a href="https://vdiffr.r-lib.org/reference/expect_doppelganger.html" target="_blank" rel="noopener">&lt;code>expect_doppelganger()&lt;/code>&lt;/a>. It takes a plot title and a plot object.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nf'>&lt;a href='https://testthat.r-lib.org/reference/test_that.html'>test_that&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"ggplot2 histogram works"&lt;/span>, &lt;span class='o'>&amp;#123;&lt;/span>
&lt;span class='nv'>p&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mtcars&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_histogram.html'>geom_histogram&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>disp&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nf'>&lt;a href='https://vdiffr.r-lib.org/reference/expect_doppelganger.html'>expect_doppelganger&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"default histogram"&lt;/span>, &lt;span class='nv'>p&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='o'>&amp;#125;&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>With base graphics a slightly different syntax is needed because base plots are created by side effects rather than by constructing a plot object as in ggplot2. In this case you can supply a function that generates the plot:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nf'>&lt;a href='https://testthat.r-lib.org/reference/test_that.html'>test_that&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"base histogram works"&lt;/span>, &lt;span class='o'>&amp;#123;&lt;/span>
&lt;span class='nv'>p&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='kr'>function&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/graphics/hist.html'>hist&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mtcars&lt;/span>&lt;span class='o'>$&lt;/span>&lt;span class='nv'>disp&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nf'>&lt;a href='https://vdiffr.r-lib.org/reference/expect_doppelganger.html'>expect_doppelganger&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"base histogram"&lt;/span>, &lt;span class='nv'>p&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='o'>&amp;#125;&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>Then run
&lt;a href="https://devtools.r-lib.org//reference/test.html" target="_blank" rel="noopener">&lt;code>devtools::test()&lt;/code>&lt;/a> as usual. The first time it is run,
&lt;a href="https://vdiffr.r-lib.org/reference/expect_doppelganger.html" target="_blank" rel="noopener">&lt;code>expect_doppelganger()&lt;/code>&lt;/a> generates a reproducible SVG file that represents the expected appearance of your plot and saves it inside your test folder. After that, the generated SVG is compared to the saved version and any mismatch is reported as a failure in the testthat output.&lt;/p>
&lt;p>Note that, by default, mismatches do not cause failures on CRAN machines. That&amp;rsquo;s because testing the appearance of a plot is inherently fragile. Small upstream changes (e.g. in the R graphics device or in the ggplot2 package) might cause subtle differences in the appearance of a plot that are not real failures. If every such change caused a CRAN failure this would be distracting for both you and the CRAN maintainers. This is why vdiffr expectations only report failures when they are ran locally or in your CI platform. This allows you to monitor the appearance of your plots over time without causing distracting and time-consuming failures on CRAN.&lt;/p>
&lt;h2 id="new-snapshot-management-system-via-testthat-3">New snapshot management system via testthat 3
&lt;a href="#new-snapshot-management-system-via-testthat-3">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>The main user visible change in vdiffr 1.0.0 is the replacement of the case management system and the accompanying Shiny app by the
&lt;a href="https://testthat.r-lib.org/articles/snapshotting.html" target="_blank" rel="noopener">snapshot system introduced in testthat 3&lt;/a>. Following this change, a lot of vdiffr code has been removed and the package is now a simple generator of reproducible SVGs.&lt;/p>
&lt;p>Snapshot management in testthat 3 is much more straightforward than the mechanism in previous versions of vdiffr.&lt;/p>
&lt;ul>
&lt;li>
&lt;p>New cases are automatically recorded in the snapshot folder. They no longer need to be validated via the Shiny app.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Orphaned cases are automatically deleted from the snapshot folder.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Failures are reviewed with
&lt;a href="https://testthat.r-lib.org/reference/snapshot_accept.html" target="_blank" rel="noopener">&lt;code>testthat::snapshot_review()&lt;/code>&lt;/a>, a minimalist Shiny app powered by the
&lt;a href="https://github.com/r-lib/diffviewer/" target="_blank" rel="noopener">diffviewer&lt;/a> package.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>This workflow integrates nicely with other kinds of testthat snapshots such as error, warning, or output snapshots.&lt;/p>
&lt;h2 id="a-simpler-svg-engine">A simpler SVG engine
&lt;a href="#a-simpler-svg-engine">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>To generate reproducible snapshots, vdiffr embeds an SVG generation engine based on svglite. This engine has been updated and simplified.&lt;/p>
&lt;ul>
&lt;li>
&lt;p>The main user-visible change from this update is that points now look smaller in the new SVGs. In the old snapshots they were too large.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>The computation of character sizes is now hardcoded which allowed us to simplify the dependencies of vdiffr. It should also be less maintenance work for us in the long term.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="migrating-existing-vdiffr-snapshots">Migrating existing vdiffr snapshots
&lt;a href="#migrating-existing-vdiffr-snapshots">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Because of the switch to testthat 3 snapshots and the update to the SVG engine, you will need to regenerate all of your figures if you are an existing vdiffr user. Thankfully the process is straightforward and only includes two steps.&lt;/p>
&lt;ol>
&lt;li>
&lt;p>This step is optional. Since the update to the SVG engine alters the appearance of your plots, you might want to review the changes. To do so, install the github-only 0.4.0 version of vdiffr with
&lt;a href="https://remotes.r-lib.org/reference/install_github.html" target="_blank" rel="noopener">&lt;code>remotes::install_github(&amp;quot;r-lib/vdiffr@v0.4.0&amp;quot;)&lt;/code>&lt;/a>. This release only contains the new SVG engine. You can then review the snapshot changes as usual with &lt;code>vdiffr::manage_cases()&lt;/code>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Install vdiffr 1.0.0 from CRAN. Delete the &lt;code>tests/figs&lt;/code> directory where the old snapshots were saved (they will now be saved in &lt;code>tests/testthat/_snaps&lt;/code>) and run
&lt;a href="https://devtools.r-lib.org//reference/test.html" target="_blank" rel="noopener">&lt;code>devtools::test()&lt;/code>&lt;/a> to generate the new snapshots.&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>Please let us know of any trouble during migration, we&amp;rsquo;re here to help!&lt;/p>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>vdiffr 1.0.0 wouldn&amp;rsquo;t be possible without my colleague Thomas Lin Pedersen. His experience with R graphics device (
&lt;a href="https://github.com/r-lib/ragg" target="_blank" rel="noopener">raggs&lt;/a>,
&lt;a href="https://github.com/r-lib/textshaping" target="_blank" rel="noopener">textshaping&lt;/a>, &amp;hellip;) was crucial to the update and simplification of the SVG engine. Thanks Thomas!&lt;/p>
&lt;p>We also would like to thank all the issues and code contributors for this release:
&lt;a href="https://github.com/aghaynes" target="_blank" rel="noopener">@aghaynes&lt;/a>,
&lt;a href="https://github.com/IndrajeetPatil" target="_blank" rel="noopener">@IndrajeetPatil&lt;/a>,
&lt;a href="https://github.com/JauntyJJS" target="_blank" rel="noopener">@JauntyJJS&lt;/a>,
&lt;a href="https://github.com/jgabry" target="_blank" rel="noopener">@jgabry&lt;/a>,
&lt;a href="https://github.com/krassowski" target="_blank" rel="noopener">@krassowski&lt;/a>,
&lt;a href="https://github.com/mtalluto" target="_blank" rel="noopener">@mtalluto&lt;/a>,
&lt;a href="https://github.com/pat-s" target="_blank" rel="noopener">@pat-s&lt;/a>,
&lt;a href="https://github.com/rfaelens" target="_blank" rel="noopener">@rfaelens&lt;/a>, and
&lt;a href="https://github.com/Sumidu" target="_blank" rel="noopener">@Sumidu&lt;/a>.&lt;/p></description></item><item><title>scales 1.1.0</title><link>https://www.tidyverse.org/blog/2019/11/scales-1-1-0/</link><pubDate>Mon, 18 Nov 2019 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2019/11/scales-1-1-0/</guid><description>&lt;p>We&amp;rsquo;re thrilled to announce the release of
&lt;a href="https://scales.r-lib.org/" target="_blank" rel="noopener">scales&lt;/a> 1.1.0.
The scales package provides much of the infrastructure that underlies ggplot2&amp;rsquo;s scales, and using it allow you to customize the transformations, breaks, and labels used by ggplot2. Get the latest version with:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">install.packages&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;scales&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>The biggest improvements in this release are related to usability and documentation:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Axis breaks and labels have a new naming scheme: functions that generate
breaks from limits are called &lt;code>breaks_&lt;/code>; functions that generate labels
from breaks are called &lt;code>labels_&lt;/code>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>All the examples for breaks and labels have been overhauled to use new
&lt;code>demo_continuous()&lt;/code>, &lt;code>demo_discrete()&lt;/code>, and &lt;code>demo_log10()&lt;/code>. These make
it much easier to see how you&amp;rsquo;d use scales functions with ggplot2, so
when you&amp;rsquo;re
&lt;a href="https://scales.r-lib.org/reference/index.html" target="_blank" rel="noopener">browsing the documentation&lt;/a>,
you can immediately see how the functions work with ggplot2.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">scales&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>There are also a few new breaks and labels functions:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>New
&lt;a href="https://scales.r-lib.org/reference/breaks_width.html" target="_blank" rel="noopener">&lt;code>breaks_width()&lt;/code>&lt;/a>
allows you to specify the distance between breaks rather than the number
of them.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">demo_continuous&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">100&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">breaks&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">breaks_width&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">10&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1">#&amp;gt; scale_x_continuous(breaks = breaks_width(10))&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="figs/unnamed-chunk-3-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/li>
&lt;li>
&lt;p>
&lt;a href="https://scales.r-lib.org/reference/label_number.html" target="_blank" rel="noopener">&lt;code>label_number()&lt;/code>&lt;/a> and
&lt;a href="https://scales.r-lib.org/reference/label_percent.html" target="_blank" rel="noopener">&lt;code>label_percent()&lt;/code>&lt;/a>
do a better job of picking the default &lt;code>accuracy&lt;/code>, which means that you
should generally get the correct number of decimal place by default.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">demo_continuous&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">0.1&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">labels&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">label_number&lt;/span>&lt;span class="p">())&lt;/span>
&lt;span class="c1">#&amp;gt; scale_x_continuous(labels = label_number())&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="figs/unnamed-chunk-4-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">demo_continuous&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">0.1&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">labels&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">label_percent&lt;/span>&lt;span class="p">())&lt;/span>
&lt;span class="c1">#&amp;gt; scale_x_continuous(labels = label_percent())&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="figs/unnamed-chunk-4-2.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/li>
&lt;li>
&lt;p>New
&lt;a href="https://scales.r-lib.org/reference/label_bytes.html" target="_blank" rel="noopener">&lt;code>label_bytes()&lt;/code>&lt;/a>
replaces &lt;code>number_bytes_format()&lt;/code> with a more convenient interface. It takes
a single &lt;code>unit&lt;/code> argument which can either be an SI unit (e.g. &amp;ldquo;kB&amp;rdquo;), a
binary unit (e.g. &amp;ldquo;kIB&amp;rdquo;), or an automatic unit (either &amp;ldquo;auto_si&amp;rdquo; or
&amp;ldquo;auto_binary&amp;rdquo;).&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="c1"># default is &amp;#34;auto_si&amp;#34;&lt;/span>
&lt;span class="nf">demo_continuous&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">1e6&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">label&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">label_bytes&lt;/span>&lt;span class="p">())&lt;/span>
&lt;span class="c1">#&amp;gt; scale_x_continuous(label = label_bytes())&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="figs/unnamed-chunk-5-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="c1"># supply a unit if you want all labels to use the same unit&lt;/span>
&lt;span class="nf">demo_continuous&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">1e6&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">label&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">label_bytes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;kB&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1">#&amp;gt; scale_x_continuous(label = label_bytes(&amp;#34;kB&amp;#34;))&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="figs/unnamed-chunk-5-2.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/li>
&lt;li>
&lt;p>New
&lt;a href="https://scales.r-lib.org/reference/label_number_auto.html" target="_blank" rel="noopener">&lt;code>label_number_auto()&lt;/code>&lt;/a>
automatically picks between &lt;code>label_number()&lt;/code> and &lt;code>label_scientific()&lt;/code> based
on the range of the input. It should produce compact labels over a very wide
range of inputs. We are considering making this the default labeller for
a future version of ggplot2.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">demo_continuous&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">1e5&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">labels&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">label_number_auto&lt;/span>&lt;span class="p">())&lt;/span>
&lt;span class="c1">#&amp;gt; scale_x_continuous(labels = label_number_auto())&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="figs/unnamed-chunk-6-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">demo_continuous&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">1e10&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">labels&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">label_number_auto&lt;/span>&lt;span class="p">())&lt;/span>
&lt;span class="c1">#&amp;gt; scale_x_continuous(labels = label_number_auto())&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="figs/unnamed-chunk-6-2.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/li>
&lt;li>
&lt;p>New
&lt;a href="https://scales.r-lib.org/reference/label_number_si.html" target="_blank" rel="noopener">&lt;code>label_number_si()&lt;/code>&lt;/a>
formats numeric vectors with SI units.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">demo_continuous&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">1e9&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">label&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">label_number_si&lt;/span>&lt;span class="p">())&lt;/span>
&lt;span class="c1">#&amp;gt; scale_x_continuous(label = label_number_si())&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="figs/unnamed-chunk-7-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">demo_log10&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">1e9&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">breaks&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">log_breaks&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">10&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">labels&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">label_number_si&lt;/span>&lt;span class="p">())&lt;/span>
&lt;span class="c1">#&amp;gt; scale_x_log10(breaks = log_breaks(10), labels = label_number_si())&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="figs/unnamed-chunk-7-2.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/li>
&lt;li>
&lt;p>New
&lt;a href="https://scales.r-lib.org/reference/label_date.html" target="_blank" rel="noopener">&lt;code>label_date_short()&lt;/code>&lt;/a>
creates labels for a date axis that only show the components of the date
that have changed since the previous label.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">five_months&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">as.POSIXct&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;2019-11-01&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;2020-03-01&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="nf">demo_datetime&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">five_months&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; scale_x_datetime()&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="figs/unnamed-chunk-8-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">demo_datetime&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">five_months&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">labels&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">label_date_short&lt;/span>&lt;span class="p">())&lt;/span>
&lt;span class="c1">#&amp;gt; scale_x_datetime(labels = label_date_short())&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="figs/unnamed-chunk-8-2.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>See the
&lt;a href="https://scales.r-lib.org/news/index.html#scales-1-1-0" target="_blank" rel="noopener">change log&lt;/a> for a full list of changes and bug fixes in this version.&lt;/p>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>A big thanks to all the GitHub contributors who helped make this release happen!
&lt;a href="https://github.com/agila5" target="_blank" rel="noopener">@agila5&lt;/a>,
&lt;a href="https://github.com/Anirudhsekar96" target="_blank" rel="noopener">@Anirudhsekar96&lt;/a>,
&lt;a href="https://github.com/apsalverda" target="_blank" rel="noopener">@apsalverda&lt;/a>,
&lt;a href="https://github.com/b-lev" target="_blank" rel="noopener">@b-lev&lt;/a>,
&lt;a href="https://github.com/bhogan-mitre" target="_blank" rel="noopener">@bhogan-mitre&lt;/a>,
&lt;a href="https://github.com/billdenney" target="_blank" rel="noopener">@billdenney&lt;/a>,
&lt;a href="https://github.com/bjedwards" target="_blank" rel="noopener">@bjedwards&lt;/a>,
&lt;a href="https://github.com/bkkkk" target="_blank" rel="noopener">@bkkkk&lt;/a>,
&lt;a href="https://github.com/blairj09" target="_blank" rel="noopener">@blairj09&lt;/a>,
&lt;a href="https://github.com/clauswilke" target="_blank" rel="noopener">@clauswilke&lt;/a>,
&lt;a href="https://github.com/const-ae" target="_blank" rel="noopener">@const-ae&lt;/a>,
&lt;a href="https://github.com/davidmasp" target="_blank" rel="noopener">@davidmasp&lt;/a>,
&lt;a href="https://github.com/dpseidel" target="_blank" rel="noopener">@dpseidel&lt;/a>,
&lt;a href="https://github.com/eliocamp" target="_blank" rel="noopener">@eliocamp&lt;/a>,
&lt;a href="https://github.com/GegznaV" target="_blank" rel="noopener">@GegznaV&lt;/a>,
&lt;a href="https://github.com/hadley" target="_blank" rel="noopener">@hadley&lt;/a>,
&lt;a href="https://github.com/HenrikBengtsson" target="_blank" rel="noopener">@HenrikBengtsson&lt;/a>,
&lt;a href="https://github.com/hvaret" target="_blank" rel="noopener">@hvaret&lt;/a>,
&lt;a href="https://github.com/jcheng5" target="_blank" rel="noopener">@jcheng5&lt;/a>,
&lt;a href="https://github.com/kiernann" target="_blank" rel="noopener">@kiernann&lt;/a>,
&lt;a href="https://github.com/kuriwaki" target="_blank" rel="noopener">@kuriwaki&lt;/a>,
&lt;a href="https://github.com/mikmart" target="_blank" rel="noopener">@mikmart&lt;/a>,
&lt;a href="https://github.com/njtierney" target="_blank" rel="noopener">@njtierney&lt;/a>,
&lt;a href="https://github.com/paleolimbot" target="_blank" rel="noopener">@paleolimbot&lt;/a>,
&lt;a href="https://github.com/sada1993" target="_blank" rel="noopener">@sada1993&lt;/a>,
&lt;a href="https://github.com/schloerke" target="_blank" rel="noopener">@schloerke&lt;/a>,
&lt;a href="https://github.com/sflippl" target="_blank" rel="noopener">@sflippl&lt;/a>,
&lt;a href="https://github.com/slowkow" target="_blank" rel="noopener">@slowkow&lt;/a>,
&lt;a href="https://github.com/sobrietie" target="_blank" rel="noopener">@sobrietie&lt;/a>,
&lt;a href="https://github.com/tdawry" target="_blank" rel="noopener">@tdawry&lt;/a>,
&lt;a href="https://github.com/teramonagi" target="_blank" rel="noopener">@teramonagi&lt;/a>,
&lt;a href="https://github.com/thomasp85" target="_blank" rel="noopener">@thomasp85&lt;/a>,
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>,
&lt;a href="https://github.com/tungmilan" target="_blank" rel="noopener">@tungmilan&lt;/a>,
&lt;a href="https://github.com/turgeonmaxime" target="_blank" rel="noopener">@turgeonmaxime&lt;/a>,
&lt;a href="https://github.com/wibeasley" target="_blank" rel="noopener">@wibeasley&lt;/a>,
&lt;a href="https://github.com/woodwards" target="_blank" rel="noopener">@woodwards&lt;/a>, and
&lt;a href="https://github.com/zamorarr" target="_blank" rel="noopener">@zamorarr&lt;/a>.&lt;/p></description></item><item><title>ggplot2 3.2.0</title><link>https://www.tidyverse.org/blog/2019/06/ggplot2-3-2-0/</link><pubDate>Sun, 16 Jun 2019 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2019/06/ggplot2-3-2-0/</guid><description>&lt;p>We&amp;rsquo;re thrilled to announce the release of
&lt;a href="https://ggplot2.tidyverse.org" target="_blank" rel="noopener">ggplot2 3.2.0&lt;/a> on CRAN. ggplot2 is a system for declaratively creating graphics, based on The Grammar of Graphics. You provide the data, tell ggplot2 how to map variables to aesthetics, what graphical primitives to use, and it takes care of the details.&lt;/p>
&lt;p>The 3.2.0 release is a minor release which focuses on performance improvements, but also includes a few new features and a range of bug fixes. There are no breaking changes in this release, though a few changes may affect the visual appearance of plots in minor ways, noted below. Further, there are a few changes that developers of extension packages may need to take into account, but which won&amp;rsquo;t affect regular users. For a full overview of the changes, please see the
&lt;a href="https://ggplot2.tidyverse.org/news/index.html" target="_blank" rel="noopener">release notes&lt;/a>.&lt;/p>
&lt;p>This release also includes a range of contributions made during our tidyverse developer day in Austin, many from first-time contributors. We hope these contributors have been inspired to continue taking part in the development of ggplot2.&lt;/p>
&lt;p>Lastly, this release also sees the entrance of Hiroaki Yutani (&lt;em>yutannihilation&lt;/em> on both
&lt;a href="https://github.com/yutannihilation" target="_blank" rel="noopener">Github&lt;/a> and
&lt;a href="https://twitter.com/yutannihilat_en" target="_blank" rel="noopener">Twitter&lt;/a>) into the core developer team. Hiroaki has been amazing in tackling large and small issues, and we are very lucky to have him.&lt;/p>
&lt;h2 id="performance">Performance
&lt;a href="#performance">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>A large part of this release relates to internal changes intended to speed up ggplot2. Most of these are general and will affect the rendering speed of all the plots you make, but there has also been a specific focus on
&lt;a href="https://ggplot2.tidyverse.org/reference/ggsf.html" target="_blank" rel="noopener">&lt;code>geom_sf()&lt;/code>&lt;/a>. This is all part of a larger effort to make plotting in R more performant, and also includes changes in
&lt;a href="https://gtable.r-lib.org" target="_blank" rel="noopener">gtable&lt;/a>,
&lt;a href="http://r-spatial.github.io/sf/" target="_blank" rel="noopener">sf&lt;/a>, and R itself. Make sure to use the latest version of all of these packages to get the full benefit of the improvements.&lt;/p>
&lt;h3 id="geom_sf">geom_sf
&lt;a href="#geom_sf">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>While most changes are general, &lt;code>geom_sf()&lt;/code> has received special attention. Most of this comes down to how &lt;code>geom_sf()&lt;/code> converted its input to grobs, which was done row by row. This meant that plotting 10,000 &lt;code>ST_POINT&lt;/code> objects would create 10,000 point grobs instead of a single grob containing 10,000 points. The same was true for all other data types. With the new release, ggplot2 will try to pack all objects into a single grob, which is possible when all objects are of the same type (&lt;code>MULTI*&lt;/code> types can be mixed with scalar types). Packing polygons into a single grob is only possible with R 3.6.0 and upwards, but all other types are backwards compatible with older versions of R. If the data contains a mix of types, ggplot2 will fall back to creating a grob for each row, but this is a much less frequent situation, and can usually be remedied by creating multiple sf layers instead. The other big performance bottleneck in plotting sf data was the normalization of the coordinates. As sf stores its data in nested lists, the standard vectorization in R doesn&amp;rsquo;t apply, which led to much worse performance compared to normalizing data stored in standard data frame format. The latest release of sf includes optimized functions for these operations implemented in C which ggplot2 now uses, so plotting performance has improved immensely.&lt;/p>
&lt;h2 id="new-features">New features
&lt;a href="#new-features">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>With this release, ggplot2 gains the ability to plot polygons with holes (only in R 3.6 and later). Rather than providing a new geom, the functionality is built into
&lt;a href="https://ggplot2.tidyverse.org/reference/geom_polygon.html" target="_blank" rel="noopener">&lt;code>geom_polygon()&lt;/code>&lt;/a> through a new &lt;code>subgroup&lt;/code> aesthetic. Much as the &lt;code>group&lt;/code> aesthetic separates polygons in the data, the &lt;code>subgroup&lt;/code> aesthetic separates parts of each polygon. The first occurring subgroup should always be the outer ring of the polygon and any subsequent subgroup will describe holes in this (or, potentially, polygons within the holes and so on). There will not be any checks performed on the position of the subgroups, so it is the responsibility of the user to make sure they are inside the outer ring.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ggplot2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">tibble&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">radians&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">seq&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">2&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="kc">pi&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">length.out&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">101&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="n">[&lt;/span>&lt;span class="m">-1&lt;/span>&lt;span class="n">]&lt;/span>
&lt;span class="n">circle&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">tibble&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">cos&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">radians&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="nf">cos&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">radians&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="m">0.5&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">sin&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">radians&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="nf">sin&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">radians&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="m">0.5&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="n">subgroup&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">rep&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">2&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">each&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">100&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">circle&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_polygon&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">subgroup&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">subgroup&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="n">fill&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;firebrick&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">colour&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;black&amp;#34;&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2019-03-ggplot2-3-2-0_files/figure-html/unnamed-chunk-1-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;p>The other bigger new feature is the ability to modify the guide representation
of a layer through a new &lt;code>key_glyph&lt;/code> argument in all geoms. While the defaults
are often fine, there are situations where a different look serves the
visualisation:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">economics&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">date&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">psavert&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">color&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;savings rate&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_line&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">key_glyph&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;timeseries&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2019-03-ggplot2-3-2-0_files/figure-html/unnamed-chunk-2-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;p>&lt;code>geom_rug&lt;/code> has seen a range of improvements to give users more control over the appearance of the rug lines. The length of the rug lines can now be controlled and it is further possible to specify that they should be placed outside of the plotting region:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mtcars&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">wt&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">mpg&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_point&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_rug&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sides&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;tr&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">length&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">unit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;mm&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">outside&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">TRUE&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="c1"># Need to turn clipping off if rug is outside plot area&lt;/span>
&lt;span class="nf">coord_cartesian&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">clip&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;off&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2019-03-ggplot2-3-2-0_files/figure-html/unnamed-chunk-3-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;p>Aesthetics will now accept a function returning &lt;code>NULL&lt;/code>, and treat it as setting the aesthetic to &lt;code>NULL&lt;/code>. This can make it easier to program with ggplot2 e.g. by catching errors from non-existing variables:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">df&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">data.frame&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="m">10&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="m">10&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">wrap&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">...&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">tryCatch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">...&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">error&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kc">NULL&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">colour&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">wrap&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">no_such_column&lt;/span>&lt;span class="p">)))&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_point&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2019-03-ggplot2-3-2-0_files/figure-html/unnamed-chunk-4-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;p>Lastly,
&lt;a href="https://ggplot2.tidyverse.org/reference/stat_function.html" target="_blank" rel="noopener">&lt;code>stat_function()&lt;/code>&lt;/a> gains the ability to accept purrr-style lambda functions. The use of the formula notation for creating lambda functions has become widespread, and it is only natural that ggplot2 accepts it as well:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">df&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">data.frame&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="m">10&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="m">10&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="n">^2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_point&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">stat_function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fun&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">~&lt;/span> &lt;span class="n">.x^2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2019-03-ggplot2-3-2-0_files/figure-html/unnamed-chunk-5-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;h2 id="minor-fixes-and-improvements">Minor fixes and improvements
&lt;a href="#minor-fixes-and-improvements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>
&lt;a href="https://ggplot2.tidyverse.org/reference/ggsf.html" target="_blank" rel="noopener">&lt;code>coord_sf&lt;/code>&lt;/a> now behaves the same as the other coords in relation to how it draws grid lines. This means that the aesthetics of the grid matches that of the other coordinate systems, and that it can be turned off through the theming system. You may see slight visual changes when using &lt;code>geom_sf()&lt;/code> as the default grid lines were slightly thicker in &lt;code>coord_sf()&lt;/code> prior to this change.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sf&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; Linking to GEOS 3.6.1, GDAL 2.1.3, PROJ 4.9.3&lt;/span>
&lt;span class="n">nc&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">st_read&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">system.file&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;gpkg/nc.gpkg&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">package&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;sf&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">quiet&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">TRUE&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nc&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_sf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">nc&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fill&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">AREA&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">theme_void&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2019-03-ggplot2-3-2-0_files/figure-html/unnamed-chunk-6-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;p>The automatic naming of scales has been refined and no longer contains back-ticks when the scale name is based on a complex aesthetic expression (e.g. &lt;code>aes(x = a + b)&lt;/code>). Again, this may result in slight changes to the visual appearance of plots, but only on a very superficial level.&lt;/p>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Thank you to the 171 people who who contributed issues, code and comments to this release:
&lt;a href="https://github.com/abl0719" target="_blank" rel="noopener">@abl0719&lt;/a>,
&lt;a href="https://github.com/agila5" target="_blank" rel="noopener">@agila5&lt;/a>,
&lt;a href="https://github.com/ahmohamed" target="_blank" rel="noopener">@ahmohamed&lt;/a>,
&lt;a href="https://github.com/amysheep" target="_blank" rel="noopener">@amysheep&lt;/a>,
&lt;a href="https://github.com/andhamel" target="_blank" rel="noopener">@andhamel&lt;/a>,
&lt;a href="https://github.com/anthonytw" target="_blank" rel="noopener">@anthonytw&lt;/a>,
&lt;a href="https://github.com/Atomizer15" target="_blank" rel="noopener">@Atomizer15&lt;/a>,
&lt;a href="https://github.com/atusy" target="_blank" rel="noopener">@atusy&lt;/a>,
&lt;a href="https://github.com/baderstine" target="_blank" rel="noopener">@baderstine&lt;/a>,
&lt;a href="https://github.com/bakaburg1" target="_blank" rel="noopener">@bakaburg1&lt;/a>,
&lt;a href="https://github.com/batpigandme" target="_blank" rel="noopener">@batpigandme&lt;/a>,
&lt;a href="https://github.com/bdschwartzkopf" target="_blank" rel="noopener">@bdschwartzkopf&lt;/a>,
&lt;a href="https://github.com/beckymaust" target="_blank" rel="noopener">@beckymaust&lt;/a>,
&lt;a href="https://github.com/behrman" target="_blank" rel="noopener">@behrman&lt;/a>,
&lt;a href="https://github.com/bfgray3" target="_blank" rel="noopener">@bfgray3&lt;/a>,
&lt;a href="https://github.com/billdenney" target="_blank" rel="noopener">@billdenney&lt;/a>,
&lt;a href="https://github.com/Bisaloo" target="_blank" rel="noopener">@Bisaloo&lt;/a>,
&lt;a href="https://github.com/bjreisman" target="_blank" rel="noopener">@bjreisman&lt;/a>,
&lt;a href="https://github.com/blueskypie" target="_blank" rel="noopener">@blueskypie&lt;/a>,
&lt;a href="https://github.com/brfitzpatrick" target="_blank" rel="noopener">@brfitzpatrick&lt;/a>,
&lt;a href="https://github.com/brianwdavis" target="_blank" rel="noopener">@brianwdavis&lt;/a>,
&lt;a href="https://github.com/brodieG" target="_blank" rel="noopener">@brodieG&lt;/a>,
&lt;a href="https://github.com/caayala" target="_blank" rel="noopener">@caayala&lt;/a>,
&lt;a href="https://github.com/cderv" target="_blank" rel="noopener">@cderv&lt;/a>,
&lt;a href="https://github.com/chambox" target="_blank" rel="noopener">@chambox&lt;/a>,
&lt;a href="https://github.com/clairemcwhite" target="_blank" rel="noopener">@clairemcwhite&lt;/a>,
&lt;a href="https://github.com/clauswilke" target="_blank" rel="noopener">@clauswilke&lt;/a>,
&lt;a href="https://github.com/codetrainee" target="_blank" rel="noopener">@codetrainee&lt;/a>,
&lt;a href="https://github.com/ColinFay" target="_blank" rel="noopener">@ColinFay&lt;/a>,
&lt;a href="https://github.com/connorlewis" target="_blank" rel="noopener">@connorlewis&lt;/a>,
&lt;a href="https://github.com/coolbutuseless" target="_blank" rel="noopener">@coolbutuseless&lt;/a>,
&lt;a href="https://github.com/courtiol" target="_blank" rel="noopener">@courtiol&lt;/a>,
&lt;a href="https://github.com/cschwarz-stat-sfu-ca" target="_blank" rel="noopener">@cschwarz-stat-sfu-ca&lt;/a>,
&lt;a href="https://github.com/cystein" target="_blank" rel="noopener">@cystein&lt;/a>,
&lt;a href="https://github.com/dan-booth" target="_blank" rel="noopener">@dan-booth&lt;/a>,
&lt;a href="https://github.com/daniel-wells" target="_blank" rel="noopener">@daniel-wells&lt;/a>,
&lt;a href="https://github.com/DanielReedOcean" target="_blank" rel="noopener">@DanielReedOcean&lt;/a>,
&lt;a href="https://github.com/danielsjf" target="_blank" rel="noopener">@danielsjf&lt;/a>,
&lt;a href="https://github.com/daranzolin" target="_blank" rel="noopener">@daranzolin&lt;/a>,
&lt;a href="https://github.com/dariyasydykova" target="_blank" rel="noopener">@dariyasydykova&lt;/a>,
&lt;a href="https://github.com/dempseynoel" target="_blank" rel="noopener">@dempseynoel&lt;/a>,
&lt;a href="https://github.com/dipterix" target="_blank" rel="noopener">@dipterix&lt;/a>,
&lt;a href="https://github.com/dirkschumacher" target="_blank" rel="noopener">@dirkschumacher&lt;/a>,
&lt;a href="https://github.com/dkahle" target="_blank" rel="noopener">@dkahle&lt;/a>,
&lt;a href="https://github.com/dominicroye" target="_blank" rel="noopener">@dominicroye&lt;/a>,
&lt;a href="https://github.com/dongzhuoer" target="_blank" rel="noopener">@dongzhuoer&lt;/a>,
&lt;a href="https://github.com/dpseidel" target="_blank" rel="noopener">@dpseidel&lt;/a>,
&lt;a href="https://github.com/dvcv" target="_blank" rel="noopener">@dvcv&lt;/a>,
&lt;a href="https://github.com/efehandanisman" target="_blank" rel="noopener">@efehandanisman&lt;/a>,
&lt;a href="https://github.com/Eisit" target="_blank" rel="noopener">@Eisit&lt;/a>,
&lt;a href="https://github.com/Eli-Berkow" target="_blank" rel="noopener">@Eli-Berkow&lt;/a>,
&lt;a href="https://github.com/eliocamp" target="_blank" rel="noopener">@eliocamp&lt;/a>,
&lt;a href="https://github.com/ellessenne" target="_blank" rel="noopener">@ellessenne&lt;/a>,
&lt;a href="https://github.com/eoppe1022" target="_blank" rel="noopener">@eoppe1022&lt;/a>,
&lt;a href="https://github.com/felipegerard" target="_blank" rel="noopener">@felipegerard&lt;/a>,
&lt;a href="https://github.com/fereshtehizadi" target="_blank" rel="noopener">@fereshtehizadi&lt;/a>,
&lt;a href="https://github.com/flying-sheep" target="_blank" rel="noopener">@flying-sheep&lt;/a>,
&lt;a href="https://github.com/fmmattioni" target="_blank" rel="noopener">@fmmattioni&lt;/a>,
&lt;a href="https://github.com/foehnwind" target="_blank" rel="noopener">@foehnwind&lt;/a>,
&lt;a href="https://github.com/fostvedt" target="_blank" rel="noopener">@fostvedt&lt;/a>,
&lt;a href="https://github.com/gagnagaman" target="_blank" rel="noopener">@gagnagaman&lt;/a>,
&lt;a href="https://github.com/gangstertiny" target="_blank" rel="noopener">@gangstertiny&lt;/a>,
&lt;a href="https://github.com/GBuchanon" target="_blank" rel="noopener">@GBuchanon&lt;/a>,
&lt;a href="https://github.com/gdkrmr" target="_blank" rel="noopener">@gdkrmr&lt;/a>,
&lt;a href="https://github.com/gdmcdonald" target="_blank" rel="noopener">@gdmcdonald&lt;/a>,
&lt;a href="https://github.com/ghost" target="_blank" rel="noopener">@ghost&lt;/a>,
&lt;a href="https://github.com/gibran-ali" target="_blank" rel="noopener">@gibran-ali&lt;/a>,
&lt;a href="https://github.com/hadley" target="_blank" rel="noopener">@hadley&lt;/a>,
&lt;a href="https://github.com/HaoLi111" target="_blank" rel="noopener">@HaoLi111&lt;/a>,
&lt;a href="https://github.com/has2k1" target="_blank" rel="noopener">@has2k1&lt;/a>,
&lt;a href="https://github.com/heavywatal" target="_blank" rel="noopener">@heavywatal&lt;/a>,
&lt;a href="https://github.com/Henrik-P" target="_blank" rel="noopener">@Henrik-P&lt;/a>,
&lt;a href="https://github.com/HenrikBengtsson" target="_blank" rel="noopener">@HenrikBengtsson&lt;/a>,
&lt;a href="https://github.com/hlendway" target="_blank" rel="noopener">@hlendway&lt;/a>,
&lt;a href="https://github.com/hoasxyz" target="_blank" rel="noopener">@hoasxyz&lt;/a>,
&lt;a href="https://github.com/hwt" target="_blank" rel="noopener">@hwt&lt;/a>,
&lt;a href="https://github.com/hyiltiz" target="_blank" rel="noopener">@hyiltiz&lt;/a>,
&lt;a href="https://github.com/idavydov" target="_blank" rel="noopener">@idavydov&lt;/a>,
&lt;a href="https://github.com/Ilia-Kosenkov" target="_blank" rel="noopener">@Ilia-Kosenkov&lt;/a>,
&lt;a href="https://github.com/IndrajeetPatil" target="_blank" rel="noopener">@IndrajeetPatil&lt;/a>,
&lt;a href="https://github.com/ismayc" target="_blank" rel="noopener">@ismayc&lt;/a>,
&lt;a href="https://github.com/JamesCuster" target="_blank" rel="noopener">@JamesCuster&lt;/a>,
&lt;a href="https://github.com/jarauh" target="_blank" rel="noopener">@jarauh&lt;/a>,
&lt;a href="https://github.com/JayVii" target="_blank" rel="noopener">@JayVii&lt;/a>,
&lt;a href="https://github.com/jmarshallnz" target="_blank" rel="noopener">@jmarshallnz&lt;/a>,
&lt;a href="https://github.com/JohnMount" target="_blank" rel="noopener">@JohnMount&lt;/a>,
&lt;a href="https://github.com/jonoyuan" target="_blank" rel="noopener">@jonoyuan&lt;/a>,
&lt;a href="https://github.com/jprice80" target="_blank" rel="noopener">@jprice80&lt;/a>,
&lt;a href="https://github.com/jpritikin" target="_blank" rel="noopener">@jpritikin&lt;/a>,
&lt;a href="https://github.com/jrnold" target="_blank" rel="noopener">@jrnold&lt;/a>,
&lt;a href="https://github.com/jsekamane" target="_blank" rel="noopener">@jsekamane&lt;/a>,
&lt;a href="https://github.com/jtelleria" target="_blank" rel="noopener">@jtelleria&lt;/a>,
&lt;a href="https://github.com/jugularvein" target="_blank" rel="noopener">@jugularvein&lt;/a>,
&lt;a href="https://github.com/karawoo" target="_blank" rel="noopener">@karawoo&lt;/a>,
&lt;a href="https://github.com/Katiedaisey" target="_blank" rel="noopener">@Katiedaisey&lt;/a>,
&lt;a href="https://github.com/katossky" target="_blank" rel="noopener">@katossky&lt;/a>,
&lt;a href="https://github.com/kdarras" target="_blank" rel="noopener">@kdarras&lt;/a>,
&lt;a href="https://github.com/kendonB" target="_blank" rel="noopener">@kendonB&lt;/a>,
&lt;a href="https://github.com/kilterwind" target="_blank" rel="noopener">@kilterwind&lt;/a>,
&lt;a href="https://github.com/LDalby" target="_blank" rel="noopener">@LDalby&lt;/a>,
&lt;a href="https://github.com/linzi-sg" target="_blank" rel="noopener">@linzi-sg&lt;/a>,
&lt;a href="https://github.com/lionel-" target="_blank" rel="noopener">@lionel-&lt;/a>,
&lt;a href="https://github.com/llendway" target="_blank" rel="noopener">@llendway&lt;/a>,
&lt;a href="https://github.com/llrs" target="_blank" rel="noopener">@llrs&lt;/a>,
&lt;a href="https://github.com/lpantano" target="_blank" rel="noopener">@lpantano&lt;/a>,
&lt;a href="https://github.com/LuffyLuffy" target="_blank" rel="noopener">@LuffyLuffy&lt;/a>,
&lt;a href="https://github.com/lwjohnst86" target="_blank" rel="noopener">@lwjohnst86&lt;/a>,
&lt;a href="https://github.com/lz1nwm" target="_blank" rel="noopener">@lz1nwm&lt;/a>,
&lt;a href="https://github.com/m-macaskill" target="_blank" rel="noopener">@m-macaskill&lt;/a>,
&lt;a href="https://github.com/malcolmbarrett" target="_blank" rel="noopener">@malcolmbarrett&lt;/a>,
&lt;a href="https://github.com/martin-ueding" target="_blank" rel="noopener">@martin-ueding&lt;/a>,
&lt;a href="https://github.com/matthewParksViome" target="_blank" rel="noopener">@matthewParksViome&lt;/a>,
&lt;a href="https://github.com/maxheld83" target="_blank" rel="noopener">@maxheld83&lt;/a>,
&lt;a href="https://github.com/MaximOtt" target="_blank" rel="noopener">@MaximOtt&lt;/a>,
&lt;a href="https://github.com/mbertolacci" target="_blank" rel="noopener">@mbertolacci&lt;/a>,
&lt;a href="https://github.com/mcguinlu" target="_blank" rel="noopener">@mcguinlu&lt;/a>,
&lt;a href="https://github.com/MCM-Math" target="_blank" rel="noopener">@MCM-Math&lt;/a>,
&lt;a href="https://github.com/miguelmorin" target="_blank" rel="noopener">@miguelmorin&lt;/a>,
&lt;a href="https://github.com/mine-cetinkaya-rundel" target="_blank" rel="noopener">@mine-cetinkaya-rundel&lt;/a>,
&lt;a href="https://github.com/mitchelloharawild" target="_blank" rel="noopener">@mitchelloharawild&lt;/a>,
&lt;a href="https://github.com/mluerig" target="_blank" rel="noopener">@mluerig&lt;/a>,
&lt;a href="https://github.com/moodymudskipper" target="_blank" rel="noopener">@moodymudskipper&lt;/a>,
&lt;a href="https://github.com/njtierney" target="_blank" rel="noopener">@njtierney&lt;/a>,
&lt;a href="https://github.com/noahmotion" target="_blank" rel="noopener">@noahmotion&lt;/a>,
&lt;a href="https://github.com/npjc" target="_blank" rel="noopener">@npjc&lt;/a>,
&lt;a href="https://github.com/oranwutang" target="_blank" rel="noopener">@oranwutang&lt;/a>,
&lt;a href="https://github.com/osorensen" target="_blank" rel="noopener">@osorensen&lt;/a>,
&lt;a href="https://github.com/pachamaltese" target="_blank" rel="noopener">@pachamaltese&lt;/a>,
&lt;a href="https://github.com/paleolimbot" target="_blank" rel="noopener">@paleolimbot&lt;/a>,
&lt;a href="https://github.com/PaulLantos" target="_blank" rel="noopener">@PaulLantos&lt;/a>,
&lt;a href="https://github.com/peterhurford" target="_blank" rel="noopener">@peterhurford&lt;/a>,
&lt;a href="https://github.com/phmarek" target="_blank" rel="noopener">@phmarek&lt;/a>,
&lt;a href="https://github.com/powerbilayeredmap" target="_blank" rel="noopener">@powerbilayeredmap&lt;/a>,
&lt;a href="https://github.com/ppanko" target="_blank" rel="noopener">@ppanko&lt;/a>,
&lt;a href="https://github.com/ptoche" target="_blank" rel="noopener">@ptoche&lt;/a>,
&lt;a href="https://github.com/puhachov" target="_blank" rel="noopener">@puhachov&lt;/a>,
&lt;a href="https://github.com/rajkstats" target="_blank" rel="noopener">@rajkstats&lt;/a>,
&lt;a href="https://github.com/richierocks" target="_blank" rel="noopener">@richierocks&lt;/a>,
&lt;a href="https://github.com/sabahzero" target="_blank" rel="noopener">@sabahzero&lt;/a>,
&lt;a href="https://github.com/sahilseth" target="_blank" rel="noopener">@sahilseth&lt;/a>,
&lt;a href="https://github.com/SavasAli" target="_blank" rel="noopener">@SavasAli&lt;/a>,
&lt;a href="https://github.com/sctyner" target="_blank" rel="noopener">@sctyner&lt;/a>,
&lt;a href="https://github.com/sebneus" target="_blank" rel="noopener">@sebneus&lt;/a>,
&lt;a href="https://github.com/shauyin520" target="_blank" rel="noopener">@shauyin520&lt;/a>,
&lt;a href="https://github.com/sjackman" target="_blank" rel="noopener">@sjackman&lt;/a>,
&lt;a href="https://github.com/skanskan" target="_blank" rel="noopener">@skanskan&lt;/a>,
&lt;a href="https://github.com/slowkow" target="_blank" rel="noopener">@slowkow&lt;/a>,
&lt;a href="https://github.com/smouksassi" target="_blank" rel="noopener">@smouksassi&lt;/a>,
&lt;a href="https://github.com/sn248" target="_blank" rel="noopener">@sn248&lt;/a>,
&lt;a href="https://github.com/sowla" target="_blank" rel="noopener">@sowla&lt;/a>,
&lt;a href="https://github.com/sschloss1" target="_blank" rel="noopener">@sschloss1&lt;/a>,
&lt;a href="https://github.com/StefanBRas" target="_blank" rel="noopener">@StefanBRas&lt;/a>,
&lt;a href="https://github.com/steffilazerte" target="_blank" rel="noopener">@steffilazerte&lt;/a>,
&lt;a href="https://github.com/tcastrosantos" target="_blank" rel="noopener">@tcastrosantos&lt;/a>,
&lt;a href="https://github.com/thomasp85" target="_blank" rel="noopener">@thomasp85&lt;/a>,
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>,
&lt;a href="https://github.com/Torvaney" target="_blank" rel="noopener">@Torvaney&lt;/a>,
&lt;a href="https://github.com/touala" target="_blank" rel="noopener">@touala&lt;/a>,
&lt;a href="https://github.com/tungmilan" target="_blank" rel="noopener">@tungmilan&lt;/a>,
&lt;a href="https://github.com/vanzanden" target="_blank" rel="noopener">@vanzanden&lt;/a>,
&lt;a href="https://github.com/vbuchhold" target="_blank" rel="noopener">@vbuchhold&lt;/a>,
&lt;a href="https://github.com/W-L" target="_blank" rel="noopener">@W-L&lt;/a>,
&lt;a href="https://github.com/wongjingping" target="_blank" rel="noopener">@wongjingping&lt;/a>,
&lt;a href="https://github.com/wrightaprilm" target="_blank" rel="noopener">@wrightaprilm&lt;/a>,
&lt;a href="https://github.com/x1o" target="_blank" rel="noopener">@x1o&lt;/a>,
&lt;a href="https://github.com/yosukefk" target="_blank" rel="noopener">@yosukefk&lt;/a>,
&lt;a href="https://github.com/yudong862" target="_blank" rel="noopener">@yudong862&lt;/a>,
&lt;a href="https://github.com/yutannihilation" target="_blank" rel="noopener">@yutannihilation&lt;/a>,
&lt;a href="https://github.com/zeehio" target="_blank" rel="noopener">@zeehio&lt;/a>,
&lt;a href="https://github.com/zlskidmore" target="_blank" rel="noopener">@zlskidmore&lt;/a>, and
&lt;a href="https://github.com/zuccaval" target="_blank" rel="noopener">@zuccaval&lt;/a>.&lt;/p></description></item><item><title>ggplot2 3.1.0</title><link>https://www.tidyverse.org/blog/2018/10/ggplot2-3-1-0/</link><pubDate>Mon, 29 Oct 2018 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2018/10/ggplot2-3-1-0/</guid><description>&lt;p>We&amp;rsquo;re happy to announce the release of
&lt;a href="https://ggplot2.tidyverse.org/" target="_blank" rel="noopener">ggplot2 3.1.0&lt;/a> on CRAN. ggplot2 is a system for declaratively creating graphics, based on The Grammar of Graphics. You provide the data, tell ggplot2 how to map variables to aesthetics, what graphical primitives to use, and it takes care of the details.&lt;/p>
&lt;p>The 3.1.0 release is a minor release that fixes a number of bugs and adds a few new features. Breaking changes have been kept to a minimum and end users of ggplot2 are unlikely to encounter any issues when switching from 3.0.0 to 3.1.0. However, there are a few items that developers of ggplot2 extensions should be aware of. For a complete list of changes and issues of relevance for extension developers, please see the
&lt;a href="https://github.com/tidyverse/ggplot2/releases/tag/v3.1.0" target="_blank" rel="noopener">release notes&lt;/a>.&lt;/p>
&lt;h2 id="new-features">New features
&lt;a href="#new-features">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>&lt;code>coord_sf()&lt;/code> has much-improved customization of axis tick labels. Labels can now
be set manually, and there are two new parameters, &lt;code>label_graticule&lt;/code> and
&lt;code>label_axes&lt;/code>, that can be used to specify which graticules to label on which side
of the plot. In particular, &lt;code>label_graticule&lt;/code> labels the North, West, East, or South ends of the graticule lines, specified via a simple string argument. For example, &lt;code>label_graticule = &amp;quot;NE&amp;quot;&lt;/code> will label the North and East ends, which in a standard projection with North pointing up will result in labels on top and to the right.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sf&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">nc&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">st_read&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">system.file&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;shape/nc.shp&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">package&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;sf&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">quiet&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">TRUE&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">ggplot&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_sf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fill&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">AREA&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">nc&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">coord_sf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">label_graticule&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;NE&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">scale_y_continuous&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="n">breaks&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">34&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">34.5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">35&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">35.5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">36&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">36.5&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="n">labels&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">text&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;34 * degree * N&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;NA&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;35 * degree * N&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;NA&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;36 * degree * N&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;NA&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2018-10-ggplot2-3-1-0_files/figure-html/coord-sf-1.png" width="672" />&lt;/p>
&lt;p>Two new geoms, &lt;code>geom_sf_label()&lt;/code> and &lt;code>geom_sf_text()&lt;/code>, can draw labels and text
on sf objects.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nc[1&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="m">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">]&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_sf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fill&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">AREA&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_sf_label&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">label&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">NAME&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2018-10-ggplot2-3-1-0_files/figure-html/geom-sf-text-1.png" width="672" />&lt;/p>
&lt;p>Under the hood, a new &lt;code>stat_sf_coordinates()&lt;/code> calculates the
x and y coordinates from the coordinates of the sf geometries. You can customize
the calculation method via the &lt;code>fun.geometry&lt;/code> argument.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="c1"># default uses st_point_on_surface(), which guarantees the calculated point &lt;/span>
&lt;span class="c1"># falls inside each polygon&lt;/span>
&lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nc&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_sf&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">stat_sf_coordinates&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">geom&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;point&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">color&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;red&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2018-10-ggplot2-3-1-0_files/figure-html/stat_sf_coordinates-1.png" width="672" />&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">
&lt;span class="c1"># can use st_centroid() instead to draw centroids&lt;/span>
&lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nc&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_sf&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">stat_sf_coordinates&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="n">fun.geometry&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">st_centroid&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">st_zm&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">)),&lt;/span>
&lt;span class="n">geom&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;point&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">color&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;red&amp;#34;&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2018-10-ggplot2-3-1-0_files/figure-html/stat_sf_coordinates-2.png" width="672" />&lt;/p>
&lt;h2 id="minor-fixes-and-improvements">Minor fixes and improvements
&lt;a href="#minor-fixes-and-improvements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Aesthetics containing the word &amp;ldquo;color&amp;rdquo; are now always standardized internally to read &amp;ldquo;colour&amp;rdquo;. This happens transparently to the end user, so that the British and American spellings of &amp;ldquo;colour&amp;rdquo; / &amp;ldquo;color&amp;rdquo; are fully equivalent throughout the entire ggplot2 code base. Therefore, the following four examples all produce the same plot.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">p1&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">iris&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Sepal.Length&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Petal.Length&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">color&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Sepal.Length&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">fill&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Petal.Length&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_point&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">shape&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">21&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">size&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">stroke&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">scale_color_viridis_c&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="n">aesthetics&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;color&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;fill&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;Length&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">option&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;B&amp;#34;&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;span class="n">p2&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">iris&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Sepal.Length&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Petal.Length&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">colour&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Sepal.Length&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">fill&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Petal.Length&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_point&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">shape&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">21&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">size&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">stroke&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">scale_colour_viridis_c&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="n">aesthetics&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;colour&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;fill&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;Length&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">option&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;B&amp;#34;&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;span class="n">p3&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">iris&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Sepal.Length&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Petal.Length&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">colour&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Sepal.Length&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">fill&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Petal.Length&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_point&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">shape&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">21&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">size&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">stroke&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">scale_colour_viridis_c&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="n">aesthetics&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;color&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;fill&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;Length&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">option&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;B&amp;#34;&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;span class="n">p4&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">iris&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Sepal.Length&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Petal.Length&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">color&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Sepal.Length&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">fill&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Petal.Length&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_point&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">shape&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">21&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">size&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">stroke&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">scale_color_viridis_c&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="n">aesthetics&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;colour&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;fill&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;Length&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">option&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;B&amp;#34;&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;span class="n">cowplot&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="nf">plot_grid&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">p1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">p2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">p3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">p4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2018-10-ggplot2-3-1-0_files/figure-html/color-vs-colour-1.png" width="672" />&lt;/p>
&lt;p>Normalized statistics are now provided with &lt;code>stat_bin2d()&lt;/code>, &lt;code>stat_binhex()&lt;/code>, &lt;code>stat_density_2d()&lt;/code>, and &lt;code>stat_contour()&lt;/code> to plot 2d distributions normalized to a common height. This feature can be useful for faceted 2d plots, where the maximum density/count can vary greatly between panels. For example, when using &lt;code>stat_density_2d()&lt;/code> with &lt;code>contour = TRUE&lt;/code>, we can now use the calculated statistic &lt;code>nlevel&lt;/code> to color by where each contour polygon lies relative to the highest one in that facet.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">diamonds&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">depth&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">stat_density_2d&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fill&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">stat&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nlevel&lt;/span>&lt;span class="p">)),&lt;/span>
&lt;span class="n">geom&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;polygon&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">n&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">100&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">bins&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">contour&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">TRUE&lt;/span>
&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">facet_wrap&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">clarity&lt;/span>&lt;span class="o">~&lt;/span>&lt;span class="n">.)&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">scale_fill_viridis_c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">option&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;A&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2018-10-ggplot2-3-1-0_files/figure-html/stat-density-2d-1.png" width="672" />&lt;/p>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Thank you to the &lt;strong>126&lt;/strong> people who who contributed issues, code and comments to this release:
&lt;a href="https://github.com/abeeCrombie" target="_blank" rel="noopener">@abeeCrombie&lt;/a>,
&lt;a href="https://github.com/adam-erickson" target="_blank" rel="noopener">@adam-erickson&lt;/a>,
&lt;a href="https://github.com/adrfantini" target="_blank" rel="noopener">@adrfantini&lt;/a>,
&lt;a href="https://github.com/Adri1CIRAD" target="_blank" rel="noopener">@Adri1CIRAD&lt;/a>,
&lt;a href="https://github.com/agarwal-peeush" target="_blank" rel="noopener">@agarwal-peeush&lt;/a>,
&lt;a href="https://github.com/alexhallam" target="_blank" rel="noopener">@alexhallam&lt;/a>,
&lt;a href="https://github.com/alireza08" target="_blank" rel="noopener">@alireza08&lt;/a>,
&lt;a href="https://github.com/alistaire47" target="_blank" rel="noopener">@alistaire47&lt;/a>,
&lt;a href="https://github.com/amhedberg" target="_blank" rel="noopener">@amhedberg&lt;/a>,
&lt;a href="https://github.com/amirmasoudabdol" target="_blank" rel="noopener">@amirmasoudabdol&lt;/a>,
&lt;a href="https://github.com/andrewheiss" target="_blank" rel="noopener">@andrewheiss&lt;/a>,
&lt;a href="https://github.com/andrewmarx" target="_blank" rel="noopener">@andrewmarx&lt;/a>,
&lt;a href="https://github.com/anhttdang" target="_blank" rel="noopener">@anhttdang&lt;/a>,
&lt;a href="https://github.com/aosmith16" target="_blank" rel="noopener">@aosmith16&lt;/a>,
&lt;a href="https://github.com/artidata" target="_blank" rel="noopener">@artidata&lt;/a>,
&lt;a href="https://github.com/baderstine" target="_blank" rel="noopener">@baderstine&lt;/a>,
&lt;a href="https://github.com/barana912" target="_blank" rel="noopener">@barana912&lt;/a>,
&lt;a href="https://github.com/batpigandme" target="_blank" rel="noopener">@batpigandme&lt;/a>,
&lt;a href="https://github.com/benjaminhlina" target="_blank" rel="noopener">@benjaminhlina&lt;/a>,
&lt;a href="https://github.com/billdenney" target="_blank" rel="noopener">@billdenney&lt;/a>,
&lt;a href="https://github.com/Bisaloo" target="_blank" rel="noopener">@Bisaloo&lt;/a>,
&lt;a href="https://github.com/bjreisman" target="_blank" rel="noopener">@bjreisman&lt;/a>,
&lt;a href="https://github.com/bpbraun" target="_blank" rel="noopener">@bpbraun&lt;/a>,
&lt;a href="https://github.com/brodieG" target="_blank" rel="noopener">@brodieG&lt;/a>,
&lt;a href="https://github.com/bschneidr" target="_blank" rel="noopener">@bschneidr&lt;/a>,
&lt;a href="https://github.com/carlislerainey" target="_blank" rel="noopener">@carlislerainey&lt;/a>,
&lt;a href="https://github.com/ccpsilva" target="_blank" rel="noopener">@ccpsilva&lt;/a>,
&lt;a href="https://github.com/Chrismarsh" target="_blank" rel="noopener">@Chrismarsh&lt;/a>,
&lt;a href="https://github.com/chrismp" target="_blank" rel="noopener">@chrismp&lt;/a>,
&lt;a href="https://github.com/cipi118" target="_blank" rel="noopener">@cipi118&lt;/a>,
&lt;a href="https://github.com/clauswilke" target="_blank" rel="noopener">@clauswilke&lt;/a>,
&lt;a href="https://github.com/coolbutuseless" target="_blank" rel="noopener">@coolbutuseless&lt;/a>,
&lt;a href="https://github.com/corybrunson" target="_blank" rel="noopener">@corybrunson&lt;/a>,
&lt;a href="https://github.com/DarioS" target="_blank" rel="noopener">@DarioS&lt;/a>,
&lt;a href="https://github.com/dpseidel" target="_blank" rel="noopener">@dpseidel&lt;/a>,
&lt;a href="https://github.com/dracodoc" target="_blank" rel="noopener">@dracodoc&lt;/a>,
&lt;a href="https://github.com/drammock" target="_blank" rel="noopener">@drammock&lt;/a>,
&lt;a href="https://github.com/earthcli" target="_blank" rel="noopener">@earthcli&lt;/a>,
&lt;a href="https://github.com/edmundesterbauer" target="_blank" rel="noopener">@edmundesterbauer&lt;/a>,
&lt;a href="https://github.com/elbamos" target="_blank" rel="noopener">@elbamos&lt;/a>,
&lt;a href="https://github.com/eliocamp" target="_blank" rel="noopener">@eliocamp&lt;/a>,
&lt;a href="https://github.com/Eluvias" target="_blank" rel="noopener">@Eluvias&lt;/a>,
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/EmmanuelCharpentier" target="_blank" rel="noopener">@EmmanuelCharpentier&lt;/a>,
&lt;a href="https://github.com/emrichter" target="_blank" rel="noopener">@emrichter&lt;/a>,
&lt;a href="https://github.com/espher1987" target="_blank" rel="noopener">@espher1987&lt;/a>,
&lt;a href="https://github.com/felipegerard" target="_blank" rel="noopener">@felipegerard&lt;/a>,
&lt;a href="https://github.com/ftabaro" target="_blank" rel="noopener">@ftabaro&lt;/a>,
&lt;a href="https://github.com/gregrs-uk" target="_blank" rel="noopener">@gregrs-uk&lt;/a>,
&lt;a href="https://github.com/guillaumecharbonnier" target="_blank" rel="noopener">@guillaumecharbonnier&lt;/a>,
&lt;a href="https://github.com/hadley" target="_blank" rel="noopener">@hadley&lt;/a>,
&lt;a href="https://github.com/Henrik-P" target="_blank" rel="noopener">@Henrik-P&lt;/a>,
&lt;a href="https://github.com/hisakatha" target="_blank" rel="noopener">@hisakatha&lt;/a>,
&lt;a href="https://github.com/hzarkoob" target="_blank" rel="noopener">@hzarkoob&lt;/a>,
&lt;a href="https://github.com/igordot" target="_blank" rel="noopener">@igordot&lt;/a>,
&lt;a href="https://github.com/ilarischeinin" target="_blank" rel="noopener">@ilarischeinin&lt;/a>,
&lt;a href="https://github.com/IndrajeetPatil" target="_blank" rel="noopener">@IndrajeetPatil&lt;/a>,
&lt;a href="https://github.com/itcarroll" target="_blank" rel="noopener">@itcarroll&lt;/a>,
&lt;a href="https://github.com/Janewyx" target="_blank" rel="noopener">@Janewyx&lt;/a>,
&lt;a href="https://github.com/jar1karp" target="_blank" rel="noopener">@jar1karp&lt;/a>,
&lt;a href="https://github.com/jdrum00" target="_blank" rel="noopener">@jdrum00&lt;/a>,
&lt;a href="https://github.com/JessicaGarzke" target="_blank" rel="noopener">@JessicaGarzke&lt;/a>,
&lt;a href="https://github.com/JHonaker" target="_blank" rel="noopener">@JHonaker&lt;/a>,
&lt;a href="https://github.com/jiho" target="_blank" rel="noopener">@jiho&lt;/a>,
&lt;a href="https://github.com/jimhester" target="_blank" rel="noopener">@jimhester&lt;/a>,
&lt;a href="https://github.com/JM-RG" target="_blank" rel="noopener">@JM-RG&lt;/a>,
&lt;a href="https://github.com/JohnMount" target="_blank" rel="noopener">@JohnMount&lt;/a>,
&lt;a href="https://github.com/jonocarroll" target="_blank" rel="noopener">@jonocarroll&lt;/a>,
&lt;a href="https://github.com/josesho" target="_blank" rel="noopener">@josesho&lt;/a>,
&lt;a href="https://github.com/jpasquier" target="_blank" rel="noopener">@jpasquier&lt;/a>,
&lt;a href="https://github.com/jpgoldberg" target="_blank" rel="noopener">@jpgoldberg&lt;/a>,
&lt;a href="https://github.com/jtelleria" target="_blank" rel="noopener">@jtelleria&lt;/a>,
&lt;a href="https://github.com/justinjunge" target="_blank" rel="noopener">@justinjunge&lt;/a>,
&lt;a href="https://github.com/karawoo" target="_blank" rel="noopener">@karawoo&lt;/a>,
&lt;a href="https://github.com/kendonB" target="_blank" rel="noopener">@kendonB&lt;/a>,
&lt;a href="https://github.com/kimmagnusb" target="_blank" rel="noopener">@kimmagnusb&lt;/a>,
&lt;a href="https://github.com/klmr" target="_blank" rel="noopener">@klmr&lt;/a>,
&lt;a href="https://github.com/krlmlr" target="_blank" rel="noopener">@krlmlr&lt;/a>,
&lt;a href="https://github.com/lawremi" target="_blank" rel="noopener">@lawremi&lt;/a>,
&lt;a href="https://github.com/lhunsicker" target="_blank" rel="noopener">@lhunsicker&lt;/a>,
&lt;a href="https://github.com/lionel-" target="_blank" rel="noopener">@lionel-&lt;/a>,
&lt;a href="https://github.com/lorenzwalthert" target="_blank" rel="noopener">@lorenzwalthert&lt;/a>,
&lt;a href="https://github.com/mafed" target="_blank" rel="noopener">@mafed&lt;/a>,
&lt;a href="https://github.com/makis23" target="_blank" rel="noopener">@makis23&lt;/a>,
&lt;a href="https://github.com/malcolmbarrett" target="_blank" rel="noopener">@malcolmbarrett&lt;/a>,
&lt;a href="https://github.com/MarioClueless" target="_blank" rel="noopener">@MarioClueless&lt;/a>,
&lt;a href="https://github.com/martisak" target="_blank" rel="noopener">@martisak&lt;/a>,
&lt;a href="https://github.com/mikesafar" target="_blank" rel="noopener">@mikesafar&lt;/a>,
&lt;a href="https://github.com/mikmart" target="_blank" rel="noopener">@mikmart&lt;/a>,
&lt;a href="https://github.com/MJochim" target="_blank" rel="noopener">@MJochim&lt;/a>,
&lt;a href="https://github.com/mkoohafkan" target="_blank" rel="noopener">@mkoohafkan&lt;/a>,
&lt;a href="https://github.com/mojaveazure" target="_blank" rel="noopener">@mojaveazure&lt;/a>,
&lt;a href="https://github.com/msberends" target="_blank" rel="noopener">@msberends&lt;/a>,
&lt;a href="https://github.com/neoworld77" target="_blank" rel="noopener">@neoworld77&lt;/a>,
&lt;a href="https://github.com/PabloRMira" target="_blank" rel="noopener">@PabloRMira&lt;/a>,
&lt;a href="https://github.com/paleolimbot" target="_blank" rel="noopener">@paleolimbot&lt;/a>,
&lt;a href="https://github.com/pank" target="_blank" rel="noopener">@pank&lt;/a>,
&lt;a href="https://github.com/pitakakariki" target="_blank" rel="noopener">@pitakakariki&lt;/a>,
&lt;a href="https://github.com/ptoche" target="_blank" rel="noopener">@ptoche&lt;/a>,
&lt;a href="https://github.com/rensa" target="_blank" rel="noopener">@rensa&lt;/a>,
&lt;a href="https://github.com/rharfoot" target="_blank" rel="noopener">@rharfoot&lt;/a>,
&lt;a href="https://github.com/RichardJActon" target="_blank" rel="noopener">@RichardJActon&lt;/a>,
&lt;a href="https://github.com/royfrancis" target="_blank" rel="noopener">@royfrancis&lt;/a>,
&lt;a href="https://github.com/rpruim" target="_blank" rel="noopener">@rpruim&lt;/a>,
&lt;a href="https://github.com/rsaporta" target="_blank" rel="noopener">@rsaporta&lt;/a>,
&lt;a href="https://github.com/sambweber" target="_blank" rel="noopener">@sambweber&lt;/a>,
&lt;a href="https://github.com/schloerke" target="_blank" rel="noopener">@schloerke&lt;/a>,
&lt;a href="https://github.com/slowkow" target="_blank" rel="noopener">@slowkow&lt;/a>,
&lt;a href="https://github.com/statsandthings" target="_blank" rel="noopener">@statsandthings&lt;/a>,
&lt;a href="https://github.com/stephenbfroehlich" target="_blank" rel="noopener">@stephenbfroehlich&lt;/a>,
&lt;a href="https://github.com/steveharoz" target="_blank" rel="noopener">@steveharoz&lt;/a>,
&lt;a href="https://github.com/stragu" target="_blank" rel="noopener">@stragu&lt;/a>,
&lt;a href="https://github.com/tbobin" target="_blank" rel="noopener">@tbobin&lt;/a>,
&lt;a href="https://github.com/the-Hull" target="_blank" rel="noopener">@the-Hull&lt;/a>,
&lt;a href="https://github.com/thomasp85" target="_blank" rel="noopener">@thomasp85&lt;/a>,
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>,
&lt;a href="https://github.com/tstev" target="_blank" rel="noopener">@tstev&lt;/a>,
&lt;a href="https://github.com/TylerGrantSmith" target="_blank" rel="noopener">@TylerGrantSmith&lt;/a>,
&lt;a href="https://github.com/vikram-rawat" target="_blank" rel="noopener">@vikram-rawat&lt;/a>,
&lt;a href="https://github.com/wch" target="_blank" rel="noopener">@wch&lt;/a>,
&lt;a href="https://github.com/willgearty" target="_blank" rel="noopener">@willgearty&lt;/a>,
&lt;a href="https://github.com/woodwards" target="_blank" rel="noopener">@woodwards&lt;/a>,
&lt;a href="https://github.com/YinLiLin" target="_blank" rel="noopener">@YinLiLin&lt;/a>,
&lt;a href="https://github.com/yutannihilation" target="_blank" rel="noopener">@yutannihilation&lt;/a>,
&lt;a href="https://github.com/yyffang" target="_blank" rel="noopener">@yyffang&lt;/a>,
&lt;a href="https://github.com/zeehio" target="_blank" rel="noopener">@zeehio&lt;/a>, and
&lt;a href="https://github.com/ZelinC" target="_blank" rel="noopener">@ZelinC&lt;/a>&lt;/p></description></item><item><title>ggplot2 3.0.0: community posts</title><link>https://www.tidyverse.org/blog/2018/08/ggplot2-community-posts/</link><pubDate>Thu, 09 Aug 2018 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2018/08/ggplot2-community-posts/</guid><description>&lt;p>ggplot2 3.0.0 has more changes and features than we could possibly cover in our
&lt;a href="https://www.tidyverse.org/articles/2018/07/ggplot2-3-0-0/#new-features" target="_blank" rel="noopener">release announcement&lt;/a>. So, we asked you (the community) to share &lt;em>your&lt;/em> posts with us during the month following its release.&lt;/p>
&lt;p>Spoiler alert: excellent material ahead!&lt;/p>
&lt;h3 id="english">English
&lt;a href="#english">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;ul>
&lt;li>
&lt;a href="https://yutani.rbind.io/post/2017-11-07-ggplot-add/" target="_blank" rel="noopener">An Example Usage of &lt;code>ggplot_add()&lt;/code>&lt;/a>
by
&lt;a href="https://twitter.com/yutannihilat_en" target="_blank" rel="noopener">Hiroaki Yutani&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://www.johnmackintosh.com/2018-07-04-tidily-evaluated-ggplot2/" target="_blank" rel="noopener">Tidily evaluated ggplot2&lt;/a>
by
&lt;a href="https://twitter.com/_johnmackintosh" target="_blank" rel="noopener">John MacKintosh&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://www.johnmackintosh.com/2018-07-04-more-tidy-evaluation-with-ggplot2/" target="_blank" rel="noopener">More tidy evaluation with ggplot2&lt;/a>
by
&lt;a href="https://twitter.com/_johnmackintosh" target="_blank" rel="noopener">John MacKintosh&lt;/a>&lt;/li>
&lt;li>
&lt;a href="http://www.onceupondata.com/2018/07/06/ggplot-tidyeval/" target="_blank" rel="noopener">Tidy Eval Meets ggplot2: the bang bang plots&lt;/a> by
&lt;a href="https://twitter.com/OmaymaS_" target="_blank" rel="noopener">Omayma Said&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://rtask.thinkr.fr/blog/ggplot2-welcome-viridis/" target="_blank" rel="noopener">[ggplot2] Welcome viridis !&lt;/a>
by
&lt;a href="https://twitter.com/_ColinFay" target="_blank" rel="noopener">Colin Fay&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://statnmap.com/2018-07-14-introduction-to-mapping-with-sf-and-co/" target="_blank" rel="noopener">Introduction to mapping with {sf} &amp;amp; co.&lt;/a> by
&lt;a href="https://twitter.com/statnmap" target="_blank" rel="noopener">Sébastien Rochette&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://www.mango-solutions.com/blog/visualising-italian-wine-production" target="_blank" rel="noopener">Visualising Italian wine production&lt;/a> by
&lt;a href="https://twitter.com/aimeegott_R" target="_blank" rel="noopener">Aimee Gott&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://tonyelhabr.rbind.io/posts/bubble-grid-texas-high-school/" target="_blank" rel="noopener">Visualizing Texas High School SAT Math Scores with Bubble Grids&lt;/a> by
&lt;a href="https://twitter.com/TonyElHabr" target="_blank" rel="noopener">Tony ElHabr&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://crunch.io/dev/blog/autoplot-with-tidyeval/" target="_blank" rel="noopener">Making Graphs Look Easy with ggplot2 and Tidy Evaluation&lt;/a> by
&lt;a href="https://twitter.com/gshotwell" target="_blank" rel="noopener">Gordon Shotwell&lt;/a>,
&lt;a href="https://twitter.com/jonkeane" target="_blank" rel="noopener">Jonathan Keane&lt;/a>, and
&lt;a href="https://twitter.com/enpiar" target="_blank" rel="noopener">Neal Richardson&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="french">French
&lt;a href="#french">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;ul>
&lt;li>
&lt;a href="https://thinkr.fr/quoi-de-neuf-ggplot2/" target="_blank" rel="noopener">Quoi de neuf {ggplot2} ?&lt;/a> by
&lt;a href="https://twitter.com/_ColinFay" target="_blank" rel="noopener">Colin Fay&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="japanese">Japanese
&lt;a href="#japanese">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;ul>
&lt;li>
&lt;a href="https://notchained.hatenablog.com/entry/2018/05/27/190740" target="_blank" rel="noopener">ggplot2 3.0.0を使ってみた&lt;/a> by
&lt;a href="https://twitter.com/yutannihilat_en" target="_blank" rel="noopener">Hiroaki Yutani&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://notchained.hatenablog.com/entry/2018/05/28/003910" target="_blank" rel="noopener">&lt;code>ggplot2::geom_sf()&lt;/code>を使ってみる&lt;/a> by
&lt;a href="https://twitter.com/yutannihilat_en" target="_blank" rel="noopener">Hiroaki Yutani&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>scales 1.0.0</title><link>https://www.tidyverse.org/blog/2018/08/scales-1-0-0/</link><pubDate>Thu, 09 Aug 2018 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2018/08/scales-1-0-0/</guid><description>&lt;p>We&amp;rsquo;re delighted to announce the release of
&lt;a href="https://scales.r-lib.org/" target="_blank" rel="noopener">scales&lt;/a> 1.0.0.
The scales packages provides the internal scaling infrastructure to ggplot2 and its functions allow users to customize the transformations, breaks, guides and palettes used in visualizations in ggplot2 and beyond.&lt;/p>
&lt;p>This is a major release with significant changes to the popular formatter
functions, and added transformations. Below we demonstrate some of the biggest
changes in this release including:&lt;/p>
&lt;ul>
&lt;li>updated formatter functions&lt;/li>
&lt;li>new transformations&lt;/li>
&lt;li>improved breaks on log-transformed scales&lt;/li>
&lt;/ul>
&lt;p>See the
&lt;a href="https://scales.r-lib.org/news/index.html" target="_blank" rel="noopener">News&lt;/a> for a detailed list of changes
and visit
&lt;a href="https://scales.r-lib.org/" target="_blank" rel="noopener">the new website&lt;/a> for complete documentation and
additional usage examples.&lt;/p>
&lt;p>Install the latest version with:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">install.packages&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;scales&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;h2 id="formatter-changes">Formatter changes
&lt;a href="#formatter-changes">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Thanks to the help of
&lt;a href="https://github.com/larmarange" target="_blank" rel="noopener">@larmarange&lt;/a>, scales has
now added a generic formatter function, &lt;code>number_format()&lt;/code>, that powers the majority
of the formatters in the package.&lt;/p>
&lt;p>This change altered the arguments of most of the formatters:
&lt;code>comma_format()&lt;/code>, &lt;code>percent_format()&lt;/code>, &lt;code>unit_format()&lt;/code>, &lt;code>dollar_format()&lt;/code>,
&lt;code>ordinal_format()&lt;/code>, and &lt;code>scientific_format()&lt;/code>. All gained new arguments &lt;code>accuracy&lt;/code>,
&lt;code>scale&lt;/code>, &lt;code>prefix&lt;/code>, and &lt;code>suffix&lt;/code>, allowing users to specify rounding accuracy,
a scaling value, a prefix, and a suffix to
customize output. Furthermore, all of these functions now allow user
specification of the thousands separator, &lt;code>big.mark&lt;/code>, and the decimal separator,
&lt;code>decimal.mark&lt;/code>. Users of these formatters will notice that the default thousands
separator is now a space. This default was chosen as a useful compromise for
an international audience (a space for thousands separator and a dot for decimal
separator) and is officially endorsed by SI/ISO 31-0 standard, as well as by the
International Bureau of Weights and Measures and the International Union of
Pure and Applied Chemistry (IUPAC), the American Medical Association&amp;rsquo;s widely
followed AMA Manual of Style, and the Metrication Board, among others
(
&lt;a href="https://www.wikiwand.com/en/Decimal_separator#/Digit_grouping" target="_blank" rel="noopener">read more here&lt;/a>).
Those interested in number formatting with no separator can simply define
&lt;code>big.mark = &amp;quot;&amp;quot;&lt;/code> to revert to the previous behaviour.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">scales&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">number&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">12.3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">4&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">12345.789&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">0.0002&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1">#&amp;gt; [1] &amp;#34;12&amp;#34; &amp;#34;4&amp;#34; &amp;#34;12 346&amp;#34; &amp;#34;0&amp;#34;&lt;/span>
&lt;span class="c1"># these functions round by default, but you can set the accuracy&lt;/span>
&lt;span class="nf">number&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">12.3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">4&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">12345.789&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">0.0002&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">big.mark&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">accuracy&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">.01&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; [1] &amp;#34;12.30&amp;#34; &amp;#34;4.00&amp;#34; &amp;#34;12345.79&amp;#34; &amp;#34;0.00&amp;#34;&lt;/span>
&lt;span class="c1"># percent() function takes a numeric and does your division and labelling for you&lt;/span>
&lt;span class="nf">percent&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">0.1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">1&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="m">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">0.56&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1">#&amp;gt; [1] &amp;#34;10.0%&amp;#34; &amp;#34;33.3%&amp;#34; &amp;#34;56.0%&amp;#34;&lt;/span>
&lt;span class="c1"># comma() adds commas into large numbers for easier readability&lt;/span>
&lt;span class="nf">comma&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">10e6&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; [1] &amp;#34;10,000,000&amp;#34;&lt;/span>
&lt;span class="c1"># dollar() adds currency symbols speficifed by `prefix` or `suffix`&lt;/span>
&lt;span class="nf">dollar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">100&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">125&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">3000&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1">#&amp;gt; [1] &amp;#34;$100&amp;#34; &amp;#34;$125&amp;#34; &amp;#34;$3,000&amp;#34;&lt;/span>
&lt;span class="nf">dollar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">100&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">125&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">3000&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">suffix&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;€&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">prefix&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; [1] &amp;#34;100€&amp;#34; &amp;#34;125€&amp;#34; &amp;#34;3,000€&amp;#34;&lt;/span>
&lt;span class="c1"># unit_format() adds unique units&lt;/span>
&lt;span class="c1"># the scale argument can do simple conversion on the fly&lt;/span>
&lt;span class="nf">unit_format&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;ha&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">scale&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1e-4&lt;/span>&lt;span class="p">)(&lt;/span>&lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">10e6&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">10e4&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">8e3&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1">#&amp;gt; [1] &amp;#34;1 000 ha&amp;#34; &amp;#34;10 ha&amp;#34; &amp;#34;1 ha&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Three additional formatters have been added: &lt;code>pvalue_format()&lt;/code> formats p-values, &lt;code>number_bytes_format()&lt;/code> formats numeric vectors into byte measurements, and
&lt;code>time_format()&lt;/code> provides support for formatting POSIXt and hms objects. Finally, &lt;code>ordinal_format()&lt;/code> has gained new rules for French and Spanish formatting.&lt;/p>
&lt;h2 id="new-transformations">New transformations
&lt;a href="#new-transformations">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Two new transformations were added to the package for this release: &lt;code>psuedo_log_trans()&lt;/code>,
and &lt;code>modulus_trans()&lt;/code>. &lt;code>pseudo_log_trans()&lt;/code> transforms data on a signed
logarithmic scale with a smooth transition to a linear scale around 0. The
&lt;code>modulus_trans()&lt;/code> was added along with a refactored &lt;code>boxcox_trans()&lt;/code> to
provide a better option for negative numbers. Both &lt;code>modulus_trans()&lt;/code> and
&lt;code>boxcox_trans()&lt;/code> gained an argument &lt;code>offset&lt;/code> which now allows users to fit both
type-1 and type-2 Box-Cox transformations.&lt;/p>
&lt;h2 id="better-breaks">Better breaks
&lt;a href="#better-breaks">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>In a long awaited fix, &lt;code>log_breaks()&lt;/code> now returns integer multiples of
integer powers of base when finer breaks are needed on the log scale.
This will change all ggplot graphics with log-transformed axes.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ggplot2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dplyr&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">set.seed&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">5678&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">dsamp&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">sample_n&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">1000&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">tbl&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">diamonds&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dsamp&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">price&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">carat&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_point&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nf">scale_x_log10&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nf">scale_y_log10&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2018-08-scales-1-0-0_files/figure-html/logbreaks-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>We’re grateful to the 24 people who contributed issues, code and comments:
&lt;a href="https://github.com/alexandreliborio" target="_blank" rel="noopener">@alexandreliborio&lt;/a>,
&lt;a href="https://github.com/AndreaCirilloAC" target="_blank" rel="noopener">@AndreaCirilloAC&lt;/a>,
&lt;a href="https://github.com/batpigandme" target="_blank" rel="noopener">@batpigandme&lt;/a>,
&lt;a href="https://github.com/BenOnEarth" target="_blank" rel="noopener">@BenOnEarth&lt;/a>,
&lt;a href="https://github.com/billdenney" target="_blank" rel="noopener">@billdenney&lt;/a>,
&lt;a href="https://github.com/Bisaloo" target="_blank" rel="noopener">@Bisaloo&lt;/a>,
&lt;a href="https://github.com/CesarSancho" target="_blank" rel="noopener">@CesarSancho&lt;/a>,
&lt;a href="https://github.com/christianhomberg" target="_blank" rel="noopener">@christianhomberg&lt;/a>,
&lt;a href="https://github.com/clauswilke" target="_blank" rel="noopener">@clauswilke&lt;/a>,
&lt;a href="https://github.com/cwickham" target="_blank" rel="noopener">@cwickham&lt;/a>,
&lt;a href="https://github.com/dpseidel" target="_blank" rel="noopener">@dpseidel&lt;/a>,
&lt;a href="https://github.com/foo-bar-baz-qux" target="_blank" rel="noopener">@foo-bar-baz-qux&lt;/a>,
&lt;a href="https://github.com/graciecorgi" target="_blank" rel="noopener">@graciecorgi&lt;/a>,
&lt;a href="https://github.com/hadley" target="_blank" rel="noopener">@hadley&lt;/a>,
&lt;a href="https://github.com/jimhester" target="_blank" rel="noopener">@jimhester&lt;/a>,
&lt;a href="https://github.com/jnolis" target="_blank" rel="noopener">@jnolis&lt;/a>,
&lt;a href="https://github.com/larmarange" target="_blank" rel="noopener">@larmarange&lt;/a>,
&lt;a href="https://github.com/lepennec" target="_blank" rel="noopener">@lepennec&lt;/a>,
&lt;a href="https://github.com/markvanderloo" target="_blank" rel="noopener">@markvanderloo&lt;/a>,
&lt;a href="https://github.com/ptoche" target="_blank" rel="noopener">@ptoche&lt;/a>,
&lt;a href="https://github.com/RobertMyles" target="_blank" rel="noopener">@RobertMyles&lt;/a>,
&lt;a href="https://github.com/statist7" target="_blank" rel="noopener">@statist7&lt;/a>,
&lt;a href="https://github.com/ThierryO" target="_blank" rel="noopener">@ThierryO&lt;/a>, and
&lt;a href="https://github.com/zeehio" target="_blank" rel="noopener">@zeehio&lt;/a>.&lt;/p></description></item><item><title>Tidy evaluation in ggplot2</title><link>https://www.tidyverse.org/blog/2018/07/ggplot2-tidy-evaluation/</link><pubDate>Tue, 24 Jul 2018 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2018/07/ggplot2-tidy-evaluation/</guid><description>&lt;html>
&lt;style>
h2 code {
font-size: 1em;
&lt;p>}
&lt;/style>&lt;/p>
&lt;/html>
## Tidy evaluation
&lt;p>One of the biggest changes in
&lt;a href="https://ggplot2.tidyverse.org/" target="_blank" rel="noopener">ggplot2&lt;/a> 3.0.0 is support for
&lt;a href="https://adv-r.hadley.nz/evaluation.html#tidy-evaluation" target="_blank" rel="noopener">tidy evaluation&lt;/a>, making it more programmable, and more consistent with the rest of the tidyverse. Though this introduces some breaking changes, we believe it to be worthwhile in the interest of improving future code. Here we show a couple of examples of how you might use it. New developer facing changes are also discussed (see
&lt;a href="#developer-facing-changes">below&lt;/a>).&lt;/p>
&lt;h2 id="tidy-aesthetics-with-aes">Tidy aesthetics with &lt;code>aes()&lt;/code>
&lt;a href="#tidy-aesthetics-with-aes">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>You can now use
&lt;a href="https://adv-r.hadley.nz/quasiquotation.html" target="_blank" rel="noopener">quasiquotation&lt;/a> in
&lt;a href="https://ggplot2.tidyverse.org/reference/aes.html" target="_blank" rel="noopener">&lt;code>aes()&lt;/code>&lt;/a>,
&lt;a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" target="_blank" rel="noopener">&lt;code>facet_wrap()&lt;/code>&lt;/a>, and
&lt;a href="https://ggplot2.tidyverse.org/reference/facet_grid.html" target="_blank" rel="noopener">&lt;code>facet_grid()&lt;/code>&lt;/a>. For &lt;code>aes()&lt;/code>, quasiquotation (&lt;code>!!&lt;/code>, &lt;code>!!!&lt;/code>, &lt;code>:=&lt;/code>) replaces
&lt;a href="https://ggplot2.tidyverse.org/reference/aes_.html" target="_blank" rel="noopener">&lt;code>aes_()&lt;/code>&lt;/a> and
&lt;a href="https://ggplot2.tidyverse.org/reference/aes_.html" target="_blank" rel="noopener">&lt;code>aes_string()&lt;/code>&lt;/a> (though these functions are being soft deprecated, and will be around for a while).&lt;/p>
&lt;p>Here we&amp;rsquo;ll use quasiquotation to make a function to make a pie chart that allows the user to avoid using quotation marks when they pass their arguments to the function.&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup> The initial function, below, would require that the user know the exact specifications to pass to &lt;code>aes()&lt;/code>.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">piechart_basic&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">mapping&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">mapping&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_bar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">width&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">coord_polar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">theta&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;y&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">xlab&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">NULL&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">ylab&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">NULL&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nf">piechart_basic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mpg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">factor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">fill&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">class&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2017-07-ggplot2-tidy-evaluation_files/figure-html/piechart-basic-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;p>The key to calling a tidy evaluation function inside of another function is to quote (with &lt;code>enquo()&lt;/code>) and unquote (with &lt;code>!!&lt;/code>):&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">pie_chart&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">var&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">...&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="n">var&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">enquo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">var&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">piechart_basic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">factor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">fill&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">!!&lt;/span>&lt;span class="n">var&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nf">pie_chart&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mpg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">class&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2017-07-ggplot2-tidy-evaluation_files/figure-html/piechart-qq-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;p>We could use this same pattern to make a scatterplot:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">scatter_plot&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="n">x&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">enquo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">y&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">enquo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nf">geom_point&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">!!&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">!!&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nf">scatter_plot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mtcars&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">disp&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">drat&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2017-07-ggplot2-tidy-evaluation_files/figure-html/scatter-by-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;h2 id="tidy-facets-with-vars">Tidy facets with &lt;code>vars()&lt;/code>
&lt;a href="#tidy-facets-with-vars">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>To support quasiquotation in facetting, we’ve added a new helper function:
&lt;a href="https://ggplot2.tidyverse.org/reference/vars.html" target="_blank" rel="noopener">&lt;code>vars()&lt;/code>&lt;/a>, short for variables. Instead of &lt;code>facet_grid(x + y ~ a + b)&lt;/code> you can now write &lt;code>facet_grid(vars(x, y), vars(a, b))&lt;/code>. The formula interface won’t go away; but the new &lt;code>vars()&lt;/code> interface supports tidy evaluation, so can be easily programmed with.&lt;/p>
&lt;p>&lt;code>vars()&lt;/code> is used to supply variables or expressions, evaluated in the context of the dataset to form facetting groups.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">p&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mpg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">displ&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">cty&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nf">geom_point&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="n">p&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nf">facet_grid&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">rows&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">vars&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">drv&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2017-07-ggplot2-tidy-evaluation_files/figure-html/facet-vars-1.png" width="218px" style="display: block; margin: auto;" />&lt;/p>
&lt;p>Compared to &lt;code>aes()&lt;/code>, &lt;code>vars()&lt;/code> takes unnamed arguments. This makes it a more
natural fit for use with &lt;code>!!!&lt;/code>, the unquote-splice operator.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">year&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="m">2018&lt;/span>
&lt;span class="n">d&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="n">mpg&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">filter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">manufacturer&lt;/span> &lt;span class="o">%in%&lt;/span> &lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;dodge&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;ford&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">ggplot&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_point&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">displ&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">cty&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="n">args&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">quos&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">year&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">manufacturer&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">d&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nf">facet_grid&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">vars&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">!!!&lt;/span>&lt;span class="n">args&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2017-07-ggplot2-tidy-evaluation_files/figure-html/vars-env-1.png" width="177px" style="display: block; margin: auto;" />&lt;/p>
&lt;p>Inside of &lt;code>vars()&lt;/code> you can easily supply names, which will add titles to the facets.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">p&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nf">facet_grid&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">vars&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Cylinder&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">cyl&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">labeller&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">label_both&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2017-07-ggplot2-tidy-evaluation_files/figure-html/labelled-grid-1.png" width="177px" style="display: block; margin: auto;" />&lt;/p>
&lt;p>&lt;code>vars()&lt;/code> makes it easier to pass variables from wrapper functions.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">p&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mtcars&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">wt&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">disp&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nf">geom_point&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="n">wrap_by&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">...&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nf">facet_wrap&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">vars&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">...&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">labeller&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">label_both&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="n">p&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nf">wrap_by&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">vs&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">am&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2017-07-ggplot2-tidy-evaluation_files/figure-html/wrap-by-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;p>In our &lt;code>wrap_by()&lt;/code> function above, we used tidy dots (
&lt;a href="https://adv-r.hadley.nz/quasiquotation.html#dot-dot-dot-..." target="_blank" rel="noopener">&lt;code>...&lt;/code>&lt;/a>), which represent an arbitrary number of additional arguments. Alternatively, we could allow the user to provide a single named argument with
&lt;a href="http://rlang.r-lib.org/reference/quotation.html" target="_blank" rel="noopener">&lt;code>enquo()&lt;/code>&lt;/a>. To create a default name, we&amp;rsquo;ll use
&lt;a href="http://rlang.r-lib.org/reference/quo_label.html" target="_blank" rel="noopener">&lt;code>quo_name()&lt;/code>&lt;/a>, which transforms a quosure into a simple string. Then we unquote and evaluate our arguments in their proper contexts using the
&lt;a href="http://rlang.r-lib.org/reference/quasiquotation.html" target="_blank" rel="noopener">&lt;code>!!&lt;/code>&lt;/a> (read: bang bang) operator, and the &lt;code>:=&lt;/code> operator to unquote the name.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">wrap_cut&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">var&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">3&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="n">var&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">enquo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">var&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">nm&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">quo_name&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">var&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">wrap_by&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">!!&lt;/span>&lt;span class="n">nm&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">cut_number&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">!!&lt;/span>&lt;span class="n">var&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">!!&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="n">p&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nf">wrap_cut&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">drat&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2017-07-ggplot2-tidy-evaluation_files/figure-html/wrap-cut-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;p>You will also need to use
&lt;a href="http://rlang.r-lib.org/" target="_blank" rel="noopener">rlang&lt;/a> tools if computing on the mapping of an existing ggplot2 object.&lt;/p>
&lt;h2 id="developer-facing-changes">Developer facing changes
&lt;a href="#developer-facing-changes">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>If you&amp;rsquo;re building an extension package on top of ggplot2, you need to be aware that the introduction of tidy evaluation fundamentally changes the data structures that &lt;code>aes()&lt;/code> uses. In brief:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">mapping&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mpg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">colour&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;smoothed&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># Variables are now stored as quosures&lt;/span>
&lt;span class="n">mapping&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="n">x&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;quosure&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; expr: ^mpg&lt;/span>
&lt;span class="c1">#&amp;gt; env: global&lt;/span>
&lt;span class="c1"># Constants (atomic vectors of length 1), remain&lt;/span>
&lt;span class="c1"># as is&lt;/span>
&lt;span class="n">mapping&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="n">colour&lt;/span>
&lt;span class="c1">#&amp;gt; [1] &amp;#34;smoothed&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;h2 id="getting-help">Getting help
&lt;a href="#getting-help">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>If you&amp;rsquo;re new to tidy evaluation, the best place to learn more about it is in the work-in-progress 2nd edition of
&lt;a href="https://adv-r.hadley.nz/" target="_blank" rel="noopener">Advanced R&lt;/a>, especially the
&lt;a href="https://adv-r.hadley.nz/meta.html" target="_blank" rel="noopener">Metaprogramming section&lt;/a>. You may also want to check out RStudio&amp;rsquo;s
&lt;a href="https://www.rstudio.com/resources/webinars/tidy-eval/" target="_blank" rel="noopener">tidy evaluation webinar&lt;/a> with Lionel Henry, or (if you&amp;rsquo;re short on time) Hadley&amp;rsquo;s video:
&lt;a href="https://www.youtube.com/watch?v=nERXS3ssntw" target="_blank" rel="noopener">Tidy evaluation in 5 minutes&lt;/a>.&lt;/p>
&lt;p>You can also always ask for help at
&lt;a href="https://community.rstudio.com/" target="_blank" rel="noopener">community.rstudio.com&lt;/a>.&lt;/p>
&lt;section class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1" role="doc-endnote">
&lt;p>Wickham, Hadley. 2016. “Programming with Ggplot2.” In &lt;em>Ggplot2: Elegant Graphics for Data Analysis&lt;/em>, 241–53. Cham: Springer International Publishing. doi:10.1007/978-3-319-24277-4_12. &lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/section></description></item><item><title>ggplot2 3.0.0</title><link>https://www.tidyverse.org/blog/2018/07/ggplot2-3-0-0/</link><pubDate>Thu, 05 Jul 2018 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2018/07/ggplot2-3-0-0/</guid><description>&lt;p>We&amp;rsquo;re extremely pleased to announce the release of
&lt;a href="https://ggplot2.tidyverse.org/" target="_blank" rel="noopener">ggplot2&lt;/a> 3.0.0. This is a major release: it was previously announced as ggplot2 2.3.0, but we decided to increment the version number because there are some big changes under the hood. Most importantly ggplot2 now supports tidy evaluation, which makes it easier to programmatically build plots with ggplot2 in the same way you can programmatically build data manipulation pipelines with dplyr.&lt;/p>
&lt;p>Install ggplot2 with:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">install.packages&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ggplot2&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;h2 id="breaking-changes">Breaking changes
&lt;a href="#breaking-changes">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>In stable, long-standing packages like ggplot2, we put in a lot of effort to make sure that we don&amp;rsquo;t introduce backward incompatible changes. For this release, that involved testing on five versions of R (3.1 - 3.5) writing a new visual testing package (
&lt;a href="https://github.com/lionel-/vdiffr" target="_blank" rel="noopener">vdiffr&lt;/a>), running R CMD check on downstream packages (over
&lt;a href="https://www.tidyverse.org/articles/2018/05/ggplot2-2-3-0/#our-process" target="_blank" rel="noopener">6,000 times!&lt;/a>), and
&lt;a href="https://www.tidyverse.org/articles/2018/05/ggplot2-2-3-0/" target="_blank" rel="noopener">widely advertising&lt;/a> the release to get the community&amp;rsquo;s help. However, sometimes we do decide that it&amp;rsquo;s worth breaking a small amount of existing code in the interests of improving future code.&lt;/p>
&lt;p>The changes should affect relatively little user code, but have required developers to make changes. A separate post will address developer-facing changes in further detail, however, common errors and ways to work around them can be found
in the
&lt;a href="https://github.com/tidyverse/ggplot2/blob/master/NEWS.md#breaking-changes" target="_blank" rel="noopener">Breaking changes&lt;/a> section of ggplot2&amp;rsquo;s
&lt;a href="https://github.com/tidyverse/ggplot2/blob/master/NEWS.md" target="_blank" rel="noopener">NEWS&lt;/a>. If you discover something missing, please let us know so we can add it.&lt;/p>
&lt;h2 id="tidy-evaluation">Tidy evaluation
&lt;a href="#tidy-evaluation">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>You can now use
&lt;a href="https://adv-r.hadley.nz/quasiquotation.html" target="_blank" rel="noopener">quasiquotation&lt;/a> in &lt;code>aes()&lt;/code>, &lt;code>facet_wrap()&lt;/code>, and &lt;code>facet_grid()&lt;/code>.
To support quasiquotation in facetting we&amp;rsquo;ve added a new helper that works
similarly to &lt;code>aes()&lt;/code>: &lt;code>vars()&lt;/code>, short for variables, so instead of
&lt;code>facet_grid(x + y ~ a + b)&lt;/code> you can now write &lt;code>facet_grid(vars(x, y), vars(a, b))&lt;/code>.
The formula interface won&amp;rsquo;t go away; but the new &lt;code>vars()&lt;/code> interface is
much easier to program with.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">x_var&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">quo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">wt&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">y_var&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">quo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mpg&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">group_var&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">quo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cyl&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mtcars&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">!!&lt;/span>&lt;span class="n">x_var&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">!!&lt;/span>&lt;span class="n">y_var&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_point&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">facet_wrap&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">vars&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">!!&lt;/span>&lt;span class="n">group_var&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2018-07-ggplot2-3-0-0_files/figure-html/label-both-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;h2 id="new-features">New features
&lt;a href="#new-features">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>We only touch on a few of the new features in ggplot2 — there are many many more. For a full account of these improvements, please see
&lt;a href="https://github.com/tidyverse/ggplot2/blob/master/NEWS.md" target="_blank" rel="noopener">NEWS&lt;/a>. If there&amp;rsquo;s a feature you particularly like, and you write a blog post about, please share it with us using
&lt;a href="https://goo.gl/forms/elGvrlIXgTZVtCap1" target="_blank" rel="noopener">this form&lt;/a>, and we&amp;rsquo;ll include in a round up post in a month&amp;rsquo;s time.&lt;/p>
&lt;h3 id="sf">sf
&lt;a href="#sf">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>Thanks to the help of
&lt;a href="https://github.com/edzer" target="_blank" rel="noopener">Edzer Pebesma&lt;/a> and the
&lt;a href="https://github.com/r-spatial" target="_blank" rel="noopener">r-spatial&lt;/a> team, ggplot2 now has full support for simple features through
&lt;a href="https://r-spatial.github.io/sf/" target="_blank" rel="noopener">sf&lt;/a> using &lt;code>geom_sf()&lt;/code> and &lt;code>coord_sf()&lt;/code>; it now
automatically aligns CRS across layers, sets up the correct aspect ratio, and
draws a graticule.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">nc&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="n">sf&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="nf">st_read&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">system.file&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;shape/nc.shp&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">package&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;sf&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1">#&amp;gt; Reading layer `nc&amp;#39; from data source `/Users/hadley/R/sf/shape/nc.shp&amp;#39; using driver `ESRI Shapefile&amp;#39;&lt;/span>
&lt;span class="c1">#&amp;gt; Simple feature collection with 100 features and 14 fields&lt;/span>
&lt;span class="c1">#&amp;gt; geometry type: MULTIPOLYGON&lt;/span>
&lt;span class="c1">#&amp;gt; dimension: XY&lt;/span>
&lt;span class="c1">#&amp;gt; bbox: xmin: -84.32385 ymin: 33.88199 xmax: -75.45698 ymax: 36.58965&lt;/span>
&lt;span class="c1">#&amp;gt; epsg (SRID): 4267&lt;/span>
&lt;span class="c1">#&amp;gt; proj4string: +proj=longlat +datum=NAD27 +no_defs&lt;/span>
&lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nc&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_sf&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">annotate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;point&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">-80&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">35&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">colour&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;red&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">size&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2018-07-ggplot2-3-0-0_files/figure-html/sf-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;h3 id="calculated-aesthetics">Calculated aesthetics
&lt;a href="#calculated-aesthetics">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>The new &lt;code>stat()&lt;/code> function offers a cleaner, and better-documented syntax for
calculated-aesthetic variables. This replaces the older approach of surrounding
the variable name with &lt;code>..&lt;/code>. Instead of using &lt;code>aes(y = ..count..)&lt;/code>, you can use
&lt;code>aes(y = stat(count))&lt;/code>.&lt;/p>
&lt;p>This is particularly nice for more complex calculations, as &lt;code>stat()&lt;/code> only needs
to be specified once; e.g. &lt;code>aes(y = stat(count / max(count)))&lt;/code> rather than
&lt;code>aes(y = ..count.. / max(..count..))&lt;/code>.&lt;/p>
&lt;h3 id="tag">Tag
&lt;a href="#tag">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>In addition to title, subtitle, and caption, a new tag label has been added, for identifying plots. Add a tag with &lt;code>labs(tag = &amp;quot;A&amp;quot;)&lt;/code>, style it with the &lt;code>plot.tag&lt;/code> theme element, and control position with the &lt;code>plot.tag.position&lt;/code> theme.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mtcars&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_point&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">disp&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">mpg&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">labs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">tag&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#39;A&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">title&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#39;Title of this plot&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2018-07-ggplot2-3-0-0_files/figure-html/tag-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;h3 id="layers-geoms-stats-and-position-adjustments">Layers: geoms, stats, and position adjustments
&lt;a href="#layers-geoms-stats-and-position-adjustments">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>The new
&lt;a href="https://ggplot2.tidyverse.org/reference/position_dodge.html" target="_blank" rel="noopener">&lt;code>position_dodge2()&lt;/code>&lt;/a> allows you to arrange the horizontal position of plots with variable widths (i.e. bars and rectangles, in addition to box plots). By default, &lt;code>position_dodge2()&lt;/code> preserves the width of each element. You can choose to preserve the total width by setting the &lt;code>preserve&lt;/code> argument to &lt;code>&amp;quot;total&amp;quot;&lt;/code>. Thank you to
&lt;a href="https://github.com/karawoo" target="_blank" rel="noopener">Kara Woo&lt;/a> for all of her work on this.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mtcars&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">factor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cyl&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">fill&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">factor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">vs&lt;/span>&lt;span class="p">)))&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_bar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">position&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">position_dodge2&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">preserve&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;single&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mtcars&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">factor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cyl&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">fill&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">factor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">vs&lt;/span>&lt;span class="p">)))&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_bar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">position&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">position_dodge2&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">preserve&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;total&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2018-07-ggplot2-3-0-0_files/figure-html/dodge-st-1.png" width="50%" />&lt;img src="https://www.tidyverse.org/articles/2018-07-ggplot2-3-0-0_files/figure-html/dodge-st-2.png" width="50%" />&lt;/p>
&lt;h3 id="scales-and-guides">Scales and guides
&lt;a href="#scales-and-guides">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>Several new functions have been added to make it easy to use Viridis colour
scales: &lt;code>scale_colour_viridis_c()&lt;/code> and &lt;code>scale_fill_viridis_c()&lt;/code> for continuous,
and &lt;code>scale_colour_viridis_d()&lt;/code> and &lt;code>scale_fill_viridis_d()&lt;/code> for discrete.
Viridis is also now used as the default colour and fill scale for ordered
factors.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">dsamp&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="n">diamonds&lt;/span>&lt;span class="nf">[sample&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">nrow&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">diamonds&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="m">1000&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">]&lt;/span>
&lt;span class="n">d&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dsamp&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">carat&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">price&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_point&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">colour&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">clarity&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="n">d&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nf">scale_colour_viridis_d&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2018-07-ggplot2-3-0-0_files/figure-html/viridis-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;p>&lt;code>scale_colour_continuous()&lt;/code> and &lt;code>scale_colour_gradient()&lt;/code> are now controlled by global options &lt;code>ggplot2.continuous.colour&lt;/code> and &lt;code>ggplot2.continuous.fill&lt;/code>. You can set them to &lt;code>&amp;quot;viridis&amp;quot;&lt;/code> to use the viridis colour scale by default:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">options&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="n">ggplot2.continuous.colour&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;viridis&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">ggplot2.continuous.fill&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;viridis&amp;#34;&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">v&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">faithfuld&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_tile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">waiting&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">eruptions&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">fill&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">density&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="n">v&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nf">scale_fill_continuous&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2018-07-ggplot2-3-0-0_files/figure-html/viridis-c-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;p>&lt;code>guide_colorbar()&lt;/code> is more configurable: tick marks and color bar frame can now by styled with arguments &lt;code>ticks.colour&lt;/code>, &lt;code>ticks.linewidth&lt;/code>, &lt;code>frame.colour&lt;/code>, &lt;code>frame.linewidth&lt;/code>, and &lt;code>frame.linetype&lt;/code>.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">p&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mtcars&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">wt&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">mpg&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="n">p&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nf">geom_point&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">colour&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">cyl&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">scale_colour_gradient&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="n">low&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;white&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">high&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;red&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">guide&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">guide_colorbar&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="n">frame.colour&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;black&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">ticks.colour&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;black&amp;#34;&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2018-07-ggplot2-3-0-0_files/figure-html/guide-colorbar-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;h3 id="nonstandard-aesthetics">Nonstandard aesthetics
&lt;a href="#nonstandard-aesthetics">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>Thanks to
&lt;a href="https://github.com/tidyverse/ggplot2/pull/2555" target="_blank" rel="noopener">Claus Wilke&lt;/a>, there is significantly improved support for nonstandard aesthetics.&lt;/p>
&lt;p>Aesthetics can now be specified independent of the scale name.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">iris&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Sepal.Length&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">fill&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Species&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_density&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">alpha&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">0.7&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">scale_colour_brewer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;qual&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">aesthetics&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;fill&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2018-07-ggplot2-3-0-0_files/figure-html/nsa-independent-scale-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>This release includes a change to the ggplot2 authors, which now includes Claus Wilke (new), and Lionel Henry, Kara Woo, Thomas Lin Pedersen, and Kohske Takahashi in recognition of their past contributions.&lt;/p>
&lt;p>We&amp;rsquo;re grateful to the &lt;em>391&lt;/em> people who contributed issues, code and comments:
&lt;a href="https://github.com/achalaacharya" target="_blank" rel="noopener">@achalaacharya&lt;/a>,
&lt;a href="https://github.com/adambajguz" target="_blank" rel="noopener">@adambajguz&lt;/a>,
&lt;a href="https://github.com/AdeelH" target="_blank" rel="noopener">@AdeelH&lt;/a>,
&lt;a href="https://github.com/adrfantini" target="_blank" rel="noopener">@adrfantini&lt;/a>,
&lt;a href="https://github.com/aelwan" target="_blank" rel="noopener">@aelwan&lt;/a>,
&lt;a href="https://github.com/aetiologicCanada" target="_blank" rel="noopener">@aetiologicCanada&lt;/a>,
&lt;a href="https://github.com/ajay-d" target="_blank" rel="noopener">@ajay-d&lt;/a>,
&lt;a href="https://github.com/alberthkcheng" target="_blank" rel="noopener">@alberthkcheng&lt;/a>,
&lt;a href="https://github.com/alchenist" target="_blank" rel="noopener">@alchenist&lt;/a>,
&lt;a href="https://github.com/alexconingham" target="_blank" rel="noopener">@alexconingham&lt;/a>,
&lt;a href="https://github.com/alexgenin" target="_blank" rel="noopener">@alexgenin&lt;/a>,
&lt;a href="https://github.com/alistaire47" target="_blank" rel="noopener">@alistaire47&lt;/a>,
&lt;a href="https://github.com/andbarker" target="_blank" rel="noopener">@andbarker&lt;/a>,
&lt;a href="https://github.com/andrewdolman" target="_blank" rel="noopener">@andrewdolman&lt;/a>,
&lt;a href="https://github.com/andrewjpfeiffer" target="_blank" rel="noopener">@andrewjpfeiffer&lt;/a>,
&lt;a href="https://github.com/andzandz11" target="_blank" rel="noopener">@andzandz11&lt;/a>,
&lt;a href="https://github.com/aornugent" target="_blank" rel="noopener">@aornugent&lt;/a>,
&lt;a href="https://github.com/aosmith16" target="_blank" rel="noopener">@aosmith16&lt;/a>,
&lt;a href="https://github.com/aphalo" target="_blank" rel="noopener">@aphalo&lt;/a>,
&lt;a href="https://github.com/arthur-st" target="_blank" rel="noopener">@arthur-st&lt;/a>,
&lt;a href="https://github.com/aschersleben" target="_blank" rel="noopener">@aschersleben&lt;/a>,
&lt;a href="https://github.com/awgymer" target="_blank" rel="noopener">@awgymer&lt;/a>,
&lt;a href="https://github.com/Ax3man" target="_blank" rel="noopener">@Ax3man&lt;/a>,
&lt;a href="https://github.com/baderstine" target="_blank" rel="noopener">@baderstine&lt;/a>,
&lt;a href="https://github.com/baffelli" target="_blank" rel="noopener">@baffelli&lt;/a>,
&lt;a href="https://github.com/baptiste" target="_blank" rel="noopener">@baptiste&lt;/a>,
&lt;a href="https://github.com/BarkleyBG" target="_blank" rel="noopener">@BarkleyBG&lt;/a>,
&lt;a href="https://github.com/basille" target="_blank" rel="noopener">@basille&lt;/a>,
&lt;a href="https://github.com/batpigandme" target="_blank" rel="noopener">@batpigandme&lt;/a>,
&lt;a href="https://github.com/batuff" target="_blank" rel="noopener">@batuff&lt;/a>,
&lt;a href="https://github.com/bbolker" target="_blank" rel="noopener">@bbolker&lt;/a>,
&lt;a href="https://github.com/bbrewington" target="_blank" rel="noopener">@bbrewington&lt;/a>,
&lt;a href="https://github.com/beansprout88" target="_blank" rel="noopener">@beansprout88&lt;/a>,
&lt;a href="https://github.com/behrman" target="_blank" rel="noopener">@behrman&lt;/a>,
&lt;a href="https://github.com/ben519" target="_blank" rel="noopener">@ben519&lt;/a>,
&lt;a href="https://github.com/benediktclaus" target="_blank" rel="noopener">@benediktclaus&lt;/a>,
&lt;a href="https://github.com/berkorbay" target="_blank" rel="noopener">@berkorbay&lt;/a>,
&lt;a href="https://github.com/bfgray3" target="_blank" rel="noopener">@bfgray3&lt;/a>,
&lt;a href="https://github.com/bhaskarvk" target="_blank" rel="noopener">@bhaskarvk&lt;/a>,
&lt;a href="https://github.com/billdenney" target="_blank" rel="noopener">@billdenney&lt;/a>,
&lt;a href="https://github.com/bjreisman" target="_blank" rel="noopener">@bjreisman&lt;/a>,
&lt;a href="https://github.com/boshek" target="_blank" rel="noopener">@boshek&lt;/a>,
&lt;a href="https://github.com/botanize" target="_blank" rel="noopener">@botanize&lt;/a>,
&lt;a href="https://github.com/botaspablo" target="_blank" rel="noopener">@botaspablo&lt;/a>,
&lt;a href="https://github.com/bouch-ra" target="_blank" rel="noopener">@bouch-ra&lt;/a>,
&lt;a href="https://github.com/brianwdavis" target="_blank" rel="noopener">@brianwdavis&lt;/a>,
&lt;a href="https://github.com/briencj" target="_blank" rel="noopener">@briencj&lt;/a>,
&lt;a href="https://github.com/brodieG" target="_blank" rel="noopener">@brodieG&lt;/a>,
&lt;a href="https://github.com/bsaul" target="_blank" rel="noopener">@bsaul&lt;/a>,
&lt;a href="https://github.com/bschneidr" target="_blank" rel="noopener">@bschneidr&lt;/a>,
&lt;a href="https://github.com/burchill" target="_blank" rel="noopener">@burchill&lt;/a>,
&lt;a href="https://github.com/buyske" target="_blank" rel="noopener">@buyske&lt;/a>,
&lt;a href="https://github.com/byapparov" target="_blank" rel="noopener">@byapparov&lt;/a>,
&lt;a href="https://github.com/caijun" target="_blank" rel="noopener">@caijun&lt;/a>,
&lt;a href="https://github.com/cankutcubuk" target="_blank" rel="noopener">@cankutcubuk&lt;/a>,
&lt;a href="https://github.com/CharlesCara" target="_blank" rel="noopener">@CharlesCara&lt;/a>,
&lt;a href="https://github.com/Chavelior" target="_blank" rel="noopener">@Chavelior&lt;/a>,
&lt;a href="https://github.com/christianhomberg" target="_blank" rel="noopener">@christianhomberg&lt;/a>,
&lt;a href="https://github.com/cinkova" target="_blank" rel="noopener">@cinkova&lt;/a>,
&lt;a href="https://github.com/ckuenne" target="_blank" rel="noopener">@ckuenne&lt;/a>,
&lt;a href="https://github.com/clauswilke" target="_blank" rel="noopener">@clauswilke&lt;/a>,
&lt;a href="https://github.com/cooknl" target="_blank" rel="noopener">@cooknl&lt;/a>,
&lt;a href="https://github.com/corytu" target="_blank" rel="noopener">@corytu&lt;/a>,
&lt;a href="https://github.com/cpsievert" target="_blank" rel="noopener">@cpsievert&lt;/a>,
&lt;a href="https://github.com/cregouby" target="_blank" rel="noopener">@cregouby&lt;/a>,
&lt;a href="https://github.com/crsh" target="_blank" rel="noopener">@crsh&lt;/a>,
&lt;a href="https://github.com/cryanking" target="_blank" rel="noopener">@cryanking&lt;/a>,
&lt;a href="https://github.com/cseveren" target="_blank" rel="noopener">@cseveren&lt;/a>,
&lt;a href="https://github.com/daattali" target="_blank" rel="noopener">@daattali&lt;/a>,
&lt;a href="https://github.com/danfulop" target="_blank" rel="noopener">@danfulop&lt;/a>,
&lt;a href="https://github.com/daniel-barnett" target="_blank" rel="noopener">@daniel-barnett&lt;/a>,
&lt;a href="https://github.com/dantonnoriega" target="_blank" rel="noopener">@dantonnoriega&lt;/a>,
&lt;a href="https://github.com/DarioBoh" target="_blank" rel="noopener">@DarioBoh&lt;/a>,
&lt;a href="https://github.com/DarioS" target="_blank" rel="noopener">@DarioS&lt;/a>,
&lt;a href="https://github.com/darrkj" target="_blank" rel="noopener">@darrkj&lt;/a>,
&lt;a href="https://github.com/DarwinAwardWinner" target="_blank" rel="noopener">@DarwinAwardWinner&lt;/a>,
&lt;a href="https://github.com/DasHammett" target="_blank" rel="noopener">@DasHammett&lt;/a>,
&lt;a href="https://github.com/datalorax" target="_blank" rel="noopener">@datalorax&lt;/a>,
&lt;a href="https://github.com/davharris" target="_blank" rel="noopener">@davharris&lt;/a>,
&lt;a href="https://github.com/DavidNash1" target="_blank" rel="noopener">@DavidNash1&lt;/a>,
&lt;a href="https://github.com/DavyLandman" target="_blank" rel="noopener">@DavyLandman&lt;/a>,
&lt;a href="https://github.com/dbo99" target="_blank" rel="noopener">@dbo99&lt;/a>,
&lt;a href="https://github.com/ddiez" target="_blank" rel="noopener">@ddiez&lt;/a>,
&lt;a href="https://github.com/delferts" target="_blank" rel="noopener">@delferts&lt;/a>,
&lt;a href="https://github.com/Demetrio92" target="_blank" rel="noopener">@Demetrio92&lt;/a>,
&lt;a href="https://github.com/DesiQuintans" target="_blank" rel="noopener">@DesiQuintans&lt;/a>,
&lt;a href="https://github.com/dietrichson" target="_blank" rel="noopener">@dietrichson&lt;/a>,
&lt;a href="https://github.com/Dilini-Sewwandi-Rajapaksha" target="_blank" rel="noopener">@Dilini-Sewwandi-Rajapaksha&lt;/a>,
&lt;a href="https://github.com/dipenpatel235" target="_blank" rel="noopener">@dipenpatel235&lt;/a>,
&lt;a href="https://github.com/diplodata" target="_blank" rel="noopener">@diplodata&lt;/a>,
&lt;a href="https://github.com/dirkschumacher" target="_blank" rel="noopener">@dirkschumacher&lt;/a>,
&lt;a href="https://github.com/djrajdev" target="_blank" rel="noopener">@djrajdev&lt;/a>,
&lt;a href="https://github.com/dl7631" target="_blank" rel="noopener">@dl7631&lt;/a>,
&lt;a href="https://github.com/dmenne" target="_blank" rel="noopener">@dmenne&lt;/a>,
&lt;a href="https://github.com/DocOfi" target="_blank" rel="noopener">@DocOfi&lt;/a>,
&lt;a href="https://github.com/domiden" target="_blank" rel="noopener">@domiden&lt;/a>,
&lt;a href="https://github.com/dongzhuoer" target="_blank" rel="noopener">@dongzhuoer&lt;/a>,
&lt;a href="https://github.com/dpastoor" target="_blank" rel="noopener">@dpastoor&lt;/a>,
&lt;a href="https://github.com/dpmcsuss" target="_blank" rel="noopener">@dpmcsuss&lt;/a>,
&lt;a href="https://github.com/dpprdan" target="_blank" rel="noopener">@dpprdan&lt;/a>,
&lt;a href="https://github.com/dpseidel" target="_blank" rel="noopener">@dpseidel&lt;/a>,
&lt;a href="https://github.com/DSLituiev" target="_blank" rel="noopener">@DSLituiev&lt;/a>,
&lt;a href="https://github.com/dvcv" target="_blank" rel="noopener">@dvcv&lt;/a>,
&lt;a href="https://github.com/dylan-stark" target="_blank" rel="noopener">@dylan-stark&lt;/a>,
&lt;a href="https://github.com/eamoncaddigan" target="_blank" rel="noopener">@eamoncaddigan&lt;/a>,
&lt;a href="https://github.com/econandrew" target="_blank" rel="noopener">@econandrew&lt;/a>,
&lt;a href="https://github.com/edgararuiz" target="_blank" rel="noopener">@edgararuiz&lt;/a>,
&lt;a href="https://github.com/edmundesterbauer" target="_blank" rel="noopener">@edmundesterbauer&lt;/a>,
&lt;a href="https://github.com/EdwinTh" target="_blank" rel="noopener">@EdwinTh&lt;/a>,
&lt;a href="https://github.com/edzer" target="_blank" rel="noopener">@edzer&lt;/a>,
&lt;a href="https://github.com/eeenilsson" target="_blank" rel="noopener">@eeenilsson&lt;/a>,
&lt;a href="https://github.com/ekatko1" target="_blank" rel="noopener">@ekatko1&lt;/a>,
&lt;a href="https://github.com/elbamos" target="_blank" rel="noopener">@elbamos&lt;/a>,
&lt;a href="https://github.com/elina800" target="_blank" rel="noopener">@elina800&lt;/a>,
&lt;a href="https://github.com/elinw" target="_blank" rel="noopener">@elinw&lt;/a>,
&lt;a href="https://github.com/eliocamp" target="_blank" rel="noopener">@eliocamp&lt;/a>,
&lt;a href="https://github.com/Emaasit" target="_blank" rel="noopener">@Emaasit&lt;/a>,
&lt;a href="https://github.com/emilelatour" target="_blank" rel="noopener">@emilelatour&lt;/a>,
&lt;a href="https://github.com/Enchufa2" target="_blank" rel="noopener">@Enchufa2&lt;/a>,
&lt;a href="https://github.com/erocoar" target="_blank" rel="noopener">@erocoar&lt;/a>,
&lt;a href="https://github.com/espinielli" target="_blank" rel="noopener">@espinielli&lt;/a>,
&lt;a href="https://github.com/everydayduffy" target="_blank" rel="noopener">@everydayduffy&lt;/a>,
&lt;a href="https://github.com/ewallace" target="_blank" rel="noopener">@ewallace&lt;/a>,
&lt;a href="https://github.com/FabianRoger" target="_blank" rel="noopener">@FabianRoger&lt;/a>,
&lt;a href="https://github.com/FelixMailoa" target="_blank" rel="noopener">@FelixMailoa&lt;/a>,
&lt;a href="https://github.com/FlordeAzahar" target="_blank" rel="noopener">@FlordeAzahar&lt;/a>,
&lt;a href="https://github.com/flying-sheep" target="_blank" rel="noopener">@flying-sheep&lt;/a>,
&lt;a href="https://github.com/fmassicano" target="_blank" rel="noopener">@fmassicano&lt;/a>,
&lt;a href="https://github.com/foldager" target="_blank" rel="noopener">@foldager&lt;/a>,
&lt;a href="https://github.com/foo-bar-baz-qux" target="_blank" rel="noopener">@foo-bar-baz-qux&lt;/a>,
&lt;a href="https://github.com/francoisturcot" target="_blank" rel="noopener">@francoisturcot&lt;/a>,
&lt;a href="https://github.com/Freguglia" target="_blank" rel="noopener">@Freguglia&lt;/a>,
&lt;a href="https://github.com/frostell" target="_blank" rel="noopener">@frostell&lt;/a>,
&lt;a href="https://github.com/gfiumara" target="_blank" rel="noopener">@gfiumara&lt;/a>,
&lt;a href="https://github.com/GG786" target="_blank" rel="noopener">@GG786&lt;/a>,
&lt;a href="https://github.com/ggrothendieck" target="_blank" rel="noopener">@ggrothendieck&lt;/a>,
&lt;a href="https://github.com/ghost" target="_blank" rel="noopener">@ghost&lt;/a>,
&lt;a href="https://github.com/gilleschapron" target="_blank" rel="noopener">@gilleschapron&lt;/a>,
&lt;a href="https://github.com/GillesSanMartin" target="_blank" rel="noopener">@GillesSanMartin&lt;/a>,
&lt;a href="https://github.com/gjabel" target="_blank" rel="noopener">@gjabel&lt;/a>,
&lt;a href="https://github.com/glennstone" target="_blank" rel="noopener">@glennstone&lt;/a>,
&lt;a href="https://github.com/gmbecker" target="_blank" rel="noopener">@gmbecker&lt;/a>,
&lt;a href="https://github.com/GoodluckH" target="_blank" rel="noopener">@GoodluckH&lt;/a>,
&lt;a href="https://github.com/gordocabron" target="_blank" rel="noopener">@gordocabron&lt;/a>,
&lt;a href="https://github.com/goyalmunish" target="_blank" rel="noopener">@goyalmunish&lt;/a>,
&lt;a href="https://github.com/grantmcdermott" target="_blank" rel="noopener">@grantmcdermott&lt;/a>,
&lt;a href="https://github.com/GreenStat" target="_blank" rel="noopener">@GreenStat&lt;/a>,
&lt;a href="https://github.com/gregmacfarlane" target="_blank" rel="noopener">@gregmacfarlane&lt;/a>,
&lt;a href="https://github.com/gregrs-uk" target="_blank" rel="noopener">@gregrs-uk&lt;/a>,
&lt;a href="https://github.com/GuangchuangYu" target="_blank" rel="noopener">@GuangchuangYu&lt;/a>,
&lt;a href="https://github.com/gwarnes-mdsol" target="_blank" rel="noopener">@gwarnes-mdsol&lt;/a>,
&lt;a href="https://github.com/ha0ye" target="_blank" rel="noopener">@ha0ye&lt;/a>,
&lt;a href="https://github.com/hadley" target="_blank" rel="noopener">@hadley&lt;/a>,
&lt;a href="https://github.com/hannes101" target="_blank" rel="noopener">@hannes101&lt;/a>,
&lt;a href="https://github.com/hansvancalster" target="_blank" rel="noopener">@hansvancalster&lt;/a>,
&lt;a href="https://github.com/hardeepsjohar" target="_blank" rel="noopener">@hardeepsjohar&lt;/a>,
&lt;a href="https://github.com/has2k1" target="_blank" rel="noopener">@has2k1&lt;/a>,
&lt;a href="https://github.com/heckendorfc" target="_blank" rel="noopener">@heckendorfc&lt;/a>,
&lt;a href="https://github.com/hedjour" target="_blank" rel="noopener">@hedjour&lt;/a>,
&lt;a href="https://github.com/Henrik-P" target="_blank" rel="noopener">@Henrik-P&lt;/a>,
&lt;a href="https://github.com/henrikmidtiby" target="_blank" rel="noopener">@henrikmidtiby&lt;/a>,
&lt;a href="https://github.com/hrabel" target="_blank" rel="noopener">@hrabel&lt;/a>,
&lt;a href="https://github.com/hrbrmstr" target="_blank" rel="noopener">@hrbrmstr&lt;/a>,
&lt;a href="https://github.com/huangl07" target="_blank" rel="noopener">@huangl07&lt;/a>,
&lt;a href="https://github.com/HughParsonage" target="_blank" rel="noopener">@HughParsonage&lt;/a>,
&lt;a href="https://github.com/ibiris" target="_blank" rel="noopener">@ibiris&lt;/a>,
&lt;a href="https://github.com/idavydov" target="_blank" rel="noopener">@idavydov&lt;/a>,
&lt;a href="https://github.com/idemockle" target="_blank" rel="noopener">@idemockle&lt;/a>,
&lt;a href="https://github.com/igordot" target="_blank" rel="noopener">@igordot&lt;/a>,
&lt;a href="https://github.com/Ilia-Kosenkov" target="_blank" rel="noopener">@Ilia-Kosenkov&lt;/a>,
&lt;a href="https://github.com/IndrajeetPatil" target="_blank" rel="noopener">@IndrajeetPatil&lt;/a>,
&lt;a href="https://github.com/irudnyts" target="_blank" rel="noopener">@irudnyts&lt;/a>,
&lt;a href="https://github.com/izahn" target="_blank" rel="noopener">@izahn&lt;/a>,
&lt;a href="https://github.com/jan-glx" target="_blank" rel="noopener">@jan-glx&lt;/a>,
&lt;a href="https://github.com/janvanoeveren" target="_blank" rel="noopener">@janvanoeveren&lt;/a>,
&lt;a href="https://github.com/jarrod-dalton" target="_blank" rel="noopener">@jarrod-dalton&lt;/a>,
&lt;a href="https://github.com/jcrada" target="_blank" rel="noopener">@jcrada&lt;/a>,
&lt;a href="https://github.com/jdagilliland" target="_blank" rel="noopener">@jdagilliland&lt;/a>,
&lt;a href="https://github.com/jemus42" target="_blank" rel="noopener">@jemus42&lt;/a>,
&lt;a href="https://github.com/jenitivecase" target="_blank" rel="noopener">@jenitivecase&lt;/a>,
&lt;a href="https://github.com/jennybc" target="_blank" rel="noopener">@jennybc&lt;/a>,
&lt;a href="https://github.com/jentjr" target="_blank" rel="noopener">@jentjr&lt;/a>,
&lt;a href="https://github.com/jflycn" target="_blank" rel="noopener">@jflycn&lt;/a>,
&lt;a href="https://github.com/jgoad" target="_blank" rel="noopener">@jgoad&lt;/a>,
&lt;a href="https://github.com/jimdholland" target="_blank" rel="noopener">@jimdholland&lt;/a>,
&lt;a href="https://github.com/jimhester" target="_blank" rel="noopener">@jimhester&lt;/a>,
&lt;a href="https://github.com/jnaber" target="_blank" rel="noopener">@jnaber&lt;/a>,
&lt;a href="https://github.com/jnolis" target="_blank" rel="noopener">@jnolis&lt;/a>,
&lt;a href="https://github.com/joacorapela" target="_blank" rel="noopener">@joacorapela&lt;/a>,
&lt;a href="https://github.com/joergtrojan" target="_blank" rel="noopener">@joergtrojan&lt;/a>,
&lt;a href="https://github.com/JoFAM" target="_blank" rel="noopener">@JoFAM&lt;/a>,
&lt;a href="https://github.com/johngoldin" target="_blank" rel="noopener">@johngoldin&lt;/a>,
&lt;a href="https://github.com/JohnMount" target="_blank" rel="noopener">@JohnMount&lt;/a>,
&lt;a href="https://github.com/jonocarroll" target="_blank" rel="noopener">@jonocarroll&lt;/a>,
&lt;a href="https://github.com/joojala" target="_blank" rel="noopener">@joojala&lt;/a>,
&lt;a href="https://github.com/jorgher" target="_blank" rel="noopener">@jorgher&lt;/a>,
&lt;a href="https://github.com/josephuses" target="_blank" rel="noopener">@josephuses&lt;/a>,
&lt;a href="https://github.com/joshkehn" target="_blank" rel="noopener">@joshkehn&lt;/a>,
&lt;a href="https://github.com/jpilorget" target="_blank" rel="noopener">@jpilorget&lt;/a>,
&lt;a href="https://github.com/jrnold" target="_blank" rel="noopener">@jrnold&lt;/a>,
&lt;a href="https://github.com/jrvianna" target="_blank" rel="noopener">@jrvianna&lt;/a>,
&lt;a href="https://github.com/jsams" target="_blank" rel="noopener">@jsams&lt;/a>,
&lt;a href="https://github.com/jsta" target="_blank" rel="noopener">@jsta&lt;/a>,
&lt;a href="https://github.com/JTapper" target="_blank" rel="noopener">@JTapper&lt;/a>,
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>,
&lt;a href="https://github.com/jvcasillas" target="_blank" rel="noopener">@jvcasillas&lt;/a>,
&lt;a href="https://github.com/jwdink" target="_blank" rel="noopener">@jwdink&lt;/a>,
&lt;a href="https://github.com/jwhendy" target="_blank" rel="noopener">@jwhendy&lt;/a>,
&lt;a href="https://github.com/JWilb" target="_blank" rel="noopener">@JWilb&lt;/a>,
&lt;a href="https://github.com/jzadra" target="_blank" rel="noopener">@jzadra&lt;/a>,
&lt;a href="https://github.com/kamilsi" target="_blank" rel="noopener">@kamilsi&lt;/a>,
&lt;a href="https://github.com/karawoo" target="_blank" rel="noopener">@karawoo&lt;/a>,
&lt;a href="https://github.com/karldw" target="_blank" rel="noopener">@karldw&lt;/a>,
&lt;a href="https://github.com/katrinleinweber" target="_blank" rel="noopener">@katrinleinweber&lt;/a>,
&lt;a href="https://github.com/kaybenleroll" target="_blank" rel="noopener">@kaybenleroll&lt;/a>,
&lt;a href="https://github.com/kenbeek" target="_blank" rel="noopener">@kenbeek&lt;/a>,
&lt;a href="https://github.com/kent37" target="_blank" rel="noopener">@kent37&lt;/a>,
&lt;a href="https://github.com/kevinushey" target="_blank" rel="noopener">@kevinushey&lt;/a>,
&lt;a href="https://github.com/kimchpekr" target="_blank" rel="noopener">@kimchpekr&lt;/a>,
&lt;a href="https://github.com/klmr" target="_blank" rel="noopener">@klmr&lt;/a>,
&lt;a href="https://github.com/kmace" target="_blank" rel="noopener">@kmace&lt;/a>,
&lt;a href="https://github.com/krlmlr" target="_blank" rel="noopener">@krlmlr&lt;/a>,
&lt;a href="https://github.com/kylebmetrum" target="_blank" rel="noopener">@kylebmetrum&lt;/a>,
&lt;a href="https://github.com/landesbergn" target="_blank" rel="noopener">@landesbergn&lt;/a>,
&lt;a href="https://github.com/laurareads" target="_blank" rel="noopener">@laurareads&lt;/a>,
&lt;a href="https://github.com/ldecicco-USGS" target="_blank" rel="noopener">@ldecicco-USGS&lt;/a>,
&lt;a href="https://github.com/Leoloh" target="_blank" rel="noopener">@Leoloh&lt;/a>,
&lt;a href="https://github.com/likanzhan" target="_blank" rel="noopener">@likanzhan&lt;/a>,
&lt;a href="https://github.com/lindeloev" target="_blank" rel="noopener">@lindeloev&lt;/a>,
&lt;a href="https://github.com/lionel-" target="_blank" rel="noopener">@lionel-&lt;/a>,
&lt;a href="https://github.com/liuwell" target="_blank" rel="noopener">@liuwell&lt;/a>,
&lt;a href="https://github.com/llrs" target="_blank" rel="noopener">@llrs&lt;/a>,
&lt;a href="https://github.com/LSanselme" target="_blank" rel="noopener">@LSanselme&lt;/a>,
&lt;a href="https://github.com/luisDVA" target="_blank" rel="noopener">@luisDVA&lt;/a>,
&lt;a href="https://github.com/luwei0917" target="_blank" rel="noopener">@luwei0917&lt;/a>,
&lt;a href="https://github.com/MagicForrest" target="_blank" rel="noopener">@MagicForrest&lt;/a>,
&lt;a href="https://github.com/malcolmbarrett" target="_blank" rel="noopener">@malcolmbarrett&lt;/a>,
&lt;a href="https://github.com/mallerhand" target="_blank" rel="noopener">@mallerhand&lt;/a>,
&lt;a href="https://github.com/ManuelNeumann" target="_blank" rel="noopener">@ManuelNeumann&lt;/a>,
&lt;a href="https://github.com/manuelreif" target="_blank" rel="noopener">@manuelreif&lt;/a>,
&lt;a href="https://github.com/MarauderPixie" target="_blank" rel="noopener">@MarauderPixie&lt;/a>,
&lt;a href="https://github.com/mariellep" target="_blank" rel="noopener">@mariellep&lt;/a>,
&lt;a href="https://github.com/Maschette" target="_blank" rel="noopener">@Maschette&lt;/a>,
&lt;a href="https://github.com/mattwilliamson13" target="_blank" rel="noopener">@mattwilliamson13&lt;/a>,
&lt;a href="https://github.com/mbergins" target="_blank" rel="noopener">@mbergins&lt;/a>,
&lt;a href="https://github.com/mcol" target="_blank" rel="noopener">@mcol&lt;/a>,
&lt;a href="https://github.com/mdsumner" target="_blank" rel="noopener">@mdsumner&lt;/a>,
&lt;a href="https://github.com/melohr" target="_blank" rel="noopener">@melohr&lt;/a>,
&lt;a href="https://github.com/mentalplex" target="_blank" rel="noopener">@mentalplex&lt;/a>,
&lt;a href="https://github.com/mfoos" target="_blank" rel="noopener">@mfoos&lt;/a>,
&lt;a href="https://github.com/mgacc0" target="_blank" rel="noopener">@mgacc0&lt;/a>,
&lt;a href="https://github.com/mgruebsch" target="_blank" rel="noopener">@mgruebsch&lt;/a>,
&lt;a href="https://github.com/MichaelChirico" target="_blank" rel="noopener">@MichaelChirico&lt;/a>,
&lt;a href="https://github.com/MichaelRatajczak" target="_blank" rel="noopener">@MichaelRatajczak&lt;/a>,
&lt;a href="https://github.com/mikgh" target="_blank" rel="noopener">@mikgh&lt;/a>,
&lt;a href="https://github.com/mikmart" target="_blank" rel="noopener">@mikmart&lt;/a>,
&lt;a href="https://github.com/MilesMcBain" target="_blank" rel="noopener">@MilesMcBain&lt;/a>,
&lt;a href="https://github.com/mine-cetinkaya-rundel" target="_blank" rel="noopener">@mine-cetinkaya-rundel&lt;/a>,
&lt;a href="https://github.com/mitchelloharawild" target="_blank" rel="noopener">@mitchelloharawild&lt;/a>,
&lt;a href="https://github.com/mjbock" target="_blank" rel="noopener">@mjbock&lt;/a>,
&lt;a href="https://github.com/mkoohafkan" target="_blank" rel="noopener">@mkoohafkan&lt;/a>,
&lt;a href="https://github.com/mkuhn" target="_blank" rel="noopener">@mkuhn&lt;/a>,
&lt;a href="https://github.com/monikav" target="_blank" rel="noopener">@monikav&lt;/a>,
&lt;a href="https://github.com/mpancia" target="_blank" rel="noopener">@mpancia&lt;/a>,
&lt;a href="https://github.com/mrtns" target="_blank" rel="noopener">@mrtns&lt;/a>,
&lt;a href="https://github.com/mruessler" target="_blank" rel="noopener">@mruessler&lt;/a>,
&lt;a href="https://github.com/mundl" target="_blank" rel="noopener">@mundl&lt;/a>,
&lt;a href="https://github.com/mvkorpel" target="_blank" rel="noopener">@mvkorpel&lt;/a>,
&lt;a href="https://github.com/mwaldstein" target="_blank" rel="noopener">@mwaldstein&lt;/a>,
&lt;a href="https://github.com/ndphillips" target="_blank" rel="noopener">@ndphillips&lt;/a>,
&lt;a href="https://github.com/Nekochef" target="_blank" rel="noopener">@Nekochef&lt;/a>,
&lt;a href="https://github.com/nhamilton1980" target="_blank" rel="noopener">@nhamilton1980&lt;/a>,
&lt;a href="https://github.com/nicksolomon" target="_blank" rel="noopener">@nicksolomon&lt;/a>,
&lt;a href="https://github.com/nipunbatra" target="_blank" rel="noopener">@nipunbatra&lt;/a>,
&lt;a href="https://github.com/noamross" target="_blank" rel="noopener">@noamross&lt;/a>,
&lt;a href="https://github.com/Nowosad" target="_blank" rel="noopener">@Nowosad&lt;/a>,
&lt;a href="https://github.com/nteetor" target="_blank" rel="noopener">@nteetor&lt;/a>,
&lt;a href="https://github.com/nzxwang" target="_blank" rel="noopener">@nzxwang&lt;/a>,
&lt;a href="https://github.com/oneilsh" target="_blank" rel="noopener">@oneilsh&lt;/a>,
&lt;a href="https://github.com/ozgen92" target="_blank" rel="noopener">@ozgen92&lt;/a>,
&lt;a href="https://github.com/patr1ckm" target="_blank" rel="noopener">@patr1ckm&lt;/a>,
&lt;a href="https://github.com/pbreheny" target="_blank" rel="noopener">@pbreheny&lt;/a>,
&lt;a href="https://github.com/pelotom" target="_blank" rel="noopener">@pelotom&lt;/a>,
&lt;a href="https://github.com/petersorensen" target="_blank" rel="noopener">@petersorensen&lt;/a>,
&lt;a href="https://github.com/philstraforelli" target="_blank" rel="noopener">@philstraforelli&lt;/a>,
&lt;a href="https://github.com/pkq" target="_blank" rel="noopener">@pkq&lt;/a>,
&lt;a href="https://github.com/pnolain" target="_blank" rel="noopener">@pnolain&lt;/a>,
&lt;a href="https://github.com/Pomido" target="_blank" rel="noopener">@Pomido&lt;/a>,
&lt;a href="https://github.com/powestermark" target="_blank" rel="noopener">@powestermark&lt;/a>,
&lt;a href="https://github.com/pscheid92" target="_blank" rel="noopener">@pscheid92&lt;/a>,
&lt;a href="https://github.com/pschloss" target="_blank" rel="noopener">@pschloss&lt;/a>,
&lt;a href="https://github.com/ptoche" target="_blank" rel="noopener">@ptoche&lt;/a>,
&lt;a href="https://github.com/qinzhu" target="_blank" rel="noopener">@qinzhu&lt;/a>,
&lt;a href="https://github.com/QuentinRoy" target="_blank" rel="noopener">@QuentinRoy&lt;/a>,
&lt;a href="https://github.com/R180" target="_blank" rel="noopener">@R180&lt;/a>,
&lt;a href="https://github.com/ractingmatrix" target="_blank" rel="noopener">@ractingmatrix&lt;/a>,
&lt;a href="https://github.com/RafaRafa" target="_blank" rel="noopener">@RafaRafa&lt;/a>,
&lt;a href="https://github.com/randomgambit" target="_blank" rel="noopener">@randomgambit&lt;/a>,
&lt;a href="https://github.com/raubreywhite" target="_blank" rel="noopener">@raubreywhite&lt;/a>,
&lt;a href="https://github.com/RawanRadi" target="_blank" rel="noopener">@RawanRadi&lt;/a>,
&lt;a href="https://github.com/ray-p144" target="_blank" rel="noopener">@ray-p144&lt;/a>,
&lt;a href="https://github.com/RegalPlatypus" target="_blank" rel="noopener">@RegalPlatypus&lt;/a>,
&lt;a href="https://github.com/Rekyt" target="_blank" rel="noopener">@Rekyt&lt;/a>,
&lt;a href="https://github.com/RemmyGuo" target="_blank" rel="noopener">@RemmyGuo&lt;/a>,
&lt;a href="https://github.com/ReneMalenfant" target="_blank" rel="noopener">@ReneMalenfant&lt;/a>,
&lt;a href="https://github.com/renozao" target="_blank" rel="noopener">@renozao&lt;/a>,
&lt;a href="https://github.com/restonslacker" target="_blank" rel="noopener">@restonslacker&lt;/a>,
&lt;a href="https://github.com/rlionheart92" target="_blank" rel="noopener">@rlionheart92&lt;/a>,
&lt;a href="https://github.com/rmatev" target="_blank" rel="noopener">@rmatev&lt;/a>,
&lt;a href="https://github.com/rmatkins" target="_blank" rel="noopener">@rmatkins&lt;/a>,
&lt;a href="https://github.com/rmheiberger" target="_blank" rel="noopener">@rmheiberger&lt;/a>,
&lt;a href="https://github.com/RMHogervorst" target="_blank" rel="noopener">@RMHogervorst&lt;/a>,
&lt;a href="https://github.com/Robinlovelace" target="_blank" rel="noopener">@Robinlovelace&lt;/a>,
&lt;a href="https://github.com/RoelVerbelen" target="_blank" rel="noopener">@RoelVerbelen&lt;/a>,
&lt;a href="https://github.com/rohan-shah" target="_blank" rel="noopener">@rohan-shah&lt;/a>,
&lt;a href="https://github.com/rpruim" target="_blank" rel="noopener">@rpruim&lt;/a>,
&lt;a href="https://github.com/ruaridhw" target="_blank" rel="noopener">@ruaridhw&lt;/a>,
&lt;a href="https://github.com/Ryo-N7" target="_blank" rel="noopener">@Ryo-N7&lt;/a>,
&lt;a href="https://github.com/sabinfos" target="_blank" rel="noopener">@sabinfos&lt;/a>,
&lt;a href="https://github.com/sachinbanugariya" target="_blank" rel="noopener">@sachinbanugariya&lt;/a>,
&lt;a href="https://github.com/sahirbhatnagar" target="_blank" rel="noopener">@sahirbhatnagar&lt;/a>,
&lt;a href="https://github.com/salauer" target="_blank" rel="noopener">@salauer&lt;/a>,
&lt;a href="https://github.com/sathishsrinivasank" target="_blank" rel="noopener">@sathishsrinivasank&lt;/a>,
&lt;a href="https://github.com/saudiwin" target="_blank" rel="noopener">@saudiwin&lt;/a>,
&lt;a href="https://github.com/schloerke" target="_blank" rel="noopener">@schloerke&lt;/a>,
&lt;a href="https://github.com/seancaodo" target="_blank" rel="noopener">@seancaodo&lt;/a>,
&lt;a href="https://github.com/setempler" target="_blank" rel="noopener">@setempler&lt;/a>,
&lt;a href="https://github.com/sfirke" target="_blank" rel="noopener">@sfirke&lt;/a>,
&lt;a href="https://github.com/sgoodm8" target="_blank" rel="noopener">@sgoodm8&lt;/a>,
&lt;a href="https://github.com/shippy" target="_blank" rel="noopener">@shippy&lt;/a>,
&lt;a href="https://github.com/skanskan" target="_blank" rel="noopener">@skanskan&lt;/a>,
&lt;a href="https://github.com/slowkow" target="_blank" rel="noopener">@slowkow&lt;/a>,
&lt;a href="https://github.com/smouksassi" target="_blank" rel="noopener">@smouksassi&lt;/a>,
&lt;a href="https://github.com/SomeUser999" target="_blank" rel="noopener">@SomeUser999&lt;/a>,
&lt;a href="https://github.com/space-echo" target="_blank" rel="noopener">@space-echo&lt;/a>,
&lt;a href="https://github.com/statkclee" target="_blank" rel="noopener">@statkclee&lt;/a>,
&lt;a href="https://github.com/statsandthings" target="_blank" rel="noopener">@statsandthings&lt;/a>,
&lt;a href="https://github.com/statsccpr" target="_blank" rel="noopener">@statsccpr&lt;/a>,
&lt;a href="https://github.com/sTeamTraen" target="_blank" rel="noopener">@sTeamTraen&lt;/a>,
&lt;a href="https://github.com/stefanedwards" target="_blank" rel="noopener">@stefanedwards&lt;/a>,
&lt;a href="https://github.com/stephankraut" target="_blank" rel="noopener">@stephankraut&lt;/a>,
&lt;a href="https://github.com/SteveMillard" target="_blank" rel="noopener">@SteveMillard&lt;/a>,
&lt;a href="https://github.com/stla" target="_blank" rel="noopener">@stla&lt;/a>,
&lt;a href="https://github.com/svannoy" target="_blank" rel="noopener">@svannoy&lt;/a>,
&lt;a href="https://github.com/swimmingsand" target="_blank" rel="noopener">@swimmingsand&lt;/a>,
&lt;a href="https://github.com/taraskaduk" target="_blank" rel="noopener">@taraskaduk&lt;/a>,
&lt;a href="https://github.com/tbradley1013" target="_blank" rel="noopener">@tbradley1013&lt;/a>,
&lt;a href="https://github.com/tdhock" target="_blank" rel="noopener">@tdhock&lt;/a>,
&lt;a href="https://github.com/Thieffen" target="_blank" rel="noopener">@Thieffen&lt;/a>,
&lt;a href="https://github.com/ThierryO" target="_blank" rel="noopener">@ThierryO&lt;/a>,
&lt;a href="https://github.com/thjwong" target="_blank" rel="noopener">@thjwong&lt;/a>,
&lt;a href="https://github.com/thk686" target="_blank" rel="noopener">@thk686&lt;/a>,
&lt;a href="https://github.com/thomashauner" target="_blank" rel="noopener">@thomashauner&lt;/a>,
&lt;a href="https://github.com/thomaskvalnes" target="_blank" rel="noopener">@thomaskvalnes&lt;/a>,
&lt;a href="https://github.com/thomasp85" target="_blank" rel="noopener">@thomasp85&lt;/a>,
&lt;a href="https://github.com/thvasilo" target="_blank" rel="noopener">@thvasilo&lt;/a>,
&lt;a href="https://github.com/tiernanmartin" target="_blank" rel="noopener">@tiernanmartin&lt;/a>,
&lt;a href="https://github.com/timgoodman" target="_blank" rel="noopener">@timgoodman&lt;/a>,
&lt;a href="https://github.com/timothyslau" target="_blank" rel="noopener">@timothyslau&lt;/a>,
&lt;a href="https://github.com/tingtingben" target="_blank" rel="noopener">@tingtingben&lt;/a>,
&lt;a href="https://github.com/tjmahr" target="_blank" rel="noopener">@tjmahr&lt;/a>,
&lt;a href="https://github.com/toouggy" target="_blank" rel="noopener">@toouggy&lt;/a>,
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>,
&lt;a href="https://github.com/traversc" target="_blank" rel="noopener">@traversc&lt;/a>,
&lt;a href="https://github.com/truemoid" target="_blank" rel="noopener">@truemoid&lt;/a>,
&lt;a href="https://github.com/tungmilan" target="_blank" rel="noopener">@tungmilan&lt;/a>,
&lt;a href="https://github.com/Tutuchan" target="_blank" rel="noopener">@Tutuchan&lt;/a>,
&lt;a href="https://github.com/tzoltak" target="_blank" rel="noopener">@tzoltak&lt;/a>,
&lt;a href="https://github.com/ulo" target="_blank" rel="noopener">@ulo&lt;/a>,
&lt;a href="https://github.com/UweBlock" target="_blank" rel="noopener">@UweBlock&lt;/a>,
&lt;a href="https://github.com/vadimus202" target="_blank" rel="noopener">@vadimus202&lt;/a>,
&lt;a href="https://github.com/VectorPosse" target="_blank" rel="noopener">@VectorPosse&lt;/a>,
&lt;a href="https://github.com/VikrantDogra" target="_blank" rel="noopener">@VikrantDogra&lt;/a>,
&lt;a href="https://github.com/vnijs" target="_blank" rel="noopener">@vnijs&lt;/a>,
&lt;a href="https://github.com/wch" target="_blank" rel="noopener">@wch&lt;/a>,
&lt;a href="https://github.com/wdsteck" target="_blank" rel="noopener">@wdsteck&lt;/a>,
&lt;a href="https://github.com/WHMan" target="_blank" rel="noopener">@WHMan&lt;/a>,
&lt;a href="https://github.com/wibeasley" target="_blank" rel="noopener">@wibeasley&lt;/a>,
&lt;a href="https://github.com/wkristan" target="_blank" rel="noopener">@wkristan&lt;/a>,
&lt;a href="https://github.com/woodwards" target="_blank" rel="noopener">@woodwards&lt;/a>,
&lt;a href="https://github.com/wpetry" target="_blank" rel="noopener">@wpetry&lt;/a>,
&lt;a href="https://github.com/wxlu718" target="_blank" rel="noopener">@wxlu718&lt;/a>,
&lt;a href="https://github.com/xhdong-umd" target="_blank" rel="noopener">@xhdong-umd&lt;/a>,
&lt;a href="https://github.com/yeedle" target="_blank" rel="noopener">@yeedle&lt;/a>,
&lt;a href="https://github.com/yonicd" target="_blank" rel="noopener">@yonicd&lt;/a>,
&lt;a href="https://github.com/yutannihilation" target="_blank" rel="noopener">@yutannihilation&lt;/a>,
&lt;a href="https://github.com/zeehio" target="_blank" rel="noopener">@zeehio&lt;/a>,
&lt;a href="https://github.com/zhenglei-gao" target="_blank" rel="noopener">@zhenglei-gao&lt;/a>,
&lt;a href="https://github.com/zlskidmore" target="_blank" rel="noopener">@zlskidmore&lt;/a>,
&lt;a href="https://github.com/ZoidbergIII" target="_blank" rel="noopener">@ZoidbergIII&lt;/a>, and
&lt;a href="https://github.com/zz77zz" target="_blank" rel="noopener">@zz77zz&lt;/a>.&lt;/p></description></item><item><title>ggplot2 2.3.0 — upcoming release</title><link>https://www.tidyverse.org/blog/2018/05/ggplot2-2-3-0/</link><pubDate>Mon, 21 May 2018 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2018/05/ggplot2-2-3-0/</guid><description>&lt;p>A new release of ggplot2 (2.3.0) is on the horizon, and we&amp;rsquo;d love to have people
try it out, give us feedback, and
&lt;a href="https://github.com/tidyverse/ggplot2/issues" target="_blank" rel="noopener">report issues&lt;/a>
before we submit it to CRAN. This version is the culmination of over a year and
a half of development, not all of which will be captured here. So, please see
&lt;a href="https://github.com/tidyverse/ggplot2/blob/master/NEWS.md" target="_blank" rel="noopener">NEWS&lt;/a> for a fuller
account of updates and changes.&lt;/p>
&lt;p>In addition to highlighting a few features and improvements, we also want to
share a bit about our release-preparation process for ggplot2, which has over
2,000 reverse dependencies.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="c1"># install.packages(&amp;#34;devtools&amp;#34;)&lt;/span>
&lt;span class="n">devtools&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="nf">install_github&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;tidyverse/ggplot2&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>If needed, you can restore the release version by installing from CRAN:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">install.packages&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ggplot2&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;h2 id="breaking-changes">Breaking changes
&lt;a href="#breaking-changes">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>
&lt;h3 id="our-process">Our process
&lt;a href="#our-process">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>Regression testing, visual and otherwise, allows us to keep track of changes
throughout the development process. Before submitting an update to CRAN,
we need to ensure that the packages that depend on ours still pass &lt;code>R CMD check&lt;/code>, and inform reverse-dependency maintainers in the event that they do not.&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>
We use
&lt;a href="https://github.com/r-lib/revdepcheck" target="_blank" rel="noopener">revdepcheck&lt;/a> to help automate this
process, and distinguish between &amp;ldquo;false positives&amp;rdquo; (pre-existing failures), and
issues introduced in the development version of your package.&lt;/p>
&lt;p>At this point, we begin to manually examine the failures. &amp;ldquo;Newly broken&amp;rdquo; issues
are extracted from the problems report and put into a Google sheet where (with
the great help of Thomas Lin Pedersen, Claus Wilke, and Kara Woo) we identified
clusters of errors to tackle. For example, 97 packages returned a warning due
to a namespace clash between &lt;code>dplyr::vars()&lt;/code> and &lt;code>ggplot2::vars()&lt;/code>. That’s
something we clearly need to fix, so we open an
&lt;a href="https://github.com/tidyverse/ggplot2/issues/2585" target="_blank" rel="noopener">issue&lt;/a> to track progress.&lt;/p>
&lt;p>Where reverse-dependency errors result from a deliberate design change, we
collect &amp;ldquo;symptomatic&amp;rdquo; error messages, and (hopefully) fixes to offer the
maintainers of affected packages. These go in the &amp;ldquo;Breaking changes&amp;rdquo; section of
the NEWS file, so that if you encounter a new error you can easily search for
the error message and find the resolution. Because ggplot2 is an old and much
used package, we try to keep breaking changes to a minimum. However, sometimes
we deem it important to make a change that break existing code. Typically this
is for one of two reasons:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>We discover that code that previously appeared to work was actually hiding a
potential error. For example, in this version of ggplot2 we ensure that input
data frames don’t have duplicate column names. Previously ggplot2 just took the
first column with a name, which might have concealed a bug.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>We decided that it’s worth breaking a small amount of existing code in the
interests of improving future code. For example, this version of ggplot2 adds
support for
&lt;a href="https://github.com/tidyverse/ggplot2/blob/master/NEWS.md#tidy-evaluation" target="_blank" rel="noopener">tidy evaluation&lt;/a>
making ggplot2 more compatible with the rest of the tidyverse. This breaks a
small number of packages that use ggplot2 but should affect very little data
analysis code, so we decided that it was worth it.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="what-to-do-if-you-run-into-a-breaking-change">What to do if you run into a breaking change
&lt;a href="#what-to-do-if-you-run-into-a-breaking-change">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>If you run into an error when running code that works with ggplot2
2.2.1 (the version on CRAN as of this writing), you should look for it in the
&lt;a href="https://github.com/tidyverse/ggplot2/blob/master/NEWS.md#breaking-changes" target="_blank" rel="noopener">&amp;ldquo;Breaking changes&amp;rdquo;&lt;/a>
section of news. If you &lt;em>can&amp;rsquo;t&lt;/em> find it in the news, please file an issue -
either it&amp;rsquo;s an inadvertent change, or we need to describe it better in the news
(or make it easier to find when searching for keywords). As per usual, please
do a search of
&lt;a href="https://github.com/tidyverse/ggplot2/issues" target="_blank" rel="noopener">existing issues&lt;/a>
before filing a new one to avoid duplication.&lt;/p>
&lt;p>You can also ask for help in
&lt;a href="https://community.rstudio.com/" target="_blank" rel="noopener">community.rstudio.com&lt;/a>.&lt;/p>
&lt;h2 id="new-features">New features
&lt;a href="#new-features">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>
&lt;h3 id="tidy-evaluation">Tidy evaluation
&lt;a href="#tidy-evaluation">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>You can now use quasiquotation in &lt;code>aes()&lt;/code>, &lt;code>facet_wrap()&lt;/code>, and &lt;code>facet_grid()&lt;/code>.
To support quasiquotation in facetting we&amp;rsquo;ve added a new helper that works
similarly to &lt;code>aes()&lt;/code>: &lt;code>vars()&lt;/code>, short for variables, and instead of
&lt;code>facet_grid(x + y ~ a + b)&lt;/code> you can now write &lt;code>facet_grid(vars(x, y), vars(a, b))&lt;/code>.
The formula interface won&amp;rsquo;t go away; but the new &lt;code>vars()&lt;/code> interface should be
much easier to program with.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">x_var&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">quo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">wt&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">y_var&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">quo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mpg&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">group_var&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">quo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cyl&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mtcars&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">!!&lt;/span>&lt;span class="n">x_var&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">!!&lt;/span>&lt;span class="n">y_var&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_point&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">facet_wrap&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">vars&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">!!&lt;/span>&lt;span class="n">group_var&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2018-05-ggplot2-2-3-0_files/figure-html/label-both-1.png" width="2100" />&lt;/p>
&lt;h3 id="sf">sf
&lt;a href="#sf">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>ggplot2 now has full support for simple features through
&lt;a href="https://r-spatial.github.io/sf/" target="_blank" rel="noopener">sf&lt;/a> using &lt;code>geom_sf()&lt;/code> and &lt;code>coord_sf()&lt;/code>; it now
automatically aligns CRS across layers, sets up the correct aspect ratio, and
draws a graticule.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">nc&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="n">sf&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="nf">st_read&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">system.file&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;shape/nc.shp&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">package&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;sf&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1">#&amp;gt; Reading layer `nc&amp;#39; from data source `/Library/Frameworks/R.framework/Versions/3.4/Resources/library/sf/shape/nc.shp&amp;#39; using driver `ESRI Shapefile&amp;#39;&lt;/span>
&lt;span class="c1">#&amp;gt; Simple feature collection with 100 features and 14 fields&lt;/span>
&lt;span class="c1">#&amp;gt; geometry type: MULTIPOLYGON&lt;/span>
&lt;span class="c1">#&amp;gt; dimension: XY&lt;/span>
&lt;span class="c1">#&amp;gt; bbox: xmin: -84.32385 ymin: 33.88199 xmax: -75.45698 ymax: 36.58965&lt;/span>
&lt;span class="c1">#&amp;gt; epsg (SRID): 4267&lt;/span>
&lt;span class="c1">#&amp;gt; proj4string: +proj=longlat +datum=NAD27 +no_defs&lt;/span>
&lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nc&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_sf&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">annotate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;point&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">-80&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">35&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">colour&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;red&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">size&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2018-05-ggplot2-2-3-0_files/figure-html/sf-1.png" width="2100" />&lt;/p>
&lt;h3 id="calculated-aesthetics">Calculated aesthetics
&lt;a href="#calculated-aesthetics">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>The new &lt;code>stat()&lt;/code> function offers a cleaner, and better-documented syntax for
calculated-aesthetic variables. This replaces the older approach of surrounding
the variable name with &lt;code>...&lt;/code>. Instead of using &lt;code>aes(y = ..count..)&lt;/code>, you can use
&lt;code>aes(y = stat(count))&lt;/code>.&lt;/p>
&lt;p>This is particularly nice for more complex calculations, as &lt;code>stat()&lt;/code> only needs
to be specified once; e.g. &lt;code>aes(y = stat(count / max(count)))&lt;/code> rather than
&lt;code>aes(y = ..count.. / max(..count..))&lt;/code>.&lt;/p>
&lt;h3 id="viridis">Viridis
&lt;a href="#viridis">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>Several new functions have been added to make it easy to use Viridis colour
scales: &lt;code>scale_colour_viridis_c()&lt;/code> and &lt;code>scale_fill_viridis_c()&lt;/code> for continuous,
and &lt;code>scale_colour_viridis_d()&lt;/code> and &lt;code>scale_fill_viridis_d()&lt;/code> for discrete.
Viridis is also now used as the default colour and fill scale for ordered
factors.&lt;/p>
&lt;h2 id="and-more">And more&amp;hellip;
&lt;a href="#and-more">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>There are several other improvements, which will be described in further detail
once the ggplot 2.3.0 is released on CRAN (currently targeted for June 25th).
For now, please kick the tires and let us know what you think!&lt;/p>
&lt;section class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1" role="doc-endnote">
&lt;p>
&lt;a href="https://cran.r-project.org/web/packages/policies.html" target="_blank" rel="noopener">CRAN Repository Policy&lt;/a>, Version $Revision: 3874. CRAN Repository Maintainers. &lt;a href="https://cran.r-project.org/web/packages/policies.html">https://cran.r-project.org/web/packages/policies.html&lt;/a> &lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/section></description></item><item><title>The summer of ggplot2 - wooooo!</title><link>https://www.tidyverse.org/blog/2017/09/ggplot2-internship/</link><pubDate>Fri, 08 Sep 2017 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2017/09/ggplot2-internship/</guid><description>
&lt;p>This summer I had the great fortune to accept the &lt;a href="https://twitter.com/dataandme/status/880952970602532864">ggplot2 internship baton&lt;/a> from &lt;a href="http://www.data-imaginist.com/2016/Becoming-the-intern/">Thomas Lin Pedersen&lt;/a> and spend ten weeks developing new features and fixing bugs in ggplot2. My internship was a great experience, and I learned a ton from working with Hadley and digging into the ggplot2 codebase.&lt;/p>
&lt;div id="daily-life-as-a-ggplot2-intern" class="section level2">
&lt;h2>Daily life as a ggplot2 intern&lt;/h2>
&lt;p>My ggplot2 work consisted of a few different things: issue and pull request triage, bug fixes, and developing new features. The tidyverse gets a lot of new issues opened on GitHub, so to help keep things organized I tagged each ggplot2 issue with labels describing the type of issue and which part of ggplot2 it related to (scales, themes, layers, etc.). In some cases I helped the authors create reprexes so that we could diagnose the problems and determine when they were fixed. I triaged new pull requests as well, merging anything that was very straightforward, helping authors conform to the tidyverse style guide, and requesting reviews from Hadley for bigger changes.&lt;/p>
&lt;p>Fixing bugs was fun detective work and helped me build an understanding of how ggplot2 works internally. Along the way I got pretty good at using R’s debugging tools and have come to really appreciate the value of following a consistent &lt;a href="http://style.tidyverse.org/">coding style&lt;/a>. It is vastly easier to understand what a piece of code is doing when it is written in a readable and consistent way. Enforcing a style guide is time very well spent.&lt;/p>
&lt;p>I implemented some significant new features during this summer as well. The first was an overhaul of certain scale types in ggplot2. Scales are what control how data gets mapped to visual elements on a plot, and they vary based on the type of data (for instance, you can’t map a continuous variable to discrete shapes). As part of this project I improved support for datetime scales and ordered factors. I also added built-in support for &lt;a href="https://bids.github.io/colormap/">viridis color palettes&lt;/a>, a move that has garnered me some significant Twitter popularity. 😎&lt;/p>
&lt;p>I created a new position function, &lt;code>position_dodge2()&lt;/code>, for placing box plots, bars, and rectangles. This project started out as a fix for a bug where boxes of differing widths could not be dodged from one another using the existing &lt;code>position_dodge()&lt;/code> function, but it quickly grew into a larger project that fixed not only the &lt;a href="https://github.com/tidyverse/ggplot2/issues/2143">original issue&lt;/a>, but &lt;a href="https://github.com/tidyverse/ggplot2/issues/2153">three&lt;/a> &lt;a href="https://github.com/tidyverse/ggplot2/issues/2076">other&lt;/a> &lt;a href="https://github.com/tidyverse/ggplot2/issues/2106">issues&lt;/a> as well.&lt;/p>
&lt;div class="figure">
&lt;img src="https://media.giphy.com/media/8VrtCswiLDNnO/giphy.gif" />
&lt;/div>
&lt;p>The last big effort was a mostly behind-the-scenes refactor of the way text gets placed on plots. This was a fun and challenging project that required me to get familiar with the grid graphics system for the first time. ggplot2 users should notice only very minor changes as a result of this project—primarily to the way facet strip labels get customized—but internally we’ve really cleaned up the code, reduced duplication, and documented a number of internal functions to make them easier to work with in the future.&lt;/p>
&lt;/div>
&lt;div id="some-reflections" class="section level2">
&lt;h2>Some reflections&lt;/h2>
&lt;p>I’m not usually prone to a lot of impostor syndrome, but before I started my work on ggplot2 I worried about whether I was going to be up to the task of contributing to a complex and unfamiliar package. Before this summer I had used ggplot2 extensively, but didn’t know all that much about how it works under the hood. I’d never submitted a package to CRAN, and I’d never worked on any piece of software that had more than a couple users, let alone the popularity of ggplot2. I’ve learned a lot in the last ten weeks, and with Hadley’s mentorship it’s been a great experience.&lt;/p>
&lt;p>Working remotely adds its own challenges, and I think that a key to being successful in this kind of position is a willingness to dive into a codebase, tinker around, try lots of things (and break lots of things in the process) until you figure out how the pieces fit together. Being able to work independently helped me a lot, but I never lacked guidance from Hadley; our regular calls and chats on Slack kept me on track and got me out of a lot of pickles.&lt;/p>
&lt;p>I am very grateful to Hadley for this opportunity, and sad that my summer of ggplot2 has come to an end. It has been really rewarding to contribute back to a package that I’ve used so much, and though I’ll no longer be the intern I hope to keep contributing to ggplot2 in the future.&lt;/p>
&lt;/div></description></item></channel></rss>