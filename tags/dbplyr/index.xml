<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>dbplyr | Tidyverse</title><link>https://www.tidyverse.org/tags/dbplyr/</link><atom:link href="https://www.tidyverse.org/tags/dbplyr/index.xml" rel="self" type="application/rss+xml"/><description>dbplyr</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Mon, 08 Apr 2024 00:00:00 +0000</lastBuildDate><item><title>dbplyr 2.5.0</title><link>https://www.tidyverse.org/blog/2024/04/dbplyr-2-5-0/</link><pubDate>Mon, 08 Apr 2024 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2024/04/dbplyr-2-5-0/</guid><description>&lt;!--
TODO:
* [x] Look over / edit the post's title in the yaml
* [x] Edit (or delete) the description; note this appears in the Twitter card
* [x] Pick category and tags (see existing with [`hugodown::tidy_show_meta()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html))
* [x] Find photo &amp; update yaml metadata
* [x] Create `thumbnail-sq.jpg`; height and width should be equal
* [x] Create `thumbnail-wd.jpg`; width should be >5x height
* [x] [`hugodown::use_tidy_thumbnails()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html)
* [x] Add intro sentence, e.g. the standard tagline for the package
* [x] [`usethis::use_tidy_thanks()`](https://usethis.r-lib.org/reference/use_tidy_thanks.html)
-->
&lt;p>We&amp;rsquo;re most pleased to announce the release of
&lt;a href="http://dbplyr.tidyverse.org/" target="_blank" rel="noopener">dbplyr&lt;/a> 2.5.0. dbplyr is a database backend for dplyr that allows you to use a remote database as if it was a collection of local data frames: you write ordinary dplyr code and dbplyr translates it to SQL for you.&lt;/p>
&lt;p>You can install it from CRAN with:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/utils/install.packages.html'>install.packages&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"dbplyr"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>This post focuses on the biggest change in dbplyr 2.5.0: improved syntax for tables nested inside schema and catalogs. As usual, this release also contains a ton of minor improvements to SQL generation, and I&amp;rsquo;d highly recommend skimming the
&lt;a href="https://github.com/tidyverse/dbplyr/releases/tag/v2.5.0" target="_blank" rel="noopener">release notes&lt;/a> to learn the details.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://dbplyr.tidyverse.org/'>dbplyr&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;h2 id="referring-to-tables-in-a-schema">Referring to tables in a schema
&lt;a href="#referring-to-tables-in-a-schema">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Historically, dbplyr has provided a bewildering array of options to specify a table inside a schema inside a catalog:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>con&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span> &lt;span class='nf'>tbl&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://dbplyr.tidyverse.org/reference/ident_q.html'>ident_q&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"catalog_name.schema_name.table_name"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>con&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span> &lt;span class='nf'>tbl&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://dbplyr.tidyverse.org/reference/sql.html'>sql&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"SELECT * FROM catalog_name.schema_name.table_name"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>con&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span> &lt;span class='nf'>tbl&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://dbplyr.tidyverse.org/reference/in_schema.html'>in_catalog&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"catalog_name"&lt;/span>, &lt;span class='s'>"schema_name"&lt;/span>, &lt;span class='s'>"table_name"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>con&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span> &lt;span class='nf'>tbl&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://dbplyr.tidyverse.org/reference/ident_q.html'>ident_q&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"catalog_name.schema_name"&lt;/span>&lt;span class='o'>)&lt;/span>, &lt;span class='s'>"table_name"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>con&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span> &lt;span class='nf'>tbl&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://dbplyr.tidyverse.org/reference/sql.html'>sql&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"catalog_name.schema_name"&lt;/span>&lt;span class='o'>)&lt;/span>, &lt;span class='s'>"table_name"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>You can also use
&lt;a href="https://dbi.r-dbi.org/reference/Id.html" target="_blank" rel="noopener">&lt;code>DBI::Id()&lt;/code>&lt;/a>, whose syntax has also evolved over time:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>con&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span> &lt;span class='nf'>tbl&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>DBI&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://dbi.r-dbi.org/reference/Id.html'>Id&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>database &lt;span class='o'>=&lt;/span> &lt;span class='s'>"catalog_name"&lt;/span>, schema &lt;span class='o'>=&lt;/span> &lt;span class='s'>"schema_name"&lt;/span>, table &lt;span class='o'>=&lt;/span> &lt;span class='s'>"table_name"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>con&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span> &lt;span class='nf'>tbl&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>DBI&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://dbi.r-dbi.org/reference/Id.html'>Id&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>catalog &lt;span class='o'>=&lt;/span> &lt;span class='s'>"catalog_name"&lt;/span>, schema &lt;span class='o'>=&lt;/span> &lt;span class='s'>"schema_name"&lt;/span>, table &lt;span class='o'>=&lt;/span> &lt;span class='s'>"table_name"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>con&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span> &lt;span class='nf'>tbl&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>DBI&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://dbi.r-dbi.org/reference/Id.html'>Id&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"catalog_name"&lt;/span>, &lt;span class='s'>"schema_name"&lt;/span>, &lt;span class='s'>"table_name"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>Many of these options were poorly supported (i.e. we would accidentally break them from time-to-time) and suffered from the lack of a holistic vision. This release aims to bring order to the chaos by providing a succinct new syntax for literal table identifiers:
&lt;a href="https://rdrr.io/r/base/AsIs.html" target="_blank" rel="noopener">&lt;code>I()&lt;/code>&lt;/a>. This allows you to succinctly identify a table nested inside a schema or catalog:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>con&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span> &lt;span class='nf'>tbl&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/AsIs.html'>I&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"catalog_name.schema_name.table_name"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>con&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span> &lt;span class='nf'>tbl&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/AsIs.html'>I&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"schema_name.table_name"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>
&lt;a href="https://rdrr.io/r/base/AsIs.html" target="_blank" rel="noopener">&lt;code>I()&lt;/code>&lt;/a> is a base function, and you may be familiar with it from modelling, e.g. &lt;code>lm(y ~ x + I(y * z))&lt;/code>. It performs a similar role for both dbplyr and modelling function: it tells the function to treat the argument as is, rather than quoting it in the case of dbplyr, or interpreting as an interaction in the case of
&lt;a href="https://rdrr.io/r/stats/lm.html" target="_blank" rel="noopener">&lt;code>lm()&lt;/code>&lt;/a>.&lt;/p>
&lt;p>
&lt;a href="https://rdrr.io/r/base/AsIs.html" target="_blank" rel="noopener">&lt;code>I()&lt;/code>&lt;/a> is dbplyr&amp;rsquo;s preferred way of specifying nested table identifiers and we will eventually formally supersede and then one day deprecate the other options. However, because their usage is widespread, this process will be slow and gradual, and play out over multiple years; there&amp;rsquo;s no need to make changes now.&lt;/p>
&lt;p>(If you&amp;rsquo;re the author of a dbplyr backend, you&amp;rsquo;ll can take advantage of this new syntax by using the &lt;code>dbplyr_table_path&lt;/code> class. dbplyr now provides a
&lt;a href="https://dbplyr.tidyverse.org/reference/is_table_path.html" target="_blank" rel="noopener">few helper functions&lt;/a> to make this easier.)&lt;/p>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>A big thanks to all 46 folks who helped to make this release possible with their thoughtful comments and code contributions!
&lt;a href="https://github.com/aarizvi" target="_blank" rel="noopener">@aarizvi&lt;/a>,
&lt;a href="https://github.com/abalter" target="_blank" rel="noopener">@abalter&lt;/a>,
&lt;a href="https://github.com/andreassoteriadesmoj" target="_blank" rel="noopener">@andreassoteriadesmoj&lt;/a>,
&lt;a href="https://github.com/andrew-schulman" target="_blank" rel="noopener">@andrew-schulman&lt;/a>,
&lt;a href="https://github.com/apalacio9502" target="_blank" rel="noopener">@apalacio9502&lt;/a>,
&lt;a href="https://github.com/carlinstarrs" target="_blank" rel="noopener">@carlinstarrs&lt;/a>,
&lt;a href="https://github.com/catalamarti" target="_blank" rel="noopener">@catalamarti&lt;/a>,
&lt;a href="https://github.com/chicotobi" target="_blank" rel="noopener">@chicotobi&lt;/a>,
&lt;a href="https://github.com/DavisVaughan" target="_blank" rel="noopener">@DavisVaughan&lt;/a>,
&lt;a href="https://github.com/dmenne" target="_blank" rel="noopener">@dmenne&lt;/a>,
&lt;a href="https://github.com/edgararuiz" target="_blank" rel="noopener">@edgararuiz&lt;/a>,
&lt;a href="https://github.com/edonnachie" target="_blank" rel="noopener">@edonnachie&lt;/a>,
&lt;a href="https://github.com/eitsupi" target="_blank" rel="noopener">@eitsupi&lt;/a>,
&lt;a href="https://github.com/ejneer" target="_blank" rel="noopener">@ejneer&lt;/a>,
&lt;a href="https://github.com/erydit" target="_blank" rel="noopener">@erydit&lt;/a>,
&lt;a href="https://github.com/espinielli" target="_blank" rel="noopener">@espinielli&lt;/a>,
&lt;a href="https://github.com/fh-afrachioni" target="_blank" rel="noopener">@fh-afrachioni&lt;/a>,
&lt;a href="https://github.com/ghost" target="_blank" rel="noopener">@ghost&lt;/a>,
&lt;a href="https://github.com/godislobster" target="_blank" rel="noopener">@godislobster&lt;/a>,
&lt;a href="https://github.com/gorcha" target="_blank" rel="noopener">@gorcha&lt;/a>,
&lt;a href="https://github.com/hadley" target="_blank" rel="noopener">@hadley&lt;/a>,
&lt;a href="https://github.com/hild0146" target="_blank" rel="noopener">@hild0146&lt;/a>,
&lt;a href="https://github.com/JakeHurlbut" target="_blank" rel="noopener">@JakeHurlbut&lt;/a>,
&lt;a href="https://github.com/jarodmeng" target="_blank" rel="noopener">@jarodmeng&lt;/a>,
&lt;a href="https://github.com/Jiefei-Wang" target="_blank" rel="noopener">@Jiefei-Wang&lt;/a>,
&lt;a href="https://github.com/joshbal" target="_blank" rel="noopener">@joshbal&lt;/a>,
&lt;a href="https://github.com/kelseyroberts" target="_blank" rel="noopener">@kelseyroberts&lt;/a>,
&lt;a href="https://github.com/kmishra9" target="_blank" rel="noopener">@kmishra9&lt;/a>,
&lt;a href="https://github.com/krlmlr" target="_blank" rel="noopener">@krlmlr&lt;/a>,
&lt;a href="https://github.com/m-muecke" target="_blank" rel="noopener">@m-muecke&lt;/a>,
&lt;a href="https://github.com/maciekbanas" target="_blank" rel="noopener">@maciekbanas&lt;/a>,
&lt;a href="https://github.com/marcusmunch" target="_blank" rel="noopener">@marcusmunch&lt;/a>,
&lt;a href="https://github.com/mgarbuzov" target="_blank" rel="noopener">@mgarbuzov&lt;/a>,
&lt;a href="https://github.com/mgirlich" target="_blank" rel="noopener">@mgirlich&lt;/a>,
&lt;a href="https://github.com/misea" target="_blank" rel="noopener">@misea&lt;/a>,
&lt;a href="https://github.com/MKatz-DHSC" target="_blank" rel="noopener">@MKatz-DHSC&lt;/a>,
&lt;a href="https://github.com/Mkranj" target="_blank" rel="noopener">@Mkranj&lt;/a>,
&lt;a href="https://github.com/multimeric" target="_blank" rel="noopener">@multimeric&lt;/a>,
&lt;a href="https://github.com/nathanhaigh" target="_blank" rel="noopener">@nathanhaigh&lt;/a>,
&lt;a href="https://github.com/nilescbn" target="_blank" rel="noopener">@nilescbn&lt;/a>,
&lt;a href="https://github.com/talegari" target="_blank" rel="noopener">@talegari&lt;/a>,
&lt;a href="https://github.com/Tazinho" target="_blank" rel="noopener">@Tazinho&lt;/a>,
&lt;a href="https://github.com/thomashulst" target="_blank" rel="noopener">@thomashulst&lt;/a>,
&lt;a href="https://github.com/Thranholm" target="_blank" rel="noopener">@Thranholm&lt;/a>,
&lt;a href="https://github.com/tomshafer" target="_blank" rel="noopener">@tomshafer&lt;/a>, and
&lt;a href="https://github.com/wstvcg" target="_blank" rel="noopener">@wstvcg&lt;/a>.&lt;/p></description></item><item><title>dbplyr 2.4.0</title><link>https://www.tidyverse.org/blog/2023/10/dbplyr-2-4-0/</link><pubDate>Thu, 26 Oct 2023 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2023/10/dbplyr-2-4-0/</guid><description>&lt;!--
* also include something about dbplyr 2.3.1?
* support for [`join_by()`](https://dplyr.tidyverse.org/reference/join_by.html)
* many bugs introduced in 2.3.0 fixed
TODO:
* [x] Look over / edit the post's title in the yaml
* [x] Edit (or delete) the description; note this appears in the Twitter card
* [x] Pick category and tags (see existing with [`hugodown::tidy_show_meta()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html))
* [x] Find photo &amp; update yaml metadata
* [x] Create `thumbnail-sq.jpg`; height and width should be equal
* [x] Create `thumbnail-wd.jpg`; width should be >5x height
* [x] [`hugodown::use_tidy_thumbnails()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html)
* [x] Add intro sentence, e.g. the standard tagline for the package
* [x] [`usethis::use_tidy_thanks()`](https://usethis.r-lib.org/reference/use_tidy_thanks.html)
-->
&lt;p>We&amp;rsquo;re chuffed to announce the release of
&lt;a href="http://dbplyr.tidyverse.org/" target="_blank" rel="noopener">dbplyr&lt;/a> 2.4.0. dbplyr is a database backend for dplyr that allows you to use a remote database as if it was a collection of local data frames: you write ordinary dplyr code and dbplyr translates it to SQL for you.&lt;/p>
&lt;p>You can install it from CRAN with:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/utils/install.packages.html'>install.packages&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"dbplyr"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>This blog post will highlight some of the most important new features: eliminating subqueries when using multiple unions in a row, getting more control on the generated SQL, and a handful of new translations. As usual, release comes with a large number of improvements to translations for individual backends; see the full list in the
&lt;a href="https://github.com/tidyverse/dbplyr/releases/tag/v2.4.0" target="_blank" rel="noopener">release notes&lt;/a>&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://dbplyr.tidyverse.org/'>dbplyr&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://dplyr.tidyverse.org'>dplyr&lt;/a>&lt;/span>, warn.conflicts &lt;span class='o'>=&lt;/span> &lt;span class='kc'>FALSE&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;h2 id="sql-optimisation">SQL optimisation
&lt;a href="#sql-optimisation">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>dbplyr now produces fewer subqueries when combining tables with
&lt;a href="https://generics.r-lib.org/reference/setops.html" target="_blank" rel="noopener">&lt;code>union()&lt;/code>&lt;/a> and
&lt;a href="https://dplyr.tidyverse.org/reference/setops.html" target="_blank" rel="noopener">&lt;code>union_all()&lt;/code>&lt;/a> resulting in shorter, more readable, and, in some cases, faster SQL.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>lf1&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://dbplyr.tidyverse.org/reference/tbl_lazy.html'>lazy_frame&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='m'>1&lt;/span>, y &lt;span class='o'>=&lt;/span> &lt;span class='s'>"a"&lt;/span>, .name &lt;span class='o'>=&lt;/span> &lt;span class='s'>"lf1"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>lf2&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://dbplyr.tidyverse.org/reference/tbl_lazy.html'>lazy_frame&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='m'>1&lt;/span>, y &lt;span class='o'>=&lt;/span> &lt;span class='s'>"b"&lt;/span>, .name &lt;span class='o'>=&lt;/span> &lt;span class='s'>"lf2"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>lf3&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://dbplyr.tidyverse.org/reference/tbl_lazy.html'>lazy_frame&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='m'>1&lt;/span>, z &lt;span class='o'>=&lt;/span> &lt;span class='s'>"c"&lt;/span>, .name &lt;span class='o'>=&lt;/span> &lt;span class='s'>"lf3"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>lf1&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span> &lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://generics.r-lib.org/reference/setops.html'>union&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>lf2&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://generics.r-lib.org/reference/setops.html'>union&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>lf3&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &amp;lt;SQL&amp;gt;&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>SELECT&lt;/span> `lf1`.*, NULL&lt;span style='color: #0000BB;'> AS &lt;/span>`z`&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>FROM&lt;/span> `lf1`&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>UNION&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>SELECT&lt;/span> `lf2`.*, NULL&lt;span style='color: #0000BB;'> AS &lt;/span>`z`&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>FROM&lt;/span> `lf2`&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>UNION&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>SELECT&lt;/span> `x`, NULL&lt;span style='color: #0000BB;'> AS &lt;/span>`y`, `z`&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>FROM&lt;/span> `lf3`&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>(As usual in these blog posts, I&amp;rsquo;m using
&lt;a href="https://dbplyr.tidyverse.org/reference/tbl_lazy.html" target="_blank" rel="noopener">&lt;code>lazy_frame()&lt;/code>&lt;/a> to focus on the SQL generation, without having to set up a dummy database.)&lt;/p>
&lt;p>Similarly, a &lt;code>semi/anti_join()&lt;/code> on a filtered table now avoids a subquery:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>lf1&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span> &lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/filter-joins.html'>semi_join&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>lf3&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/filter.html'>filter&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>z&lt;/span> &lt;span class='o'>==&lt;/span> &lt;span class='s'>"c"&lt;/span>&lt;span class='o'>)&lt;/span>, &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/join_by.html'>join_by&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>x&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &amp;lt;SQL&amp;gt;&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>SELECT&lt;/span> `lf1`.*&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>FROM&lt;/span> `lf1`&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; WHERE EXISTS (&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>SELECT 1 FROM&lt;/span> `lf3`&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>WHERE&lt;/span> (`lf1`.`x` = `lf3`.`x`)&lt;span style='color: #0000BB;'> AND&lt;/span> (`lf3`.`z` = 'c')&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; )&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;h2 id="sql-generation">SQL generation
&lt;a href="#sql-generation">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>The new argument &lt;code>sql_options&lt;/code> for
&lt;a href="https://dplyr.tidyverse.org/reference/explain.html" target="_blank" rel="noopener">&lt;code>show_query()&lt;/code>&lt;/a> and
&lt;a href="https://dbplyr.tidyverse.org/reference/remote_name.html" target="_blank" rel="noopener">&lt;code>remote_query()&lt;/code>&lt;/a> gives you more control on the generated SQL.&lt;/p>
&lt;ul>
&lt;li>
&lt;p>By default dbplyr uses &lt;code>*&lt;/code> to select all columns of a table, but with &lt;code>use_star = FALSE&lt;/code> all columns are selected explicitly:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>lf3&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://dbplyr.tidyverse.org/reference/tbl_lazy.html'>lazy_frame&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='m'>1&lt;/span>, y &lt;span class='o'>=&lt;/span> &lt;span class='m'>2&lt;/span>, z &lt;span class='o'>=&lt;/span> &lt;span class='m'>3&lt;/span>, .name &lt;span class='o'>=&lt;/span> &lt;span class='s'>"lf3"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>lf3&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span> &lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>a &lt;span class='o'>=&lt;/span> &lt;span class='m'>4&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &amp;lt;SQL&amp;gt;&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>SELECT&lt;/span> `lf3`.*, 4.0&lt;span style='color: #0000BB;'> AS &lt;/span>`a`&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>FROM&lt;/span> `lf3`&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>lf3&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span> &lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>a &lt;span class='o'>=&lt;/span> &lt;span class='m'>4&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span> &lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/explain.html'>show_query&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>sql_options &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://dbplyr.tidyverse.org/reference/sql_options.html'>sql_options&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>use_star &lt;span class='o'>=&lt;/span> &lt;span class='kc'>FALSE&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &amp;lt;SQL&amp;gt;&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>SELECT&lt;/span> `x`, `y`, `z`, 4.0&lt;span style='color: #0000BB;'> AS &lt;/span>`a`&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>FROM&lt;/span> `lf3`&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;/li>
&lt;li>
&lt;p>If you prefer common table expressions (CTE) over subqueries use &lt;code>cte = TRUE&lt;/code>:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>nested_query&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nv'>lf3&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span> &lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>z &lt;span class='o'>=&lt;/span> &lt;span class='nv'>z&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='m'>1&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span> &lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/mutate-joins.html'>left_join&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>lf2&lt;/span>, by &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/join_by.html'>join_by&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>x&lt;/span>, &lt;span class='nv'>y&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>nested_query&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &amp;lt;SQL&amp;gt;&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>SELECT&lt;/span> `LHS`.*&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>FROM&lt;/span> (&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>SELECT&lt;/span> `x`, `y`, `z` + 1.0&lt;span style='color: #0000BB;'> AS &lt;/span>`z`&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>FROM&lt;/span> `lf3`&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; )&lt;span style='color: #0000BB;'> AS &lt;/span>`LHS`&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>LEFT JOIN&lt;/span> `lf2`&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>ON&lt;/span> (`LHS`.`x` = `lf2`.`x`&lt;span style='color: #0000BB;'> AND&lt;/span> `LHS`.`y` = `lf2`.`y`)&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>nested_query&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span> &lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/explain.html'>show_query&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>sql_options &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://dbplyr.tidyverse.org/reference/sql_options.html'>sql_options&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>cte &lt;span class='o'>=&lt;/span> &lt;span class='kc'>TRUE&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &amp;lt;SQL&amp;gt;&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>WITH&lt;/span> `q01` &lt;span style='color: #0000BB;'>AS&lt;/span> (&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>SELECT&lt;/span> `x`, `y`, `z` + 1.0&lt;span style='color: #0000BB;'> AS &lt;/span>`z`&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>FROM&lt;/span> `lf3`&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; )&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>SELECT&lt;/span> `LHS`.*&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>FROM&lt;/span> `q01`&lt;span style='color: #0000BB;'> AS &lt;/span>`LHS`&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>LEFT JOIN&lt;/span> `lf2`&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>ON&lt;/span> (`LHS`.`x` = `lf2`.`x`&lt;span style='color: #0000BB;'> AND&lt;/span> `LHS`.`y` = `lf2`.`y`)&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;/li>
&lt;li>
&lt;p>And if you want that all columns in a join are qualified with the table name and not only the ambiguous ones use &lt;code>qualify_all_columns = TRUE&lt;/code>:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>qualify_columns&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nv'>lf2&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span> &lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/mutate-joins.html'>left_join&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>lf3&lt;/span>, by &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/join_by.html'>join_by&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>x&lt;/span>, &lt;span class='nv'>y&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>qualify_columns&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &amp;lt;SQL&amp;gt;&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>SELECT&lt;/span> `lf2`.*, `z`&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>FROM&lt;/span> `lf2`&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>LEFT JOIN&lt;/span> `lf3`&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>ON&lt;/span> (`lf2`.`x` = `lf3`.`x`&lt;span style='color: #0000BB;'> AND&lt;/span> `lf2`.`y` = `lf3`.`y`)&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>qualify_columns&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span> &lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/explain.html'>show_query&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>sql_options &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://dbplyr.tidyverse.org/reference/sql_options.html'>sql_options&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>qualify_all_columns &lt;span class='o'>=&lt;/span> &lt;span class='kc'>TRUE&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &amp;lt;SQL&amp;gt;&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>SELECT&lt;/span> `lf2`.*, `lf3`.`z`&lt;span style='color: #0000BB;'> AS &lt;/span>`z`&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>FROM&lt;/span> `lf2`&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>LEFT JOIN&lt;/span> `lf3`&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>ON&lt;/span> (`lf2`.`x` = `lf3`.`x`&lt;span style='color: #0000BB;'> AND&lt;/span> `lf2`.`y` = `lf3`.`y`)&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;/li>
&lt;/ul>
&lt;h2 id="new-translations">New translations
&lt;a href="#new-translations">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>&lt;code>str_detect()&lt;/code>, &lt;code>str_starts()&lt;/code> and &lt;code>str_ends()&lt;/code> with fixed patterns are translated to &lt;code>INSTR()&lt;/code>:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>lf1&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span> &lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/filter.html'>filter&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>stringr&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://stringr.tidyverse.org/reference/str_detect.html'>str_detect&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>x&lt;/span>, &lt;span class='nf'>stringr&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://stringr.tidyverse.org/reference/modifiers.html'>fixed&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"abc"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> &lt;span class='nf'>stringr&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://stringr.tidyverse.org/reference/str_starts.html'>str_starts&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>x&lt;/span>, &lt;span class='nf'>stringr&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://stringr.tidyverse.org/reference/modifiers.html'>fixed&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"a"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &amp;lt;SQL&amp;gt;&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>SELECT&lt;/span> `lf1`.*&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>FROM&lt;/span> `lf1`&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>WHERE&lt;/span> (INSTR(`x`, 'abc') &amp;gt; 0)&lt;span style='color: #0000BB;'> AND&lt;/span> (INSTR(`x`, 'a') = 1)&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>And
&lt;a href="https://rdrr.io/r/base/nchar.html" target="_blank" rel="noopener">&lt;code>nzchar()&lt;/code>&lt;/a> and
&lt;a href="https://rdrr.io/r/stats/Uniform.html" target="_blank" rel="noopener">&lt;code>runif()&lt;/code>&lt;/a> are now translated to their SQL equivalents:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>lf1&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span> &lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/filter.html'>filter&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/nchar.html'>nzchar&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>x&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span> &lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>z &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/stats/Uniform.html'>runif&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &amp;lt;SQL&amp;gt;&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>SELECT&lt;/span> `lf1`.*, RANDOM()&lt;span style='color: #0000BB;'> AS &lt;/span>`z`&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>FROM&lt;/span> `lf1`&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>WHERE&lt;/span> (((`x` IS NULL) OR `x` != ''))&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>The vast majority of this release (particularly the SQL optimisations) are from
&lt;a href="https://github.com/mgirlich" target="_blank" rel="noopener">Maximilian Girlich&lt;/a>; thanks so much for continued work on this package! And a big thanks go to the 84 other folks who helped out by filing issues and contributing code:
&lt;a href="https://github.com/abalter" target="_blank" rel="noopener">@abalter&lt;/a>,
&lt;a href="https://github.com/ablack3" target="_blank" rel="noopener">@ablack3&lt;/a>,
&lt;a href="https://github.com/andreassoteriadesmoj" target="_blank" rel="noopener">@andreassoteriadesmoj&lt;/a>,
&lt;a href="https://github.com/apalacio9502" target="_blank" rel="noopener">@apalacio9502&lt;/a>,
&lt;a href="https://github.com/avsdev-cw" target="_blank" rel="noopener">@avsdev-cw&lt;/a>,
&lt;a href="https://github.com/bairdj" target="_blank" rel="noopener">@bairdj&lt;/a>,
&lt;a href="https://github.com/bastistician" target="_blank" rel="noopener">@bastistician&lt;/a>,
&lt;a href="https://github.com/brownj31" target="_blank" rel="noopener">@brownj31&lt;/a>,
&lt;a href="https://github.com/But2ene" target="_blank" rel="noopener">@But2ene&lt;/a>,
&lt;a href="https://github.com/carlganz" target="_blank" rel="noopener">@carlganz&lt;/a>,
&lt;a href="https://github.com/catalamarti" target="_blank" rel="noopener">@catalamarti&lt;/a>,
&lt;a href="https://github.com/CEH-SLU" target="_blank" rel="noopener">@CEH-SLU&lt;/a>,
&lt;a href="https://github.com/chriscardillo" target="_blank" rel="noopener">@chriscardillo&lt;/a>,
&lt;a href="https://github.com/DavisVaughan" target="_blank" rel="noopener">@DavisVaughan&lt;/a>,
&lt;a href="https://github.com/DaZaM82" target="_blank" rel="noopener">@DaZaM82&lt;/a>,
&lt;a href="https://github.com/donour" target="_blank" rel="noopener">@donour&lt;/a>,
&lt;a href="https://github.com/edgararuiz" target="_blank" rel="noopener">@edgararuiz&lt;/a>,
&lt;a href="https://github.com/eduardszoecs" target="_blank" rel="noopener">@eduardszoecs&lt;/a>,
&lt;a href="https://github.com/eipi10" target="_blank" rel="noopener">@eipi10&lt;/a>,
&lt;a href="https://github.com/ejneer" target="_blank" rel="noopener">@ejneer&lt;/a>,
&lt;a href="https://github.com/erikvona" target="_blank" rel="noopener">@erikvona&lt;/a>,
&lt;a href="https://github.com/fh-afrachioni" target="_blank" rel="noopener">@fh-afrachioni&lt;/a>,
&lt;a href="https://github.com/fh-mthomson" target="_blank" rel="noopener">@fh-mthomson&lt;/a>,
&lt;a href="https://github.com/gui-salome" target="_blank" rel="noopener">@gui-salome&lt;/a>,
&lt;a href="https://github.com/hadley" target="_blank" rel="noopener">@hadley&lt;/a>,
&lt;a href="https://github.com/halpo" target="_blank" rel="noopener">@halpo&lt;/a>,
&lt;a href="https://github.com/homer3018" target="_blank" rel="noopener">@homer3018&lt;/a>,
&lt;a href="https://github.com/iangow" target="_blank" rel="noopener">@iangow&lt;/a>,
&lt;a href="https://github.com/jdlom" target="_blank" rel="noopener">@jdlom&lt;/a>,
&lt;a href="https://github.com/jennal-datacenter" target="_blank" rel="noopener">@jennal-datacenter&lt;/a>,
&lt;a href="https://github.com/JeremyPasco" target="_blank" rel="noopener">@JeremyPasco&lt;/a>,
&lt;a href="https://github.com/jiemakel" target="_blank" rel="noopener">@jiemakel&lt;/a>,
&lt;a href="https://github.com/jingydz" target="_blank" rel="noopener">@jingydz&lt;/a>,
&lt;a href="https://github.com/johnbaums" target="_blank" rel="noopener">@johnbaums&lt;/a>,
&lt;a href="https://github.com/joshseiv" target="_blank" rel="noopener">@joshseiv&lt;/a>,
&lt;a href="https://github.com/jrandall" target="_blank" rel="noopener">@jrandall&lt;/a>,
&lt;a href="https://github.com/khkk378" target="_blank" rel="noopener">@khkk378&lt;/a>,
&lt;a href="https://github.com/kmishra9" target="_blank" rel="noopener">@kmishra9&lt;/a>,
&lt;a href="https://github.com/kongdd" target="_blank" rel="noopener">@kongdd&lt;/a>,
&lt;a href="https://github.com/krlmlr" target="_blank" rel="noopener">@krlmlr&lt;/a>,
&lt;a href="https://github.com/krprasangdas" target="_blank" rel="noopener">@krprasangdas&lt;/a>,
&lt;a href="https://github.com/KRRLP-PL" target="_blank" rel="noopener">@KRRLP-PL&lt;/a>,
&lt;a href="https://github.com/lentinj" target="_blank" rel="noopener">@lentinj&lt;/a>,
&lt;a href="https://github.com/lgaborini" target="_blank" rel="noopener">@lgaborini&lt;/a>,
&lt;a href="https://github.com/lhabegger" target="_blank" rel="noopener">@lhabegger&lt;/a>,
&lt;a href="https://github.com/lorenzolightsgdwarf" target="_blank" rel="noopener">@lorenzolightsgdwarf&lt;/a>,
&lt;a href="https://github.com/lschneiderbauer" target="_blank" rel="noopener">@lschneiderbauer&lt;/a>,
&lt;a href="https://github.com/marianschmidt" target="_blank" rel="noopener">@marianschmidt&lt;/a>,
&lt;a href="https://github.com/matthewjnield" target="_blank" rel="noopener">@matthewjnield&lt;/a>,
&lt;a href="https://github.com/mgirlich" target="_blank" rel="noopener">@mgirlich&lt;/a>,
&lt;a href="https://github.com/MichaelChirico" target="_blank" rel="noopener">@MichaelChirico&lt;/a>,
&lt;a href="https://github.com/misea" target="_blank" rel="noopener">@misea&lt;/a>,
&lt;a href="https://github.com/mjbroerman" target="_blank" rel="noopener">@mjbroerman&lt;/a>,
&lt;a href="https://github.com/moodymudskipper" target="_blank" rel="noopener">@moodymudskipper&lt;/a>,
&lt;a href="https://github.com/multimeric" target="_blank" rel="noopener">@multimeric&lt;/a>,
&lt;a href="https://github.com/nannerhammix" target="_blank" rel="noopener">@nannerhammix&lt;/a>,
&lt;a href="https://github.com/nikolasharing" target="_blank" rel="noopener">@nikolasharing&lt;/a>,
&lt;a href="https://github.com/nviets" target="_blank" rel="noopener">@nviets&lt;/a>,
&lt;a href="https://github.com/nviraj" target="_blank" rel="noopener">@nviraj&lt;/a>,
&lt;a href="https://github.com/oobd" target="_blank" rel="noopener">@oobd&lt;/a>,
&lt;a href="https://github.com/pboesu" target="_blank" rel="noopener">@pboesu&lt;/a>,
&lt;a href="https://github.com/pepijn-devries" target="_blank" rel="noopener">@pepijn-devries&lt;/a>,
&lt;a href="https://github.com/rbcavanaugh" target="_blank" rel="noopener">@rbcavanaugh&lt;/a>,
&lt;a href="https://github.com/rcepka" target="_blank" rel="noopener">@rcepka&lt;/a>,
&lt;a href="https://github.com/robertkck" target="_blank" rel="noopener">@robertkck&lt;/a>,
&lt;a href="https://github.com/samssann" target="_blank" rel="noopener">@samssann&lt;/a>,
&lt;a href="https://github.com/SayfSaid" target="_blank" rel="noopener">@SayfSaid&lt;/a>,
&lt;a href="https://github.com/scottporter" target="_blank" rel="noopener">@scottporter&lt;/a>,
&lt;a href="https://github.com/shearerpmm" target="_blank" rel="noopener">@shearerpmm&lt;/a>,
&lt;a href="https://github.com/srikanthtist" target="_blank" rel="noopener">@srikanthtist&lt;/a>,
&lt;a href="https://github.com/stemangiola" target="_blank" rel="noopener">@stemangiola&lt;/a>,
&lt;a href="https://github.com/stephenashton-dhsc" target="_blank" rel="noopener">@stephenashton-dhsc&lt;/a>,
&lt;a href="https://github.com/stevepowell99" target="_blank" rel="noopener">@stevepowell99&lt;/a>,
&lt;a href="https://github.com/TBlackmore" target="_blank" rel="noopener">@TBlackmore&lt;/a>,
&lt;a href="https://github.com/thomashulst" target="_blank" rel="noopener">@thomashulst&lt;/a>,
&lt;a href="https://github.com/thothal" target="_blank" rel="noopener">@thothal&lt;/a>,
&lt;a href="https://github.com/tilo-aok" target="_blank" rel="noopener">@tilo-aok&lt;/a>,
&lt;a href="https://github.com/tisseuil" target="_blank" rel="noopener">@tisseuil&lt;/a>,
&lt;a href="https://github.com/tonyk7440" target="_blank" rel="noopener">@tonyk7440&lt;/a>,
&lt;a href="https://github.com/TSchiefer" target="_blank" rel="noopener">@TSchiefer&lt;/a>,
&lt;a href="https://github.com/Tsemharb" target="_blank" rel="noopener">@Tsemharb&lt;/a>,
&lt;a href="https://github.com/tuge98" target="_blank" rel="noopener">@tuge98&lt;/a>,
&lt;a href="https://github.com/vadim-cherepanov" target="_blank" rel="noopener">@vadim-cherepanov&lt;/a>, and
&lt;a href="https://github.com/wdenton" target="_blank" rel="noopener">@wdenton&lt;/a>.&lt;/p></description></item><item><title>dbplyr 2.3.0</title><link>https://www.tidyverse.org/blog/2023/01/dbplyr-2-3-0/</link><pubDate>Mon, 16 Jan 2023 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2023/01/dbplyr-2-3-0/</guid><description>&lt;!--
TODO:
* [x] Look over / edit the post's title in the yaml
* [x] Edit (or delete) the description; note this appears in the Twitter card
* [x] Pick category and tags (see existing with [`hugodown::tidy_show_meta()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html))
* [x] Find photo &amp; update yaml metadata
* [x] Create `thumbnail-sq.jpg`; height and width should be equal
* [x] Create `thumbnail-wd.jpg`; width should be >5x height
* [x] [`hugodown::use_tidy_thumbnails()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html)
* [x] Add intro sentence, e.g. the standard tagline for the package
* [ ] [`usethis::use_tidy_thanks()`](https://usethis.r-lib.org/reference/use_tidy_thanks.html)
-->
&lt;p>We&amp;rsquo;re chuffed to announce the release of
&lt;a href="http://dbplyr.tidyverse.org/" target="_blank" rel="noopener">dbplyr&lt;/a> 2.3.0. dbplyr is a database backend for dplyr that allows you to use a remote database as if it was a collection of local data frames: you write ordinary dplyr code and dbplyr translates it to SQL for you.&lt;/p>
&lt;p>You can install it from CRAN with:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/utils/install.packages.html'>install.packages&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"&amp;#123;package&amp;#125;"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>This post will highlight some of the most important new features in 2.3.0: eliminating subqueries for many verb combinations, better errors, and a handful of new translations. As usual, this release comes with a large number of improvements to translations for individual backends and you can see the full list in the
&lt;a href="%7B%20github_release%20%7D">release notes&lt;/a>&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://dbplyr.tidyverse.org/'>dbplyr&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://dplyr.tidyverse.org'>dplyr&lt;/a>&lt;/span>, warn.conflicts &lt;span class='o'>=&lt;/span> &lt;span class='kc'>FALSE&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;h2 id="sql-optimisation">SQL optimisation
&lt;a href="#sql-optimisation">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>dbplyr now produces fewer subqueries resulting in shorter, more readable, and, in some cases, faster SQL. The following combinations of verbs no longer require subqueries:&lt;/p>
&lt;ul>
&lt;li>&lt;code>*_join()&lt;/code> +
&lt;a href="https://dplyr.tidyverse.org/reference/select.html" target="_blank" rel="noopener">&lt;code>select()&lt;/code>&lt;/a> and
&lt;a href="https://dplyr.tidyverse.org/reference/select.html" target="_blank" rel="noopener">&lt;code>select()&lt;/code>&lt;/a> + &lt;code>*_join()&lt;/code>.&lt;/li>
&lt;li>
&lt;a href="https://dplyr.tidyverse.org/reference/mutate.html" target="_blank" rel="noopener">&lt;code>mutate()&lt;/code>&lt;/a> +
&lt;a href="https://dplyr.tidyverse.org/reference/filter.html" target="_blank" rel="noopener">&lt;code>filter()&lt;/code>&lt;/a> and
&lt;a href="https://dplyr.tidyverse.org/reference/filter.html" target="_blank" rel="noopener">&lt;code>filter()&lt;/code>&lt;/a> +
&lt;a href="https://dplyr.tidyverse.org/reference/filter.html" target="_blank" rel="noopener">&lt;code>filter()&lt;/code>&lt;/a>.&lt;/li>
&lt;li>
&lt;a href="https://dplyr.tidyverse.org/reference/select.html" target="_blank" rel="noopener">&lt;code>select()&lt;/code>&lt;/a>/
&lt;a href="https://dplyr.tidyverse.org/reference/mutate.html" target="_blank" rel="noopener">&lt;code>mutate()&lt;/code>&lt;/a>/
&lt;a href="https://dplyr.tidyverse.org/reference/filter.html" target="_blank" rel="noopener">&lt;code>filter()&lt;/code>&lt;/a> +
&lt;a href="https://dplyr.tidyverse.org/reference/distinct.html" target="_blank" rel="noopener">&lt;code>distinct()&lt;/code>&lt;/a>.&lt;/li>
&lt;li>
&lt;a href="https://dplyr.tidyverse.org/reference/summarise.html" target="_blank" rel="noopener">&lt;code>summarise()&lt;/code>&lt;/a> +
&lt;a href="https://dplyr.tidyverse.org/reference/filter.html" target="_blank" rel="noopener">&lt;code>filter()&lt;/code>&lt;/a> now translates to &lt;code>HAVING&lt;/code>.&lt;/li>
&lt;li>&lt;code>left/inner_join()&lt;/code> + &lt;code>left/inner_join()&lt;/code>.&lt;/li>
&lt;/ul>
&lt;p>Here are a couple of examples of queries that are now much more compact:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>lf1&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://dbplyr.tidyverse.org/reference/tbl_lazy.html'>lazy_frame&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='m'>1&lt;/span>, a &lt;span class='o'>=&lt;/span> &lt;span class='s'>"a"&lt;/span>, .name &lt;span class='o'>=&lt;/span> &lt;span class='s'>"lf1"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>lf2&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://dbplyr.tidyverse.org/reference/tbl_lazy.html'>lazy_frame&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='m'>1&lt;/span>, b &lt;span class='o'>=&lt;/span> &lt;span class='s'>"b"&lt;/span>, .name &lt;span class='o'>=&lt;/span> &lt;span class='s'>"lf2"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>lf3&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://dbplyr.tidyverse.org/reference/tbl_lazy.html'>lazy_frame&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='m'>1&lt;/span>, c &lt;span class='o'>=&lt;/span> &lt;span class='s'>"c"&lt;/span>, .name &lt;span class='o'>=&lt;/span> &lt;span class='s'>"lf3"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>lf1&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span> &lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/mutate-joins.html'>left_join&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>lf2&lt;/span>, by &lt;span class='o'>=&lt;/span> &lt;span class='s'>"x"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span> &lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/mutate-joins.html'>left_join&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>lf3&lt;/span>, by &lt;span class='o'>=&lt;/span> &lt;span class='s'>"x"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span> &lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/select.html'>select&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>b&lt;/span>, &lt;span class='nv'>c&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &amp;lt;SQL&amp;gt;&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>SELECT&lt;/span> `b`, `c`&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>FROM&lt;/span> `lf1`&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>LEFT JOIN&lt;/span> `lf2`&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>ON&lt;/span> (`lf1`.`x` = `lf2`.`x`)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>LEFT JOIN&lt;/span> `lf3`&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>ON&lt;/span> (`lf1`.`x` = `lf3`.`x`)&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>lf1&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span> &lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>x&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span> &lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>a &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/mean.html'>mean&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>a&lt;/span>, na.rm &lt;span class='o'>=&lt;/span> &lt;span class='kc'>TRUE&lt;/span>&lt;span class='o'>)&lt;/span>, n &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/context.html'>n&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span> &lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/filter.html'>filter&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>n&lt;/span> &lt;span class='o'>&amp;gt;&lt;/span> &lt;span class='m'>5&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &amp;lt;SQL&amp;gt;&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>SELECT&lt;/span> `x`, AVG(`a`)&lt;span style='color: #0000BB;'> AS &lt;/span>`a`, COUNT(*)&lt;span style='color: #0000BB;'> AS &lt;/span>`n`&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>FROM&lt;/span> `lf1`&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>GROUP BY&lt;/span> `x`&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>HAVING&lt;/span> (COUNT(*) &amp;gt; 5.0)&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>(As ususal in these blog posts, I&amp;rsquo;m using
&lt;a href="https://dbplyr.tidyverse.org/reference/tbl_lazy.html" target="_blank" rel="noopener">&lt;code>lazy_frame()&lt;/code>&lt;/a> to focus on the SQL generation, without having to set up a dummy database.)&lt;/p>
&lt;p>Additionally, where possible, dbplyr now uses &lt;code>SELECT *&lt;/code> after a join instead of explicitly selecting every column.&lt;/p>
&lt;h2 id="improved-errors">Improved errors
&lt;a href="#improved-errors">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Variables that aren&amp;rsquo;t found in either the data or in the environment now produce an error:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>lf&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://dbplyr.tidyverse.org/reference/tbl_lazy.html'>lazy_frame&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='m'>1&lt;/span>,y &lt;span class='o'>=&lt;/span> &lt;span class='m'>2&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>lf&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='nv'>z&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='m'>1&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00; font-weight: bold;'>Error&lt;/span>&lt;span style='font-weight: bold;'> in `mutate()`:&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00;'>!&lt;/span> Problem while computing `x = z + 1`&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='font-weight: bold;'>Caused by error:&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00;'>!&lt;/span> Object `z` not found.&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>(Previously they were silently translated to SQL variables.)&lt;/p>
&lt;p>We&amp;rsquo;ve also generally reviewed the error messages to ensure they show more clearly where the error happened:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>lf&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='nv'>y&lt;/span> &lt;span class='o'>&lt;a href='https://rdrr.io/r/base/Arithmetic.html'>%/%&lt;/a>&lt;/span> &lt;span class='m'>1&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00; font-weight: bold;'>Error&lt;/span>&lt;span style='font-weight: bold;'> in `purrr::pmap()` at &lt;/span>&lt;a href='file:///Users/hadleywickham/Documents/dplyr/dbplyr/R/lazy-select-query.R'>&lt;span style='font-weight: bold;'>dbplyr/R/lazy-select-query.R:282:2&lt;/span>&lt;/a>&lt;span style='font-weight: bold;'>:&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BBBB;'>ℹ&lt;/span> In index: 1.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BBBB;'>ℹ&lt;/span> With name: x.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='font-weight: bold;'>Caused by error in `y %/% 1`:&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00;'>!&lt;/span> %/% is not available in this SQL variant&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>lf&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/across.html'>across&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>x&lt;/span>&lt;span class='o'>:&lt;/span>&lt;span class='nv'>y&lt;/span>, &lt;span class='s'>"a"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00; font-weight: bold;'>Error&lt;/span>&lt;span style='font-weight: bold;'> in `mutate()`:&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00;'>!&lt;/span> Problem while computing `..1 = across(x:y, "a")`&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='font-weight: bold;'>Caused by error in `across()`:&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00;'>!&lt;/span> `.fns` must be a NULL, a function, formula, or list&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;h2 id="new-translations">New translations
&lt;a href="#new-translations">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>
&lt;a href="https://stringr.tidyverse.org/reference/str_like.html" target="_blank" rel="noopener">&lt;code>stringr::str_like()&lt;/code>&lt;/a> (new in stringr 1.5.0) is translated to &lt;code>LIKE&lt;/code>:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>lf1&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span> &lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/filter.html'>filter&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>stringr&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://stringr.tidyverse.org/reference/str_like.html'>str_like&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>a&lt;/span>, &lt;span class='s'>"abc"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &amp;lt;SQL&amp;gt;&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>SELECT&lt;/span> *&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>FROM&lt;/span> `lf1`&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>WHERE&lt;/span> (`a` LIKE 'abc')&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>dbplyr 2.3.0 is also supports features coming in
&lt;a href="https://www.tidyverse.org/blog/2022/11/dplyr-1-1-0-is-coming-soon/" target="_blank" rel="noopener">dplyr 1.1.0&lt;/a>:&lt;/p>
&lt;ul>
&lt;li>The &lt;code>.by&lt;/code> argument is supported as alternative to
&lt;a href="https://dplyr.tidyverse.org/reference/group_by.html" target="_blank" rel="noopener">&lt;code>group_by()&lt;/code>&lt;/a>.&lt;/li>
&lt;li>Passing &lt;code>...&lt;/code> to
&lt;a href="https://dplyr.tidyverse.org/reference/across.html" target="_blank" rel="noopener">&lt;code>across()&lt;/code>&lt;/a> is deprecated because the evaluation timing of &lt;code>...&lt;/code> is ambiguous.&lt;/li>
&lt;li>New &lt;code>pick()&lt;/code> and &lt;code>case_match()&lt;/code> functions are translated.&lt;/li>
&lt;li>
&lt;a href="https://dplyr.tidyverse.org/reference/case_when.html" target="_blank" rel="noopener">&lt;code>case_when()&lt;/code>&lt;/a> now supports the &lt;code>.default&lt;/code> argument.&lt;/li>
&lt;/ul>
&lt;p>This version does not support the new &lt;code>join_by()&lt;/code> syntax, but we&amp;rsquo;re working on it, and we&amp;rsquo;ll release an update after dplyr 1.1.0 is out.&lt;/p>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>The vast majority of this release (particularly the SQL optimisations) are from
&lt;a href="https://github.com/mgirlich" target="_blank" rel="noopener">Maximilian Girlich&lt;/a>; thanks so much for your continued work on this package.&lt;/p>
&lt;p>We&amp;rsquo;d also like to thank all 74 contributors who help in someway, whether it was filing issues or contributing code and documentation:
&lt;a href="https://github.com/a4sberg" target="_blank" rel="noopener">@a4sberg&lt;/a>,
&lt;a href="https://github.com/ablack3" target="_blank" rel="noopener">@ablack3&lt;/a>,
&lt;a href="https://github.com/akgold" target="_blank" rel="noopener">@akgold&lt;/a>,
&lt;a href="https://github.com/aleighbrown" target="_blank" rel="noopener">@aleighbrown&lt;/a>,
&lt;a href="https://github.com/andreassoteriadesmoj" target="_blank" rel="noopener">@andreassoteriadesmoj&lt;/a>,
&lt;a href="https://github.com/apalacio9502" target="_blank" rel="noopener">@apalacio9502&lt;/a>,
&lt;a href="https://github.com/baileych" target="_blank" rel="noopener">@baileych&lt;/a>,
&lt;a href="https://github.com/barnesparker" target="_blank" rel="noopener">@barnesparker&lt;/a>,
&lt;a href="https://github.com/bhuvanesh1707" target="_blank" rel="noopener">@bhuvanesh1707&lt;/a>,
&lt;a href="https://github.com/bkraft4257" target="_blank" rel="noopener">@bkraft4257&lt;/a>,
&lt;a href="https://github.com/bobbymc0" target="_blank" rel="noopener">@bobbymc0&lt;/a>,
&lt;a href="https://github.com/brian-law-rstudio" target="_blank" rel="noopener">@brian-law-rstudio&lt;/a>,
&lt;a href="https://github.com/bthe" target="_blank" rel="noopener">@bthe&lt;/a>,
&lt;a href="https://github.com/But2ene" target="_blank" rel="noopener">@But2ene&lt;/a>,
&lt;a href="https://github.com/capitantyler" target="_blank" rel="noopener">@capitantyler&lt;/a>,
&lt;a href="https://github.com/carlganz" target="_blank" rel="noopener">@carlganz&lt;/a>,
&lt;a href="https://github.com/cboettig" target="_blank" rel="noopener">@cboettig&lt;/a>,
&lt;a href="https://github.com/chwpearse" target="_blank" rel="noopener">@chwpearse&lt;/a>,
&lt;a href="https://github.com/copernican" target="_blank" rel="noopener">@copernican&lt;/a>,
&lt;a href="https://github.com/DSLituiev" target="_blank" rel="noopener">@DSLituiev&lt;/a>,
&lt;a href="https://github.com/ehudtr7" target="_blank" rel="noopener">@ehudtr7&lt;/a>,
&lt;a href="https://github.com/eitsupi" target="_blank" rel="noopener">@eitsupi&lt;/a>,
&lt;a href="https://github.com/ejneer" target="_blank" rel="noopener">@ejneer&lt;/a>,
&lt;a href="https://github.com/eutwt" target="_blank" rel="noopener">@eutwt&lt;/a>,
&lt;a href="https://github.com/ewright-vcan" target="_blank" rel="noopener">@ewright-vcan&lt;/a>,
&lt;a href="https://github.com/fabkury" target="_blank" rel="noopener">@fabkury&lt;/a>,
&lt;a href="https://github.com/fh-afrachioni" target="_blank" rel="noopener">@fh-afrachioni&lt;/a>,
&lt;a href="https://github.com/fh-mthomson" target="_blank" rel="noopener">@fh-mthomson&lt;/a>,
&lt;a href="https://github.com/filipemsc" target="_blank" rel="noopener">@filipemsc&lt;/a>,
&lt;a href="https://github.com/gadenbuie" target="_blank" rel="noopener">@gadenbuie&lt;/a>,
&lt;a href="https://github.com/gbouzill" target="_blank" rel="noopener">@gbouzill&lt;/a>,
&lt;a href="https://github.com/giocomai" target="_blank" rel="noopener">@giocomai&lt;/a>,
&lt;a href="https://github.com/hadley" target="_blank" rel="noopener">@hadley&lt;/a>,
&lt;a href="https://github.com/hershelm" target="_blank" rel="noopener">@hershelm&lt;/a>,
&lt;a href="https://github.com/iangow" target="_blank" rel="noopener">@iangow&lt;/a>,
&lt;a href="https://github.com/iMissile" target="_blank" rel="noopener">@iMissile&lt;/a>,
&lt;a href="https://github.com/IndrajeetPatil" target="_blank" rel="noopener">@IndrajeetPatil&lt;/a>,
&lt;a href="https://github.com/j-wester" target="_blank" rel="noopener">@j-wester&lt;/a>,
&lt;a href="https://github.com/Janlow" target="_blank" rel="noopener">@Janlow&lt;/a>,
&lt;a href="https://github.com/jasonmhoule" target="_blank" rel="noopener">@jasonmhoule&lt;/a>,
&lt;a href="https://github.com/jensmassberg" target="_blank" rel="noopener">@jensmassberg&lt;/a>,
&lt;a href="https://github.com/jmbarbone" target="_blank" rel="noopener">@jmbarbone&lt;/a>,
&lt;a href="https://github.com/joe-rodd" target="_blank" rel="noopener">@joe-rodd&lt;/a>,
&lt;a href="https://github.com/kongdd" target="_blank" rel="noopener">@kongdd&lt;/a>,
&lt;a href="https://github.com/krlmlr" target="_blank" rel="noopener">@krlmlr&lt;/a>,
&lt;a href="https://github.com/lschneiderbauer" target="_blank" rel="noopener">@lschneiderbauer&lt;/a>,
&lt;a href="https://github.com/machow" target="_blank" rel="noopener">@machow&lt;/a>,
&lt;a href="https://github.com/mgarbuzov" target="_blank" rel="noopener">@mgarbuzov&lt;/a>,
&lt;a href="https://github.com/mgirlich" target="_blank" rel="noopener">@mgirlich&lt;/a>,
&lt;a href="https://github.com/MichaelChirico" target="_blank" rel="noopener">@MichaelChirico&lt;/a>,
&lt;a href="https://github.com/moodymudskipper" target="_blank" rel="noopener">@moodymudskipper&lt;/a>,
&lt;a href="https://github.com/multimeric" target="_blank" rel="noopener">@multimeric&lt;/a>,
&lt;a href="https://github.com/namarkus" target="_blank" rel="noopener">@namarkus&lt;/a>,
&lt;a href="https://github.com/noamross" target="_blank" rel="noopener">@noamross&lt;/a>,
&lt;a href="https://github.com/NZambranoc" target="_blank" rel="noopener">@NZambranoc&lt;/a>,
&lt;a href="https://github.com/oriolarques" target="_blank" rel="noopener">@oriolarques&lt;/a>,
&lt;a href="https://github.com/overmar" target="_blank" rel="noopener">@overmar&lt;/a>,
&lt;a href="https://github.com/owenjonesuob" target="_blank" rel="noopener">@owenjonesuob&lt;/a>,
&lt;a href="https://github.com/p-schaefer" target="_blank" rel="noopener">@p-schaefer&lt;/a>,
&lt;a href="https://github.com/rohitg33" target="_blank" rel="noopener">@rohitg33&lt;/a>,
&lt;a href="https://github.com/rowrowrowyourboat" target="_blank" rel="noopener">@rowrowrowyourboat&lt;/a>,
&lt;a href="https://github.com/rsund" target="_blank" rel="noopener">@rsund&lt;/a>,
&lt;a href="https://github.com/samssann" target="_blank" rel="noopener">@samssann&lt;/a>,
&lt;a href="https://github.com/samterfa" target="_blank" rel="noopener">@samterfa&lt;/a>,
&lt;a href="https://github.com/schradj" target="_blank" rel="noopener">@schradj&lt;/a>,
&lt;a href="https://github.com/scvail195" target="_blank" rel="noopener">@scvail195&lt;/a>,
&lt;a href="https://github.com/slhck" target="_blank" rel="noopener">@slhck&lt;/a>,
&lt;a href="https://github.com/splaisan" target="_blank" rel="noopener">@splaisan&lt;/a>,
&lt;a href="https://github.com/stephenashton-dhsc" target="_blank" rel="noopener">@stephenashton-dhsc&lt;/a>,
&lt;a href="https://github.com/ThomasMorland" target="_blank" rel="noopener">@ThomasMorland&lt;/a>,
&lt;a href="https://github.com/thothal" target="_blank" rel="noopener">@thothal&lt;/a>,
&lt;a href="https://github.com/viswaduttp" target="_blank" rel="noopener">@viswaduttp&lt;/a>,
&lt;a href="https://github.com/XoliloX" target="_blank" rel="noopener">@XoliloX&lt;/a>, and
&lt;a href="https://github.com/yuhenghuang" target="_blank" rel="noopener">@yuhenghuang&lt;/a>.&lt;/p></description></item><item><title>dbplyr 2.2.0</title><link>https://www.tidyverse.org/blog/2022/06/dbplyr-2-2-0/</link><pubDate>Mon, 06 Jun 2022 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2022/06/dbplyr-2-2-0/</guid><description>&lt;!--
TODO:
* [x] Look over / edit the post's title in the yaml
* [x] Edit (or delete) the description; note this appears in the Twitter card
* [x] Pick category and tags (see existing with [`hugodown::tidy_show_meta()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html))
* [x] Find photo &amp; update yaml metadata
* [x] Create `thumbnail-sq.jpg`; height and width should be equal
* [x] Create `thumbnail-wd.jpg`; width should be >5x height
* [x] [`hugodown::use_tidy_thumbnails()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html)
* [x] Add intro sentence, e.g. the standard tagline for the package
* [x] [`usethis::use_tidy_thanks()`](https://usethis.r-lib.org/reference/use_tidy_thanks.html)
-->
&lt;p>We&amp;rsquo;re chuffed to announce the release of
&lt;a href="https://dbplyr.tidyverse.org" target="_blank" rel="noopener">dbplyr&lt;/a> 2.2.0. dbplyr is a database backend for dplyr that allows you to use a remote database as if it was a collection of local data frames: you write ordinary dplyr code and dbplyr translates it to SQL for you.&lt;/p>
&lt;p>You can install it from CRAN with:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/utils/install.packages.html'>install.packages&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"dbplyr"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>This blog post will discuss some of the biggest improvements to SQL translations, introduce
&lt;a href="https://dbplyr.tidyverse.org/reference/copy_inline.html" target="_blank" rel="noopener">&lt;code>copy_inline()&lt;/code>&lt;/a>, and discuss support for dplyr&amp;rsquo;s &lt;code>row_&lt;/code> functions. You can see a full list of changes in the
&lt;a href="https://github.com/tidyverse/dbplyr/releases/tag/v2.2.0" target="_blank" rel="noopener">release notes&lt;/a>.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://dbplyr.tidyverse.org/'>dbplyr&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://dplyr.tidyverse.org'>dplyr&lt;/a>&lt;/span>, warn.conflicts &lt;span class='o'>=&lt;/span> &lt;span class='kc'>FALSE&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;h2 id="sql-improvements">SQL improvements
&lt;a href="#sql-improvements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>This release brings with it a host of useful improvements to SQL generation. Firstly, dbplyr uses &lt;code>*&lt;/code> where possible. This is particularly nice when you have a table with many names:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>lf&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://dbplyr.tidyverse.org/reference/tbl_lazy.html'>lazy_frame&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>!&lt;/span>&lt;span class='o'>!&lt;/span>&lt;span class='o'>!&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/stats/setNames.html'>setNames&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/list.html'>as.list&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>1&lt;/span>&lt;span class='o'>:&lt;/span>&lt;span class='m'>26&lt;/span>&lt;span class='o'>)&lt;/span>, &lt;span class='nv'>letters&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>lf&lt;/span>
&lt;span class='c'>#&amp;gt; &amp;lt;SQL&amp;gt;&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>SELECT&lt;/span> *&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>FROM&lt;/span> `df`&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>If you&amp;rsquo;re familiar with dbplyr&amp;rsquo;s old SQL output, you&amp;rsquo;ll also notice that the output receives some basic syntax highlighting and much improved line breaks and indenting.&lt;/p>
&lt;p>The use of &lt;code>*&lt;/code> is particularly nice when you have a subquery. Previously the generated SQL would have repeated the column names &lt;code>a&lt;/code> to &lt;code>z&lt;/code> twice, once for each subquery.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>lf&lt;/span> |&amp;gt;
&lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x2 &lt;span class='o'>=&lt;/span> &lt;span class='nv'>x&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='m'>1&lt;/span>, x3 &lt;span class='o'>=&lt;/span> &lt;span class='nv'>x2&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='m'>1&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; &amp;lt;SQL&amp;gt;&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>SELECT&lt;/span> *, `x2` + 1.0&lt;span style='color: #0000BB;'> AS &lt;/span>`x3`&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>FROM&lt;/span> (&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>SELECT&lt;/span> *, `x` + 1.0&lt;span style='color: #0000BB;'> AS &lt;/span>`x2`&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>FROM&lt;/span> `df`&lt;/span>
&lt;span class='c'>#&amp;gt; ) `q01`&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>
&lt;a href="https://dplyr.tidyverse.org/reference/explain.html" target="_blank" rel="noopener">&lt;code>show_query()&lt;/code>&lt;/a>,
&lt;a href="https://dplyr.tidyverse.org/reference/compute.html" target="_blank" rel="noopener">&lt;code>compute()&lt;/code>&lt;/a> and
&lt;a href="https://dplyr.tidyverse.org/reference/compute.html" target="_blank" rel="noopener">&lt;code>collect()&lt;/code>&lt;/a> have experimental support for common table expressions (CTEs), available by setting &lt;code>cte = TRUE&lt;/code> argument. CTEs are the database equivalent of the pipe; they allow you to write subqueries in the order in which they&amp;rsquo;re evaluated, rather than the opposite.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>lf&lt;/span> |&amp;gt;
&lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x2 &lt;span class='o'>=&lt;/span> &lt;span class='nv'>x&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='m'>1&lt;/span>, x3 &lt;span class='o'>=&lt;/span> &lt;span class='nv'>x2&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='m'>1&lt;/span>&lt;span class='o'>)&lt;/span> |&amp;gt;
&lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/explain.html'>show_query&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>cte &lt;span class='o'>=&lt;/span> &lt;span class='kc'>TRUE&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; &amp;lt;SQL&amp;gt;&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>WITH &lt;/span>`q01`&lt;span style='color: #0000BB;'> AS&lt;/span> (&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>SELECT&lt;/span> *, `x` + 1.0&lt;span style='color: #0000BB;'> AS &lt;/span>`x2`&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>FROM&lt;/span> `df`&lt;/span>
&lt;span class='c'>#&amp;gt; )&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>SELECT&lt;/span> *, `x2` + 1.0&lt;span style='color: #0000BB;'> AS &lt;/span>`x3`&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>FROM&lt;/span> `q01`&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>We&amp;rsquo;ve also added support for translating
&lt;a href="https://rdrr.io/r/base/cut.html" target="_blank" rel="noopener">&lt;code>cut()&lt;/code>&lt;/a>: this is a very useful base R function that&amp;rsquo;s fiddly to express in SQL:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>lf&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://dbplyr.tidyverse.org/reference/tbl_lazy.html'>lazy_frame&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='m'>1&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nf'>&lt;a href='https://dbplyr.tidyverse.org/reference/translate_sql.html'>translate_sql&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/cut.html'>cut&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>x&lt;/span>, &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0&lt;/span>, &lt;span class='m'>25&lt;/span>, &lt;span class='m'>50&lt;/span>, &lt;span class='m'>100&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; &amp;lt;SQL&amp;gt; CASE&lt;/span>
&lt;span class='c'>#&amp;gt; WHEN (`x` &amp;lt;= 0.0) THEN NULL&lt;/span>
&lt;span class='c'>#&amp;gt; WHEN (`x` &amp;lt;= 25.0) THEN '(0,25]'&lt;/span>
&lt;span class='c'>#&amp;gt; WHEN (`x` &amp;lt;= 50.0) THEN '(25,50]'&lt;/span>
&lt;span class='c'>#&amp;gt; WHEN (`x` &amp;lt;= 100.0) THEN '(50,100]'&lt;/span>
&lt;span class='c'>#&amp;gt; WHEN (`x` &amp;gt; 100.0) THEN NULL&lt;/span>
&lt;span class='c'>#&amp;gt; END&lt;/span>
&lt;span class='c'># Can provide custom labels&lt;/span>
&lt;span class='nf'>&lt;a href='https://dbplyr.tidyverse.org/reference/translate_sql.html'>translate_sql&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/cut.html'>cut&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>x&lt;/span>, &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0&lt;/span>, &lt;span class='m'>25&lt;/span>, &lt;span class='m'>50&lt;/span>, &lt;span class='m'>100&lt;/span>&lt;span class='o'>)&lt;/span>, labels &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"small"&lt;/span>, &lt;span class='s'>"medium"&lt;/span>, &lt;span class='s'>"large"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; &amp;lt;SQL&amp;gt; CASE&lt;/span>
&lt;span class='c'>#&amp;gt; WHEN (`x` &amp;lt;= 0.0) THEN NULL&lt;/span>
&lt;span class='c'>#&amp;gt; WHEN (`x` &amp;lt;= 25.0) THEN 'small'&lt;/span>
&lt;span class='c'>#&amp;gt; WHEN (`x` &amp;lt;= 50.0) THEN 'medium'&lt;/span>
&lt;span class='c'>#&amp;gt; WHEN (`x` &amp;lt;= 100.0) THEN 'large'&lt;/span>
&lt;span class='c'>#&amp;gt; WHEN (`x` &amp;gt; 100.0) THEN NULL&lt;/span>
&lt;span class='c'>#&amp;gt; END&lt;/span>
&lt;span class='c'># And use Inf/-Inf bounds&lt;/span>
&lt;span class='nf'>&lt;a href='https://dbplyr.tidyverse.org/reference/translate_sql.html'>translate_sql&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/cut.html'>cut&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
&lt;span class='nv'>x&lt;/span>,
breaks &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>-&lt;/span>&lt;span class='kc'>Inf&lt;/span>, &lt;span class='m'>25&lt;/span>, &lt;span class='m'>50&lt;/span>, &lt;span class='kc'>Inf&lt;/span>&lt;span class='o'>)&lt;/span>,
labels &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"small"&lt;/span>, &lt;span class='s'>"medium"&lt;/span>, &lt;span class='s'>"large"&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; &amp;lt;SQL&amp;gt; CASE&lt;/span>
&lt;span class='c'>#&amp;gt; WHEN (`x` &amp;lt;= 25.0) THEN 'small'&lt;/span>
&lt;span class='c'>#&amp;gt; WHEN (`x` &amp;lt;= 50.0) THEN 'medium'&lt;/span>
&lt;span class='c'>#&amp;gt; WHEN (`x` &amp;gt; 50.0) THEN 'large'&lt;/span>
&lt;span class='c'>#&amp;gt; END&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>There are also a whole host of minor translation improvements which you can read about in the
&lt;a href="https://github.com/tidyverse/dbplyr/releases/tag/v2.2.0" target="_blank" rel="noopener">release notes&lt;/a>.&lt;/p>
&lt;h2 id="copy_inline">&lt;code>copy_inline()&lt;/code>
&lt;a href="#copy_inline">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>
&lt;a href="https://dbplyr.tidyverse.org/reference/copy_inline.html" target="_blank" rel="noopener">&lt;code>copy_inline()&lt;/code>&lt;/a> provides a new way to get data out of R and into the database by embedding the data directly in the query. This is a natural complement to
&lt;a href="https://dplyr.tidyverse.org/reference/copy_to.html" target="_blank" rel="noopener">&lt;code>copy_to()&lt;/code>&lt;/a> which writes data to a temporary table.
&lt;a href="https://dbplyr.tidyverse.org/reference/copy_inline.html" target="_blank" rel="noopener">&lt;code>copy_inline()&lt;/code>&lt;/a> is faster for small datasets and is particularly useful when you don&amp;rsquo;t have the permissions needed to create temporary tables. Here&amp;rsquo;s a very simple example of what the generated SQL will look like for PostgreSQL&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>df&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/data.frame.html'>data.frame&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='m'>1&lt;/span>&lt;span class='o'>:&lt;/span>&lt;span class='m'>5&lt;/span>, y &lt;span class='o'>=&lt;/span> &lt;span class='nv'>letters&lt;/span>&lt;span class='o'>[&lt;/span>&lt;span class='m'>1&lt;/span>&lt;span class='o'>:&lt;/span>&lt;span class='m'>5&lt;/span>&lt;span class='o'>]&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/explain.html'>show_query&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://dbplyr.tidyverse.org/reference/copy_inline.html'>copy_inline&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://dbplyr.tidyverse.org/reference/backend-postgres.html'>simulate_postgres&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>, &lt;span class='nv'>df&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; &amp;lt;SQL&amp;gt;&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>SELECT&lt;/span> CAST(`x` AS INTEGER)&lt;span style='color: #0000BB;'> AS &lt;/span>`x`, CAST(`y` AS TEXT)&lt;span style='color: #0000BB;'> AS &lt;/span>`y`&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>FROM&lt;/span> ( &lt;span style='color: #0000BB;'>VALUES&lt;/span> (1, 'a'), (2, 'b'), (3, 'c'), (4, 'd'), (5, 'e')) AS drvd(`x`, `y`)&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;h2 id="row-modification">Row modification
&lt;a href="#row-modification">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>dplyr 1.0.0 added a family of
&lt;a href="https://www.tidyverse.org/blog/2020/05/dplyr-1-0-0-last-minute-additions/#row-mutation" target="_blank" rel="noopener">row modification&lt;/a> functions:
&lt;a href="https://dplyr.tidyverse.org/reference/rows.html" target="_blank" rel="noopener">&lt;code>rows_insert()&lt;/code>&lt;/a>,
&lt;a href="https://dplyr.tidyverse.org/reference/rows.html" target="_blank" rel="noopener">&lt;code>rows_append()&lt;/code>&lt;/a>,
&lt;a href="https://dplyr.tidyverse.org/reference/rows.html" target="_blank" rel="noopener">&lt;code>rows_update()&lt;/code>&lt;/a>,
&lt;a href="https://dplyr.tidyverse.org/reference/rows.html" target="_blank" rel="noopener">&lt;code>rows_patch()&lt;/code>&lt;/a>,
&lt;a href="https://dplyr.tidyverse.org/reference/rows.html" target="_blank" rel="noopener">&lt;code>rows_upsert()&lt;/code>&lt;/a>, and
&lt;a href="https://dplyr.tidyverse.org/reference/rows.html" target="_blank" rel="noopener">&lt;code>rows_delete()&lt;/code>&lt;/a>. These functions were inspired by SQL and are now supported by dbplyr.&lt;/p>
&lt;p>The primary purpose of these functions is to modify the underlying tables. Because that purpose is dangerous, you&amp;rsquo;ll need to deliberate opt-in to modification by setting &lt;code>in_place = TRUE&lt;/code>. Use the default behaviour, &lt;code>in_place = FALSE&lt;/code>, to simulate what the result will be.&lt;/p>
&lt;p>With &lt;code>in_place = FALSE&lt;/code>,
&lt;a href="https://dplyr.tidyverse.org/reference/rows.html" target="_blank" rel="noopener">&lt;code>rows_insert()&lt;/code>&lt;/a> and
&lt;a href="https://dplyr.tidyverse.org/reference/rows.html" target="_blank" rel="noopener">&lt;code>rows_append()&lt;/code>&lt;/a> performs an &lt;code>INSERT&lt;/code>,
&lt;a href="https://dplyr.tidyverse.org/reference/rows.html" target="_blank" rel="noopener">&lt;code>rows_update()&lt;/code>&lt;/a> and &lt;code>rows_path()&lt;/code> perform an &lt;code>UPDATE&lt;/code>, and
&lt;a href="https://dplyr.tidyverse.org/reference/rows.html" target="_blank" rel="noopener">&lt;code>rows_delete()&lt;/code>&lt;/a> performs a &lt;code>DELETE.&lt;/code>&lt;/p>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Most of the work in this release was done by dbplyr author
&lt;a href="https://github.com/mgirlich" target="_blank" rel="noopener">@mgirlich&lt;/a>: thanks for all your continued hard work!&lt;/p>
&lt;p>And a big thanks to all 77 other contributors who&amp;rsquo;s comments, code, and discussion helped make a better package:
&lt;a href="https://github.com/001ben" target="_blank" rel="noopener">@001ben&lt;/a>,
&lt;a href="https://github.com/1beb" target="_blank" rel="noopener">@1beb&lt;/a>,
&lt;a href="https://github.com/Ada-Nick" target="_blank" rel="noopener">@Ada-Nick&lt;/a>,
&lt;a href="https://github.com/admivsn" target="_blank" rel="noopener">@admivsn&lt;/a>,
&lt;a href="https://github.com/alex-m-ffm" target="_blank" rel="noopener">@alex-m-ffm&lt;/a>,
&lt;a href="https://github.com/andreassoteriadesmoj" target="_blank" rel="noopener">@andreassoteriadesmoj&lt;/a>,
&lt;a href="https://github.com/andyquinterom" target="_blank" rel="noopener">@andyquinterom&lt;/a>,
&lt;a href="https://github.com/apalacio10" target="_blank" rel="noopener">@apalacio10&lt;/a>,
&lt;a href="https://github.com/apalacio9502" target="_blank" rel="noopener">@apalacio9502&lt;/a>,
&lt;a href="https://github.com/aris-hastings" target="_blank" rel="noopener">@aris-hastings&lt;/a>,
&lt;a href="https://github.com/asimumba" target="_blank" rel="noopener">@asimumba&lt;/a>,
&lt;a href="https://github.com/ben1787" target="_blank" rel="noopener">@ben1787&lt;/a>,
&lt;a href="https://github.com/boshek" target="_blank" rel="noopener">@boshek&lt;/a>,
&lt;a href="https://github.com/caljnj" target="_blank" rel="noopener">@caljnj&lt;/a>,
&lt;a href="https://github.com/carlganz" target="_blank" rel="noopener">@carlganz&lt;/a>,
&lt;a href="https://github.com/CLRafaelR" target="_blank" rel="noopener">@CLRafaelR&lt;/a>,
&lt;a href="https://github.com/coponhub" target="_blank" rel="noopener">@coponhub&lt;/a>,
&lt;a href="https://github.com/cslewis04" target="_blank" rel="noopener">@cslewis04&lt;/a>,
&lt;a href="https://github.com/dbaston" target="_blank" rel="noopener">@dbaston&lt;/a>,
&lt;a href="https://github.com/dpprdan" target="_blank" rel="noopener">@dpprdan&lt;/a>,
&lt;a href="https://github.com/DrFabach" target="_blank" rel="noopener">@DrFabach&lt;/a>,
&lt;a href="https://github.com/EarlGlynn" target="_blank" rel="noopener">@EarlGlynn&lt;/a>,
&lt;a href="https://github.com/edonnachie" target="_blank" rel="noopener">@edonnachie&lt;/a>,
&lt;a href="https://github.com/eipi10" target="_blank" rel="noopener">@eipi10&lt;/a>,
&lt;a href="https://github.com/eitsupi" target="_blank" rel="noopener">@eitsupi&lt;/a>,
&lt;a href="https://github.com/fh-afrachioni" target="_blank" rel="noopener">@fh-afrachioni&lt;/a>,
&lt;a href="https://github.com/fh-kpikhart" target="_blank" rel="noopener">@fh-kpikhart&lt;/a>,
&lt;a href="https://github.com/ggpinto" target="_blank" rel="noopener">@ggpinto&lt;/a>,
&lt;a href="https://github.com/GuillaumePressiat" target="_blank" rel="noopener">@GuillaumePressiat&lt;/a>,
&lt;a href="https://github.com/hadley" target="_blank" rel="noopener">@hadley&lt;/a>,
&lt;a href="https://github.com/HarlanH" target="_blank" rel="noopener">@HarlanH&lt;/a>,
&lt;a href="https://github.com/hdplsa" target="_blank" rel="noopener">@hdplsa&lt;/a>,
&lt;a href="https://github.com/iangow" target="_blank" rel="noopener">@iangow&lt;/a>,
&lt;a href="https://github.com/James-G-Hill" target="_blank" rel="noopener">@James-G-Hill&lt;/a>,
&lt;a href="https://github.com/jennybc" target="_blank" rel="noopener">@jennybc&lt;/a>,
&lt;a href="https://github.com/jiaqizhu-learning" target="_blank" rel="noopener">@jiaqizhu-learning&lt;/a>,
&lt;a href="https://github.com/jonkeane" target="_blank" rel="noopener">@jonkeane&lt;/a>,
&lt;a href="https://github.com/jsspurgeon" target="_blank" rel="noopener">@jsspurgeon&lt;/a>,
&lt;a href="https://github.com/julieinsan" target="_blank" rel="noopener">@julieinsan&lt;/a>,
&lt;a href="https://github.com/k6adams" target="_blank" rel="noopener">@k6adams&lt;/a>,
&lt;a href="https://github.com/kelnerrr" target="_blank" rel="noopener">@kelnerrr&lt;/a>,
&lt;a href="https://github.com/kmishra9" target="_blank" rel="noopener">@kmishra9&lt;/a>,
&lt;a href="https://github.com/krlmlr" target="_blank" rel="noopener">@krlmlr&lt;/a>,
&lt;a href="https://github.com/Leprechault" target="_blank" rel="noopener">@Leprechault&lt;/a>,
&lt;a href="https://github.com/Liudvikas-vinted" target="_blank" rel="noopener">@Liudvikas-vinted&lt;/a>,
&lt;a href="https://github.com/LukasWallrich" target="_blank" rel="noopener">@LukasWallrich&lt;/a>,
&lt;a href="https://github.com/m-sostero" target="_blank" rel="noopener">@m-sostero&lt;/a>,
&lt;a href="https://github.com/maelle" target="_blank" rel="noopener">@maelle&lt;/a>,
&lt;a href="https://github.com/mattcane" target="_blank" rel="noopener">@mattcane&lt;/a>,
&lt;a href="https://github.com/mfherman" target="_blank" rel="noopener">@mfherman&lt;/a>,
&lt;a href="https://github.com/mkoohafkan" target="_blank" rel="noopener">@mkoohafkan&lt;/a>,
&lt;a href="https://github.com/Mosk915" target="_blank" rel="noopener">@Mosk915&lt;/a>,
&lt;a href="https://github.com/nassuphis" target="_blank" rel="noopener">@nassuphis&lt;/a>,
&lt;a href="https://github.com/nirski" target="_blank" rel="noopener">@nirski&lt;/a>,
&lt;a href="https://github.com/nviets" target="_blank" rel="noopener">@nviets&lt;/a>,
&lt;a href="https://github.com/overmar" target="_blank" rel="noopener">@overmar&lt;/a>,
&lt;a href="https://github.com/p-schaefer" target="_blank" rel="noopener">@p-schaefer&lt;/a>,
&lt;a href="https://github.com/plogacev" target="_blank" rel="noopener">@plogacev&lt;/a>,
&lt;a href="https://github.com/randy3k" target="_blank" rel="noopener">@randy3k&lt;/a>,
&lt;a href="https://github.com/recleev" target="_blank" rel="noopener">@recleev&lt;/a>,
&lt;a href="https://github.com/rmcd1024" target="_blank" rel="noopener">@rmcd1024&lt;/a>,
&lt;a href="https://github.com/rsund" target="_blank" rel="noopener">@rsund&lt;/a>,
&lt;a href="https://github.com/rvomm" target="_blank" rel="noopener">@rvomm&lt;/a>,
&lt;a href="https://github.com/samssann" target="_blank" rel="noopener">@samssann&lt;/a>,
&lt;a href="https://github.com/sfirke" target="_blank" rel="noopener">@sfirke&lt;/a>,
&lt;a href="https://github.com/Sir-Chibi" target="_blank" rel="noopener">@Sir-Chibi&lt;/a>,
&lt;a href="https://github.com/sitendug" target="_blank" rel="noopener">@sitendug&lt;/a>,
&lt;a href="https://github.com/somatusag" target="_blank" rel="noopener">@somatusag&lt;/a>,
&lt;a href="https://github.com/stephenashton-dhsc" target="_blank" rel="noopener">@stephenashton-dhsc&lt;/a>,
&lt;a href="https://github.com/swnydick" target="_blank" rel="noopener">@swnydick&lt;/a>,
&lt;a href="https://github.com/thothal" target="_blank" rel="noopener">@thothal&lt;/a>,
&lt;a href="https://github.com/torbjorn" target="_blank" rel="noopener">@torbjorn&lt;/a>,
&lt;a href="https://github.com/tsengj" target="_blank" rel="noopener">@tsengj&lt;/a>,
&lt;a href="https://github.com/vspinu" target="_blank" rel="noopener">@vspinu&lt;/a>,
&lt;a href="https://github.com/Waftmaster" target="_blank" rel="noopener">@Waftmaster&lt;/a>,
&lt;a href="https://github.com/williamlai2" target="_blank" rel="noopener">@williamlai2&lt;/a>, and
&lt;a href="https://github.com/yitao-li" target="_blank" rel="noopener">@yitao-li&lt;/a>.&lt;/p></description></item><item><title>bigrquery 1.4.0</title><link>https://www.tidyverse.org/blog/2021/08/bigrquery-1-4-0/</link><pubDate>Wed, 04 Aug 2021 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2021/08/bigrquery-1-4-0/</guid><description>&lt;p>We&amp;rsquo;re gratified to announce the release of
&lt;a href="https://bigrquery.r-dbi.org" target="_blank" rel="noopener">bigrquery&lt;/a> 1.4.0. bigrquery makes it easy to work with data stored in
&lt;a href="https://developers.google.com/bigquery/" target="_blank" rel="noopener">Google BigQuery&lt;/a>, a hosted database for big data.&lt;/p>
&lt;p>You can install bigrquery from CRAN with:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/utils/install.packages.html'>install.packages&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"bigrquery"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>This release is mostly to fix a bug in
&lt;a href="https://bigrquery.r-dbi.org/reference/bq_table_download.html" target="_blank" rel="noopener">&lt;code>bq_table_download()&lt;/code>&lt;/a>. We&amp;rsquo;re also bumping the required version of the gargle package (&lt;a href="https://gargle.r-lib.org">https://gargle.r-lib.org&lt;/a>), which handles everything around auth.&lt;/p>
&lt;p>You can see a full list of changes in the
&lt;a href="https://bigrquery.r-dbi.org/news/index.html" target="_blank" rel="noopener">release notes&lt;/a>.&lt;/p>
&lt;h2 id="bq_table_download-bug-fix">&lt;code>bq_table_download()&lt;/code> bug fix
&lt;a href="#bq_table_download-bug-fix">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>
&lt;a href="https://bigrquery.r-dbi.org/reference/bq_table_download.html" target="_blank" rel="noopener">&lt;code>bq_table_download()&lt;/code>&lt;/a> is a good way to bring small-to-medium data out of BigQuery and into R, in the form of a tibble.&lt;/p>
&lt;p>Under the hood,
&lt;a href="https://bigrquery.r-dbi.org/reference/bq_table_download.html" target="_blank" rel="noopener">&lt;code>bq_table_download()&lt;/code>&lt;/a> retrieves the data in chunks, using several simultaneous connections to BigQuery servers, then parses and reassembles it. The use of concurrent requests has a substantial performance benefit, which we think is absolutely worth it. We ask for these chunks in terms of specific rows, but if the server determines the response will be too large, it sends fewer-than-expected rows (plus a token that can be used to pick up where things left off).&lt;/p>
&lt;p>The bug is that
&lt;a href="https://bigrquery.r-dbi.org/reference/bq_table_download.html" target="_blank" rel="noopener">&lt;code>bq_table_download()&lt;/code>&lt;/a> previously did not account for this and silently returned a tibble with the requested shape but, potentially, with lots of missing data. Many users and datasets are unaffected, because all chunks are received in their entirety. But the problem has been seen with datasets with many columns and where data complexity and sparsity mean that different slices of rows have a very different memory footprint.&lt;/p>
&lt;p>
&lt;a href="https://bigrquery.r-dbi.org/reference/bq_table_download.html" target="_blank" rel="noopener">&lt;code>bq_table_download()&lt;/code>&lt;/a> has been heavily refactored to make this phenomenon much less likely and to detect it when it happens:&lt;/p>
&lt;ul>
&lt;li>The default value of &lt;code>page_size&lt;/code> is no longer fixed and, instead, is determined empirically. Users are strongly recommended to let bigrquery select &lt;code>page_size&lt;/code> automatically, unless there&amp;rsquo;s a specific reason to do otherwise.&lt;/li>
&lt;li>If one of our so-called chunks does not fit on a BigQuery page,
&lt;a href="https://bigrquery.r-dbi.org/reference/bq_table_download.html" target="_blank" rel="noopener">&lt;code>bq_table_download()&lt;/code>&lt;/a> now throws an error with some advice about &lt;code>page_size&lt;/code>.&lt;/li>
&lt;li>The &lt;code>max_results&lt;/code> argument has been deprecated in favor of &lt;code>n_max&lt;/code>, which better reflects what we actually do with this number and is consistent with the &lt;code>n_max&lt;/code> argument elsewhere, e.g.,
&lt;a href="https://readr.tidyverse.org/reference/read_delim.html" target="_blank" rel="noopener">&lt;code>readr::read_csv()&lt;/code>&lt;/a>.&lt;/li>
&lt;/ul>
&lt;p>Here&amp;rsquo;s a look at the new and improved
&lt;a href="https://bigrquery.r-dbi.org/reference/bq_table_download.html" target="_blank" rel="noopener">&lt;code>bq_table_download()&lt;/code>&lt;/a>:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://bigrquery.r-dbi.org'>bigrquery&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>dat&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://bigrquery.r-dbi.org/reference/bq_table_download.html'>bq_table_download&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
&lt;span class='s'>"bigquery-public-data.chicago_taxi_trips.taxi_trips"&lt;/span>,
n_max &lt;span class='o'>=&lt;/span> &lt;span class='m'>100000&lt;/span>,
bigint &lt;span class='o'>=&lt;/span> &lt;span class='s'>"integer64"&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; Downloading first chunk of data.&lt;/span>
&lt;span class='c'>#&amp;gt; Received 29,221 rows in the first chunk.&lt;/span>
&lt;span class='c'>#&amp;gt; Downloading the remaining 70,779 rows in 4 chunks of (up to) 21,915 rows.&lt;/span>
&lt;span class='nf'>&lt;a href='https://rdrr.io/r/utils/head.html'>tail&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>dat&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; # A tibble: 6 x 23&lt;/span>
&lt;span class='c'>#&amp;gt; unique_key taxi_id trip_start_timesta… trip_end_timestamp trip_seconds&lt;/span>
&lt;span class='c'>#&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;dttm&amp;gt; &amp;lt;dttm&amp;gt; &amp;lt;int64&amp;gt;&lt;/span>
&lt;span class='c'>#&amp;gt; 1 1ad3f7df79d3… 0caf3d04eb… 2013-12-27 12:45:00 2013-12-27 13:00:00 840&lt;/span>
&lt;span class='c'>#&amp;gt; 2 3c982851afee… d7f7e8e4b0… 2014-01-25 19:45:00 2014-01-25 20:00:00 720&lt;/span>
&lt;span class='c'>#&amp;gt; 3 da7428c5329e… 46e168456e… 2014-01-06 17:45:00 2014-01-06 18:00:00 540&lt;/span>
&lt;span class='c'>#&amp;gt; 4 b0bb177ea839… 8d1222551a… 2014-01-08 11:45:00 2014-01-08 12:00:00 540&lt;/span>
&lt;span class='c'>#&amp;gt; 5 eee61e8e6c6d… ac39a2b21a… 2014-01-07 20:45:00 2014-01-07 21:00:00 540&lt;/span>
&lt;span class='c'>#&amp;gt; 6 4cc0ba56e6de… 25c1126afa… 2013-12-16 22:45:00 2013-12-16 22:45:00 420&lt;/span>
&lt;span class='c'>#&amp;gt; # … with 18 more variables: trip_miles &amp;lt;dbl&amp;gt;, pickup_census_tract &amp;lt;int64&amp;gt;,&lt;/span>
&lt;span class='c'>#&amp;gt; # dropoff_census_tract &amp;lt;int64&amp;gt;, pickup_community_area &amp;lt;int64&amp;gt;,&lt;/span>
&lt;span class='c'>#&amp;gt; # dropoff_community_area &amp;lt;int64&amp;gt;, fare &amp;lt;dbl&amp;gt;, tips &amp;lt;dbl&amp;gt;, tolls &amp;lt;dbl&amp;gt;,&lt;/span>
&lt;span class='c'>#&amp;gt; # extras &amp;lt;dbl&amp;gt;, trip_total &amp;lt;dbl&amp;gt;, payment_type &amp;lt;chr&amp;gt;, company &amp;lt;chr&amp;gt;,&lt;/span>
&lt;span class='c'>#&amp;gt; # pickup_latitude &amp;lt;dbl&amp;gt;, pickup_longitude &amp;lt;dbl&amp;gt;, pickup_location &amp;lt;chr&amp;gt;,&lt;/span>
&lt;span class='c'>#&amp;gt; # dropoff_latitude &amp;lt;dbl&amp;gt;, dropoff_longitude &amp;lt;dbl&amp;gt;, dropoff_location &amp;lt;chr&amp;gt;&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;h2 id="auth-updates">Auth updates
&lt;a href="#auth-updates">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>If you are generally fairly passive about bigrquery auth, then you should just sit back and let things happen organically during usage. If you&amp;rsquo;ve used bigrquery before, you can expect to see some messages about cleaning and relocating the token cache when you first use v1.4.0. You can also expect to re-authenticate yourself with Google and re-authorize the &amp;ldquo;Tidyverse API Packages&amp;rdquo; to work with your files. This is all due to changes in gargle.&lt;/p>
&lt;p>If your usage requires you to be more proactive about auth, read the
&lt;a href="https://www.tidyverse.org/blog/2021/07/gargle-1-2-0/" target="_blank" rel="noopener">blog post for gargle&amp;rsquo;s recent v1.2.0 release&lt;/a>. A key point is that we have rolled the built-in OAuth client, which is why those relying on it will need to re-auth.&lt;/p>
&lt;p>&lt;strong>If the rolling of the tidyverse OAuth client is highly disruptive to your workflow, consider this a wake-up call&lt;/strong> that you should be using your own OAuth client or, quite possibly, an entirely different method of auth. Our credential rolling will have no impact on users who use their own OAuth client or service account tokens.&lt;/p>
&lt;p>gargle v1.2.0 offers support for a new method of auth that is especially relevant to bigrquery users: &lt;em>workload identity federation&lt;/em>. This is a new (as of April 2021) keyless authentication mechanism offered by Google. Identity federation allows applications running on a non-Google Cloud platform, such as AWS, to access Google Cloud resources without using a conventional service account token, eliminating the security problem posed by long-lived, powerful service account credential files. Basically, instead of storing sensitive information in a file that must be managed with great care, the necessary secrets are obtained on-the-fly and exchanged for short-lived tokens, with very granular control over what actions are allowed. There is a cost, of course, which is that this auth method requires substantial configuration on both the GCP and AWS sides.&lt;/p>
&lt;p>See the
&lt;a href="https://www.tidyverse.org/blog/2021/07/gargle-1-2-0/" target="_blank" rel="noopener">gargle v1.2.0 blog post&lt;/a> and the docs for
&lt;a href="https://gargle.r-lib.org/reference/credentials_external_account.html" target="_blank" rel="noopener">&lt;code>gargle::credentials_external_account()&lt;/code>&lt;/a> to learn more.&lt;/p>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>We&amp;rsquo;d like to thank everyone who has furthered the development of bigrquery, since the last major release (v1.0.0), through their contributions in issues and pull requests:&lt;/p>
&lt;p>
&lt;a href="https://github.com/414theodore" target="_blank" rel="noopener">@414theodore&lt;/a>,
&lt;a href="https://github.com/abalter" target="_blank" rel="noopener">@abalter&lt;/a>,
&lt;a href="https://github.com/acvelozo" target="_blank" rel="noopener">@acvelozo&lt;/a>,
&lt;a href="https://github.com/adhi-r" target="_blank" rel="noopener">@adhi-r&lt;/a>,
&lt;a href="https://github.com/afalcioni" target="_blank" rel="noopener">@afalcioni&lt;/a>,
&lt;a href="https://github.com/ahmohamed" target="_blank" rel="noopener">@ahmohamed&lt;/a>,
&lt;a href="https://github.com/ajhindle" target="_blank" rel="noopener">@ajhindle&lt;/a>,
&lt;a href="https://github.com/AlekseyBuzmakov" target="_blank" rel="noopener">@AlekseyBuzmakov&lt;/a>,
&lt;a href="https://github.com/analyse9823" target="_blank" rel="noopener">@analyse9823&lt;/a>,
&lt;a href="https://github.com/andirey" target="_blank" rel="noopener">@andirey&lt;/a>,
&lt;a href="https://github.com/ArbenKqiku" target="_blank" rel="noopener">@ArbenKqiku&lt;/a>,
&lt;a href="https://github.com/arvhug" target="_blank" rel="noopener">@arvhug&lt;/a>,
&lt;a href="https://github.com/batpigandme" target="_blank" rel="noopener">@batpigandme&lt;/a>,
&lt;a href="https://github.com/bbrewington" target="_blank" rel="noopener">@bbrewington&lt;/a>,
&lt;a href="https://github.com/bhargavimoorthyrao" target="_blank" rel="noopener">@bhargavimoorthyrao&lt;/a>,
&lt;a href="https://github.com/btrx-sreddy" target="_blank" rel="noopener">@btrx-sreddy&lt;/a>,
&lt;a href="https://github.com/byapparov" target="_blank" rel="noopener">@byapparov&lt;/a>,
&lt;a href="https://github.com/carbocation" target="_blank" rel="noopener">@carbocation&lt;/a>,
&lt;a href="https://github.com/CartWill" target="_blank" rel="noopener">@CartWill&lt;/a>,
&lt;a href="https://github.com/chrisherold" target="_blank" rel="noopener">@chrisherold&lt;/a>,
&lt;a href="https://github.com/ChrisJohnsonUMG" target="_blank" rel="noopener">@ChrisJohnsonUMG&lt;/a>,
&lt;a href="https://github.com/cpcgoogle" target="_blank" rel="noopener">@cpcgoogle&lt;/a>,
&lt;a href="https://github.com/danny-molamola" target="_blank" rel="noopener">@danny-molamola&lt;/a>,
&lt;a href="https://github.com/deflaux" target="_blank" rel="noopener">@deflaux&lt;/a>,
&lt;a href="https://github.com/dmoimpact" target="_blank" rel="noopener">@dmoimpact&lt;/a>,
&lt;a href="https://github.com/downloaderfan" target="_blank" rel="noopener">@downloaderfan&lt;/a>,
&lt;a href="https://github.com/dsolito" target="_blank" rel="noopener">@dsolito&lt;/a>,
&lt;a href="https://github.com/dujm" target="_blank" rel="noopener">@dujm&lt;/a>,
&lt;a href="https://github.com/eamcvey" target="_blank" rel="noopener">@eamcvey&lt;/a>,
&lt;a href="https://github.com/eddelbuettel" target="_blank" rel="noopener">@eddelbuettel&lt;/a>,
&lt;a href="https://github.com/edgararuiz-zz" target="_blank" rel="noopener">@edgararuiz-zz&lt;/a>,
&lt;a href="https://github.com/eduardodrc" target="_blank" rel="noopener">@eduardodrc&lt;/a>,
&lt;a href="https://github.com/evandropp10" target="_blank" rel="noopener">@evandropp10&lt;/a>,
&lt;a href="https://github.com/everron" target="_blank" rel="noopener">@everron&lt;/a>,
&lt;a href="https://github.com/geotheory" target="_blank" rel="noopener">@geotheory&lt;/a>,
&lt;a href="https://github.com/gikis1" target="_blank" rel="noopener">@gikis1&lt;/a>,
&lt;a href="https://github.com/gjuggler" target="_blank" rel="noopener">@gjuggler&lt;/a>,
&lt;a href="https://github.com/gkmuralimech" target="_blank" rel="noopener">@gkmuralimech&lt;/a>,
&lt;a href="https://github.com/grantmcdermott" target="_blank" rel="noopener">@grantmcdermott&lt;/a>,
&lt;a href="https://github.com/guillaumed90" target="_blank" rel="noopener">@guillaumed90&lt;/a>,
&lt;a href="https://github.com/hadley" target="_blank" rel="noopener">@hadley&lt;/a>,
&lt;a href="https://github.com/HarlanH" target="_blank" rel="noopener">@HarlanH&lt;/a>,
&lt;a href="https://github.com/hlynurhallgrims" target="_blank" rel="noopener">@hlynurhallgrims&lt;/a>,
&lt;a href="https://github.com/htappen" target="_blank" rel="noopener">@htappen&lt;/a>,
&lt;a href="https://github.com/Iuiu1234" target="_blank" rel="noopener">@Iuiu1234&lt;/a>,
&lt;a href="https://github.com/izzetagoren" target="_blank" rel="noopener">@izzetagoren&lt;/a>,
&lt;a href="https://github.com/j450h1" target="_blank" rel="noopener">@j450h1&lt;/a>,
&lt;a href="https://github.com/janejuenyang" target="_blank" rel="noopener">@janejuenyang&lt;/a>,
&lt;a href="https://github.com/jayBana" target="_blank" rel="noopener">@jayBana&lt;/a>,
&lt;a href="https://github.com/jberninger" target="_blank" rel="noopener">@jberninger&lt;/a>,
&lt;a href="https://github.com/jcheng5" target="_blank" rel="noopener">@jcheng5&lt;/a>,
&lt;a href="https://github.com/jennybc" target="_blank" rel="noopener">@jennybc&lt;/a>,
&lt;a href="https://github.com/jimmyg3g" target="_blank" rel="noopener">@jimmyg3g&lt;/a>,
&lt;a href="https://github.com/joetortorelli" target="_blank" rel="noopener">@joetortorelli&lt;/a>,
&lt;a href="https://github.com/jordanwebb10" target="_blank" rel="noopener">@jordanwebb10&lt;/a>,
&lt;a href="https://github.com/jpryda" target="_blank" rel="noopener">@jpryda&lt;/a>,
&lt;a href="https://github.com/jrecasens" target="_blank" rel="noopener">@jrecasens&lt;/a>,
&lt;a href="https://github.com/Ka2wei" target="_blank" rel="noopener">@Ka2wei&lt;/a>,
&lt;a href="https://github.com/KarimZaoui" target="_blank" rel="noopener">@KarimZaoui&lt;/a>,
&lt;a href="https://github.com/kesnalawrence" target="_blank" rel="noopener">@kesnalawrence&lt;/a>,
&lt;a href="https://github.com/kevinwang09" target="_blank" rel="noopener">@kevinwang09&lt;/a>,
&lt;a href="https://github.com/kkmann" target="_blank" rel="noopener">@kkmann&lt;/a>,
&lt;a href="https://github.com/krlmlr" target="_blank" rel="noopener">@krlmlr&lt;/a>,
&lt;a href="https://github.com/Kvit" target="_blank" rel="noopener">@Kvit&lt;/a>,
&lt;a href="https://github.com/ldanai" target="_blank" rel="noopener">@ldanai&lt;/a>,
&lt;a href="https://github.com/leemc-data-ed" target="_blank" rel="noopener">@leemc-data-ed&lt;/a>,
&lt;a href="https://github.com/LukasWallrich" target="_blank" rel="noopener">@LukasWallrich&lt;/a>,
&lt;a href="https://github.com/maelle" target="_blank" rel="noopener">@maelle&lt;/a>,
&lt;a href="https://github.com/mapinas" target="_blank" rel="noopener">@mapinas&lt;/a>,
&lt;a href="https://github.com/mauricioita" target="_blank" rel="noopener">@mauricioita&lt;/a>,
&lt;a href="https://github.com/meystingray" target="_blank" rel="noopener">@meystingray&lt;/a>,
&lt;a href="https://github.com/meztez" target="_blank" rel="noopener">@meztez&lt;/a>,
&lt;a href="https://github.com/mr2dark" target="_blank" rel="noopener">@mr2dark&lt;/a>,
&lt;a href="https://github.com/mwilson19" target="_blank" rel="noopener">@mwilson19&lt;/a>,
&lt;a href="https://github.com/paleolimbot" target="_blank" rel="noopener">@paleolimbot&lt;/a>,
&lt;a href="https://github.com/paulsendavidjay" target="_blank" rel="noopener">@paulsendavidjay&lt;/a>,
&lt;a href="https://github.com/philbrierley" target="_blank" rel="noopener">@philbrierley&lt;/a>,
&lt;a href="https://github.com/ras44" target="_blank" rel="noopener">@ras44&lt;/a>,
&lt;a href="https://github.com/rasmusab" target="_blank" rel="noopener">@rasmusab&lt;/a>,
&lt;a href="https://github.com/reliscu" target="_blank" rel="noopener">@reliscu&lt;/a>,
&lt;a href="https://github.com/riccardopinosio" target="_blank" rel="noopener">@riccardopinosio&lt;/a>,
&lt;a href="https://github.com/Saikri5hna" target="_blank" rel="noopener">@Saikri5hna&lt;/a>,
&lt;a href="https://github.com/samudzi" target="_blank" rel="noopener">@samudzi&lt;/a>,
&lt;a href="https://github.com/santic113" target="_blank" rel="noopener">@santic113&lt;/a>,
&lt;a href="https://github.com/saptarshiguha" target="_blank" rel="noopener">@saptarshiguha&lt;/a>,
&lt;a href="https://github.com/Schumzy" target="_blank" rel="noopener">@Schumzy&lt;/a>,
&lt;a href="https://github.com/SeagleLiu" target="_blank" rel="noopener">@SeagleLiu&lt;/a>,
&lt;a href="https://github.com/selcukakbas" target="_blank" rel="noopener">@selcukakbas&lt;/a>,
&lt;a href="https://github.com/selesnow" target="_blank" rel="noopener">@selesnow&lt;/a>,
&lt;a href="https://github.com/siroros" target="_blank" rel="noopener">@siroros&lt;/a>,
&lt;a href="https://github.com/skydavis435" target="_blank" rel="noopener">@skydavis435&lt;/a>,
&lt;a href="https://github.com/spgarbet" target="_blank" rel="noopener">@spgarbet&lt;/a>,
&lt;a href="https://github.com/spiddy69" target="_blank" rel="noopener">@spiddy69&lt;/a>,
&lt;a href="https://github.com/srkpratap" target="_blank" rel="noopener">@srkpratap&lt;/a>,
&lt;a href="https://github.com/stelsemeyer" target="_blank" rel="noopener">@stelsemeyer&lt;/a>,
&lt;a href="https://github.com/stevecondylios" target="_blank" rel="noopener">@stevecondylios&lt;/a>,
&lt;a href="https://github.com/svmakarovv" target="_blank" rel="noopener">@svmakarovv&lt;/a>,
&lt;a href="https://github.com/tchaithonov" target="_blank" rel="noopener">@tchaithonov&lt;/a>,
&lt;a href="https://github.com/tdsmith" target="_blank" rel="noopener">@tdsmith&lt;/a>,
&lt;a href="https://github.com/theclue" target="_blank" rel="noopener">@theclue&lt;/a>,
&lt;a href="https://github.com/tinoater" target="_blank" rel="noopener">@tinoater&lt;/a>,
&lt;a href="https://github.com/valentas-kurauskas" target="_blank" rel="noopener">@valentas-kurauskas&lt;/a>,
&lt;a href="https://github.com/valentinumbach" target="_blank" rel="noopener">@valentinumbach&lt;/a>,
&lt;a href="https://github.com/victorz-ca" target="_blank" rel="noopener">@victorz-ca&lt;/a>,
&lt;a href="https://github.com/warnes" target="_blank" rel="noopener">@warnes&lt;/a>,
&lt;a href="https://github.com/YuanyuanZhang1986" target="_blank" rel="noopener">@YuanyuanZhang1986&lt;/a>,
&lt;a href="https://github.com/zacdav" target="_blank" rel="noopener">@zacdav&lt;/a>,
&lt;a href="https://github.com/ZainRizvi" target="_blank" rel="noopener">@ZainRizvi&lt;/a>,
&lt;a href="https://github.com/zerobytes" target="_blank" rel="noopener">@zerobytes&lt;/a>, and
&lt;a href="https://github.com/zoews" target="_blank" rel="noopener">@zoews&lt;/a>.&lt;/p></description></item><item><title>dbplyr 2.0.0</title><link>https://www.tidyverse.org/blog/2020/11/dbplyr-2-0-0/</link><pubDate>Wed, 04 Nov 2020 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2020/11/dbplyr-2-0-0/</guid><description>&lt;p>We&amp;rsquo;re pleased to announce the release of
&lt;a href="https://dbplyr.tidyverse.org/" target="_blank" rel="noopener">dbplyr&lt;/a> 2.0.0. dbplyr is a database backend for
&lt;a href="https://dplyr.tidyverse.org/" target="_blank" rel="noopener">dplyr&lt;/a> that allows you to use a remote database as if it was a collection of local data frames: you write ordinary dplyr code and dbplyr translates it to SQL for you.&lt;/p>
&lt;p>You can install it from CRAN with:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/utils/install.packages.html'>install.packages&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"dbplyr"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>This blog post covers the major improvements in this version:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>dplyr 1.0.0 compatibility so you can now use
&lt;a href="https://dplyr.tidyverse.org/reference/across.html" target="_blank" rel="noopener">&lt;code>across()&lt;/code>&lt;/a>,
&lt;a href="https://dplyr.tidyverse.org/reference/relocate.html" target="_blank" rel="noopener">&lt;code>relocate()&lt;/code>&lt;/a>,
&lt;a href="https://dplyr.tidyverse.org/reference/rename.html" target="_blank" rel="noopener">&lt;code>rename_with()&lt;/code>&lt;/a>, and more.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Major improvements to SQL translation.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>A snazzy new logo from
&lt;a href="https://www.allisonhorst.com" target="_blank" rel="noopener">Allison Horst&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>An improved extension system.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>Please see the
&lt;a href="https://github.com/tidyverse/dbplyr/releases/tag/v2.0.0" target="_blank" rel="noopener">release notes&lt;/a> for a full list of changes.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://dbplyr.tidyverse.org/'>dbplyr&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://dplyr.tidyverse.org'>dplyr&lt;/a>&lt;/span>, warn.conflicts &lt;span class='o'>=&lt;/span> &lt;span class='kc'>FALSE&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;h2 id="dplyr-100-compatibility">dplyr 1.0.0 compatibility
&lt;a href="#dplyr-100-compatibility">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>dbplyr now supports all relevant features added in dplyr 1.0.0:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>
&lt;a href="https://dplyr.tidyverse.org/reference/across.html" target="_blank" rel="noopener">&lt;code>across()&lt;/code>&lt;/a> is now translated into individual SQL statements.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>lf&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://dbplyr.tidyverse.org/reference/tbl_lazy.html'>lazy_frame&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>g &lt;span class='o'>=&lt;/span> &lt;span class='m'>1&lt;/span>, a &lt;span class='o'>=&lt;/span> &lt;span class='m'>1&lt;/span>, b &lt;span class='o'>=&lt;/span> &lt;span class='m'>2&lt;/span>, c &lt;span class='o'>=&lt;/span> &lt;span class='m'>3&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>lf&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span>
&lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>g&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span>
&lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/across.html'>across&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://tidyselect.r-lib.org/reference/everything.html'>everything&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>, &lt;span class='nv'>mean&lt;/span>, na.rm &lt;span class='o'>=&lt;/span> &lt;span class='kc'>TRUE&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; &amp;lt;SQL&amp;gt;&lt;/span>
&lt;span class='c'>#&amp;gt; SELECT `g`, AVG(`g`) AS `g`, AVG(`a`) AS `a`, AVG(`b`) AS `b`, AVG(`c`) AS `c`&lt;/span>
&lt;span class='c'>#&amp;gt; FROM `df`&lt;/span>
&lt;span class='c'>#&amp;gt; GROUP BY `g`&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;/li>
&lt;li>
&lt;p>
&lt;a href="https://dplyr.tidyverse.org/reference/rename.html" target="_blank" rel="noopener">&lt;code>rename()&lt;/code>&lt;/a> and
&lt;a href="https://dplyr.tidyverse.org/reference/select.html" target="_blank" rel="noopener">&lt;code>select()&lt;/code>&lt;/a> support dplyr tidyselect syntax, apart from predicate functions which can&amp;rsquo;t easily work on computed queries. You can now use
&lt;a href="https://dplyr.tidyverse.org/reference/rename.html" target="_blank" rel="noopener">&lt;code>rename_with()&lt;/code>&lt;/a> to programmatically rename columns.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>lf&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://dbplyr.tidyverse.org/reference/tbl_lazy.html'>lazy_frame&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x1 &lt;span class='o'>=&lt;/span> &lt;span class='m'>1&lt;/span>, x2 &lt;span class='o'>=&lt;/span> &lt;span class='m'>2&lt;/span>, x3 &lt;span class='o'>=&lt;/span> &lt;span class='m'>3&lt;/span>, y1 &lt;span class='o'>=&lt;/span> &lt;span class='m'>4&lt;/span>, y2 &lt;span class='o'>=&lt;/span> &lt;span class='m'>3&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>lf&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/select.html'>select&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://tidyselect.r-lib.org/reference/starts_with.html'>starts_with&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"x"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&amp;amp;&lt;/span> &lt;span class='o'>!&lt;/span>&lt;span class='s'>"x3"&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; &amp;lt;SQL&amp;gt;&lt;/span>
&lt;span class='c'>#&amp;gt; SELECT `x1`, `x2`&lt;/span>
&lt;span class='c'>#&amp;gt; FROM `df`&lt;/span>
&lt;span class='nv'>lf&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/select.html'>select&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://tidyselect.r-lib.org/reference/starts_with.html'>ends_with&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"2"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&lt;/span> &lt;span class='nf'>&lt;a href='https://tidyselect.r-lib.org/reference/starts_with.html'>ends_with&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"3"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; &amp;lt;SQL&amp;gt;&lt;/span>
&lt;span class='c'>#&amp;gt; SELECT `x2`, `y2`, `x3`&lt;/span>
&lt;span class='c'>#&amp;gt; FROM `df`&lt;/span>
&lt;span class='nv'>lf&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/rename.html'>rename_with&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>toupper&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; &amp;lt;SQL&amp;gt;&lt;/span>
&lt;span class='c'>#&amp;gt; SELECT `x1` AS `X1`, `x2` AS `X2`, `x3` AS `X3`, `y1` AS `Y1`, `y2` AS `Y2`&lt;/span>
&lt;span class='c'>#&amp;gt; FROM `df`&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;/li>
&lt;li>
&lt;p>
&lt;a href="https://dplyr.tidyverse.org/reference/relocate.html" target="_blank" rel="noopener">&lt;code>relocate()&lt;/code>&lt;/a> makes it easy to move columns around:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>lf&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://dbplyr.tidyverse.org/reference/tbl_lazy.html'>lazy_frame&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x1 &lt;span class='o'>=&lt;/span> &lt;span class='m'>1&lt;/span>, x2 &lt;span class='o'>=&lt;/span> &lt;span class='m'>2&lt;/span>, y1 &lt;span class='o'>=&lt;/span> &lt;span class='m'>4&lt;/span>, y2 &lt;span class='o'>=&lt;/span> &lt;span class='m'>3&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>lf&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/relocate.html'>relocate&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://tidyselect.r-lib.org/reference/starts_with.html'>starts_with&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"y"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; &amp;lt;SQL&amp;gt;&lt;/span>
&lt;span class='c'>#&amp;gt; SELECT `y1`, `y2`, `x1`, `x2`&lt;/span>
&lt;span class='c'>#&amp;gt; FROM `df`&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;/li>
&lt;li>
&lt;p>
&lt;a href="https://dplyr.tidyverse.org/reference/slice.html" target="_blank" rel="noopener">&lt;code>slice_min()&lt;/code>&lt;/a>,
&lt;a href="https://dplyr.tidyverse.org/reference/slice.html" target="_blank" rel="noopener">&lt;code>slice_max()&lt;/code>&lt;/a>, and
&lt;a href="https://dplyr.tidyverse.org/reference/slice.html" target="_blank" rel="noopener">&lt;code>slice_sample()&lt;/code>&lt;/a> are now supported, and
&lt;a href="https://dplyr.tidyverse.org/reference/slice.html" target="_blank" rel="noopener">&lt;code>slice_head()&lt;/code>&lt;/a> and
&lt;a href="https://dplyr.tidyverse.org/reference/slice.html" target="_blank" rel="noopener">&lt;code>slice_tail()&lt;/code>&lt;/a> throw informative error messages (since they don&amp;rsquo;t make sense for databases).&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>lf&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://dbplyr.tidyverse.org/reference/tbl_lazy.html'>lazy_frame&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>g &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/rep.html'>rep&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>1&lt;/span>&lt;span class='o'>:&lt;/span>&lt;span class='m'>2&lt;/span>, &lt;span class='m'>5&lt;/span>&lt;span class='o'>)&lt;/span>, x &lt;span class='o'>=&lt;/span> &lt;span class='m'>1&lt;/span>&lt;span class='o'>:&lt;/span>&lt;span class='m'>10&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>lf&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span>
&lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>g&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span>
&lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/slice.html'>slice_min&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>x&lt;/span>, prop &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.5&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; &amp;lt;SQL&amp;gt;&lt;/span>
&lt;span class='c'>#&amp;gt; SELECT `g`, `x`&lt;/span>
&lt;span class='c'>#&amp;gt; FROM (SELECT `g`, `x`, CUME_DIST() OVER (PARTITION BY `g` ORDER BY `x`) AS `q01`&lt;/span>
&lt;span class='c'>#&amp;gt; FROM `df`) `q01`&lt;/span>
&lt;span class='c'>#&amp;gt; WHERE (`q01` &amp;lt;= 0.5)&lt;/span>
&lt;span class='nv'>lf&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span>
&lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>g&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span>
&lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/slice.html'>slice_sample&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>x&lt;/span>, n &lt;span class='o'>=&lt;/span> &lt;span class='m'>10&lt;/span>, with_ties &lt;span class='o'>=&lt;/span> &lt;span class='kc'>TRUE&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; &amp;lt;SQL&amp;gt;&lt;/span>
&lt;span class='c'>#&amp;gt; SELECT `g`, `x`&lt;/span>
&lt;span class='c'>#&amp;gt; FROM (SELECT `g`, `x`, ROW_NUMBER() OVER (PARTITION BY `g` ORDER BY random()) AS `q01`&lt;/span>
&lt;span class='c'>#&amp;gt; FROM `df`) `q01`&lt;/span>
&lt;span class='c'>#&amp;gt; WHERE (`q01` &amp;lt;= 10)&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>Note that these slices are translated into window functions, and because you can&amp;rsquo;t use a window function directly inside a &lt;code>WHERE&lt;/code> clause, they must be wrapped in a subquery.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="sql-translation">SQL translation
&lt;a href="#sql-translation">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>The dbplyr documentation now does a much better job of providing the details of its SQL translation. Each backend and each major verb has a documentation page giving the basics of the translation. This will hopefully make it much easier to learn what is and isn&amp;rsquo;t supported by dbplyr. Visit &lt;a href="https://dbplyr.tidyverse.org/reference/index.html">https://dbplyr.tidyverse.org/reference/index.html&lt;/a> to see the new docs.&lt;/p>
&lt;p>There are also many improvements to SQL generation. Here are a few of the most important:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Join functions gain an &lt;code>na_matches&lt;/code> argument that allows you to control whether or not &lt;code>NA&lt;/code> (&lt;code>NULL&lt;/code>) values match other &lt;code>NA&lt;/code> values. The default is &lt;code>&amp;quot;never&amp;quot;&lt;/code>, which is the usual behaviour in databases. You can set &lt;code>na_matches = &amp;quot;na&amp;quot;&lt;/code> to match R&amp;rsquo;s usual join behaviour.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>df1&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://tibble.tidyverse.org/reference/tibble.html'>tibble&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>1&lt;/span>, &lt;span class='m'>2&lt;/span>, &lt;span class='kc'>NA&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>df2&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://tibble.tidyverse.org/reference/tibble.html'>tibble&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='kc'>NA&lt;/span>, &lt;span class='m'>1&lt;/span>&lt;span class='o'>)&lt;/span>, y &lt;span class='o'>=&lt;/span> &lt;span class='m'>1&lt;/span>&lt;span class='o'>:&lt;/span>&lt;span class='m'>2&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>df1&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/mutate-joins.html'>inner_join&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>df2&lt;/span>, by &lt;span class='o'>=&lt;/span> &lt;span class='s'>"x"&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #949494;'># A tibble: 2 x 2&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='font-weight: bold;'>x&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>y&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #949494;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #949494;font-style: italic;'>&amp;lt;int&amp;gt;&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #BCBCBC;'>1&lt;/span>&lt;span> 1 2&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #BCBCBC;'>2&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #BB0000;'>NA&lt;/span>&lt;span> 1&lt;/span>&lt;/span>
&lt;span class='nv'>db1&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://dbplyr.tidyverse.org/reference/memdb_frame.html'>memdb_frame&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>1&lt;/span>, &lt;span class='m'>2&lt;/span>, &lt;span class='kc'>NA&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>db2&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://dbplyr.tidyverse.org/reference/memdb_frame.html'>memdb_frame&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='kc'>NA&lt;/span>, &lt;span class='m'>1&lt;/span>&lt;span class='o'>)&lt;/span>, y &lt;span class='o'>=&lt;/span> &lt;span class='m'>1&lt;/span>&lt;span class='o'>:&lt;/span>&lt;span class='m'>2&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>db1&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/mutate-joins.html'>inner_join&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>db2&lt;/span>, by &lt;span class='o'>=&lt;/span> &lt;span class='s'>"x"&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #949494;'># Source: lazy query [?? x 2]&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #949494;'># Database: sqlite 3.34.1 [:memory:]&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='font-weight: bold;'>x&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>y&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #949494;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #949494;font-style: italic;'>&amp;lt;int&amp;gt;&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #BCBCBC;'>1&lt;/span>&lt;span> 1 2&lt;/span>&lt;/span>
&lt;span class='nv'>db1&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/mutate-joins.html'>inner_join&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>db2&lt;/span>, by &lt;span class='o'>=&lt;/span> &lt;span class='s'>"x"&lt;/span>, na_matches &lt;span class='o'>=&lt;/span> &lt;span class='s'>"na"&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #949494;'># Source: lazy query [?? x 2]&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #949494;'># Database: sqlite 3.34.1 [:memory:]&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='font-weight: bold;'>x&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>y&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #949494;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #949494;font-style: italic;'>&amp;lt;int&amp;gt;&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #BCBCBC;'>1&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #BB0000;'>NA&lt;/span>&lt;span> 1&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #BCBCBC;'>2&lt;/span>&lt;span> 1 2&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>This translation is powered by the new
&lt;a href="https://dbplyr.tidyverse.org/reference/db-sql.html" target="_blank" rel="noopener">&lt;code>sql_expr_matches()&lt;/code>&lt;/a> generic, because every database seems to have a slightly different way to express this idea. Learn more at &lt;a href="https://modern-sql.com/feature/is-distinct-from">https://modern-sql.com/feature/is-distinct-from&lt;/a>.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>db1&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/mutate-joins.html'>inner_join&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>db2&lt;/span>, by &lt;span class='o'>=&lt;/span> &lt;span class='s'>"x"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/explain.html'>show_query&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; &amp;lt;SQL&amp;gt;&lt;/span>
&lt;span class='c'>#&amp;gt; SELECT `LHS`.`x` AS `x`, `y`&lt;/span>
&lt;span class='c'>#&amp;gt; FROM `dbplyr_001` AS `LHS`&lt;/span>
&lt;span class='c'>#&amp;gt; INNER JOIN `dbplyr_002` AS `RHS`&lt;/span>
&lt;span class='c'>#&amp;gt; ON (`LHS`.`x` = `RHS`.`x`)&lt;/span>
&lt;span class='nv'>db1&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/mutate-joins.html'>inner_join&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>db2&lt;/span>, by &lt;span class='o'>=&lt;/span> &lt;span class='s'>"x"&lt;/span>, na_matches &lt;span class='o'>=&lt;/span> &lt;span class='s'>"na"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/explain.html'>show_query&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; &amp;lt;SQL&amp;gt;&lt;/span>
&lt;span class='c'>#&amp;gt; SELECT `LHS`.`x` AS `x`, `y`&lt;/span>
&lt;span class='c'>#&amp;gt; FROM `dbplyr_001` AS `LHS`&lt;/span>
&lt;span class='c'>#&amp;gt; INNER JOIN `dbplyr_002` AS `RHS`&lt;/span>
&lt;span class='c'>#&amp;gt; ON (`LHS`.`x` IS `RHS`.`x`)&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;/li>
&lt;li>
&lt;p>Subqueries no longer include an &lt;code>ORDER BY&lt;/code> clause. This is not part of the formal SQL specification so it has very limited support across databases. Now such queries generate a warning suggesting that you move your
&lt;a href="https://dplyr.tidyverse.org/reference/arrange.html" target="_blank" rel="noopener">&lt;code>arrange()&lt;/code>&lt;/a> call later in the pipeline.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>lf&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://dbplyr.tidyverse.org/reference/tbl_lazy.html'>lazy_frame&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>g &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/rep.html'>rep&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>1&lt;/span>&lt;span class='o'>:&lt;/span>&lt;span class='m'>2&lt;/span>, each &lt;span class='o'>=&lt;/span> &lt;span class='m'>5&lt;/span>&lt;span class='o'>)&lt;/span>, x &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/sample.html'>sample&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>1&lt;/span>&lt;span class='o'>:&lt;/span>&lt;span class='m'>10&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>lf&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span>
&lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>g&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span>
&lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>n &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/context.html'>n&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span>
&lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/arrange.html'>arrange&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/desc.html'>desc&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>n&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span>
&lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/filter.html'>filter&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>n&lt;/span> &lt;span class='o'>&amp;gt;&lt;/span> &lt;span class='m'>1&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; Warning: ORDER BY is ignored in subqueries without LIMIT&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>ℹ&lt;/span>&lt;span> Do you need to move arrange() later in the pipeline or use window_order() instead?&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &amp;lt;SQL&amp;gt;&lt;/span>
&lt;span class='c'>#&amp;gt; SELECT *&lt;/span>
&lt;span class='c'>#&amp;gt; FROM (SELECT `g`, COUNT(*) AS `n`&lt;/span>
&lt;span class='c'>#&amp;gt; FROM `df`&lt;/span>
&lt;span class='c'>#&amp;gt; GROUP BY `g`) `q01`&lt;/span>
&lt;span class='c'>#&amp;gt; WHERE (`n` &amp;gt; 1.0)&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>As the warning suggests, there&amp;rsquo;s one exception: &lt;code>ORDER BY&lt;/code> is still generated if a &lt;code>LIMIT&lt;/code> is present. Across databases, this tends to change which rows are returned, but not necessarily their order.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>lf&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span>
&lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>g&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span>
&lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>n &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/context.html'>n&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span>
&lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/arrange.html'>arrange&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/desc.html'>desc&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>n&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span>
&lt;span class='nf'>&lt;a href='https://rdrr.io/r/utils/head.html'>head&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>5&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span>
&lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/filter.html'>filter&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>n&lt;/span> &lt;span class='o'>&amp;gt;&lt;/span> &lt;span class='m'>1&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; &amp;lt;SQL&amp;gt;&lt;/span>
&lt;span class='c'>#&amp;gt; SELECT *&lt;/span>
&lt;span class='c'>#&amp;gt; FROM (SELECT `g`, COUNT(*) AS `n`&lt;/span>
&lt;span class='c'>#&amp;gt; FROM `df`&lt;/span>
&lt;span class='c'>#&amp;gt; GROUP BY `g`&lt;/span>
&lt;span class='c'>#&amp;gt; ORDER BY `n` DESC&lt;/span>
&lt;span class='c'>#&amp;gt; LIMIT 5) `q01`&lt;/span>
&lt;span class='c'>#&amp;gt; WHERE (`n` &amp;gt; 1.0)&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;/li>
&lt;li>
&lt;p>dbplyr includes built-in backends for Redshift (which only differs from PostgreSQL in a few places) and SAP HANA. These require the development versions of
&lt;a href="https://github.com/r-dbi/RPostgres" target="_blank" rel="noopener">RPostgres&lt;/a> and
&lt;a href="https://github.com/r-dbi/odbc" target="_blank" rel="noopener">odbc&lt;/a> respectively.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>lf&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://dbplyr.tidyverse.org/reference/tbl_lazy.html'>lazy_frame&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='s'>"a"&lt;/span>, y &lt;span class='o'>=&lt;/span> &lt;span class='s'>"b"&lt;/span>, con &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://dbplyr.tidyverse.org/reference/backend-redshift.html'>simulate_redshift&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>lf&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>z &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/paste.html'>paste0&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>x&lt;/span>, &lt;span class='nv'>y&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; &amp;lt;SQL&amp;gt;&lt;/span>
&lt;span class='c'>#&amp;gt; SELECT `x`, `y`, `x` || `y` AS `z`&lt;/span>
&lt;span class='c'>#&amp;gt; FROM `df`&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;/li>
&lt;/ul>
&lt;p>There are a number of minor changes that affect the translation of individual functions. Here are a few of the most important:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>All backends now translate
&lt;a href="https://dplyr.tidyverse.org/reference/context.html" target="_blank" rel="noopener">&lt;code>n()&lt;/code>&lt;/a> to &lt;code>count(*)&lt;/code> and support
&lt;a href="https://rdrr.io/r/base/ns-dblcolon.html" target="_blank" rel="noopener">&lt;code>::&lt;/code>&lt;/a>&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>lf&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://dbplyr.tidyverse.org/reference/tbl_lazy.html'>lazy_frame&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='m'>1&lt;/span>&lt;span class='o'>:&lt;/span>&lt;span class='m'>10&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>lf&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>n &lt;span class='o'>=&lt;/span> &lt;span class='nf'>dplyr&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/context.html'>n&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; &amp;lt;SQL&amp;gt;&lt;/span>
&lt;span class='c'>#&amp;gt; SELECT COUNT(*) AS `n`&lt;/span>
&lt;span class='c'>#&amp;gt; FROM `df`&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;/li>
&lt;li>
&lt;p>PostgreSQL gets translations for lubridate period functions:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>lf&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://dbplyr.tidyverse.org/reference/tbl_lazy.html'>lazy_frame&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/Sys.time.html'>Sys.Date&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>, con &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://dbplyr.tidyverse.org/reference/backend-postgres.html'>simulate_postgres&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>lf&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span>
&lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>year &lt;span class='o'>=&lt;/span> &lt;span class='nv'>x&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nf'>years&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>1&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; &amp;lt;SQL&amp;gt;&lt;/span>
&lt;span class='c'>#&amp;gt; SELECT `x`, `x` + CAST('1 years' AS INTERVAL) AS `year`&lt;/span>
&lt;span class='c'>#&amp;gt; FROM `df`&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;/li>
&lt;li>
&lt;p>Oracle assumes version 12c is available so we can use a simpler translation for
&lt;a href="https://rdrr.io/r/utils/head.html" target="_blank" rel="noopener">&lt;code>head()&lt;/code>&lt;/a> that works in more places:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>lf&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://dbplyr.tidyverse.org/reference/tbl_lazy.html'>lazy_frame&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='m'>1&lt;/span>, con &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://dbplyr.tidyverse.org/reference/backend-oracle.html'>simulate_oracle&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>lf&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/utils/head.html'>head&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>5&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; &amp;lt;SQL&amp;gt;&lt;/span>
&lt;span class='c'>#&amp;gt; SELECT *&lt;/span>
&lt;span class='c'>#&amp;gt; FROM (`df`) &lt;/span>
&lt;span class='c'>#&amp;gt; FETCH FIRST 5 ROWS ONLY&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;/li>
&lt;/ul>
&lt;h2 id="new-logo">New logo
&lt;a href="#new-logo">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Thanks to the artistic talents of
&lt;a href="https://www.allisonhorst.com" target="_blank" rel="noopener">Allison Horst&lt;/a>, dbplyr has a beautiful new logo:&lt;/p>
&lt;img src="dbplyr.png" width="250"/>
&lt;h2 id="extensibility">Extensibility
&lt;a href="#extensibility">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Finally, dbplyr introduces a number of new generics to help tease apart the currently overly complicated relationship with dplyr. This should make creating new backends much easier, but does require some changes from existing backends. These changes should be invisible to the end user and will play out slowly over the next 12 months. See
&lt;a href="https://dbplyr.tidyverse.org/articles/backend-2.html" target="_blank" rel="noopener">&lt;code>vignette(&amp;quot;backend-2&amp;quot;, package = &amp;quot;dbplyr&amp;quot;)&lt;/code>&lt;/a> for details.&lt;/p>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>A big thanks to everyone who helped with this release by reporting bugs, discussing issues, and contributing code:
&lt;a href="https://github.com/abalter" target="_blank" rel="noopener">@abalter&lt;/a>,
&lt;a href="https://github.com/adhi-r" target="_blank" rel="noopener">@adhi-r&lt;/a>,
&lt;a href="https://github.com/adithya604" target="_blank" rel="noopener">@adithya604&lt;/a>,
&lt;a href="https://github.com/admoseremic" target="_blank" rel="noopener">@admoseremic&lt;/a>,
&lt;a href="https://github.com/ahmed-alhindawi" target="_blank" rel="noopener">@ahmed-alhindawi&lt;/a>,
&lt;a href="https://github.com/alexfun" target="_blank" rel="noopener">@alexfun&lt;/a>,
&lt;a href="https://github.com/alexkyllo" target="_blank" rel="noopener">@alexkyllo&lt;/a>,
&lt;a href="https://github.com/alistaire47" target="_blank" rel="noopener">@alistaire47&lt;/a>,
&lt;a href="https://github.com/batpigandme" target="_blank" rel="noopener">@batpigandme&lt;/a>,
&lt;a href="https://github.com/BenCarlsen" target="_blank" rel="noopener">@BenCarlsen&lt;/a>,
&lt;a href="https://github.com/bengowan" target="_blank" rel="noopener">@bengowan&lt;/a>,
&lt;a href="https://github.com/bersbersbers" target="_blank" rel="noopener">@bersbersbers&lt;/a>,
&lt;a href="https://github.com/bertrandh" target="_blank" rel="noopener">@bertrandh&lt;/a>,
&lt;a href="https://github.com/bkkkk" target="_blank" rel="noopener">@bkkkk&lt;/a>,
&lt;a href="https://github.com/boshek" target="_blank" rel="noopener">@boshek&lt;/a>,
&lt;a href="https://github.com/bradenkinard" target="_blank" rel="noopener">@bradenkinard&lt;/a>,
&lt;a href="https://github.com/cderv" target="_blank" rel="noopener">@cderv&lt;/a>,
&lt;a href="https://github.com/CerebralMastication" target="_blank" rel="noopener">@CerebralMastication&lt;/a>,
&lt;a href="https://github.com/chris-billingham" target="_blank" rel="noopener">@chris-billingham&lt;/a>,
&lt;a href="https://github.com/cmichaud92" target="_blank" rel="noopener">@cmichaud92&lt;/a>,
&lt;a href="https://github.com/cole-johanson" target="_blank" rel="noopener">@cole-johanson&lt;/a>,
&lt;a href="https://github.com/copernican" target="_blank" rel="noopener">@copernican&lt;/a>,
&lt;a href="https://github.com/daattali" target="_blank" rel="noopener">@daattali&lt;/a>,
&lt;a href="https://github.com/Daveyr" target="_blank" rel="noopener">@Daveyr&lt;/a>,
&lt;a href="https://github.com/davidchall" target="_blank" rel="noopener">@davidchall&lt;/a>,
&lt;a href="https://github.com/DavidPatShuiFong" target="_blank" rel="noopener">@DavidPatShuiFong&lt;/a>,
&lt;a href="https://github.com/dereksonderegger" target="_blank" rel="noopener">@dereksonderegger&lt;/a>,
&lt;a href="https://github.com/dfrankow" target="_blank" rel="noopener">@dfrankow&lt;/a>,
&lt;a href="https://github.com/dkulp2" target="_blank" rel="noopener">@dkulp2&lt;/a>,
&lt;a href="https://github.com/dpprdan" target="_blank" rel="noopener">@dpprdan&lt;/a>,
&lt;a href="https://github.com/dsen6644" target="_blank" rel="noopener">@dsen6644&lt;/a>,
&lt;a href="https://github.com/DSLituiev" target="_blank" rel="noopener">@DSLituiev&lt;/a>,
&lt;a href="https://github.com/EarlGlynn" target="_blank" rel="noopener">@EarlGlynn&lt;/a>,
&lt;a href="https://github.com/edgararuiz" target="_blank" rel="noopener">@edgararuiz&lt;/a>,
&lt;a href="https://github.com/edoardomichielon" target="_blank" rel="noopener">@edoardomichielon&lt;/a>,
&lt;a href="https://github.com/elbamos" target="_blank" rel="noopener">@elbamos&lt;/a>,
&lt;a href="https://github.com/ericemc3" target="_blank" rel="noopener">@ericemc3&lt;/a>,
&lt;a href="https://github.com/fahadshery" target="_blank" rel="noopener">@fahadshery&lt;/a>,
&lt;a href="https://github.com/fh-jgutman" target="_blank" rel="noopener">@fh-jgutman&lt;/a>,
&lt;a href="https://github.com/ftoresh" target="_blank" rel="noopener">@ftoresh&lt;/a>,
&lt;a href="https://github.com/GrayAlex49" target="_blank" rel="noopener">@GrayAlex49&lt;/a>,
&lt;a href="https://github.com/gregleleu" target="_blank" rel="noopener">@gregleleu&lt;/a>,
&lt;a href="https://github.com/hadley" target="_blank" rel="noopener">@hadley&lt;/a>,
&lt;a href="https://github.com/halpo" target="_blank" rel="noopener">@halpo&lt;/a>,
&lt;a href="https://github.com/hannes101" target="_blank" rel="noopener">@hannes101&lt;/a>,
&lt;a href="https://github.com/hansvancalster" target="_blank" rel="noopener">@hansvancalster&lt;/a>,
&lt;a href="https://github.com/hrbrmstr" target="_blank" rel="noopener">@hrbrmstr&lt;/a>,
&lt;a href="https://github.com/huelf" target="_blank" rel="noopener">@huelf&lt;/a>,
&lt;a href="https://github.com/iangow" target="_blank" rel="noopener">@iangow&lt;/a>,
&lt;a href="https://github.com/ianmcook" target="_blank" rel="noopener">@ianmcook&lt;/a>,
&lt;a href="https://github.com/jakeybob" target="_blank" rel="noopener">@jakeybob&lt;/a>,
&lt;a href="https://github.com/Janlow" target="_blank" rel="noopener">@Janlow&lt;/a>,
&lt;a href="https://github.com/jarodmeng" target="_blank" rel="noopener">@jarodmeng&lt;/a>,
&lt;a href="https://github.com/javierluraschi" target="_blank" rel="noopener">@javierluraschi&lt;/a>,
&lt;a href="https://github.com/jerisalan" target="_blank" rel="noopener">@jerisalan&lt;/a>,
&lt;a href="https://github.com/jessekps" target="_blank" rel="noopener">@jessekps&lt;/a>,
&lt;a href="https://github.com/jimhester" target="_blank" rel="noopener">@jimhester&lt;/a>,
&lt;a href="https://github.com/jkylearmstrong" target="_blank" rel="noopener">@jkylearmstrong&lt;/a>,
&lt;a href="https://github.com/jmerone" target="_blank" rel="noopener">@jmerone&lt;/a>,
&lt;a href="https://github.com/jonkeane" target="_blank" rel="noopener">@jonkeane&lt;/a>,
&lt;a href="https://github.com/kmishra9" target="_blank" rel="noopener">@kmishra9&lt;/a>,
&lt;a href="https://github.com/kohleth" target="_blank" rel="noopener">@kohleth&lt;/a>,
&lt;a href="https://github.com/kondofersky" target="_blank" rel="noopener">@kondofersky&lt;/a>,
&lt;a href="https://github.com/krlmlr" target="_blank" rel="noopener">@krlmlr&lt;/a>,
&lt;a href="https://github.com/lionel-" target="_blank" rel="noopener">@lionel-&lt;/a>,
&lt;a href="https://github.com/lorenzwalthert" target="_blank" rel="noopener">@lorenzwalthert&lt;/a>,
&lt;a href="https://github.com/LukasWallrich" target="_blank" rel="noopener">@LukasWallrich&lt;/a>,
&lt;a href="https://github.com/lukerobert" target="_blank" rel="noopener">@lukerobert&lt;/a>,
&lt;a href="https://github.com/lymanmark" target="_blank" rel="noopener">@lymanmark&lt;/a>,
&lt;a href="https://github.com/machow" target="_blank" rel="noopener">@machow&lt;/a>,
&lt;a href="https://github.com/martin-a-wade" target="_blank" rel="noopener">@martin-a-wade&lt;/a>,
&lt;a href="https://github.com/mgirlich" target="_blank" rel="noopener">@mgirlich&lt;/a>,
&lt;a href="https://github.com/MikeJohnPage" target="_blank" rel="noopener">@MikeJohnPage&lt;/a>,
&lt;a href="https://github.com/millerh1" target="_blank" rel="noopener">@millerh1&lt;/a>,
&lt;a href="https://github.com/mkirzon" target="_blank" rel="noopener">@mkirzon&lt;/a>,
&lt;a href="https://github.com/moodymudskipper" target="_blank" rel="noopener">@moodymudskipper&lt;/a>,
&lt;a href="https://github.com/mskyttner" target="_blank" rel="noopener">@mskyttner&lt;/a>,
&lt;a href="https://github.com/Naareman" target="_blank" rel="noopener">@Naareman&lt;/a>,
&lt;a href="https://github.com/natbprice" target="_blank" rel="noopener">@natbprice&lt;/a>,
&lt;a href="https://github.com/okhoma" target="_blank" rel="noopener">@okhoma&lt;/a>,
&lt;a href="https://github.com/OssiLehtinen" target="_blank" rel="noopener">@OssiLehtinen&lt;/a>,
&lt;a href="https://github.com/PauloJhonny" target="_blank" rel="noopener">@PauloJhonny&lt;/a>,
&lt;a href="https://github.com/r2evans" target="_blank" rel="noopener">@r2evans&lt;/a>,
&lt;a href="https://github.com/ramnathv" target="_blank" rel="noopener">@ramnathv&lt;/a>,
&lt;a href="https://github.com/returnString" target="_blank" rel="noopener">@returnString&lt;/a>,
&lt;a href="https://github.com/rjpat" target="_blank" rel="noopener">@rjpat&lt;/a>,
&lt;a href="https://github.com/rlh1994" target="_blank" rel="noopener">@rlh1994&lt;/a>,
&lt;a href="https://github.com/robchallen" target="_blank" rel="noopener">@robchallen&lt;/a>,
&lt;a href="https://github.com/roboton" target="_blank" rel="noopener">@roboton&lt;/a>,
&lt;a href="https://github.com/romainfrancois" target="_blank" rel="noopener">@romainfrancois&lt;/a>,
&lt;a href="https://github.com/rundel" target="_blank" rel="noopener">@rundel&lt;/a>,
&lt;a href="https://github.com/saadaslam" target="_blank" rel="noopener">@saadaslam&lt;/a>,
&lt;a href="https://github.com/samssann" target="_blank" rel="noopener">@samssann&lt;/a>,
&lt;a href="https://github.com/samstiyer" target="_blank" rel="noopener">@samstiyer&lt;/a>,
&lt;a href="https://github.com/schradj" target="_blank" rel="noopener">@schradj&lt;/a>,
&lt;a href="https://github.com/sheepworrier" target="_blank" rel="noopener">@sheepworrier&lt;/a>,
&lt;a href="https://github.com/shosaco" target="_blank" rel="noopener">@shosaco&lt;/a>,
&lt;a href="https://github.com/shyams80" target="_blank" rel="noopener">@shyams80&lt;/a>,
&lt;a href="https://github.com/stiberger" target="_blank" rel="noopener">@stiberger&lt;/a>,
&lt;a href="https://github.com/stvrd" target="_blank" rel="noopener">@stvrd&lt;/a>,
&lt;a href="https://github.com/tarunn90" target="_blank" rel="noopener">@tarunn90&lt;/a>,
&lt;a href="https://github.com/tedmoorman" target="_blank" rel="noopener">@tedmoorman&lt;/a>,
&lt;a href="https://github.com/tgvaughan" target="_blank" rel="noopener">@tgvaughan&lt;/a>,
&lt;a href="https://github.com/tonyk7440" target="_blank" rel="noopener">@tonyk7440&lt;/a>,
&lt;a href="https://github.com/trevorcampbell" target="_blank" rel="noopener">@trevorcampbell&lt;/a>,
&lt;a href="https://github.com/TuomoNieminen" target="_blank" rel="noopener">@TuomoNieminen&lt;/a>,
&lt;a href="https://github.com/tvedebrink" target="_blank" rel="noopener">@tvedebrink&lt;/a>,
&lt;a href="https://github.com/vadimus202" target="_blank" rel="noopener">@vadimus202&lt;/a>,
&lt;a href="https://github.com/vnijs" target="_blank" rel="noopener">@vnijs&lt;/a>,
&lt;a href="https://github.com/wangyuchen" target="_blank" rel="noopener">@wangyuchen&lt;/a>,
&lt;a href="https://github.com/yitao-li" target="_blank" rel="noopener">@yitao-li&lt;/a>, and
&lt;a href="https://github.com/ZahraEconomist" target="_blank" rel="noopener">@ZahraEconomist&lt;/a>.&lt;/p></description></item><item><title>dbplyr 1.4.0</title><link>https://www.tidyverse.org/blog/2019/04/dbplyr-1-4-0/</link><pubDate>Tue, 30 Apr 2019 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2019/04/dbplyr-1-4-0/</guid><description>&lt;p>We&amp;rsquo;re stoked to announce the release of
&lt;a href="https://dbplyr.tidyverse.org" target="_blank" rel="noopener">dbplyr 1.4.0&lt;/a>, the database backend for dplyr that translates R code into SQL. dbplyr allows you to use a remote database as if it was a collection of local data frames: you write ordinary dplyr code and dbplyr turns it into SQL for you.&lt;/p>
&lt;p>You can install the released version from CRAN:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">install.packages&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;dbplyr&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>While there are many small improvements and bug fixes (see the full full details in the
&lt;a href="https://dbplyr.tidyverse.org/news/index.html" target="_blank" rel="noopener">changelog&lt;/a>), the biggest improvements in this release are related to SQL generation. In this blog post, I&amp;rsquo;ll show you how find out what dplyr is doing behind the scenes, discuss some major simplifications to the SQL that dbplyr generates, and then show off a few of the new function translations.&lt;/p>
&lt;p>To get started, I&amp;rsquo;ll load dplyr and dbplyr:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dplyr&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dbplyr&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;h2 id="sql-simulation">SQL simulation
&lt;a href="#sql-simulation">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>This version of dbplyr substantially improves the tools that allow you to see what SQL dbplyr generates without needing to connect to a live database. You won&amp;rsquo;t generally need these tools for real data, but they&amp;rsquo;re very useful for blog posts (like this one!), for generating reprexes (as discussed in the new
&lt;a href="https://dbplyr.tidyverse.org/articles/reprex.html" target="_blank" rel="noopener">&lt;code>vignette(&amp;quot;reprex&amp;quot;)&lt;/code>&lt;/a>), and for dbplyr&amp;rsquo;s internal tests.&lt;/p>
&lt;p>The basic idea is that you can create a &amp;ldquo;lazy&amp;rdquo; frame:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">df1&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">lazy_frame&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="m">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">3&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>I call this tibble lazy because dplyr operations don&amp;rsquo;t do any work; instead they just record the action so it can later be turned in to a SQL query. You can see this query by printing the lazy tibble:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">df1&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;SQL&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; SELECT *&lt;/span>
&lt;span class="c1">#&amp;gt; FROM `df`&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>This is most useful when you add on a few steps:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">df1&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_by&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">summarise&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">z&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">mean&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;SQL&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; Warning: Missing values are always removed in SQL.&lt;/span>
&lt;span class="c1">#&amp;gt; Use `mean(x, na.rm = TRUE)` to silence this warning&lt;/span>
&lt;span class="c1">#&amp;gt; This warning is displayed only once per session.&lt;/span>
&lt;span class="c1">#&amp;gt; SELECT `x`, AVG(`y`) AS `z`&lt;/span>
&lt;span class="c1">#&amp;gt; FROM `df`&lt;/span>
&lt;span class="c1">#&amp;gt; GROUP BY `x`&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>(This example also highlights another small improvement to dbplyr: it&amp;rsquo;ll only warn you about missing values being automatically removed in the database once per session.)&lt;/p>
&lt;p>Importantly, &lt;code>lazy_frame()&lt;/code> has a &lt;code>con&lt;/code> argument that allows you to specify which database should be used for the translation. This makes it easier to see the differences in SQL generation between databases:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">df1&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">mutate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">z&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">paste&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;item:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">head&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">5&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;SQL&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; SELECT `x`, `y`, CONCAT_WS(&amp;#39; &amp;#39;, &amp;#39;item:&amp;#39;, `x`) AS `z`&lt;/span>
&lt;span class="c1">#&amp;gt; FROM `df`&lt;/span>
&lt;span class="c1">#&amp;gt; LIMIT 5&lt;/span>
&lt;span class="n">df2&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">lazy_frame&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">con&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">simulate_mssql&lt;/span>&lt;span class="p">())&lt;/span>
&lt;span class="n">df2&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">mutate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">z&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">paste&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;item:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">head&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">5&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;SQL&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; SELECT TOP(5) `x`, `y`, &amp;#39;item:&amp;#39; + &amp;#39; &amp;#39; + `x` AS `z`&lt;/span>
&lt;span class="c1">#&amp;gt; FROM `df`&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>When you don&amp;rsquo;t specify a connection, dplyr uses its standard translation, which tries to follow the ANSI SQL standard as closely as possible.&lt;/p>
&lt;h2 id="simpler-sql">Simpler SQL
&lt;a href="#simpler-sql">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Two improvements have considerably reduced the number of subqueries that dbplyr needs:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Joins, semi joins, and set operations no longer add additional unneeded
subqueries, and now generate the minimum set:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">df1&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">lazy_frame&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">df2&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">lazy_frame&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">b&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">union&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">df2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;SQL&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; (SELECT `x`, `y`, `a`, NULL AS `b`&lt;/span>
&lt;span class="c1">#&amp;gt; FROM `df`)&lt;/span>
&lt;span class="c1">#&amp;gt; UNION&lt;/span>
&lt;span class="c1">#&amp;gt; (SELECT `x`, `y`, NULL AS `a`, `b`&lt;/span>
&lt;span class="c1">#&amp;gt; FROM `df`)&lt;/span>
&lt;span class="nf">left_join&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">df2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">by&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;x&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;y&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;SQL&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; SELECT `LHS`.`x` AS `x`, `LHS`.`y` AS `y`, `LHS`.`a` AS `a`, `RHS`.`b` AS `b`&lt;/span>
&lt;span class="c1">#&amp;gt; FROM `df` AS `LHS`&lt;/span>
&lt;span class="c1">#&amp;gt; LEFT JOIN `df` AS `RHS`&lt;/span>
&lt;span class="c1">#&amp;gt; ON (`LHS`.`x` = `RHS`.`x` AND `LHS`.`y` = `RHS`.`y`)&lt;/span>
&lt;span class="nf">semi_join&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">df2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">by&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;x&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;y&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;SQL&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; SELECT * FROM `df` AS `LHS`&lt;/span>
&lt;span class="c1">#&amp;gt; WHERE EXISTS (&lt;/span>
&lt;span class="c1">#&amp;gt; SELECT 1 FROM `df` AS `RHS`&lt;/span>
&lt;span class="c1">#&amp;gt; WHERE (`LHS`.`x` = `RHS`.`x` AND `LHS`.`y` = `RHS`.`y`)&lt;/span>
&lt;span class="c1">#&amp;gt; )&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Many sequences of &lt;code>mutate()&lt;/code>, &lt;code>select()&lt;/code>, &lt;code>rename()&lt;/code>, and &lt;code>transmute()&lt;/code>
steps are collapsed into a single query:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">df&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">lazy_frame&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">df&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">select&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">2&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">select&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">2&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">select&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">2&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">select&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">2&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">mutate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">z&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">x&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">select&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">3&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;SQL&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; SELECT `x` + `y` AS `z`, `y`, `x`&lt;/span>
&lt;span class="c1">#&amp;gt; FROM `df`&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;p>Note that dbplyr will still generate multiple subqueries from a single mutate statement when needed. This resolves one of my biggest frustrations with SQL:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">df&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">mutate&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="n">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">x&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">b1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="m">3&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">b2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">^&lt;/span> &lt;span class="m">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">c&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">b1&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="n">b2&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;SQL&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; SELECT `x`, `y`, `a`, `b1`, `b2`, `b1` / `b2` AS `c`&lt;/span>
&lt;span class="c1">#&amp;gt; FROM (SELECT `x`, `y`, `a`, `a` * 3.0 AS `b1`, POWER(`a`, 2.0) AS `b2`&lt;/span>
&lt;span class="c1">#&amp;gt; FROM (SELECT `x`, `y`, `x` + 1.0 AS `a`&lt;/span>
&lt;span class="c1">#&amp;gt; FROM `df`) `dbplyr_001`) `dbplyr_002`&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>I touch on this advantage of dbplyr over SQL in a new vignette,
&lt;a href="https://dbplyr.tidyverse.org/dev/articles/sql.html" target="_blank" rel="noopener">&lt;code>vignette(&amp;quot;sql&amp;quot;)&lt;/code>&lt;/a>, which also gives some advice about how to write literal SQL, when dbplyr&amp;rsquo;s built-in translations don&amp;rsquo;t work.&lt;/p>
&lt;h2 id="sql-translation">SQL translation
&lt;a href="#sql-translation">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>As well as improving the translation of high-level dplyr functions, we&amp;rsquo;ve also considerably added to the set of low-level vector functions that dbplyr can translate. Firstly,
&lt;a href="https://dev.mysql.com/doc/refman/8.0/en/window-functions.html" target="_blank" rel="noopener">MySQL&lt;/a> (&amp;gt;= 8.0),
&lt;a href="https://mariadb.com/kb/en/library/window-functions/" target="_blank" rel="noopener">MariaDB&lt;/a> (&amp;gt;= 10.2) and
&lt;a href="https://www.sqlite.org/windowfunctions.html" target="_blank" rel="noopener">SQLite&lt;/a> (&amp;gt;3.25) gain support for
&lt;a href="https://dbplyr.tidyverse.org/dev/articles/translation-function.html#window-functions" target="_blank" rel="noopener">window functions&lt;/a>. These allow you to use summary functions (like &lt;code>mean()&lt;/code> or &lt;code>sum()&lt;/code>) inside of &lt;code>mutate()&lt;/code>, as well as unlocking useful function like &lt;code>min_rank()&lt;/code>, &lt;code>first()&lt;/code>, and &lt;code>lead()&lt;/code>/&lt;code>lag()&lt;/code>.&lt;/p>
&lt;p>Thanks to
&lt;a href="http://github.com/colearendt" target="_blank" rel="noopener">Cole Arendt&lt;/a>, dbplyr now supports translations for a selection of useful functions from stringr (&lt;code>str_c()&lt;/code>, &lt;code>str_sub()&lt;/code>, &lt;code>str_length()&lt;/code>, &lt;code>str_to_upper()&lt;/code>, &lt;code>str_to_lower()&lt;/code>, and &lt;code>str_to_title()&lt;/code>), and lubridate ( &lt;code>today()&lt;/code>, &lt;code>now()&lt;/code>, &lt;code>year()&lt;/code>, &lt;code>month()&lt;/code> (numeric value only), &lt;code>day()&lt;/code>, &lt;code>hour()&lt;/code>, &lt;code>minute()&lt;/code>, &lt;code>second()&lt;/code>):&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">df&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">lazy_frame&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">character&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="n">birthday&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">character&lt;/span>&lt;span class="p">())&lt;/span>
&lt;span class="n">df&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">transmute&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">str_to_lower&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="n">month&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">month&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">birthday&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="n">mday&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">mday&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">birthday&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;SQL&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; SELECT LOWER(`name`) AS `name`, EXTRACT(month FROM `birthday`) AS `month`, EXTRACT(day FROM `birthday`) AS `mday`&lt;/span>
&lt;span class="c1">#&amp;gt; FROM `df`&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Thanks to
&lt;a href="http://github.com/davidchall" target="_blank" rel="noopener">David C Hall&lt;/a> we have translations for bitwise operations (&lt;code>bitwNot()&lt;/code>, &lt;code>bitwAnd()&lt;/code>, &lt;code>bitwOr()&lt;/code>, &lt;code>bitwXor()&lt;/code>, &lt;code>bitwShiftL()&lt;/code>, and &lt;code>bitwShiftR()&lt;/code>):&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">df&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">lazy_frame&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">integer&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">integer&lt;/span>&lt;span class="p">())&lt;/span>
&lt;span class="n">df&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">transmute&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">and&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">bitwAnd&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">or&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">bitwOr&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;SQL&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; SELECT `x` &amp;amp; `y` AS `and`, `x` | `y` AS `or`&lt;/span>
&lt;span class="c1">#&amp;gt; FROM `df`&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Thanks to
&lt;a href="http://github.com/edavidaja" target="_blank" rel="noopener">E. David Aja&lt;/a>&amp;lsquo;s research on tidyverse developer day we have improved translations for &lt;code>median()&lt;/code> and &lt;code>quantile()&lt;/code> for all ANSI compliant databases (SQL Server, Postgres, MariaDB), along with custom translations for Hive and Teradata.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">lazy_frame&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">g&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">character&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">numeric&lt;/span>&lt;span class="p">())&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_by&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">g&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">summarise&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">median&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;SQL&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; SELECT `g`, PERCENTILE_CONT(0.5) WITHIN GROUP (ORDER BY `x`) AS `y`&lt;/span>
&lt;span class="c1">#&amp;gt; FROM `df`&lt;/span>
&lt;span class="c1">#&amp;gt; GROUP BY `g`&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Finally, I have improved translation of &lt;code>[&lt;/code>, so that you can use expressions like &lt;code>sum(a[b == 0])&lt;/code> as you would in R:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">tbl_lazy&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mtcars&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_by&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cyl&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">summarise&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mpg_vs&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">sum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mpg[vs&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="n">]&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">na.rm&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">TRUE&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;SQL&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; SELECT `cyl`, SUM(CASE WHEN (`vs` = 1.0) THEN (`mpg`) END) AS `mpg_vs`&lt;/span>
&lt;span class="c1">#&amp;gt; FROM `df`&lt;/span>
&lt;span class="c1">#&amp;gt; GROUP BY `cyl`&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>You can also now use use &lt;code>x$y&lt;/code> to access nested fields:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">lazy_frame&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">list&lt;/span>&lt;span class="p">())&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">mutate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">z&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="n">z&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;SQL&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; SELECT `x`, `x`.`y`.`z` AS `z`&lt;/span>
&lt;span class="c1">#&amp;gt; FROM `df`&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>As always, a big thank goes to the entire community who helped make this release of dbplyr a reality - I really appreciated all your bug reports, helpful comments, SQL suggestions, and pull requests!&lt;/p>
&lt;p>
&lt;a href="https://github.com/alex-gable" target="_blank" rel="noopener">@alex-gable&lt;/a>,
&lt;a href="https://github.com/blairj09" target="_blank" rel="noopener">@blairj09&lt;/a>,
&lt;a href="https://github.com/carvalhomb" target="_blank" rel="noopener">@carvalhomb&lt;/a>,
&lt;a href="https://github.com/cderv" target="_blank" rel="noopener">@cderv&lt;/a>,
&lt;a href="https://github.com/colearendt" target="_blank" rel="noopener">@colearendt&lt;/a>,
&lt;a href="https://github.com/DanielStay" target="_blank" rel="noopener">@DanielStay&lt;/a>,
&lt;a href="https://github.com/davidchall" target="_blank" rel="noopener">@davidchall&lt;/a>,
&lt;a href="https://github.com/dlindelof" target="_blank" rel="noopener">@dlindelof&lt;/a>,
&lt;a href="https://github.com/edgararuiz" target="_blank" rel="noopener">@edgararuiz&lt;/a>,
&lt;a href="https://github.com/FrancoisGuillem" target="_blank" rel="noopener">@FrancoisGuillem&lt;/a>,
&lt;a href="https://github.com/FranGoitia" target="_blank" rel="noopener">@FranGoitia&lt;/a>,
&lt;a href="https://github.com/hadley" target="_blank" rel="noopener">@hadley&lt;/a>,
&lt;a href="https://github.com/imanuelcostigan" target="_blank" rel="noopener">@imanuelcostigan&lt;/a>,
&lt;a href="https://github.com/JakeRuss" target="_blank" rel="noopener">@JakeRuss&lt;/a>,
&lt;a href="https://github.com/javierluraschi" target="_blank" rel="noopener">@javierluraschi&lt;/a>,
&lt;a href="https://github.com/jcfisher" target="_blank" rel="noopener">@jcfisher&lt;/a>,
&lt;a href="https://github.com/jkylearmstrong" target="_blank" rel="noopener">@jkylearmstrong&lt;/a>,
&lt;a href="https://github.com/JohnMount" target="_blank" rel="noopener">@JohnMount&lt;/a>,
&lt;a href="https://github.com/jrisi256" target="_blank" rel="noopener">@jrisi256&lt;/a>,
&lt;a href="https://github.com/jsekamane" target="_blank" rel="noopener">@jsekamane&lt;/a>,
&lt;a href="https://github.com/klmedeiros" target="_blank" rel="noopener">@klmedeiros&lt;/a>,
&lt;a href="https://github.com/leungi" target="_blank" rel="noopener">@leungi&lt;/a>,
&lt;a href="https://github.com/Liubuntu" target="_blank" rel="noopener">@Liubuntu&lt;/a>,
&lt;a href="https://github.com/lpatruno" target="_blank" rel="noopener">@lpatruno&lt;/a>,
&lt;a href="https://github.com/lymanmark" target="_blank" rel="noopener">@lymanmark&lt;/a>,
&lt;a href="https://github.com/mkearney" target="_blank" rel="noopener">@mkearney&lt;/a>,
&lt;a href="https://github.com/mkirzon" target="_blank" rel="noopener">@mkirzon&lt;/a>,
&lt;a href="https://github.com/mpettis" target="_blank" rel="noopener">@mpettis&lt;/a>,
&lt;a href="https://github.com/mtoto" target="_blank" rel="noopener">@mtoto&lt;/a>,
&lt;a href="https://github.com/N1h1l1sT" target="_blank" rel="noopener">@N1h1l1sT&lt;/a>,
&lt;a href="https://github.com/nwstephens" target="_blank" rel="noopener">@nwstephens&lt;/a>,
&lt;a href="https://github.com/QuLogic" target="_blank" rel="noopener">@QuLogic&lt;/a>,
&lt;a href="https://github.com/r2evans" target="_blank" rel="noopener">@r2evans&lt;/a>,
&lt;a href="https://github.com/rlh1994" target="_blank" rel="noopener">@rlh1994&lt;/a>,
&lt;a href="https://github.com/shgoke" target="_blank" rel="noopener">@shgoke&lt;/a>,
&lt;a href="https://github.com/tomauer" target="_blank" rel="noopener">@tomauer&lt;/a>, and
&lt;a href="https://github.com/verajosemanuel" target="_blank" rel="noopener">@verajosemanuel&lt;/a>&lt;/p></description></item><item><title>bigrquery 1.1.0</title><link>https://www.tidyverse.org/blog/2019/02/bigrquery-1-1-0/</link><pubDate>Fri, 15 Feb 2019 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2019/02/bigrquery-1-1-0/</guid><description>&lt;p>We&amp;rsquo;re delighted to announce that
&lt;a href="https://bigrquery.r-dbi.org/" target="_blank" rel="noopener">bigrquery&lt;/a> 1.1.0 is now on CRAN. bigrquery makes it easy to work with data stored in
&lt;a href="https://developers.google.com/bigquery/" target="_blank" rel="noopener">Google BigQuery&lt;/a>, a hosted database for big data. This is a minor release, with some improved type support, and SQL translation. For a complete list of updates, please see the
&lt;a href="https://bigrquery.r-dbi.org/news/index.html#bigrquery-1-1-0" target="_blank" rel="noopener">Changelog&lt;/a>.&lt;/p>
&lt;h2 id="improved-type-support">Improved type support
&lt;a href="#improved-type-support">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>
&lt;a href="https://bigrquery.r-dbi.org/reference/bq_table_download.html" target="_blank" rel="noopener">&lt;code>bq_table_download()&lt;/code>&lt;/a> and the
&lt;a href="https://www.rdocumentation.org/packages/DBI/versions/0.5-1/topics/dbConnect" target="_blank" rel="noopener">&lt;code>DBI::dbConnect&lt;/code>&lt;/a> method now have a &lt;code>bigint&lt;/code> argument, which governs how BigQuery integer columns are imported into R. As before, the default will be &lt;code>bigint = &amp;quot;integer&amp;quot;&lt;/code>. However, you can now set &lt;code>bigint = &amp;quot;integer64&amp;quot;&lt;/code> to import BigQuery integer columns as &lt;code>bit64::integer64&lt;/code> columns in R. This allows for values outside the range of integer (&lt;code>-2147483647&lt;/code> to &lt;code>2147483647&lt;/code>). Thanks to
&lt;a href="https://github.com/rasmusab" target="_blank" rel="noopener">Rasmus Bååth&lt;/a> for implementing these changes.&lt;/p>
&lt;p>&lt;code>bq_table_download()&lt;/code> now treats &lt;code>NUMERIC&lt;/code> columns in the same way as &lt;code>FLOAT&lt;/code> columns.&lt;/p>
&lt;p>&lt;code>bq_table_upload()&lt;/code> now works with date-time (&lt;code>POSIXct&lt;/code>) variables. Unparseable date times return &lt;code>NA&lt;/code>.&lt;/p>
&lt;h2 id="sql-translation">SQL translation
&lt;a href="#sql-translation">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;ul>
&lt;li>&lt;code>as.character()&lt;/code> now translates to &lt;code>SAFE_CAST(x AS STRING)&lt;/code>.&lt;/li>
&lt;li>&lt;code>median()&lt;/code> now translates to &lt;code>APPROX_QUANTILES(x, 2)[SAFE_ORDINAL(2)]&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h2 id="minor-fixes">Minor fixes
&lt;a href="#minor-fixes">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;ul>
&lt;li>
&lt;a href="https://bigrquery.r-dbi.org/reference/bq_refs.html" target="_blank" rel="noopener">&lt;code>bq_job()&lt;/code>&lt;/a> tracks location, so bigrquery now works painlessly with non-US/EU locations.&lt;/li>
&lt;/ul>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Thank you to everyone who contributed to this release:
&lt;a href="https://github.com/414theodore" target="_blank" rel="noopener">@414theodore&lt;/a>,
&lt;a href="https://github.com/ajh3000" target="_blank" rel="noopener">@ajh3000&lt;/a>,
&lt;a href="https://github.com/AlekseyBuzmakov" target="_blank" rel="noopener">@AlekseyBuzmakov&lt;/a>,
&lt;a href="https://github.com/batpigandme" target="_blank" rel="noopener">@batpigandme&lt;/a>,
&lt;a href="https://github.com/byapparov" target="_blank" rel="noopener">@byapparov&lt;/a>,
&lt;a href="https://github.com/ChrisJohnsonUMG" target="_blank" rel="noopener">@ChrisJohnsonUMG&lt;/a>,
&lt;a href="https://github.com/cpcgoogle" target="_blank" rel="noopener">@cpcgoogle&lt;/a>,
&lt;a href="https://github.com/dujm" target="_blank" rel="noopener">@dujm&lt;/a>,
&lt;a href="https://github.com/eddelbuettel" target="_blank" rel="noopener">@eddelbuettel&lt;/a>,
&lt;a href="https://github.com/edgararuiz" target="_blank" rel="noopener">@edgararuiz&lt;/a>,
&lt;a href="https://github.com/everron" target="_blank" rel="noopener">@everron&lt;/a>,
&lt;a href="https://github.com/guillaumed90" target="_blank" rel="noopener">@guillaumed90&lt;/a>,
&lt;a href="https://github.com/hadley" target="_blank" rel="noopener">@hadley&lt;/a>,
&lt;a href="https://github.com/Iuiu1234" target="_blank" rel="noopener">@Iuiu1234&lt;/a>,
&lt;a href="https://github.com/izzetagoren" target="_blank" rel="noopener">@izzetagoren&lt;/a>,
&lt;a href="https://github.com/j450h1" target="_blank" rel="noopener">@j450h1&lt;/a>,
&lt;a href="https://github.com/jberninger" target="_blank" rel="noopener">@jberninger&lt;/a>,
&lt;a href="https://github.com/jordanwebb10" target="_blank" rel="noopener">@jordanwebb10&lt;/a>,
&lt;a href="https://github.com/jrecasens" target="_blank" rel="noopener">@jrecasens&lt;/a>,
&lt;a href="https://github.com/KarimZaoui" target="_blank" rel="noopener">@KarimZaoui&lt;/a>,
&lt;a href="https://github.com/ldanai" target="_blank" rel="noopener">@ldanai&lt;/a>,
&lt;a href="https://github.com/paulsendavidjay" target="_blank" rel="noopener">@paulsendavidjay&lt;/a>,
&lt;a href="https://github.com/ras44" target="_blank" rel="noopener">@ras44&lt;/a>,
&lt;a href="https://github.com/rasmusab" target="_blank" rel="noopener">@rasmusab&lt;/a>,
&lt;a href="https://github.com/Saikri5hna" target="_blank" rel="noopener">@Saikri5hna&lt;/a>,
&lt;a href="https://github.com/selcukakbas" target="_blank" rel="noopener">@selcukakbas&lt;/a>,
&lt;a href="https://github.com/SergeiMakarovWeb" target="_blank" rel="noopener">@SergeiMakarovWeb&lt;/a>,
&lt;a href="https://github.com/skydavis435" target="_blank" rel="noopener">@skydavis435&lt;/a>,
&lt;a href="https://github.com/tdsmith" target="_blank" rel="noopener">@tdsmith&lt;/a>,
&lt;a href="https://github.com/tinoater" target="_blank" rel="noopener">@tinoater&lt;/a>,
&lt;a href="https://github.com/tortorellij1" target="_blank" rel="noopener">@tortorellij1&lt;/a>,
&lt;a href="https://github.com/valentinumbach" target="_blank" rel="noopener">@valentinumbach&lt;/a>, and
&lt;a href="https://github.com/zacdav" target="_blank" rel="noopener">@zacdav&lt;/a>.&lt;/p></description></item><item><title>dbplyr 1.3.0</title><link>https://www.tidyverse.org/blog/2019/01/dbplyr-1-3-0/</link><pubDate>Wed, 09 Jan 2019 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2019/01/dbplyr-1-3-0/</guid><description>&lt;p>We&amp;rsquo;re stoked to announce that
&lt;a href="https://dbplyr.tidyverse.org" target="_blank" rel="noopener">dbplyr&lt;/a> 1.3.0 is now available on CRAN. dbplyr is the database backend for dplyr, translating dplyr syntax into SQL. This is a minor release primarily for compatibility with dplyr 0.8.0. However, there have been some changes to the API, and minor improvements (the full details of which can be found in the
&lt;a href="https://dbplyr.tidyverse.org/news/index.html" target="_blank" rel="noopener">changelog&lt;/a>). A more substantive update can be expected after rstudio::conf.&lt;/p>
&lt;h2 id="api-changes">API changes
&lt;a href="#api-changes">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;ul>
&lt;li>
&lt;p>Calls of the form &lt;code>dplyr::foo()&lt;/code> are now evaluated in the database, rather than locally.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>The &lt;code>vars&lt;/code> argument to
&lt;a href="https://dbplyr.tidyverse.org/reference/tbl_sql.html" target="_blank" rel="noopener">&lt;code>tbl_sql()&lt;/code>&lt;/a> has been formally deprecated.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>src&lt;/code> and &lt;code>tbl&lt;/code> objects now include a class generated from the class of the underlying connection object. This makes it possible for dplyr backends to implement different behaviour at the dplyr level, when needed.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="sql-translation">SQL translation
&lt;a href="#sql-translation">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;ul>
&lt;li>
&lt;p>The new &lt;code>as.integer64(x)&lt;/code> is translated to &lt;code>CAST(x AS BIGINT)&lt;/code>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>
&lt;a href="https://dplyr.tidyverse.org/reference/cumall.html" target="_blank" rel="noopener">&lt;code>cummean()&lt;/code>&lt;/a> now translates to SQL &lt;code>AVG()&lt;/code> as opposed to &lt;code>MEAN()&lt;/code>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>x %in% y&lt;/code> is now translated to &lt;code>FALSE&lt;/code> if &lt;code>y&lt;/code> is empty.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Thank you to the 49 people who contributed to this release:
&lt;a href="https://github.com/AkhilGNair" target="_blank" rel="noopener">@AkhilGNair&lt;/a>,
&lt;a href="https://github.com/andypohl" target="_blank" rel="noopener">@andypohl&lt;/a>,
&lt;a href="https://github.com/batpigandme" target="_blank" rel="noopener">@batpigandme&lt;/a>,
&lt;a href="https://github.com/bogdanrau" target="_blank" rel="noopener">@bogdanrau&lt;/a>,
&lt;a href="https://github.com/cboettig" target="_blank" rel="noopener">@cboettig&lt;/a>,
&lt;a href="https://github.com/cderv" target="_blank" rel="noopener">@cderv&lt;/a>,
&lt;a href="https://github.com/chris-park" target="_blank" rel="noopener">@chris-park&lt;/a>,
&lt;a href="https://github.com/colearendt" target="_blank" rel="noopener">@colearendt&lt;/a>,
&lt;a href="https://github.com/copernican" target="_blank" rel="noopener">@copernican&lt;/a>,
&lt;a href="https://github.com/cseidman" target="_blank" rel="noopener">@cseidman&lt;/a>,
&lt;a href="https://github.com/DavisVaughan" target="_blank" rel="noopener">@DavisVaughan&lt;/a>,
&lt;a href="https://github.com/dgrtwo" target="_blank" rel="noopener">@dgrtwo&lt;/a>,
&lt;a href="https://github.com/dlindelof" target="_blank" rel="noopener">@dlindelof&lt;/a>,
&lt;a href="https://github.com/dpprdan" target="_blank" rel="noopener">@dpprdan&lt;/a>,
&lt;a href="https://github.com/edgararuiz" target="_blank" rel="noopener">@edgararuiz&lt;/a>,
&lt;a href="https://github.com/foonwong" target="_blank" rel="noopener">@foonwong&lt;/a>,
&lt;a href="https://github.com/gbisschoff" target="_blank" rel="noopener">@gbisschoff&lt;/a>,
&lt;a href="https://github.com/hadley" target="_blank" rel="noopener">@hadley&lt;/a>,
&lt;a href="https://github.com/halldc" target="_blank" rel="noopener">@halldc&lt;/a>,
&lt;a href="https://github.com/happyshows" target="_blank" rel="noopener">@happyshows&lt;/a>,
&lt;a href="https://github.com/iangow" target="_blank" rel="noopener">@iangow&lt;/a>,
&lt;a href="https://github.com/javierluraschi" target="_blank" rel="noopener">@javierluraschi&lt;/a>,
&lt;a href="https://github.com/jimhester" target="_blank" rel="noopener">@jimhester&lt;/a>,
&lt;a href="https://github.com/jinaliu" target="_blank" rel="noopener">@jinaliu&lt;/a>,
&lt;a href="https://github.com/JohnMount" target="_blank" rel="noopener">@JohnMount&lt;/a>,
&lt;a href="https://github.com/jonthegeek" target="_blank" rel="noopener">@jonthegeek&lt;/a>,
&lt;a href="https://github.com/jrjohnson0821" target="_blank" rel="noopener">@jrjohnson0821&lt;/a>,
&lt;a href="https://github.com/karldw" target="_blank" rel="noopener">@karldw&lt;/a>,
&lt;a href="https://github.com/kevinykuo" target="_blank" rel="noopener">@kevinykuo&lt;/a>,
&lt;a href="https://github.com/kmace" target="_blank" rel="noopener">@kmace&lt;/a>,
&lt;a href="https://github.com/krlmlr" target="_blank" rel="noopener">@krlmlr&lt;/a>,
&lt;a href="https://github.com/lincis" target="_blank" rel="noopener">@lincis&lt;/a>,
&lt;a href="https://github.com/lionel-" target="_blank" rel="noopener">@lionel-&lt;/a>,
&lt;a href="https://github.com/mfalcioni1" target="_blank" rel="noopener">@mfalcioni1&lt;/a>,
&lt;a href="https://github.com/mgirlich" target="_blank" rel="noopener">@mgirlich&lt;/a>,
&lt;a href="https://github.com/mkirzon" target="_blank" rel="noopener">@mkirzon&lt;/a>,
&lt;a href="https://github.com/mkuehn10" target="_blank" rel="noopener">@mkuehn10&lt;/a>,
&lt;a href="https://github.com/mtmorgan" target="_blank" rel="noopener">@mtmorgan&lt;/a>,
&lt;a href="https://github.com/N1h1l1sT" target="_blank" rel="noopener">@N1h1l1sT&lt;/a>,
&lt;a href="https://github.com/Prometheus77" target="_blank" rel="noopener">@Prometheus77&lt;/a>,
&lt;a href="https://github.com/ramnathv" target="_blank" rel="noopener">@ramnathv&lt;/a>,
&lt;a href="https://github.com/romainfrancois" target="_blank" rel="noopener">@romainfrancois&lt;/a>,
&lt;a href="https://github.com/sandan" target="_blank" rel="noopener">@sandan&lt;/a>,
&lt;a href="https://github.com/sverchkov" target="_blank" rel="noopener">@sverchkov&lt;/a>,
&lt;a href="https://github.com/tdsmith" target="_blank" rel="noopener">@tdsmith&lt;/a>,
&lt;a href="https://github.com/tmastny" target="_blank" rel="noopener">@tmastny&lt;/a>,
&lt;a href="https://github.com/TomWeishaar" target="_blank" rel="noopener">@TomWeishaar&lt;/a>,
&lt;a href="https://github.com/vitallish" target="_blank" rel="noopener">@vitallish&lt;/a>, and
&lt;a href="https://github.com/yutannihilation" target="_blank" rel="noopener">@yutannihilation&lt;/a>.&lt;/p></description></item><item><title>bigrquery 1.0.0</title><link>https://www.tidyverse.org/blog/2018/04/bigrquery-1-0-0/</link><pubDate>Tue, 24 Apr 2018 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2018/04/bigrquery-1-0-0/</guid><description>
&lt;p>I’m very excited to announce that bigrquery 1.0.0 is now on CRAN. This package makes it easy to work with data stored in &lt;a href="https://developers.google.com/bigquery/">Google BigQuery&lt;/a>, a hosted database for big data. The bigrquery package provides three levels of abstraction on top of BigQuery:&lt;/p>
&lt;ul>
&lt;li>&lt;p>The low-level API provides thin wrappers over the underlying REST API. In
this version, all the low-level functions start with &lt;code>bq_&lt;/code>, and mostly have
the form &lt;code>bq_noun_verb()&lt;/code>. This level of abstraction is most appropriate if
you’re familiar with the REST API and you want do something not supported in
the higher-level APIs.&lt;/p>&lt;/li>
&lt;li>&lt;p>The &lt;a href="http://www.r-dbi.org">DBI interface&lt;/a> wraps the low-level API and
makes working with BigQuery like working with any other database system.
This is the most convenient layer if you want to execute SQL queries in
BigQuery or upload smaller amounts (i.e. &amp;lt;100 MB) of data.&lt;/p>&lt;/li>
&lt;li>&lt;p>The &lt;a href="http://dbplyr.tidyverse.org/">dplyr interface&lt;/a> lets you treat BigQuery
tables as if they are in-memory data frames. This is the most convenient
layer if you don’t want to write SQL, but instead want dbplyr to write it
for you.&lt;/p>&lt;/li>
&lt;/ul>
&lt;p>Install it with:&lt;/p>
&lt;pre class="r">&lt;code>install.packages(&amp;quot;bigrquery&amp;quot;)&lt;/code>&lt;/pre>
&lt;p>Four big changes in this version of bigrquery are described in detail below:&lt;/p>
&lt;ul>
&lt;li>Support for repeated and nested fields.&lt;/li>
&lt;li>Easier cross-dataset queries.&lt;/li>
&lt;li>Greatly improved download speeds.&lt;/li>
&lt;li>A new low-level API.&lt;/li>
&lt;/ul>
&lt;p>There are also many smaller improvements and bug fixes, as described in the &lt;a href="https://github.com/r-dbi/bigrquery/releases/tag/v1.0.0">release notes&lt;/a>.&lt;/p>
&lt;div id="nested-and-repeated-fields" class="section level2">
&lt;h2>Nested and repeated fields&lt;/h2>
&lt;p>One of the neatest things about BigQuery is that it supports nested and repeated fields, which are also called structs (or records) and arrays. bigrquery now supports those types of fields, reading them into list-columns:&lt;/p>
&lt;ul>
&lt;li>Repeated values become list-columns containing vectors.&lt;/li>
&lt;li>Nested values become list-columns containing named lists.&lt;/li>
&lt;li>Repeated nested values become list-columns containing data frames.&lt;/li>
&lt;/ul>
&lt;p>The following code illustrates the output for the two most important types: an array, and an array of structs:&lt;/p>
&lt;pre class="r">&lt;code>library(bigrquery)
con &amp;lt;- DBI::dbConnect(bigquery(), project = bq_test_project())
sql &amp;lt;- &amp;quot;SELECT
[1, 2, 3] as list,
[STRUCT(1 as a, &amp;#39;a&amp;#39; as b), STRUCT(2, &amp;#39;b&amp;#39;), STRUCT(3, &amp;#39;c&amp;#39;)] as df
&amp;quot;
out &amp;lt;- DBI::dbGetQuery(con, sql)
#&amp;gt; Auto-refreshing stale OAuth token.
out
#&amp;gt; # A tibble: 1 x 2
#&amp;gt; list df
#&amp;gt; &amp;lt;list&amp;gt; &amp;lt;list&amp;gt;
#&amp;gt; 1 &amp;lt;int [3]&amp;gt; &amp;lt;tibble [3 × 2]&amp;gt;
out$list[[1]]
#&amp;gt; [1] 1 2 3
out$df[[1]]
#&amp;gt; # A tibble: 3 x 2
#&amp;gt; a b
#&amp;gt; &amp;lt;int&amp;gt; &amp;lt;chr&amp;gt;
#&amp;gt; 1 1 a
#&amp;gt; 2 2 b
#&amp;gt; 3 3 c&lt;/code>&lt;/pre>
&lt;p>Note that results are now returned as tibbles, not data frames, because the base print method does not handle list columns well. If for some reason you do need a data frame, use &lt;code>as.data.frame()&lt;/code> to convert back.&lt;/p>
&lt;p>This work has made me think a bunch about list-colums and df-columns (which might be a better fit for non-repeated nested fields). The germination of these ideas is likely to have widespread (if subtle) infuence throughout the tidyverse, with initial impacts most likely to be felt in &lt;a href="http://tidyr.tidyverse.org/">tidyr&lt;/a>.&lt;/p>
&lt;/div>
&lt;div id="cross-dataset-queries" class="section level2">
&lt;h2>Cross-dataset queries&lt;/h2>
&lt;p>In the previous version of bigrquery it was difficult to perform queries across datasets because &lt;code>dbConnect()&lt;/code> forced you to specify a &lt;code>dataset&lt;/code> and only allowed you to reference tables within that dataset. Now the dataset is optional (the only required argument to &lt;code>DBI::dbConnect()&lt;/code> is a project to bill) and both DBI and dplyr interfaces accept qualified table names: either &lt;code>dataset.table&lt;/code> or &lt;code>project.dataset.table&lt;/code>.&lt;/p>
&lt;p>The following example demonstrates with my test project, which contains a &lt;code>basedata&lt;/code> dataset containing the &lt;code>mtcars&lt;/code> table:&lt;/p>
&lt;pre class="r">&lt;code>library(bigrquery)
con &amp;lt;- DBI::dbConnect(bigquery(), project = bq_test_project())
mtcars1 &amp;lt;- DBI::dbReadTable(con, &amp;quot;basedata.mtcars&amp;quot;)
head(mtcars1)
#&amp;gt; # A tibble: 6 x 11
#&amp;gt; mpg cyl disp hp drat wt qsec vs am gear carb
#&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;
#&amp;gt; 1 24.4 4. 147. 62. 3.69 3.19 20.0 1. 0. 4. 2.
#&amp;gt; 2 21.5 4. 120. 97. 3.70 2.46 20.0 1. 0. 3. 1.
#&amp;gt; 3 18.1 6. 225. 105. 2.76 3.46 20.2 1. 0. 3. 1.
#&amp;gt; 4 21.4 6. 258. 110. 3.08 3.22 19.4 1. 0. 3. 1.
#&amp;gt; 5 15.2 8. 276. 180. 3.07 3.78 18.0 0. 0. 3. 3.
#&amp;gt; 6 17.3 8. 276. 180. 3.07 3.73 17.6 0. 0. 3. 3.
mtcars2 &amp;lt;- dplyr::tbl(con, &amp;quot;basedata.mtcars&amp;quot;)
head(mtcars2)
#&amp;gt; # Source: lazy query [?? x 11]
#&amp;gt; # Database: BigQueryConnection
#&amp;gt; mpg cyl disp hp drat wt qsec vs am gear carb
#&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;
#&amp;gt; 1 24.4 4. 147. 62. 3.69 3.19 20.0 1. 0. 4. 2.
#&amp;gt; 2 21.5 4. 120. 97. 3.70 2.46 20.0 1. 0. 3. 1.
#&amp;gt; 3 18.1 6. 225. 105. 2.76 3.46 20.2 1. 0. 3. 1.
#&amp;gt; 4 21.4 6. 258. 110. 3.08 3.22 19.4 1. 0. 3. 1.
#&amp;gt; 5 15.2 8. 276. 180. 3.07 3.78 18.0 0. 0. 3. 3.
#&amp;gt; 6 17.3 8. 276. 180. 3.07 3.73 17.6 0. 0. 3. 3.&lt;/code>&lt;/pre>
&lt;/div>
&lt;div id="improved-download-speeds" class="section level2">
&lt;h2>Improved download speeds&lt;/h2>
&lt;p>The system for downloading data from BigQuery into R has been rewritten from the ground up to considerably improve performance:&lt;/p>
&lt;ul>
&lt;li>&lt;p>By default, data is downloaded from BigQuery in pages of 10,000 rows.
Previously, bigrquery downloaded then parsed each page. Now, bigrquery
downloads all pages, then parses all pages. This means that you’ll now see
two progress bars: one for downloading JSON from BigQuery and one for parsing
that JSON into a data frame.&lt;/p>&lt;/li>
&lt;li>&lt;p>Because all pages are downloaded in a single pass, we can now download in
parallel, using up to 6 simultaneous connections by default. This generally
doesn’t result in a six-fold speed up, but should at least double download
speed.&lt;/p>&lt;/li>
&lt;li>&lt;p>The parsing code has been rewritten in C++. This eliminates several expensive
intermediate computations, and means that bigrquery no longer requires
&lt;a href="http://readr.tidyverse.org/">readr&lt;/a>.&lt;/p>&lt;/li>
&lt;/ul>
&lt;p>All up, I can now download the first million rows of &lt;code>publicdata.samples.natality&lt;/code> in about a minute, about 8x faster than the previous version. This data frame takes up 170 MB of space in BigQuery and 140 MB of memory in R, so a minute to download doesn’t seem unreasonable. The bottleneck for loading BigQuery data is now parsing BigQuery’s JSON format, which is difficult to optimise further because I’m already using the fastest C++ JSON parser, &lt;a href="http://rapidjson.org">RapidJson&lt;/a>. If this is still too slow (because you download a lot of data), see &lt;code>?bq_table_download&lt;/code> for an alternative approach.&lt;/p>
&lt;/div>
&lt;div id="low-level-api" class="section level2">
&lt;h2>Low-level API&lt;/h2>
&lt;p>The low-level API has been completely overhauled to make it easier to use. The primary motivation was to make bigrquery development more enjoyable for me, but it should also be helpful to you when you need to go outside of the features provided by the higher-level DBI and dplyr interfaces.&lt;/p>
&lt;ul>
&lt;li>&lt;p>&lt;strong>Consistent naming scheme&lt;/strong>:
All API functions now have the form &lt;code>bq_object_verb()&lt;/code>, e.g.
&lt;code>bq_table_create()&lt;/code>, or &lt;code>bq_dataset_delete()&lt;/code>.&lt;/p>&lt;/li>
&lt;li>&lt;p>&lt;strong>S3 classes&lt;/strong>:
&lt;code>bq_table()&lt;/code>, &lt;code>bq_dataset()&lt;/code>, &lt;code>bq_job()&lt;/code>, &lt;code>bq_field()&lt;/code> and &lt;code>bq_fields()&lt;/code>
constructors create S3 objects corresponding to important BigQuery objects. T
hese are paired with &lt;code>as_&lt;/code> coercion functions and used throughout the new API.&lt;/p>&lt;/li>
&lt;li>&lt;p>&lt;strong>Easier local testing&lt;/strong>:
New &lt;code>bq_test_project()&lt;/code> and &lt;code>bq_test_dataset()&lt;/code> make it easier to run
bigrquery tests locally. To run the tests yourself, you need to create a
BigQuery project, and then follow the instructions in &lt;code>?bq_test_project&lt;/code>.&lt;/p>&lt;/li>
&lt;li>&lt;p>&lt;strong>More efficient data transfer&lt;/strong>:
The new API makes extensive use of the &lt;code>fields&lt;/code> query parameter, ensuring
that functions only download data that they actually use.&lt;/p>&lt;/li>
&lt;li>&lt;p>&lt;strong>Tighter GCS connections&lt;/strong>:
New &lt;code>bq_table_load()&lt;/code> loads data from a Google Cloud Storage URI, pairing
with &lt;code>bq_table_save()&lt;/code> which saves data to a GCS URI.&lt;/p>&lt;/li>
&lt;/ul>
&lt;p>The old API has been soft-deprecated - it will continue to work, but no further development will occur (including bug fixes). It will be formally deprecated in the next version, and then removed in the version after that.&lt;/p>
&lt;/div>
&lt;div id="acknowledgements" class="section level2">
&lt;h2>Acknowledgements&lt;/h2>
&lt;p>A big thanks goes out to all 41 users who contributed issues, pull requests, and comments since the last release: &lt;a href="https://github.com/alex-danilin">@alex-danilin&lt;/a>, &lt;a href="https://github.com/aschwartzSGI">@aschwartzSGI&lt;/a>, &lt;a href="https://github.com/aumdavis">@aumdavis&lt;/a>, &lt;a href="https://github.com/barnettjacob">@barnettjacob&lt;/a>, &lt;a href="https://github.com/batpigandme">@batpigandme&lt;/a>, &lt;a href="https://github.com/blakeyc">@blakeyc&lt;/a>, &lt;a href="https://github.com/bulam">@bulam&lt;/a>, &lt;a href="https://github.com/byapparov">@byapparov&lt;/a>, &lt;a href="https://github.com/c3212218">@c3212218&lt;/a>, &lt;a href="https://github.com/craigcitro">@craigcitro&lt;/a>, &lt;a href="https://github.com/czeildi">@czeildi&lt;/a>, &lt;a href="https://github.com/dan-booth">@dan-booth&lt;/a>, &lt;a href="https://github.com/edgararuiz">@edgararuiz&lt;/a>, &lt;a href="https://github.com/EricGoldsmith">@EricGoldsmith&lt;/a>, &lt;a href="https://github.com/everron">@everron&lt;/a>, &lt;a href="https://github.com/haavardw">@haavardw&lt;/a>, &lt;a href="https://github.com/hadley">@hadley&lt;/a>, &lt;a href="https://github.com/hidekoji">@hidekoji&lt;/a>, &lt;a href="https://github.com/inkrement">@inkrement&lt;/a>, &lt;a href="https://github.com/j450h1">@j450h1&lt;/a>, &lt;a href="https://github.com/jarodmeng">@jarodmeng&lt;/a>, &lt;a href="https://github.com/jennybc">@jennybc&lt;/a>, &lt;a href="https://github.com/JHowix">@JHowix&lt;/a>, &lt;a href="https://github.com/krlmlr">@krlmlr&lt;/a>, &lt;a href="https://github.com/ldanai">@ldanai&lt;/a>, &lt;a href="https://github.com/leggitta">@leggitta&lt;/a>, &lt;a href="https://github.com/michaelquinn32">@michaelquinn32&lt;/a>, &lt;a href="https://github.com/mpancia">@mpancia&lt;/a>, &lt;a href="https://github.com/ned2">@ned2&lt;/a>, &lt;a href="https://github.com/pcejrowski">@pcejrowski&lt;/a>, &lt;a href="https://github.com/Praxiteles">@Praxiteles&lt;/a>, &lt;a href="https://github.com/ras44">@ras44&lt;/a>, &lt;a href="https://github.com/realAkhmed">@realAkhmed&lt;/a>, &lt;a href="https://github.com/robincrlee">@robincrlee&lt;/a>, &lt;a href="https://github.com/selesnow">@selesnow&lt;/a>, &lt;a href="https://github.com/TerryZhangHL">@TerryZhangHL&lt;/a>, &lt;a href="https://github.com/VictArt">@VictArt&lt;/a>, &lt;a href="https://github.com/vivshume">@vivshume&lt;/a>, &lt;a href="https://github.com/zippeurfou">@zippeurfou&lt;/a>, &lt;a href="https://github.com/zkostitsyn">@zkostitsyn&lt;/a>, and &lt;a href="https://github.com/Zsedo">@Zsedo&lt;/a>&lt;/p>
&lt;/div></description></item><item><title>dbplyr 1.2.0</title><link>https://www.tidyverse.org/blog/2018/01/dbplyr-1-2/</link><pubDate>Mon, 08 Jan 2018 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2018/01/dbplyr-1-2/</guid><description>
&lt;p>We are very excited to announce that &lt;a href="http://dbplyr.tidyverse.org/">dbplyr 1.2.0&lt;/a> is now available on CRAN! &lt;strong>dbplyr&lt;/strong> is the database backend for dplyr. It interacts with databases directly by translating dplyr code into SQL queries. dbplyr is part of an expanding ecosystem of packages meant to help analysts access and analyze data in databases. To learn more, visit our website dedicated to &lt;em>all things R and databases&lt;/em>: &lt;a href="http://db.rstudio.com/" class="uri">http://db.rstudio.com/&lt;/a>&lt;/p>
&lt;p>Install the latest version of dbplyr with:&lt;/p>
&lt;pre class="r">&lt;code>install.packages(&amp;quot;dbplyr&amp;quot;)&lt;/code>&lt;/pre>
&lt;div id="whats-new" class="section level2">
&lt;h2>What’s new?&lt;/h2>
&lt;p>Here are some highlights of new features and fixes found in this release. To see the full details please refer to the &lt;a href="https://github.com/tidyverse/dbplyr/blob/master/NEWS.md#dbplyr-120">release notes&lt;/a>:&lt;/p>
&lt;ul>
&lt;li>&lt;p>New custom translation for &lt;strong>Microsoft Access&lt;/strong> and &lt;a href="http://db.rstudio.com/databases/teradata/">Teradata&lt;/a>&lt;/p>&lt;/li>
&lt;li>&lt;p>&lt;a href="http://db.rstudio.com/databases/redshift/">Amazon Redshift&lt;/a> connections now point to the PostgreSQL translation.&lt;/p>&lt;/li>
&lt;li>Adds support for &lt;strong>two new database R packages&lt;/strong>. These new packages are fully &lt;a href="http://db.rstudio.com/dbi/">DBI&lt;/a>-compliant and tested with &lt;a href="https://cran.r-project.org/web/packages/DBItest/index.html">DBItest&lt;/a>. We recommend to use these instead of older packages:
&lt;ol style="list-style-type: decimal">
&lt;li>&lt;a href="https://cran.r-project.org/web/packages/RMariaDB/index.html">RMariaDB&lt;/a>, use in favor of RMySQL&lt;/li>
&lt;li>&lt;a href="https://cran.r-project.org/web/packages/RPostgres/index.html">RPostgres&lt;/a>, use in favor of RPostgreSQL&lt;/li>
&lt;/ol>&lt;/li>
&lt;li>&lt;a href="https://cran.r-project.org/web/packages/ROracle/index.html">ROracle&lt;/a> connections now point to the &lt;a href="http://db.rstudio.com/databases/oracle/">Oracle&lt;/a> translation.&lt;/li>
&lt;li>&lt;p>Cache query results using &lt;code>copy_to&lt;/code>. This feature is very useful because after cached, the results of a long running query can be iteratively analyzed without having to wait for the same base query to run over and over.&lt;/p>&lt;/li>
&lt;li>&lt;p>stringr functions: &lt;code>str_length()&lt;/code>, &lt;code>str_to_upper()&lt;/code>, &lt;code>str_to_lower()&lt;/code>, &lt;code>str_replace_all()&lt;/code>, &lt;code>str_detect()&lt;/code>, and &lt;code>str_trim()&lt;/code> are now supported.&lt;/p>&lt;/li>
&lt;li>&lt;p>&lt;code>in_schema()&lt;/code> should now work in more places, particularly in &lt;code>copy_to()&lt;/code>&lt;/p>&lt;/li>
&lt;li>&lt;p>For those who need to extract the resulting SQL query from dplyr code, there is now a new function called &lt;code>remote_query()&lt;/code>. Unlike &lt;code>show_query()&lt;/code>, &lt;code>remote_query()&lt;/code> returns a character object, and unlike &lt;code>sql_render()&lt;/code>, the new function automatically detects the type of database attached to the given dplyr code and translates accordingly. There are four additional functions that provide a standard API to get metadata about a remote &lt;code>tbl&lt;/code>, these are: &lt;code>remote_name()&lt;/code>, &lt;code>remote_con()&lt;/code>, &lt;code>remote_src()&lt;/code>, and &lt;code>remote_query_plan()&lt;/code>.&lt;/p>&lt;/li>
&lt;li>&lt;p>Adds support for temporary tables in Microsoft SQL Server. Additionally, the issue of certain operators working only in &lt;code>mutate()&lt;/code> or only in &lt;code>filter()&lt;/code> has been resolved.&lt;/p>&lt;/li>
&lt;li>&lt;p>Two new functions for developers: &lt;code>sql_aggregate()&lt;/code> and &lt;code>win_aggregate()&lt;/code>. They are for generating SQL and windowed SQL functions for aggregates.&lt;/p>&lt;/li>
&lt;/ul>
&lt;/div>
&lt;div id="caching-results" class="section level2">
&lt;h2>Caching results&lt;/h2>
&lt;p>The &lt;code>copy_to()&lt;/code> function is now able to &lt;strong>cache the results of a set of dplyr database transformations&lt;/strong>. An additional advantage is that &lt;code>copy_to()&lt;/code> uses the database to run and cache the data, so there is no data being transmitted back to R. For this feature to work, the user needs sufficient rights to create temporary tables in the database.&lt;/p>
&lt;pre class="r">&lt;code>con &amp;lt;- DBI::dbConnect(RSQLite::SQLite(), &amp;quot;:memory:&amp;quot;)
mtcars_db &amp;lt;- copy_to(con, rownames_to_column(mtcars), &amp;quot;mtcars&amp;quot;)
only_auto &amp;lt;- mtcars_db %&amp;gt;%
filter(am == 1) %&amp;gt;%
select(mpg, cyl, am)
auto &amp;lt;- copy_to(con, only_auto, &amp;quot;auto&amp;quot;) # New in dbplyr 1.2.0
head(auto)
#&amp;gt; # Source: lazy query [?? x 3]
#&amp;gt; # Database: sqlite 3.19.3 [:memory:]
#&amp;gt; mpg cyl am
#&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;
#&amp;gt; 1 21.0 6.00 1.00
#&amp;gt; 2 21.0 6.00 1.00
#&amp;gt; 3 22.8 4.00 1.00
#&amp;gt; 4 32.4 4.00 1.00
#&amp;gt; 5 30.4 4.00 1.00
#&amp;gt; 6 33.9 4.00 1.00&lt;/code>&lt;/pre>
&lt;p>If the set of dplyr transformations need to be cached to a &lt;strong>different database&lt;/strong>, &lt;code>copy_to()&lt;/code> is smart enough to download the data into memory in R, and then uploads the data to the target database.&lt;/p>
&lt;pre class="r">&lt;code>second_con &amp;lt;- DBI::dbConnect(RSQLite::SQLite(), &amp;quot;:memory:&amp;quot;)
second_auto &amp;lt;- copy_to(second_con, only_auto, &amp;quot;auto&amp;quot;) # New in dbplyr 1.2.0
head(second_auto)
#&amp;gt; # Source: lazy query [?? x 3]
#&amp;gt; # Database: sqlite 3.19.3 [:memory:]
#&amp;gt; mpg cyl am
#&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;
#&amp;gt; 1 21.0 6.00 1.00
#&amp;gt; 2 21.0 6.00 1.00
#&amp;gt; 3 22.8 4.00 1.00
#&amp;gt; 4 32.4 4.00 1.00
#&amp;gt; 5 30.4 4.00 1.00
#&amp;gt; 6 33.9 4.00 1.00&lt;/code>&lt;/pre>
&lt;/div>
&lt;div id="stringr-functions" class="section level2">
&lt;h2>stringr functions&lt;/h2>
&lt;p>Six stringr functions are now supported. Regular expression support varies from database to database, but most simple regular expressions should be ok. The functions are:&lt;/p>
&lt;ol style="list-style-type: decimal">
&lt;li>&lt;code>str_length()&lt;/code>&lt;/li>
&lt;li>&lt;code>str_to_upper()&lt;/code>&lt;/li>
&lt;li>&lt;code>str_to_lower()&lt;/code>&lt;/li>
&lt;li>&lt;code>str_replace_all()&lt;/code>&lt;/li>
&lt;li>&lt;code>str_detect()&lt;/code>&lt;/li>
&lt;li>&lt;code>str_trim()&lt;/code>&lt;/li>
&lt;/ol>
&lt;pre class="r">&lt;code>tbl(con, &amp;quot;mtcars&amp;quot;) %&amp;gt;%
head() %&amp;gt;%
select(rowname) %&amp;gt;%
mutate(
s1 = str_length(rowname), # New in dbplyr 1.2.0
s2 = str_to_upper(rowname), # New in dbplyr 1.2.0
s3 = str_to_lower(rowname), # New in dbplyr 1.2.0
s4 = str_replace_all(rowname, &amp;quot;M&amp;quot;, &amp;quot;X&amp;quot;), # New in dbplyr 1.2.0
s5 = str_detect(rowname, &amp;quot;M&amp;quot;), # New in dbplyr 1.2.0
s6 = str_trim(rowname) # New in dbplyr 1.2.0
)
#&amp;gt; # Source: lazy query [?? x 7]
#&amp;gt; # Database: sqlite 3.19.3 [:memory:]
#&amp;gt; rowname s1 s2 s3 s4 s5 s6
#&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;int&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;int&amp;gt; &amp;lt;chr&amp;gt;
#&amp;gt; 1 Mazda RX4 9 MAZDA RX4 mazda r~ Xazda ~ 0 Mazda ~
#&amp;gt; 2 Mazda RX4 Wag 13 MAZDA RX4 WAG mazda r~ Xazda ~ 0 Mazda ~
#&amp;gt; 3 Datsun 710 10 DATSUN 710 datsun ~ Datsun~ 0 Datsun~
#&amp;gt; 4 Hornet 4 Drive 14 HORNET 4 DRIVE hornet ~ Hornet~ 0 Hornet~
#&amp;gt; 5 Hornet Sportabout 17 HORNET SPORTABOUT hornet ~ Hornet~ 0 Hornet~
#&amp;gt; 6 Valiant 7 VALIANT valiant Valiant 0 Valiant&lt;/code>&lt;/pre>
&lt;/div>
&lt;div id="contributors" class="section level2">
&lt;h2>Contributors&lt;/h2>
&lt;p>A big thanks goes to those who made this release possible by contributing code or documentation: &lt;a href="https://github.com/DavisVaughan">@DavisVaughan&lt;/a>, &lt;a href="https://github.com/baileych">@baileych&lt;/a>, &lt;a href="https://github.com/Hong-Revo">@Hong-Revo&lt;/a>, &lt;a href="https://github.com/cwarden">@cwarden&lt;/a>, &lt;a href="https://github.com/zozlak">@zozlak&lt;/a>, &lt;a href="https://github.com/denismaciel">@denismaciel&lt;/a>, &lt;a href="https://github.com/jonassundman">@jonassundman&lt;/a>, &lt;a href="https://github.com/wibeasley">@wibeasley&lt;/a>, &lt;a href="https://github.com/mungojam">@mungojam&lt;/a>, &lt;a href="https://github.com/hoxo-m">@hoxo-m&lt;/a>, &lt;a href="https://github.com/dpprdan">@dpprdan&lt;/a>,&lt;a href="https://github.com/jimhester">@jimhester&lt;/a>, &lt;a href="https://github.com/krlmlr">@krlmlr&lt;/a>, and &lt;a href="https://github.com/javierluraschi">@javierluraschi&lt;/a>. Also, a thank you to those who helped up improve this package by suggesting features and reporting issues: &lt;a href="https://github.com/drf5n">@drf5n&lt;/a>, &lt;a href="https://github.com/larspijnappel">@larspijnappel&lt;/a>, &lt;a href="https://github.com/lbakerIsazi">@lbakerIsazi&lt;/a>, &lt;a href="https://github.com/mtmorgan">@mtmorgan&lt;/a>, &lt;a href="https://github.com/refik">@refik&lt;/a>, &lt;a href="https://github.com/sicarul">@sicarul&lt;/a>, and &lt;a href="https://github.com/vitallish">@vitallish&lt;/a>&lt;/p>
&lt;/div></description></item></channel></rss>