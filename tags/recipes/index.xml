<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>recipes | Tidyverse</title><link>https://www.tidyverse.org/tags/recipes/</link><atom:link href="https://www.tidyverse.org/tags/recipes/index.xml" rel="self" type="application/rss+xml"/><description>recipes</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Mon, 28 Apr 2025 00:00:00 +0000</lastBuildDate><item><title>recipes 1.3.0</title><link>https://www.tidyverse.org/blog/2025/04/recipes-1-3-0/</link><pubDate>Mon, 28 Apr 2025 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2025/04/recipes-1-3-0/</guid><description>&lt;!--
TODO:
* [x] Look over / edit the post's title in the yaml
* [x] Edit (or delete) the description; note this appears in the Twitter card
* [x] Pick category and tags (see existing with [`hugodown::tidy_show_meta()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html))
* [x] Find photo &amp; update yaml metadata
* [x] Create `thumbnail-sq.jpg`; height and width should be equal
* [x] Create `thumbnail-wd.jpg`; width should be >5x height
* [x] [`hugodown::use_tidy_thumbnails()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html)
* [x] Add intro sentence, e.g. the standard tagline for the package
* [x] [`usethis::use_tidy_thanks()`](https://usethis.r-lib.org/reference/use_tidy_thanks.html)
-->
&lt;p>We&amp;rsquo;re thrilled to announce the release of
&lt;a href="https://recipes.tidymodels.org/" target="_blank" rel="noopener">recipes&lt;/a> 1.3.0. recipes lets you create a pipeable sequence of feature engineering steps.&lt;/p>
&lt;p>You can install it from CRAN with:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/utils/install.packages.html'>install.packages&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"recipes"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>This blog post will walk through some of the highlights of this release, which includes changes to how &lt;code>strings_as_factors&lt;/code> are specified, deprecation of
&lt;a href="https://recipes.tidymodels.org/reference/step_select.html" target="_blank" rel="noopener">&lt;code>step_select()&lt;/code>&lt;/a>, new &lt;code>contrasts&lt;/code> argument for
&lt;a href="https://recipes.tidymodels.org/reference/step_dummy.html" target="_blank" rel="noopener">&lt;code>step_dummy()&lt;/code>&lt;/a>, and improvements for
&lt;a href="https://recipes.tidymodels.org/reference/step_impute_bag.html" target="_blank" rel="noopener">&lt;code>step_impute_bag()&lt;/code>&lt;/a>.&lt;/p>
&lt;p>You can see a full list of changes in the
&lt;a href="https://recipes.tidymodels.org/news/index.html#recipes-130" target="_blank" rel="noopener">release notes&lt;/a>.&lt;/p>
&lt;p>Let&amp;rsquo;s first load the package:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://github.com/tidymodels/recipes'>recipes&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;h2 id="strings_as_factors">&lt;code>strings_as_factors&lt;/code>
&lt;a href="#strings_as_factors">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Recipes by default convert predictor strings to factors, and the option for that is located in
&lt;a href="https://recipes.tidymodels.org/reference/prep.html" target="_blank" rel="noopener">&lt;code>prep()&lt;/code>&lt;/a>. This caused an issue when you wanted to set &lt;code>strings_as_factors = FALSE&lt;/code> for a recipe that is used somewhere else like in a workflow.&lt;/p>
&lt;p>This is no longer an issue as we have moved the argument to
&lt;a href="https://recipes.tidymodels.org/reference/recipe.html" target="_blank" rel="noopener">&lt;code>recipe()&lt;/code>&lt;/a> itself. We are at the same time deprecating the use of &lt;code>strings_as_factors&lt;/code> when used in
&lt;a href="https://recipes.tidymodels.org/reference/prep.html" target="_blank" rel="noopener">&lt;code>prep()&lt;/code>&lt;/a>. Here is an example:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://modeldata.tidymodels.org'>modeldata&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>tate_text&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 4,284 × 5&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; id artist title medium year&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;fct&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;chr&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;fct&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 1&lt;/span> &lt;span style='text-decoration: underline;'>21&lt;/span>926 Absalon Proposals for a Habitat Video… &lt;span style='text-decoration: underline;'>1&lt;/span>990&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 2&lt;/span> &lt;span style='text-decoration: underline;'>20&lt;/span>472 Auerbach, Frank Michael Etchi… &lt;span style='text-decoration: underline;'>1&lt;/span>990&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 3&lt;/span> &lt;span style='text-decoration: underline;'>20&lt;/span>474 Auerbach, Frank Geoffrey Etchi… &lt;span style='text-decoration: underline;'>1&lt;/span>990&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 4&lt;/span> &lt;span style='text-decoration: underline;'>20&lt;/span>473 Auerbach, Frank Jake Etchi… &lt;span style='text-decoration: underline;'>1&lt;/span>990&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 5&lt;/span> &lt;span style='text-decoration: underline;'>20&lt;/span>513 Auerbach, Frank To the Studios Oil p… &lt;span style='text-decoration: underline;'>1&lt;/span>990&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 6&lt;/span> &lt;span style='text-decoration: underline;'>21&lt;/span>389 Ayres, OBE Gillian Phaëthon Oil p… &lt;span style='text-decoration: underline;'>1&lt;/span>990&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 7&lt;/span> &lt;span style='text-decoration: underline;'>121&lt;/span>187 Barlow, Phyllida Untitled Acryl… &lt;span style='text-decoration: underline;'>1&lt;/span>990&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 8&lt;/span> &lt;span style='text-decoration: underline;'>19&lt;/span>455 Baselitz, Georg Green VIII Woodc… &lt;span style='text-decoration: underline;'>1&lt;/span>990&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 9&lt;/span> &lt;span style='text-decoration: underline;'>20&lt;/span>938 Beattie, Basil Present Bound Oil p… &lt;span style='text-decoration: underline;'>1&lt;/span>990&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>10&lt;/span> &lt;span style='text-decoration: underline;'>105&lt;/span>941 Beuys, Joseph Joseph Beuys: A Private Collection. A… Print… &lt;span style='text-decoration: underline;'>1&lt;/span>990&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># ℹ 4,274 more rows&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>We are loading the modeldata package to get &lt;code>tate_text&lt;/code> which has a character column &lt;code>title&lt;/code>. If we don&amp;rsquo;t do anything then it turns into a factor.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/recipe.html'>recipe&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>~&lt;/span>&lt;span class='nv'>.&lt;/span>, data &lt;span class='o'>=&lt;/span> &lt;span class='nv'>tate_text&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/prep.html'>prep&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/bake.html'>bake&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>tate_text&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 4,284 × 5&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; id artist title medium year&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;fct&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;fct&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;fct&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 1&lt;/span> &lt;span style='text-decoration: underline;'>21&lt;/span>926 Absalon Proposals for a Habitat Video… &lt;span style='text-decoration: underline;'>1&lt;/span>990&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 2&lt;/span> &lt;span style='text-decoration: underline;'>20&lt;/span>472 Auerbach, Frank Michael Etchi… &lt;span style='text-decoration: underline;'>1&lt;/span>990&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 3&lt;/span> &lt;span style='text-decoration: underline;'>20&lt;/span>474 Auerbach, Frank Geoffrey Etchi… &lt;span style='text-decoration: underline;'>1&lt;/span>990&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 4&lt;/span> &lt;span style='text-decoration: underline;'>20&lt;/span>473 Auerbach, Frank Jake Etchi… &lt;span style='text-decoration: underline;'>1&lt;/span>990&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 5&lt;/span> &lt;span style='text-decoration: underline;'>20&lt;/span>513 Auerbach, Frank To the Studios Oil p… &lt;span style='text-decoration: underline;'>1&lt;/span>990&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 6&lt;/span> &lt;span style='text-decoration: underline;'>21&lt;/span>389 Ayres, OBE Gillian Phaëthon Oil p… &lt;span style='text-decoration: underline;'>1&lt;/span>990&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 7&lt;/span> &lt;span style='text-decoration: underline;'>121&lt;/span>187 Barlow, Phyllida Untitled Acryl… &lt;span style='text-decoration: underline;'>1&lt;/span>990&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 8&lt;/span> &lt;span style='text-decoration: underline;'>19&lt;/span>455 Baselitz, Georg Green VIII Woodc… &lt;span style='text-decoration: underline;'>1&lt;/span>990&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 9&lt;/span> &lt;span style='text-decoration: underline;'>20&lt;/span>938 Beattie, Basil Present Bound Oil p… &lt;span style='text-decoration: underline;'>1&lt;/span>990&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>10&lt;/span> &lt;span style='text-decoration: underline;'>105&lt;/span>941 Beuys, Joseph Joseph Beuys: A Private Collection. A… Print… &lt;span style='text-decoration: underline;'>1&lt;/span>990&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># ℹ 4,274 more rows&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>But we can set &lt;code>strings_as_factors = FALSE&lt;/code> in
&lt;a href="https://recipes.tidymodels.org/reference/recipe.html" target="_blank" rel="noopener">&lt;code>recipe()&lt;/code>&lt;/a> and it won&amp;rsquo;t anymore.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/recipe.html'>recipe&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>~&lt;/span>&lt;span class='nv'>.&lt;/span>, data &lt;span class='o'>=&lt;/span> &lt;span class='nv'>tate_text&lt;/span>, strings_as_factors &lt;span class='o'>=&lt;/span> &lt;span class='kc'>FALSE&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/prep.html'>prep&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/bake.html'>bake&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>tate_text&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 4,284 × 5&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; id artist title medium year&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;fct&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;chr&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;fct&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 1&lt;/span> &lt;span style='text-decoration: underline;'>21&lt;/span>926 Absalon Proposals for a Habitat Video… &lt;span style='text-decoration: underline;'>1&lt;/span>990&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 2&lt;/span> &lt;span style='text-decoration: underline;'>20&lt;/span>472 Auerbach, Frank Michael Etchi… &lt;span style='text-decoration: underline;'>1&lt;/span>990&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 3&lt;/span> &lt;span style='text-decoration: underline;'>20&lt;/span>474 Auerbach, Frank Geoffrey Etchi… &lt;span style='text-decoration: underline;'>1&lt;/span>990&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 4&lt;/span> &lt;span style='text-decoration: underline;'>20&lt;/span>473 Auerbach, Frank Jake Etchi… &lt;span style='text-decoration: underline;'>1&lt;/span>990&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 5&lt;/span> &lt;span style='text-decoration: underline;'>20&lt;/span>513 Auerbach, Frank To the Studios Oil p… &lt;span style='text-decoration: underline;'>1&lt;/span>990&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 6&lt;/span> &lt;span style='text-decoration: underline;'>21&lt;/span>389 Ayres, OBE Gillian Phaëthon Oil p… &lt;span style='text-decoration: underline;'>1&lt;/span>990&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 7&lt;/span> &lt;span style='text-decoration: underline;'>121&lt;/span>187 Barlow, Phyllida Untitled Acryl… &lt;span style='text-decoration: underline;'>1&lt;/span>990&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 8&lt;/span> &lt;span style='text-decoration: underline;'>19&lt;/span>455 Baselitz, Georg Green VIII Woodc… &lt;span style='text-decoration: underline;'>1&lt;/span>990&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 9&lt;/span> &lt;span style='text-decoration: underline;'>20&lt;/span>938 Beattie, Basil Present Bound Oil p… &lt;span style='text-decoration: underline;'>1&lt;/span>990&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>10&lt;/span> &lt;span style='text-decoration: underline;'>105&lt;/span>941 Beuys, Joseph Joseph Beuys: A Private Collection. A… Print… &lt;span style='text-decoration: underline;'>1&lt;/span>990&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># ℹ 4,274 more rows&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>This change should also make pragmatic sense as whether you want to turn strings into factors is something that should encoded into the recipe itself.&lt;/p>
&lt;h2 id="deprecating-step_select">Deprecating &lt;code>step_select()&lt;/code>
&lt;a href="#deprecating-step_select">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>We have started the process of deprecating
&lt;a href="https://recipes.tidymodels.org/reference/step_select.html" target="_blank" rel="noopener">&lt;code>step_select()&lt;/code>&lt;/a>. Given the number of issues people are having with the step and the fact that it doesn&amp;rsquo;t play well with workflows we think this is the right call.&lt;/p>
&lt;p>There are two main use cases where
&lt;a href="https://recipes.tidymodels.org/reference/step_select.html" target="_blank" rel="noopener">&lt;code>step_select()&lt;/code>&lt;/a> was used: removing variables, and selecting variables. Removing variables when done with &lt;code>-&lt;/code> in
&lt;a href="https://recipes.tidymodels.org/reference/step_select.html" target="_blank" rel="noopener">&lt;code>step_select()&lt;/code>&lt;/a>&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/recipe.html'>recipe&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mpg&lt;/span> &lt;span class='o'>~&lt;/span> &lt;span class='nv'>.&lt;/span>, &lt;span class='nv'>mtcars&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/step_select.html'>step_select&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>-&lt;/span>&lt;span class='nf'>&lt;a href='https://tidyselect.r-lib.org/reference/starts_with.html'>starts_with&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"d"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/prep.html'>prep&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/bake.html'>bake&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>new_data &lt;span class='o'>=&lt;/span> &lt;span class='kc'>NULL&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 32 × 9&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; cyl hp wt qsec vs am gear carb mpg&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 1&lt;/span> 6 110 2.62 16.5 0 1 4 4 21 &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 2&lt;/span> 6 110 2.88 17.0 0 1 4 4 21 &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 3&lt;/span> 4 93 2.32 18.6 1 1 4 1 22.8&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 4&lt;/span> 6 110 3.22 19.4 1 0 3 1 21.4&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 5&lt;/span> 8 175 3.44 17.0 0 0 3 2 18.7&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 6&lt;/span> 6 105 3.46 20.2 1 0 3 1 18.1&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 7&lt;/span> 8 245 3.57 15.8 0 0 3 4 14.3&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 8&lt;/span> 4 62 3.19 20 1 0 4 2 24.4&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 9&lt;/span> 4 95 3.15 22.9 1 0 4 2 22.8&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>10&lt;/span> 6 123 3.44 18.3 1 0 4 4 19.2&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># ℹ 22 more rows&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>These use cases can seamlessly be converted to use
&lt;a href="https://recipes.tidymodels.org/reference/step_rm.html" target="_blank" rel="noopener">&lt;code>step_rm()&lt;/code>&lt;/a> without the &lt;code>-&lt;/code> for the same result.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/recipe.html'>recipe&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mpg&lt;/span> &lt;span class='o'>~&lt;/span> &lt;span class='nv'>.&lt;/span>, &lt;span class='nv'>mtcars&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/step_rm.html'>step_rm&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://tidyselect.r-lib.org/reference/starts_with.html'>starts_with&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"d"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/prep.html'>prep&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/bake.html'>bake&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>new_data &lt;span class='o'>=&lt;/span> &lt;span class='kc'>NULL&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 32 × 9&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; cyl hp wt qsec vs am gear carb mpg&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 1&lt;/span> 6 110 2.62 16.5 0 1 4 4 21 &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 2&lt;/span> 6 110 2.88 17.0 0 1 4 4 21 &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 3&lt;/span> 4 93 2.32 18.6 1 1 4 1 22.8&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 4&lt;/span> 6 110 3.22 19.4 1 0 3 1 21.4&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 5&lt;/span> 8 175 3.44 17.0 0 0 3 2 18.7&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 6&lt;/span> 6 105 3.46 20.2 1 0 3 1 18.1&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 7&lt;/span> 8 245 3.57 15.8 0 0 3 4 14.3&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 8&lt;/span> 4 62 3.19 20 1 0 4 2 24.4&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 9&lt;/span> 4 95 3.15 22.9 1 0 4 2 22.8&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>10&lt;/span> 6 123 3.44 18.3 1 0 4 4 19.2&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># ℹ 22 more rows&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>For selecting variables there are two cases. The first is as a tool to select which variables to use in our model. We recommend that you use
&lt;a href="https://dplyr.tidyverse.org/reference/select.html" target="_blank" rel="noopener">&lt;code>select()&lt;/code>&lt;/a> to do that before passing the data into the
&lt;a href="https://recipes.tidymodels.org/reference/recipe.html" target="_blank" rel="noopener">&lt;code>recipe()&lt;/code>&lt;/a>. This is especially helpful since
&lt;a href="https://www.tidyverse.org/blog/2024/07/recipes-1-1-0/#column-type-checking" target="_blank" rel="noopener">recipes are tighter with respect to their input types&lt;/a>, so only passing the data you need to use is helpful.&lt;/p>
&lt;p>If you need to do the selection after another step takes effect you should still be able to do so, by using
&lt;a href="https://recipes.tidymodels.org/reference/step_rm.html" target="_blank" rel="noopener">&lt;code>step_rm()&lt;/code>&lt;/a> in the following manner.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">step_rm&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">recipe&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">all_predictors&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="nf">all_of&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">variables&lt;/span> &lt;span class="n">that&lt;/span> &lt;span class="n">you&lt;/span> &lt;span class="n">want&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">keep&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;h2 id="step_dummy-contrasts-argument">&lt;code>step_dummy()&lt;/code> contrasts argument
&lt;a href="#step_dummy-contrasts-argument">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Contrasts such as
&lt;a href="https://rdrr.io/r/stats/contrast.html" target="_blank" rel="noopener">&lt;code>contr.treatment()&lt;/code>&lt;/a> and
&lt;a href="https://rdrr.io/r/stats/contrast.html" target="_blank" rel="noopener">&lt;code>contr.poly()&lt;/code>&lt;/a> are used in
&lt;a href="https://recipes.tidymodels.org/reference/step_dummy.html" target="_blank" rel="noopener">&lt;code>step_dummy()&lt;/code>&lt;/a> to determine how the steps should translate categorical values into one or more numeric columns. Traditionally the contrasts were set using
&lt;a href="https://rdrr.io/r/base/options.html" target="_blank" rel="noopener">&lt;code>options()&lt;/code>&lt;/a> like so:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/options.html'>options&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>contrasts &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>unordered &lt;span class='o'>=&lt;/span> &lt;span class='s'>"contr.poly"&lt;/span>, ordered &lt;span class='o'>=&lt;/span> &lt;span class='s'>"contr.poly"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/recipe.html'>recipe&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>~&lt;/span>&lt;span class='nv'>species&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nv'>island&lt;/span>, &lt;span class='nv'>penguins&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/step_dummy.html'>step_dummy&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/has_role.html'>all_nominal_predictors&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/prep.html'>prep&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/bake.html'>bake&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>new_data &lt;span class='o'>=&lt;/span> &lt;span class='nv'>penguins&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 344 × 4&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; species_Chinstrap species_Gentoo island_Dream island_Torgersen&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 1&lt;/span> -&lt;span style='color: #BB0000;'>0.707&lt;/span> 0.408 0.707 0.408&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 2&lt;/span> -&lt;span style='color: #BB0000;'>0.707&lt;/span> 0.408 0.707 0.408&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 3&lt;/span> -&lt;span style='color: #BB0000;'>0.707&lt;/span> 0.408 0.707 0.408&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 4&lt;/span> -&lt;span style='color: #BB0000;'>0.707&lt;/span> 0.408 0.707 0.408&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 5&lt;/span> -&lt;span style='color: #BB0000;'>0.707&lt;/span> 0.408 0.707 0.408&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 6&lt;/span> -&lt;span style='color: #BB0000;'>0.707&lt;/span> 0.408 0.707 0.408&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 7&lt;/span> -&lt;span style='color: #BB0000;'>0.707&lt;/span> 0.408 0.707 0.408&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 8&lt;/span> -&lt;span style='color: #BB0000;'>0.707&lt;/span> 0.408 0.707 0.408&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 9&lt;/span> -&lt;span style='color: #BB0000;'>0.707&lt;/span> 0.408 0.707 0.408&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>10&lt;/span> -&lt;span style='color: #BB0000;'>0.707&lt;/span> 0.408 0.707 0.408&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># ℹ 334 more rows&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>The issue with this approach is that it pulls from
&lt;a href="https://rdrr.io/r/base/options.html" target="_blank" rel="noopener">&lt;code>options()&lt;/code>&lt;/a> when it needs it instead of storing the information. This means that if you put this recipe in production you will need to set the option in the production environment to match that of the training environment.&lt;/p>
&lt;div class="highlight">
&lt;/div>
&lt;p>To fix this issue we have given
&lt;a href="https://recipes.tidymodels.org/reference/step_dummy.html" target="_blank" rel="noopener">&lt;code>step_dummy()&lt;/code>&lt;/a> an argument &lt;code>contrasts&lt;/code> that work in much the same way. You simply specify the contrast you want and it will be stored in the object for easy deployment.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/recipe.html'>recipe&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>~&lt;/span>&lt;span class='nv'>species&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nv'>island&lt;/span>, &lt;span class='nv'>penguins&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/step_dummy.html'>step_dummy&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/has_role.html'>all_nominal_predictors&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>, contrasts &lt;span class='o'>=&lt;/span> &lt;span class='s'>"contr.poly"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/prep.html'>prep&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/bake.html'>bake&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>new_data &lt;span class='o'>=&lt;/span> &lt;span class='nv'>penguins&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 344 × 4&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; species_Chinstrap species_Gentoo island_Dream island_Torgersen&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 1&lt;/span> -&lt;span style='color: #BB0000;'>0.707&lt;/span> 0.408 0.707 0.408&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 2&lt;/span> -&lt;span style='color: #BB0000;'>0.707&lt;/span> 0.408 0.707 0.408&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 3&lt;/span> -&lt;span style='color: #BB0000;'>0.707&lt;/span> 0.408 0.707 0.408&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 4&lt;/span> -&lt;span style='color: #BB0000;'>0.707&lt;/span> 0.408 0.707 0.408&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 5&lt;/span> -&lt;span style='color: #BB0000;'>0.707&lt;/span> 0.408 0.707 0.408&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 6&lt;/span> -&lt;span style='color: #BB0000;'>0.707&lt;/span> 0.408 0.707 0.408&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 7&lt;/span> -&lt;span style='color: #BB0000;'>0.707&lt;/span> 0.408 0.707 0.408&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 8&lt;/span> -&lt;span style='color: #BB0000;'>0.707&lt;/span> 0.408 0.707 0.408&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 9&lt;/span> -&lt;span style='color: #BB0000;'>0.707&lt;/span> 0.408 0.707 0.408&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>10&lt;/span> -&lt;span style='color: #BB0000;'>0.707&lt;/span> 0.408 0.707 0.408&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># ℹ 334 more rows&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>If you are using a contrasts from an external package such as
&lt;a href="https://hardhat.tidymodels.org/reference/contr_one_hot.html" target="_blank" rel="noopener">&lt;code>hardhat::contr_one_hot()&lt;/code>&lt;/a> you will need to have the package loaded in the environments you are working in with
&lt;a href="https://github.com/tidymodels/hardhat" target="_blank" rel="noopener">&lt;code>library(hardhat)&lt;/code>&lt;/a> and setting &lt;code>contrasts = &amp;quot;contr_one_hot&amp;quot;&lt;/code>. You will also need to call
&lt;a href="https://github.com/tidymodels/hardhat" target="_blank" rel="noopener">&lt;code>library(hardhat)&lt;/code>&lt;/a> in any production environments you are using this recipe.&lt;/p>
&lt;h2 id="tidyselect-can-be-used-everywhere">tidyselect can be used everywhere
&lt;a href="#tidyselect-can-be-used-everywhere">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Several steps such as
&lt;a href="https://recipes.tidymodels.org/reference/step_pls.html" target="_blank" rel="noopener">&lt;code>step_pls()&lt;/code>&lt;/a> and
&lt;a href="https://recipes.tidymodels.org/reference/step_impute_bag.html" target="_blank" rel="noopener">&lt;code>step_impute_bag()&lt;/code>&lt;/a> require the selection of more than just the affected columns.
&lt;a href="https://recipes.tidymodels.org/reference/step_pls.html" target="_blank" rel="noopener">&lt;code>step_pls()&lt;/code>&lt;/a> needs you to select an &lt;code>outcome&lt;/code> variable and
&lt;a href="https://recipes.tidymodels.org/reference/step_impute_bag.html" target="_blank" rel="noopener">&lt;code>step_impute_bag()&lt;/code>&lt;/a> needs you to select which variables to impute with, &lt;code>impute_with&lt;/code>, if you don&amp;rsquo;t want to use all predictors. Previously these needed to be strings or use special selectors like
&lt;a href="https://recipes.tidymodels.org/reference/step_impute_bag.html" target="_blank" rel="noopener">&lt;code>imp_vars()&lt;/code>&lt;/a>. You don&amp;rsquo;t have to do that anymore. You can now use tidyselect in these arguments too.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/recipe.html'>recipe&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mpg&lt;/span> &lt;span class='o'>~&lt;/span> &lt;span class='nv'>.&lt;/span>, &lt;span class='nv'>mtcars&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/step_pls.html'>step_pls&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/has_role.html'>all_predictors&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>, outcome &lt;span class='o'>=&lt;/span> &lt;span class='nv'>mpg&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/prep.html'>prep&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/bake.html'>bake&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>new_data &lt;span class='o'>=&lt;/span> &lt;span class='nv'>mtcars&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 32 × 3&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; mpg PLS1 PLS2&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 1&lt;/span> 21 0.693 0.895&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 2&lt;/span> 21 0.650 0.654&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 3&lt;/span> 22.8 2.78 0.378&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 4&lt;/span> 21.4 0.210 -&lt;span style='color: #BB0000;'>0.368&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 5&lt;/span> 18.7 -&lt;span style='color: #BB0000;'>1.95&lt;/span> 0.845&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 6&lt;/span> 18.1 0.137 -&lt;span style='color: #BB0000;'>0.624&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 7&lt;/span> 14.3 -&lt;span style='color: #BB0000;'>2.77&lt;/span> 0.364&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 8&lt;/span> 24.4 1.81 -&lt;span style='color: #BB0000;'>1.30&lt;/span> &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 9&lt;/span> 22.8 2.12 -&lt;span style='color: #BB0000;'>1.95&lt;/span> &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>10&lt;/span> 19.2 0.531 -&lt;span style='color: #BB0000;'>1.51&lt;/span> &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># ℹ 22 more rows&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>For arguments that allow for multiple selections now work with recipes selectors like
&lt;a href="https://recipes.tidymodels.org/reference/has_role.html" target="_blank" rel="noopener">&lt;code>all_numeric_predictors()&lt;/code>&lt;/a> and
&lt;a href="https://recipes.tidymodels.org/reference/has_role.html" target="_blank" rel="noopener">&lt;code>has_role()&lt;/code>&lt;/a>.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/recipe.html'>recipe&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mpg&lt;/span> &lt;span class='o'>~&lt;/span> &lt;span class='nv'>.&lt;/span>, &lt;span class='nv'>mtcars&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/step_impute_bag.html'>step_impute_bag&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/has_role.html'>all_predictors&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>, impute_with &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/has_role.html'>has_role&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"predictor"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/prep.html'>prep&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/bake.html'>bake&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>new_data &lt;span class='o'>=&lt;/span> &lt;span class='nv'>mtcars&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 32 × 11&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; cyl disp hp drat wt qsec vs am gear carb mpg&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 1&lt;/span> 6 160 110 3.9 2.62 16.5 0 1 4 4 21 &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 2&lt;/span> 6 160 110 3.9 2.88 17.0 0 1 4 4 21 &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 3&lt;/span> 4 108 93 3.85 2.32 18.6 1 1 4 1 22.8&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 4&lt;/span> 6 258 110 3.08 3.22 19.4 1 0 3 1 21.4&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 5&lt;/span> 8 360 175 3.15 3.44 17.0 0 0 3 2 18.7&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 6&lt;/span> 6 225 105 2.76 3.46 20.2 1 0 3 1 18.1&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 7&lt;/span> 8 360 245 3.21 3.57 15.8 0 0 3 4 14.3&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 8&lt;/span> 4 147. 62 3.69 3.19 20 1 0 4 2 24.4&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 9&lt;/span> 4 141. 95 3.92 3.15 22.9 1 0 4 2 22.8&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>10&lt;/span> 6 168. 123 3.92 3.44 18.3 1 0 4 4 19.2&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># ℹ 22 more rows&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>These changes are backwards compatible meaning that the old ways still work with minimal warnings.&lt;/p>
&lt;h2 id="step_impute_bag-now-takes-up-less-memory">&lt;code>step_impute_bag()&lt;/code> now takes up less memory
&lt;a href="#step_impute_bag-now-takes-up-less-memory">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>We have another benefit for users of
&lt;a href="https://recipes.tidymodels.org/reference/step_impute_bag.html" target="_blank" rel="noopener">&lt;code>step_impute_bag()&lt;/code>&lt;/a>. For each variable it imputes on, it fits a bagged tree model, which is then used to predict with for imputation. It was noticed that these models had a larger memory footprint than was needed. This has been remedied, so now there should be a noticeable decrease in size for recipes with
&lt;a href="https://recipes.tidymodels.org/reference/step_impute_bag.html" target="_blank" rel="noopener">&lt;code>step_impute_bag()&lt;/code>&lt;/a>.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>rec&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/recipe.html'>recipe&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>Sale_Price&lt;/span> &lt;span class='o'>~&lt;/span> &lt;span class='nv'>.&lt;/span>, data &lt;span class='o'>=&lt;/span> &lt;span class='nv'>ames&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/step_impute_bag.html'>step_impute_bag&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://tidyselect.r-lib.org/reference/starts_with.html'>starts_with&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"Lot_"&lt;/span>&lt;span class='o'>)&lt;/span>, impute_with &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/has_role.html'>all_numeric_predictors&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/prep.html'>prep&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nf'>lobstr&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://lobstr.r-lib.org/reference/obj_size.html'>obj_size&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>rec&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; 20.23 MB&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>This recipe took up over &lt;code>75 MB&lt;/code> and now takes up &lt;code>20 MB&lt;/code>.&lt;/p>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Many thanks to all the people who contributed to recipes since the last release!&lt;/p>
&lt;p>
&lt;a href="https://github.com/chillerb" target="_blank" rel="noopener">@chillerb&lt;/a>,
&lt;a href="https://github.com/dshemetov" target="_blank" rel="noopener">@dshemetov&lt;/a>,
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/kevbaer" target="_blank" rel="noopener">@kevbaer&lt;/a>,
&lt;a href="https://github.com/nhward" target="_blank" rel="noopener">@nhward&lt;/a>,
&lt;a href="https://github.com/regisely" target="_blank" rel="noopener">@regisely&lt;/a>, and
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>.&lt;/p></description></item><item><title>Improved sparsity support in tidymodels</title><link>https://www.tidyverse.org/blog/2025/03/tidymodels-sparsity/</link><pubDate>Wed, 19 Mar 2025 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2025/03/tidymodels-sparsity/</guid><description>&lt;p>Photo by &lt;a href="https://unsplash.com/@oxygenvisuals?utm_content=creditCopyText&amp;utm_medium=referral&amp;utm_source=unsplash">Oliver Olah&lt;/a> on &lt;a href="https://unsplash.com/photos/green-tree-in-the-middle-of-grass-field-KD8nzFznQQ0?utm_content=creditCopyText&amp;utm_medium=referral&amp;utm_source=unsplash">Unsplash&lt;/a>&lt;/p>
&lt;!--
TODO:
* [x] Look over / edit the post's title in the yaml
* [x] Edit (or delete) the description; note this appears in the Twitter card
* [x] Pick category and tags (see existing with [`hugodown::tidy_show_meta()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html))
* [x] Find photo &amp; update yaml metadata
* [x] Create `thumbnail-sq.jpg`; height and width should be equal
* [x] Create `thumbnail-wd.jpg`; width should be >5x height
* [x] [`hugodown::use_tidy_thumbnails()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html)
* [x] Add intro sentence, e.g. the standard tagline for the package
* [x] [`usethis::use_tidy_thanks()`](https://usethis.r-lib.org/reference/use_tidy_thanks.html)
-->
&lt;p>We&amp;rsquo;re stoked to announce tidymodels now fully supports sparse data from end to end. We have been working on this for
&lt;a href="https://github.com/tidymodels/recipes/pull/515" target="_blank" rel="noopener">over 5 years&lt;/a>. This is an extension of the work we have done
&lt;a href="https://www.tidyverse.org/blog/2020/11/tidymodels-sparse-support/" target="_blank" rel="noopener">previously&lt;/a> with blueprints, which would carry the data sparsely some of the way.&lt;/p>
&lt;p>You will need
&lt;a href="https://recipes.tidymodels.org/news/index.html#recipes-120" target="_blank" rel="noopener">recipes 1.2.0&lt;/a>,
&lt;a href="https://parsnip.tidymodels.org/news/index.html#parsnip-130" target="_blank" rel="noopener">parsnip 1.3.0&lt;/a>,
&lt;a href="https://workflows.tidymodels.org/news/index.html#workflows-120" target="_blank" rel="noopener">workflows 1.2.0&lt;/a> or later for this to work.&lt;/p>
&lt;h2 id="what-are-sparse-data">What are sparse data?
&lt;a href="#what-are-sparse-data">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>The term &lt;strong>sparse data&lt;/strong> refers to a data set containing many zeroes. Sparse data appears in all kinds of fields and can be produced in a number of preprocessing methods. The reason why we care about sparse data is because of how computers store numbers. A 32-bit integer value takes 4 bytes to store. An array of 32-bit integers takes 40 bytes, and so on. This happens because each value is written down.&lt;/p>
&lt;p>A sparse representation instead stores the locations and values of the non-zero entries. Suppose we have the following vector with 20 entries:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">7&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>It could be represented sparsely using the 3 values &lt;code>positions = c(1, 3, 7)&lt;/code>, &lt;code>values = c(3, 5, 8)&lt;/code>, and &lt;code>length = 20&lt;/code>. Now, we have seven values to represent a vector of 20 elements. Since some modeling tasks contain even sparser data, this type of representation starts to show real benefits in terms of execution time and memory consumption.&lt;/p>
&lt;p>The tidymodels set of packages has undergone several internal changes to allow it to represent data sparsely internally when it would be beneficial. These changes allow you to fit models that contain sparse data faster and more memory efficiently than before. Moreover, it allows you to fit models previously not possible due to them not fitting in memory.&lt;/p>
&lt;h2 id="sparse-matrix-support">Sparse matrix support
&lt;a href="#sparse-matrix-support">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>The first benefit of these changes is that &lt;code>recipe()&lt;/code>, &lt;code>prep()&lt;/code>, &lt;code>bake()&lt;/code>, &lt;code>fit()&lt;/code>, and
&lt;a href="https://rdrr.io/r/stats/predict.html" target="_blank" rel="noopener">&lt;code>predict()&lt;/code>&lt;/a> now accept sparse matrices created using the Matrix package.&lt;/p>
&lt;p>The &lt;code>permeability_qsar&lt;/code> data set from the modeldata package contains quite a lot of zeroes in the predictors, so we will use it as a demonstration. Starting by coercing it into a sparse matrix.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://tidymodels.tidymodels.org'>tidymodels&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://Matrix.R-forge.R-project.org'>Matrix&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>permeability_sparse&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/methods/as.html'>as&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/matrix.html'>as.matrix&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>permeability_qsar&lt;/span>&lt;span class='o'>)&lt;/span>, &lt;span class='s'>"sparseMatrix"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>We can now use this sparse matrix in our code the same way as a dense matrix or data frame:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>rec_spec&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>recipe&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>permeability&lt;/span> &lt;span class='o'>~&lt;/span> &lt;span class='nv'>.&lt;/span>, data &lt;span class='o'>=&lt;/span> &lt;span class='nv'>permeability_sparse&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>step_zv&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>all_predictors&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>mod_spec&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>boost_tree&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"regression"&lt;/span>, &lt;span class='s'>"xgboost"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>wf_spec&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>workflow&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>rec_spec&lt;/span>, &lt;span class='nv'>mod_spec&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>Model training has the usual syntax:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>wf_fit&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>fit&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>wf_spec&lt;/span>, &lt;span class='nv'>permeability_sparse&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>as does prediction:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/stats/predict.html'>predict&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>wf_fit&lt;/span>, &lt;span class='nv'>permeability_sparse&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 165 × 1&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; .pred&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 1&lt;/span> 10.5 &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 2&lt;/span> 1.50 &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 3&lt;/span> 13.1 &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 4&lt;/span> 1.10 &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 5&lt;/span> 1.25 &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 6&lt;/span> 0.738&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 7&lt;/span> 29.3 &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 8&lt;/span> 2.44 &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 9&lt;/span> 36.3 &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>10&lt;/span> 4.31 &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># ℹ 155 more rows&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>Note that only some models/engines work well with sparse data. These are all listed here &lt;a href="https://www.tidymodels.org/find/sparse/">https://www.tidymodels.org/find/sparse/&lt;/a>. If the model doesn&amp;rsquo;t support sparse data, it will be coerced into the default non-sparse representation and used as usual.&lt;/p>
&lt;p>With a few exceptions, it should work like any other data set. However, this approach has two main limitations. The first is that we are limited to regression tasks since the outcome has to be numeric to be part of the sparse matrix.&lt;/p>
&lt;p>The second limitation is that it only works with non-formula methods for parsnip and workflows. This means that you can use a recipe with &lt;code>add_recipe()&lt;/code> or select variables directly with &lt;code>add_variables()&lt;/code> when using a workflow. And you need to use &lt;code>fit_xy()&lt;/code> instead of &lt;code>fit()&lt;/code> when using a parsnip object by itself.&lt;/p>
&lt;p>If this is of interest we also have a &lt;a href="https://www.tidymodels.org/">https://www.tidymodels.org/&lt;/a> post about
&lt;a href="https://www.tidymodels.org/learn/work/sparse-matrix/" target="_blank" rel="noopener">using sparse matrices in tidymodels&lt;/a>.&lt;/p>
&lt;h2 id="sparse-data-from-recipes-steps">Sparse data from recipes steps
&lt;a href="#sparse-data-from-recipes-steps">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Where this sparsity support really starts to shine is when the recipe we use will generate sparse data. They come in two flavors, sparsity creation steps and sparsity preserving steps. Both listed here: &lt;a href="https://www.tidymodels.org/find/sparse/">https://www.tidymodels.org/find/sparse/&lt;/a>.&lt;/p>
&lt;p>Some steps like &lt;code>step_dummy()&lt;/code>, &lt;code>step_indicate_na()&lt;/code>, and
&lt;a href="https://textrecipes.tidymodels.org/reference/step_tf.html" target="_blank" rel="noopener">&lt;code>textrecipes::step_tf()&lt;/code>&lt;/a> will almost always produce a lot of zeroes. We take advantage of that by generating it sparsely when it is beneficial. If these steps end up producing sparse vectors, we want to make sure the sparsity is preserved. A couple of handfuls of steps, such as &lt;code>step_impute_mean()&lt;/code> and &lt;code>step_scale(),&lt;/code> have been updated to be able to work efficiently with sparse vectors. Both types of steps are detailed in the above-linked list of compatible methods.&lt;/p>
&lt;p>What this means in practice is that if you use a model/engine that supports sparse data and have a recipe that produces enough sparse data, then the steps will switch to produce sparse data by using a new sparse data format to store the data (when appropriate) as the recipe is being processed. Then if the model can accept sparse objects, we convert the data from our new sparse format to a standard sparse matrix object. Increasing performance when possible while preserving performance otherwise.&lt;/p>
&lt;p>Below is a simple recipe using the &lt;code>ames&lt;/code> data set. &lt;code>step_dummy()&lt;/code> is applied to all the categorical predictors, leading to a significant amount of zeroes.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>rec_spec&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>recipe&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>Sale_Price&lt;/span> &lt;span class='o'>~&lt;/span> &lt;span class='nv'>.&lt;/span>, data &lt;span class='o'>=&lt;/span> &lt;span class='nv'>ames&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>step_zv&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>all_predictors&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>step_normalize&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>all_numeric_predictors&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>step_dummy&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>all_nominal_predictors&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>mod_spec&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>boost_tree&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"regression"&lt;/span>, &lt;span class='s'>"xgboost"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>wf_spec&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>workflow&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>rec_spec&lt;/span>, &lt;span class='nv'>mod_spec&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>When we go to fit it now, it takes around 125ms and allocates 37.2MB. Compared to before these changes it would take around 335ms and allocate 67.5MB.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>wf_fit&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>fit&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>wf_spec&lt;/span>, &lt;span class='nv'>ames&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>We see similar speedups when we predictor with around 20ms and 25.2MB now, compared to around 60ms and 55.6MB before.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/stats/predict.html'>predict&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>wf_fit&lt;/span>, &lt;span class='nv'>ames&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 2,930 × 1&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; .pred&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 1&lt;/span> &lt;span style='text-decoration: underline;'>208&lt;/span>649.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 2&lt;/span> &lt;span style='text-decoration: underline;'>115&lt;/span>339.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 3&lt;/span> &lt;span style='text-decoration: underline;'>148&lt;/span>634.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 4&lt;/span> &lt;span style='text-decoration: underline;'>239&lt;/span>770.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 5&lt;/span> &lt;span style='text-decoration: underline;'>190&lt;/span>082.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 6&lt;/span> &lt;span style='text-decoration: underline;'>184&lt;/span>604.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 7&lt;/span> &lt;span style='text-decoration: underline;'>208&lt;/span>572.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 8&lt;/span> &lt;span style='text-decoration: underline;'>177&lt;/span>403 &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 9&lt;/span> &lt;span style='text-decoration: underline;'>261&lt;/span>000.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>10&lt;/span> &lt;span style='text-decoration: underline;'>198&lt;/span>604.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># ℹ 2,920 more rows&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>These improvements are tightly related to memory allocation, which depends on the sparsity of the data set produced by the recipe. This is why it is hard to say how much benefit you will see. We have seen orders of magnitudes of improvements, both in terms of time and memory allocation. We have also been able to fit models where previously the data was too big to fit in memory.&lt;/p>
&lt;p>Please see the post on tidymodels.org, which goes into more detail about when you are likely to benefit from this and how to change your recipes and workflows to take full advantage of this new feature.&lt;/p>
&lt;p>There is also a &lt;a href="https://www.tidymodels.org/">https://www.tidymodels.org/&lt;/a> post going into a bit more detail about how to
&lt;a href="https://www.tidymodels.org/learn/work/sparse-recipe/" target="_blank" rel="noopener">use recipes to produce sparse data&lt;/a>.&lt;/p></description></item><item><title>recipes 1.1.0</title><link>https://www.tidyverse.org/blog/2024/07/recipes-1-1-0/</link><pubDate>Mon, 08 Jul 2024 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2024/07/recipes-1-1-0/</guid><description>&lt;!--
TODO:
* [x] Look over / edit the post's title in the yaml
* [x] Edit (or delete) the description; note this appears in the Twitter card
* [x] Pick category and tags (see existing with [`hugodown::tidy_show_meta()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html))
* [x] Find photo &amp; update yaml metadata
* [x] Create `thumbnail-sq.jpg`; height and width should be equal
* [x] Create `thumbnail-wd.jpg`; width should be >5x height
* [x] [`hugodown::use_tidy_thumbnails()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html)
* [x] Add intro sentence, e.g. the standard tagline for the package
* [x] [`usethis::use_tidy_thanks()`](https://usethis.r-lib.org/reference/use_tidy_thanks.html)
-->
&lt;p>We&amp;rsquo;re thrilled to announce the release of
&lt;a href="https://recipes.tidymodels.org/" target="_blank" rel="noopener">recipes&lt;/a> 1.1.0. recipes lets you create a pipeable sequence of feature engineering steps.&lt;/p>
&lt;p>You can install it from CRAN with:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/utils/install.packages.html'>install.packages&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"recipes"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>This blog post will go over some of the bigger changes in this release. Improvements in column type checking, allowing more data types to be passed to recipes, use of long formulas and better error for misspelled argument names.&lt;/p>
&lt;p>You can see a full list of changes in the
&lt;a href="https://github.com/tidymodels/recipes/releases/tag/v1.1.0" target="_blank" rel="noopener">release notes&lt;/a>.&lt;/p>
&lt;h2 id="column-type-checking">Column type checking
&lt;a href="#column-type-checking">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>A
&lt;a href="https://github.com/tidymodels/recipes/issues/793" target="_blank" rel="noopener">longtime issue&lt;/a> in recipes came from the fact that recipes didn&amp;rsquo;t keep a
&lt;a href="https://vctrs.r-lib.org/articles/type-size.html" target="_blank" rel="noopener">prototype&lt;/a> (ptype) of the data it was specified with. This would cause unexpected things to happen or uninformative error messages to appear if different data was used to
&lt;a href="https://recipes.tidymodels.org/reference/prep.html" target="_blank" rel="noopener">&lt;code>prep()&lt;/code>&lt;/a> than was used to create the
&lt;a href="https://recipes.tidymodels.org/reference/recipe.html" target="_blank" rel="noopener">&lt;code>recipe()&lt;/code>&lt;/a>.&lt;/p>
&lt;p>Every recipe you create starts with a call to
&lt;a href="https://recipes.tidymodels.org/reference/recipe.html" target="_blank" rel="noopener">&lt;code>recipe()&lt;/code>&lt;/a>. In the below example, we create a recipe where &lt;code>x2&lt;/code> starts by being a character vector, but the recipe is prepped where &lt;code>x2&lt;/code> is a numeric vector. This didn&amp;rsquo;t produce any warnings or errors, silently doing something unintended.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">data_template&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">tibble&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="n">outcome&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">rnorm&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">10&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="n">x1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">rnorm&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">10&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="n">x2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">sample&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">letters&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">10&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="bp">T&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;span class="n">rec&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">recipe&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">outcome&lt;/span> &lt;span class="o">~&lt;/span> &lt;span class="n">.,&lt;/span> &lt;span class="n">data_template&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">step_bin2factor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">all_numeric_predictors&lt;/span>&lt;span class="p">())&lt;/span>
&lt;span class="n">data_training&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">outcome&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">rnorm&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">1000&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">x1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">rnorm&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">1000&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">x2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">rnorm&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">1000&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="nf">prep&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">rec&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">training&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">data_training&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; ── Recipe ──────────────────────────────────────────────────────────────────────&lt;/span>
&lt;span class="c1">#&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; ── Inputs&lt;/span>
&lt;span class="c1">#&amp;gt; Number of variables by role&lt;/span>
&lt;span class="c1">#&amp;gt; outcome: 1&lt;/span>
&lt;span class="c1">#&amp;gt; predictor: 2&lt;/span>
&lt;span class="c1">#&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; ── Training information&lt;/span>
&lt;span class="c1">#&amp;gt; Training data contained 1000 data points and no incomplete rows.&lt;/span>
&lt;span class="c1">#&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; ── Operations&lt;/span>
&lt;span class="c1">#&amp;gt; • Dummy variable to factor conversion for: x1 | Trained&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Now, we get an error detailing how the data is different.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>data_template&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://tibble.tidyverse.org/reference/tibble.html'>tibble&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>outcome &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/stats/Normal.html'>rnorm&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>10&lt;/span>&lt;span class='o'>)&lt;/span>, x1 &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/stats/Normal.html'>rnorm&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>10&lt;/span>&lt;span class='o'>)&lt;/span>, x2 &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/sample.html'>sample&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>letters&lt;/span>, &lt;span class='m'>10&lt;/span>, &lt;span class='kc'>T&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>rec&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/recipe.html'>recipe&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>outcome&lt;/span> &lt;span class='o'>~&lt;/span> &lt;span class='nv'>.&lt;/span>, &lt;span class='nv'>data_template&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/step_bin2factor.html'>step_bin2factor&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/has_role.html'>all_numeric_predictors&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>data_training&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://tibble.tidyverse.org/reference/tibble.html'>tibble&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>outcome &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/stats/Normal.html'>rnorm&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>1000&lt;/span>&lt;span class='o'>)&lt;/span>, x1 &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/stats/Normal.html'>rnorm&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>1000&lt;/span>&lt;span class='o'>)&lt;/span>, x2 &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/stats/Normal.html'>rnorm&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>1000&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/prep.html'>prep&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>rec&lt;/span>, training &lt;span class='o'>=&lt;/span> &lt;span class='nv'>data_training&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00; font-weight: bold;'>Error&lt;/span>&lt;span style='font-weight: bold;'> in `prep()`:&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BB0000;'>✖&lt;/span> The following variable has the wrong class:&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BBBB;'>•&lt;/span> `x2` must have class &lt;span style='color: #0000BB;'>&amp;lt;numeric&amp;gt;&lt;/span>, not &lt;span style='color: #0000BB;'>&amp;lt;character&amp;gt;&lt;/span>.&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>Note that recipes created before version 1.1.0 don&amp;rsquo;t contain any ptype information, and will not undergo checking. Rerunning the code to create the recipe will add ptype information to the recipe.&lt;/p>
&lt;h2 id="input-checking-in-recipe">Input checking in &lt;code>recipe()&lt;/code>
&lt;a href="#input-checking-in-recipe">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>We have relaxed the requirements of data frames, while making feedback more helpful when something goes wrong.&lt;/p>
&lt;p>The data was previously passed through
&lt;a href="https://rdrr.io/r/stats/model.frame.html" target="_blank" rel="noopener">&lt;code>model.frame()&lt;/code>&lt;/a> inside the recipe, which restricted what could be handled. Previously prohibited input included data frames with list-columns or
&lt;a href="https://r-spatial.github.io/sf/" target="_blank" rel="noopener">sf&lt;/a> data frames. Both of these are now supported, as long as they are a &lt;code>data.frame&lt;/code> object.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>data_listcolumn&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://tibble.tidyverse.org/reference/tibble.html'>tibble&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> y &lt;span class='o'>=&lt;/span> &lt;span class='m'>1&lt;/span>&lt;span class='o'>:&lt;/span>&lt;span class='m'>4&lt;/span>,&lt;/span>
&lt;span> x &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/list.html'>list&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>1&lt;/span>&lt;span class='o'>:&lt;/span>&lt;span class='m'>3&lt;/span>, &lt;span class='m'>4&lt;/span>&lt;span class='o'>:&lt;/span>&lt;span class='m'>6&lt;/span>, &lt;span class='m'>3&lt;/span>&lt;span class='o'>:&lt;/span>&lt;span class='m'>1&lt;/span>, &lt;span class='m'>1&lt;/span>&lt;span class='o'>:&lt;/span>&lt;span class='m'>10&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/recipe.html'>recipe&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>y&lt;/span> &lt;span class='o'>~&lt;/span> &lt;span class='nv'>.&lt;/span>, data &lt;span class='o'>=&lt;/span> &lt;span class='nv'>data_listcolumn&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BBBB;'>──&lt;/span> &lt;span style='font-weight: bold;'>Recipe&lt;/span> &lt;span style='color: #00BBBB;'>──────────────────────────────────────────────────────────────────────&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;span class='c'>#&amp;gt; &lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;span class='c'>#&amp;gt; ── Inputs&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;span class='c'>#&amp;gt; Number of variables by role&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;span class='c'>#&amp;gt; outcome: 1&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; predictor: 1&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://r-spatial.github.io/sf/'>sf&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; Linking to GEOS 3.11.0, GDAL 3.5.3, PROJ 9.1.0; sf_use_s2() is TRUE&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;span class='nv'>pathshp&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/system.file.html'>system.file&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"shape/nc.shp"&lt;/span>, package &lt;span class='o'>=&lt;/span> &lt;span class='s'>"sf"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>data_sf&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://r-spatial.github.io/sf/reference/st_read.html'>st_read&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>pathshp&lt;/span>, quiet &lt;span class='o'>=&lt;/span> &lt;span class='kc'>TRUE&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/recipe.html'>recipe&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>AREA&lt;/span> &lt;span class='o'>~&lt;/span> &lt;span class='nv'>.&lt;/span>, data &lt;span class='o'>=&lt;/span> &lt;span class='nv'>data_sf&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BBBB;'>──&lt;/span> &lt;span style='font-weight: bold;'>Recipe&lt;/span> &lt;span style='color: #00BBBB;'>──────────────────────────────────────────────────────────────────────&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;span class='c'>#&amp;gt; &lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;span class='c'>#&amp;gt; ── Inputs&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;span class='c'>#&amp;gt; Number of variables by role&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;span class='c'>#&amp;gt; outcome: 1&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; predictor: 14&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>We are excited to see what people can do with these new options.&lt;/p>
&lt;p>Another way to tell a recipe what variables should be included and what roles they should have is to use
&lt;a href="https://recipes.tidymodels.org/reference/roles.html" target="_blank" rel="noopener">&lt;code>add_role()&lt;/code>&lt;/a> and
&lt;a href="https://recipes.tidymodels.org/reference/roles.html" target="_blank" rel="noopener">&lt;code>update_role()&lt;/code>&lt;/a>. But if you were not careful, you could end up in situations where the same variable is labeled as both the outcome and predictor.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='c'># didn't used to throw a warning&lt;/span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/recipe.html'>recipe&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mtcars&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/roles.html'>update_role&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://tidyselect.r-lib.org/reference/everything.html'>everything&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>, new_role &lt;span class='o'>=&lt;/span> &lt;span class='s'>"predictor"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/roles.html'>add_role&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"mpg"&lt;/span>, new_role &lt;span class='o'>=&lt;/span> &lt;span class='s'>"outcome"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00; font-weight: bold;'>Error&lt;/span>&lt;span style='font-weight: bold;'> in `add_role()`:&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00;'>!&lt;/span> `mpg` cannot get &lt;span style='color: #0000BB;'>"outcome"&lt;/span> role as it already has role &lt;span style='color: #0000BB;'>"predictor"&lt;/span>.&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>This error can be avoided by using
&lt;a href="https://recipes.tidymodels.org/reference/roles.html" target="_blank" rel="noopener">&lt;code>update_role()&lt;/code>&lt;/a> instead of
&lt;a href="https://recipes.tidymodels.org/reference/roles.html" target="_blank" rel="noopener">&lt;code>add_role()&lt;/code>&lt;/a>.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/recipe.html'>recipe&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mtcars&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/roles.html'>update_role&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://tidyselect.r-lib.org/reference/everything.html'>everything&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>, new_role &lt;span class='o'>=&lt;/span> &lt;span class='s'>"predictor"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/roles.html'>update_role&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"mpg"&lt;/span>, new_role &lt;span class='o'>=&lt;/span> &lt;span class='s'>"outcome"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BBBB;'>──&lt;/span> &lt;span style='font-weight: bold;'>Recipe&lt;/span> &lt;span style='color: #00BBBB;'>──────────────────────────────────────────────────────────────────────&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;span class='c'>#&amp;gt; &lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;span class='c'>#&amp;gt; ── Inputs&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;span class='c'>#&amp;gt; Number of variables by role&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;span class='c'>#&amp;gt; outcome: 1&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; predictor: 10&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;h2 id="long-formulas-in-recipe">Long formulas in &lt;code>recipe()&lt;/code>
&lt;a href="#long-formulas-in-recipe">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Related to the changes we saw above, we now fully support very long formulas without hitting a &lt;code>C stack usage&lt;/code> error.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>data_wide&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/matrix.html'>matrix&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>1&lt;/span>&lt;span class='o'>:&lt;/span>&lt;span class='m'>10000&lt;/span>, ncol &lt;span class='o'>=&lt;/span> &lt;span class='m'>10000&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>data_wide&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/as.data.frame.html'>as.data.frame&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>data_wide&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/names.html'>names&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>data_wide&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/paste.html'>paste0&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"x"&lt;/span>, &lt;span class='m'>1&lt;/span>&lt;span class='o'>:&lt;/span>&lt;span class='m'>10000&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>long_formula&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/stats/formula.html'>as.formula&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/paste.html'>paste&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"~ "&lt;/span>, &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/paste.html'>paste&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/names.html'>names&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>data_wide&lt;/span>&lt;span class='o'>)&lt;/span>, collapse &lt;span class='o'>=&lt;/span> &lt;span class='s'>" + "&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/recipe.html'>recipe&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>long_formula&lt;/span>, &lt;span class='nv'>data_wide&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BBBB;'>──&lt;/span> &lt;span style='font-weight: bold;'>Recipe&lt;/span> &lt;span style='color: #00BBBB;'>──────────────────────────────────────────────────────────────────────&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;span class='c'>#&amp;gt; &lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;span class='c'>#&amp;gt; ── Inputs&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;span class='c'>#&amp;gt; Number of variables by role&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;span class='c'>#&amp;gt; predictor: 10000&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;h2 id="better-error-for-misspelled-argument-names">Better error for misspelled argument names
&lt;a href="#better-error-for-misspelled-argument-names">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>If you have used recipes long enough you are very likely to have run into the following error.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">recipe&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mpg&lt;/span> &lt;span class="o">~&lt;/span> &lt;span class="n">.,&lt;/span> &lt;span class="n">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">mtcars&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">|&amp;gt;&lt;/span>
&lt;span class="nf">step_pca&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">all_numeric_predictors&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="n">number&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">4&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">|&amp;gt;&lt;/span>
&lt;span class="nf">prep&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1">#&amp;gt; Error in `step_pca()`:&lt;/span>
&lt;span class="c1">#&amp;gt; Caused by error in `prep()`:&lt;/span>
&lt;span class="c1">#&amp;gt; ! Can&amp;#39;t rename variables in this context.&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>The first time you saw it, it didn&amp;rsquo;t make much sense. Hopefully, you figured out that
&lt;a href="https://recipes.tidymodels.org/reference/step_pca.html" target="_blank" rel="noopener">step_pca()&lt;/a> doesn&amp;rsquo;t have a &lt;code>number&lt;/code> argument, and instead uses &lt;code>num_comp&lt;/code> to determine the number of principal components to return. This confusion will be a thing of the past as we now include this improved error message.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/recipe.html'>recipe&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mpg&lt;/span> &lt;span class='o'>~&lt;/span> &lt;span class='nv'>.&lt;/span>, data &lt;span class='o'>=&lt;/span> &lt;span class='nv'>mtcars&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/step_pca.html'>step_pca&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/has_role.html'>all_numeric_predictors&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>, number &lt;span class='o'>=&lt;/span> &lt;span class='m'>4&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/prep.html'>prep&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00; font-weight: bold;'>Error&lt;/span>&lt;span style='font-weight: bold;'> in `step_pca()`:&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='font-weight: bold;'>Caused by error in `prep()` at recipes/R/recipe.R:479:9:&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00;'>!&lt;/span> The following argument was specified but do not exist: `number`.&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;h2 id="quality-of-life-increases-in-step_dummy">Quality of life increases in &lt;code>step_dummy()&lt;/code>
&lt;a href="#quality-of-life-increases-in-step_dummy">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>I would imagine that one of the most used steps is
&lt;a href="https://recipes.tidymodels.org/reference/step_dummy.html" target="_blank" rel="noopener">&lt;code>step_dummy()&lt;/code>&lt;/a>. We have improved the errors and warnings it spits out when things go sideways.&lt;/p>
&lt;p>If you apply
&lt;a href="https://recipes.tidymodels.org/reference/step_dummy.html" target="_blank" rel="noopener">&lt;code>step_dummy()&lt;/code>&lt;/a> to a variable that contains a lot of levels, it will produce a lot of columns, and the resulting object may not fit in memory. This can lead to the following error.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">data_id&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">tibble&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="n">id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">as.character&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="m">100000&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="n">x1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">rnorm&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">100000&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="n">x2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">sample&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">letters&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">100000&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">TRUE&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;span class="nf">recipe&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">~&lt;/span> &lt;span class="n">.,&lt;/span> &lt;span class="n">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">data_id&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">|&amp;gt;&lt;/span>
&lt;span class="nf">step_dummy&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">all_nominal_predictors&lt;/span>&lt;span class="p">())&lt;/span> &lt;span class="o">|&amp;gt;&lt;/span>
&lt;span class="nf">prep&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1">#&amp;gt; Error: vector memory exhausted (limit reached?)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Instead, you now get a more helpful error message.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>data_id&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://tibble.tidyverse.org/reference/tibble.html'>tibble&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> id &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/character.html'>as.character&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>1&lt;/span>&lt;span class='o'>:&lt;/span>&lt;span class='m'>100000&lt;/span>&lt;span class='o'>)&lt;/span>, &lt;/span>
&lt;span> x1 &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/stats/Normal.html'>rnorm&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>100000&lt;/span>&lt;span class='o'>)&lt;/span>, &lt;/span>
&lt;span> x2 &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/sample.html'>sample&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>letters&lt;/span>, &lt;span class='m'>100000&lt;/span>, &lt;span class='kc'>TRUE&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/recipe.html'>recipe&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>~&lt;/span> &lt;span class='nv'>.&lt;/span>, data &lt;span class='o'>=&lt;/span> &lt;span class='nv'>data_id&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/step_dummy.html'>step_dummy&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/has_role.html'>all_nominal_predictors&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/prep.html'>prep&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00; font-weight: bold;'>Error&lt;/span>&lt;span style='font-weight: bold;'> in `step_dummy()`:&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='font-weight: bold;'>Caused by error:&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00;'>!&lt;/span> `id` contains too many levels (100000), which would result in a&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; data.frame too large to fit in memory.&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>Likewise, you will get helpful errors if
&lt;a href="https://recipes.tidymodels.org/reference/step_dummy.html" target="_blank" rel="noopener">&lt;code>step_dummy()&lt;/code>&lt;/a> gets a &lt;code>NA&lt;/code> or unseen values.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>data_train&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://tibble.tidyverse.org/reference/tibble.html'>tibble&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"a"&lt;/span>, &lt;span class='s'>"b"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>data_unseen&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://tibble.tidyverse.org/reference/tibble.html'>tibble&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='s'>"c"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>rec_spec&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/recipe.html'>recipe&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>~&lt;/span>&lt;span class='nv'>.&lt;/span>, data &lt;span class='o'>=&lt;/span> &lt;span class='nv'>data_train&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/step_dummy.html'>step_dummy&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>x&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/prep.html'>prep&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>rec_spec&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/bake.html'>bake&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>data_unseen&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; Warning: &lt;span style='color: #BBBB00;'>!&lt;/span> There are new levels in `x`: &lt;span style='color: #0000BB;'>"c"&lt;/span>.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BBBB;'>ℹ&lt;/span> Consider using step_novel() (`?recipes::step_novel()`) before `step_dummy()`&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; to handle unseen values.&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 1 × 1&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; x_b&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>1&lt;/span> &lt;span style='color: #BB0000;'>NA&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>data_na&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://tibble.tidyverse.org/reference/tibble.html'>tibble&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='kc'>NA&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>rec_spec&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/bake.html'>bake&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>data_na&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; Warning: &lt;span style='color: #BBBB00;'>!&lt;/span> There are new levels in `x`: &lt;span style='color: #0000BB;'>NA&lt;/span>.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BBBB;'>ℹ&lt;/span> Consider using step_unknown() (`?recipes::step_unknown()`) before&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; `step_dummy()` to handle missing values.&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 1 × 1&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; x_b&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>1&lt;/span> &lt;span style='color: #BB0000;'>NA&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>A big thank you to all the people who have contributed to recipes since the release of v1.0.10:&lt;/p>
&lt;p>
&lt;a href="https://github.com/brynhum" target="_blank" rel="noopener">@brynhum&lt;/a>,
&lt;a href="https://github.com/DemetriPananos" target="_blank" rel="noopener">@DemetriPananos&lt;/a>,
&lt;a href="https://github.com/diegoperoni" target="_blank" rel="noopener">@diegoperoni&lt;/a>,
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/JiahuaQu" target="_blank" rel="noopener">@JiahuaQu&lt;/a>,
&lt;a href="https://github.com/joranE" target="_blank" rel="noopener">@joranE&lt;/a>,
&lt;a href="https://github.com/nhward" target="_blank" rel="noopener">@nhward&lt;/a>,
&lt;a href="https://github.com/olivroy" target="_blank" rel="noopener">@olivroy&lt;/a>, and
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>.&lt;/p>
&lt;h2 id="chocolate-chocolate-chip-cookies">Chocolate Chocolate Chip Cookies
&lt;a href="#chocolate-chocolate-chip-cookies">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>preheat oven 350°F&lt;/p>
&lt;ul>
&lt;li>1/3c butter&lt;/li>
&lt;li>1/2 + 1/3c sugar&lt;/li>
&lt;/ul>
&lt;p>mix until fluffy&lt;/p>
&lt;ul>
&lt;li>1 tsp vanilla&lt;/li>
&lt;li>1 egg&lt;/li>
&lt;/ul>
&lt;p>mix until combined&lt;/p>
&lt;ul>
&lt;li>1/2c cocoa&lt;/li>
&lt;li>1/2 tsp baking soda&lt;/li>
&lt;li>1c flour&lt;/li>
&lt;/ul>
&lt;p>mix until combined&lt;/p>
&lt;ul>
&lt;li>3/4c chocolate chips&lt;/li>
&lt;/ul>
&lt;p>bake for about 8 mins, depending on size! they will crack on top, but still be soft.&lt;/p></description></item><item><title>Q4 2023 tidymodels digest</title><link>https://www.tidyverse.org/blog/2024/01/tidymodels-2023-q4/</link><pubDate>Tue, 09 Jan 2024 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2024/01/tidymodels-2023-q4/</guid><description>&lt;!--
TODO:
* [ ] Look over / edit the post's title in the yaml
* [ ] Edit (or delete) the description; note this appears in the Twitter card
* [ ] Pick category and tags (see existing with [`hugodown::tidy_show_meta()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html))
* [ ] Find photo &amp; update yaml metadata
* [ ] Create `thumbnail-sq.jpg`; height and width should be equal
* [ ] Create `thumbnail-wd.jpg`; width should be >5x height
* [ ] [`hugodown::use_tidy_thumbnails()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html)
* [ ] Add intro sentence, e.g. the standard tagline for the package
* [ ] [`usethis::use_tidy_thanks()`](https://usethis.r-lib.org/reference/use_tidy_thanks.html)
-->
&lt;p>The
&lt;a href="https://www.tidymodels.org/" target="_blank" rel="noopener">tidymodels&lt;/a> framework is a collection of R packages for modeling and machine learning using tidyverse principles.&lt;/p>
&lt;p>Since the beginning of 2021, we have been publishing
&lt;a href="https://www.tidyverse.org/categories/roundup/" target="_blank" rel="noopener">quarterly updates&lt;/a> here on the tidyverse blog summarizing what&amp;rsquo;s new in the tidymodels ecosystem. The purpose of these regular posts is to share useful new features and any updates you may have missed. You can check out the
&lt;a href="https://www.tidyverse.org/tags/tidymodels/" target="_blank" rel="noopener">&lt;code>tidymodels&lt;/code> tag&lt;/a> to find all tidymodels blog posts here, including our roundup posts as well as those that are more focused, like this post from the past couple of months:&lt;/p>
&lt;ul>
&lt;li>
&lt;a href="https://www.tidyverse.org/blog/2023/11/tidymodels-errors-q4/" target="_blank" rel="noopener">Three ways errors are about to get better in tidymodels&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>Since
&lt;a href="https://www.tidyverse.org/blog/2022/12/tidymodels-2022-q4/" target="_blank" rel="noopener">our last roundup post&lt;/a>, there have been CRAN releases of 7 tidymodels packages. Here are links to their NEWS files:&lt;/p>
&lt;div class="highlight">
&lt;ul>
&lt;li>embed
&lt;a href="https://embed.tidymodels.org/news/index.html" target="_blank" rel="noopener">(1.1.3)&lt;/a>&lt;/li>
&lt;li>modeldb
&lt;a href="https://modeldb.tidymodels.org/news/index.html" target="_blank" rel="noopener">(0.3.0)&lt;/a>&lt;/li>
&lt;li>recipes
&lt;a href="https://recipes.tidymodels.org/news/index.html" target="_blank" rel="noopener">(1.0.9)&lt;/a>&lt;/li>
&lt;li>spatialsample
&lt;a href="https://spatialsample.tidymodels.org/news/index.html" target="_blank" rel="noopener">(0.5.1)&lt;/a>&lt;/li>
&lt;li>stacks
&lt;a href="https://stacks.tidymodels.org/news/index.html" target="_blank" rel="noopener">(1.0.3)&lt;/a>&lt;/li>
&lt;li>textrecipes
&lt;a href="https://textrecipes.tidymodels.org/news/index.html" target="_blank" rel="noopener">(1.0.6)&lt;/a>&lt;/li>
&lt;li>tidyposterior
&lt;a href="https://tidyposterior.tidymodels.org/news/index.html" target="_blank" rel="noopener">(1.0.1)&lt;/a>&lt;/li>
&lt;/ul>
&lt;/div>
&lt;p>We&amp;rsquo;ll highlight a few especially notable changes below: updated warnings when normalizing, and better error messages in recipes.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://tidymodels.tidymodels.org'>tidymodels&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/utils/data.html'>data&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"ames"&lt;/span>, package &lt;span class='o'>=&lt;/span> &lt;span class='s'>"modeldata"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;h2 id="updated-warnings-when-normalizing">Updated warnings when normalizing
&lt;a href="#updated-warnings-when-normalizing">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>The latest release of recipes features an overhaul of the warnings and error messages to use the
&lt;a href="https://cli.r-lib.org/" target="_blank" rel="noopener">cli&lt;/a> package. With this, we are starting the project of providing more information signaling when things don&amp;rsquo;t go well.&lt;/p>
&lt;p>The first type of issue we now signal for is when you try to normalize data that contains elements such as &lt;code>NA&lt;/code> or &lt;code>Inf&lt;/code>. These can sneak in for several reasons, and before this release, it happened silently. Below we are creating a recipe using the &lt;code>ames&lt;/code> data set, and before we normalize, we are taking the logarithms of all variables that pertain to square footage.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>rec&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>recipe&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>Sale_Price&lt;/span> &lt;span class='o'>~&lt;/span> &lt;span class='nv'>.&lt;/span>, data &lt;span class='o'>=&lt;/span> &lt;span class='nv'>ames&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>step_log&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>contains&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"SF"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>step_normalize&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>all_numeric_predictors&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>prep&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; Warning: Columns `BsmtFin_SF_1`, `BsmtFin_SF_2`, `Bsmt_Unf_SF`, `Total_Bsmt_SF`,&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; `Second_Flr_SF`, `Wood_Deck_SF`, and `Open_Porch_SF` returned NaN, because&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; variance cannot be calculated and scaling cannot be used. Consider avoiding&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; `Inf` or `-Inf` values and/or setting `na_rm = TRUE` before normalizing.&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>We now get a warning that something happened, telling us that it encountered &lt;code>Inf&lt;/code> or &lt;code>-Inf&lt;/code>. Knowing that, we can go back and investigate what went wrong. If we exclude &lt;code>step_normalize()&lt;/code> and &lt;code>bake()&lt;/code> the recipe, we see that a number of &lt;code>-Inf&lt;/code> values appear.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>recipe&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>Sale_Price&lt;/span> &lt;span class='o'>~&lt;/span> &lt;span class='nv'>.&lt;/span>, data &lt;span class='o'>=&lt;/span> &lt;span class='nv'>ames&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>step_log&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>contains&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"SF"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>prep&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>bake&lt;/span>&lt;span class='o'>(&lt;/span>new_data &lt;span class='o'>=&lt;/span> &lt;span class='kc'>NULL&lt;/span>, &lt;span class='nf'>contains&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"SF"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>glimpse&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; Rows: 2,930&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; Columns: 8&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; $ BsmtFin_SF_1 &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> 0.6931472, 1.7917595, 0.0000000, 0.0000000, 1.0986123, 1…&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; $ BsmtFin_SF_2 &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> -Inf, 4.969813, -Inf, -Inf, -Inf, -Inf, -Inf, -Inf, -Inf…&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; $ Bsmt_Unf_SF &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> 6.089045, 5.598422, 6.006353, 6.951772, 4.919981, 5.7807…&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; $ Total_Bsmt_SF &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> 6.984716, 6.782192, 7.192182, 7.654443, 6.833032, 6.8308…&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; $ First_Flr_SF &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> 7.412160, 6.797940, 7.192182, 7.654443, 6.833032, 6.8308…&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; $ Second_Flr_SF &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> -Inf, -Inf, -Inf, -Inf, 6.552508, 6.519147, -Inf, -Inf, …&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; $ Wood_Deck_SF &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> 5.347108, 4.941642, 5.973810, -Inf, 5.356586, 5.886104, …&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; $ Open_Porch_SF &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> 4.127134, -Inf, 3.583519, -Inf, 3.526361, 3.583519, -Inf…&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>Looking at the bare data set, we notice that the &lt;code>-Inf&lt;/code> all appear where there are &lt;code>0&lt;/code>, which makes sense since &lt;code>log(0)&lt;/code> is undefined.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>ames&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>select&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>contains&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"SF"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>glimpse&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; Rows: 2,930&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; Columns: 8&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; $ BsmtFin_SF_1 &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> 2, 6, 1, 1, 3, 3, 3, 1, 3, 7, 7, 1, 7, 3, 3, 1, 3, 3, 4,…&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; $ BsmtFin_SF_2 &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> 0, 144, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1120, 0, 0, …&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; $ Bsmt_Unf_SF &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> 441, 270, 406, 1045, 137, 324, 722, 1017, 415, 994, 763,…&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; $ Total_Bsmt_SF &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> 1080, 882, 1329, 2110, 928, 926, 1338, 1280, 1595, 994, …&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; $ First_Flr_SF &lt;span style='color: #555555; font-style: italic;'>&amp;lt;int&amp;gt;&lt;/span> 1656, 896, 1329, 2110, 928, 926, 1338, 1280, 1616, 1028,…&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; $ Second_Flr_SF &lt;span style='color: #555555; font-style: italic;'>&amp;lt;int&amp;gt;&lt;/span> 0, 0, 0, 0, 701, 678, 0, 0, 0, 776, 892, 0, 676, 0, 0, 1…&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; $ Wood_Deck_SF &lt;span style='color: #555555; font-style: italic;'>&amp;lt;int&amp;gt;&lt;/span> 210, 140, 393, 0, 212, 360, 0, 0, 237, 140, 157, 483, 0,…&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; $ Open_Porch_SF &lt;span style='color: #555555; font-style: italic;'>&amp;lt;int&amp;gt;&lt;/span> 62, 0, 36, 0, 34, 36, 0, 82, 152, 60, 84, 21, 75, 0, 54,…&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>Knowing that it was &lt;code>0&lt;/code> that caused the problem, we can set an &lt;code>offset&lt;/code> to avoid taking &lt;code>log(0)&lt;/code>.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>rec&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>recipe&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>Sale_Price&lt;/span> &lt;span class='o'>~&lt;/span> &lt;span class='nv'>.&lt;/span>, data &lt;span class='o'>=&lt;/span> &lt;span class='nv'>ames&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>step_log&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>contains&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"SF"&lt;/span>&lt;span class='o'>)&lt;/span>, offset &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.5&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>step_normalize&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>all_numeric_predictors&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>prep&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>These warnings appear in &lt;code>step_scale()&lt;/code>, &lt;code>step_normalize()&lt;/code>, &lt;code>step_center()&lt;/code> or &lt;code>step_range()&lt;/code>.&lt;/p>
&lt;h2 id="better-error-messages-in-recipes">Better error messages in recipes
&lt;a href="#better-error-messages-in-recipes">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Another problem that happens a lot when using recipes, is accidentally selecting variables that have the wrong types. Previously this caused the following error:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>recipe&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>Sale_Price&lt;/span> &lt;span class='o'>~&lt;/span> &lt;span class='nv'>.&lt;/span>, data &lt;span class='o'>=&lt;/span> &lt;span class='nv'>ames&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>step_dummy&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>starts_with&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"Lot_"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>prep&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; Error in `step_dummy()`:&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; Caused by error in `prep()`:&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; ! All columns selected for the step should be string, factor, or ordered.&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>In the newest release, it will detail the offending variables and what was wrong with them.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>recipe&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>Sale_Price&lt;/span> &lt;span class='o'>~&lt;/span> &lt;span class='nv'>.&lt;/span>, data &lt;span class='o'>=&lt;/span> &lt;span class='nv'>ames&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>step_dummy&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>starts_with&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"Lot_"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>prep&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>bake&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00; font-weight: bold;'>Error&lt;/span>&lt;span style='font-weight: bold;'> in `step_dummy()`:&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='font-weight: bold;'>Caused by error in `prep()`:&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BB0000;'>✖&lt;/span> All columns selected for the step should be factor or ordered.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BBBB;'>•&lt;/span> 1 double variable found: `Lot_Frontage`&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BBBB;'>•&lt;/span> 1 integer variable found: `Lot_Area`&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;h2 id="coming-attractions">Coming Attractions
&lt;a href="#coming-attractions">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>In the next month or so we are planning a cascade of CRAN releases. There is a lot of new functionality coming your way, especially in the tune package.&lt;/p>
&lt;p>A number of our packages will (finally) be able to cohesively fit, evaluate, tune, and predict models for event times (a.k.a.,
&lt;a href="https://en.wikipedia.org/wiki/Survival_analysis" target="_blank" rel="noopener">survival analysis&lt;/a>). If you don&amp;rsquo;t do this type of work, you might not notice the new capabilities. However, if you do, tidymodels will be able to do a lot more for you.&lt;/p>
&lt;p>We&amp;rsquo;ve also implemented a number of features related to model fairness. These tools allow tidymodels users to identify when machine learning models behave unfairly towards certain groups of people, and will also be included in the upcoming releases of tidymodels packages in Q1.&lt;/p>
&lt;p>We&amp;rsquo;ll highlight a lot of these new capabilities in blog posts here as well as tutorials on
&lt;a href="https://www.tidymodels.org/" target="_blank" rel="noopener">&lt;code>tidymodels.org&lt;/code>&lt;/a>.&lt;/p>
&lt;p>So, there&amp;rsquo;s a lot more coming! We are very excited to have these features officially available and to see what people can do with them.&lt;/p>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>We&amp;rsquo;d like to thank those in the community that contributed to tidymodels in the last quarter:&lt;/p>
&lt;div class="highlight">
&lt;ul>
&lt;li>embed:
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>.&lt;/li>
&lt;li>modeldb:
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/hadley" target="_blank" rel="noopener">@hadley&lt;/a>, and
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>.&lt;/li>
&lt;li>recipes:
&lt;a href="https://github.com/atusy" target="_blank" rel="noopener">@atusy&lt;/a>,
&lt;a href="https://github.com/bcadenato" target="_blank" rel="noopener">@bcadenato&lt;/a>,
&lt;a href="https://github.com/collinberke" target="_blank" rel="noopener">@collinberke&lt;/a>,
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/gfronk" target="_blank" rel="noopener">@gfronk&lt;/a>,
&lt;a href="https://github.com/jkennel" target="_blank" rel="noopener">@jkennel&lt;/a>,
&lt;a href="https://github.com/joeycouse" target="_blank" rel="noopener">@joeycouse&lt;/a>,
&lt;a href="https://github.com/jxu" target="_blank" rel="noopener">@jxu&lt;/a>,
&lt;a href="https://github.com/mastoffel" target="_blank" rel="noopener">@mastoffel&lt;/a>,
&lt;a href="https://github.com/matthewgson" target="_blank" rel="noopener">@matthewgson&lt;/a>,
&lt;a href="https://github.com/millermc38" target="_blank" rel="noopener">@millermc38&lt;/a>,
&lt;a href="https://github.com/ray-p144" target="_blank" rel="noopener">@ray-p144&lt;/a>,
&lt;a href="https://github.com/sebsfox" target="_blank" rel="noopener">@sebsfox&lt;/a>,
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>, and
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>.&lt;/li>
&lt;li>spatialsample:
&lt;a href="https://github.com/mikemahoney218" target="_blank" rel="noopener">@mikemahoney218&lt;/a>.&lt;/li>
&lt;li>stacks:
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>, and
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>.&lt;/li>
&lt;li>textrecipes:
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/jd4ds" target="_blank" rel="noopener">@jd4ds&lt;/a>, and
&lt;a href="https://github.com/masurp" target="_blank" rel="noopener">@masurp&lt;/a>.&lt;/li>
&lt;li>tidyposterior:
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>.&lt;/li>
&lt;/ul>
&lt;/div>
&lt;p>We&amp;rsquo;re grateful for all of the tidymodels community, from observers to users to contributors. Happy modeling!&lt;/p></description></item><item><title>Q1 2023 tidymodels digest</title><link>https://www.tidyverse.org/blog/2023/04/tidymodels-2023-q1/</link><pubDate>Fri, 28 Apr 2023 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2023/04/tidymodels-2023-q1/</guid><description>&lt;!--
TODO:
* [x] Look over / edit the post's title in the yaml
* [x] Edit (or delete) the description; note this appears in the Twitter card
* [x] Pick category and tags (see existing with [`hugodown::tidy_show_meta()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html))
* [x] Find photo &amp; update yaml metadata
* [x] Create `thumbnail-sq.jpg`; height and width should be equal
* [x] Create `thumbnail-wd.jpg`; width should be >5x height
* [x] [`hugodown::use_tidy_thumbnails()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html)
* [x] Add intro sentence, e.g. the standard tagline for the package
* [x] [`usethis::use_tidy_thanks()`](https://usethis.r-lib.org/reference/use_tidy_thanks.html)
-->
&lt;p>The
&lt;a href="https://www.tidymodels.org/" target="_blank" rel="noopener">tidymodels&lt;/a> framework is a collection of R packages for modeling and machine learning using tidyverse principles.&lt;/p>
&lt;p>Since the beginning of 2021, we have been publishing
&lt;a href="https://www.tidyverse.org/categories/roundup/" target="_blank" rel="noopener">quarterly updates&lt;/a> here on the tidyverse blog summarizing what&amp;rsquo;s new in the tidymodels ecosystem. The purpose of these regular posts is to share useful new features and any updates you may have missed. You can check out the
&lt;a href="https://www.tidyverse.org/tags/tidymodels/" target="_blank" rel="noopener">&lt;code>tidymodels&lt;/code> tag&lt;/a> to find all tidymodels blog posts here, including our roundup posts as well as those that are more focused, like these posts from the past couple of months:&lt;/p>
&lt;ul>
&lt;li>
&lt;a href="https://www.tidyverse.org/blog/2023/04/tuning-delights/" target="_blank" rel="noopener">Tuning hyperparameters with tidymodels is a delight&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://www.tidyverse.org/blog/2023/04/censored-0-2-0/" target="_blank" rel="noopener">censored 0.2.0&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://www.simonpcouch.com/blog/speedups-2023/" target="_blank" rel="noopener">The tidymodels is getting a whole lot faster&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>Since
&lt;a href="https://www.tidyverse.org/blog/2022/12/tidymodels-2022-q4/" target="_blank" rel="noopener">our last roundup post&lt;/a>, there have been CRAN releases of 24 tidymodels packages. Here are links to their NEWS files:&lt;/p>
&lt;div class="highlight">
&lt;ul>
&lt;li>agua
&lt;a href="https://agua.tidymodels.org/news/index.html" target="_blank" rel="noopener">(0.1.2)&lt;/a>&lt;/li>
&lt;li>baguette
&lt;a href="https://baguette.tidymodels.org/news/index.html" target="_blank" rel="noopener">(1.0.1)&lt;/a>&lt;/li>
&lt;li>broom
&lt;a href="https://broom.tidymodels.org/news/index.html" target="_blank" rel="noopener">(1.0.4)&lt;/a>&lt;/li>
&lt;li>butcher
&lt;a href="https://butcher.tidymodels.org/news/index.html" target="_blank" rel="noopener">(0.3.2)&lt;/a>&lt;/li>
&lt;li>censored
&lt;a href="https://censored.tidymodels.org/news/index.html" target="_blank" rel="noopener">(0.2.0)&lt;/a>&lt;/li>
&lt;li>dials
&lt;a href="https://dials.tidymodels.org/news/index.html" target="_blank" rel="noopener">(1.2.0)&lt;/a>&lt;/li>
&lt;li>discrim
&lt;a href="https://discrim.tidymodels.org/news/index.html" target="_blank" rel="noopener">(1.0.1)&lt;/a>&lt;/li>
&lt;li>embed
&lt;a href="https://embed.tidymodels.org/news/index.html" target="_blank" rel="noopener">(1.1.0)&lt;/a>&lt;/li>
&lt;li>finetune
&lt;a href="https://finetune.tidymodels.org/news/index.html" target="_blank" rel="noopener">(1.1.0)&lt;/a>&lt;/li>
&lt;li>hardhat
&lt;a href="https://hardhat.tidymodels.org/news/index.html" target="_blank" rel="noopener">(1.3.0)&lt;/a>&lt;/li>
&lt;li>modeldata
&lt;a href="https://modeldata.tidymodels.org/news/index.html" target="_blank" rel="noopener">(1.1.0)&lt;/a>&lt;/li>
&lt;li>parsnip
&lt;a href="https://parsnip.tidymodels.org/news/index.html" target="_blank" rel="noopener">(1.1.0)&lt;/a>&lt;/li>
&lt;li>recipes
&lt;a href="https://recipes.tidymodels.org/news/index.html" target="_blank" rel="noopener">(1.0.6)&lt;/a>&lt;/li>
&lt;li>rules
&lt;a href="https://rules.tidymodels.org/news/index.html" target="_blank" rel="noopener">(1.0.2)&lt;/a>&lt;/li>
&lt;li>spatialsample
&lt;a href="https://spatialsample.tidymodels.org/news/index.html" target="_blank" rel="noopener">(0.3.0)&lt;/a>&lt;/li>
&lt;li>stacks
&lt;a href="https://stacks.tidymodels.org/news/index.html" target="_blank" rel="noopener">(1.0.2)&lt;/a>&lt;/li>
&lt;li>textrecipes
&lt;a href="https://textrecipes.tidymodels.org/news/index.html" target="_blank" rel="noopener">(1.0.3)&lt;/a>&lt;/li>
&lt;li>themis
&lt;a href="https://themis.tidymodels.org/news/index.html" target="_blank" rel="noopener">(1.0.1)&lt;/a>&lt;/li>
&lt;li>tidyclust
&lt;a href="https://tidyclust.tidymodels.org/news/index.html" target="_blank" rel="noopener">(0.1.2)&lt;/a>&lt;/li>
&lt;li>tidypredict
&lt;a href="https://tidypredict.tidymodels.org/news/index.html" target="_blank" rel="noopener">(0.5)&lt;/a>&lt;/li>
&lt;li>tune
&lt;a href="https://tune.tidymodels.org/news/index.html" target="_blank" rel="noopener">(1.1.1)&lt;/a>&lt;/li>
&lt;li>workflows
&lt;a href="https://workflows.tidymodels.org/news/index.html" target="_blank" rel="noopener">(1.1.3)&lt;/a>&lt;/li>
&lt;li>workflowsets
&lt;a href="https://workflowsets.tidymodels.org/news/index.html" target="_blank" rel="noopener">(1.0.1)&lt;/a>&lt;/li>
&lt;li>yardstick
&lt;a href="https://yardstick.tidymodels.org/news/index.html" target="_blank" rel="noopener">(1.2.0)&lt;/a>&lt;/li>
&lt;/ul>
&lt;/div>
&lt;p>We&amp;rsquo;ll highlight a few especially notable changes below: more informative errors and faster code. First, loading the collection of packages:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://tidymodels.tidymodels.org'>tidymodels&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://embed.tidymodels.org'>embed&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/utils/data.html'>data&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"ames"&lt;/span>, package &lt;span class='o'>=&lt;/span> &lt;span class='s'>"modeldata"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;h2 id="more-informative-errors">More informative errors
&lt;a href="#more-informative-errors">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>In the last few months we have been focused on refining error messages so that they are easier for the users to pinpoint what went wrong and where. Since the modeling pipeline can be quite complicated, getting uninformative errors is a no-go.&lt;/p>
&lt;p>Across the tidymodels, error messages will now indicate the user-facing function that caused the error rather than the internal function that it came from.&lt;/p>
&lt;p>From dials, an error that looked like&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">degree&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">range&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">1L&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">5L&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1">#&amp;gt; Error in `new_quant_param()`:&lt;/span>
&lt;span class="c1">#&amp;gt; ! Since `type = &amp;#39;double&amp;#39;`, please use that data type for the range.&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Now says that the error came from &lt;code>degree()&lt;/code> rather than &lt;code>new_quant_param()&lt;/code>&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>degree&lt;/span>&lt;span class='o'>(&lt;/span>range &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>1L&lt;/span>, &lt;span class='m'>5L&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00; font-weight: bold;'>Error&lt;/span>&lt;span style='font-weight: bold;'> in `degree()`:&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00;'>!&lt;/span> Since `type = 'double'`, please use that data type for the range.&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>The same thing can be seen with the yardstick metrics&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">mtcars&lt;/span> &lt;span class="o">|&amp;gt;&lt;/span>
&lt;span class="nf">accuracy&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">vs&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">am&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; Error in `dplyr::summarise()`:&lt;/span>
&lt;span class="c1">#&amp;gt; ℹ In argument: `.estimate = metric_fn(truth = vs, estimate = am, na_rm =&lt;/span>
&lt;span class="c1">#&amp;gt; na_rm)`.&lt;/span>
&lt;span class="c1">#&amp;gt; Caused by error in `validate_class()`:&lt;/span>
&lt;span class="c1">#&amp;gt; ! `truth` should be a factor but a numeric was supplied.&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>which now errors much more informatively&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>mtcars&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>accuracy&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>vs&lt;/span>, &lt;span class='nv'>am&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00; font-weight: bold;'>Error&lt;/span>&lt;span style='font-weight: bold;'> in `accuracy()`:&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00;'>!&lt;/span> `truth` should be a factor, not a `numeric`.&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>Lastly, one of the biggest improvements came in recipes, which now shows which step caused the error instead of saying it happened in
&lt;a href="https://recipes.tidymodels.org/reference/prep.html" target="_blank" rel="noopener">&lt;code>prep()&lt;/code>&lt;/a> or
&lt;a href="https://recipes.tidymodels.org/reference/bake.html" target="_blank" rel="noopener">&lt;code>bake()&lt;/code>&lt;/a>. This is a huge improvement since preprocessing pipelines which often string together many preprocessing steps.&lt;/p>
&lt;p>Before&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">recipe&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">~&lt;/span>&lt;span class="n">.,&lt;/span> &lt;span class="n">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ames&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">|&amp;gt;&lt;/span>
&lt;span class="nf">step_novel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Neighborhood&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">new_level&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;Gilbert&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">|&amp;gt;&lt;/span>
&lt;span class="nf">prep&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1">#&amp;gt; Error in `prep()`:&lt;/span>
&lt;span class="c1">#&amp;gt; ! Columns already contain the new level: Neighborhood&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Now&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/recipe.html'>recipe&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>~&lt;/span>&lt;span class='nv'>.&lt;/span>, data &lt;span class='o'>=&lt;/span> &lt;span class='nv'>ames&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/step_novel.html'>step_novel&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>Neighborhood&lt;/span>, new_level &lt;span class='o'>=&lt;/span> &lt;span class='s'>"Gilbert"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/prep.html'>prep&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00; font-weight: bold;'>Error&lt;/span>&lt;span style='font-weight: bold;'> in `step_novel()`:&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='font-weight: bold;'>Caused by error in `prep()` at recipes/R/recipe.R:437:8:&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00;'>!&lt;/span> Columns already contain the new level: Neighborhood&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>Especially when calls to recipes functions are deeply nested inside the call stack, like in &lt;code>fit_resamples()&lt;/code> or &lt;code>tune_grid()&lt;/code>, these changes make a big difference.&lt;/p>
&lt;h2 id="things-are-getting-faster">Things are getting faster
&lt;a href="#things-are-getting-faster">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>As we have written about in
&lt;a href="https://www.simonpcouch.com/blog/speedups-2023/" target="_blank" rel="noopener">The tidymodels is getting a whole lot faster&lt;/a> and
&lt;a href="https://www.tidyverse.org/blog/2023/04/performant-packages/" target="_blank" rel="noopener">Writing performant code with tidy tools&lt;/a>, we have been working on tightening up the performance of the tidymodels code. These changes are mostly related to the infrastructure code, meaning that the speedup will bring you to closer underlying implementations.&lt;/p>
&lt;p>A different kind of speedup is found with the addition of the
&lt;a href="https://embed.tidymodels.org/reference/step_pca_truncated.html" target="_blank" rel="noopener">step_pca_truncated()&lt;/a> step added in the embed package.&lt;/p>
&lt;p>
&lt;a href="https://en.wikipedia.org/wiki/Principal_component_analysis" target="_blank" rel="noopener">Principal Component Analysis&lt;/a> is a really powerful and fast method for dimensionality reduction of large data sets. However, for data with many columns, it can be computationally expensive to calculate all the principal components.
&lt;a href="https://embed.tidymodels.org/reference/step_pca_truncated.html" target="_blank" rel="noopener">&lt;code>step_pca_truncated()&lt;/code>&lt;/a> works in much the same way as
&lt;a href="https://recipes.tidymodels.org/reference/step_pca.html" target="_blank" rel="noopener">&lt;code>step_pca()&lt;/code>&lt;/a> but it only calculates the number of components it needs&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>pca_normal&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/recipe.html'>recipe&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>Sale_Price&lt;/span> &lt;span class='o'>~&lt;/span> &lt;span class='nv'>.&lt;/span>, data &lt;span class='o'>=&lt;/span> &lt;span class='nv'>ames&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/step_dummy.html'>step_dummy&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/has_role.html'>all_nominal_predictors&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/step_pca.html'>step_pca&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/has_role.html'>all_numeric_predictors&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>, num_comp &lt;span class='o'>=&lt;/span> &lt;span class='m'>3&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>pca_truncated&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/recipe.html'>recipe&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>Sale_Price&lt;/span> &lt;span class='o'>~&lt;/span> &lt;span class='nv'>.&lt;/span>, data &lt;span class='o'>=&lt;/span> &lt;span class='nv'>ames&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/step_dummy.html'>step_dummy&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/has_role.html'>all_nominal_predictors&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://embed.tidymodels.org/reference/step_pca_truncated.html'>step_pca_truncated&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/has_role.html'>all_numeric_predictors&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>, num_comp &lt;span class='o'>=&lt;/span> &lt;span class='m'>3&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>tictoc&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/pkg/tictoc/man/tic.html'>tic&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/prep.html'>prep&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>pca_normal&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/bake.html'>bake&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>ames&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 2,930 × 4&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; Sale_Price PC1 PC2 PC3&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;int&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 1&lt;/span> &lt;span style='text-decoration: underline;'>215&lt;/span>000 -&lt;span style='color: #BB0000; text-decoration: underline;'>31&lt;/span>&lt;span style='color: #BB0000;'>793.&lt;/span> &lt;span style='text-decoration: underline;'>4&lt;/span>151. -&lt;span style='color: #BB0000;'>197.&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 2&lt;/span> &lt;span style='text-decoration: underline;'>105&lt;/span>000 -&lt;span style='color: #BB0000; text-decoration: underline;'>12&lt;/span>&lt;span style='color: #BB0000;'>198.&lt;/span> -&lt;span style='color: #BB0000;'>611.&lt;/span> -&lt;span style='color: #BB0000;'>524.&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 3&lt;/span> &lt;span style='text-decoration: underline;'>172&lt;/span>000 -&lt;span style='color: #BB0000; text-decoration: underline;'>14&lt;/span>&lt;span style='color: #BB0000;'>911.&lt;/span> -&lt;span style='color: #BB0000;'>265.&lt;/span> &lt;span style='text-decoration: underline;'>7&lt;/span>568.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 4&lt;/span> &lt;span style='text-decoration: underline;'>244&lt;/span>000 -&lt;span style='color: #BB0000; text-decoration: underline;'>12&lt;/span>&lt;span style='color: #BB0000;'>072.&lt;/span> -&lt;span style='color: #BB0000; text-decoration: underline;'>1&lt;/span>&lt;span style='color: #BB0000;'>813.&lt;/span> 918.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 5&lt;/span> &lt;span style='text-decoration: underline;'>189&lt;/span>900 -&lt;span style='color: #BB0000; text-decoration: underline;'>14&lt;/span>&lt;span style='color: #BB0000;'>418.&lt;/span> -&lt;span style='color: #BB0000;'>345.&lt;/span> -&lt;span style='color: #BB0000;'>302.&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 6&lt;/span> &lt;span style='text-decoration: underline;'>195&lt;/span>500 -&lt;span style='color: #BB0000; text-decoration: underline;'>10&lt;/span>&lt;span style='color: #BB0000;'>704.&lt;/span> -&lt;span style='color: #BB0000; text-decoration: underline;'>1&lt;/span>&lt;span style='color: #BB0000;'>367.&lt;/span> -&lt;span style='color: #BB0000;'>204.&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 7&lt;/span> &lt;span style='text-decoration: underline;'>213&lt;/span>500 -&lt;span style='color: #BB0000; text-decoration: underline;'>5&lt;/span>&lt;span style='color: #BB0000;'>858.&lt;/span> -&lt;span style='color: #BB0000; text-decoration: underline;'>2&lt;/span>&lt;span style='color: #BB0000;'>805.&lt;/span> 114.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 8&lt;/span> &lt;span style='text-decoration: underline;'>191&lt;/span>500 -&lt;span style='color: #BB0000; text-decoration: underline;'>5&lt;/span>&lt;span style='color: #BB0000;'>932.&lt;/span> -&lt;span style='color: #BB0000; text-decoration: underline;'>2&lt;/span>&lt;span style='color: #BB0000;'>762.&lt;/span> 131.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 9&lt;/span> &lt;span style='text-decoration: underline;'>236&lt;/span>500 -&lt;span style='color: #BB0000; text-decoration: underline;'>6&lt;/span>&lt;span style='color: #BB0000;'>368.&lt;/span> -&lt;span style='color: #BB0000; text-decoration: underline;'>2&lt;/span>&lt;span style='color: #BB0000;'>862.&lt;/span> 325.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>10&lt;/span> &lt;span style='text-decoration: underline;'>189&lt;/span>000 -&lt;span style='color: #BB0000; text-decoration: underline;'>8&lt;/span>&lt;span style='color: #BB0000;'>368.&lt;/span> -&lt;span style='color: #BB0000; text-decoration: underline;'>2&lt;/span>&lt;span style='color: #BB0000;'>219.&lt;/span> 126.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># ℹ 2,920 more rows&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;span class='nf'>tictoc&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/pkg/tictoc/man/tic.html'>toc&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; 0.782 sec elapsed&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>tictoc&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/pkg/tictoc/man/tic.html'>tic&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/prep.html'>prep&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>pca_truncated&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/bake.html'>bake&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>ames&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 2,930 × 4&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; Sale_Price PC1 PC2 PC3&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;int&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 1&lt;/span> &lt;span style='text-decoration: underline;'>215&lt;/span>000 -&lt;span style='color: #BB0000; text-decoration: underline;'>31&lt;/span>&lt;span style='color: #BB0000;'>793.&lt;/span> &lt;span style='text-decoration: underline;'>4&lt;/span>151. -&lt;span style='color: #BB0000;'>197.&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 2&lt;/span> &lt;span style='text-decoration: underline;'>105&lt;/span>000 -&lt;span style='color: #BB0000; text-decoration: underline;'>12&lt;/span>&lt;span style='color: #BB0000;'>198.&lt;/span> -&lt;span style='color: #BB0000;'>611.&lt;/span> -&lt;span style='color: #BB0000;'>524.&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 3&lt;/span> &lt;span style='text-decoration: underline;'>172&lt;/span>000 -&lt;span style='color: #BB0000; text-decoration: underline;'>14&lt;/span>&lt;span style='color: #BB0000;'>911.&lt;/span> -&lt;span style='color: #BB0000;'>265.&lt;/span> &lt;span style='text-decoration: underline;'>7&lt;/span>568.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 4&lt;/span> &lt;span style='text-decoration: underline;'>244&lt;/span>000 -&lt;span style='color: #BB0000; text-decoration: underline;'>12&lt;/span>&lt;span style='color: #BB0000;'>072.&lt;/span> -&lt;span style='color: #BB0000; text-decoration: underline;'>1&lt;/span>&lt;span style='color: #BB0000;'>813.&lt;/span> 918.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 5&lt;/span> &lt;span style='text-decoration: underline;'>189&lt;/span>900 -&lt;span style='color: #BB0000; text-decoration: underline;'>14&lt;/span>&lt;span style='color: #BB0000;'>418.&lt;/span> -&lt;span style='color: #BB0000;'>345.&lt;/span> -&lt;span style='color: #BB0000;'>302.&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 6&lt;/span> &lt;span style='text-decoration: underline;'>195&lt;/span>500 -&lt;span style='color: #BB0000; text-decoration: underline;'>10&lt;/span>&lt;span style='color: #BB0000;'>704.&lt;/span> -&lt;span style='color: #BB0000; text-decoration: underline;'>1&lt;/span>&lt;span style='color: #BB0000;'>367.&lt;/span> -&lt;span style='color: #BB0000;'>204.&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 7&lt;/span> &lt;span style='text-decoration: underline;'>213&lt;/span>500 -&lt;span style='color: #BB0000; text-decoration: underline;'>5&lt;/span>&lt;span style='color: #BB0000;'>858.&lt;/span> -&lt;span style='color: #BB0000; text-decoration: underline;'>2&lt;/span>&lt;span style='color: #BB0000;'>805.&lt;/span> 114.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 8&lt;/span> &lt;span style='text-decoration: underline;'>191&lt;/span>500 -&lt;span style='color: #BB0000; text-decoration: underline;'>5&lt;/span>&lt;span style='color: #BB0000;'>932.&lt;/span> -&lt;span style='color: #BB0000; text-decoration: underline;'>2&lt;/span>&lt;span style='color: #BB0000;'>762.&lt;/span> 131.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 9&lt;/span> &lt;span style='text-decoration: underline;'>236&lt;/span>500 -&lt;span style='color: #BB0000; text-decoration: underline;'>6&lt;/span>&lt;span style='color: #BB0000;'>368.&lt;/span> -&lt;span style='color: #BB0000; text-decoration: underline;'>2&lt;/span>&lt;span style='color: #BB0000;'>862.&lt;/span> 325.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>10&lt;/span> &lt;span style='text-decoration: underline;'>189&lt;/span>000 -&lt;span style='color: #BB0000; text-decoration: underline;'>8&lt;/span>&lt;span style='color: #BB0000;'>368.&lt;/span> -&lt;span style='color: #BB0000; text-decoration: underline;'>2&lt;/span>&lt;span style='color: #BB0000;'>219.&lt;/span> 126.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># ℹ 2,920 more rows&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;span class='nf'>tictoc&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/pkg/tictoc/man/tic.html'>toc&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; 0.162 sec elapsed&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>The speedup will be orders of magnitude larger for very wide data.&lt;/p>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>We&amp;rsquo;d like to thank those in the community that contributed to tidymodels in the last quarter:&lt;/p>
&lt;div class="highlight">
&lt;ul>
&lt;li>agua:
&lt;a href="https://github.com/hfrick" target="_blank" rel="noopener">@hfrick&lt;/a>,
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>, and
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>.&lt;/li>
&lt;li>baguette:
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>, and
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>.&lt;/li>
&lt;li>broom:
&lt;a href="https://github.com/benwhalley" target="_blank" rel="noopener">@benwhalley&lt;/a>,
&lt;a href="https://github.com/dgrtwo" target="_blank" rel="noopener">@dgrtwo&lt;/a>,
&lt;a href="https://github.com/egosv" target="_blank" rel="noopener">@egosv&lt;/a>,
&lt;a href="https://github.com/hfrick" target="_blank" rel="noopener">@hfrick&lt;/a>,
&lt;a href="https://github.com/JorisChau" target="_blank" rel="noopener">@JorisChau&lt;/a>,
&lt;a href="https://github.com/mccarthy-m-g" target="_blank" rel="noopener">@mccarthy-m-g&lt;/a>,
&lt;a href="https://github.com/MichaelChirico" target="_blank" rel="noopener">@MichaelChirico&lt;/a>,
&lt;a href="https://github.com/paige-cho" target="_blank" rel="noopener">@paige-cho&lt;/a>,
&lt;a href="https://github.com/PoGibas" target="_blank" rel="noopener">@PoGibas&lt;/a>,
&lt;a href="https://github.com/rsbivand" target="_blank" rel="noopener">@rsbivand&lt;/a>,
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>,
&lt;a href="https://github.com/ste-tuf" target="_blank" rel="noopener">@ste-tuf&lt;/a>, and
&lt;a href="https://github.com/victor-vscn" target="_blank" rel="noopener">@victor-vscn&lt;/a>.&lt;/li>
&lt;li>butcher:
&lt;a href="https://github.com/ashbythorpe" target="_blank" rel="noopener">@ashbythorpe&lt;/a>,
&lt;a href="https://github.com/DavisVaughan" target="_blank" rel="noopener">@DavisVaughan&lt;/a>,
&lt;a href="https://github.com/hfrick" target="_blank" rel="noopener">@hfrick&lt;/a>,
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>,
&lt;a href="https://github.com/rdavis120" target="_blank" rel="noopener">@rdavis120&lt;/a>,
&lt;a href="https://github.com/rkb965" target="_blank" rel="noopener">@rkb965&lt;/a>, and
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>.&lt;/li>
&lt;li>censored:
&lt;a href="https://github.com/brunocarlin" target="_blank" rel="noopener">@brunocarlin&lt;/a>, and
&lt;a href="https://github.com/hfrick" target="_blank" rel="noopener">@hfrick&lt;/a>.&lt;/li>
&lt;li>dials:
&lt;a href="https://github.com/amin0511ss" target="_blank" rel="noopener">@amin0511ss&lt;/a>,
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/hfrick" target="_blank" rel="noopener">@hfrick&lt;/a>, and
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>.&lt;/li>
&lt;li>discrim:
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>, and
&lt;a href="https://github.com/tomwagstaff-opml" target="_blank" rel="noopener">@tomwagstaff-opml&lt;/a>.&lt;/li>
&lt;li>embed:
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/jackobenco016" target="_blank" rel="noopener">@jackobenco016&lt;/a>, and
&lt;a href="https://github.com/skasowitz" target="_blank" rel="noopener">@skasowitz&lt;/a>.&lt;/li>
&lt;li>finetune:
&lt;a href="https://github.com/Freestyleyang" target="_blank" rel="noopener">@Freestyleyang&lt;/a>,
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>, and
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>.&lt;/li>
&lt;li>hardhat:
&lt;a href="https://github.com/cregouby" target="_blank" rel="noopener">@cregouby&lt;/a>,
&lt;a href="https://github.com/DavisVaughan" target="_blank" rel="noopener">@DavisVaughan&lt;/a>,
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/frank113" target="_blank" rel="noopener">@frank113&lt;/a>, and
&lt;a href="https://github.com/mikemahoney218" target="_blank" rel="noopener">@mikemahoney218&lt;/a>.&lt;/li>
&lt;li>modeldata:
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>, and
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>.&lt;/li>
&lt;li>parsnip:
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/emmafeuer" target="_blank" rel="noopener">@emmafeuer&lt;/a>,
&lt;a href="https://github.com/exsell-jc" target="_blank" rel="noopener">@exsell-jc&lt;/a>,
&lt;a href="https://github.com/hfrick" target="_blank" rel="noopener">@hfrick&lt;/a>,
&lt;a href="https://github.com/mariamaseng" target="_blank" rel="noopener">@mariamaseng&lt;/a>,
&lt;a href="https://github.com/SHo-JANG" target="_blank" rel="noopener">@SHo-JANG&lt;/a>,
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>,
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>, and
&lt;a href="https://github.com/Tripartio" target="_blank" rel="noopener">@Tripartio&lt;/a>.&lt;/li>
&lt;li>recipes:
&lt;a href="https://github.com/AshesITR" target="_blank" rel="noopener">@AshesITR&lt;/a>,
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/hfrick" target="_blank" rel="noopener">@hfrick&lt;/a>,
&lt;a href="https://github.com/jjcurtin" target="_blank" rel="noopener">@jjcurtin&lt;/a>,
&lt;a href="https://github.com/lang-benjamin" target="_blank" rel="noopener">@lang-benjamin&lt;/a>,
&lt;a href="https://github.com/lbui30" target="_blank" rel="noopener">@lbui30&lt;/a>,
&lt;a href="https://github.com/PeterKoffeldt" target="_blank" rel="noopener">@PeterKoffeldt&lt;/a>,
&lt;a href="https://github.com/rdavis120" target="_blank" rel="noopener">@rdavis120&lt;/a>,
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>,
&lt;a href="https://github.com/StevenWallaert" target="_blank" rel="noopener">@StevenWallaert&lt;/a>,
&lt;a href="https://github.com/tellyshia" target="_blank" rel="noopener">@tellyshia&lt;/a>,
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>,
&lt;a href="https://github.com/ttrodrigz" target="_blank" rel="noopener">@ttrodrigz&lt;/a>, and
&lt;a href="https://github.com/zecojls" target="_blank" rel="noopener">@zecojls&lt;/a>.&lt;/li>
&lt;li>rules:
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/hfrick" target="_blank" rel="noopener">@hfrick&lt;/a>,
&lt;a href="https://github.com/jonthegeek" target="_blank" rel="noopener">@jonthegeek&lt;/a>, and
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>.&lt;/li>
&lt;li>spatialsample:
&lt;a href="https://github.com/hfrick" target="_blank" rel="noopener">@hfrick&lt;/a>,
&lt;a href="https://github.com/mikemahoney218" target="_blank" rel="noopener">@mikemahoney218&lt;/a>, and
&lt;a href="https://github.com/RaymondBalise" target="_blank" rel="noopener">@RaymondBalise&lt;/a>.&lt;/li>
&lt;li>stacks:
&lt;a href="https://github.com/amin0511ss" target="_blank" rel="noopener">@amin0511ss&lt;/a>,
&lt;a href="https://github.com/gundalav" target="_blank" rel="noopener">@gundalav&lt;/a>,
&lt;a href="https://github.com/jrosell" target="_blank" rel="noopener">@jrosell&lt;/a>,
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>,
&lt;a href="https://github.com/pbulsink" target="_blank" rel="noopener">@pbulsink&lt;/a>,
&lt;a href="https://github.com/rdavis120" target="_blank" rel="noopener">@rdavis120&lt;/a>, and
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>.&lt;/li>
&lt;li>textrecipes:
&lt;a href="https://github.com/apsteinmetz" target="_blank" rel="noopener">@apsteinmetz&lt;/a>,
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/gary-mu" target="_blank" rel="noopener">@gary-mu&lt;/a>,
&lt;a href="https://github.com/hfrick" target="_blank" rel="noopener">@hfrick&lt;/a>, and
&lt;a href="https://github.com/nipnipj" target="_blank" rel="noopener">@nipnipj&lt;/a>.&lt;/li>
&lt;li>themis:
&lt;a href="https://github.com/carlganz" target="_blank" rel="noopener">@carlganz&lt;/a>,
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/hfrick" target="_blank" rel="noopener">@hfrick&lt;/a>,
&lt;a href="https://github.com/nipnipj" target="_blank" rel="noopener">@nipnipj&lt;/a>,
&lt;a href="https://github.com/rmurphy49" target="_blank" rel="noopener">@rmurphy49&lt;/a>, and
&lt;a href="https://github.com/rowanjh" target="_blank" rel="noopener">@rowanjh&lt;/a>.&lt;/li>
&lt;li>tidyclust:
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/hfrick" target="_blank" rel="noopener">@hfrick&lt;/a>,
&lt;a href="https://github.com/hsbadr" target="_blank" rel="noopener">@hsbadr&lt;/a>,
&lt;a href="https://github.com/jonthegeek" target="_blank" rel="noopener">@jonthegeek&lt;/a>, and
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>.&lt;/li>
&lt;li>tidypredict:
&lt;a href="https://github.com/edgararuiz" target="_blank" rel="noopener">@edgararuiz&lt;/a>, and
&lt;a href="https://github.com/sdcharle" target="_blank" rel="noopener">@sdcharle&lt;/a>.&lt;/li>
&lt;li>tune:
&lt;a href="https://github.com/BenoitLondon" target="_blank" rel="noopener">@BenoitLondon&lt;/a>,
&lt;a href="https://github.com/cphaarmeyer" target="_blank" rel="noopener">@cphaarmeyer&lt;/a>,
&lt;a href="https://github.com/hfrick" target="_blank" rel="noopener">@hfrick&lt;/a>,
&lt;a href="https://github.com/jthomasmock" target="_blank" rel="noopener">@jthomasmock&lt;/a>,
&lt;a href="https://github.com/mrjujas" target="_blank" rel="noopener">@mrjujas&lt;/a>,
&lt;a href="https://github.com/MxNl" target="_blank" rel="noopener">@MxNl&lt;/a>,
&lt;a href="https://github.com/nabsiddiqui" target="_blank" rel="noopener">@nabsiddiqui&lt;/a>,
&lt;a href="https://github.com/rdavis120" target="_blank" rel="noopener">@rdavis120&lt;/a>,
&lt;a href="https://github.com/SHo-JANG" target="_blank" rel="noopener">@SHo-JANG&lt;/a>,
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>,
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>,
&lt;a href="https://github.com/walrossker" target="_blank" rel="noopener">@walrossker&lt;/a>, and
&lt;a href="https://github.com/yusuftengriverdi" target="_blank" rel="noopener">@yusuftengriverdi&lt;/a>.&lt;/li>
&lt;li>workflows:
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>.&lt;/li>
&lt;li>workflowsets:
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/gsimchoni" target="_blank" rel="noopener">@gsimchoni&lt;/a>, and
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>.&lt;/li>
&lt;li>yardstick:
&lt;a href="https://github.com/77makr" target="_blank" rel="noopener">@77makr&lt;/a>,
&lt;a href="https://github.com/burch-cm" target="_blank" rel="noopener">@burch-cm&lt;/a>,
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/idavydov" target="_blank" rel="noopener">@idavydov&lt;/a>,
&lt;a href="https://github.com/kadyb" target="_blank" rel="noopener">@kadyb&lt;/a>,
&lt;a href="https://github.com/mawardivaz" target="_blank" rel="noopener">@mawardivaz&lt;/a>,
&lt;a href="https://github.com/mikemahoney218" target="_blank" rel="noopener">@mikemahoney218&lt;/a>,
&lt;a href="https://github.com/moloscripts" target="_blank" rel="noopener">@moloscripts&lt;/a>,
&lt;a href="https://github.com/nyambea" target="_blank" rel="noopener">@nyambea&lt;/a>,
&lt;a href="https://github.com/SHo-JANG" target="_blank" rel="noopener">@SHo-JANG&lt;/a>,
&lt;a href="https://github.com/simdadim" target="_blank" rel="noopener">@simdadim&lt;/a>, and
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>.&lt;/li>
&lt;/ul>
&lt;/div>
&lt;p>We&amp;rsquo;re grateful for all of the tidymodels community, from observers to users to contributors. Happy modeling!&lt;/p></description></item><item><title>Q4 2022 tidymodels digest</title><link>https://www.tidyverse.org/blog/2022/12/tidymodels-2022-q4/</link><pubDate>Thu, 29 Dec 2022 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2022/12/tidymodels-2022-q4/</guid><description>&lt;p>The
&lt;a href="https://www.tidymodels.org/" target="_blank" rel="noopener">tidymodels&lt;/a> framework is a collection of R packages for modeling and machine learning using tidyverse principles.&lt;/p>
&lt;p>Since the beginning of 2021, we have been publishing
&lt;a href="https://www.tidyverse.org/categories/roundup/" target="_blank" rel="noopener">quarterly updates&lt;/a> here on the tidyverse blog summarizing what&amp;rsquo;s new in the tidymodels ecosystem. The purpose of these regular posts is to share useful new features and any updates you may have missed. You can check out the
&lt;a href="https://www.tidyverse.org/tags/tidymodels/" target="_blank" rel="noopener">&lt;code>tidymodels&lt;/code> tag&lt;/a> to find all tidymodels blog posts here, including our roundup posts as well as those that are more focused, like these posts from the past couple months:&lt;/p>
&lt;ul>
&lt;li>
&lt;a href="https://www.tidyverse.org/blog/2022/12/tidyclust-0-1-0/" target="_blank" rel="noopener">tidyclust is on CRAN&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://www.tidyverse.org/blog/2022/11/model-calibration/" target="_blank" rel="noopener">Model calibration&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://www.tidyverse.org/blog/2022/10/parsnip-checking-1-0-2/" target="_blank" rel="noopener">Improvements to model specification checking in tidymodels&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>Since
&lt;a href="https://www.tidyverse.org/blog/2022/10/tidymodels-2022-q3/" target="_blank" rel="noopener">our last roundup post&lt;/a>, there have been CRAN releases of 9 tidymodels packages. Here are links to their NEWS files:&lt;/p>
&lt;div class="highlight">
&lt;ul>
&lt;li>bonsai
&lt;a href="https://bonsai.tidymodels.org/news/index.html" target="_blank" rel="noopener">(0.2.1)&lt;/a>&lt;/li>
&lt;li>broom
&lt;a href="https://broom.tidymodels.org/news/index.html" target="_blank" rel="noopener">(1.0.2)&lt;/a>&lt;/li>
&lt;li>butcher
&lt;a href="https://butcher.tidymodels.org/news/index.html" target="_blank" rel="noopener">(0.3.1)&lt;/a>&lt;/li>
&lt;li>dials
&lt;a href="https://dials.tidymodels.org/news/index.html" target="_blank" rel="noopener">(1.1.0)&lt;/a>&lt;/li>
&lt;li>parsnip
&lt;a href="https://parsnip.tidymodels.org/news/index.html" target="_blank" rel="noopener">(1.0.3)&lt;/a>&lt;/li>
&lt;li>recipes
&lt;a href="https://recipes.tidymodels.org/news/index.html" target="_blank" rel="noopener">(1.0.3)&lt;/a>&lt;/li>
&lt;li>rsample
&lt;a href="https://rsample.tidymodels.org/news/index.html" target="_blank" rel="noopener">(1.1.1)&lt;/a>&lt;/li>
&lt;li>stacks
&lt;a href="https://stacks.tidymodels.org/news/index.html" target="_blank" rel="noopener">(1.0.1)&lt;/a>&lt;/li>
&lt;li>workflows
&lt;a href="https://workflows.tidymodels.org/news/index.html" target="_blank" rel="noopener">(1.1.2)&lt;/a>&lt;/li>
&lt;/ul>
&lt;/div>
&lt;p>We&amp;rsquo;ll highlight a few especially notable changes below: more specialized role selectors in recipes, extended support for grouped resampling in rsample, and a big speedup in parsnip. First, loading the collection of packages:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://tidymodels.tidymodels.org'>tidymodels&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;h2 id="specialized-role-selectors">Specialized role selectors
&lt;a href="#specialized-role-selectors">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>The
&lt;a href="https://recipes.tidymodels.org/" target="_blank" rel="noopener">recipes package for preprocessing&lt;/a> supports tidyselect-style variable selection, and includes some of its own selectors to support common modeling workflows.&lt;/p>
&lt;p>To illustrate, we&amp;rsquo;ll make use of a dataset &lt;code>goofy_data&lt;/code> with a number of different variable types:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/utils/str.html'>str&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>goofy_data&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; tibble [100 × 10] (S3: tbl_df/tbl/data.frame)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; $ class: Factor w/ 2 levels "class_1","class_2": 1 1 2 1 2 1 1 2 2 2 ...&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; $ a : Factor w/ 7 levels "-3","-2","-1",..: 4 4 3 2 4 5 2 2 3 5 ...&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; $ b : Factor w/ 9 levels "-4","-3","-2",..: 9 5 4 3 4 7 4 2 3 6 ...&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; $ c : int [1:100] 0 0 0 0 0 0 0 -1 0 1 ...&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; $ d : int [1:100] 0 1 1 1 0 1 1 0 0 1 ...&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; $ e : int [1:100] 1 0 1 0 0 1 1 0 1 1 ...&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; $ f : num [1:100] 1.01 -1.99 2.18 2.3 -3.01 ...&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; $ g : num [1:100] -0.845 1.456 1.948 1.354 1.085 ...&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; $ h : num [1:100] -0.285 0.59 -0.938 1.447 0.424 ...&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; $ i : chr [1:100] "white" "maroon" "maroon" "maroon" ...&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>Imagine a classification problem on the &lt;code>goofy_data&lt;/code> where we&amp;rsquo;d like to predict &lt;code>class&lt;/code> using the remaining variables as predictors. The selector functions allow us to perform operations on only the predictors with a certain class. For instance, centering and scaling all numeric predictors:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>recipe&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>class&lt;/span> &lt;span class='o'>~&lt;/span> &lt;span class='nv'>.&lt;/span>, &lt;span class='nv'>goofy_data&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>step_normalize&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>all_numeric_predictors&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>prep&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; Recipe&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; Inputs:&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; role #variables&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; outcome 1&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; predictor 9&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; Training data contained 100 data points and no missing data.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; Operations:&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; Centering and scaling for c, d, e, f, g, h [trained]&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>Or making dummy variables out of each of the nominal predictors:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>recipe&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>class&lt;/span> &lt;span class='o'>~&lt;/span> &lt;span class='nv'>.&lt;/span>, &lt;span class='nv'>goofy_data&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>step_dummy&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>all_nominal_predictors&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>prep&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; Recipe&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; Inputs:&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; role #variables&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; outcome 1&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; predictor 9&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; Training data contained 100 data points and no missing data.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; Operations:&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; Dummy variables from a, b, i [trained]&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>Operations like those above have been long-standing functionality in recipes, and are powerful tools for effective modeling. The most recent release of recipes introduced
&lt;a href="https://fosstodon.org/@emilhvitfeldt/109315135944110742" target="_blank" rel="noopener">finer-grain selectors&lt;/a> for variable types. For instance, we may want to only center and scale the &lt;em>double&lt;/em> (i.e. real-valued) predictors, excluding the integers. With the new release of recipes, we can easily do so:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>recipe&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>class&lt;/span> &lt;span class='o'>~&lt;/span> &lt;span class='nv'>.&lt;/span>, &lt;span class='nv'>goofy_data&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>step_normalize&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>all_double_predictors&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>prep&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; Recipe&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; Inputs:&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; role #variables&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; outcome 1&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; predictor 9&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; Training data contained 100 data points and no missing data.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; Operations:&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; Centering and scaling for f, g, h [trained]&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>This is one of a number of new selectors:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>The &lt;code>all_nominal()&lt;/code> selector now has finer-grained versions &lt;code>all_string()&lt;/code>, &lt;code>all_factor()&lt;/code>, &lt;code>all_unordered()&lt;/code>, and &lt;code>all_ordered()&lt;/code>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>The &lt;code>all_numeric()&lt;/code> selector now has finer-grained versions &lt;code>all_double()&lt;/code>, and &lt;code>all_integer()&lt;/code>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>New &lt;code>all_logical()&lt;/code>, &lt;code>all_date()&lt;/code>, and &lt;code>all_datetime()&lt;/code> selectors.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>All new selectors have &lt;code>*_predictors()&lt;/code> variants. You can read more about recipes 1.0.3 in the
&lt;a href="https://recipes.tidymodels.org/news/index.html#recipes-103" target="_blank" rel="noopener">release notes&lt;/a>.&lt;/p>
&lt;h2 id="grouped-resampling">Grouped resampling
&lt;a href="#grouped-resampling">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>The most recent release of rsample introduced support for stratification with grouped resampling. Consider the following toy data set on the number of melons in a household:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>melons&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 4,928 × 3&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; household n_melons chops&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;fct&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;int&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;chr&amp;gt;&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 1&lt;/span> 1 114 Yes &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 2&lt;/span> 1 179 Yes &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 3&lt;/span> 1 163 Yes &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 4&lt;/span> 1 35 Yes &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 5&lt;/span> 1 93 Yes &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 6&lt;/span> 1 55 Yes &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 7&lt;/span> 1 165 Yes &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 8&lt;/span> 1 30 Yes &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 9&lt;/span> 1 140 Yes &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>10&lt;/span> 1 7 Yes &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># … with 4,918 more rows&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>There are 100 different households in this dataset. Each member of the household has some number of melons &lt;code>n_melons&lt;/code> in their fridge. A household, i.e., all its members, either &lt;code>chops&lt;/code> their melons or keeps them whole.&lt;/p>
&lt;p>Each of the resampling functions in rsample have a &lt;code>group_*&lt;/code>ed analogue. From rsample&amp;rsquo;s
&lt;a href="https://rsample.tidymodels.org/articles/Common_Patterns.html#grouped-resampling" target="_blank" rel="noopener">&amp;ldquo;Common Patterns&amp;rdquo; article&lt;/a>:&lt;/p>
&lt;blockquote>
&lt;p>Often, some observations in your data will be &amp;ldquo;more related&amp;rdquo; to each other than would be probable under random chance, for instance because they represent repeated measurements of the same subject or were all collected at a single location. In these situations, you often want to assign all related observations to either the analysis or assessment fold as a group, to avoid having assessment data that's closely related to the data used to fit a model.&lt;/p>
&lt;/blockquote>
&lt;p>For example, the grouped &lt;code>initial_split()&lt;/code> variant will allot the training and testing set mutually exclusive levels of the &lt;code>group&lt;/code> variable:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>resample&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>group_initial_split&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>melons&lt;/span>, group &lt;span class='o'>=&lt;/span> &lt;span class='nv'>household&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/sum.html'>sum&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/unique.html'>unique&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>training&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>resample&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>$&lt;/span>&lt;span class='nv'>household&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://rdrr.io/r/base/match.html'>%in%&lt;/a>&lt;/span> &lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/unique.html'>unique&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>testing&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>resample&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>$&lt;/span>&lt;span class='nv'>household&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; [1] 0&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>However, note that there are only a few households that don&amp;rsquo;t chop their melons, and those households tend to have many more melons to chop!&lt;/p>
&lt;div class="highlight">
&lt;p>&lt;img src="figs/melon-plot-1.png" alt="A ggplot histogram displaying the mean number of melons per household, filled by whether the household chops their melons or not. The plot shows that there are relatively few households that don't chop their melons, but those households have many more melons to chop. Households that chop their melons have around 80 to chop, while those that don't have around 200." width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>If we&amp;rsquo;re ultimately interested in modeling whether a household chops their melons, we ought to ensure that both values of &lt;code>chops&lt;/code> are well-represented in both the training and testing set. The argument &lt;code>strata = chops&lt;/code> indicates that sampling by &lt;code>household&lt;/code> will occur within values of &lt;code>chops&lt;/code>. Note that the strata must be constant in each group, so here, all members of a household need to either chop or not.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>resample_stratified&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>group_initial_split&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>melons&lt;/span>, group &lt;span class='o'>=&lt;/span> &lt;span class='nv'>household&lt;/span>, strata &lt;span class='o'>=&lt;/span> &lt;span class='nv'>chops&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>Note that this resampling scheme still resulted in different &lt;code>household&lt;/code>s being allotted to training and testing:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/sum.html'>sum&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/unique.html'>unique&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>training&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>resample_stratified&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>$&lt;/span>&lt;span class='nv'>household&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://rdrr.io/r/base/match.html'>%in%&lt;/a>&lt;/span> &lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/unique.html'>unique&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>testing&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>resample_stratified&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>$&lt;/span>&lt;span class='nv'>household&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; [1] 0&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>Also, though, it ensured that similar proportions of &lt;code>chops&lt;/code> values are allotted to the training and testing set:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/diff.html'>diff&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/mean.html'>mean&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>training&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>resample_stratified&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>$&lt;/span>&lt;span class='nv'>chops&lt;/span> &lt;span class='o'>==&lt;/span> &lt;span class='s'>"Yes"&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/mean.html'>mean&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>testing&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>resample_stratified&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>$&lt;/span>&lt;span class='nv'>chops&lt;/span> &lt;span class='o'>==&lt;/span> &lt;span class='s'>"Yes"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; [1] 0.01000042&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>You can read more about rsample 1.1.1 in the
&lt;a href="https://rsample.tidymodels.org/news/index.html#rsample-111" target="_blank" rel="noopener">release notes&lt;/a>.&lt;/p>
&lt;h2 id="performance-speedup">Performance speedup
&lt;a href="#performance-speedup">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>We recently made a performance tweak, released as part of parsnip 1.0.3, that resulted in a substantial speedup in fit time. Fitting models via parsnip is a fundamental operation in the tidymodels, so the speedup can be observed across many modeling workflows.&lt;/p>
&lt;p>The figure below demonstrates this speedup in
&lt;a href="https://gist.github.com/simonpcouch/651d0ea4d968b455ded8194578dabf52" target="_blank" rel="noopener">an experiment&lt;/a> involving fitting a simple linear regression model on resamples of simulated data. Simulated datasets with between one hundred and one million rows were partitioned into five, ten, or twenty folds and fitted with the new version of parsnip as well as the version preceding it. With smaller datasets, the speedup is negligible, but fit times decrease by a factor of three to five once training data reaches one million rows.&lt;/p>
&lt;div class="highlight">
&lt;p>&lt;img src="figs/speedup-1.png" alt="A ggplot line plot displaying the relative speedup between parsnip 1.0.2 and 1.0.3. The number of rows in training data is on the x axis, ranging from one hundred to one million, and the factor of speedup (1.0.2 over 1.0.3) is on the y axis, ranging from 1 to 5. Three lines, colored by 'number of folds,' noting 5, 10, or 20 resamples, stretch from the bottom left to top right of the plot. This shows that, as training data gets larger, the magnitude of speedup with the new parsnip version gets larger and larger." width="100%" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>You can read more about parsnip 1.0.3 in the
&lt;a href="https://parsnip.tidymodels.org/news/index.html#parsnip-103" target="_blank" rel="noopener">release notes&lt;/a>.&lt;/p>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>We&amp;rsquo;d like to thank those in the community that contributed to tidymodels in the last quarter:&lt;/p>
&lt;div class="highlight">
&lt;ul>
&lt;li>bonsai:
&lt;a href="https://github.com/HenrikBengtsson" target="_blank" rel="noopener">@HenrikBengtsson&lt;/a>, and
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>.&lt;/li>
&lt;li>broom:
&lt;a href="https://github.com/amorris28" target="_blank" rel="noopener">@amorris28&lt;/a>,
&lt;a href="https://github.com/capnrefsmmat" target="_blank" rel="noopener">@capnrefsmmat&lt;/a>,
&lt;a href="https://github.com/larmarange" target="_blank" rel="noopener">@larmarange&lt;/a>,
&lt;a href="https://github.com/lukepilling" target="_blank" rel="noopener">@lukepilling&lt;/a>, and
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>.&lt;/li>
&lt;li>butcher:
&lt;a href="https://github.com/galen-ft" target="_blank" rel="noopener">@galen-ft&lt;/a>, and
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>.&lt;/li>
&lt;li>dials:
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/hfrick" target="_blank" rel="noopener">@hfrick&lt;/a>, and
&lt;a href="https://github.com/Tadge-Analytics" target="_blank" rel="noopener">@Tadge-Analytics&lt;/a>.&lt;/li>
&lt;li>parsnip:
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/exsell-jc" target="_blank" rel="noopener">@exsell-jc&lt;/a>,
&lt;a href="https://github.com/fkohrt" target="_blank" rel="noopener">@fkohrt&lt;/a>,
&lt;a href="https://github.com/hfrick" target="_blank" rel="noopener">@hfrick&lt;/a>,
&lt;a href="https://github.com/jonthegeek" target="_blank" rel="noopener">@jonthegeek&lt;/a>,
&lt;a href="https://github.com/Marwolaeth" target="_blank" rel="noopener">@Marwolaeth&lt;/a>,
&lt;a href="https://github.com/mattwarkentin" target="_blank" rel="noopener">@mattwarkentin&lt;/a>,
&lt;a href="https://github.com/schoonees" target="_blank" rel="noopener">@schoonees&lt;/a>,
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>,
&lt;a href="https://github.com/sweiner123" target="_blank" rel="noopener">@sweiner123&lt;/a>, and
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>.&lt;/li>
&lt;li>recipes:
&lt;a href="https://github.com/andeek" target="_blank" rel="noopener">@andeek&lt;/a>,
&lt;a href="https://github.com/DavisVaughan" target="_blank" rel="noopener">@DavisVaughan&lt;/a>,
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/hfrick" target="_blank" rel="noopener">@hfrick&lt;/a>,
&lt;a href="https://github.com/joeycouse" target="_blank" rel="noopener">@joeycouse&lt;/a>,
&lt;a href="https://github.com/mdancho84" target="_blank" rel="noopener">@mdancho84&lt;/a>, and
&lt;a href="https://github.com/mobius-eng" target="_blank" rel="noopener">@mobius-eng&lt;/a>.&lt;/li>
&lt;li>rsample:
&lt;a href="https://github.com/bschneidr" target="_blank" rel="noopener">@bschneidr&lt;/a>,
&lt;a href="https://github.com/DavisVaughan" target="_blank" rel="noopener">@DavisVaughan&lt;/a>,
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/hfrick" target="_blank" rel="noopener">@hfrick&lt;/a>,
&lt;a href="https://github.com/mikemahoney218" target="_blank" rel="noopener">@mikemahoney218&lt;/a>,
&lt;a href="https://github.com/pgg1309" target="_blank" rel="noopener">@pgg1309&lt;/a>, and
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>.&lt;/li>
&lt;li>stacks:
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>.&lt;/li>
&lt;li>workflows:
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/hfrick" target="_blank" rel="noopener">@hfrick&lt;/a>,
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>,
&lt;a href="https://github.com/talegari" target="_blank" rel="noopener">@talegari&lt;/a>, and
&lt;a href="https://github.com/xiaochi-liu" target="_blank" rel="noopener">@xiaochi-liu&lt;/a>.&lt;/li>
&lt;/ul>
&lt;/div>
&lt;p>We&amp;rsquo;re grateful for all of the tidymodels community, from observers to users to contributors, and wish you all a happy new year!&lt;/p></description></item><item><title>Q3 2022 tidymodels digest</title><link>https://www.tidyverse.org/blog/2022/10/tidymodels-2022-q3/</link><pubDate>Wed, 19 Oct 2022 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2022/10/tidymodels-2022-q3/</guid><description>&lt;p>The
&lt;a href="https://www.tidymodels.org/" target="_blank" rel="noopener">tidymodels&lt;/a> framework is a collection of R packages for modeling and machine learning using tidyverse principles.&lt;/p>
&lt;p>Since the beginning of 2021, we have been publishing
&lt;a href="https://www.tidyverse.org/categories/roundup/" target="_blank" rel="noopener">quarterly updates&lt;/a> here on the tidyverse blog summarizing what&amp;rsquo;s new in the tidymodels ecosystem. The purpose of these regular posts is to share useful new features and any updates you may have missed. You can check out the
&lt;a href="https://www.tidyverse.org/tags/tidymodels/" target="_blank" rel="noopener">&lt;code>tidymodels&lt;/code> tag&lt;/a> to find all tidymodels blog posts here, including our roundup posts as well as those that are more focused, like these from the past month or so:&lt;/p>
&lt;ul>
&lt;li>
&lt;a href="https://www.tidyverse.org/blog/2022/10/parsnip-checking-1-0-2/" target="_blank" rel="noopener">Improvements to model specification checking in tidymodels&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://www.tidyverse.org/blog/2022/09/brulee-0-2-0/" target="_blank" rel="noopener">brulee 0.2.0&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://www.tidyverse.org/blog/2022/09/bundle-0-1-0/" target="_blank" rel="noopener">Announcing bundle&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://www.tidyverse.org/blog/2022/08/censored-0-1-0/" target="_blank" rel="noopener">censored 0.1.0&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://www.tidyverse.org/blog/2022/08/rsample-1-1-0/" target="_blank" rel="noopener">rsample 1.1.0&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>Since
&lt;a href="https://www.tidyverse.org/blog/2022/07/tidymodels-2022-q2/" target="_blank" rel="noopener">our last roundup post&lt;/a>, there have been CRAN releases of 22 tidymodels packages. Here are links to their NEWS files:&lt;/p>
&lt;div class="highlight">
&lt;ul>
&lt;li>agua
&lt;a href="https://agua.tidymodels.org/news/index.html" target="_blank" rel="noopener">(0.1.0)&lt;/a>&lt;/li>
&lt;li>applicable
&lt;a href="https://github.com/tidymodels/applicable/blob/develop/NEWS.md" target="_blank" rel="noopener">(0.1.0)&lt;/a>&lt;/li>
&lt;li>bonsai
&lt;a href="https://bonsai.tidymodels.org/news/index.html" target="_blank" rel="noopener">(0.2.0)&lt;/a>&lt;/li>
&lt;li>broom
&lt;a href="https://broom.tidymodels.org/news/index.html" target="_blank" rel="noopener">(1.0.1)&lt;/a>&lt;/li>
&lt;li>brulee
&lt;a href="https://brulee.tidymodels.org/news/index.html" target="_blank" rel="noopener">(0.2.0)&lt;/a>&lt;/li>
&lt;li>butcher
&lt;a href="https://butcher.tidymodels.org/news/index.html" target="_blank" rel="noopener">(0.3.0)&lt;/a>&lt;/li>
&lt;li>censored
&lt;a href="https://censored.tidymodels.org/news/index.html" target="_blank" rel="noopener">(0.1.1)&lt;/a>&lt;/li>
&lt;li>corrr
&lt;a href="https://corrr.tidymodels.org/news/index.html" target="_blank" rel="noopener">(0.4.4)&lt;/a>&lt;/li>
&lt;li>finetune
&lt;a href="https://finetune.tidymodels.org/news/index.html" target="_blank" rel="noopener">(1.0.1)&lt;/a>&lt;/li>
&lt;li>modeldata
&lt;a href="https://modeldata.tidymodels.org/news/index.html" target="_blank" rel="noopener">(1.0.1)&lt;/a>&lt;/li>
&lt;li>modeldb
&lt;a href="https://modeldb.tidymodels.org/news/index.html" target="_blank" rel="noopener">(0.2.3)&lt;/a>&lt;/li>
&lt;li>parsnip
&lt;a href="https://parsnip.tidymodels.org/news/index.html" target="_blank" rel="noopener">(1.0.2)&lt;/a>&lt;/li>
&lt;li>plsmod
&lt;a href="https://plsmod.tidymodels.org/news/index.html" target="_blank" rel="noopener">(1.0.0)&lt;/a>&lt;/li>
&lt;li>poissonreg
&lt;a href="https://poissonreg.tidymodels.org/news/index.html" target="_blank" rel="noopener">(1.0.1)&lt;/a>&lt;/li>
&lt;li>probably
&lt;a href="https://probably.tidymodels.org/news/index.html" target="_blank" rel="noopener">(0.1.0)&lt;/a>&lt;/li>
&lt;li>recipes
&lt;a href="https://recipes.tidymodels.org/news/index.html" target="_blank" rel="noopener">(1.0.2)&lt;/a>&lt;/li>
&lt;li>rsample
&lt;a href="https://rsample.tidymodels.org/news/index.html" target="_blank" rel="noopener">(1.1.0)&lt;/a>&lt;/li>
&lt;li>spatialsample
&lt;a href="https://spatialsample.tidymodels.org/news/index.html" target="_blank" rel="noopener">(0.2.1)&lt;/a>&lt;/li>
&lt;li>textrecipes
&lt;a href="https://textrecipes.tidymodels.org/news/index.html" target="_blank" rel="noopener">(1.0.1)&lt;/a>&lt;/li>
&lt;li>tune
&lt;a href="https://tune.tidymodels.org/news/index.html" target="_blank" rel="noopener">(1.0.1)&lt;/a>&lt;/li>
&lt;li>workflows
&lt;a href="https://workflows.tidymodels.org/news/index.html" target="_blank" rel="noopener">(1.1.0)&lt;/a>&lt;/li>
&lt;li>yardstick
&lt;a href="https://yardstick.tidymodels.org/news/index.html" target="_blank" rel="noopener">(1.1.0)&lt;/a>&lt;/li>
&lt;/ul>
&lt;/div>
&lt;p>We&amp;rsquo;ll highlight two specific upgrades: one for agua and another for recipes.&lt;/p>
&lt;h2 id="a-big-upgrade-for-agua">A big upgrade for agua
&lt;a href="#a-big-upgrade-for-agua">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>With version 3.38.0.1 of the
&lt;a href="https://cran.r-project.org/package=h2o" target="_blank" rel="noopener">h2o&lt;/a> package, agua can now tune h2o models as if they were any other type of model engine.&lt;/p>
&lt;p>
&lt;a href="https://h2o.ai" target="_blank" rel="noopener">h2o&lt;/a> has an excellent server-based computational engine for fitting a variety of different machine learning and statistical models. The h2o server can run locally or on some external high performance computing server. The downside is that it is light on tools for feature engineering and interactive data analysis.&lt;/p>
&lt;p>Using h2o with tidymodels enables users to leverage the benefits of packages like recipes along with fast, server-based parallel processing.&lt;/p>
&lt;p>While the syntax for model fitting and tuning are the same as any other non-h2o model, there are different ways to parallelize the work:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>The h2o server has the ability to internally parallelize individual model computations. For example, when fitting trees, the search for the best split can be done using multiple threads. The number of threads that each model should be used is set with
&lt;a href="https://docs.h2o.ai/h2o/latest-stable/h2o-r/docs/reference/h2o.init.html" target="_blank" rel="noopener">h2o.init(nthreads)&lt;/a>. The default (&lt;code>-1&lt;/code>) is to use all CPUs on the host.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>When using grid search,
&lt;a href="https://docs.h2o.ai/h2o/latest-stable/h2o-r/docs/reference/h2o.grid.html" target="_blank" rel="noopener">h2o.grid(parallelism)&lt;/a> determines how many models the h2o server should process at the same time. The default (&lt;code>1&lt;/code>) constrains the server to run the models sequentially.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>R has external parallelization tools (such as the foreach and future packages) that can start new R processes to simultaneously do work. This would run many models in parallel. For h2o, this determines how many models the agua package could send to the server at once. This does not appear to be constrained by the &lt;code>parallelism&lt;/code> argument to &lt;code>h2o.grid()&lt;/code>.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>With h2o and tidymodels, you should probably &lt;strong>use h2o&amp;rsquo;s parallelization&lt;/strong>. Using multiple approaches &lt;em>can&lt;/em> work but only for some technologies. It&amp;rsquo;s still
&lt;a href="https://github.com/topepo/agua-h2o-benchmark" target="_blank" rel="noopener">pretty complicated&lt;/a> but we are working on un-complicating it.&lt;/p>
&lt;p>To set up h2o parallelization, there is a new control argument called &lt;code>backend_options&lt;/code>. If you were doing a grid search, you first define how many threads the h2o server should use:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">tidymodels&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">agua&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">finetune&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">h2o_thread_spec&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">agua_backend_options&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">parallelism&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">10&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Then, pass the output to any of the existing control functions:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">grid_ctrl&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">control_grid&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">backend_options&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">h2o_thread_spec&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Now h2o can parallel process 10 models at once.&lt;/p>
&lt;p>Here is an example using a simulated data set with a numeric outcome:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://tidymodels.tidymodels.org'>tidymodels&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://agua.tidymodels.org/'>agua&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://github.com/tidymodels/finetune'>finetune&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'># Simulate the data&lt;/span>
&lt;span class='nv'>n_train&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='m'>200&lt;/span>
&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/Random.html'>set.seed&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>6147&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>sim_dat&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>sim_regression&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>n_train&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'># Resample using 10-fold cross-validation&lt;/span>
&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/Random.html'>set.seed&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>91&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>sim_rs&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>vfold_cv&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>sim_dat&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>We&amp;rsquo;ll use grid search to tune a boosted tree:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>boost_spec&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span>
&lt;span class='nf'>&lt;a href='https://parsnip.tidymodels.org/reference/boost_tree.html'>boost_tree&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
trees &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://hardhat.tidymodels.org/reference/tune.html'>tune&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>,
min_n &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://hardhat.tidymodels.org/reference/tune.html'>tune&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>,
tree_depth &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://hardhat.tidymodels.org/reference/tune.html'>tune&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>,
learn_rate &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://hardhat.tidymodels.org/reference/tune.html'>tune&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>,
loss_reduction &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://hardhat.tidymodels.org/reference/tune.html'>tune&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>&lt;a href='https://parsnip.tidymodels.org/reference/set_engine.html'>set_engine&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"h2o"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>&lt;a href='https://parsnip.tidymodels.org/reference/set_args.html'>set_mode&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"regression"&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>Now, let&amp;rsquo;s parallel process our computations.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='c'># Start the h2o server&lt;/span>
&lt;span class='nf'>h2o&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/pkg/h2o/man/h2o.init.html'>h2o.init&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'># Multi-thread the model fits&lt;/span>
&lt;span class='nv'>h2o_thread_spec&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://agua.tidymodels.org/reference/h2o_tune.html'>agua_backend_options&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>parallelism &lt;span class='o'>=&lt;/span> &lt;span class='m'>10&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>grid_ctrl&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://tune.tidymodels.org/reference/control_grid.html'>control_grid&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>backend_options &lt;span class='o'>=&lt;/span> &lt;span class='nv'>h2o_thread_spec&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>We&amp;rsquo;ll evaluate a very small grid at first:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/Random.html'>set.seed&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>7616&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>grid_res&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span>
&lt;span class='nv'>boost_spec&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>&lt;a href='https://tune.tidymodels.org/reference/tune_grid.html'>tune_grid&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>outcome&lt;/span> &lt;span class='o'>~&lt;/span> &lt;span class='nv'>.&lt;/span>, resamples &lt;span class='o'>=&lt;/span> &lt;span class='nv'>sim_rs&lt;/span>, grid &lt;span class='o'>=&lt;/span> &lt;span class='m'>10&lt;/span>, control &lt;span class='o'>=&lt;/span> &lt;span class='nv'>grid_ctrl&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;/code>&lt;/pre>
&lt;/div>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nf'>&lt;a href='https://tune.tidymodels.org/reference/show_best.html'>show_best&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>grid_res&lt;/span>, metric &lt;span class='o'>=&lt;/span> &lt;span class='s'>"rmse"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span> &lt;span class='nf'>select&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>-&lt;/span>&lt;span class='nv'>.config&lt;/span>, &lt;span class='o'>-&lt;/span>&lt;span class='nv'>.metric&lt;/span>, &lt;span class='o'>-&lt;/span>&lt;span class='nv'>.estimator&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 5 × 8&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; trees min_n tree_depth learn_rate loss_reduction mean n std_err&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;int&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;int&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;int&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;int&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>1&lt;/span> &lt;span style='text-decoration: underline;'>1&lt;/span>954 17 13 0.031&lt;span style='text-decoration: underline;'>8&lt;/span> 6.08&lt;span style='color: #555555;'>e&lt;/span>&lt;span style='color: #BB0000;'>-8&lt;/span> 13.1 10 0.828&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>2&lt;/span> 184 25 4 0.000&lt;span style='text-decoration: underline;'>000&lt;/span>001&lt;span style='text-decoration: underline;'>64&lt;/span> 6.56&lt;span style='color: #555555;'>e&lt;/span>&lt;span style='color: #BB0000;'>-1&lt;/span> 15.7 10 1.03 &lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>3&lt;/span> &lt;span style='text-decoration: underline;'>1&lt;/span>068 10 8 0.000&lt;span style='text-decoration: underline;'>040&lt;/span>9 1.19&lt;span style='color: #555555;'>e&lt;/span>+1 17.4 10 1.08 &lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>4&lt;/span> &lt;span style='text-decoration: underline;'>1&lt;/span>500 37 10 0.000&lt;span style='text-decoration: underline;'>010&lt;/span>8 9.97&lt;span style='color: #555555;'>e&lt;/span>&lt;span style='color: #BB0000;'>-9&lt;/span> 18.3 10 1.03 &lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>5&lt;/span> 985 18 7 0.000&lt;span style='text-decoration: underline;'>000&lt;/span>045&lt;span style='text-decoration: underline;'>4&lt;/span> 1.84&lt;span style='color: #555555;'>e&lt;/span>&lt;span style='color: #BB0000;'>-3&lt;/span> 18.4 10 1.04&lt;/span>
&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/autoplot.html'>autoplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>grid_res&lt;/span>, metric &lt;span class='o'>=&lt;/span> &lt;span class='s'>"rmse"&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/grid-plot-1.svg" width="90%" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>It was a small grid and most of the configurations were not especially good. We can further optimize the results by applying simulated annealing search to the best grid results.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>sa_ctrl&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://finetune.tidymodels.org/reference/control_sim_anneal.html'>control_sim_anneal&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>backend_options &lt;span class='o'>=&lt;/span> &lt;span class='nv'>h2o_thread_spec&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/Random.html'>set.seed&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>4&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>sa_res&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span>
&lt;span class='nv'>boost_spec&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>&lt;a href='https://finetune.tidymodels.org/reference/tune_sim_anneal.html'>tune_sim_anneal&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
&lt;span class='nv'>outcome&lt;/span> &lt;span class='o'>~&lt;/span> &lt;span class='nv'>.&lt;/span>,
resamples &lt;span class='o'>=&lt;/span> &lt;span class='nv'>sim_rs&lt;/span>,
initial &lt;span class='o'>=&lt;/span> &lt;span class='nv'>grid_res&lt;/span>,
iter &lt;span class='o'>=&lt;/span> &lt;span class='m'>25&lt;/span>,
control &lt;span class='o'>=&lt;/span> &lt;span class='nv'>sa_ctrl&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #000000;'>Optimizing rmse&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #000000;'>Initial best: 13.06400&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #000000;'> 1 &lt;/span>&lt;span style='color: #00BB00;'>♥ new best &lt;/span>&lt;span style='color: #000000;'> rmse=12.688 (+/-0.7899)&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #000000;'> 2 &lt;/span>&lt;span style='color: #BBBB00;'>◯ accept suboptimal &lt;/span>&lt;span style='color: #000000;'> rmse=12.849 (+/-0.8304)&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #000000;'> 3 &lt;/span>&lt;span style='color: #BBBB00;'>◯ accept suboptimal &lt;/span>&lt;span style='color: #000000;'> rmse=13.129 (+/-0.8266)&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #000000;'> 4 &lt;/span>&lt;span style='color: #BBBB00;'>◯ accept suboptimal &lt;/span>&lt;span style='color: #000000;'> rmse=13.678 (+/-0.9544)&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #000000;'> 5 &lt;/span>&lt;span style='color: #00BB00;'>+ better suboptimal &lt;/span>&lt;span style='color: #000000;'> rmse=13.433 (+/-0.792)&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #000000;'> 6 &lt;/span>&lt;span style='color: #00BB00;'>+ better suboptimal &lt;/span>&lt;span style='color: #000000;'> rmse=12.99 (+/-0.9031)&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #000000;'> 7 &lt;/span>&lt;span style='color: #BB0000;'>─ discard suboptimal&lt;/span>&lt;span style='color: #000000;'> rmse=16.531 (+/-1.027)&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #000000;'> 8 &lt;/span>&lt;span style='color: #BB0000;'>─ discard suboptimal&lt;/span>&lt;span style='color: #000000;'> rmse=13.522 (+/-0.9802)&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #000000;'> 9 &lt;/span>&lt;span style='color: #BB0000;'>✖ restart from best &lt;/span>&lt;span style='color: #000000;'> rmse=13.097 (+/-0.8109)&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #000000;'>10 &lt;/span>&lt;span style='color: #00BB00;'>♥ new best &lt;/span>&lt;span style='color: #000000;'> rmse=12.66 (+/-0.8028)&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #000000;'>11 &lt;/span>&lt;span style='color: #BBBB00;'>◯ accept suboptimal &lt;/span>&lt;span style='color: #000000;'> rmse=13.116 (+/-0.8135)&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #000000;'>12 &lt;/span>&lt;span style='color: #00BB00;'>+ better suboptimal &lt;/span>&lt;span style='color: #000000;'> rmse=12.714 (+/-0.7747)&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #000000;'>13 &lt;/span>&lt;span style='color: #BB0000;'>─ discard suboptimal&lt;/span>&lt;span style='color: #000000;'> rmse=13.074 (+/-0.6598)&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #000000;'>14 &lt;/span>&lt;span style='color: #BB0000;'>─ discard suboptimal&lt;/span>&lt;span style='color: #000000;'> rmse=14.489 (+/-1.028)&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #000000;'>15 &lt;/span>&lt;span style='color: #BBBB00;'>◯ accept suboptimal &lt;/span>&lt;span style='color: #000000;'> rmse=12.715 (+/-0.8043)&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #000000;'>16 &lt;/span>&lt;span style='color: #BB0000;'>─ discard suboptimal&lt;/span>&lt;span style='color: #000000;'> rmse=13.788 (+/-1.027)&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #000000;'>17 &lt;/span>&lt;span style='color: #BB0000;'>─ discard suboptimal&lt;/span>&lt;span style='color: #000000;'> rmse=13.057 (+/-0.7716)&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #000000;'>18 &lt;/span>&lt;span style='color: #BB0000;'>✖ restart from best &lt;/span>&lt;span style='color: #000000;'> rmse=13.064 (+/-0.7095)&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #000000;'>19 &lt;/span>&lt;span style='color: #00BB00;'>♥ new best &lt;/span>&lt;span style='color: #000000;'> rmse=12.645 (+/-0.7706)&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #000000;'>20 &lt;/span>&lt;span style='color: #BBBB00;'>◯ accept suboptimal &lt;/span>&lt;span style='color: #000000;'> rmse=12.7 (+/-0.821)&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #000000;'>21 &lt;/span>&lt;span style='color: #BB0000;'>─ discard suboptimal&lt;/span>&lt;span style='color: #000000;'> rmse=13.018 (+/-0.8047)&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #000000;'>22 &lt;/span>&lt;span style='color: #BB0000;'>─ discard suboptimal&lt;/span>&lt;span style='color: #000000;'> rmse=14.812 (+/-1.017)&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #000000;'>23 &lt;/span>&lt;span style='color: #BB0000;'>─ discard suboptimal&lt;/span>&lt;span style='color: #000000;'> rmse=13.098 (+/-0.921)&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #000000;'>24 &lt;/span>&lt;span style='color: #BBBB00;'>◯ accept suboptimal &lt;/span>&lt;span style='color: #000000;'> rmse=12.708 (+/-0.7538)&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #000000;'>25 &lt;/span>&lt;span style='color: #BBBB00;'>◯ accept suboptimal &lt;/span>&lt;span style='color: #000000;'> rmse=13.054 (+/-0.9046)&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>Again, h2o is doing all of the computational work for fitting models and tidymodels is proposing new parameter configurations.&lt;/p>
&lt;p>One other nice feature of the new agua release is the h2o engine for the
&lt;a href="https://parsnip.tidymodels.org/reference/auto_ml.html" target="_blank" rel="noopener">&lt;code>auto_ml()&lt;/code>&lt;/a> model. This builds a stacked ensemble on a set of different models (not unlike our
&lt;a href="https://stacks.tidymodels.org" target="_blank" rel="noopener">stacks&lt;/a> package but with far less code).&lt;/p>
&lt;p>There is a great worked example
&lt;a href="https://agua.tidymodels.org/articles/auto_ml.html" target="_blank" rel="noopener">on the agua website&lt;/a> so make sure to check this out!&lt;/p>
&lt;h2 id="more-spline-recipe-steps">More spline recipe steps
&lt;a href="#more-spline-recipe-steps">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Spline techniques allow linear models to produce nonlinear model curves. These are called
&lt;a href="https://bookdown.org/max/FES/numeric-one-to-many.html#numeric-basis-functions" target="_blank" rel="noopener">basis expansion methods&lt;/a> since they take a single numeric predictor and make additional nonlinear feature columns.&lt;/p>
&lt;p>If you have ever used &lt;code>geom:smooth()&lt;/code>, you have probably used a spline function.&lt;/p>
&lt;p>The recipes package now has an expanded set of spline functions (with a common naming convention):&lt;/p>
&lt;ul>
&lt;li>
&lt;a href="https://recipes.tidymodels.org/dev/reference/step_spline_b.html" target="_blank" rel="noopener">&lt;code>step_spline_b()&lt;/code>&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://recipes.tidymodels.org/dev/reference/step_spline_convex.html" target="_blank" rel="noopener">&lt;code>step_spline_convex()&lt;/code>&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://recipes.tidymodels.org/dev/reference/step_spline_monotone.html" target="_blank" rel="noopener">&lt;code>step_spline_monotone()&lt;/code>&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://recipes.tidymodels.org/dev/reference/step_spline_natural.html" target="_blank" rel="noopener">&lt;code>step_spline_natural()&lt;/code>&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://recipes.tidymodels.org/dev/reference/step_spline_nonnegative.html" target="_blank" rel="noopener">&lt;code>step_spline_nonnegative()&lt;/code>&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>There is also another step to make polynomial functions:
&lt;a href="https://recipes.tidymodels.org/dev/reference/step_poly_bernstein.html" target="_blank" rel="noopener">&lt;code>step_poly_bernstein()&lt;/code>&lt;/a>&lt;/p>
&lt;p>These functions take different approaches to creating the new set of features. Take a look at the references to see the technical details.&lt;/p>
&lt;p>Here is a simple example using the
&lt;a href="https://www.tmwr.org/ames.html" target="_blank" rel="noopener">Ames data&lt;/a> where we model the sale price as a nonlinear function of the longitude using a convex basis function:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/utils/data.html'>data&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>ames&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>ames&lt;/span>&lt;span class='o'>$&lt;/span>&lt;span class='nv'>Sale_Price&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/Log.html'>log10&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>ames&lt;/span>&lt;span class='o'>$&lt;/span>&lt;span class='nv'>Sale_Price&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>spline_rec&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>recipe&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>Sale_Price&lt;/span> &lt;span class='o'>~&lt;/span> &lt;span class='nv'>Longitude&lt;/span>, data &lt;span class='o'>=&lt;/span> &lt;span class='nv'>ames&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>step_spline_convex&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>Longitude&lt;/span>, deg_free &lt;span class='o'>=&lt;/span> &lt;span class='m'>25&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>spline_fit&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span>
&lt;span class='nv'>spline_rec&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>workflow&lt;/span>&lt;span class='o'>(&lt;/span> &lt;span class='nf'>&lt;a href='https://parsnip.tidymodels.org/reference/linear_reg.html'>linear_reg&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>&lt;a href='https://generics.r-lib.org/reference/fit.html'>fit&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>data &lt;span class='o'>=&lt;/span> &lt;span class='nv'>ames&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>spline_fit&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>&lt;a href='https://generics.r-lib.org/reference/augment.html'>augment&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>ames&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>ggplot&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>aes&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>Longitude&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>geom_point&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>aes&lt;/span>&lt;span class='o'>(&lt;/span>y &lt;span class='o'>=&lt;/span> &lt;span class='nv'>Sale_Price&lt;/span>&lt;span class='o'>)&lt;/span>, alpha &lt;span class='o'>=&lt;/span> &lt;span class='m'>1&lt;/span> &lt;span class='o'>/&lt;/span> &lt;span class='m'>3&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>geom_line&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>aes&lt;/span>&lt;span class='o'>(&lt;/span>y &lt;span class='o'>=&lt;/span> &lt;span class='nv'>.pred&lt;/span>&lt;span class='o'>)&lt;/span>, col &lt;span class='o'>=&lt;/span> &lt;span class='s'>"red"&lt;/span>, lwd &lt;span class='o'>=&lt;/span> &lt;span class='m'>1.5&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/Longitude-1.svg" width="70%" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>Not too bad but the model clearly over-fits on the extreme right tail of the predictor distribution.&lt;/p>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>It&amp;rsquo;s important that we thank everyone in the community that contributed to tidymodels:&lt;/p>
&lt;div class="highlight">
&lt;ul>
&lt;li>agua:
&lt;a href="https://github.com/coforfe" target="_blank" rel="noopener">@coforfe&lt;/a>,
&lt;a href="https://github.com/gouthaman87" target="_blank" rel="noopener">@gouthaman87&lt;/a>,
&lt;a href="https://github.com/jeliason" target="_blank" rel="noopener">@jeliason&lt;/a>,
&lt;a href="https://github.com/qiushiyan" target="_blank" rel="noopener">@qiushiyan&lt;/a>, and
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>.&lt;/li>
&lt;li>applicable:
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>.&lt;/li>
&lt;li>bonsai:
&lt;a href="https://github.com/barrettlayman" target="_blank" rel="noopener">@barrettlayman&lt;/a>,
&lt;a href="https://github.com/DesmondChoy" target="_blank" rel="noopener">@DesmondChoy&lt;/a>,
&lt;a href="https://github.com/dfsnow" target="_blank" rel="noopener">@dfsnow&lt;/a>,
&lt;a href="https://github.com/dpprdan" target="_blank" rel="noopener">@dpprdan&lt;/a>,
&lt;a href="https://github.com/jameslamb" target="_blank" rel="noopener">@jameslamb&lt;/a>, and
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>.&lt;/li>
&lt;li>broom:
&lt;a href="https://github.com/AaronRendahl" target="_blank" rel="noopener">@AaronRendahl&lt;/a>,
&lt;a href="https://github.com/AmeliaMN" target="_blank" rel="noopener">@AmeliaMN&lt;/a>,
&lt;a href="https://github.com/bbolker" target="_blank" rel="noopener">@bbolker&lt;/a>,
&lt;a href="https://github.com/capnrefsmmat" target="_blank" rel="noopener">@capnrefsmmat&lt;/a>,
&lt;a href="https://github.com/corybrunson" target="_blank" rel="noopener">@corybrunson&lt;/a>,
&lt;a href="https://github.com/ddsjoberg" target="_blank" rel="noopener">@ddsjoberg&lt;/a>,
&lt;a href="https://github.com/friendly" target="_blank" rel="noopener">@friendly&lt;/a>,
&lt;a href="https://github.com/johanneskoch94" target="_blank" rel="noopener">@johanneskoch94&lt;/a>, and
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>.&lt;/li>
&lt;li>brulee:
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>.&lt;/li>
&lt;li>butcher:
&lt;a href="https://github.com/DavisVaughan" target="_blank" rel="noopener">@DavisVaughan&lt;/a>,
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>, and
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>.&lt;/li>
&lt;li>censored:
&lt;a href="https://github.com/bcjaeger" target="_blank" rel="noopener">@bcjaeger&lt;/a>,
&lt;a href="https://github.com/hfrick" target="_blank" rel="noopener">@hfrick&lt;/a>,
&lt;a href="https://github.com/mattwarkentin" target="_blank" rel="noopener">@mattwarkentin&lt;/a>,
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>,
&lt;a href="https://github.com/therneau" target="_blank" rel="noopener">@therneau&lt;/a>, and
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>.&lt;/li>
&lt;li>corrr:
&lt;a href="https://github.com/jagodap" target="_blank" rel="noopener">@jagodap&lt;/a>, and
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>.&lt;/li>
&lt;li>finetune:
&lt;a href="https://github.com/DMozzanica" target="_blank" rel="noopener">@DMozzanica&lt;/a>,
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/qiushiyan" target="_blank" rel="noopener">@qiushiyan&lt;/a>,
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>, and
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>.&lt;/li>
&lt;li>modeldata:
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>.&lt;/li>
&lt;li>modeldb:
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>.&lt;/li>
&lt;li>parsnip:
&lt;a href="https://github.com/barnabywalker" target="_blank" rel="noopener">@barnabywalker&lt;/a>,
&lt;a href="https://github.com/bcjaeger" target="_blank" rel="noopener">@bcjaeger&lt;/a>,
&lt;a href="https://github.com/ben-e" target="_blank" rel="noopener">@ben-e&lt;/a>,
&lt;a href="https://github.com/CarmenCiardiello" target="_blank" rel="noopener">@CarmenCiardiello&lt;/a>,
&lt;a href="https://github.com/daniel-althoff" target="_blank" rel="noopener">@daniel-althoff&lt;/a>,
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/gustavomodelli" target="_blank" rel="noopener">@gustavomodelli&lt;/a>,
&lt;a href="https://github.com/hfrick" target="_blank" rel="noopener">@hfrick&lt;/a>,
&lt;a href="https://github.com/joeycouse" target="_blank" rel="noopener">@joeycouse&lt;/a>,
&lt;a href="https://github.com/john-b-edwards" target="_blank" rel="noopener">@john-b-edwards&lt;/a>,
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>,
&lt;a href="https://github.com/mdneuzerling" target="_blank" rel="noopener">@mdneuzerling&lt;/a>,
&lt;a href="https://github.com/mikemahoney218" target="_blank" rel="noopener">@mikemahoney218&lt;/a>,
&lt;a href="https://github.com/mrkaye97" target="_blank" rel="noopener">@mrkaye97&lt;/a>,
&lt;a href="https://github.com/qiushiyan" target="_blank" rel="noopener">@qiushiyan&lt;/a>,
&lt;a href="https://github.com/siegfried" target="_blank" rel="noopener">@siegfried&lt;/a>,
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>,
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>,
&lt;a href="https://github.com/TylerGrantSmith" target="_blank" rel="noopener">@TylerGrantSmith&lt;/a>, and
&lt;a href="https://github.com/zhaoliang0302" target="_blank" rel="noopener">@zhaoliang0302&lt;/a>.&lt;/li>
&lt;li>plsmod:
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>.&lt;/li>
&lt;li>poissonreg:
&lt;a href="https://github.com/hfrick" target="_blank" rel="noopener">@hfrick&lt;/a>,
&lt;a href="https://github.com/mattwarkentin" target="_blank" rel="noopener">@mattwarkentin&lt;/a>, and
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>.&lt;/li>
&lt;li>probably:
&lt;a href="https://github.com/DavisVaughan" target="_blank" rel="noopener">@DavisVaughan&lt;/a>.&lt;/li>
&lt;li>recipes:
&lt;a href="https://github.com/abichat" target="_blank" rel="noopener">@abichat&lt;/a>,
&lt;a href="https://github.com/adisarid" target="_blank" rel="noopener">@adisarid&lt;/a>,
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/JamesHWade" target="_blank" rel="noopener">@JamesHWade&lt;/a>,
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>,
&lt;a href="https://github.com/luisDVA" target="_blank" rel="noopener">@luisDVA&lt;/a>,
&lt;a href="https://github.com/naveranoc" target="_blank" rel="noopener">@naveranoc&lt;/a>,
&lt;a href="https://github.com/nhward" target="_blank" rel="noopener">@nhward&lt;/a>,
&lt;a href="https://github.com/RMHogervorst" target="_blank" rel="noopener">@RMHogervorst&lt;/a>,
&lt;a href="https://github.com/ruddnr" target="_blank" rel="noopener">@ruddnr&lt;/a>,
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>,
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>, and
&lt;a href="https://github.com/zhaoliang0302" target="_blank" rel="noopener">@zhaoliang0302&lt;/a>.&lt;/li>
&lt;li>rsample:
&lt;a href="https://github.com/DavisVaughan" target="_blank" rel="noopener">@DavisVaughan&lt;/a>,
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/hfrick" target="_blank" rel="noopener">@hfrick&lt;/a>,
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>,
&lt;a href="https://github.com/mikemahoney218" target="_blank" rel="noopener">@mikemahoney218&lt;/a>, and
&lt;a href="https://github.com/tjmahr" target="_blank" rel="noopener">@tjmahr&lt;/a>.&lt;/li>
&lt;li>spatialsample:
&lt;a href="https://github.com/mikemahoney218" target="_blank" rel="noopener">@mikemahoney218&lt;/a>.&lt;/li>
&lt;li>textrecipes:
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/hadley" target="_blank" rel="noopener">@hadley&lt;/a>, and
&lt;a href="https://github.com/PursuitOfDataScience" target="_blank" rel="noopener">@PursuitOfDataScience&lt;/a>.&lt;/li>
&lt;li>tune:
&lt;a href="https://github.com/Athospd" target="_blank" rel="noopener">@Athospd&lt;/a>,
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/frankhezemans" target="_blank" rel="noopener">@frankhezemans&lt;/a>,
&lt;a href="https://github.com/kevin199011" target="_blank" rel="noopener">@kevin199011&lt;/a>,
&lt;a href="https://github.com/misken" target="_blank" rel="noopener">@misken&lt;/a>,
&lt;a href="https://github.com/PursuitOfDataScience" target="_blank" rel="noopener">@PursuitOfDataScience&lt;/a>,
&lt;a href="https://github.com/qiushiyan" target="_blank" rel="noopener">@qiushiyan&lt;/a>,
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>, and
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>.&lt;/li>
&lt;li>workflows:
&lt;a href="https://github.com/DavisVaughan" target="_blank" rel="noopener">@DavisVaughan&lt;/a>,
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/JosiahParry" target="_blank" rel="noopener">@JosiahParry&lt;/a>,
&lt;a href="https://github.com/lrossouw" target="_blank" rel="noopener">@lrossouw&lt;/a>,
&lt;a href="https://github.com/msberends" target="_blank" rel="noopener">@msberends&lt;/a>,
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>, and
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>.&lt;/li>
&lt;li>yardstick:
&lt;a href="https://github.com/DavisVaughan" target="_blank" rel="noopener">@DavisVaughan&lt;/a>,
&lt;a href="https://github.com/deschen1" target="_blank" rel="noopener">@deschen1&lt;/a>,
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>,
&lt;a href="https://github.com/leonhGeis" target="_blank" rel="noopener">@leonhGeis&lt;/a>,
&lt;a href="https://github.com/PriitPaluoja" target="_blank" rel="noopener">@PriitPaluoja&lt;/a>, and
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>.&lt;/li>
&lt;/ul>
&lt;/div></description></item><item><title>Q2 2022 tidymodels digest</title><link>https://www.tidyverse.org/blog/2022/07/tidymodels-2022-q2/</link><pubDate>Tue, 19 Jul 2022 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2022/07/tidymodels-2022-q2/</guid><description>&lt;!--
TODO:
* [X] Look over / edit the post's title in the yaml
* [X] Edit (or delete) the description; note this appears in the Twitter card
* [X] Pick category and tags (see existing with [`hugodown::tidy_show_meta()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html))
* [X] Find photo &amp; update yaml metadata
* [X] Create `thumbnail-sq.jpg`; height and width should be equal
* [X] Create `thumbnail-wd.jpg`; width should be >5x height
* [X] [`hugodown::use_tidy_thumbnails()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html)
* [X] Add intro sentence, e.g. the standard tagline for the package
* [X] [`usethis::use_tidy_thanks()`](https://usethis.r-lib.org/reference/use_tidy_thanks.html)
-->
&lt;p>The
&lt;a href="https://www.tidymodels.org/" target="_blank" rel="noopener">tidymodels&lt;/a> framework is a collection of R packages for modeling and machine learning using tidyverse principles.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://tidymodels.tidymodels.org'>tidymodels&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; ── &lt;span style='font-weight: bold;'>Attaching packages&lt;/span> ────────────────────────────────────── tidymodels 1.0.0 ──&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>broom &lt;/span> 1.0.0 &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>recipes &lt;/span> 1.0.1&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>dials &lt;/span> 1.0.0 &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>rsample &lt;/span> 1.0.0&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>dplyr &lt;/span> 1.0.9 &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>tibble &lt;/span> 3.1.7&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>ggplot2 &lt;/span> 3.3.6 &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>tidyr &lt;/span> 1.2.0&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>infer &lt;/span> 1.0.2 &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>tune &lt;/span> 1.0.0&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>modeldata &lt;/span> 1.0.0 &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>workflows &lt;/span> 1.0.0&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>parsnip &lt;/span> 1.0.0 &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>workflowsets&lt;/span> 1.0.0&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>purrr &lt;/span> 0.3.4 &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>yardstick &lt;/span> 1.0.0&lt;/span>
&lt;span class='c'>#&amp;gt; ── &lt;span style='font-weight: bold;'>Conflicts&lt;/span> ───────────────────────────────────────── tidymodels_conflicts() ──&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #BB0000;'>✖&lt;/span> &lt;span style='color: #0000BB;'>purrr&lt;/span>::&lt;span style='color: #00BB00;'>discard()&lt;/span> masks &lt;span style='color: #0000BB;'>scales&lt;/span>::discard()&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #BB0000;'>✖&lt;/span> &lt;span style='color: #0000BB;'>dplyr&lt;/span>::&lt;span style='color: #00BB00;'>filter()&lt;/span> masks &lt;span style='color: #0000BB;'>stats&lt;/span>::filter()&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #BB0000;'>✖&lt;/span> &lt;span style='color: #0000BB;'>dplyr&lt;/span>::&lt;span style='color: #00BB00;'>lag()&lt;/span> masks &lt;span style='color: #0000BB;'>stats&lt;/span>::lag()&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #BB0000;'>✖&lt;/span> &lt;span style='color: #0000BB;'>recipes&lt;/span>::&lt;span style='color: #00BB00;'>step()&lt;/span> masks &lt;span style='color: #0000BB;'>stats&lt;/span>::step()&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>•&lt;/span> Search for functions across packages at &lt;span style='color: #00BB00;'>https://www.tidymodels.org/find/&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>Since the beginning of last year, we have been publishing
&lt;a href="https://www.tidyverse.org/categories/roundup/" target="_blank" rel="noopener">quarterly updates&lt;/a> here on the tidyverse blog summarizing what&amp;rsquo;s new in the tidymodels ecosystem. The purpose of these regular posts is to share useful new features and any updates you may have missed. You can check out the
&lt;a href="https://www.tidyverse.org/tags/tidymodels/" target="_blank" rel="noopener">&lt;code>tidymodels&lt;/code> tag&lt;/a> to find all tidymodels blog posts here, including our roundup posts as well as those that are more focused, like these from the past month or so:&lt;/p>
&lt;ul>
&lt;li>
&lt;a href="https://www.tidyverse.org/blog/2022/06/spatialsample-0-2-0/" target="_blank" rel="noopener">spatialsample&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://www.tidyverse.org/blog/2022/05/recipes-update-05-20222/" target="_blank" rel="noopener">recipes and its extension packages&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://www.tidyverse.org/blog/2022/06/bonsai-0-1-0/" target="_blank" rel="noopener">bonsai&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>Since
&lt;a href="https://www.tidyverse.org/blog/2022/04/tidymodels-2022-q1/" target="_blank" rel="noopener">our last roundup post&lt;/a>, there have been CRAN releases of 25 tidymodels packages. You can install these updates from CRAN with:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/utils/install.packages.html'>install.packages&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
&lt;span class='s'>"rsample"&lt;/span>, &lt;span class='s'>"spatialsample"&lt;/span>, &lt;span class='s'>"parsnip"&lt;/span>, &lt;span class='s'>"baguette"&lt;/span>, &lt;span class='s'>"multilevelmod"&lt;/span>, &lt;span class='s'>"discrim"&lt;/span>,
&lt;span class='s'>"plsmod"&lt;/span>, &lt;span class='s'>"poissonreg"&lt;/span>, &lt;span class='s'>"rules"&lt;/span>, &lt;span class='s'>"recipes"&lt;/span>, &lt;span class='s'>"embed"&lt;/span>, &lt;span class='s'>"themis"&lt;/span>, &lt;span class='s'>"textrecipes"&lt;/span>,
&lt;span class='s'>"workflows"&lt;/span>, &lt;span class='s'>"workflowsets"&lt;/span>, &lt;span class='s'>"tune"&lt;/span>, &lt;span class='s'>"yardstick"&lt;/span>, &lt;span class='s'>"broom"&lt;/span>, &lt;span class='s'>"dials"&lt;/span>, &lt;span class='s'>"butcher"&lt;/span>,
&lt;span class='s'>"hardhat"&lt;/span>, &lt;span class='s'>"infer"&lt;/span>, &lt;span class='s'>"stacks"&lt;/span>, &lt;span class='s'>"tidyposterior"&lt;/span>, &lt;span class='s'>"tidypredict"&lt;/span>
&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;ul>
&lt;li>
&lt;a href="https://baguette.tidymodels.org/news/index.html#baguette-100" target="_blank" rel="noopener">baguette&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://broom.tidymodels.org/news/index.html#broom-080" target="_blank" rel="noopener">broom&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://butcher.tidymodels.org/news/index.html#butcher-020" target="_blank" rel="noopener">butcher&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://dials.tidymodels.org/news/index.html#dials-100" target="_blank" rel="noopener">dials&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://discrim.tidymodels.org/news/index.html#discrim-100" target="_blank" rel="noopener">discrim&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://embed.tidymodels.org/news/index.html#embed-100" target="_blank" rel="noopener">embed&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://hardhat.tidymodels.org/news/index.html#hardhat-120" target="_blank" rel="noopener">hardhat&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://infer.tidymodels.org/news/index.html#infer-v102" target="_blank" rel="noopener">infer&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://modeldata.tidymodels.org/news/index.html#modeldata-100" target="_blank" rel="noopener">modeldata&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://multilevelmod.tidymodels.org/news/index.html#multilevelmod-100" target="_blank" rel="noopener">multilevelmod&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://parsnip.tidymodels.org/news/index.html#parsnip-100" target="_blank" rel="noopener">parsnip&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://poissonreg.tidymodels.org/news/index.html#poissonreg-100" target="_blank" rel="noopener">poissonreg&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://recipes.tidymodels.org/news/index.html#recipes-101" target="_blank" rel="noopener">recipes&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://rsample.tidymodels.org/news/index.html#rsample-100" target="_blank" rel="noopener">rsample&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://rules.tidymodels.org/news/index.html#rules-100" target="_blank" rel="noopener">rules&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://spatialsample.tidymodels.org/news/index.html#spatialsample-020" target="_blank" rel="noopener">spatialsample&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://stacks.tidymodels.org/news/index.html#stacks-023" target="_blank" rel="noopener">stacks&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://textrecipes.tidymodels.org/news/index.html#textrecipes-100" target="_blank" rel="noopener">textrecipes&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://themis.tidymodels.org/news/index.html#themis-100" target="_blank" rel="noopener">themis&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://tidymodels.tidymodels.org/news/index.html#tidymodels-100" target="_blank" rel="noopener">tidymodels&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://tidyposterior.tidymodels.org/news/index.html#tidyposterior-100" target="_blank" rel="noopener">tidyposterior&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://tidypredict.tidymodels.org/news/index.html#tidypredict-049" target="_blank" rel="noopener">tidypredict&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://tune.tidymodels.org/news/index.html#tune-100" target="_blank" rel="noopener">tune&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://workflows.tidymodels.org/news/index.html#workflows-100" target="_blank" rel="noopener">workflows&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://workflowsets.tidymodels.org/news/index.html#workflowsets-100" target="_blank" rel="noopener">workflowsets&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://yardstick.tidymodels.org/news/index.html#yardstick-100" target="_blank" rel="noopener">yardstick&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>The &lt;code>NEWS&lt;/code> files are linked here for each package; you&amp;rsquo;ll notice that there are a lot! We know it may be bothersome to keep up with all these changes, so we want to draw your attention to our recent blog posts above and also highlight a few more useful updates in today&amp;rsquo;s blog post.&lt;/p>
&lt;p>We are confident that we have created a good foundation with our implementation across many of our packages and we are using this as an opportunity to bump the packages versions to 1.0.0.&lt;/p>
&lt;h2 id="case-weights">Case weights
&lt;a href="#case-weights">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Much of the work we have been doing so far this year has been related to case weights. For a more detailed account of the deliberations see this earlier post about the
&lt;a href="https://www.tidyverse.org/blog/2022/05/case-weights/" target="_blank" rel="noopener">use of case weights with tidymodels&lt;/a>.&lt;/p>
&lt;p>A full worked example can be found in the
&lt;a href="tidyverse.org/blog/2022/05/case-weights/#tidymodels-syntax">previous blog post&lt;/a> and on
&lt;a href="https://www.tidymodels.org/learn/work/case-weights/" target="_blank" rel="noopener">the tidymodels site&lt;/a>.&lt;/p>
&lt;p>As an example let&amp;rsquo;s go over how case weights are used within tidymodels. We start by simulating a data set using &lt;code>sim_classification()&lt;/code>, this data set is going to be unbalanced and we will be using importance weights to give more weight to the minority class. In tidymodels you can use &lt;code>importance_weights()&lt;/code> or &lt;code>frequency_weights()&lt;/code> to denote what type of weight you are working with. Setting the type of weight should be the first thing you do.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/Random.html'>set.seed&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>1&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>training_sim&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>sim_classification&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>5000&lt;/span>, intercept &lt;span class='o'>=&lt;/span> &lt;span class='o'>-&lt;/span>&lt;span class='m'>25&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span>
&lt;span class='nf'>mutate&lt;/span>&lt;span class='o'>(&lt;/span>
case_wts &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/ifelse.html'>ifelse&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>class&lt;/span> &lt;span class='o'>==&lt;/span> &lt;span class='s'>"class_1"&lt;/span>, &lt;span class='m'>60&lt;/span>, &lt;span class='m'>1&lt;/span>&lt;span class='o'>)&lt;/span>,
case_wts &lt;span class='o'>=&lt;/span> &lt;span class='nf'>importance_weights&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>case_wts&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>training_sim&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span>
&lt;span class='nf'>relocate&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>case_wts&lt;/span>, .after &lt;span class='o'>=&lt;/span> &lt;span class='nv'>class&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 5,000 × 17&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; class case_wts two_factor_1 two_factor_2 non_linear_1 non_linear_2&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;fct&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;imp_wts&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 1&lt;/span> class_2 1 0.092&lt;span style='text-decoration: underline;'>4&lt;/span> -&lt;span style='color: #BB0000;'>1.70&lt;/span> -&lt;span style='color: #BB0000;'>0.579&lt;/span> 0.201&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 2&lt;/span> class_2 1 -&lt;span style='color: #BB0000;'>0.136&lt;/span> 0.608 -&lt;span style='color: #BB0000;'>0.770&lt;/span> 0.114&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 3&lt;/span> class_2 1 -&lt;span style='color: #BB0000;'>0.080&lt;/span>&lt;span style='color: #BB0000; text-decoration: underline;'>6&lt;/span> -&lt;span style='color: #BB0000;'>2.07&lt;/span> -&lt;span style='color: #BB0000;'>0.709&lt;/span> 0.272&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 4&lt;/span> class_2 1 1.35 2.75 -&lt;span style='color: #BB0000;'>0.380&lt;/span> 0.785&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 5&lt;/span> class_2 1 -&lt;span style='color: #BB0000;'>0.238&lt;/span> 1.08 -&lt;span style='color: #BB0000;'>0.700&lt;/span> 0.638&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 6&lt;/span> class_2 1 -&lt;span style='color: #BB0000;'>0.322&lt;/span> -&lt;span style='color: #BB0000;'>1.79&lt;/span> 0.053&lt;span style='text-decoration: underline;'>4&lt;/span> 0.470&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 7&lt;/span> class_2 1 1.35 -&lt;span style='color: #BB0000;'>0.102&lt;/span> -&lt;span style='color: #BB0000;'>0.764&lt;/span> 0.827&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 8&lt;/span> class_2 1 0.595 1.30 -&lt;span style='color: #BB0000;'>0.045&lt;/span>&lt;span style='color: #BB0000; text-decoration: underline;'>4&lt;/span> 0.493&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 9&lt;/span> class_2 1 0.563 0.916 -&lt;span style='color: #BB0000;'>0.383&lt;/span> 0.775&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>10&lt;/span> class_2 1 -&lt;span style='color: #BB0000;'>0.327&lt;/span> -&lt;span style='color: #BB0000;'>0.457&lt;/span> -&lt;span style='color: #BB0000;'>0.390&lt;/span> 0.704&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># … with 4,990 more rows, and 11 more variables: non_linear_3 &amp;lt;dbl&amp;gt;,&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># linear_01 &amp;lt;dbl&amp;gt;, linear_02 &amp;lt;dbl&amp;gt;, linear_03 &amp;lt;dbl&amp;gt;, linear_04 &amp;lt;dbl&amp;gt;,&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># linear_05 &amp;lt;dbl&amp;gt;, linear_06 &amp;lt;dbl&amp;gt;, linear_07 &amp;lt;dbl&amp;gt;, linear_08 &amp;lt;dbl&amp;gt;,&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># linear_09 &amp;lt;dbl&amp;gt;, linear_10 &amp;lt;dbl&amp;gt;&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>Now that we have the data we can the resamples we want. We assigned weights before creating the resamples so that information is being carried into the resamples. The weights are not used in the creation of the resamples.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/Random.html'>set.seed&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>2&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>sim_folds&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>vfold_cv&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>training_sim&lt;/span>, strata &lt;span class='o'>=&lt;/span> &lt;span class='nv'>class&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>When creating the model specification we don&amp;rsquo;t need to do anything special, as parsnip will apply case weights when there is support for it. If you are unsure if a model supports case weights you can consult the documentation or the &lt;code>show_model_info()&lt;/code> function, like so: &lt;code>show_model_info(&amp;quot;logistic_reg&amp;quot;)&lt;/code>.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>lr_spec&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span>
&lt;span class='nf'>logistic_reg&lt;/span>&lt;span class='o'>(&lt;/span>penalty &lt;span class='o'>=&lt;/span> &lt;span class='nf'>tune&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>, mixture &lt;span class='o'>=&lt;/span> &lt;span class='m'>1&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span>
&lt;span class='nf'>set_engine&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"glmnet"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>Next, we will set up a recipe for preprocessing&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>sim_rec&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span>
&lt;span class='nf'>recipe&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>class&lt;/span> &lt;span class='o'>~&lt;/span> &lt;span class='nv'>.&lt;/span>, data &lt;span class='o'>=&lt;/span> &lt;span class='nv'>training_sim&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span>
&lt;span class='nf'>step_ns&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>starts_with&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"non_linear"&lt;/span>&lt;span class='o'>)&lt;/span>, deg_free &lt;span class='o'>=&lt;/span> &lt;span class='m'>10&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span>
&lt;span class='nf'>step_normalize&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>all_numeric_predictors&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>sim_rec&lt;/span>
&lt;span class='c'>#&amp;gt; Recipe&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;/span>
&lt;span class='c'>#&amp;gt; Inputs:&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;/span>
&lt;span class='c'>#&amp;gt; role #variables&lt;/span>
&lt;span class='c'>#&amp;gt; case_weights 1&lt;/span>
&lt;span class='c'>#&amp;gt; outcome 1&lt;/span>
&lt;span class='c'>#&amp;gt; predictor 15&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;/span>
&lt;span class='c'>#&amp;gt; Operations:&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;/span>
&lt;span class='c'>#&amp;gt; Natural splines on starts_with("non_linear")&lt;/span>
&lt;span class='c'>#&amp;gt; Centering and scaling for all_numeric_predictors()&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>The recipe automatically detects the case weights even though they are captured by the dot on the right-hand side of the formula. The recipe automatically sets its role and will error if that column is changed in any way.&lt;/p>
&lt;p>As mentioned above, any unsupervised steps are unaffected by importance weights so neither &lt;code>step_ns()&lt;/code> or &lt;code>step_normalize()&lt;/code> use the weights in their calculations.&lt;/p>
&lt;p>When using case weights, we would like to encourage users to keep their model and preprocessing tool within a workflow. The workflows package now has an add_case_weights() function to help here:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>lr_wflow&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span>
&lt;span class='nf'>workflow&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span>
&lt;span class='nf'>add_model&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>lr_spec&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span>
&lt;span class='nf'>add_recipe&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>sim_rec&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span>
&lt;span class='nf'>add_case_weights&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>case_wts&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>lr_wflow&lt;/span>
&lt;span class='c'>#&amp;gt; ══ Workflow ════════════════════════════════════════════════════════════════════&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='font-style: italic;'>Preprocessor:&lt;/span> Recipe&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='font-style: italic;'>Model:&lt;/span> logistic_reg()&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;/span>
&lt;span class='c'>#&amp;gt; ── Preprocessor ────────────────────────────────────────────────────────────────&lt;/span>
&lt;span class='c'>#&amp;gt; 2 Recipe Steps&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;/span>
&lt;span class='c'>#&amp;gt; • step_ns()&lt;/span>
&lt;span class='c'>#&amp;gt; • step_normalize()&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;/span>
&lt;span class='c'>#&amp;gt; ── Case Weights ────────────────────────────────────────────────────────────────&lt;/span>
&lt;span class='c'>#&amp;gt; case_wts&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;/span>
&lt;span class='c'>#&amp;gt; ── Model ───────────────────────────────────────────────────────────────────────&lt;/span>
&lt;span class='c'>#&amp;gt; Logistic Regression Model Specification (classification)&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;/span>
&lt;span class='c'>#&amp;gt; Main Arguments:&lt;/span>
&lt;span class='c'>#&amp;gt; penalty = tune()&lt;/span>
&lt;span class='c'>#&amp;gt; mixture = 1&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;/span>
&lt;span class='c'>#&amp;gt; Computational engine: glmnet&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>And that is all you need to use case weights, the remaining functions from the tune and yardstick package know how to deal with case weights depending on the type of weight.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>cls_metrics&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>metric_set&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>sensitivity&lt;/span>, &lt;span class='nv'>specificity&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>grid&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>tibble&lt;/span>&lt;span class='o'>(&lt;/span>penalty &lt;span class='o'>=&lt;/span> &lt;span class='m'>10&lt;/span>&lt;span class='o'>^&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/seq.html'>seq&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>-&lt;/span>&lt;span class='m'>3&lt;/span>, &lt;span class='m'>0&lt;/span>, length.out &lt;span class='o'>=&lt;/span> &lt;span class='m'>20&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/Random.html'>set.seed&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>3&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>lr_res&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span>
&lt;span class='nv'>lr_wflow&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span>
&lt;span class='nf'>tune_grid&lt;/span>&lt;span class='o'>(&lt;/span>resamples &lt;span class='o'>=&lt;/span> &lt;span class='nv'>sim_folds&lt;/span>, grid &lt;span class='o'>=&lt;/span> &lt;span class='nv'>grid&lt;/span>, metrics &lt;span class='o'>=&lt;/span> &lt;span class='nv'>cls_metrics&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nf'>autoplot&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>lr_res&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-8-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;h2 id="non-standard-roles-in-recipes">Non-standard roles in recipes
&lt;a href="#non-standard-roles-in-recipes">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>The recipes package use the idea of roles to determine how and when the different variables are used. The main roles are &lt;code>&amp;quot;outcome&amp;quot;&lt;/code>, &lt;code>&amp;quot;predictor&amp;quot;&lt;/code>, and now &lt;code>&amp;quot;case_weights&amp;quot;&lt;/code>. You are also able to change the roles of these variables using &lt;code>add_role()&lt;/code> and &lt;code>update_role()&lt;/code>.&lt;/p>
&lt;p>With a recent addition of case weights as another type of standard role, we have made recipes more robust. It now checks that all columns in the &lt;code>data&lt;/code> supplied to &lt;code>recipe()&lt;/code> are also present in the &lt;code>new_data&lt;/code> supplied to &lt;code>bake()&lt;/code>. An exception is made for columns with roles of either &lt;code>&amp;quot;outcome&amp;quot;&lt;/code> or &lt;code>&amp;quot;case_weights&amp;quot;&lt;/code> because these are typically not required at &lt;code>bake()&lt;/code> time.&lt;/p>
&lt;p>This change for stricter checking of roles will mean that you might need to make some small changes to your code if you are using non-standard roles.&lt;/p>
&lt;p>Let&amp;rsquo;s look at the &lt;code>tate_text&lt;/code> data set as an example:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/utils/data.html'>data&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"tate_text"&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nf'>glimpse&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>tate_text&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; Rows: 4,284&lt;/span>
&lt;span class='c'>#&amp;gt; Columns: 5&lt;/span>
&lt;span class='c'>#&amp;gt; $ id &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> 21926, 20472, 20474, 20473, 20513, 21389, 121187, 19455, 20938,…&lt;/span>
&lt;span class='c'>#&amp;gt; $ artist &lt;span style='color: #555555; font-style: italic;'>&amp;lt;fct&amp;gt;&lt;/span> "Absalon", "Auerbach, Frank", "Auerbach, Frank", "Auerbach, Fra…&lt;/span>
&lt;span class='c'>#&amp;gt; $ title &lt;span style='color: #555555; font-style: italic;'>&amp;lt;chr&amp;gt;&lt;/span> "Proposals for a Habitat", "Michael", "Geoffrey", "Jake", "To t…&lt;/span>
&lt;span class='c'>#&amp;gt; $ medium &lt;span style='color: #555555; font-style: italic;'>&amp;lt;fct&amp;gt;&lt;/span> "Video, monitor or projection, colour and sound (stereo)", "Etc…&lt;/span>
&lt;span class='c'>#&amp;gt; $ year &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> 1990, 1990, 1990, 1990, 1990, 1990, 1990, 1990, 1990, 1990, 199…&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>This data set includes an &lt;code>id&lt;/code> variable that shouldn&amp;rsquo;t have any predictive power and a &lt;code>title&lt;/code> variable that we want to ignore for now. We can let the recipe know that we don&amp;rsquo;t want it to treat &lt;code>id&lt;/code> and &lt;code>title&lt;/code> as predictors by giving them a different role which we will call &lt;code>&amp;quot;id&amp;quot;&lt;/code> here:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>tate_rec&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>recipe&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>year&lt;/span> &lt;span class='o'>~&lt;/span> &lt;span class='nv'>.&lt;/span>, data &lt;span class='o'>=&lt;/span> &lt;span class='nv'>tate_text&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span>
&lt;span class='nf'>update_role&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>id&lt;/span>, &lt;span class='nv'>title&lt;/span>, new_role &lt;span class='o'>=&lt;/span> &lt;span class='s'>"id"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span>
&lt;span class='nf'>step_dummy_extract&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>artist&lt;/span>, &lt;span class='nv'>medium&lt;/span>, sep &lt;span class='o'>=&lt;/span> &lt;span class='s'>", "&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>tate_rec_prepped&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>prep&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>tate_rec&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>This will now error when we try to apply the recipe to new data that contains only our predictors:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>new_painting&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>tibble&lt;/span>&lt;span class='o'>(&lt;/span>
artist &lt;span class='o'>=&lt;/span> &lt;span class='s'>"Hamilton, Richard"&lt;/span>,
medium &lt;span class='o'>=&lt;/span> &lt;span class='s'>"Letterpress on paper"&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;span class='nf'>bake&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>tate_rec_prepped&lt;/span>, &lt;span class='nv'>new_painting&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00; font-weight: bold;'>Error&lt;/span>&lt;span style='font-weight: bold;'> in `bake()`:&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00;'>!&lt;/span> The following required columns are missing from `new_data`: "id", "title".&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>ℹ&lt;/span> These columns have one of the following roles, which are required at `bake()` time: "id".&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>ℹ&lt;/span> If these roles are not required at `bake()` time, use `update_role_requirements(role = "your_role", bake = FALSE)`.&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>It complains because the recipe is expecting the &lt;code>id&lt;/code> and &lt;code>title&lt;/code> variables to be in the data set passed to &lt;code>bake()&lt;/code>. We can use
&lt;a href="https://recipes.tidymodels.org/reference/update_role_requirements.html" target="_blank" rel="noopener">update_role_requirements()&lt;/a> to tell the recipe that variables of role &lt;code>&amp;quot;id&amp;quot;&lt;/code> are not required when baking and we are good to go!&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>tate_rec&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>recipe&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>year&lt;/span> &lt;span class='o'>~&lt;/span> &lt;span class='nv'>.&lt;/span>, data &lt;span class='o'>=&lt;/span> &lt;span class='nv'>tate_text&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span>
&lt;span class='nf'>update_role&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>id&lt;/span>, &lt;span class='nv'>title&lt;/span>, new_role &lt;span class='o'>=&lt;/span> &lt;span class='s'>"id"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span>
&lt;span class='nf'>update_role_requirements&lt;/span>&lt;span class='o'>(&lt;/span>role &lt;span class='o'>=&lt;/span> &lt;span class='s'>"id"&lt;/span>, bake &lt;span class='o'>=&lt;/span> &lt;span class='kc'>FALSE&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span>
&lt;span class='nf'>step_dummy_extract&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>artist&lt;/span>, &lt;span class='nv'>medium&lt;/span>, sep &lt;span class='o'>=&lt;/span> &lt;span class='s'>", "&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>tate_rec_prepped&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>prep&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>tate_rec&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nf'>bake&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>tate_rec_prepped&lt;/span>, &lt;span class='nv'>new_painting&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 1 × 2,675&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; artist_Abigail artist_Abraham artist_Absalon artist_Abts artist_Achill&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>1&lt;/span> 0 0 0 0 0&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># … with 2,670 more variables: artist_Ackroyd &amp;lt;dbl&amp;gt;, artist_Adam &amp;lt;dbl&amp;gt;,&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># artist_Agnes &amp;lt;dbl&amp;gt;, artist_Ahtila &amp;lt;dbl&amp;gt;, artist_Ai &amp;lt;dbl&amp;gt;,&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># artist_Akram &amp;lt;dbl&amp;gt;, artist_Aksel &amp;lt;dbl&amp;gt;, artist_Al &amp;lt;dbl&amp;gt;,&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># artist_Al.Ani &amp;lt;dbl&amp;gt;, artist_Alan &amp;lt;dbl&amp;gt;, artist_Albert &amp;lt;dbl&amp;gt;,&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># artist_Aleksandra &amp;lt;dbl&amp;gt;, artist_Alex &amp;lt;dbl&amp;gt;, artist_Alexander &amp;lt;dbl&amp;gt;,&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># artist_Alexandre.da &amp;lt;dbl&amp;gt;, artist_Alfredo &amp;lt;dbl&amp;gt;, artist_Alice &amp;lt;dbl&amp;gt;,&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># artist_Alimpiev &amp;lt;dbl&amp;gt;, artist_Alison &amp;lt;dbl&amp;gt;, artist_Allen &amp;lt;dbl&amp;gt;, …&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;ul>
&lt;li>
&lt;p>applicable
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/marlycormar" target="_blank" rel="noopener">@marlycormar&lt;/a>,
&lt;a href="https://github.com/mikemahoney218" target="_blank" rel="noopener">@mikemahoney218&lt;/a>, and
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>baguette:
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>, and
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>bonsai:
&lt;a href="https://github.com/bwilkowski" target="_blank" rel="noopener">@bwilkowski&lt;/a>,
&lt;a href="https://github.com/joeycouse" target="_blank" rel="noopener">@joeycouse&lt;/a>,
&lt;a href="https://github.com/pinogl" target="_blank" rel="noopener">@pinogl&lt;/a>,
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>, and
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>broom:
&lt;a href="https://github.com/behrman" target="_blank" rel="noopener">@behrman&lt;/a>,
&lt;a href="https://github.com/corybrunson" target="_blank" rel="noopener">@corybrunson&lt;/a>,
&lt;a href="https://github.com/fschaffner" target="_blank" rel="noopener">@fschaffner&lt;/a>,
&lt;a href="https://github.com/gjones1219" target="_blank" rel="noopener">@gjones1219&lt;/a>,
&lt;a href="https://github.com/grantmcdermott" target="_blank" rel="noopener">@grantmcdermott&lt;/a>,
&lt;a href="https://github.com/mfansler" target="_blank" rel="noopener">@mfansler&lt;/a>,
&lt;a href="https://github.com/michaeltopper1" target="_blank" rel="noopener">@michaeltopper1&lt;/a>,
&lt;a href="https://github.com/ray-p144" target="_blank" rel="noopener">@ray-p144&lt;/a>,
&lt;a href="https://github.com/RichardJActon" target="_blank" rel="noopener">@RichardJActon&lt;/a>,
&lt;a href="https://github.com/russHyde" target="_blank" rel="noopener">@russHyde&lt;/a>,
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>,
&lt;a href="https://github.com/tappek" target="_blank" rel="noopener">@tappek&lt;/a>,
&lt;a href="https://github.com/Timelessprod" target="_blank" rel="noopener">@Timelessprod&lt;/a>, and
&lt;a href="https://github.com/vincentarelbundock" target="_blank" rel="noopener">@vincentarelbundock&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>butcher:
&lt;a href="https://github.com/cregouby" target="_blank" rel="noopener">@cregouby&lt;/a>,
&lt;a href="https://github.com/davidkane9" target="_blank" rel="noopener">@davidkane9&lt;/a>,
&lt;a href="https://github.com/DavisVaughan" target="_blank" rel="noopener">@DavisVaughan&lt;/a>,
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>, and
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>censored:
&lt;a href="https://github.com/bcjaeger" target="_blank" rel="noopener">@bcjaeger&lt;/a>,
&lt;a href="https://github.com/brunocarlin" target="_blank" rel="noopener">@brunocarlin&lt;/a>,
&lt;a href="https://github.com/erikvona" target="_blank" rel="noopener">@erikvona&lt;/a>,
&lt;a href="https://github.com/gvelasq" target="_blank" rel="noopener">@gvelasq&lt;/a>,
&lt;a href="https://github.com/hfrick" target="_blank" rel="noopener">@hfrick&lt;/a>,
&lt;a href="https://github.com/mikemahoney218" target="_blank" rel="noopener">@mikemahoney218&lt;/a>, and
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>corrr:
&lt;a href="https://github.com/astamm" target="_blank" rel="noopener">@astamm&lt;/a>,
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/john-s-f" target="_blank" rel="noopener">@john-s-f&lt;/a>,
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>, and
&lt;a href="https://github.com/thisisdaryn" target="_blank" rel="noopener">@thisisdaryn&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>dials:
&lt;a href="https://github.com/DavisVaughan" target="_blank" rel="noopener">@DavisVaughan&lt;/a>,
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/franzbischoff" target="_blank" rel="noopener">@franzbischoff&lt;/a>,
&lt;a href="https://github.com/hadley" target="_blank" rel="noopener">@hadley&lt;/a>,
&lt;a href="https://github.com/hfrick" target="_blank" rel="noopener">@hfrick&lt;/a>,
&lt;a href="https://github.com/mikemahoney218" target="_blank" rel="noopener">@mikemahoney218&lt;/a>,
&lt;a href="https://github.com/py9mrg" target="_blank" rel="noopener">@py9mrg&lt;/a>,
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>, and
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>discrim:
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/hfrick" target="_blank" rel="noopener">@hfrick&lt;/a>,
&lt;a href="https://github.com/jmarshallnz" target="_blank" rel="noopener">@jmarshallnz&lt;/a>,
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>, and
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>embed:
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/exsell-jc" target="_blank" rel="noopener">@exsell-jc&lt;/a>,
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>,
&lt;a href="https://github.com/mkhansa" target="_blank" rel="noopener">@mkhansa&lt;/a>,
&lt;a href="https://github.com/talegari" target="_blank" rel="noopener">@talegari&lt;/a>, and
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>hardhat:
&lt;a href="https://github.com/DavisVaughan" target="_blank" rel="noopener">@DavisVaughan&lt;/a>,
&lt;a href="https://github.com/jonthegeek" target="_blank" rel="noopener">@jonthegeek&lt;/a>,
&lt;a href="https://github.com/mdancho84" target="_blank" rel="noopener">@mdancho84&lt;/a>, and
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>infer:
&lt;a href="https://github.com/gdbassett" target="_blank" rel="noopener">@gdbassett&lt;/a>,
&lt;a href="https://github.com/liubao210" target="_blank" rel="noopener">@liubao210&lt;/a>,
&lt;a href="https://github.com/nipnipj" target="_blank" rel="noopener">@nipnipj&lt;/a>, and
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>modeldata:
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/jbkunst" target="_blank" rel="noopener">@jbkunst&lt;/a>,
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>,
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>, and
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>multilevelmod:
&lt;a href="https://github.com/a-difabio" target="_blank" rel="noopener">@a-difabio&lt;/a>,
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/hfrick" target="_blank" rel="noopener">@hfrick&lt;/a>,
&lt;a href="https://github.com/sitendug" target="_blank" rel="noopener">@sitendug&lt;/a>,
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>, and
&lt;a href="https://github.com/YiweiZhu" target="_blank" rel="noopener">@YiweiZhu&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>parsnip:
&lt;a href="https://github.com/bappa10085" target="_blank" rel="noopener">@bappa10085&lt;/a>,
&lt;a href="https://github.com/brunocarlin" target="_blank" rel="noopener">@brunocarlin&lt;/a>,
&lt;a href="https://github.com/cb12991" target="_blank" rel="noopener">@cb12991&lt;/a>,
&lt;a href="https://github.com/DavisVaughan" target="_blank" rel="noopener">@DavisVaughan&lt;/a>,
&lt;a href="https://github.com/deschen1" target="_blank" rel="noopener">@deschen1&lt;/a>,
&lt;a href="https://github.com/edgararuiz" target="_blank" rel="noopener">@edgararuiz&lt;/a>,
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/emmamendelsohn" target="_blank" rel="noopener">@emmamendelsohn&lt;/a>,
&lt;a href="https://github.com/exsell-jc" target="_blank" rel="noopener">@exsell-jc&lt;/a>,
&lt;a href="https://github.com/fdeoliveirag" target="_blank" rel="noopener">@fdeoliveirag&lt;/a>,
&lt;a href="https://github.com/gundalav" target="_blank" rel="noopener">@gundalav&lt;/a>,
&lt;a href="https://github.com/hfrick" target="_blank" rel="noopener">@hfrick&lt;/a>,
&lt;a href="https://github.com/jmarshallnz" target="_blank" rel="noopener">@jmarshallnz&lt;/a>,
&lt;a href="https://github.com/joeycouse" target="_blank" rel="noopener">@joeycouse&lt;/a>,
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>,
&lt;a href="https://github.com/Npaffen" target="_blank" rel="noopener">@Npaffen&lt;/a>,
&lt;a href="https://github.com/oj713" target="_blank" rel="noopener">@oj713&lt;/a>,
&lt;a href="https://github.com/pmags" target="_blank" rel="noopener">@pmags&lt;/a>,
&lt;a href="https://github.com/PursuitOfDataScience" target="_blank" rel="noopener">@PursuitOfDataScience&lt;/a>,
&lt;a href="https://github.com/qiushiyan" target="_blank" rel="noopener">@qiushiyan&lt;/a>,
&lt;a href="https://github.com/salim-b" target="_blank" rel="noopener">@salim-b&lt;/a>,
&lt;a href="https://github.com/shosaco" target="_blank" rel="noopener">@shosaco&lt;/a>,
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>,
&lt;a href="https://github.com/tolliam" target="_blank" rel="noopener">@tolliam&lt;/a>, and
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>plsmod:
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>poissonreg:
&lt;a href="https://github.com/hfrick" target="_blank" rel="noopener">@hfrick&lt;/a>,
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>, and
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>recipes:
&lt;a href="https://github.com/abichat" target="_blank" rel="noopener">@abichat&lt;/a>,
&lt;a href="https://github.com/albertiniufu" target="_blank" rel="noopener">@albertiniufu&lt;/a>,
&lt;a href="https://github.com/AndrewKostandy" target="_blank" rel="noopener">@AndrewKostandy&lt;/a>,
&lt;a href="https://github.com/aridf" target="_blank" rel="noopener">@aridf&lt;/a>,
&lt;a href="https://github.com/brunocarlin" target="_blank" rel="noopener">@brunocarlin&lt;/a>,
&lt;a href="https://github.com/cb12991" target="_blank" rel="noopener">@cb12991&lt;/a>,
&lt;a href="https://github.com/conorjudge" target="_blank" rel="noopener">@conorjudge&lt;/a>,
&lt;a href="https://github.com/DavisVaughan" target="_blank" rel="noopener">@DavisVaughan&lt;/a>,
&lt;a href="https://github.com/duccioa" target="_blank" rel="noopener">@duccioa&lt;/a>,
&lt;a href="https://github.com/edgararuiz" target="_blank" rel="noopener">@edgararuiz&lt;/a>,
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/exsell-jc" target="_blank" rel="noopener">@exsell-jc&lt;/a>,
&lt;a href="https://github.com/gundalav" target="_blank" rel="noopener">@gundalav&lt;/a>,
&lt;a href="https://github.com/hsbadr" target="_blank" rel="noopener">@hsbadr&lt;/a>,
&lt;a href="https://github.com/jkennel" target="_blank" rel="noopener">@jkennel&lt;/a>,
&lt;a href="https://github.com/joeycouse" target="_blank" rel="noopener">@joeycouse&lt;/a>,
&lt;a href="https://github.com/joranE" target="_blank" rel="noopener">@joranE&lt;/a>,
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>,
&lt;a href="https://github.com/kendonB" target="_blank" rel="noopener">@kendonB&lt;/a>,
&lt;a href="https://github.com/krzjoa" target="_blank" rel="noopener">@krzjoa&lt;/a>,
&lt;a href="https://github.com/madprogramer" target="_blank" rel="noopener">@madprogramer&lt;/a>,
&lt;a href="https://github.com/mdporter" target="_blank" rel="noopener">@mdporter&lt;/a>,
&lt;a href="https://github.com/mdsteiner" target="_blank" rel="noopener">@mdsteiner&lt;/a>,
&lt;a href="https://github.com/nipnipj" target="_blank" rel="noopener">@nipnipj&lt;/a>,
&lt;a href="https://github.com/PursuitOfDataScience" target="_blank" rel="noopener">@PursuitOfDataScience&lt;/a>,
&lt;a href="https://github.com/r2evans" target="_blank" rel="noopener">@r2evans&lt;/a>,
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>,
&lt;a href="https://github.com/szymonkusak" target="_blank" rel="noopener">@szymonkusak&lt;/a>,
&lt;a href="https://github.com/themichjam" target="_blank" rel="noopener">@themichjam&lt;/a>,
&lt;a href="https://github.com/tmastny" target="_blank" rel="noopener">@tmastny&lt;/a>,
&lt;a href="https://github.com/tomazweiss" target="_blank" rel="noopener">@tomazweiss&lt;/a>,
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>,
&lt;a href="https://github.com/TylerGrantSmith" target="_blank" rel="noopener">@TylerGrantSmith&lt;/a>, and
&lt;a href="https://github.com/zenggyu" target="_blank" rel="noopener">@zenggyu&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>rsample:
&lt;a href="https://github.com/DavisVaughan" target="_blank" rel="noopener">@DavisVaughan&lt;/a>,
&lt;a href="https://github.com/dfalbel" target="_blank" rel="noopener">@dfalbel&lt;/a>,
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>,
&lt;a href="https://github.com/mattwarkentin" target="_blank" rel="noopener">@mattwarkentin&lt;/a>,
&lt;a href="https://github.com/mdporter" target="_blank" rel="noopener">@mdporter&lt;/a>,
&lt;a href="https://github.com/mikemahoney218" target="_blank" rel="noopener">@mikemahoney218&lt;/a>,
&lt;a href="https://github.com/pgoodling-usgs" target="_blank" rel="noopener">@pgoodling-usgs&lt;/a>,
&lt;a href="https://github.com/sametsoekel" target="_blank" rel="noopener">@sametsoekel&lt;/a>,
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>, and
&lt;a href="https://github.com/wkdavis" target="_blank" rel="noopener">@wkdavis&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>rules:
&lt;a href="https://github.com/DesmondChoy" target="_blank" rel="noopener">@DesmondChoy&lt;/a>,
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>,
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>,
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>, and
&lt;a href="https://github.com/wdkeyzer" target="_blank" rel="noopener">@wdkeyzer&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>shinymodels:
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>, and
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>spatialsample:
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>,
&lt;a href="https://github.com/mikemahoney218" target="_blank" rel="noopener">@mikemahoney218&lt;/a>,
&lt;a href="https://github.com/MxNl" target="_blank" rel="noopener">@MxNl&lt;/a>,
&lt;a href="https://github.com/nipnipj" target="_blank" rel="noopener">@nipnipj&lt;/a>, and
&lt;a href="https://github.com/PathosEthosLogos" target="_blank" rel="noopener">@PathosEthosLogos&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>stacks:
&lt;a href="https://github.com/amcmahon17" target="_blank" rel="noopener">@amcmahon17&lt;/a>,
&lt;a href="https://github.com/domijan" target="_blank" rel="noopener">@domijan&lt;/a>,
&lt;a href="https://github.com/Jeffrothschild" target="_blank" rel="noopener">@Jeffrothschild&lt;/a>,
&lt;a href="https://github.com/mcavs" target="_blank" rel="noopener">@mcavs&lt;/a>,
&lt;a href="https://github.com/mvt-oviedo" target="_blank" rel="noopener">@mvt-oviedo&lt;/a>,
&lt;a href="https://github.com/osorensen" target="_blank" rel="noopener">@osorensen&lt;/a>,
&lt;a href="https://github.com/py9mrg" target="_blank" rel="noopener">@py9mrg&lt;/a>,
&lt;a href="https://github.com/rcannood" target="_blank" rel="noopener">@rcannood&lt;/a>,
&lt;a href="https://github.com/Saarialho" target="_blank" rel="noopener">@Saarialho&lt;/a>,
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>, and
&lt;a href="https://github.com/williamshell" target="_blank" rel="noopener">@williamshell&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>textrecipes:
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/NLDataScientist" target="_blank" rel="noopener">@NLDataScientist&lt;/a>,
&lt;a href="https://github.com/PursuitOfDataScience" target="_blank" rel="noopener">@PursuitOfDataScience&lt;/a>, and
&lt;a href="https://github.com/raj-hubber" target="_blank" rel="noopener">@raj-hubber&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>themis:
&lt;a href="https://github.com/coforfe" target="_blank" rel="noopener">@coforfe&lt;/a>, and
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>tidymodels:
&lt;a href="https://github.com/DavisVaughan" target="_blank" rel="noopener">@DavisVaughan&lt;/a>,
&lt;a href="https://github.com/EngrStudent" target="_blank" rel="noopener">@EngrStudent&lt;/a>,
&lt;a href="https://github.com/exsell-jc" target="_blank" rel="noopener">@exsell-jc&lt;/a>,
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>,
&lt;a href="https://github.com/kcarnold" target="_blank" rel="noopener">@kcarnold&lt;/a>,
&lt;a href="https://github.com/scottlyden" target="_blank" rel="noopener">@scottlyden&lt;/a>, and
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>tidyposterior:
&lt;a href="https://github.com/jmgirard" target="_blank" rel="noopener">@jmgirard&lt;/a>,
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>,
&lt;a href="https://github.com/mikemahoney218" target="_blank" rel="noopener">@mikemahoney218&lt;/a>,
&lt;a href="https://github.com/mone27" target="_blank" rel="noopener">@mone27&lt;/a>, and
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>tidypredict:
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>,
&lt;a href="https://github.com/mgirlich" target="_blank" rel="noopener">@mgirlich&lt;/a>,
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>, and
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>tune:
&lt;a href="https://github.com/DavisVaughan" target="_blank" rel="noopener">@DavisVaughan&lt;/a>,
&lt;a href="https://github.com/dax44" target="_blank" rel="noopener">@dax44&lt;/a>,
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/felxcon" target="_blank" rel="noopener">@felxcon&lt;/a>,
&lt;a href="https://github.com/franzbischoff" target="_blank" rel="noopener">@franzbischoff&lt;/a>,
&lt;a href="https://github.com/hfrick" target="_blank" rel="noopener">@hfrick&lt;/a>,
&lt;a href="https://github.com/joeycouse" target="_blank" rel="noopener">@joeycouse&lt;/a>,
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>,
&lt;a href="https://github.com/mattwarkentin" target="_blank" rel="noopener">@mattwarkentin&lt;/a>,
&lt;a href="https://github.com/mdancho84" target="_blank" rel="noopener">@mdancho84&lt;/a>,
&lt;a href="https://github.com/mikemahoney218" target="_blank" rel="noopener">@mikemahoney218&lt;/a>,
&lt;a href="https://github.com/munoztd0" target="_blank" rel="noopener">@munoztd0&lt;/a>,
&lt;a href="https://github.com/nikhilpathiyil" target="_blank" rel="noopener">@nikhilpathiyil&lt;/a>,
&lt;a href="https://github.com/pgoodling-usgs" target="_blank" rel="noopener">@pgoodling-usgs&lt;/a>,
&lt;a href="https://github.com/py9mrg" target="_blank" rel="noopener">@py9mrg&lt;/a>,
&lt;a href="https://github.com/qiushiyan" target="_blank" rel="noopener">@qiushiyan&lt;/a>,
&lt;a href="https://github.com/siegfried" target="_blank" rel="noopener">@siegfried&lt;/a>,
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>,
&lt;a href="https://github.com/thegargiulian" target="_blank" rel="noopener">@thegargiulian&lt;/a>,
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>,
&lt;a href="https://github.com/williamshell" target="_blank" rel="noopener">@williamshell&lt;/a>, and
&lt;a href="https://github.com/wtbxsjy" target="_blank" rel="noopener">@wtbxsjy&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>usemodels:
&lt;a href="https://github.com/aloes2512" target="_blank" rel="noopener">@aloes2512&lt;/a>,
&lt;a href="https://github.com/amcmahon17" target="_blank" rel="noopener">@amcmahon17&lt;/a>,
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>, and
&lt;a href="https://github.com/larry77" target="_blank" rel="noopener">@larry77&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>workflows:
&lt;a href="https://github.com/CarstenLange" target="_blank" rel="noopener">@CarstenLange&lt;/a>,
&lt;a href="https://github.com/dajmcdon" target="_blank" rel="noopener">@dajmcdon&lt;/a>,
&lt;a href="https://github.com/DavisVaughan" target="_blank" rel="noopener">@DavisVaughan&lt;/a>,
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/hfrick" target="_blank" rel="noopener">@hfrick&lt;/a>,
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>,
&lt;a href="https://github.com/nipnipj" target="_blank" rel="noopener">@nipnipj&lt;/a>,
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>,
&lt;a href="https://github.com/themichjam" target="_blank" rel="noopener">@themichjam&lt;/a>, and
&lt;a href="https://github.com/TylerGrantSmith" target="_blank" rel="noopener">@TylerGrantSmith&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>workflowsets:
&lt;a href="https://github.com/a-difabio" target="_blank" rel="noopener">@a-difabio&lt;/a>,
&lt;a href="https://github.com/BorisDelange" target="_blank" rel="noopener">@BorisDelange&lt;/a>,
&lt;a href="https://github.com/DavisVaughan" target="_blank" rel="noopener">@DavisVaughan&lt;/a>,
&lt;a href="https://github.com/hfrick" target="_blank" rel="noopener">@hfrick&lt;/a>,
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>,
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>,
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>,
&lt;a href="https://github.com/wdefreitas" target="_blank" rel="noopener">@wdefreitas&lt;/a>, and
&lt;a href="https://github.com/yonicd" target="_blank" rel="noopener">@yonicd&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>yardstick:
&lt;a href="https://github.com/1lliter8" target="_blank" rel="noopener">@1lliter8&lt;/a>,
&lt;a href="https://github.com/amcmahon17" target="_blank" rel="noopener">@amcmahon17&lt;/a>,
&lt;a href="https://github.com/brshallo" target="_blank" rel="noopener">@brshallo&lt;/a>,
&lt;a href="https://github.com/DavisVaughan" target="_blank" rel="noopener">@DavisVaughan&lt;/a>,
&lt;a href="https://github.com/gsverhoeven" target="_blank" rel="noopener">@gsverhoeven&lt;/a>,
&lt;a href="https://github.com/mikemahoney218" target="_blank" rel="noopener">@mikemahoney218&lt;/a>,
&lt;a href="https://github.com/parsifal9" target="_blank" rel="noopener">@parsifal9&lt;/a>, and
&lt;a href="https://github.com/sametsoekel" target="_blank" rel="noopener">@sametsoekel&lt;/a>.&lt;/p>
&lt;/li>
&lt;/ul></description></item><item><title>Updates for recipes extension packages</title><link>https://www.tidyverse.org/blog/2022/05/recipes-update-05-20222/</link><pubDate>Tue, 03 May 2022 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2022/05/recipes-update-05-20222/</guid><description>&lt;!--
TODO:
* [x] Look over / edit the post's title in the yaml
* [x] Edit (or delete) the description; note this appears in the Twitter card
* [x] Pick category and tags (see existing with [`hugodown::tidy_show_meta()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html))
* [x] Find photo &amp; update yaml metadata
* [x] Create `thumbnail-sq.jpg`; height and width should be equal
* [x] Create `thumbnail-wd.jpg`; width should be >5x height
* [x] [`hugodown::use_tidy_thumbnails()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html)
* [x] Add intro sentence, e.g. the standard tagline for the package
* [x] [`usethis::use_tidy_thanks()`](https://usethis.r-lib.org/reference/use_tidy_thanks.html)
-->
&lt;p>We&amp;rsquo;re tickled pink to announce the releases of extension packages that followed the recent release of
&lt;a href="https://recipes.tidymodels.org/" target="_blank" rel="noopener">recipes&lt;/a> 0.2.0. recipes is a package for preprocessing data before using it in models or visualizations. You can think of it as a mash-up of
&lt;a href="https://rdrr.io/r/stats/model.matrix.html" target="_blank" rel="noopener">&lt;code>model.matrix()&lt;/code>&lt;/a> and dplyr.&lt;/p>
&lt;p>You can install the these updates from CRAN with:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/utils/install.packages.html'>install.packages&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"embed"&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nf'>&lt;a href='https://rdrr.io/r/utils/install.packages.html'>install.packages&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"themis"&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nf'>&lt;a href='https://rdrr.io/r/utils/install.packages.html'>install.packages&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"textrecipes"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>The &lt;code>NEWS&lt;/code> files are linked here for each package; We will go over some of the bigger changes within and between these packages in this post. A lot of the smaller changes were done to make sure that these extension packages are up to the same standard as recipes itself.&lt;/p>
&lt;ul>
&lt;li>
&lt;a href="https://themis.tidymodels.org/news/index.html#themis-020" target="_blank" rel="noopener">themis&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://textrecipes.tidymodels.org/news/index.html#textrecipes-051" target="_blank" rel="noopener">textrecipes&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://embed.tidymodels.org/news/index.html#embed-020" target="_blank" rel="noopener">embed&lt;/a>&lt;/li>
&lt;/ul>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://github.com/tidymodels/recipes'>recipes&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://github.com/tidymodels/themis'>themis&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://github.com/tidymodels/textrecipes'>textrecipes&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://embed.tidymodels.org'>embed&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://modeldata.tidymodels.org'>modeldata&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/Random.html'>set.seed&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>1234&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;h2 id="themis">themis
&lt;a href="#themis">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>A new step
&lt;a href="https://themis.tidymodels.org/reference/step_smotenc.html" target="_blank" rel="noopener">&lt;code>step_smotenc()&lt;/code>&lt;/a> was added thanks to
&lt;a href="https://github.com/RobertGregg" target="_blank" rel="noopener">Robert Gregg&lt;/a>. This step applies the
&lt;a href="https://scholar.google.com/scholar?hl=en&amp;amp;as_sdt=0%2C7&amp;amp;q=SMOTENC&amp;#43;&amp;amp;btnG=" target="_blank" rel="noopener">SMOTENC algorithm&lt;/a> to synthetically generate observations from minority classes. The SMOTENC method can handle a mix of categorical and numerical predictors, which was not possible using the existing SMOTE method which could only operate on numeric predictors.&lt;/p>
&lt;p>The &lt;code>hpc_data&lt;/code> illustrates this use case neatly. The data set contains characteristics of HPC Unix jobs and how long they took to run (the outcome column is &lt;code>class&lt;/code>). The outcome is not that balanced, with some classes having almost 10 times fewer observations than others. One way to deal with an imbalance like this is to over-sample the minority observations to mitigate the imbalance.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/utils/data.html'>data&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>hpc_data&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>hpc_data&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/count.html'>count&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>class&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 4 × 2&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; class n&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;fct&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;int&amp;gt;&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>1&lt;/span> VF &lt;span style='text-decoration: underline;'>2&lt;/span>211&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>2&lt;/span> F &lt;span style='text-decoration: underline;'>1&lt;/span>347&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>3&lt;/span> M 514&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>4&lt;/span> L 259&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>Using
&lt;a href="https://themis.tidymodels.org/reference/step_smotenc.html" target="_blank" rel="noopener">&lt;code>step_smotenc()&lt;/code>&lt;/a>, with the &lt;code>over_ratio&lt;/code> argument, we can make sure that all classes are over-sampled to have no less than half of the observations of the largest class.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>up_rec&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/recipe.html'>recipe&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>class&lt;/span> &lt;span class='o'>~&lt;/span> &lt;span class='nv'>.&lt;/span>, data &lt;span class='o'>=&lt;/span> &lt;span class='nv'>hpc_data&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>&lt;a href='https://themis.tidymodels.org/reference/step_smotenc.html'>step_smotenc&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>class&lt;/span>, over_ratio &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.5&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/prep.html'>prep&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>up_rec&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/bake.html'>bake&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>new_data &lt;span class='o'>=&lt;/span> &lt;span class='kc'>NULL&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/count.html'>count&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>class&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 4 × 2&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; class n&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;fct&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;int&amp;gt;&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>1&lt;/span> VF &lt;span style='text-decoration: underline;'>2&lt;/span>211&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>2&lt;/span> F &lt;span style='text-decoration: underline;'>1&lt;/span>347&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>3&lt;/span> M &lt;span style='text-decoration: underline;'>1&lt;/span>105&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>4&lt;/span> L &lt;span style='text-decoration: underline;'>1&lt;/span>105&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>The method that was implemented in embed now has
&lt;a href="https://themis.tidymodels.org/reference/index.html#methods" target="_blank" rel="noopener">standalone functions&lt;/a> to apply these algorithms without having to create a recipe.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nf'>&lt;a href='https://themis.tidymodels.org/reference/smotenc.html'>smotenc&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>hpc_data&lt;/span>, &lt;span class='s'>"class"&lt;/span>, over_ratio &lt;span class='o'>=&lt;/span> &lt;span class='m'>0.5&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 5,768 × 8&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; protocol compounds input_fields iterations num_pending hour day class&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;fct&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;fct&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;fct&amp;gt;&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 1&lt;/span> E 997 137 20 0 14 Tue F &lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 2&lt;/span> E 97 103 20 0 13.8 Tue VF &lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 3&lt;/span> E 101 75 10 0 13.8 Thu VF &lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 4&lt;/span> E 93 76 20 0 10.1 Fri VF &lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 5&lt;/span> E 100 82 20 0 10.4 Fri VF &lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 6&lt;/span> E 100 82 20 0 16.5 Wed VF &lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 7&lt;/span> E 105 88 20 0 16.4 Fri VF &lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 8&lt;/span> E 98 95 20 0 16.7 Fri VF &lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 9&lt;/span> E 101 91 20 0 16.2 Fri VF &lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>10&lt;/span> E 95 92 20 0 10.8 Wed VF &lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># … with 5,758 more rows&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;h2 id="textrecipes">textrecipes
&lt;a href="#textrecipes">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>We added the functions
&lt;a href="https://textrecipes.tidymodels.org/reference/all_tokenized.html" target="_blank" rel="noopener">&lt;code>all_tokenized()&lt;/code>&lt;/a> and
&lt;a href="https://textrecipes.tidymodels.org/reference/all_tokenized.html" target="_blank" rel="noopener">&lt;code>all_tokenized_predictors()&lt;/code>&lt;/a> to more easily select tokenized columns, similar to the
&lt;a href="https://recipes.tidymodels.org/reference/has_role.html" target="_blank" rel="noopener">existing &lt;code>all_numeric()&lt;/code> and &lt;code>all_numeric_predictors()&lt;/code> selectors in recipes&lt;/a>.&lt;/p>
&lt;p>The most important step in textrecipes is
&lt;a href="https://textrecipes.tidymodels.org/reference/step_tokenize.html" target="_blank" rel="noopener">&lt;code>step_tokenize()&lt;/code>&lt;/a>, as you need it to generate tokens that can be modified by other steps. We have found that this function has gotten overloaded with functionality as more and more support for different types of tokenization was added. To address this, we have created new specialized tokenization steps;
&lt;a href="https://textrecipes.tidymodels.org/reference/step_tokenize.html" target="_blank" rel="noopener">&lt;code>step_tokenize()&lt;/code>&lt;/a> has gotten cousin steps
&lt;a href="https://textrecipes.tidymodels.org/reference/step_tokenize_bpe.html" target="_blank" rel="noopener">&lt;code>step_tokenize_bpe()&lt;/code>&lt;/a>,
&lt;a href="https://textrecipes.tidymodels.org/reference/step_tokenize_sentencepiece.html" target="_blank" rel="noopener">&lt;code>step_tokenize_sentencepiece()&lt;/code>&lt;/a>, and
&lt;a href="https://textrecipes.tidymodels.org/reference/step_tokenize_wordpiece.html" target="_blank" rel="noopener">&lt;code>step_tokenize_wordpiece()&lt;/code>&lt;/a> which wrap
&lt;a href="https://CRAN.R-project.org/package=tokenizers.bpe" target="_blank" rel="noopener">tokenizers.bpe&lt;/a>,
&lt;a href="https://CRAN.R-project.org/package=sentencepiece" target="_blank" rel="noopener">sentencepiece&lt;/a>, and
&lt;a href="https://CRAN.R-project.org/package=wordpiece" target="_blank" rel="noopener">wordpiece&lt;/a> respectively.&lt;/p>
&lt;p>In addition to being easier to manage code-wise, these new functions also allow for more compact, more readable code with better tab completion.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/utils/data.html'>data&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>tate_text&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'># Old&lt;/span>
&lt;span class='nv'>tate_rec&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/recipe.html'>recipe&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>~&lt;/span>&lt;span class='nv'>.&lt;/span>, data &lt;span class='o'>=&lt;/span> &lt;span class='nv'>tate_text&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>&lt;a href='https://textrecipes.tidymodels.org/reference/step_tokenize.html'>step_tokenize&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
&lt;span class='nv'>text&lt;/span>,
engine &lt;span class='o'>=&lt;/span> &lt;span class='s'>"tokenizers.bpe"&lt;/span>,
training_options &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/list.html'>list&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>vocab_size &lt;span class='o'>=&lt;/span> &lt;span class='m'>1000&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;span class='c'># New&lt;/span>
&lt;span class='nv'>tate_rec&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/recipe.html'>recipe&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>~&lt;/span>&lt;span class='nv'>.&lt;/span>, data &lt;span class='o'>=&lt;/span> &lt;span class='nv'>tate_text&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>&lt;a href='https://textrecipes.tidymodels.org/reference/step_tokenize_bpe.html'>step_tokenize_bpe&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>medium&lt;/span>, vocabulary_size &lt;span class='o'>=&lt;/span> &lt;span class='m'>1000&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;h2 id="embed">embed
&lt;a href="#embed">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>
&lt;a href="https://embed.tidymodels.org/reference/step_feature_hash.html" target="_blank" rel="noopener">&lt;code>step_feature_hash()&lt;/code>&lt;/a> is now soft deprecated in embed in favor of
&lt;a href="https://textrecipes.tidymodels.org/reference/step_dummy_hash.html" target="_blank" rel="noopener">&lt;code>step_dummy_hash()&lt;/code>&lt;/a> in textrecipes. The embed version uses TensorFlow, which for some use cases is quite a dependency. One thing to keep an eye out for when moving over is that the textrecipes version uses &lt;code>num_terms&lt;/code> instead of &lt;code>num_hash&lt;/code> to denote the number of columns to output.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/utils/data.html'>data&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>Sacramento&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'># Old recipe&lt;/span>
&lt;span class='nv'>embed_rec&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/recipe.html'>recipe&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>price&lt;/span> &lt;span class='o'>~&lt;/span> &lt;span class='nv'>zip&lt;/span>, data &lt;span class='o'>=&lt;/span> &lt;span class='nv'>Sacramento&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>&lt;a href='https://embed.tidymodels.org/reference/step_feature_hash.html'>step_feature_hash&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>zip&lt;/span>, num_hash &lt;span class='o'>=&lt;/span> &lt;span class='m'>64&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; Loaded Tensorflow version 2.8.0&lt;/span>
&lt;span class='c'># New recipe&lt;/span>
&lt;span class='nv'>textrecipes_rec&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://recipes.tidymodels.org/reference/recipe.html'>recipe&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>price&lt;/span> &lt;span class='o'>~&lt;/span> &lt;span class='nv'>zip&lt;/span>, data &lt;span class='o'>=&lt;/span> &lt;span class='nv'>Sacramento&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>&lt;a href='https://textrecipes.tidymodels.org/reference/step_dummy_hash.html'>step_dummy_hash&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>zip&lt;/span>, num_terms &lt;span class='o'>=&lt;/span> &lt;span class='m'>64&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>We&amp;rsquo;d like to extend our thanks to all of the contributors who helped make these releases possible!&lt;/p>
&lt;ul>
&lt;li>
&lt;p>themis:
&lt;a href="https://github.com/coforfe" target="_blank" rel="noopener">@coforfe&lt;/a>,
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/emilyriederer" target="_blank" rel="noopener">@emilyriederer&lt;/a>,
&lt;a href="https://github.com/jennybc" target="_blank" rel="noopener">@jennybc&lt;/a>,
&lt;a href="https://github.com/OGuggenbuehl" target="_blank" rel="noopener">@OGuggenbuehl&lt;/a>, and
&lt;a href="https://github.com/RobertGregg" target="_blank" rel="noopener">@RobertGregg&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>textrecipes:
&lt;a href="https://github.com/dgrtwo" target="_blank" rel="noopener">@dgrtwo&lt;/a>,
&lt;a href="https://github.com/DiabbZegpi" target="_blank" rel="noopener">@DiabbZegpi&lt;/a>,
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/jcragy" target="_blank" rel="noopener">@jcragy&lt;/a>,
&lt;a href="https://github.com/jennybc" target="_blank" rel="noopener">@jennybc&lt;/a>,
&lt;a href="https://github.com/joeycouse" target="_blank" rel="noopener">@joeycouse&lt;/a>,
&lt;a href="https://github.com/lionel-" target="_blank" rel="noopener">@lionel-&lt;/a>,
&lt;a href="https://github.com/NLDataScientist" target="_blank" rel="noopener">@NLDataScientist&lt;/a>,
&lt;a href="https://github.com/raj-hubber" target="_blank" rel="noopener">@raj-hubber&lt;/a>, and
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>embed:
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>,
&lt;a href="https://github.com/naveranoc" target="_blank" rel="noopener">@naveranoc&lt;/a>,
&lt;a href="https://github.com/talegari" target="_blank" rel="noopener">@talegari&lt;/a>, and
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>.&lt;/p>
&lt;/li>
&lt;/ul></description></item><item><title>recipes 0.2.0</title><link>https://www.tidyverse.org/blog/2022/02/recipes-0-2-0/</link><pubDate>Tue, 22 Feb 2022 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2022/02/recipes-0-2-0/</guid><description>&lt;!--
TODO:
* [ ] Look over / edit the post's title in the yaml
* [ ] Edit (or delete) the description; note this appears in the Twitter card
* [ ] Pick category and tags (see existing with `hugodown::tidy_show_meta()`)
* [ ] Find photo &amp; update yaml metadata
* [ ] Create `thumbnail-sq.jpg`; height and width should be equal
* [ ] Create `thumbnail-wd.jpg`; width should be >5x height
* [ ] `hugodown::use_tidy_thumbnails()`
* [ ] Add intro sentence, e.g. the standard tagline for the package
* [ ] `usethis::use_tidy_thanks()`
-->
&lt;p>We&amp;rsquo;re very excited to announce the release of
&lt;a href="https://recipes.tidymodels.org/" target="_blank" rel="noopener">recipes&lt;/a> 0.2.0. recipes is a package for preprocessing data before using it in models or visualizations. You can think of it as a mash-up of &lt;code>model.matrix()&lt;/code> and dplyr.&lt;/p>
&lt;p>You can install it from CRAN with:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">install.packages&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;recipes&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>This blog post will describe the highlights of what&amp;rsquo;s new. You can see a full list of changes in the
&lt;a href="https://github.com/tidymodels/recipes/blob/main/NEWS.md" target="_blank" rel="noopener">release notes&lt;/a>.&lt;/p>
&lt;h2 id="new-steps">New Steps
&lt;a href="#new-steps">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>&lt;code>step_nnmf_sparse()&lt;/code> was added to produce features using non-negative matrix factorization (via the
&lt;a href="https://github.com/zdebruine/RcppML" target="_blank" rel="noopener">RcppML&lt;/a> package). This will supersede the existing &lt;code>step_nnmf()&lt;/code> since that step was difficult to support and use. The new step allows for a sparse representation via regularization and, from our initial testing, is &lt;strong>much faster&lt;/strong> than the original NNMF step.&lt;/p>
&lt;p>The new step &lt;code>step_dummy_extract()&lt;/code> helps create indicator variables from text data, especially those with multiple choice values. For example, if a row of a variable had a value of &lt;code>&amp;quot;red,black,brown&amp;quot;&lt;/code>, the step can separate these values and make all of the required binary dummy variables.&lt;/p>
&lt;p>Here&amp;rsquo;s a real example from
&lt;a href="https://www.kaggle.com/c/sliced-s01e08-KJSEks" target="_blank" rel="noopener">Episode 8 of &lt;em>Sliced&lt;/em>&lt;/a> where a column of data from Spotify had the artist(s) of a song:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">recipes&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">spotify&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span>
&lt;span class="n">tibble&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="nf">tribble&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="o">~&lt;/span> &lt;span class="n">artists&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="s">&amp;#34;[&amp;#39;Genesis&amp;#39;]&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="s">&amp;#34;[&amp;#39;Billie Holiday&amp;#39;, &amp;#39;Teddy Wilson&amp;#39;]&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="s">&amp;#34;[&amp;#39;Jimmy Barnes&amp;#39;, &amp;#39;INXS&amp;#39;]&amp;#34;&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;span class="nf">recipe&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">~&lt;/span> &lt;span class="n">artists&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">spotify&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">step_dummy_extract&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">artists&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">pattern&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;(?&amp;lt;=&amp;#39;)[^&amp;#39;,]+(?=&amp;#39;)&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">prep&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">bake&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">new_data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">NULL&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">glimpse&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;pre>&lt;code>## Rows: 3
## Columns: 6
## $ artists_Billie.Holiday &amp;lt;dbl&amp;gt; 0, 1, 0
## $ artists_Genesis &amp;lt;dbl&amp;gt; 1, 0, 0
## $ artists_INXS &amp;lt;dbl&amp;gt; 0, 0, 1
## $ artists_Jimmy.Barnes &amp;lt;dbl&amp;gt; 0, 0, 1
## $ artists_Teddy.Wilson &amp;lt;dbl&amp;gt; 0, 1, 0
## $ artists_other &amp;lt;dbl&amp;gt; 0, 0, 0
&lt;/code>&lt;/pre>&lt;p>Note that this step produces an &amp;ldquo;other&amp;rdquo; column and has arguments similar to &lt;code>step_other()&lt;/code> and &lt;code>step_dummy_multi_choice()&lt;/code>.&lt;/p>
&lt;p>&lt;code>step_percentile()&lt;/code> is a new step function after it had previously only been an example in the developer documentation. It can determine the empirical distribution of a variable using the training set, then convert any value to the percentile of this distribution.&lt;/p>
&lt;p>Finally, a new filtering function (&lt;code>step_filter_missing()&lt;/code>) can filter out columns that have too many missing values (for some definition of &amp;ldquo;too many&amp;rdquo;).&lt;/p>
&lt;h2 id="other-notable-new-features">Other notable new features
&lt;a href="#other-notable-new-features">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>&lt;code>step_zv()&lt;/code> now has a &lt;code>group&lt;/code> argument. This can be helpful for models such as naive Bayes or quadratic discriminant analysis where the predictors must have at least two unique values &lt;em>within each class&lt;/em>.&lt;/p>
&lt;p>All recipe steps now officially support empty selections to be more aligned with dplyr and other packages that use tidyselect. For example, if a previous step removed all of the columns needed for a later step, the recipe does not fail when it is estimated (with the exception of &lt;code>step_mutate()&lt;/code>). The documentation in &lt;code>?selections&lt;/code> has been updated with advice for writing selectors when filtering steps are used.&lt;/p>
&lt;p>There are new &lt;code>extract_parameter_set_dials()&lt;/code> and &lt;code>extract_parameter_dials()&lt;/code> methods to extract parameter sets and single parameters from a recipe. Since this is related to tuning parameters, the tune package should be loaded before they are used.&lt;/p>
&lt;h2 id="breaking-changes">Breaking changes
&lt;a href="#breaking-changes">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Changes in &lt;code>step_ica()&lt;/code> and &lt;code>step_kpca*()&lt;/code> will now cause recipe objects from previous versions to error when applied to new data. You will need to update these recipes with the current version to be able to use them.&lt;/p>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>We&amp;rsquo;d like to thank everyone that has contributed since the last release:
&lt;a href="https://github.com/agwalker82" target="_blank" rel="noopener">@agwalker82&lt;/a>,
&lt;a href="https://github.com/albert-ying" target="_blank" rel="noopener">@albert-ying&lt;/a>,
&lt;a href="https://github.com/AshesITR" target="_blank" rel="noopener">@AshesITR&lt;/a>,
&lt;a href="https://github.com/ddsjoberg" target="_blank" rel="noopener">@ddsjoberg&lt;/a>,
&lt;a href="https://github.com/DoktorMike" target="_blank" rel="noopener">@DoktorMike&lt;/a>,
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/emmansh" target="_blank" rel="noopener">@emmansh&lt;/a>,
&lt;a href="https://github.com/hermandr" target="_blank" rel="noopener">@hermandr&lt;/a>,
&lt;a href="https://github.com/hfrick" target="_blank" rel="noopener">@hfrick&lt;/a>,
&lt;a href="https://github.com/jacekkotowski" target="_blank" rel="noopener">@jacekkotowski&lt;/a>,
&lt;a href="https://github.com/JensPMB" target="_blank" rel="noopener">@JensPMB&lt;/a>,
&lt;a href="https://github.com/jkennel" target="_blank" rel="noopener">@jkennel&lt;/a>,
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>,
&lt;a href="https://github.com/lg1000" target="_blank" rel="noopener">@lg1000&lt;/a>,
&lt;a href="https://github.com/lionel-" target="_blank" rel="noopener">@lionel-&lt;/a>,
&lt;a href="https://github.com/markjrieke" target="_blank" rel="noopener">@markjrieke&lt;/a>,
&lt;a href="https://github.com/mattwarkentin" target="_blank" rel="noopener">@mattwarkentin&lt;/a>,
&lt;a href="https://github.com/MichaelChirico" target="_blank" rel="noopener">@MichaelChirico&lt;/a>,
&lt;a href="https://github.com/ninohardt" target="_blank" rel="noopener">@ninohardt&lt;/a>,
&lt;a href="https://github.com/SewerynGrodny" target="_blank" rel="noopener">@SewerynGrodny&lt;/a>,
&lt;a href="https://github.com/SimonCoulombe" target="_blank" rel="noopener">@SimonCoulombe&lt;/a>,
&lt;a href="https://github.com/spsanderson" target="_blank" rel="noopener">@spsanderson&lt;/a>,
&lt;a href="https://github.com/tedmoorman" target="_blank" rel="noopener">@tedmoorman&lt;/a>,
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>,
&lt;a href="https://github.com/tsengj" target="_blank" rel="noopener">@tsengj&lt;/a>,
&lt;a href="https://github.com/walrossker" target="_blank" rel="noopener">@walrossker&lt;/a>,
&lt;a href="https://github.com/williamshell" target="_blank" rel="noopener">@williamshell&lt;/a>, and
&lt;a href="https://github.com/xiaoxi-david" target="_blank" rel="noopener">@xiaoxi-david&lt;/a>.&lt;/p></description></item><item><title>Q3 2021 tidymodels roundup</title><link>https://www.tidyverse.org/blog/2021/09/tidymodels-2021-q3/</link><pubDate>Tue, 28 Sep 2021 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2021/09/tidymodels-2021-q3/</guid><description>&lt;p>The
&lt;a href="https://www.tidymodels.org/" target="_blank" rel="noopener">tidymodels&lt;/a> framework is a collection of R packages for modeling and machine learning using tidyverse principles. We now publish
&lt;a href="https://www.tidyverse.org/categories/roundup/" target="_blank" rel="noopener">regular updates&lt;/a> here on the tidyverse blog summarizing recent developments in the tidymodels ecosystem. You can check out the
&lt;a href="https://www.tidyverse.org/tags/tidymodels/" target="_blank" rel="noopener">&lt;code>tidymodels&lt;/code> tag&lt;/a> to find all tidymodels blog posts here, including those that focus on a single package or more major releases. The purpose of these roundup posts is to keep you informed about any releases you may have missed and useful new functionality as we maintain these packages.&lt;/p>
&lt;p>Since
&lt;a href="https://www.tidyverse.org/blog/2021/07/tidymodels-july-2021/" target="_blank" rel="noopener">our last roundup post&lt;/a>, there have been 9 CRAN releases of tidymodels packages. You can install these updates from CRAN with:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">install.packages&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;baguette&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;broom&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;dials&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="s">&amp;#34;modeldata&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;poissonreg&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;recipes&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="s">&amp;#34;rules&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;stacks&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;textrecipes&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>The &lt;code>NEWS&lt;/code> files are linked here for each package; you&amp;rsquo;ll notice that many of these releases involve small updates for CRAN policy or changes that are not user-facing. We write code in these smaller, modular packages that we can release frequently to make models easier to deploy and our software easier to maintain, but it can be a lot to keep up with as a user! We want to take the opportunity here to highlight a couple of more important changes in these releases.&lt;/p>
&lt;ul>
&lt;li>
&lt;a href="https://baguette.tidymodels.org/news/index.html#baguette-0-1-1-2021-07-14" target="_blank" rel="noopener">baguette&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://broom.tidymodels.org/news/index.html#broom-0-7-9-2021-07-27" target="_blank" rel="noopener">broom&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://dials.tidymodels.org/news/index.html#dials-0-0-10-2021-09-10" target="_blank" rel="noopener">dials&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://github.com/tidymodels/modeldata/blob/master/NEWS.md#modeldata-011" target="_blank" rel="noopener">modeldata&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://poissonreg.tidymodels.org/news/index.html#poissonreg-0-1-1-2021-08-07" target="_blank" rel="noopener">poissonreg&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://recipes.tidymodels.org/news/index.html#recipes-0-1-17-2021-09-27" target="_blank" rel="noopener">recipes&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://rules.tidymodels.org/news/index.html#rules-0-1-2-2021-08-07" target="_blank" rel="noopener">rules&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://github.com/tidymodels/stacks/blob/main/NEWS.md#v021" target="_blank" rel="noopener">stacks&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://textrecipes.tidymodels.org/news/index.html#textrecipes-0-4-1-2021-07-11" target="_blank" rel="noopener">textrecipes&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="new-parameter-objects">New parameter objects
&lt;a href="#new-parameter-objects">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>The
&lt;a href="https://dials.tidymodels.org/" target="_blank" rel="noopener">dials&lt;/a> package is one that you might not have thought much about yet, even if you are a regular tidymodels user. It is an infrastructure package for creating and managing
&lt;a href="https://www.tmwr.org/tuning.html#tuning-params-tidymodels" target="_blank" rel="noopener">hyperparameters&lt;/a> as well as grids (both
&lt;a href="https://www.tmwr.org/grid-search.html#grids" target="_blank" rel="noopener">regular and non-regular&lt;/a>) of hyperparameters. The most recent release of dials includes several new parameters, and
&lt;a href="https://www.frick.ws/" target="_blank" rel="noopener">Hannah Frick&lt;/a> is now the package maintainer.&lt;/p>
&lt;p>One of the new parameters in this release is
&lt;a href="https://dials.tidymodels.org/reference/stop_iter.html" target="_blank" rel="noopener">&lt;code>stop_iter()&lt;/code>&lt;/a>, the number of iterations without improvement before
&lt;a href="https://en.wikipedia.org/wiki/Early_stopping" target="_blank" rel="noopener">&amp;ldquo;early stopping&amp;rdquo;&lt;/a>.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">tidymodels&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; ── Attaching packages ──────────────────────────── tidymodels 0.1.3 ──&lt;/span>
&lt;span class="c1">#&amp;gt; ✓ broom 0.7.9 ✓ rsample 0.1.0 &lt;/span>
&lt;span class="c1">#&amp;gt; ✓ dials 0.0.10 ✓ tibble 3.1.4 &lt;/span>
&lt;span class="c1">#&amp;gt; ✓ dplyr 1.0.7 ✓ tidyr 1.1.3 &lt;/span>
&lt;span class="c1">#&amp;gt; ✓ infer 1.0.0 ✓ tune 0.1.6 &lt;/span>
&lt;span class="c1">#&amp;gt; ✓ modeldata 0.1.1 ✓ workflows 0.2.3 &lt;/span>
&lt;span class="c1">#&amp;gt; ✓ parsnip 0.1.7 ✓ workflowsets 0.1.0 &lt;/span>
&lt;span class="c1">#&amp;gt; ✓ purrr 0.3.4 ✓ yardstick 0.0.8 &lt;/span>
&lt;span class="c1">#&amp;gt; ✓ recipes 0.1.17&lt;/span>
&lt;span class="c1">#&amp;gt; ── Conflicts ─────────────────────────────── tidymodels_conflicts() ──&lt;/span>
&lt;span class="c1">#&amp;gt; x purrr::discard() masks scales::discard()&lt;/span>
&lt;span class="c1">#&amp;gt; x dplyr::filter() masks stats::filter()&lt;/span>
&lt;span class="c1">#&amp;gt; x dplyr::lag() masks stats::lag()&lt;/span>
&lt;span class="c1">#&amp;gt; x recipes::step() masks stats::step()&lt;/span>
&lt;span class="c1">#&amp;gt; • Use tidymodels_prefer() to resolve common conflicts.&lt;/span>
&lt;span class="nf">stop_iter&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1">#&amp;gt; # Iterations Before Stopping (quantitative)&lt;/span>
&lt;span class="c1">#&amp;gt; Range: [3, 20]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>You don&amp;rsquo;t typically use parameters from dials like this, though. Instead, the infrastructure these parameters provide is what allows us to fluently tune our hyperparameters. For example, we can use data on high-performance computing jobs to predict the class of those jobs with xgboost, choosing to try out different values for early stopping (along with another hyperparameter &lt;code>mtry&lt;/code>).&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">data&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">hpc_data&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">hpc_folds&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">vfold_cv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">hpc_data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">strata&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">class&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">hpc_formula&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="n">class&lt;/span> &lt;span class="o">~&lt;/span> &lt;span class="n">compounds&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">input_fields&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">iterations&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">num_pending&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">hour&lt;/span>
&lt;span class="n">stopping_spec&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span>
&lt;span class="nf">boost_tree&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="n">trees&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">500&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">learn_rate&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">0.02&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">mtry&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">tune&lt;/span>&lt;span class="p">(),&lt;/span>
&lt;span class="n">stop_iter&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">tune&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">set_engine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;xgboost&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">validation&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">0.2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">set_mode&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;classification&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">early_stop_wf&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">workflow&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">hpc_formula&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">stopping_spec&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>We can now tune this &lt;code>workflow()&lt;/code> over the resamples &lt;code>hpc_folds&lt;/code> and find out which values for the hyperparameters turned out best.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">doParallel&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="nf">registerDoParallel&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="nf">set.seed&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">123&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">early_stop_rs&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">tune_grid&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">early_stop_wf&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">hpc_folds&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; i Creating pre-processing data to finalize unknown parameter: mtry&lt;/span>
&lt;span class="nf">show_best&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">early_stop_rs&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;roc_auc&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 5 × 8&lt;/span>
&lt;span class="c1">#&amp;gt; mtry stop_iter .metric .estimator mean n std_err .config &lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;int&amp;gt; &amp;lt;int&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;int&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;chr&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; 1 3 13 roc_auc hand_till 0.887 10 0.00337 Preprocessor…&lt;/span>
&lt;span class="c1">#&amp;gt; 2 2 11 roc_auc hand_till 0.887 10 0.00414 Preprocessor…&lt;/span>
&lt;span class="c1">#&amp;gt; 3 2 15 roc_auc hand_till 0.886 10 0.00342 Preprocessor…&lt;/span>
&lt;span class="c1">#&amp;gt; 4 4 7 roc_auc hand_till 0.885 10 0.00365 Preprocessor…&lt;/span>
&lt;span class="c1">#&amp;gt; 5 4 9 roc_auc hand_till 0.884 10 0.00353 Preprocessor…&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>In this case, the best value for the early stopping parameter is 13.&lt;/p>
&lt;p>
&lt;a href="https://youtu.be/aXAafzOFyjk" target="_blank" rel="noopener">This recent screencast demonstrates&lt;/a> how to tune early stopping for xgboost as well.&lt;/p>
&lt;p>Several of the new parameter objects in this version of dials are prep work for supporting more options in tidymodels, such as tuning yet more hyperparameters of xgboost (like L1 and L2 penalties and whether to balance classes), generalized additive models, discriminant analysis models, recursively partitioned models, and a recipe step for sparse PCA. Stay tuned for more on these new options!&lt;/p>
&lt;h2 id="improvements-to-recipes">Improvements to recipes
&lt;a href="#improvements-to-recipes">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>The most recent release of recipes is a robust one, including new recipe steps, bug fixes, documentation improvements, and better performance. You can dig into the
&lt;a href="https://recipes.tidymodels.org/news/index.html" target="_blank" rel="noopener">NEWS file&lt;/a> for more details, but check out a few of the most important changes.&lt;/p>
&lt;p>We added a new recipe step for creating sine and cosine features,
&lt;a href="https://recipes.tidymodels.org/reference/step_harmonic.html" target="_blank" rel="noopener">&lt;code>step_harmonic()&lt;/code>&lt;/a>. We can use this to analyze data with periodic features, like
&lt;a href="https://en.wikipedia.org/wiki/Solar_cycle" target="_blank" rel="noopener">the annual number of sunspots&lt;/a>. The &lt;code>sunspot.year&lt;/code> dataset has an observation every year, and the solar cycle is about 11 years long.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">data&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sunspot.year&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">sunspots&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span>
&lt;span class="nf">tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">year&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1700&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="m">1988&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">n_sunspot&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">sunspot.year&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">sun_split&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">initial_time_split&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sunspots&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">sun_train&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">training&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sun_split&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">sun_test&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">testing&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sun_split&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">sunspots_rec&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span>
&lt;span class="nf">recipe&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">n_sunspot&lt;/span> &lt;span class="o">~&lt;/span> &lt;span class="n">year&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">sun_train&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">step_harmonic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">year&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">frequency&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="m">11&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">cycle_size&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">role&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;predictor&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">keep_original_cols&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">FALSE&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">lm_spec&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">linear_reg&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="n">sunspots_wf&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">workflow&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sunspots_rec&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">lm_spec&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">sunspots_fit&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">fit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sunspots_wf&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">sun_train&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">sunspots_fit&lt;/span>
&lt;span class="c1">#&amp;gt; ══ Workflow [trained] ════════════════════════════════════════════════&lt;/span>
&lt;span class="c1">#&amp;gt; Preprocessor: Recipe&lt;/span>
&lt;span class="c1">#&amp;gt; Model: linear_reg()&lt;/span>
&lt;span class="c1">#&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; ── Preprocessor ──────────────────────────────────────────────────────&lt;/span>
&lt;span class="c1">#&amp;gt; 1 Recipe Step&lt;/span>
&lt;span class="c1">#&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; • step_harmonic()&lt;/span>
&lt;span class="c1">#&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; ── Model ─────────────────────────────────────────────────────────────&lt;/span>
&lt;span class="c1">#&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; Call:&lt;/span>
&lt;span class="c1">#&amp;gt; stats::lm(formula = ..y ~ ., data = data)&lt;/span>
&lt;span class="c1">#&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; Coefficients:&lt;/span>
&lt;span class="c1">#&amp;gt; (Intercept) year_sin_1 year_cos_1 &lt;/span>
&lt;span class="c1">#&amp;gt; 42.904 9.691 20.504&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>We can now predict with this fitted linear model on the most recent years.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">sunspots_fit&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">augment&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sun_test&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">select&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">year&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">n_sunspot&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">.pred&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">pivot_longer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">year&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">year&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">value&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">color&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_line&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">alpha&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">0.8&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">size&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1.2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">theme_minimal&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">labs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">NULL&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;Number of sunspots&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">color&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">NULL&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="figure/unnamed-chunk-7-1.png" alt="plot of chunk unnamed-chunk-7">&lt;/p>
&lt;p>Looks like there have been
&lt;a href="https://en.wikipedia.org/wiki/Solar_cycle#Cycle_history" target="_blank" rel="noopener">more sunspots in recent decades&lt;/a> compared to the past!&lt;/p>
&lt;p>Another new recipe step is
&lt;a href="https://recipes.tidymodels.org/reference/step_dummy_multi_choice.html" target="_blank" rel="noopener">&lt;code>step_dummy_multi_choice()&lt;/code>&lt;/a>, while
&lt;a href="https://recipes.tidymodels.org/reference/step_kpca.html" target="_blank" rel="noopener">&lt;code>step_kpca()&lt;/code>&lt;/a> was &amp;ldquo;un-deprecated&amp;rdquo; and
&lt;a href="https://recipes.tidymodels.org/reference/step_spatialsign.html" target="_blank" rel="noopener">&lt;code>step_spatialsign()&lt;/code>&lt;/a> and
&lt;a href="https://recipes.tidymodels.org/reference/step_geodist.html" target="_blank" rel="noopener">&lt;code>step_geodist()&lt;/code>&lt;/a> were improved.&lt;/p>
&lt;p>If you
&lt;a href="https://www.tidymodels.org/learn/develop/recipes/" target="_blank" rel="noopener">build your own recipe steps&lt;/a>, the new
&lt;a href="https://recipes.tidymodels.org/reference/recipes_eval_select.html" target="_blank" rel="noopener">&lt;code>recipes_eval_select()&lt;/code>&lt;/a> function is now available, powering the tidyselect semantics specific to recipes. The older &lt;code>terms_select()&lt;/code> function is now deprecated in favor of this new helper.&lt;/p>
&lt;p>The recipes package is fairly extensive, and we have recently invested time and energy in refining
&lt;a href="https://recipes.tidymodels.org/reference/" target="_blank" rel="noopener">the documentation&lt;/a> to make it more navigable and clear, as well as easier to maintain and contribute to. Specific documentation pages with recent updates you may find helpful include:&lt;/p>
&lt;ul>
&lt;li>
&lt;a href="https://recipes.tidymodels.org/reference/recipe.html" target="_blank" rel="noopener">how to create a &lt;code>recipe()&lt;/code>&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://recipes.tidymodels.org/reference/selections.html" target="_blank" rel="noopener">selecting variables for recipe steps&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://recipes.tidymodels.org/reference/tidy.recipe.html" target="_blank" rel="noopener">tidying recipes and recipe steps&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="reexamining-example-datasets">Reexamining example datasets
&lt;a href="#reexamining-example-datasets">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>One of the tidymodels packages is
&lt;a href="https://modeldata.tidymodels.org/" target="_blank" rel="noopener">modeldata&lt;/a>, where we keep example datasets for vignettes, examples, and other similar uses. We have included two datasets, &lt;code>okc&lt;/code> and &lt;code>okc_text&lt;/code>, in modeldata based on real user data from the dating website OkCupid.&lt;/p>
&lt;p>This dataset was sourced from
&lt;a href="https://doi.org/10.1080/26939169.2021.1924516" target="_blank" rel="noopener">Kim and Escobedo-Land (2015)&lt;/a>. Permission to use this dataset was explicitly granted by OkCupid, but since that time, concerns have been raised about the ethics of using this or similar data sets, for example to identify individuals.
&lt;a href="https://doi.org/10.1080/26939169.2021.1930812" target="_blank" rel="noopener">Xiao and Ma (2021)&lt;/a> specifically address the possible misuse of this particular dataset, and we now agree that it isn&amp;rsquo;t a good option to use for examples or teaching. In the most recent release of modeldata, we have marked these datasets as deprecated. We have removed them from the
&lt;a href="https://github.com/tidymodels/modeldata/" target="_blank" rel="noopener">development version of the package on GitHub&lt;/a>, and they will be removed entirely in the &lt;em>next&lt;/em> CRAN release. We especially want to thank Albert Kim, one of the authors of the original paper, for his
&lt;a href="https://github.com/tidymodels/modeldata/issues/10" target="_blank" rel="noopener">thoughtful and helpful discussion&lt;/a>.&lt;/p>
&lt;p>One of the reasons we found the OkCupid dataset useful was that it included multiple text columns per observation, so removing these two datasets motivated us to look for a new option to include instead. We landed on
&lt;a href="https://modeldata.tidymodels.org/reference/tate_text.html" target="_blank" rel="noopener">metadata for modern artwork from the Tate Gallery&lt;/a>; if you used &lt;code>okc_text&lt;/code> in the past, we recommend switching to &lt;code>tate_text&lt;/code>. For example, we can count how many of these examples of artwork involve paper or canvas.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">data&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">tate_text&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">textrecipes&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">paper_or_canvas&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;paper&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;canvas&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">recipe&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">~&lt;/span> &lt;span class="n">.,&lt;/span> &lt;span class="n">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">tate_text&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">step_tokenize&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">medium&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">step_stopwords&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">medium&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">custom_stopword_source&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">paper_or_canvas&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">keep&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">TRUE&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">step_tf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">medium&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">prep&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">bake&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">new_data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">NULL&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">select&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">artist&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">year&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">starts_with&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;tf&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 4,284 × 4&lt;/span>
&lt;span class="c1">#&amp;gt; artist year tf_medium_canvas tf_medium_paper&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;fct&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 Absalon 1990 0 0&lt;/span>
&lt;span class="c1">#&amp;gt; 2 Auerbach, Frank 1990 0 1&lt;/span>
&lt;span class="c1">#&amp;gt; 3 Auerbach, Frank 1990 0 1&lt;/span>
&lt;span class="c1">#&amp;gt; 4 Auerbach, Frank 1990 0 1&lt;/span>
&lt;span class="c1">#&amp;gt; 5 Auerbach, Frank 1990 1 0&lt;/span>
&lt;span class="c1">#&amp;gt; 6 Ayres, OBE Gillian 1990 1 0&lt;/span>
&lt;span class="c1">#&amp;gt; 7 Barlow, Phyllida 1990 0 1&lt;/span>
&lt;span class="c1">#&amp;gt; 8 Baselitz, Georg 1990 0 1&lt;/span>
&lt;span class="c1">#&amp;gt; 9 Beattie, Basil 1990 1 0&lt;/span>
&lt;span class="c1">#&amp;gt; 10 Beuys, Joseph 1990 0 1&lt;/span>
&lt;span class="c1">#&amp;gt; # … with 4,274 more rows&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>This artwork metadata was a
&lt;a href="https://github.com/rfordatascience/tidytuesday/blob/master/data/2021/2021-01-12/readme.md" target="_blank" rel="noopener">Tidy Tuesday dataset&lt;/a> earlier this year.&lt;/p>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>We’d like to extend our thanks to all of the contributors who helped make these releases during Q3 possible!&lt;/p>
&lt;ul>
&lt;li>
&lt;p>baguette:
&lt;a href="https://github.com/DavisVaughan" target="_blank" rel="noopener">@DavisVaughan&lt;/a>,
&lt;a href="https://github.com/jennybc" target="_blank" rel="noopener">@jennybc&lt;/a>,
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>, and
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>broom:
&lt;a href="https://github.com/bcallaway11" target="_blank" rel="noopener">@bcallaway11&lt;/a>,
&lt;a href="https://github.com/billdenney" target="_blank" rel="noopener">@billdenney&lt;/a>,
&lt;a href="https://github.com/brshallo" target="_blank" rel="noopener">@brshallo&lt;/a>,
&lt;a href="https://github.com/corybrunson" target="_blank" rel="noopener">@corybrunson&lt;/a>,
&lt;a href="https://github.com/crsh" target="_blank" rel="noopener">@crsh&lt;/a>,
&lt;a href="https://github.com/gregmacfarlane" target="_blank" rel="noopener">@gregmacfarlane&lt;/a>,
&lt;a href="https://github.com/hfrick" target="_blank" rel="noopener">@hfrick&lt;/a>,
&lt;a href="https://github.com/ilapros" target="_blank" rel="noopener">@ilapros&lt;/a>,
&lt;a href="https://github.com/jamesrrae" target="_blank" rel="noopener">@jamesrrae&lt;/a>,
&lt;a href="https://github.com/jennybc" target="_blank" rel="noopener">@jennybc&lt;/a>,
&lt;a href="https://github.com/jthomasmock" target="_blank" rel="noopener">@jthomasmock&lt;/a>,
&lt;a href="https://github.com/kaseyzapatka" target="_blank" rel="noopener">@kaseyzapatka&lt;/a>,
&lt;a href="https://github.com/krivit" target="_blank" rel="noopener">@krivit&lt;/a>,
&lt;a href="https://github.com/LukasWallrich" target="_blank" rel="noopener">@LukasWallrich&lt;/a>,
&lt;a href="https://github.com/oskasf" target="_blank" rel="noopener">@oskasf&lt;/a>,
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>, and
&lt;a href="https://github.com/tarensanders" target="_blank" rel="noopener">@tarensanders&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>dials:
&lt;a href="https://github.com/camroberts" target="_blank" rel="noopener">@camroberts&lt;/a>,
&lt;a href="https://github.com/driapitek" target="_blank" rel="noopener">@driapitek&lt;/a>,
&lt;a href="https://github.com/hfrick" target="_blank" rel="noopener">@hfrick&lt;/a>,
&lt;a href="https://github.com/jennybc" target="_blank" rel="noopener">@jennybc&lt;/a>,
&lt;a href="https://github.com/joeycouse" target="_blank" rel="noopener">@joeycouse&lt;/a>,
&lt;a href="https://github.com/Steviey" target="_blank" rel="noopener">@Steviey&lt;/a>,
&lt;a href="https://github.com/tonyk7440" target="_blank" rel="noopener">@tonyk7440&lt;/a>, and
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>modeldata:
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/hfrick" target="_blank" rel="noopener">@hfrick&lt;/a>,
&lt;a href="https://github.com/jennybc" target="_blank" rel="noopener">@jennybc&lt;/a>,
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>, and
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>poissonreg:
&lt;a href="https://github.com/jennybc" target="_blank" rel="noopener">@jennybc&lt;/a>, and
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>recipes:
&lt;a href="https://github.com/AndrewKostandy" target="_blank" rel="noopener">@AndrewKostandy&lt;/a>,
&lt;a href="https://github.com/asiripanich" target="_blank" rel="noopener">@asiripanich&lt;/a>,
&lt;a href="https://github.com/atusy" target="_blank" rel="noopener">@atusy&lt;/a>,
&lt;a href="https://github.com/avrenli2" target="_blank" rel="noopener">@avrenli2&lt;/a>,
&lt;a href="https://github.com/czopluoglu" target="_blank" rel="noopener">@czopluoglu&lt;/a>,
&lt;a href="https://github.com/DavisVaughan" target="_blank" rel="noopener">@DavisVaughan&lt;/a>,
&lt;a href="https://github.com/DesmondChoy" target="_blank" rel="noopener">@DesmondChoy&lt;/a>,
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/felipeangelimvieira" target="_blank" rel="noopener">@felipeangelimvieira&lt;/a>,
&lt;a href="https://github.com/hfrick" target="_blank" rel="noopener">@hfrick&lt;/a>,
&lt;a href="https://github.com/jennybc" target="_blank" rel="noopener">@jennybc&lt;/a>,
&lt;a href="https://github.com/joeycouse" target="_blank" rel="noopener">@joeycouse&lt;/a>,
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>,
&lt;a href="https://github.com/kadyb" target="_blank" rel="noopener">@kadyb&lt;/a>,
&lt;a href="https://github.com/mmp3" target="_blank" rel="noopener">@mmp3&lt;/a>,
&lt;a href="https://github.com/MrFlick" target="_blank" rel="noopener">@MrFlick&lt;/a>,
&lt;a href="https://github.com/NikKrieger" target="_blank" rel="noopener">@NikKrieger&lt;/a>,
&lt;a href="https://github.com/PathosEthosLogos" target="_blank" rel="noopener">@PathosEthosLogos&lt;/a>,
&lt;a href="https://github.com/simonschoe" target="_blank" rel="noopener">@simonschoe&lt;/a>,
&lt;a href="https://github.com/SlowMo24" target="_blank" rel="noopener">@SlowMo24&lt;/a>,
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>,
&lt;a href="https://github.com/vspinu" target="_blank" rel="noopener">@vspinu&lt;/a>, and
&lt;a href="https://github.com/yyhyun64" target="_blank" rel="noopener">@yyhyun64&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>rules:
&lt;a href="https://github.com/jennybc" target="_blank" rel="noopener">@jennybc&lt;/a>, and
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>stacks:
&lt;a href="https://github.com/bensoltoff" target="_blank" rel="noopener">@bensoltoff&lt;/a>,
&lt;a href="https://github.com/dgrtwo" target="_blank" rel="noopener">@dgrtwo&lt;/a>,
&lt;a href="https://github.com/JoeSydlowski" target="_blank" rel="noopener">@JoeSydlowski&lt;/a>,
&lt;a href="https://github.com/PathosEthosLogos" target="_blank" rel="noopener">@PathosEthosLogos&lt;/a>, and
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>textrecipes:
&lt;a href="https://github.com/dgrtwo" target="_blank" rel="noopener">@dgrtwo&lt;/a>,
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/jcragy" target="_blank" rel="noopener">@jcragy&lt;/a>,
&lt;a href="https://github.com/jennybc" target="_blank" rel="noopener">@jennybc&lt;/a>, and
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>&lt;/p>
&lt;/li>
&lt;/ul></description></item><item><title>Q2 2021 tidymodels digest</title><link>https://www.tidyverse.org/blog/2021/07/tidymodels-2021-q2/</link><pubDate>Fri, 02 Jul 2021 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2021/07/tidymodels-2021-q2/</guid><description>&lt;p>The
&lt;a href="https://www.tidymodels.org/" target="_blank" rel="noopener">tidymodels&lt;/a> framework is a collection of R packages for modeling and machine learning using tidyverse principles. Earlier this year, we
&lt;a href="https://www.tidyverse.org/blog/2021/03/tidymodels-2021-q1/" target="_blank" rel="noopener">started regular updates&lt;/a> here on the tidyverse blog summarizing recent developments in the tidymodels ecosystem. You can check out the
&lt;a href="https://www.tidyverse.org/tags/tidymodels/" target="_blank" rel="noopener">&lt;code>tidymodels&lt;/code> tag&lt;/a> to find all tidymodels blog posts here, including those that focus on a single package or more major releases. The purpose of these roundup posts is to keep you informed about any releases you may have missed and useful new functionality as we maintain these packages.&lt;/p>
&lt;p>Since our last roundup post, there have been 19 CRAN releases of 15 different packages. That might sound like a lot of change to absorb as a tidymodels user! However, we purposefully write code in small, modular packages that we can release frequently to make models easier to deploy and our software easier to maintain. You can install these updates from CRAN with:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">install.packages&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;broom&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;butcher&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;discrim&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;hardhat&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;parsnip&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;probably&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="s">&amp;#34;recipes&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;rsample&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;stacks&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;themis&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;tidymodels&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="s">&amp;#34;tidyposterior&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;tune&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;workflowsets&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;yardstick&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>The &lt;code>NEWS&lt;/code> files are linked here for each package; you&amp;rsquo;ll notice that many of these releases involve small bug fixes or internal changes that are not user-facing. It&amp;rsquo;s a lot to keep up with and there are some super useful updates in the mix, so read on for several highlights!&lt;/p>
&lt;ul>
&lt;li>
&lt;a href="https://broom.tidymodels.org/news/index.html#broom-0-7-8-2021-06-24" target="_blank" rel="noopener">broom&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://butcher.tidymodels.org/news/index.html#butcher-0-1-4-2021-03-19" target="_blank" rel="noopener">butcher&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://discrim.tidymodels.org/news/index.html#discrim-0-1-2-2021-05-28" target="_blank" rel="noopener">discrim&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://hardhat.tidymodels.org/news/index.html#hardhat-0-1-4-2020-07-02" target="_blank" rel="noopener">hardhat&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://parsnip.tidymodels.org/news/index.html#parsnip-0-1-6-2021-05-27" target="_blank" rel="noopener">parsnip&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://probably.tidymodels.org/news/index.html#probably-0-0-6-2020-06-05" target="_blank" rel="noopener">probably&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://recipes.tidymodels.org/news/index.html#recipes-0-1-16-2021-04-16" target="_blank" rel="noopener">recipes&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://rsample.tidymodels.org/news/index.html#rsample-0-1-0-2021-05-08" target="_blank" rel="noopener">rsample&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://github.com/tidymodels/stacks/blob/main/NEWS.md#v020" target="_blank" rel="noopener">stacks&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://themis.tidymodels.org/dev/news/index.html#themis-0-1-4-2021-06-12" target="_blank" rel="noopener">themis&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://tidymodels.tidymodels.org/news/index.html#tidymodels-0-1-3-2021-04-19" target="_blank" rel="noopener">tidymodels&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://github.com/tidymodels/tidyposterior/blob/master/NEWS.md#tidyposterior-010" target="_blank" rel="noopener">tidyposterior&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://tune.tidymodels.org/news/index.html#tune-0-1-5-2021-04-23" target="_blank" rel="noopener">tune&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://workflowsets.tidymodels.org/news/index.html#workflowsets-0-0-2-2021-04-16" target="_blank" rel="noopener">workflowsets&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://yardstick.tidymodels.org/news/index.html#yardstick-0-0-8-2021-03-28" target="_blank" rel="noopener">yardstick&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="reduce-the-memory-footprint-of-your-recipes">Reduce the memory footprint of your recipes
&lt;a href="#reduce-the-memory-footprint-of-your-recipes">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>The
&lt;a href="https://butcher.tidymodels.org/" target="_blank" rel="noopener">butcher&lt;/a> package provides methods to remove (or &amp;ldquo;axe&amp;rdquo;) components from model objects that are not needed for prediction. The most recent release updated how butcher handles &lt;em>recipes&lt;/em> (the tidymodels approach for preprocessing and feature engineering) for more complete and robust coverage. Let&amp;rsquo;s consider a simulated churn-classification dataset for phone company customers:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">tidymodels&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">butcher&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">data&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;mlc_churn&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">set.seed&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">123&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">churn_split&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">initial_split&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mlc_churn&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">churn_train&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">training&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">churn_split&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">churn_test&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">testing&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">churn_split&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">churn_train&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">voice_mail_plan&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">fill&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">churn&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_bar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">alpha&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">0.8&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">position&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;fill&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">scale_x_continuous&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">labels&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">scales&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="nf">percent_format&lt;/span>&lt;span class="p">())&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">labs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">NULL&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="figure/unnamed-chunk-3-1.png" alt="plot of chunk unnamed-chunk-3">&lt;/p>
&lt;p>For some kinds of models, we would want to create dummy or indicator variables from nominal predictors, and preprocess features to be on the same scale. We can use recipes for this task:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">churn_rec&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span>
&lt;span class="nf">recipe&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">churn&lt;/span> &lt;span class="o">~&lt;/span> &lt;span class="n">voice_mail_plan&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">total_intl_minutes&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="n">total_day_minutes&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">total_eve_minutes&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">state&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">churn_train&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">step_dummy&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">all_nominal_predictors&lt;/span>&lt;span class="p">())&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">step_normalize&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">all_predictors&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>You can &lt;code>prep(churn_rec)&lt;/code> to estimate the quantities needed to create categorical features and to scale all the predictors:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">churn_prep&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">prep&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">churn_rec&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">churn_prep&lt;/span>
&lt;span class="c1">#&amp;gt; Data Recipe&lt;/span>
&lt;span class="c1">#&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; Inputs:&lt;/span>
&lt;span class="c1">#&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; role #variables&lt;/span>
&lt;span class="c1">#&amp;gt; outcome 1&lt;/span>
&lt;span class="c1">#&amp;gt; predictor 5&lt;/span>
&lt;span class="c1">#&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; Training data contained 3750 data points and no missing data.&lt;/span>
&lt;span class="c1">#&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; Operations:&lt;/span>
&lt;span class="c1">#&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; Dummy variables from voice_mail_plan, state [trained]&lt;/span>
&lt;span class="c1">#&amp;gt; Centering and scaling for total_intl_minutes, total_day_minutes, ... [trained]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>To remove everything from this prepped recipe not needed for applying to new data (e.g.
&lt;a href="https://recipes.tidymodels.org/reference/bake.html" target="_blank" rel="noopener">bake()&lt;/a> it), we can call &lt;code>butcher(churn_prep)&lt;/code>. In some applications, modeling practitioners need to make custom functions with a feature-engineering recipe. Sometimes those functions have&amp;hellip; a lot of extra STUFF in them, stuff that is not needed for prediction.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">butchered_plus&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">function&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="n">some_stuff_in_the_environment&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">runif&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">1e6&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">churn_prep&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span>
&lt;span class="nf">recipe&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">churn&lt;/span> &lt;span class="o">~&lt;/span> &lt;span class="n">voice_mail_plan&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">total_intl_minutes&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="n">total_day_minutes&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">total_eve_minutes&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">state&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">churn_train&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">step_dummy&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">all_nominal_predictors&lt;/span>&lt;span class="p">())&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">step_normalize&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">all_predictors&lt;/span>&lt;span class="p">())&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">prep&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="nf">butcher&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">churn_prep&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>In the old version of butcher, we did not successfully remove all that extra stuff, and recipes were bigger than they needed to be:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="c1"># old version of butcher&lt;/span>
&lt;span class="n">lobstr&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="nf">obj_size&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">butcher&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">churn_prep&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1">#&amp;gt; 1,835,512 B&lt;/span>
&lt;span class="n">lobstr&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="nf">obj_size&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">butchered_plus&lt;/span>&lt;span class="p">())&lt;/span>
&lt;span class="c1">#&amp;gt; 9,836,480 B&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>In the new version of butcher, we now successfully remove unneeded components from the recipe, so it is smaller:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="c1"># new version of butcher&lt;/span>
&lt;span class="n">lobstr&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="nf">obj_size&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">butcher&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">churn_prep&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1">#&amp;gt; 1,695,352 B&lt;/span>
&lt;span class="n">lobstr&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="nf">obj_size&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">butchered_plus&lt;/span>&lt;span class="p">())&lt;/span>
&lt;span class="c1">#&amp;gt; 1,695,352 B&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>There are also &lt;code>butcher()&lt;/code> methods for &lt;code>workflow()&lt;/code> objects, so when you &lt;code>butcher()&lt;/code> a modeling workflow, you remove everything not needed for prediction from both its estimated recipe &lt;em>and&lt;/em> its trained model, making it as lightweight as possible for deployment.&lt;/p>
&lt;h2 id="svms-and-fast-logistic-regression-with-liblinear">SVMs and fast logistic regression with LiblineaR
&lt;a href="#svms-and-fast-logistic-regression-with-liblinear">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Unfortunately, the &lt;code>&amp;quot;liquidSVM&amp;quot;&lt;/code> engine for support vector machine models that parsnip supported was deprecated in the latest release, because that package was removed from CRAN. We added a new engine in the same release that allows users to fit linear SVMs with the
&lt;a href="https://parsnip.tidymodels.org/reference/svm_linear.html" target="_blank" rel="noopener">parsnip model &lt;code>svm_linear()&lt;/code>&lt;/a>, as well as having another option for logistic regression. This new &lt;code>&amp;quot;LiblineaR&amp;quot;&lt;/code> engine is based on the same C++ library that is shipped with
&lt;a href="https://scikit-learn.org/" target="_blank" rel="noopener">scikit-learn&lt;/a>. We&amp;rsquo;d like to thank the
&lt;a href="https://www.dnalytics.com/software/liblinear/" target="_blank" rel="noopener">maintainers of the LiblineaR R package&lt;/a> for all their help as we set up this integration.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">set.seed&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">234&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">churn_folds&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">vfold_cv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">churn_train&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">v&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">strata&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">churn&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">liblinear_spec&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span>
&lt;span class="nf">logistic_reg&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">penalty&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">0.2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">mixture&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">set_mode&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;classification&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">set_engine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;LiblineaR&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">liblinear_wf&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span>
&lt;span class="nf">workflow&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">add_recipe&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">churn_rec&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">add_model&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">liblinear_spec&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">fit_resamples&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">liblinear_wf&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">resamples&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">churn_folds&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # Resampling results&lt;/span>
&lt;span class="c1">#&amp;gt; # 5-fold cross-validation using stratification &lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 5 x 4&lt;/span>
&lt;span class="c1">#&amp;gt; splits id .metrics .notes &lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;list&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;list&amp;gt; &amp;lt;list&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; 1 &amp;lt;split [2999/751]&amp;gt; Fold1 &amp;lt;tibble [2 × 4]&amp;gt; &amp;lt;tibble [0 × 1]&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 2 &amp;lt;split [2999/751]&amp;gt; Fold2 &amp;lt;tibble [2 × 4]&amp;gt; &amp;lt;tibble [0 × 1]&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 3 &amp;lt;split [3000/750]&amp;gt; Fold3 &amp;lt;tibble [2 × 4]&amp;gt; &amp;lt;tibble [0 × 1]&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 4 &amp;lt;split [3001/749]&amp;gt; Fold4 &amp;lt;tibble [2 × 4]&amp;gt; &amp;lt;tibble [0 × 1]&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 5 &amp;lt;split [3001/749]&amp;gt; Fold5 &amp;lt;tibble [2 × 4]&amp;gt; &amp;lt;tibble [0 × 1]&amp;gt;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>The &lt;code>&amp;quot;LiblineaR&amp;quot;&lt;/code> engine for regularized logistic regression
&lt;a href="https://twitter.com/juliasilge/status/1374029310764359681" target="_blank" rel="noopener">can be very fast compared to the &lt;code>&amp;quot;glmnet&amp;quot;&lt;/code> engine&lt;/a>, even when we use a
&lt;a href="https://www.tidyverse.org/blog/2020/11/tidymodels-sparse-support/" target="_blank" rel="noopener">sparse representation&lt;/a>. Check out
&lt;a href="https://gist.github.com/juliasilge/26a43e5e68cf12842354e6652dfed688" target="_blank" rel="noopener">benchmarking code here&lt;/a>.&lt;/p>
&lt;h2 id="post-processing-your-model-predictions-with-probably-and-yardstick">Post-processing your model predictions with probably and yardstick
&lt;a href="#post-processing-your-model-predictions-with-probably-and-yardstick">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>We recently had releases of both the
&lt;a href="https://yardstick.tidymodels.org/" target="_blank" rel="noopener">yardstick&lt;/a> and
&lt;a href="https://probably.tidymodels.org/" target="_blank" rel="noopener">probably&lt;/a> packages, which now work together even better. The probably package can, among other things, help you post-process your model predictions. This data on churn is imbalanced, with many more customers who did not churn than those who did; we may need to use a threshold other than 0.5 for most appropriate results, or an organization may want to set a specific threshold for some action to prevent churn. You can set a threshold using the
&lt;a href="https://probably.tidymodels.org/reference/make_class_pred.html" target="_blank" rel="noopener">probably function &lt;code>make_two_class_pred()&lt;/code>&lt;/a>.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">probably&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">set.seed&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">123&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">churn_preds&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span>
&lt;span class="n">liblinear_wf&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">fit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">churn_train&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">augment&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">churn_test&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">churn_post&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span>
&lt;span class="n">churn_preds&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">mutate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">.pred&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">make_two_class_pred&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">.pred_yes&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">levels&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">churn&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">threshold&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">0.7&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>The class predictions created with probably integrate well with functions from yardstick, including custom sets of metrics created with
&lt;a href="https://yardstick.tidymodels.org/reference/metric_set.html" target="_blank" rel="noopener">&lt;code>metric_set()&lt;/code>&lt;/a>.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">churn_metrics&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">metric_set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">accuracy&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">sens&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">spec&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">churn_post&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">churn_metrics&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">truth&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">churn&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">estimate&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">.pred_class&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 3 x 3&lt;/span>
&lt;span class="c1">#&amp;gt; .metric .estimator .estimate&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;dbl&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 accuracy binary 0.854 &lt;/span>
&lt;span class="c1">#&amp;gt; 2 sens binary 0.0619&lt;/span>
&lt;span class="c1">#&amp;gt; 3 spec binary 0.999&lt;/span>
&lt;span class="n">churn_post&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">churn_metrics&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">truth&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">churn&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">estimate&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">.pred&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 3 x 3&lt;/span>
&lt;span class="c1">#&amp;gt; .metric .estimator .estimate&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;dbl&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 accuracy binary 0.746&lt;/span>
&lt;span class="c1">#&amp;gt; 2 sens binary 0.149&lt;/span>
&lt;span class="c1">#&amp;gt; 3 spec binary 0.856&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Notice that with the default threshold of 0.5, basically no customers were classified as at risk for churn! Adjusting the threshold with &lt;code>make_two_class_pred()&lt;/code> helps to address this issue.&lt;/p>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>We&amp;rsquo;d like to extend our thanks to all of the contributors who helped make these releases during Q2 possible!&lt;/p>
&lt;ul>
&lt;li>
&lt;p>broom:
&lt;a href="https://github.com/alexpghayes" target="_blank" rel="noopener">@alexpghayes&lt;/a>,
&lt;a href="https://github.com/andrewsris" target="_blank" rel="noopener">@andrewsris&lt;/a>,
&lt;a href="https://github.com/arcruz0" target="_blank" rel="noopener">@arcruz0&lt;/a>,
&lt;a href="https://github.com/bbolker" target="_blank" rel="noopener">@bbolker&lt;/a>,
&lt;a href="https://github.com/bgall" target="_blank" rel="noopener">@bgall&lt;/a>,
&lt;a href="https://github.com/cccneto" target="_blank" rel="noopener">@cccneto&lt;/a>,
&lt;a href="https://github.com/ddsjoberg" target="_blank" rel="noopener">@ddsjoberg&lt;/a>,
&lt;a href="https://github.com/DerForscher107" target="_blank" rel="noopener">@DerForscher107&lt;/a>,
&lt;a href="https://github.com/dikiprawisuda" target="_blank" rel="noopener">@dikiprawisuda&lt;/a>,
&lt;a href="https://github.com/dmenne" target="_blank" rel="noopener">@dmenne&lt;/a>,
&lt;a href="https://github.com/grantmcdermott" target="_blank" rel="noopener">@grantmcdermott&lt;/a>,
&lt;a href="https://github.com/japhir" target="_blank" rel="noopener">@japhir&lt;/a>,
&lt;a href="https://github.com/karldw" target="_blank" rel="noopener">@karldw&lt;/a>,
&lt;a href="https://github.com/kelseygonzalez" target="_blank" rel="noopener">@kelseygonzalez&lt;/a>,
&lt;a href="https://github.com/leejasme" target="_blank" rel="noopener">@leejasme&lt;/a>,
&lt;a href="https://github.com/LukasWallrich" target="_blank" rel="noopener">@LukasWallrich&lt;/a>,
&lt;a href="https://github.com/MatthieuStigler" target="_blank" rel="noopener">@MatthieuStigler&lt;/a>,
&lt;a href="https://github.com/mbac" target="_blank" rel="noopener">@mbac&lt;/a>,
&lt;a href="https://github.com/nt-williams" target="_blank" rel="noopener">@nt-williams&lt;/a>,
&lt;a href="https://github.com/pachadotdev" target="_blank" rel="noopener">@pachadotdev&lt;/a>,
&lt;a href="https://github.com/rpruim" target="_blank" rel="noopener">@rpruim&lt;/a>,
&lt;a href="https://github.com/rsbivand" target="_blank" rel="noopener">@rsbivand&lt;/a>,
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>, and
&lt;a href="https://github.com/vincentarelbundock" target="_blank" rel="noopener">@vincentarelbundock&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>butcher:
&lt;a href="https://github.com/bshor" target="_blank" rel="noopener">@bshor&lt;/a>,
&lt;a href="https://github.com/DavisVaughan" target="_blank" rel="noopener">@DavisVaughan&lt;/a>,
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>, and
&lt;a href="https://github.com/lbenz-mdsol" target="_blank" rel="noopener">@lbenz-mdsol&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>discrim:
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>, and
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>hardhat:
&lt;a href="https://github.com/DavisVaughan" target="_blank" rel="noopener">@DavisVaughan&lt;/a>, and
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>parsnip:
&lt;a href="https://github.com/brshallo" target="_blank" rel="noopener">@brshallo&lt;/a>,
&lt;a href="https://github.com/cgoo4" target="_blank" rel="noopener">@cgoo4&lt;/a>,
&lt;a href="https://github.com/DavisVaughan" target="_blank" rel="noopener">@DavisVaughan&lt;/a>,
&lt;a href="https://github.com/dgrtwo" target="_blank" rel="noopener">@dgrtwo&lt;/a>,
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/graysonwhite" target="_blank" rel="noopener">@graysonwhite&lt;/a>,
&lt;a href="https://github.com/hfrick" target="_blank" rel="noopener">@hfrick&lt;/a>,
&lt;a href="https://github.com/hsbadr" target="_blank" rel="noopener">@hsbadr&lt;/a>,
&lt;a href="https://github.com/joeycouse" target="_blank" rel="noopener">@joeycouse&lt;/a>,
&lt;a href="https://github.com/jtlandis" target="_blank" rel="noopener">@jtlandis&lt;/a>,
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>,
&lt;a href="https://github.com/klin333" target="_blank" rel="noopener">@klin333&lt;/a>,
&lt;a href="https://github.com/mdancho84" target="_blank" rel="noopener">@mdancho84&lt;/a>,
&lt;a href="https://github.com/paulponcet" target="_blank" rel="noopener">@paulponcet&lt;/a>,
&lt;a href="https://github.com/pfc5098" target="_blank" rel="noopener">@pfc5098&lt;/a>,
&lt;a href="https://github.com/RaymondBalise" target="_blank" rel="noopener">@RaymondBalise&lt;/a>,
&lt;a href="https://github.com/smingerson" target="_blank" rel="noopener">@smingerson&lt;/a>,
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>,
&lt;a href="https://github.com/UnclAlDeveloper" target="_blank" rel="noopener">@UnclAlDeveloper&lt;/a>, and
&lt;a href="https://github.com/vadimus202" target="_blank" rel="noopener">@vadimus202&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>probably:
&lt;a href="https://github.com/hsbadr" target="_blank" rel="noopener">@hsbadr&lt;/a>, and
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>recipes:
&lt;a href="https://github.com/AlbertRapp" target="_blank" rel="noopener">@AlbertRapp&lt;/a>,
&lt;a href="https://github.com/asmae-toumi" target="_blank" rel="noopener">@asmae-toumi&lt;/a>,
&lt;a href="https://github.com/atusy" target="_blank" rel="noopener">@atusy&lt;/a>,
&lt;a href="https://github.com/christiantillich" target="_blank" rel="noopener">@christiantillich&lt;/a>,
&lt;a href="https://github.com/EdwinTh" target="_blank" rel="noopener">@EdwinTh&lt;/a>,
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/hfrick" target="_blank" rel="noopener">@hfrick&lt;/a>,
&lt;a href="https://github.com/jake-mason" target="_blank" rel="noopener">@jake-mason&lt;/a>,
&lt;a href="https://github.com/jkennel" target="_blank" rel="noopener">@jkennel&lt;/a>,
&lt;a href="https://github.com/jtlandis" target="_blank" rel="noopener">@jtlandis&lt;/a>,
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>,
&lt;a href="https://github.com/LiamBlake" target="_blank" rel="noopener">@LiamBlake&lt;/a>,
&lt;a href="https://github.com/lindeloev" target="_blank" rel="noopener">@lindeloev&lt;/a>,
&lt;a href="https://github.com/mikemc" target="_blank" rel="noopener">@mikemc&lt;/a>,
&lt;a href="https://github.com/mrkaye97" target="_blank" rel="noopener">@mrkaye97&lt;/a>,
&lt;a href="https://github.com/renanxcortes" target="_blank" rel="noopener">@renanxcortes&lt;/a>,
&lt;a href="https://github.com/schoonees" target="_blank" rel="noopener">@schoonees&lt;/a>,
&lt;a href="https://github.com/SlowMo24" target="_blank" rel="noopener">@SlowMo24&lt;/a>,
&lt;a href="https://github.com/smingerson" target="_blank" rel="noopener">@smingerson&lt;/a>, and
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>rsample:
&lt;a href="https://github.com/brian-j-smith" target="_blank" rel="noopener">@brian-j-smith&lt;/a>,
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/hfrick" target="_blank" rel="noopener">@hfrick&lt;/a>,
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>,
&lt;a href="https://github.com/LiamBlake" target="_blank" rel="noopener">@LiamBlake&lt;/a>,
&lt;a href="https://github.com/mattwarkentin" target="_blank" rel="noopener">@mattwarkentin&lt;/a>,
&lt;a href="https://github.com/PathosEthosLogos" target="_blank" rel="noopener">@PathosEthosLogos&lt;/a>,
&lt;a href="https://github.com/rkb965" target="_blank" rel="noopener">@rkb965&lt;/a>, and
&lt;a href="https://github.com/supermdat" target="_blank" rel="noopener">@supermdat&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>stacks:
&lt;a href="https://github.com/asmae-toumi" target="_blank" rel="noopener">@asmae-toumi&lt;/a>,
&lt;a href="https://github.com/Crisel12" target="_blank" rel="noopener">@Crisel12&lt;/a>,
&lt;a href="https://github.com/simonpcouch" target="_blank" rel="noopener">@simonpcouch&lt;/a>, and
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>themis:
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/kylegilde" target="_blank" rel="noopener">@kylegilde&lt;/a>, and
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>tidymodels:
&lt;a href="https://github.com/dmenne" target="_blank" rel="noopener">@dmenne&lt;/a>,
&lt;a href="https://github.com/Edward-Egros" target="_blank" rel="noopener">@Edward-Egros&lt;/a>,
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>,
&lt;a href="https://github.com/PathosEthosLogos" target="_blank" rel="noopener">@PathosEthosLogos&lt;/a>,
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>, and
&lt;a href="https://github.com/verajosemanuel" target="_blank" rel="noopener">@verajosemanuel&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>tidyposterior:
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>, and
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>tune:
&lt;a href="https://github.com/albert-ying" target="_blank" rel="noopener">@albert-ying&lt;/a>,
&lt;a href="https://github.com/amazongodman" target="_blank" rel="noopener">@amazongodman&lt;/a>,
&lt;a href="https://github.com/brshallo" target="_blank" rel="noopener">@brshallo&lt;/a>,
&lt;a href="https://github.com/dpanyard" target="_blank" rel="noopener">@dpanyard&lt;/a>,
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>,
&lt;a href="https://github.com/klin333" target="_blank" rel="noopener">@klin333&lt;/a>,
&lt;a href="https://github.com/mbac" target="_blank" rel="noopener">@mbac&lt;/a>,
&lt;a href="https://github.com/PathosEthosLogos" target="_blank" rel="noopener">@PathosEthosLogos&lt;/a>,
&lt;a href="https://github.com/silvanhi" target="_blank" rel="noopener">@silvanhi&lt;/a>,
&lt;a href="https://github.com/smingerson" target="_blank" rel="noopener">@smingerson&lt;/a>,
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>, and
&lt;a href="https://github.com/yogat3ch" target="_blank" rel="noopener">@yogat3ch&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>workflowsets:
&lt;a href="https://github.com/amazongodman" target="_blank" rel="noopener">@amazongodman&lt;/a>,
&lt;a href="https://github.com/DavisVaughan" target="_blank" rel="noopener">@DavisVaughan&lt;/a>,
&lt;a href="https://github.com/gunnergalactico" target="_blank" rel="noopener">@gunnergalactico&lt;/a>,
&lt;a href="https://github.com/hnagaty" target="_blank" rel="noopener">@hnagaty&lt;/a>,
&lt;a href="https://github.com/jonthegeek" target="_blank" rel="noopener">@jonthegeek&lt;/a>,
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>,
&lt;a href="https://github.com/mdancho84" target="_blank" rel="noopener">@mdancho84&lt;/a>,
&lt;a href="https://github.com/oskasf" target="_blank" rel="noopener">@oskasf&lt;/a>,
&lt;a href="https://github.com/rafzamb" target="_blank" rel="noopener">@rafzamb&lt;/a>,
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>, and
&lt;a href="https://github.com/yogat3ch" target="_blank" rel="noopener">@yogat3ch&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>yardstick:
&lt;a href="https://github.com/brshallo" target="_blank" rel="noopener">@brshallo&lt;/a>,
&lt;a href="https://github.com/coletl" target="_blank" rel="noopener">@coletl&lt;/a>,
&lt;a href="https://github.com/datenzauberai" target="_blank" rel="noopener">@datenzauberai&lt;/a>,
&lt;a href="https://github.com/DavisVaughan" target="_blank" rel="noopener">@DavisVaughan&lt;/a>,
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>,
&lt;a href="https://github.com/klin333" target="_blank" rel="noopener">@klin333&lt;/a>,
&lt;a href="https://github.com/mattwarkentin" target="_blank" rel="noopener">@mattwarkentin&lt;/a>,
&lt;a href="https://github.com/mdancho84" target="_blank" rel="noopener">@mdancho84&lt;/a>, and
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>.&lt;/p>
&lt;/li>
&lt;/ul></description></item><item><title>recipes 0.1.16</title><link>https://www.tidyverse.org/blog/2021/04/recipes-0-1-16/</link><pubDate>Fri, 23 Apr 2021 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2021/04/recipes-0-1-16/</guid><description>&lt;!--
TODO:
* [ ] Look over / edit the post's title in the yaml
* [ ] Edit (or delete) the description; note this appears in the Twitter card
* [ ] Pick category and tags (see existing with `hugodown::tidy_show_meta()`)
* [ ] Find photo &amp; update yaml metadata
* [ ] Create `thumbnail-sq.jpg`; height and width should be equal
* [ ] Create `thumbnail-wd.jpg`; width should be >5x height
* [ ] `hugodown::use_tidy_thumbnails()`
* [ ] Add intro sentence, e.g. the standard tagline for the package
* [ ] `usethis::use_tidy_thanks()`
-->
&lt;p>We&amp;rsquo;re tickled pink to announce the release of
&lt;a href="https://recipes.tidymodels.org/" target="_blank" rel="noopener">recipes&lt;/a> 0.1.16. recipes is a package for preprocessing data for modeling and data analysis.&lt;/p>
&lt;p>You can install it from CRAN with:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">install.packages&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;recipes&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>This blog post will discuss the several improvements to the package. Before discussing new features, please note that the package license was changed from GPL-2 to MIT.&lt;/p>
&lt;p>You can see a full list of changes in the
&lt;a href="https://recipes.tidymodels.org/news/index.html#recipes-0-1-16-unreleased" target="_blank" rel="noopener">release notes&lt;/a>.&lt;/p>
&lt;h2 id="new-column-selectors">New column selectors
&lt;a href="#new-column-selectors">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>We do our best to keep track of persistent issues that show up in our teaching,
&lt;a href="https://stackoverflow.com/questions/tagged/?tagnames=r-recipes&amp;#43;r&amp;amp;sort=newest" target="_blank" rel="noopener">Stack Overflow&lt;/a> posts,
&lt;a href="https://community.rstudio.com/tag/tidymodels" target="_blank" rel="noopener">RStudio Community&lt;/a> posts, the
&lt;a href="https://www.google.com/search?q=r4ds&amp;#43;tidymodels&amp;#43;book&amp;#43;club&amp;amp;oq=r4ds&amp;#43;tidymodels&amp;#43;book&amp;#43;club" target="_blank" rel="noopener">R4DS Tidy Modeling Book Club&lt;/a>, and other venues. If there are persistent issues, we do our best to help make the programming interface better.&lt;/p>
&lt;p>
&lt;a href="https://twitter.com/minebocek" target="_blank" rel="noopener">Mine Çetinkaya-Rundel&lt;/a> had a good idea for one such persistent issue related to creating dummy variables. For classification data where one or more predictors are categorical, the users might accidentally capture the &lt;em>outcome&lt;/em> and the predictors when creating dummy variables. For example:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">tidymodels&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">data&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">scat&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">package&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;modeldata&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">scat_rec&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span>
&lt;span class="nf">recipe&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Species&lt;/span> &lt;span class="o">~&lt;/span> &lt;span class="n">Location&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">Age&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">Mass&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">Diameter&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">scat&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">step_dummy&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">all_nominal&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="n">one_hot&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">TRUE&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">prep&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="n">scat_rec&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">bake&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">new_data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">NULL&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">names&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;pre>&lt;code>## [1] &amp;quot;Age&amp;quot; &amp;quot;Mass&amp;quot; &amp;quot;Diameter&amp;quot;
## [4] &amp;quot;Location_edge&amp;quot; &amp;quot;Location_middle&amp;quot; &amp;quot;Location_off_edge&amp;quot;
## [7] &amp;quot;Species_bobcat&amp;quot; &amp;quot;Species_coyote&amp;quot; &amp;quot;Species_gray_fox&amp;quot;
&lt;/code>&lt;/pre>&lt;p>Note that the outcome column (&lt;code>Species&lt;/code>) was made into binary indicators. Most classification models prefer a factor vector and this would cause errors. The fix would be to remember to remove &lt;code>Species&lt;/code> from the step selector.&lt;/p>
&lt;p>Most selectors in recipes are used to capture &lt;em>predictor&lt;/em> columns. The new version of recipes contains new selectors that combine the role and the data type: &lt;code>all_nominal_predictors()&lt;/code> and &lt;code>all_numeric_predictors()&lt;/code>. Using these:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">scat_rec&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span>
&lt;span class="nf">recipe&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Species&lt;/span> &lt;span class="o">~&lt;/span> &lt;span class="n">Location&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">Age&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">Mass&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">Diameter&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">scat&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">step_dummy&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">all_nominal_predictors&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="n">one_hot&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">TRUE&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">prep&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="n">scat_rec&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">bake&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">new_data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">NULL&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">names&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;pre>&lt;code>## [1] &amp;quot;Age&amp;quot; &amp;quot;Mass&amp;quot; &amp;quot;Diameter&amp;quot;
## [4] &amp;quot;Species&amp;quot; &amp;quot;Location_edge&amp;quot; &amp;quot;Location_middle&amp;quot;
## [7] &amp;quot;Location_off_edge&amp;quot;
&lt;/code>&lt;/pre>&lt;p>The existing selectors will remain. We&amp;rsquo;ll be converting our documentation, books, and training to use these new selectors when we select predictors of a specific type.&lt;/p>
&lt;h2 id="new-steps">New steps
&lt;a href="#new-steps">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>A new selector was added to compliment &lt;code>step_rm()&lt;/code> (which removes columns). The new &lt;code>step_select()&lt;/code> declares which columns to retain and emulates &lt;code>dplyr::select()&lt;/code>.&lt;/p>
&lt;p>In cases where there are missing data, some data analysis methods compliment the existing predictors with missing value indicators for the covariates that have incomplete values. Thanks to
&lt;a href="https://konradsemsch.netlify.com/" target="_blank" rel="noopener">Konrad Semsch&lt;/a>, &lt;code>step_indicate_na()&lt;/code> can be used to create these. Using the previous example:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">scat_rec&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span>
&lt;span class="nf">recipe&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Species&lt;/span> &lt;span class="o">~&lt;/span> &lt;span class="n">Location&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">Age&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">Mass&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">Diameter&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">scat&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">step_dummy&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">all_nominal_predictors&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="n">one_hot&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">TRUE&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">step_indicate_na&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Mass&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Diameter&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">prep&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="n">scat_rec&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">bake&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">new_data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">scat[&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="nf">complete.cases&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">scat&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="n">]&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nf">contains&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Mass&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="nf">contains&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Diameter&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;pre>&lt;code>## # A tibble: 19 x 4
## Mass na_ind_Mass Diameter na_ind_Diameter
## &amp;lt;dbl&amp;gt; &amp;lt;int&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;int&amp;gt;
## 1 2.51 0 NA 1
## 2 18.1 0 NA 1
## 3 8.17 0 NA 1
## 4 3.43 0 NA 1
## 5 5.53 0 NA 1
## 6 26.9 0 24.1 0
## 7 5.38 0 17.8 0
## 8 14.9 0 19.3 0
## 9 9.51 0 17.9 0
## 10 18.3 0 18.1 0
## 11 8.73 0 25.8 0
## 12 25.9 0 22.2 0
## 13 14.5 0 20.1 0
## 14 10.3 0 17.8 0
## 15 14.6 0 19.3 0
## 16 5.66 0 24.8 0
## 17 NA 1 14.9 0
## 18 6.77 0 17.3 0
## 19 20.3 0 NA 1
&lt;/code>&lt;/pre>&lt;p>Speaking of missing data, we&amp;rsquo;ve decided to rename the current eight imputation steps:&lt;/p>
&lt;ul>
&lt;li>&lt;code>step_impute_knn()&lt;/code> is favored over &lt;code>step_knnimpute()&lt;/code>&lt;/li>
&lt;li>&lt;code>step_impute_median()&lt;/code> is favored over &lt;code>step_medianimpute()&lt;/code>&lt;/li>
&lt;li>and so on&amp;hellip;&lt;/li>
&lt;/ul>
&lt;p>These are a lot better since they work well with tab-completion. The old steps will go through a gradual deprecation process before being removed at some point in the future.&lt;/p>
&lt;h2 id="keeping-columns-used-in-other-features">Keeping columns used in other features
&lt;a href="#keeping-columns-used-in-other-features">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>A fair number of steps take one or more columns of the data and convert them to artificial features. For example, principal component regression represents a set of columns as artificial features that are amalgamations of the original data. In some cases, users desired to be able to keep the original columns.&lt;/p>
&lt;p>The following steps now have an option called &lt;code>keep_original_cols&lt;/code>: &lt;code>step_date()&lt;/code>, &lt;code>step_dummy()&lt;/code>, &lt;code>step_holiday()&lt;/code>, &lt;code>step_ica()&lt;/code>, &lt;code>step_isomap()&lt;/code>, &lt;code>step_kpca_poly()&lt;/code>, &lt;code>step_kpca_rbf()&lt;/code>, &lt;code>step_nnmf()&lt;/code>, &lt;code>step_pca()&lt;/code>, &lt;code>step_pls()&lt;/code>, and &lt;code>step_ratio()&lt;/code>.&lt;/p>
&lt;p>For example:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">scat_rec&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span>
&lt;span class="nf">recipe&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Species&lt;/span> &lt;span class="o">~&lt;/span> &lt;span class="n">Location&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">d13C&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">d15N&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">CN&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">scat&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">step_impute_mean&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">d13C&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d15N&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">CN&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">step_dummy&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">all_nominal_predictors&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="n">one_hot&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">TRUE&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">step_pca&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">d13C&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d15N&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">CN&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">keep_original_cols&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">TRUE&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">prep&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="n">scat_rec&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">bake&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">new_data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">scat&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">names&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;pre>&lt;code>## [1] &amp;quot;d13C&amp;quot; &amp;quot;d15N&amp;quot; &amp;quot;CN&amp;quot;
## [4] &amp;quot;Species&amp;quot; &amp;quot;Location_edge&amp;quot; &amp;quot;Location_middle&amp;quot;
## [7] &amp;quot;Location_off_edge&amp;quot; &amp;quot;PC1&amp;quot; &amp;quot;PC2&amp;quot;
## [10] &amp;quot;PC3&amp;quot;
&lt;/code>&lt;/pre>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Thanks to everyone who contributed since the previous version:
&lt;a href="https://github.com/AshesITR" target="_blank" rel="noopener">@AshesITR&lt;/a>,
&lt;a href="https://github.com/BenoitLondon" target="_blank" rel="noopener">@BenoitLondon&lt;/a>,
&lt;a href="https://github.com/CelloJuan" target="_blank" rel="noopener">@CelloJuan&lt;/a>,
&lt;a href="https://github.com/dfalbel" target="_blank" rel="noopener">@dfalbel&lt;/a>,
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/gregdenay" target="_blank" rel="noopener">@gregdenay&lt;/a>,
&lt;a href="https://github.com/gustavomodelli" target="_blank" rel="noopener">@gustavomodelli&lt;/a>,
&lt;a href="https://github.com/hfrick" target="_blank" rel="noopener">@hfrick&lt;/a>,
&lt;a href="https://github.com/hsbadr" target="_blank" rel="noopener">@hsbadr&lt;/a>,
&lt;a href="https://github.com/jake-mason" target="_blank" rel="noopener">@jake-mason&lt;/a>,
&lt;a href="https://github.com/jjcurtin" target="_blank" rel="noopener">@jjcurtin&lt;/a>,
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>,
&lt;a href="https://github.com/konradsemsch" target="_blank" rel="noopener">@konradsemsch&lt;/a>,
&lt;a href="https://github.com/kylegilde" target="_blank" rel="noopener">@kylegilde&lt;/a>,
&lt;a href="https://github.com/LePeti" target="_blank" rel="noopener">@LePeti&lt;/a>,
&lt;a href="https://github.com/LordRudolf" target="_blank" rel="noopener">@LordRudolf&lt;/a>,
&lt;a href="https://github.com/lukasal" target="_blank" rel="noopener">@lukasal&lt;/a>,
&lt;a href="https://github.com/mattwarkentin" target="_blank" rel="noopener">@mattwarkentin&lt;/a>,
&lt;a href="https://github.com/mikemc" target="_blank" rel="noopener">@mikemc&lt;/a>,
&lt;a href="https://github.com/mine-cetinkaya-rundel" target="_blank" rel="noopener">@mine-cetinkaya-rundel&lt;/a>,
&lt;a href="https://github.com/paudel-arjun" target="_blank" rel="noopener">@paudel-arjun&lt;/a>,
&lt;a href="https://github.com/renanxcortes" target="_blank" rel="noopener">@renanxcortes&lt;/a>,
&lt;a href="https://github.com/rorynolan" target="_blank" rel="noopener">@rorynolan&lt;/a>,
&lt;a href="https://github.com/saadaslam" target="_blank" rel="noopener">@saadaslam&lt;/a>,
&lt;a href="https://github.com/schoonees" target="_blank" rel="noopener">@schoonees&lt;/a>,
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>,
&lt;a href="https://github.com/uriahf" target="_blank" rel="noopener">@uriahf&lt;/a>,
&lt;a href="https://github.com/vadimus202" target="_blank" rel="noopener">@vadimus202&lt;/a>, and
&lt;a href="https://github.com/zenggyu" target="_blank" rel="noopener">@zenggyu&lt;/a>.&lt;/p></description></item><item><title>recipes 0.1.14</title><link>https://www.tidyverse.org/blog/2020/10/recipes-0-1-14/</link><pubDate>Thu, 22 Oct 2020 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2020/10/recipes-0-1-14/</guid><description>&lt;p>We&amp;rsquo;re stoked to announce the release of
&lt;a href="https://recipes.tidymodels.org" target="_blank" rel="noopener">recipes&lt;/a> 0.1.14. recipes is an alternative method for creating and preprocessing design matrices that can be used for modeling or visualization.&lt;/p>
&lt;p>You can install it from CRAN with:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">install.packages&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;recipes&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>You can see a full list of changes in the
&lt;a href="https://recipes.tidymodels.org/news/index.html" target="_blank" rel="noopener">release notes&lt;/a>. There are some improvements and changes to talk about.&lt;/p>
&lt;h2 id="an-alternative-to-juice">An alternative to &lt;code>juice()&lt;/code>
&lt;a href="#an-alternative-to-juice">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Now that we have taught with recipes for a few years, we&amp;rsquo;ve realized that there is a lot of confusion about the differences between &lt;code>juice()&lt;/code> and &lt;code>bake()&lt;/code>:&lt;/p>
&lt;ul>
&lt;li>&lt;code>juice(recipe)&lt;/code> returns the preprocessed training set (at very low computational costs).&lt;/li>
&lt;li>&lt;code>bake(recipe, new_data)&lt;/code> applies the recipe to any data (e.g. training, testing, unknowns, etc.)&lt;/li>
&lt;/ul>
&lt;p>We were not able to find ways to make this distinction clear for many users.&lt;/p>
&lt;p>How could we solve this issue? We decided to come up with a better alternative to &lt;code>juice()&lt;/code> that would be more intuitive. As a result, &lt;em>all&lt;/em> applications of the recipe can now use &lt;code>bake()&lt;/code>:&lt;/p>
&lt;ul>
&lt;li>&lt;code>bake(recipe, new_data = some_data_set)&lt;/code> works as before.&lt;/li>
&lt;li>&lt;code>bake(recipe, new_data = NULL)&lt;/code> now returns the preprocessed training set.&lt;/li>
&lt;/ul>
&lt;p>This is precedented in base R since many &lt;code>predict()&lt;/code> methods re-predict the training set when the &lt;code>newdata&lt;/code> argument is &lt;code>NULL&lt;/code> or missing. Note that there is no default for &lt;code>new_data&lt;/code>; you have to set it to &lt;code>NULL&lt;/code> to get the training set.&lt;/p>
&lt;p>We felt that this was the best API change that we could make. An external poll showed some agreement:&lt;/p>
&lt;p>&lt;img src="juice-poll.png" title="plot of chunk poll" alt="plot of chunk poll" width="80%" style="display: block; margin: auto;" />&lt;/p>
&lt;p>&lt;code>juice()&lt;/code>, which is still my favorite R function name of all time, will not be removed; you can still use it. However, we will not use it in training materials or most documentation.&lt;/p>
&lt;h2 id="imputation-with-linear-models">Imputation with linear models
&lt;a href="#imputation-with-linear-models">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Tim Zhou contributed a step to use linear models for imputation. This is a nice, compact method for adding an imputation equation for numeric predictors into the recipe. The syntax is similar to the existing imputation steps. Here&amp;rsquo;s an example from the Ames data:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">tidymodels&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">data&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ames&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">ames&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="n">Sale_Price&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">log10&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ames&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="n">Sale_Price&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># Set some of the latitude values to be missing: &lt;/span>
&lt;span class="nf">set.seed&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">393&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">ames_missing&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="n">ames&lt;/span>
&lt;span class="n">ames_missing&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="n">Latitude&lt;/span>&lt;span class="nf">[sample&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="nf">nrow&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ames&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="m">200&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="n">]&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="kc">NA&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>We might be able to reasonably approximate the missing values based on the other geographic predictors (&lt;code>Longitude&lt;/code> and &lt;code>Neighborhood&lt;/code>) as well as a few aspects of the houses (e.g., &lt;code>MS_Zoning&lt;/code> and &lt;code>Alley&lt;/code>). A linear model is create with these predictors in order to estimate the missing &lt;code>Latitude&lt;/code> data:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">imputed_ames&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span>
&lt;span class="nf">recipe&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Sale_Price&lt;/span> &lt;span class="o">~&lt;/span> &lt;span class="n">.,&lt;/span> &lt;span class="n">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ames_missing&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">step_impute_linear&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="n">Latitude&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">impute_with&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">imp_vars&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Longitude&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Neighborhood&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">MS_Zoning&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Alley&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="n">id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;lm-imp&amp;#34;&lt;/span>
&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">prep&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ames_missing&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>This plot shows the missing data&amp;rsquo;s true values on the x-axis and their imputed values on the y-axis:&lt;/p>
&lt;p>&lt;img src="figure/plot-values-1.svg" title="plot of chunk plot-values" alt="plot of chunk plot-values" width="70%" />&lt;/p>
&lt;p>In future versions, we will standardize on the naming convention &lt;code>step_impute_*()&lt;/code>. The existing functions will be soft-deprecated for a reasonable time period to ensure backward compatibility.&lt;/p>
&lt;h2 id="other-changes">Other changes
&lt;a href="#other-changes">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>This version of the package has an extra logging option for &lt;code>prep()&lt;/code> that will print some information on the differences in the data before and after the step was prepared:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">ames_rec&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">recipe&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Sale_Price&lt;/span> &lt;span class="o">~&lt;/span> &lt;span class="n">.,&lt;/span> &lt;span class="n">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ames&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">step_BoxCox&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Lot_Area&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Gr_Liv_Area&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">step_other&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Neighborhood&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">threshold&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">0.05&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">step_dummy&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">all_nominal&lt;/span>&lt;span class="p">())&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">step_interact&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">~&lt;/span> &lt;span class="nf">starts_with&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Central_Air&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="n">Year_Built&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">step_ns&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Longitude&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Latitude&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">deg_free&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">5&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">prep&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">log_changes&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">TRUE&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;pre>&lt;code>## step_BoxCox (BoxCox_KMeZW): same number of columns
##
## step_other (other_b4CM3): same number of columns
##
## step_dummy (dummy_q3sI4):
## new (223): MS_SubClass_One_Story_1945_and_Older, ...
## removed (40): MS_SubClass, MS_Zoning, Street, Alley, Lot_Shape, ...
##
## step_interact (interact_xjtSG):
## new (1): Central_Air_Y_x_Year_Built
##
## step_ns (ns_pfpld):
## new (10): Longitude_ns_1, Longitude_ns_2, Longitude_ns_3, ...
## removed (2): Longitude, Latitude
&lt;/code>&lt;/pre>&lt;p>Another important change was behind the scenes. Before, there were problems with using PSOCK clusters on Windows because the worker processes were not aware of all the packages that should be loaded. Now, recipes ensures that all of the packages required by each step will be accessible in parallel. A similar change is coming soon to the parsnip package.&lt;/p>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Thanks to those users who filed issues or contributed a pull request since the previous release:
&lt;a href="https://github.com/AndrewKostandy" target="_blank" rel="noopener">@AndrewKostandy&lt;/a>,
&lt;a href="https://github.com/anks7190" target="_blank" rel="noopener">@anks7190&lt;/a>,
&lt;a href="https://github.com/AshesITR" target="_blank" rel="noopener">@AshesITR&lt;/a>,
&lt;a href="https://github.com/Bijaelo" target="_blank" rel="noopener">@Bijaelo&lt;/a>,
&lt;a href="https://github.com/brodz" target="_blank" rel="noopener">@brodz&lt;/a>,
&lt;a href="https://github.com/DavisVaughan" target="_blank" rel="noopener">@DavisVaughan&lt;/a>,
&lt;a href="https://github.com/dgkf" target="_blank" rel="noopener">@dgkf&lt;/a>,
&lt;a href="https://github.com/EllaKaye" target="_blank" rel="noopener">@EllaKaye&lt;/a>,
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/hamedbh" target="_blank" rel="noopener">@hamedbh&lt;/a>,
&lt;a href="https://github.com/hnagaty" target="_blank" rel="noopener">@hnagaty&lt;/a>,
&lt;a href="https://github.com/irkaal" target="_blank" rel="noopener">@irkaal&lt;/a>,
&lt;a href="https://github.com/jerome-laurent-pro" target="_blank" rel="noopener">@jerome-laurent-pro&lt;/a>,
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>,
&lt;a href="https://github.com/karaesmen" target="_blank" rel="noopener">@karaesmen&lt;/a>,
&lt;a href="https://github.com/kylegilde" target="_blank" rel="noopener">@kylegilde&lt;/a>,
&lt;a href="https://github.com/LordRudolf" target="_blank" rel="noopener">@LordRudolf&lt;/a>,
&lt;a href="https://github.com/lorenzwalthert" target="_blank" rel="noopener">@lorenzwalthert&lt;/a>,
&lt;a href="https://github.com/mattwarkentin" target="_blank" rel="noopener">@mattwarkentin&lt;/a>,
&lt;a href="https://github.com/mpettis" target="_blank" rel="noopener">@mpettis&lt;/a>,
&lt;a href="https://github.com/mt-edwards" target="_blank" rel="noopener">@mt-edwards&lt;/a>,
&lt;a href="https://github.com/nhward" target="_blank" rel="noopener">@nhward&lt;/a>,
&lt;a href="https://github.com/Nilafhiosagam" target="_blank" rel="noopener">@Nilafhiosagam&lt;/a>,
&lt;a href="https://github.com/NRaillard" target="_blank" rel="noopener">@NRaillard&lt;/a>,
&lt;a href="https://github.com/Paul-Yuchao-Dong" target="_blank" rel="noopener">@Paul-Yuchao-Dong&lt;/a>,
&lt;a href="https://github.com/perluna" target="_blank" rel="noopener">@perluna&lt;/a>,
&lt;a href="https://github.com/RaminZi" target="_blank" rel="noopener">@RaminZi&lt;/a>,
&lt;a href="https://github.com/rorynolan" target="_blank" rel="noopener">@rorynolan&lt;/a>,
&lt;a href="https://github.com/Steviey" target="_blank" rel="noopener">@Steviey&lt;/a>,
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>, and
&lt;a href="https://github.com/ttzhou" target="_blank" rel="noopener">@ttzhou&lt;/a>.&lt;/p></description></item><item><title>usemodels 0.0.1</title><link>https://www.tidyverse.org/blog/2020/09/usemodels-0-0-1/</link><pubDate>Tue, 29 Sep 2020 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2020/09/usemodels-0-0-1/</guid><description>&lt;p>We&amp;rsquo;re very excited to announce the first release of the
&lt;a href="https://usemodels.tidymodels.org/" target="_blank" rel="noopener">usemodels&lt;/a> package. The tidymodels packages are designed to provide modeling functions that are highly flexible and modular. This is powerful, but sometimes a template or skeleton showing how to start is helpful. The usemodels package creates templates for tidymodels analyses so you don&amp;rsquo;t have to write as much new code.&lt;/p>
&lt;p>You can install it from CRAN with:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">install.packages&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;usemodels&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>This blog post will show how to use the package.&lt;/p>
&lt;p>Let&amp;rsquo;s start by creating a glmnet linear regression model for the &lt;code>mtcars&lt;/code> data using tidymodels. This model is usually tuned over the amount and type of regularization. In tidymodels, there are a few intermediate steps for a glmnet model:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Create a
&lt;a href="https://www.tmwr.org/models.html" target="_blank" rel="noopener">parsnip model object&lt;/a> and define the tuning parameters that we want to optimize.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>
&lt;a href="https://www.tmwr.org/recipes.html" target="_blank" rel="noopener">Create a recipe&lt;/a> that, at minimum, centers and scales the predictors. For some data sets, we also need to create dummy variables from any factor-encoded predictor columns.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Define a
&lt;a href="https://www.tmwr.org/resampling.html" target="_blank" rel="noopener">resampling scheme&lt;/a> for our data.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Choose a function from the
&lt;a href="https://tune.tidymodels.org/" target="_blank" rel="noopener">tune package&lt;/a>, such as &lt;code>tune_grid()&lt;/code>, to optimize the parameters. For grid search, we&amp;rsquo;ll also need a grid of candidate parameter values (or let the function choose one for us).&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>We recognize that this might be more code than you would have had to write compared to a package like caret. However, the tidymodels ecosystem enables a wider variety of modeling techniques and is more versatile.&lt;/p>
&lt;p>The new usemodels package can automatically generate much of this code infrastructure. For example:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">usemodels&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="nf">use_glmnet&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mpg&lt;/span> &lt;span class="o">~&lt;/span> &lt;span class="n">.,&lt;/span> &lt;span class="n">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">mtcars&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>which produces the terminal output:&lt;/p>
&lt;pre>&lt;code>glmnet_recipe &amp;lt;-
recipe(formula = mpg ~ ., data = mtcars) %&amp;gt;%
step_zv(all_predictors()) %&amp;gt;%
step_normalize(all_predictors(), -all_nominal())
glmnet_spec &amp;lt;-
linear_reg(penalty = tune(), mixture = tune()) %&amp;gt;%
set_mode(&amp;quot;regression&amp;quot;) %&amp;gt;%
set_engine(&amp;quot;glmnet&amp;quot;)
glmnet_workflow &amp;lt;-
workflow() %&amp;gt;%
add_recipe(glmnet_recipe) %&amp;gt;%
add_model(glmnet_spec)
glmnet_grid &amp;lt;- tidyr::crossing(penalty = 10^seq(-6, -1, length.out = 20), mixture = c(0.05,
0.2, 0.4, 0.6, 0.8, 1))
glmnet_tune &amp;lt;-
tune_grid(glmnet_workflow, resamples = stop(&amp;quot;add your rsample object&amp;quot;), grid = glmnet_grid)
&lt;/code>&lt;/pre>&lt;p>This can be copied to the source window and edited. Some notes:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>For this model, it is possible to prescribe a default grid of candidate tuning parameter values that work well about 90% of the time. For other models, the grid might be data-driven. In these cases, the tune package functions can estimate an appropriate grid.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>The extra recipes steps are the
&lt;a href="https://www.tmwr.org/pre-proc-table.html" target="_blank" rel="noopener">recommend preprocessing&lt;/a> for this model. Since this varies from model-to-model, the recipe template will contain the minimal required steps. Your data might require additional operations.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>One thing that &lt;em>should not be automated&lt;/em> is the choice of resampling method. The code templates require the user to choose the rsample function that is appropriate.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>In case you are unfamiliar with the model and its preprocessing needs, a &lt;code>verbose&lt;/code> option prints comments that explain &lt;em>why&lt;/em> some steps are included. For the glmnet model, the comments added to the recipe state:&lt;/p>
&lt;blockquote>
&lt;p>Regularization methods sum up functions of the model slope coefficients. Because of this, the predictor variables should be on the same scale. Before centering and scaling the numeric predictors, any predictors with a single unique value are filtered out.&lt;/p>
&lt;/blockquote>
&lt;p>Let&amp;rsquo;s look at another example. The &lt;code>ad_data&lt;/code> data set in the modeldata package has rows for 333 patients with a factor outcome for their level of cognitive impairment (e.g., Alzheimer&amp;rsquo;s disease). There is also a categorical predictor in the data, the Apolipoprotein E genotype, which has six levels. Let&amp;rsquo;s suppose the &lt;code>Genotype&lt;/code> column was encoded as character (instead of being a factor). This might be a problem if the resampling method samples out a level from the data used to fit the model.&lt;/p>
&lt;p>Let&amp;rsquo;s use a boosted tree model with the xgboost package and change the default prefix for the objects:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">tidymodels&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="nf">data&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ad_data&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="o">&amp;gt;&lt;/span>
&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">ad_data&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="n">Genotype&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">as.character&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ad_data&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="n">Genotype&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="o">&amp;gt;&lt;/span>
&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="nf">use_xgboost&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Class&lt;/span> &lt;span class="o">~&lt;/span> &lt;span class="n">.,&lt;/span> &lt;span class="n">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ad_data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">prefix&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;impairment&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;pre>&lt;code>impairment_recipe &amp;lt;-
recipe(formula = Class ~ ., data = ad_data) %&amp;gt;%
step_string2factor(one_of(Genotype)) %&amp;gt;%
step_novel(all_nominal(), -all_outcomes()) %&amp;gt;%
step_dummy(all_nominal(), -all_outcomes(), one_hot = TRUE) %&amp;gt;%
step_zv(all_predictors())
impairment_spec &amp;lt;-
boost_tree(trees = tune(), min_n = tune(), tree_depth = tune(), learn_rate = tune(),
loss_reduction = tune(), sample_size = tune()) %&amp;gt;%
set_mode(&amp;quot;classification&amp;quot;) %&amp;gt;%
set_engine(&amp;quot;xgboost&amp;quot;)
impairment_workflow &amp;lt;-
workflow() %&amp;gt;%
add_recipe(impairment_recipe) %&amp;gt;%
add_model(impairment_spec)
set.seed(64393)
impairment_tune &amp;lt;-
tune_grid(impairment_workflow, resamples = stop(&amp;quot;add your rsample object&amp;quot;),
grid = stop(&amp;quot;add number of candidate points&amp;quot;))
&lt;/code>&lt;/pre>&lt;p>Notice that the line&lt;/p>
&lt;pre>&lt;code>step_string2factor(one_of(Genotype))
&lt;/code>&lt;/pre>&lt;p>is included in the recipe along with a step to generate one-hot encoded dummy variables. xgboost is one of the few tree ensemble implementations that requires the user to create dummy variables. This step is only added to the template when it is required for that model.&lt;/p>
&lt;p>Also, for this particular model, we recommend using a
&lt;a href="https://scholar.google.com/scholar?hl=en&amp;amp;as_sdt=0%2C7&amp;amp;q=space&amp;#43;filling&amp;#43;design&amp;#43;of&amp;#43;experiments" target="_blank" rel="noopener">space-filling design&lt;/a> for the grid, but the user must choose the number of grid points.&lt;/p>
&lt;p>The current set of templates included in the inaugural version of the package are:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">ls&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;package:usemodels&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">pattern&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;^use_&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;pre>&lt;code>## [1] &amp;quot;use_earth&amp;quot; &amp;quot;use_glmnet&amp;quot; &amp;quot;use_kknn&amp;quot; &amp;quot;use_ranger&amp;quot; &amp;quot;use_xgboost&amp;quot;
&lt;/code>&lt;/pre>&lt;p>We&amp;rsquo;ll likely add more but please file
&lt;a href="https://github.com/tidymodels/usemodels/issues" target="_blank" rel="noopener">an issue&lt;/a> if there are any that you see as a priority.&lt;/p></description></item><item><title>recipes 0.1.13</title><link>https://www.tidyverse.org/blog/2020/06/recipes-0-1-13/</link><pubDate>Thu, 25 Jun 2020 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2020/06/recipes-0-1-13/</guid><description>&lt;p>We&amp;rsquo;re very chuffed to announce the release of
&lt;a href="https://recipes.tidymodels.org" target="_blank" rel="noopener">recipes&lt;/a> 0.1.13. recipes is an alternative method for creating and preprocessing design matrices that can be used for modeling or visualization.&lt;/p>
&lt;p>You can install it from CRAN with:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nf'>install.packages&lt;/span>(&lt;span class='s'>"recipes"&lt;/span>)&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>You can see a full list of changes in the
&lt;a href="https://recipes.tidymodels.org/news/index.html" target="_blank" rel="noopener">release notes&lt;/a>. There are some improvements and changes to talk about.&lt;/p>
&lt;h2 id="general-changes">General changes
&lt;a href="#general-changes">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>First, &lt;code>step_filter()&lt;/code>, &lt;code>step_slice()&lt;/code>, &lt;code>step_sample()&lt;/code>, and &lt;code>step_naomit()&lt;/code> had their defaults for &lt;code>skip&lt;/code> changed to &lt;code>TRUE&lt;/code>. In the vast majority of applications, these steps should not be applied to the test or assessment sets.&lt;/p>
&lt;p>Also, &lt;code>step_upsample()&lt;/code> and &lt;code>step_downsample()&lt;/code> are soft deprecated in recipes as they are now available in the
&lt;a href="https://tidymodels.github.io/themis/" target="_blank" rel="noopener">themis package&lt;/a>. They will be removed in the next version.&lt;/p>
&lt;p>Finally, for the new version of dplyr, the selectors &lt;code>all_of()&lt;/code> and &lt;code>any_of()&lt;/code> can now be used in step selections.&lt;/p>
&lt;h2 id="feature-extraction-improvements">Feature extraction improvements
&lt;a href="#feature-extraction-improvements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>In the
&lt;a href="https://en.wikipedia.org/wiki/Feature_extraction" target="_blank" rel="noopener">&lt;em>feature extraction&lt;/em>&lt;/a> category, there are two improvements. First, the &lt;code>tidy()&lt;/code> method for &lt;code>step_pca()&lt;/code> can return the percentage of variation accounted for by each
&lt;a href="https://en.wikipedia.org/wiki/Principal_component_analysis" target="_blank" rel="noopener">PCA component&lt;/a>. For example:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nf'>library&lt;/span>(&lt;span class='k'>&lt;a href='https://rdrr.io/pkg/tidymodels/man'>tidymodels&lt;/a>&lt;/span>)
&lt;span class='c'># Many highly correlated numeric predictors:&lt;/span>
&lt;span class='nf'>data&lt;/span>(&lt;span class='k'>meats&lt;/span>, package = &lt;span class='s'>"modeldata"&lt;/span>)
&lt;span class='nf'>set.seed&lt;/span>(&lt;span class='m'>2383&lt;/span>)
&lt;span class='k'>split&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>initial_split&lt;/span>(&lt;span class='k'>meats&lt;/span>)
&lt;span class='k'>meat_tr&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>training&lt;/span>(&lt;span class='k'>split&lt;/span>)
&lt;span class='k'>meat_te&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>testing&lt;/span>(&lt;span class='k'>split&lt;/span>)
&lt;span class='k'>pca_rec&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span>
&lt;span class='nf'>recipe&lt;/span>(&lt;span class='k'>water&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='k'>fat&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='k'>protein&lt;/span> &lt;span class='o'>~&lt;/span> &lt;span class='k'>.&lt;/span>, data = &lt;span class='k'>meat_tr&lt;/span>) &lt;span class='o'>%&amp;gt;%&lt;/span>
&lt;span class='nf'>step_normalize&lt;/span>(&lt;span class='nf'>all_predictors&lt;/span>()) &lt;span class='o'>%&amp;gt;%&lt;/span>
&lt;span class='nf'>step_pca&lt;/span>(&lt;span class='nf'>all_predictors&lt;/span>(), num_comp = &lt;span class='m'>10&lt;/span>, id = &lt;span class='s'>"pca"&lt;/span>) &lt;span class='o'>%&amp;gt;%&lt;/span>
&lt;span class='nf'>prep&lt;/span>()
&lt;span class='k'>var_info&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>tidy&lt;/span>(&lt;span class='k'>pca_rec&lt;/span>, id = &lt;span class='s'>"pca"&lt;/span>, type = &lt;span class='s'>"variance"&lt;/span>)
&lt;span class='nf'>table&lt;/span>(&lt;span class='k'>var_info&lt;/span>&lt;span class='o'>$&lt;/span>&lt;span class='k'>terms&lt;/span>)
&lt;span class='c'>#&amp;gt; &lt;/span>
&lt;span class='c'>#&amp;gt; cumulative percent variance cumulative variance &lt;/span>
&lt;span class='c'>#&amp;gt; 100 100 &lt;/span>
&lt;span class='c'>#&amp;gt; percent variance variance &lt;/span>
&lt;span class='c'>#&amp;gt; 100 100&lt;/span>
&lt;span class='k'>var_info&lt;/span> &lt;span class='o'>%&amp;gt;%&lt;/span>
&lt;span class='k'>dplyr&lt;/span>::&lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/filter.html'>filter&lt;/a>&lt;/span>(&lt;span class='k'>terms&lt;/span> &lt;span class='o'>==&lt;/span> &lt;span class='s'>"percent variance"&lt;/span>) &lt;span class='o'>%&amp;gt;%&lt;/span>
&lt;span class='nf'>ggplot&lt;/span>(&lt;span class='nf'>aes&lt;/span>(x = &lt;span class='k'>component&lt;/span>, y = &lt;span class='k'>value&lt;/span>)) &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>geom_bar&lt;/span>(stat = &lt;span class='s'>"identity"&lt;/span>) &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>xlim&lt;/span>(&lt;span class='nf'>c&lt;/span>(&lt;span class='m'>0&lt;/span>, &lt;span class='m'>10&lt;/span>)) &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>ylab&lt;/span>(&lt;span class='s'>"% of Total Variation"&lt;/span>)
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/pca-tidy-1.svg" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>Another change in this version of recipes is that &lt;code>step_pls()&lt;/code> has received an upgrade.
&lt;a href="https://en.wikipedia.org/wiki/Partial_least_squares_regression" target="_blank" rel="noopener">Partial least squares&lt;/a> (PLS) is similar to PCA but takes the outcome(s) into account.&lt;/p>
&lt;p>Previously, it used the
&lt;a href="https://github.com/bhmevik/pls" target="_blank" rel="noopener">pls package&lt;/a> to do the computations. That&amp;rsquo;s a great package but it lacks two important features: allow for a categorical outcome value (e.g. &amp;ldquo;pls-da&amp;rdquo; for &lt;em>discriminant analysis&lt;/em>) or allow for sparsity in the coefficients. Sparsity would facilitate simpler and perhaps more robust models.&lt;/p>
&lt;p>&lt;code>step_pls()&lt;/code> now uses the Bioconductor
&lt;a href="https://www.bioconductor.org/packages/release/bioc/html/mixOmics.html" target="_blank" rel="noopener">mixOmics package&lt;/a>. As such, the outcome data can now be a factor and a new argument &lt;code>predictor_prop&lt;/code> is used for sparsity. That argument specifies the maximum proportion of partial least squares loadings that will be &lt;em>non-zero&lt;/em> (per component) during training. Newly prepped recipes will use this package but previously created recipes still use the pls package. For our previous example, let&amp;rsquo;s look at the protein outcome and build a recipe:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='k'>pls_rec&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span>
&lt;span class='nf'>recipe&lt;/span>(&lt;span class='k'>water&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='k'>fat&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='k'>protein&lt;/span> &lt;span class='o'>~&lt;/span> &lt;span class='k'>.&lt;/span>, data = &lt;span class='k'>meat_tr&lt;/span>) &lt;span class='o'>%&amp;gt;%&lt;/span>
&lt;span class='nf'>step_normalize&lt;/span>(&lt;span class='nf'>all_predictors&lt;/span>()) &lt;span class='o'>%&amp;gt;%&lt;/span>
&lt;span class='nf'>step_pls&lt;/span>(
&lt;span class='nf'>all_predictors&lt;/span>(),
outcome = &lt;span class='nf'>vars&lt;/span>(&lt;span class='k'>protein&lt;/span>),
num_comp = &lt;span class='m'>3&lt;/span>,
predictor_prop = &lt;span class='m'>0.75&lt;/span>,
id = &lt;span class='s'>"pls"&lt;/span>
) &lt;span class='o'>%&amp;gt;%&lt;/span>
&lt;span class='nf'>prep&lt;/span>()
&lt;span class='c'># for new data: &lt;/span>
&lt;span class='nf'>bake&lt;/span>(&lt;span class='k'>pls_rec&lt;/span>, &lt;span class='k'>meat_te&lt;/span>, &lt;span class='k'>protein&lt;/span>, &lt;span class='nf'>starts_with&lt;/span>(&lt;span class='s'>"PLS"&lt;/span>)) &lt;span class='o'>%&amp;gt;%&lt;/span>
&lt;span class='k'>tidyr&lt;/span>::&lt;span class='nf'>&lt;a href='https://tidyr.tidyverse.org/reference/pivot_longer.html'>pivot_longer&lt;/a>&lt;/span>(cols = &lt;span class='nf'>c&lt;/span>(&lt;span class='o'>-&lt;/span>&lt;span class='k'>protein&lt;/span>),
names_to = &lt;span class='s'>"component"&lt;/span>,
values_to = &lt;span class='s'>"values"&lt;/span>) &lt;span class='o'>%&amp;gt;%&lt;/span>
&lt;span class='nf'>ggplot&lt;/span>(&lt;span class='nf'>aes&lt;/span>(x = &lt;span class='k'>values&lt;/span>, y = &lt;span class='k'>protein&lt;/span>)) &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>geom_point&lt;/span>(alpha = &lt;span class='m'>0.5&lt;/span>) &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>facet_wrap&lt;/span>(&lt;span class='o'>~&lt;/span> &lt;span class='k'>component&lt;/span>, scale = &lt;span class='s'>"free_x"&lt;/span>) &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>xlab&lt;/span>(&lt;span class='s'>"PLS Score"&lt;/span>)
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/pls-1.svg" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>What are the PLS coefficients from this?&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nf'>tidy&lt;/span>(&lt;span class='k'>pls_rec&lt;/span>, id = &lt;span class='s'>"pls"&lt;/span>) &lt;span class='o'>%&amp;gt;%&lt;/span>
&lt;span class='nf'>ggplot&lt;/span>(&lt;span class='nf'>aes&lt;/span>(x = &lt;span class='k'>component&lt;/span>, y = &lt;span class='k'>terms&lt;/span>, fill = &lt;span class='k'>value&lt;/span>)) &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>geom_tile&lt;/span>() &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>scale_fill_gradient2&lt;/span>(
low = &lt;span class='s'>"#B2182B"&lt;/span>,
mid = &lt;span class='s'>"white"&lt;/span>,
high = &lt;span class='s'>"#2166AC"&lt;/span>,
limits = &lt;span class='nf'>c&lt;/span>(&lt;span class='o'>-&lt;/span>&lt;span class='m'>0.4&lt;/span>, &lt;span class='m'>0.4&lt;/span>)
) &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>theme&lt;/span>(axis.text.y = &lt;span class='nf'>element_blank&lt;/span>()) &lt;span class='o'>+&lt;/span>
&lt;span class='nf'>ylab&lt;/span>(&lt;span class='s'>"Predictors"&lt;/span>)
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/pls-coef-1.svg" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>The third component has the largest coefficients and the largest effect on predicting the percentage of protein. This is consistent with the scatter plot above. The blocks of white in the heatmap above are coefficients effected by the sparsity argument.&lt;/p></description></item><item><title>tidymodels updates</title><link>https://www.tidyverse.org/blog/2019/09/tidymodels-2019-09/</link><pubDate>Thu, 05 Sep 2019 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2019/09/tidymodels-2019-09/</guid><description>&lt;p>We&amp;rsquo;ve sent a few packages to CRAN recently. Here&amp;rsquo;s a recap of the changes (and some notes at the bottom):&lt;/p>
&lt;h2 id="recipes-016">recipes 0.1.6
&lt;a href="#recipes-016">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>
&lt;h3 id="breaking-changes">Breaking Changes
&lt;a href="#breaking-changes">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;ul>
&lt;li>Since 2018, a warning has been issued when the wrong argument was used in &lt;code>bake(recipe, newdata)&lt;/code>. The deprecation period is over and &lt;code>new_data&lt;/code> is officially required.&lt;/li>
&lt;li>Previously, if
&lt;a href="https://tidymodels.github.io/recipes/reference/step_other.html" target="_blank" rel="noopener">&lt;code>step_other()&lt;/code>&lt;/a> did &lt;em>not&lt;/em> collapse any levels, it would still add an &amp;ldquo;other&amp;rdquo; level to the factor. This would lump new factor levels into &amp;ldquo;other&amp;rdquo; when data were baked (as
&lt;a href="https://tidymodels.github.io/recipes/reference/step_novel.html" target="_blank" rel="noopener">&lt;code>step_novel()&lt;/code>&lt;/a> does). This no longer occurs, since it was inconsistent with &lt;code>?step_other&lt;/code>, which said that: &amp;ldquo;If no pooling is done the data are unmodified&amp;rdquo;.&lt;/li>
&lt;/ul>
&lt;h3 id="new-operations">New Operations:
&lt;a href="#new-operations">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;ul>
&lt;li>
&lt;a href="https://tidymodels.github.io/recipes/reference/step_normalize.html" target="_blank" rel="noopener">&lt;code>step_normalize()&lt;/code>&lt;/a> centers and scales the data (if you are, like Max, too lazy to use two separate steps).&lt;/li>
&lt;li>
&lt;a href="https://tidymodels.github.io/recipes/reference/step_unknown.html" target="_blank" rel="noopener">&lt;code>step_unknown()&lt;/code>&lt;/a> will convert missing data in categorical columns to &amp;ldquo;unknown&amp;rdquo; and update factor levels.&lt;/li>
&lt;/ul>
&lt;h3 id="other-changes">Other Changes:
&lt;a href="#other-changes">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;ul>
&lt;li>If the &lt;code>threshold&lt;/code> argument of
&lt;a href="https://tidymodels.github.io/recipes/reference/step_other.html" target="_blank" rel="noopener">&lt;code>step_other()&lt;/code>&lt;/a> is greater than one, it specifies the minimum sample size before the levels of the factor are collapsed into the &amp;ldquo;other&amp;rdquo; category.
&lt;a href="https://github.com/tidymodels/recipes/issues/289" target="_blank" rel="noopener">#289&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://tidymodels.github.io/recipes/reference/step_knnimpute.html" target="_blank" rel="noopener">&lt;code>step_knnimpute()&lt;/code>&lt;/a> can now pass two options to the underlying knn code, including the number of threads (
&lt;a href="https://github.com/tidymodels/recipes/issues/323" target="_blank" rel="noopener">#323&lt;/a>).&lt;/li>
&lt;li>Due to changes by CRAN,
&lt;a href="https://tidymodels.github.io/recipes/reference/step_nnmf.html" target="_blank" rel="noopener">&lt;code>step_nnmf()&lt;/code>&lt;/a> only works on versions of R &amp;gt;= 3.6.0 due to dependency issues.&lt;/li>
&lt;li>
&lt;a href="https://tidymodels.github.io/recipes/reference/step_dummy.html" target="_blank" rel="noopener">&lt;code>step_dummy()&lt;/code>&lt;/a> and
&lt;a href="https://tidymodels.github.io/recipes/reference/step_other.html" target="_blank" rel="noopener">&lt;code>step_other()&lt;/code>&lt;/a> are now tolerant to cases where that step&amp;rsquo;s selectors do not capture any columns. In this case, no modifications to the data are made. (
&lt;a href="https://github.com/tidymodels/recipes/issues/290" target="_blank" rel="noopener">#290&lt;/a>,
&lt;a href="https://github.com/tidymodels/recipes/issues/348" target="_blank" rel="noopener">#348&lt;/a>)&lt;/li>
&lt;li>
&lt;a href="https://tidymodels.github.io/recipes/reference/step_dummy.html" target="_blank" rel="noopener">&lt;code>step_dummy()&lt;/code>&lt;/a> can now retain the original columns that are used to make the dummy variables by setting &lt;code>preserve = TRUE&lt;/code>. (
&lt;a href="https://github.com/tidymodels/recipes/issues/328" target="_blank" rel="noopener">#328&lt;/a>)&lt;/li>
&lt;li>
&lt;a href="https://tidymodels.github.io/recipes/reference/step_other.html" target="_blank" rel="noopener">&lt;code>step_other()&lt;/code>&lt;/a>&amp;lsquo;s print method only reports the variables with collapsed levels (as opposed to any column that was &lt;em>tested&lt;/em> to see if it needed collapsing). (
&lt;a href="https://github.com/tidymodels/recipes/issues/338" target="_blank" rel="noopener">#338&lt;/a>)&lt;/li>
&lt;li>
&lt;a href="https://tidymodels.github.io/recipes/reference/step_pca.html" target="_blank" rel="noopener">&lt;code>step_pca()&lt;/code>&lt;/a>,
&lt;a href="https://tidymodels.github.io/recipes/reference/step_kpca.html" target="_blank" rel="noopener">&lt;code>step_kpca()&lt;/code>&lt;/a>,
&lt;a href="https://tidymodels.github.io/recipes/reference/step_ica.html" target="_blank" rel="noopener">&lt;code>step_ica()&lt;/code>&lt;/a>,
&lt;a href="https://tidymodels.github.io/recipes/reference/step_nnmf.html" target="_blank" rel="noopener">&lt;code>step_nnmf()&lt;/code>&lt;/a>,
&lt;a href="https://tidymodels.github.io/recipes/reference/step_pls.html" target="_blank" rel="noopener">&lt;code>step_pls()&lt;/code>&lt;/a>, and
&lt;a href="https://tidymodels.github.io/recipes/reference/step_isomap.html" target="_blank" rel="noopener">&lt;code>step_isomap()&lt;/code>&lt;/a> now accept zero components. In this case, the original data are returned. Please use this with great care.&lt;/li>
&lt;/ul>
&lt;h2 id="embed-003">embed 0.0.3
&lt;a href="#embed-003">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Two new steps were added:&lt;/p>
&lt;ul>
&lt;li>
&lt;a href="https://tidymodels.github.io/embed/reference/step_umap.html" target="_blank" rel="noopener">&lt;code>step_umap()&lt;/code>&lt;/a> was added for both supervised and unsupervised encodings.&lt;/li>
&lt;li>
&lt;a href="https://tidymodels.github.io/embed/reference/step_woe.html" target="_blank" rel="noopener">&lt;code>step_woe()&lt;/code>&lt;/a> creates weight of evidence encodings. Thanks to Athos Petri Damiani for this.&lt;/li>
&lt;/ul>
&lt;h2 id="rsample-005">rsample 0.0.5
&lt;a href="#rsample-005">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;ul>
&lt;li>Added three functions to compute different
&lt;a href="https://tidymodels.github.io/rsample/articles/Applications/Intervals.html" target="_blank" rel="noopener">bootstrap confidence intervals&lt;/a>.&lt;/li>
&lt;li>A new function (
&lt;a href="https://tidymodels.github.io/rsample/reference/add_resample_id.html" target="_blank" rel="noopener">&lt;code>add_resample_id()&lt;/code>&lt;/a>) augments a data frame with columns for the resampling identifier.&lt;/li>
&lt;li>Updated
&lt;a href="https://tidymodels.github.io/rsample/reference/initial_split.html" target="_blank" rel="noopener">&lt;code>initial_split()&lt;/code>&lt;/a>,
&lt;a href="https://tidymodels.github.io/rsample/reference/mc_cv.html" target="_blank" rel="noopener">&lt;code>mc_cv()&lt;/code>&lt;/a>,
&lt;a href="https://tidymodels.github.io/rsample/reference/vfold_cv.html" target="_blank" rel="noopener">&lt;code>vfold_cv()&lt;/code>&lt;/a>,
&lt;a href="https://tidymodels.github.io/rsample/reference/bootstraps.html" target="_blank" rel="noopener">&lt;code>bootstraps()&lt;/code>&lt;/a>, and
&lt;a href="https://tidymodels.github.io/rsample/reference/group_vfold_cv.html" target="_blank" rel="noopener">&lt;code>group_vfold_cv()&lt;/code>&lt;/a> to use tidyselect on the stratification variable.&lt;/li>
&lt;li>Updated
&lt;a href="https://tidymodels.github.io/rsample/reference/initial_split.html" target="_blank" rel="noopener">&lt;code>initial_split()&lt;/code>&lt;/a>,
&lt;a href="https://tidymodels.github.io/rsample/reference/mc_cv.html" target="_blank" rel="noopener">&lt;code>mc_cv()&lt;/code>&lt;/a>,
&lt;a href="https://tidymodels.github.io/rsample/reference/vfold_cv.html" target="_blank" rel="noopener">&lt;code>vfold_cv()&lt;/code>&lt;/a>, and
&lt;a href="https://tidymodels.github.io/rsample/reference/bootstraps.html" target="_blank" rel="noopener">&lt;code>bootstraps()&lt;/code>&lt;/a> with new &lt;code>breaks&lt;/code> parameter that specifies the number of bins to stratify by for a numeric stratification variable.&lt;/li>
&lt;/ul>
&lt;h2 id="parsnip-0031">parsnip 0.0.3.1
&lt;a href="#parsnip-0031">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Unplanned release based on CRAN requirements for Solaris.&lt;/p>
&lt;h3 id="breaking-changes-1">Breaking Changes
&lt;a href="#breaking-changes-1">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;ul>
&lt;li>
&lt;p>The method that &lt;code>parsnip&lt;/code> uses to store the model information has changed. Any custom models from previous versions will need to use the new method for registering models. The methods are detailed in &lt;code>?get_model_env&lt;/code> and the
&lt;a href="https://tidymodels.github.io/parsnip/articles/articles/Scratch.html" target="_blank" rel="noopener">package vignette for adding models&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>The mode needs to be declared for models that can be used for more than one mode prior to fitting and/or translation.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>For &lt;code>surv_reg()&lt;/code>, the engine that uses the &lt;code>survival&lt;/code> package is now called &lt;code>survival&lt;/code> instead of &lt;code>survreg&lt;/code>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>For &lt;code>glmnet&lt;/code> models, the full regularization path is always fit regardless of the value given to &lt;code>penalty&lt;/code>. Previously, the model was fit by passing &lt;code>penalty&lt;/code> to &lt;code>glmnet&lt;/code>'s &lt;code>lambda&lt;/code> argument, and the model could only make predictions at those specific values.
&lt;a href="https://github.com/tidymodels/parsnip/issues/195" target="_blank" rel="noopener">(#195)&lt;/a>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="new-features">New Features
&lt;a href="#new-features">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;ul>
&lt;li>
&lt;p>&lt;code>add_rowindex()&lt;/code> can create a column called &lt;code>.row&lt;/code> to a data frame.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>If a computational engine is not explicitly set, a default will be used. Each default is documented on the corresponding model page. A warning is issued at fit time unless verbosity is zero.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>nearest_neighbor()&lt;/code> gained a &lt;code>multi_predict&lt;/code> method. The &lt;code>multi_predict()&lt;/code> documentation is a little better organized.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>A suite of internal functions were added to help with upcoming model tuning features.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>A &lt;code>parsnip&lt;/code> object always saved the name(s) of the outcome variable(s) for proper naming of the predicted values.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="corrr-04">corrr 0.4
&lt;a href="#corrr-04">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>
&lt;h3 id="new-features-1">New features
&lt;a href="#new-features-1">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;ul>
&lt;li>New function called
&lt;a href="https://tidymodels.github.io/corrr/reference/dice.html" target="_blank" rel="noopener">&lt;code>dice()&lt;/code>&lt;/a> function, wraps &lt;code>focus(x,..., mirror = TRUE)&lt;/code>&lt;/li>
&lt;li>A new
&lt;a href="https://tidymodels.github.io/corrr/reference/retract.html" target="_blank" rel="noopener">&lt;code>retract()&lt;/code>&lt;/a> function does the opposite of &lt;code>stretch()&lt;/code>&lt;/li>
&lt;li>A new argument was added to
&lt;a href="https://tidymodels.github.io/corrr/reference/stretch.html" target="_blank" rel="noopener">&lt;code>stretch()&lt;/code>&lt;/a> called &lt;code>remove.dups&lt;/code>. It removes duplicates with out removing all NAs.&lt;/li>
&lt;/ul>
&lt;h3 id="improvements">Improvements
&lt;a href="#improvements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;ul>
&lt;li>&lt;code>correlate()&lt;/code>'s interface for databases was improved. It now only calculates unique pairs, and simplifies the formula that ultimately runs in-database. We also re-added the vignette to the package, which is also available on the site as an
&lt;a href="https://tidymodels.github.io/corrr/articles/databases.html" target="_blank" rel="noopener">article&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="tidypredict-043">tidypredict 0.4.3
&lt;a href="#tidypredict-043">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>
&lt;h3 id="new-models">New models
&lt;a href="#new-models">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>The new version is now able to parse the following models:&lt;/p>
&lt;ul>
&lt;li>&lt;code>cubist()&lt;/code>, from the &lt;code>Cubist&lt;/code> package&lt;/li>
&lt;li>&lt;code>ctree()&lt;/code>, from the &lt;code>partykit&lt;/code> package&lt;/li>
&lt;li>XGBoost trained models, via the &lt;code>xgboost&lt;/code> package&lt;/li>
&lt;/ul>
&lt;h3 id="new-features-2">New features
&lt;a href="#new-features-2">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;ul>
&lt;li>Integration with &lt;code>broom&lt;/code>'s &lt;code>tidy()&lt;/code> function. It works with Regression models only&lt;/li>
&lt;li>Adds support for &lt;code>parsnip&lt;/code> fitted models: &lt;code>lm&lt;/code>, &lt;code>randomForest&lt;/code>, &lt;code>ranger&lt;/code>, and &lt;code>earth&lt;/code>&lt;/li>
&lt;li>Adds
&lt;a href="https://tidymodels.github.io/tidypredict/reference/as_parsed_model.html" target="_blank" rel="noopener">&lt;code>as_parsed_model()&lt;/code>&lt;/a> function. It adds the proper class components to the list. This allows any model exported in the correct spec to be read in by &lt;code>tidypredict&lt;/code>. See the
&lt;a href="https://tidymodels.github.io/tidypredict/articles/save.html" target="_blank" rel="noopener">Save Models&lt;/a> and
&lt;a href="https://tidymodels.github.io/tidypredict/articles/non-r.html" target="_blank" rel="noopener">Non-R models&lt;/a> for more information&lt;/li>
&lt;/ul>
&lt;h3 id="improvements-1">Improvements
&lt;a href="#improvements-1">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;ul>
&lt;li>Now supports classification models from &lt;code>ranger&lt;/code>&lt;/li>
&lt;/ul>
&lt;h3 id="website">Website
&lt;a href="#website">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>The package&amp;rsquo;s
&lt;a href="https://tidymodels.github.io/tidypredict/index.html" target="_blank" rel="noopener">official website&lt;/a> has been expanded greatly. Here are some highlights:&lt;/p>
&lt;ul>
&lt;li>An article per each supported model, they are found under Model List&lt;/li>
&lt;li>A how to guide to save and reload models,
&lt;a href="https://tidymodels.github.io/tidypredict/articles/save.html" target="_blank" rel="noopener">link here&lt;/a>&lt;/li>
&lt;li>How to integrate non-R models to &lt;code>tidypredict&lt;/code>,
&lt;a href="https://tidymodels.github.io/tidypredict/articles/non-r.html" target="_blank" rel="noopener">link here&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="yardstick-004">yardstick 0.0.4
&lt;a href="#yardstick-004">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>
&lt;h3 id="new-metrics">New Metrics
&lt;a href="#new-metrics">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>Two new metrics have been added to yardstick:&lt;/p>
&lt;ul>
&lt;li>
&lt;a href="https://tidymodels.github.io/yardstick/reference/iic.html" target="_blank" rel="noopener">&lt;code>iic()&lt;/code>&lt;/a> is a numeric metric for computing the index of ideality of correlation. It is a potential alternative to the traditional correlation coefficient, and has been used in QSAR models (
&lt;a href="https://github.com/tidymodels/yardstick/issues/87" target="_blank" rel="noopener">#115&lt;/a>).&lt;/li>
&lt;li>
&lt;a href="https://tidymodels.github.io/yardstick/reference/average_precision.html" target="_blank" rel="noopener">&lt;code>average_precision()&lt;/code>&lt;/a> is a probability metric that can be used as an alternative to &lt;code>pr_auc()&lt;/code>. It has the benefit of avoiding any issues of ambiguity in the edge case where &lt;code>recall == 0&lt;/code> and the current number of false positives is &lt;code>0&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h3 id="improvements-2">Improvements
&lt;a href="#improvements-2">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;ul>
&lt;li>&lt;code>pr_curve()&lt;/code> (and by extension &lt;code>pr_auc()&lt;/code>) has been greatly improved to better handle edge cases when duplicate class probability values are present. Additionally, the first precision value in the curve is now a &lt;code>1&lt;/code>, rather than an &lt;code>NA&lt;/code>, which results in a more practical curve, and generates a more correct AUC value (
&lt;a href="https://github.com/tidymodels/yardstick/issues/93" target="_blank" rel="noopener">#93&lt;/a>).&lt;/li>
&lt;li>Each metric function now has a &lt;code>direction&lt;/code> attribute, which specifies the direction required for optimization, either minimization or maximization.&lt;/li>
&lt;li>Documentation for class probability metrics has been improved with more informative examples (
&lt;a href="https://github.com/tidymodels/yardstick/issues/100" target="_blank" rel="noopener">#100&lt;/a>).&lt;/li>
&lt;li>&lt;code>mn_log_loss()&lt;/code> now uses the min/max rule before computing the log of the estimated probabilities to avoid problematic undefined log values (
&lt;a href="https://github.com/tidymodels/yardstick/issues/103" target="_blank" rel="noopener">#103&lt;/a>).&lt;/li>
&lt;/ul>
&lt;h2 id="upcoming-changes-and-directions">Upcoming Changes and Directions
&lt;a href="#upcoming-changes-and-directions">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>We are currently working on two general use packages: &lt;code>workflows&lt;/code> and &lt;code>tune&lt;/code>. The former bundles together recipes, model object, and other items so that there can be single &lt;code>fit()&lt;/code> and &lt;code>predict()&lt;/code> methods. &lt;code>tune&lt;/code> will have tools for&amp;hellip; um&amp;hellip; tuning models. We are hoping to make these public in the next month or so.&lt;/p>
&lt;p>There will be some changes to accommodate model tuning. The &lt;code>dials&lt;/code> package has been re-factored substantially (see the current GH master branch) and there were some small interfaces changes to &lt;code>recipes&lt;/code> too (mostly backwards compatible and also on GH). We are pretty close to end of &amp;ldquo;Phase I&amp;rdquo; of our tidymodels work.&lt;/p></description></item><item><title>tidymodels package updates</title><link>https://www.tidyverse.org/blog/2018/11/tidymodels-update-nov-18/</link><pubDate>Thu, 29 Nov 2018 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2018/11/tidymodels-update-nov-18/</guid><description>&lt;p>Along with the release of
&lt;a href="https://tidymodels.github.io/parsnip/" target="_blank" rel="noopener">&lt;code>parsnip&lt;/code>&lt;/a> there are new versions of many &lt;code>tidymodels&lt;/code> packages:
&lt;a href="https://tidymodels.github.io/recipes/" target="_blank" rel="noopener">&lt;code>recipes&lt;/code>&lt;/a>,
&lt;a href="https://tidymodels.github.io/yardstick/" target="_blank" rel="noopener">&lt;code>yardstick&lt;/code>&lt;/a>,
&lt;a href="https://tidymodels.github.io/embed/" target="_blank" rel="noopener">&lt;code>embed&lt;/code>&lt;/a>,
&lt;a href="https://tidymodels.github.io/tidyposterior/" target="_blank" rel="noopener">&lt;code>tidyposterior&lt;/code>&lt;/a>, and
&lt;a href="https://github.com/tidymodels/tidymodels" target="_blank" rel="noopener">&lt;code>tidymodels&lt;/code>&lt;/a>.&lt;/p>
&lt;p>We made the conscious choice to add all of the breaking changes now instead of spreading them out over a few versions. The biggest changes are in &lt;code>yardstick&lt;/code> and &lt;code>recipes&lt;/code> and these are described below.&lt;/p>
&lt;p>One change across all of these packages: &lt;code>broom&lt;/code> is no longer used to obtain the &lt;code>tidy&lt;/code> S3 methods. Instead, the
&lt;a href="https://www.tidyverse.org/articles/2018/11/generics-0.0.1/" target="_blank" rel="noopener">&lt;code>generics&lt;/code> package&lt;/a> is imported so that we might reduce dependencies.&lt;/p>
&lt;h2 id="yardstick">&lt;strong>yardstick&lt;/strong>
&lt;a href="#yardstick">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>This is a large release for yardstick, with more metrics, grouped
data frame integration, multiclass metric support, and a few breaking changes.&lt;/p>
&lt;h3 id="breaking-changes">Breaking changes
&lt;a href="#breaking-changes">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>These changes were made with the intention of standardizing both the API and the output of each metric.&lt;/p>
&lt;p>All metrics now return a tibble rather than a single numeric value. This sets
the groundwork for allowing metrics to be used with grouped data frames, and
allows more informative output to be returned from each metric.&lt;/p>
&lt;p>To preserve some of the old behavior, &lt;code>_vec()&lt;/code> functions have been added for each
metric. These take vectors as inputs and return a single numeric result.&lt;/p>
&lt;p>A number of small breaking changes have been made to be in line with the tidymodels
&lt;a href="https://tidymodels.github.io/model-implementation-principles/" target="_blank" rel="noopener">model implementation principles&lt;/a>. These include: &lt;code>mnLogLoss()&lt;/code> being renamed to
&lt;a href="https://tidymodels.github.io/yardstick/reference/mn_log_loss.html" target="_blank" rel="noopener">&lt;code>mn_log_loss()&lt;/code>&lt;/a>, the &lt;code>na.rm&lt;/code> argument being renamed to &lt;code>na_rm&lt;/code>, and other similar changes that reflect a standardization that is being implemented across the entire tidymodels ecosystem. All of the changes are documented in the
&lt;a href="https://tidymodels.github.io/yardstick/news/index.html#breaking-changes" target="_blank" rel="noopener">NEWS&lt;/a>.&lt;/p>
&lt;h3 id="multiclass-metrics">Multiclass metrics
&lt;a href="#multiclass-metrics">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>A multiclass model is a classification model that has more than two potential outputs. Until now, the only metric with multiclass support was
&lt;a href="https://tidymodels.github.io/yardstick/reference/accuracy.html" target="_blank" rel="noopener">&lt;code>accuracy()&lt;/code>&lt;/a> because its definition extends naturally into the multiclass world. Now, all metrics have some form of multiclass support through the concepts of macro and micro averaging. To learn about how these types of averaging work, read the new
&lt;a href="https://tidymodels.github.io/yardstick/articles/multiclass.html" target="_blank" rel="noopener">vignette&lt;/a>.&lt;/p>
&lt;p>As an example, the following data set has columns for an observed multiclass result, the predicted class, individual class probability predictions, and the current resample (out of 10).&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dplyr&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">data&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;hpc_cv&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">hpc_single_resample&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">filter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">hpc_cv&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Resample&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s">&amp;#34;Fold01&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">head&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">hpc_single_resample&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;pre>&lt;code>#&amp;gt; obs pred VF F M L Resample
#&amp;gt; 1 VF VF 0.914 0.0779 0.00848 1.99e-05 Fold01
&lt;/code>&lt;/pre>&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="c1"># The outcome has 4 potential values&lt;/span>
&lt;span class="nf">unique&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">hpc_single_resample&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="n">obs&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;pre>&lt;code>#&amp;gt; [1] VF F M L
#&amp;gt; Levels: VF F M L
&lt;/code>&lt;/pre>&lt;p>yardstick will automatically detect that the input is from a multiclass model,
and will choose to use macro averaging by default in most cases.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">precision&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">hpc_single_resample&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">obs&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">pred&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;pre>&lt;code>#&amp;gt; # A tibble: 1 x 3
#&amp;gt; .metric .estimator .estimate
#&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;dbl&amp;gt;
#&amp;gt; 1 precision macro 0.637
&lt;/code>&lt;/pre>&lt;p>To tell yardstick metrics to use a different variant of averaging, use the &lt;code>estimator&lt;/code>
argument to specify &lt;code>&amp;quot;macro&amp;quot;&lt;/code>, &lt;code>&amp;quot;micro&amp;quot;&lt;/code> or &lt;code>&amp;quot;macro_weighted&amp;quot;&lt;/code> averaging, among
others depending on the metric.&lt;/p>
&lt;h3 id="grouped-data-frames">Grouped data frames
&lt;a href="#grouped-data-frames">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>To calculate metrics on multiple resamples at once, yardstick now recognizes
grouped data frames and calculates the metric on each group separately.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">hpc_grouped&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="n">hpc_cv&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_by&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Resample&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">hpc_grouped&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">pr_auc&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">obs&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">VF&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="n">L&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">head&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">3&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;pre>&lt;code>#&amp;gt; # A tibble: 3 x 4
#&amp;gt; Resample .metric .estimator .estimate
#&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;dbl&amp;gt;
#&amp;gt; 1 Fold01 pr_auc macro 0.595
#&amp;gt; 2 Fold02 pr_auc macro 0.599
#&amp;gt; 3 Fold03 pr_auc macro 0.682
&lt;/code>&lt;/pre>&lt;p>Combined with
&lt;a href="https://tidymodels.github.io/yardstick/reference/metric_set.html" target="_blank" rel="noopener">&lt;code>metric_set()&lt;/code>&lt;/a>, a new function for combining multiple metrics into one function call, this workflow makes calculating a large number of metrics over multiple resamples a quick task. We encourage you to check out the example section of
&lt;a href="https://tidymodels.github.io/yardstick/reference/metric_set.html" target="_blank" rel="noopener">&lt;code>metric_set()&lt;/code>'s help page&lt;/a> if you are interested in learning more.&lt;/p>
&lt;h3 id="curve-functions">Curve functions
&lt;a href="#curve-functions">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>Four new &amp;ldquo;curve&amp;rdquo; functions have been added to compute the full ROC curve, precision-recall curve, lift curve, and gain curve. Each of these functions has a corresponding &lt;code>ggplot2::autoplot()&lt;/code> method. Combined with the grouped data frame support, this greatly simplifies some aspects of visualizing model performance.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ggplot2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">hpc_grouped&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">roc_curve&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">obs&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">VF&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="n">L&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">autoplot&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">ggtitle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;One-VS-All ROC Curve&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">subtitle&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;Computed for each resample&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2018-11-tidymodels-updates_files/figure-html/unnamed-chunk-4-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;h3 id="new-metrics-and-vignettes">New metrics and vignettes
&lt;a href="#new-metrics-and-vignettes">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>The following metrics are new in this release:
&lt;a href="https://tidymodels.github.io/yardstick/reference/mape.html" target="_blank" rel="noopener">&lt;code>mape()&lt;/code>&lt;/a>,
&lt;a href="https://tidymodels.github.io/yardstick/reference/kap.html" target="_blank" rel="noopener">&lt;code>kap()&lt;/code>&lt;/a>,
&lt;a href="https://tidymodels.github.io/yardstick/reference/detection_prevalence.html" target="_blank" rel="noopener">&lt;code>detection_prevalence()&lt;/code>&lt;/a>,
&lt;a href="https://tidymodels.github.io/yardstick/reference/bal_accuracy.html" target="_blank" rel="noopener">&lt;code>bal_accuracy()&lt;/code>&lt;/a>,
&lt;a href="https://tidymodels.github.io/yardstick/reference/roc_curve.html" target="_blank" rel="noopener">&lt;code>roc_curve()&lt;/code>&lt;/a>,
&lt;a href="https://tidymodels.github.io/yardstick/reference/pr_curve.html" target="_blank" rel="noopener">&lt;code>pr_curve()&lt;/code>&lt;/a>,
&lt;a href="https://tidymodels.github.io/yardstick/reference/gain_curve.html" target="_blank" rel="noopener">&lt;code>gain_curve()&lt;/code>&lt;/a>,
&lt;a href="https://tidymodels.github.io/yardstick/reference/lift_curve.html" target="_blank" rel="noopener">&lt;code>lift_curve()&lt;/code>&lt;/a>, and
&lt;a href="https://tidymodels.github.io/yardstick/reference/gain_capture.html" target="_blank" rel="noopener">&lt;code>gain_capture()&lt;/code>&lt;/a>.&lt;/p>
&lt;p>There are also three new vignettes. One has already been mentioned that describes
&lt;a href="https://tidymodels.github.io/yardstick/articles/multiclass.html" target="_blank" rel="noopener">multiclass averaging&lt;/a>. The other two focus on the three main
&lt;a href="https://tidymodels.github.io/yardstick/articles/metric-types.html" target="_blank" rel="noopener">metric types&lt;/a> in yardstick, and on implementing
&lt;a href="https://tidymodels.github.io/yardstick/articles/custom-metrics.html" target="_blank" rel="noopener">custom metrics&lt;/a> for personal use.&lt;/p>
&lt;h2 id="recipes">&lt;strong>recipes&lt;/strong>
&lt;a href="#recipes">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>
&lt;h3 id="breaking-changes-1">Breaking changes
&lt;a href="#breaking-changes-1">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>One big change was to make the argument names more consistent with the tidyverse standards and to also make them consistent with &lt;code>dials&lt;/code> and other packages. For example,
&lt;a href="https://tidymodels.github.io/recipes/reference/step_pca.html" target="_blank" rel="noopener">&lt;code>step_pca()&lt;/code>&lt;/a> now has an argument &lt;code>num_comp&lt;/code> that replaces the previous &lt;code>num&lt;/code> argument. This will pay off later when we enable the detection of tuning parameters and the automatic determination of grid values or parameter ranges. The biggest name change is in
&lt;a href="https://tidymodels.github.io/recipes/reference/bake.html" target="_blank" rel="noopener">&lt;code>bake()&lt;/code>&lt;/a>; &lt;code>newdata&lt;/code> is now &lt;code>new_data&lt;/code>. For the time being, a warning will be issued when &lt;code>newdata&lt;/code> is used but that won&amp;rsquo;t last past the next version. The list of name changes are detailed
&lt;a href="https://tidymodels.github.io/recipes/news/index.html" target="_blank" rel="noopener">here&lt;/a>.&lt;/p>
&lt;p>In recipes, variables can have different roles (e.g. &amp;ldquo;predictor&amp;rdquo; or &amp;ldquo;outcome&amp;rdquo;). Beyond those set by the package, roles are largely user specified and can be pretty much anything. Previously, only a single role was allowed. The new version of recipes expands the number of roles per column. This now means that
&lt;a href="https://tidymodels.github.io/recipes/reference/roles.html" target="_blank" rel="noopener">&lt;code>add_role()&lt;/code>&lt;/a> will &lt;em>append&lt;/em> roles, and the new function
&lt;a href="https://tidymodels.github.io/recipes/reference/roles.html" target="_blank" rel="noopener">&lt;code>update_role()&lt;/code>&lt;/a> will reset them. It also changes how the &lt;code>summary()&lt;/code> results for a recipe are returned since there can now be multiple rows per column variable.&lt;/p>
&lt;p>A feature that we will be working on in the &lt;em>next&lt;/em> version is to be able to reference (and use) previous steps. For example, if you center some variables, you might want to uncenter them at a later step. For this future feature, this version of &lt;code>recipes&lt;/code> mandates an ID field for each step. The ID can be anything, but the current convention is to use the step name followed by random digits (e.g. &lt;code>&amp;quot;center_irqtH&amp;quot;&lt;/code>).&lt;/p>
&lt;p>Another change was to default the
&lt;a href="https://tidymodels.github.io/recipes/reference/prep.html" target="_blank" rel="noopener">&lt;code>prep()&lt;/code>&lt;/a> option &lt;code>retain&lt;/code> to &lt;code>TRUE&lt;/code>. We (and others) found that this was something that is always done since it allows
&lt;a href="https://tidymodels.github.io/recipes/reference/juice.html" target="_blank" rel="noopener">&lt;code>juice()&lt;/code>&lt;/a> to get the processed training set at no extra cost. The down-side is that, if the training set is large, you carry a large copy of the data inside the recipe. When the &lt;code>verbose&lt;/code> option is turned on, a message is printed showing the size of the training set, i.e.:&lt;/p>
&lt;blockquote>
&lt;p>&amp;ldquo;The retained training set is ~ 20.0 Mb in memory.&amp;rdquo;&lt;/p>
&lt;/blockquote>
&lt;p>This size estimate is approximate since the base R function &lt;code>object.size()&lt;/code> is used, which does not count objects in any environments that are carried along.&lt;/p>
&lt;p>Finally, a number of steps check for duplicate names and will throw an error during &lt;code>prep()&lt;/code> if this occurs. This behavior may slightly change in the future due to changes in the &lt;code>tibble&lt;/code> package related to how unique names should treated be when creating data frames.&lt;/p>
&lt;h3 id="new-steps">New steps
&lt;a href="#new-steps">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>A big new feature in this version of &lt;code>recipes&lt;/code> is the addition of &lt;code>dplyr&lt;/code>-related steps:
&lt;a href="https://tidymodels.github.io/recipes/reference/step_arrange.html" target="_blank" rel="noopener">&lt;code>step_arrange()&lt;/code>&lt;/a>,
&lt;a href="https://tidymodels.github.io/recipes/reference/step_filter.html" target="_blank" rel="noopener">&lt;code>step_filter()&lt;/code>&lt;/a>,
&lt;a href="https://tidymodels.github.io/recipes/reference/step_mutate.html" target="_blank" rel="noopener">&lt;code>step_mutate()&lt;/code>&lt;/a>,
&lt;a href="https://tidymodels.github.io/recipes/reference/step_sample.html" target="_blank" rel="noopener">&lt;code>step_sample()&lt;/code>&lt;/a>, and
&lt;a href="https://tidymodels.github.io/recipes/reference/step_slice.html" target="_blank" rel="noopener">&lt;code>step_slice()&lt;/code>&lt;/a>. They follow their &lt;code>dplyr&lt;/code> analogs.
&lt;a href="https://tidymodels.github.io/recipes/reference/step_sample.html" target="_blank" rel="noopener">&lt;code>step_sample()&lt;/code>&lt;/a> covers both &lt;code>dplyr::sample_n()&lt;/code> and &lt;code>dplyr::sample_frac()&lt;/code>. Other new steps include:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>
&lt;a href="https://tidymodels.github.io/recipes/reference/step_integer.html" target="_blank" rel="noopener">&lt;code>step_integer()&lt;/code>&lt;/a> converts data to ordered integers similar to
&lt;a href="https://scikit-learn.org/stable/modules/generated/sklearn.preprocessing.LabelEncoder.html" target="_blank" rel="noopener">&lt;code>LabelEncoder&lt;/code>&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>
&lt;a href="https://tidymodels.github.io/recipes/reference/step_geodist.html" target="_blank" rel="noopener">&lt;code>step_geodist()&lt;/code>&lt;/a> can be used to calculate the distance between geocodes and a single reference location.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>
&lt;a href="https://tidymodels.github.io/recipes/reference/step_nnmf.html" target="_blank" rel="noopener">&lt;code>step_nnmf()&lt;/code>&lt;/a> computes the non-negative matrix factorization components for non-negative data.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>List-columns are also supported in &lt;code>recipes&lt;/code> now.
&lt;a href="https://tidymodels.github.io/recipes/reference/summary.recipe.html" target="_blank" rel="noopener">&lt;code>summary.recipe()&lt;/code>&lt;/a> now shows &lt;code>type&lt;/code> column values as &amp;ldquo;list&amp;rdquo; and these can be selected using &lt;code>has_type(&amp;quot;list&amp;quot;)&lt;/code>. When printing the recipe, a row is labeled as missing when its entire list element is missing (e.g. &lt;code>is.na(list[[i]])&lt;/code> is &lt;code>TRUE&lt;/code>). If the list element has some non-missing values, it is not counted as missing.&lt;/p>
&lt;p>There are also bug fixes and other small changes that can be found in the
&lt;a href="https://tidymodels.github.io/recipes/news/index.html" target="_blank" rel="noopener">News file&lt;/a>.&lt;/p>
&lt;h2 id="rsample">&lt;strong>rsample&lt;/strong>
&lt;a href="#rsample">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>A function
&lt;a href="https://tidymodels.github.io/rsample/reference/initial_split.html" target="_blank" rel="noopener">&lt;code>initial_time_split()&lt;/code>&lt;/a> was added. It can be used to create &lt;em>ordered&lt;/em> initial splits and would be appropriate for time series data.&lt;/p>
&lt;p>(&lt;strong>breaking change&lt;/strong>) Also, the &lt;code>recipes&lt;/code>-related
&lt;a href="https://tidymodels.github.io/recipes/reference/prepper.html" target="_blank" rel="noopener">&lt;code>prepper()&lt;/code>&lt;/a> function was moved to the &lt;code>recipes&lt;/code> package. This makes the &lt;code>rsample&lt;/code>'s install footprint much smaller.&lt;/p>
&lt;p>Finally, &lt;code>rsplit&lt;/code> objects have a better representation inside of tibbles when the sample sizes are large.&lt;/p>
&lt;h2 id="embed">&lt;strong>embed&lt;/strong>
&lt;a href="#embed">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>The tensorflow function
&lt;a href="https://tidymodels.github.io/embed/reference/step_embed.html" target="_blank" rel="noopener">&lt;code>step_embed()&lt;/code>&lt;/a> can now handle callbacks to &lt;code>keras&lt;/code>. This enables a few different features, including stopping when a convergence criterion is met.&lt;/p>
&lt;h2 id="tidymodels">&lt;strong>tidymodels&lt;/strong>
&lt;a href="#tidymodels">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>We added
&lt;a href="https://tidymodels.github.io/parsnip/" target="_blank" rel="noopener">&lt;code>parsnip&lt;/code>&lt;/a> and
&lt;a href="https://tidymodels.github.io/dials/" target="_blank" rel="noopener">&lt;code>dials&lt;/code>&lt;/a> to the core set of packages and bumped all packages up to their current versions.&lt;/p></description></item></channel></rss>