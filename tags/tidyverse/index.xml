<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>tidyverse | Tidyverse</title><link>https://www.tidyverse.org/tags/tidyverse/</link><atom:link href="https://www.tidyverse.org/tags/tidyverse/index.xml" rel="self" type="application/rss+xml"/><description>tidyverse</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Thu, 19 Jun 2025 00:00:00 +0000</lastBuildDate><item><title>duckplyr fully joins the tidyverse!</title><link>https://www.tidyverse.org/blog/2025/06/duckplyr-1-1-0/</link><pubDate>Thu, 19 Jun 2025 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2025/06/duckplyr-1-1-0/</guid><description>&lt;p>We&amp;rsquo;re well chuffed to announce the release of
&lt;a href="https://duckplyr.tidyverse.org" target="_blank" rel="noopener">duckplyr&lt;/a> 1.1.0. This is a dplyr backend powered by
&lt;a href="https://duckdb.org/" target="_blank" rel="noopener">DuckDB&lt;/a>, a fast in-memory analytical database system&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>. duckplyr uses the power of DuckDB for impressive performance where it can, and seemlessly falls back to R where it can&amp;rsquo;t. You can install it from CRAN with:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/utils/install.packages.html'>install.packages&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"duckplyr"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>This article shows how duckplyr can be used instead of dplyr, explain how you can help improve the package, and share a selection of further resources.&lt;/p>
&lt;h2 id="a-drop-in-replacement-for-dplyr">A drop-in replacement for dplyr
&lt;a href="#a-drop-in-replacement-for-dplyr">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Imagine you have to wrangle a huge dataset, like this one from the
&lt;a href="https://duckdb.org/2024/04/02/duckplyr.html#benchmark-tpc-h-q1" target="_blank" rel="noopener">TPC-H benchmark&lt;/a>, a famous database benchmarking dataset.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>lineitem_tbl&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>duckdb&lt;/span>&lt;span class='nf'>:::&lt;/span>&lt;span class='nf'>sql&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"INSTALL tpch; LOAD tpch; CALL dbgen(sf=1); FROM lineitem;"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>lineitem_tbl&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>tibble&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://tibble.tidyverse.org/reference/as_tibble.html'>as_tibble&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>lineitem_tbl&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nf'>dplyr&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://pillar.r-lib.org/reference/glimpse.html'>glimpse&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>lineitem_tbl&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; Rows: 6,001,215&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; Columns: 16&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; $ &lt;span style='font-weight: bold;'>l_orderkey &lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> 1&lt;span style='color: #555555;'>, &lt;/span>1&lt;span style='color: #555555;'>, &lt;/span>1&lt;span style='color: #555555;'>, &lt;/span>1&lt;span style='color: #555555;'>, &lt;/span>1&lt;span style='color: #555555;'>, &lt;/span>1&lt;span style='color: #555555;'>, &lt;/span>2&lt;span style='color: #555555;'>, &lt;/span>3&lt;span style='color: #555555;'>, &lt;/span>3&lt;span style='color: #555555;'>, &lt;/span>3&lt;span style='color: #555555;'>, &lt;/span>3&lt;span style='color: #555555;'>, &lt;/span>3&lt;span style='color: #555555;'>, &lt;/span>3&lt;span style='color: #555555;'>, &lt;/span>4&lt;span style='color: #555555;'>, &lt;/span>5&lt;span style='color: #555555;'>, &lt;/span>5&lt;span style='color: #555555;'>, &lt;/span>5&lt;span style='color: #555555;'>, &lt;/span>6&lt;span style='color: #555555;'>, &lt;/span>…&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; $ &lt;span style='font-weight: bold;'>l_partkey &lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> 155190&lt;span style='color: #555555;'>, &lt;/span>67310&lt;span style='color: #555555;'>, &lt;/span>63700&lt;span style='color: #555555;'>, &lt;/span>2132&lt;span style='color: #555555;'>, &lt;/span>24027&lt;span style='color: #555555;'>, &lt;/span>15635&lt;span style='color: #555555;'>, &lt;/span>106170&lt;span style='color: #555555;'>, &lt;/span>4297…&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; $ &lt;span style='font-weight: bold;'>l_suppkey &lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> 7706&lt;span style='color: #555555;'>, &lt;/span>7311&lt;span style='color: #555555;'>, &lt;/span>3701&lt;span style='color: #555555;'>, &lt;/span>4633&lt;span style='color: #555555;'>, &lt;/span>1534&lt;span style='color: #555555;'>, &lt;/span>638&lt;span style='color: #555555;'>, &lt;/span>1191&lt;span style='color: #555555;'>, &lt;/span>1798&lt;span style='color: #555555;'>, &lt;/span>6540&lt;span style='color: #555555;'>, &lt;/span>3…&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; $ &lt;span style='font-weight: bold;'>l_linenumber &lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> 1&lt;span style='color: #555555;'>, &lt;/span>2&lt;span style='color: #555555;'>, &lt;/span>3&lt;span style='color: #555555;'>, &lt;/span>4&lt;span style='color: #555555;'>, &lt;/span>5&lt;span style='color: #555555;'>, &lt;/span>6&lt;span style='color: #555555;'>, &lt;/span>1&lt;span style='color: #555555;'>, &lt;/span>1&lt;span style='color: #555555;'>, &lt;/span>2&lt;span style='color: #555555;'>, &lt;/span>3&lt;span style='color: #555555;'>, &lt;/span>4&lt;span style='color: #555555;'>, &lt;/span>5&lt;span style='color: #555555;'>, &lt;/span>6&lt;span style='color: #555555;'>, &lt;/span>1&lt;span style='color: #555555;'>, &lt;/span>1&lt;span style='color: #555555;'>, &lt;/span>2&lt;span style='color: #555555;'>, &lt;/span>3&lt;span style='color: #555555;'>, &lt;/span>1&lt;span style='color: #555555;'>, &lt;/span>…&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; $ &lt;span style='font-weight: bold;'>l_quantity &lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> 17&lt;span style='color: #555555;'>, &lt;/span>36&lt;span style='color: #555555;'>, &lt;/span>8&lt;span style='color: #555555;'>, &lt;/span>28&lt;span style='color: #555555;'>, &lt;/span>24&lt;span style='color: #555555;'>, &lt;/span>32&lt;span style='color: #555555;'>, &lt;/span>38&lt;span style='color: #555555;'>, &lt;/span>45&lt;span style='color: #555555;'>, &lt;/span>49&lt;span style='color: #555555;'>, &lt;/span>27&lt;span style='color: #555555;'>, &lt;/span>2&lt;span style='color: #555555;'>, &lt;/span>28&lt;span style='color: #555555;'>, &lt;/span>26&lt;span style='color: #555555;'>, &lt;/span>30&lt;span style='color: #555555;'>, &lt;/span>…&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; $ &lt;span style='font-weight: bold;'>l_extendedprice&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> 21168.23&lt;span style='color: #555555;'>, &lt;/span>45983.16&lt;span style='color: #555555;'>, &lt;/span>13309.60&lt;span style='color: #555555;'>, &lt;/span>28955.64&lt;span style='color: #555555;'>, &lt;/span>22824.48&lt;span style='color: #555555;'>, &lt;/span>4962…&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; $ &lt;span style='font-weight: bold;'>l_discount &lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> 0.04&lt;span style='color: #555555;'>, &lt;/span>0.09&lt;span style='color: #555555;'>, &lt;/span>0.10&lt;span style='color: #555555;'>, &lt;/span>0.09&lt;span style='color: #555555;'>, &lt;/span>0.10&lt;span style='color: #555555;'>, &lt;/span>0.07&lt;span style='color: #555555;'>, &lt;/span>0.00&lt;span style='color: #555555;'>, &lt;/span>0.06&lt;span style='color: #555555;'>, &lt;/span>0.10&lt;span style='color: #555555;'>, &lt;/span>…&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; $ &lt;span style='font-weight: bold;'>l_tax &lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> 0.02&lt;span style='color: #555555;'>, &lt;/span>0.06&lt;span style='color: #555555;'>, &lt;/span>0.02&lt;span style='color: #555555;'>, &lt;/span>0.06&lt;span style='color: #555555;'>, &lt;/span>0.04&lt;span style='color: #555555;'>, &lt;/span>0.02&lt;span style='color: #555555;'>, &lt;/span>0.05&lt;span style='color: #555555;'>, &lt;/span>0.00&lt;span style='color: #555555;'>, &lt;/span>0.00&lt;span style='color: #555555;'>, &lt;/span>…&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; $ &lt;span style='font-weight: bold;'>l_returnflag &lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;chr&amp;gt;&lt;/span> "N"&lt;span style='color: #555555;'>, &lt;/span>"N"&lt;span style='color: #555555;'>, &lt;/span>"N"&lt;span style='color: #555555;'>, &lt;/span>"N"&lt;span style='color: #555555;'>, &lt;/span>"N"&lt;span style='color: #555555;'>, &lt;/span>"N"&lt;span style='color: #555555;'>, &lt;/span>"N"&lt;span style='color: #555555;'>, &lt;/span>"R"&lt;span style='color: #555555;'>, &lt;/span>"R"&lt;span style='color: #555555;'>, &lt;/span>"A"&lt;span style='color: #555555;'>, &lt;/span>"A"&lt;span style='color: #555555;'>,&lt;/span>…&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; $ &lt;span style='font-weight: bold;'>l_linestatus &lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;chr&amp;gt;&lt;/span> "O"&lt;span style='color: #555555;'>, &lt;/span>"O"&lt;span style='color: #555555;'>, &lt;/span>"O"&lt;span style='color: #555555;'>, &lt;/span>"O"&lt;span style='color: #555555;'>, &lt;/span>"O"&lt;span style='color: #555555;'>, &lt;/span>"O"&lt;span style='color: #555555;'>, &lt;/span>"O"&lt;span style='color: #555555;'>, &lt;/span>"F"&lt;span style='color: #555555;'>, &lt;/span>"F"&lt;span style='color: #555555;'>, &lt;/span>"F"&lt;span style='color: #555555;'>, &lt;/span>"F"&lt;span style='color: #555555;'>,&lt;/span>…&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; $ &lt;span style='font-weight: bold;'>l_shipdate &lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;date&amp;gt;&lt;/span> 1996-03-13&lt;span style='color: #555555;'>, &lt;/span>1996-04-12&lt;span style='color: #555555;'>, &lt;/span>1996-01-29&lt;span style='color: #555555;'>, &lt;/span>1996-04-21&lt;span style='color: #555555;'>, &lt;/span>1996-…&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; $ &lt;span style='font-weight: bold;'>l_commitdate &lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;date&amp;gt;&lt;/span> 1996-02-12&lt;span style='color: #555555;'>, &lt;/span>1996-02-28&lt;span style='color: #555555;'>, &lt;/span>1996-03-05&lt;span style='color: #555555;'>, &lt;/span>1996-03-30&lt;span style='color: #555555;'>, &lt;/span>1996-…&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; $ &lt;span style='font-weight: bold;'>l_receiptdate &lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;date&amp;gt;&lt;/span> 1996-03-22&lt;span style='color: #555555;'>, &lt;/span>1996-04-20&lt;span style='color: #555555;'>, &lt;/span>1996-01-31&lt;span style='color: #555555;'>, &lt;/span>1996-05-16&lt;span style='color: #555555;'>, &lt;/span>1996-…&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; $ &lt;span style='font-weight: bold;'>l_shipinstruct &lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;chr&amp;gt;&lt;/span> "DELIVER IN PERSON"&lt;span style='color: #555555;'>, &lt;/span>"TAKE BACK RETURN"&lt;span style='color: #555555;'>, &lt;/span>"TAKE BACK RE…&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; $ &lt;span style='font-weight: bold;'>l_shipmode &lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;chr&amp;gt;&lt;/span> "TRUCK"&lt;span style='color: #555555;'>, &lt;/span>"MAIL"&lt;span style='color: #555555;'>, &lt;/span>"REG AIR"&lt;span style='color: #555555;'>, &lt;/span>"AIR"&lt;span style='color: #555555;'>, &lt;/span>"FOB"&lt;span style='color: #555555;'>, &lt;/span>"MAIL"&lt;span style='color: #555555;'>, &lt;/span>"RAI…&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; $ &lt;span style='font-weight: bold;'>l_comment &lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;chr&amp;gt;&lt;/span> "to beans x-ray carefull"&lt;span style='color: #555555;'>, &lt;/span>" according to the final fo…&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>To work with this in duckplyr instead of dplyr, all you need to do is load duckplyr:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://duckplyr.tidyverse.org'>duckplyr&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; Loading required package: dplyr&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;span class='c'>#&amp;gt; The &lt;span style='color: #0000BB;'>duckplyr&lt;/span> package is configured to fall back to &lt;span style='color: #0000BB;'>dplyr&lt;/span> when it encounters an incompatibility.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; Fallback events can be collected and uploaded for analysis to guide future development. By&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; default, data will be collected but no data will be uploaded.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BBBB;'>ℹ&lt;/span> Automatic fallback uploading is not controlled and therefore disabled, see&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; `?duckplyr::fallback()`.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BB00;'>✔&lt;/span> Number of reports ready for upload: &lt;span style='font-weight: bold;'>4&lt;/span>.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; → Review with `duckplyr::fallback_review()`, upload with `duckplyr::fallback_upload()`.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BBBB;'>ℹ&lt;/span> &lt;span style='color: #555555;'>Configure automatic uploading with `duckplyr::fallback_config()`.&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BB00;'>✔&lt;/span> Overwriting &lt;span style='color: #0000BB;'>dplyr&lt;/span> methods with &lt;span style='color: #0000BB;'>duckplyr&lt;/span> methods.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BBBB;'>ℹ&lt;/span> Turn off with `duckplyr::methods_restore()`.&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>Now we can express the well-known (at least in the database community!) &amp;ldquo;TPC-H benchmark query 1&amp;rdquo; in dplyr syntax and execute it in DuckDB via duckplyr.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>tpch_dplyr&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='kr'>function&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>lineitem&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&amp;#123;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nv'>lineitem&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/filter.html'>filter&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>l_shipdate&lt;/span> &lt;span class='o'>&amp;lt;=&lt;/span> &lt;span class='o'>!&lt;/span>&lt;span class='o'>!&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/as.Date.html'>as.Date&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"1998-09-02"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> sum_qty &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/sum.html'>sum&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>l_quantity&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> sum_base_price &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/sum.html'>sum&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>l_extendedprice&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> sum_disc_price &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/sum.html'>sum&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>l_extendedprice&lt;/span> &lt;span class='o'>*&lt;/span> &lt;span class='o'>(&lt;/span>&lt;span class='m'>1&lt;/span> &lt;span class='o'>-&lt;/span> &lt;span class='nv'>l_discount&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> sum_charge &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/sum.html'>sum&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>l_extendedprice&lt;/span> &lt;span class='o'>*&lt;/span> &lt;span class='o'>(&lt;/span>&lt;span class='m'>1&lt;/span> &lt;span class='o'>-&lt;/span> &lt;span class='nv'>l_discount&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>*&lt;/span> &lt;span class='o'>(&lt;/span>&lt;span class='m'>1&lt;/span> &lt;span class='o'>+&lt;/span> &lt;span class='nv'>l_tax&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> avg_qty &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/mean.html'>mean&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>l_quantity&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> avg_price &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/mean.html'>mean&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>l_extendedprice&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> avg_disc &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/mean.html'>mean&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>l_discount&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> count_order &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/context.html'>n&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> .by &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>l_returnflag&lt;/span>, &lt;span class='nv'>l_linestatus&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/arrange.html'>arrange&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>l_returnflag&lt;/span>, &lt;span class='nv'>l_linestatus&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='o'>&amp;#125;&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nf'>tpch_dplyr&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>lineitem_tbl&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 4 × 10&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='font-weight: bold;'>l_returnflag&lt;/span> &lt;span style='font-weight: bold;'>l_linestatus&lt;/span> &lt;span style='font-weight: bold;'>sum_qty&lt;/span> &lt;span style='font-weight: bold;'>sum_base_price&lt;/span> &lt;span style='font-weight: bold;'>sum_disc_price&lt;/span> &lt;span style='font-weight: bold;'>sum_charge&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;chr&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;chr&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>1&lt;/span> A F 37&lt;span style='text-decoration: underline;'>734&lt;/span>107 &lt;span style='text-decoration: underline;'>56&lt;/span>586&lt;span style='text-decoration: underline;'>554&lt;/span>401. &lt;span style='text-decoration: underline;'>53&lt;/span>758&lt;span style='text-decoration: underline;'>257&lt;/span>135. &lt;span style='text-decoration: underline;'>55&lt;/span>909&lt;span style='text-decoration: underline;'>065&lt;/span>223.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>2&lt;/span> N F &lt;span style='text-decoration: underline;'>991&lt;/span>417 &lt;span style='text-decoration: underline;'>1&lt;/span>487&lt;span style='text-decoration: underline;'>504&lt;/span>710. &lt;span style='text-decoration: underline;'>1&lt;/span>413&lt;span style='text-decoration: underline;'>082&lt;/span>168. &lt;span style='text-decoration: underline;'>1&lt;/span>469&lt;span style='text-decoration: underline;'>649&lt;/span>223.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>3&lt;/span> N O 74&lt;span style='text-decoration: underline;'>476&lt;/span>040 &lt;span style='text-decoration: underline;'>111&lt;/span>701&lt;span style='text-decoration: underline;'>729&lt;/span>698. &lt;span style='text-decoration: underline;'>106&lt;/span>118&lt;span style='text-decoration: underline;'>230&lt;/span>308. &lt;span style='text-decoration: underline;'>110&lt;/span>367&lt;span style='text-decoration: underline;'>043&lt;/span>872.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>4&lt;/span> R F 37&lt;span style='text-decoration: underline;'>719&lt;/span>753 &lt;span style='text-decoration: underline;'>56&lt;/span>568&lt;span style='text-decoration: underline;'>041&lt;/span>381. &lt;span style='text-decoration: underline;'>53&lt;/span>741&lt;span style='text-decoration: underline;'>292&lt;/span>685. &lt;span style='text-decoration: underline;'>55&lt;/span>889&lt;span style='text-decoration: underline;'>619&lt;/span>120.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># ℹ 4 more variables: &lt;/span>&lt;span style='color: #555555; font-weight: bold;'>avg_qty&lt;/span>&lt;span style='color: #555555;'> &amp;lt;dbl&amp;gt;, &lt;/span>&lt;span style='color: #555555; font-weight: bold;'>avg_price&lt;/span>&lt;span style='color: #555555;'> &amp;lt;dbl&amp;gt;, &lt;/span>&lt;span style='color: #555555; font-weight: bold;'>avg_disc&lt;/span>&lt;span style='color: #555555;'> &amp;lt;dbl&amp;gt;,&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># &lt;/span>&lt;span style='color: #555555; font-weight: bold;'>count_order&lt;/span>&lt;span style='color: #555555;'> &amp;lt;int&amp;gt;&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>Like other dplyr backends such as dtplyr and dbplyr, duckplyr gives you higher performance without learning a different syntax. Unlike other dplyr backends, duckplyr does not require you to change existing code or learn specific idiosyncrasies. Not only is the syntax the same, the semantics are too! If an operation cannot be carried out with DuckDB, it is automatically outsourced to dplyr. Over time, we expect fewer and fewer fallbacks to dplyr to be needed.&lt;/p>
&lt;h2 id="how-to-use-duckplyr">How to use duckplyr
&lt;a href="#how-to-use-duckplyr">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>There are two ways to use duckplyr:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>As above, you can
&lt;a href="https://duckplyr.tidyverse.org" target="_blank" rel="noopener">&lt;code>library(duckplyr)&lt;/code>&lt;/a>, and replace all existing dplyr methods. This is safe because duckplyr is guaranteed to give the exactly same the results as dplyr, unlike other backends.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Create individual &amp;ldquo;duck frames&amp;rdquo; using &lt;em>conversion functions&lt;/em> like &lt;code>duckdplyr::duckdb_tibble()&lt;/code> or &lt;code>duckdplyr::as_duckdb_tibble()&lt;/code>, or &lt;em>ingestion functions&lt;/em> like &lt;code>duckdplyr::read_csv_duckdb()&lt;/code>.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>Here&amp;rsquo;s an example of the second form:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>out&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nv'>lineitem_tbl&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>duckplyr&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://duckplyr.tidyverse.org/reference/duckdb_tibble.html'>as_duckdb_tibble&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>tpch_dplyr&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>out&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A duckplyr data frame: 10 variables&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='font-weight: bold;'>l_returnflag&lt;/span> &lt;span style='font-weight: bold;'>l_linestatus&lt;/span> &lt;span style='font-weight: bold;'>sum_qty&lt;/span> &lt;span style='font-weight: bold;'>sum_base_price&lt;/span> &lt;span style='font-weight: bold;'>sum_disc_price&lt;/span> &lt;span style='font-weight: bold;'>sum_charge&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;chr&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;chr&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>1&lt;/span> A F 37&lt;span style='text-decoration: underline;'>734&lt;/span>107 &lt;span style='text-decoration: underline;'>56&lt;/span>586&lt;span style='text-decoration: underline;'>554&lt;/span>401. &lt;span style='text-decoration: underline;'>53&lt;/span>758&lt;span style='text-decoration: underline;'>257&lt;/span>135. &lt;span style='text-decoration: underline;'>55&lt;/span>909&lt;span style='text-decoration: underline;'>065&lt;/span>223.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>2&lt;/span> N F &lt;span style='text-decoration: underline;'>991&lt;/span>417 &lt;span style='text-decoration: underline;'>1&lt;/span>487&lt;span style='text-decoration: underline;'>504&lt;/span>710. &lt;span style='text-decoration: underline;'>1&lt;/span>413&lt;span style='text-decoration: underline;'>082&lt;/span>168. &lt;span style='text-decoration: underline;'>1&lt;/span>469&lt;span style='text-decoration: underline;'>649&lt;/span>223.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>3&lt;/span> N O 74&lt;span style='text-decoration: underline;'>476&lt;/span>040 &lt;span style='text-decoration: underline;'>111&lt;/span>701&lt;span style='text-decoration: underline;'>729&lt;/span>698. &lt;span style='text-decoration: underline;'>106&lt;/span>118&lt;span style='text-decoration: underline;'>230&lt;/span>308. &lt;span style='text-decoration: underline;'>110&lt;/span>367&lt;span style='text-decoration: underline;'>043&lt;/span>872.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>4&lt;/span> R F 37&lt;span style='text-decoration: underline;'>719&lt;/span>753 &lt;span style='text-decoration: underline;'>56&lt;/span>568&lt;span style='text-decoration: underline;'>041&lt;/span>381. &lt;span style='text-decoration: underline;'>53&lt;/span>741&lt;span style='text-decoration: underline;'>292&lt;/span>685. &lt;span style='text-decoration: underline;'>55&lt;/span>889&lt;span style='text-decoration: underline;'>619&lt;/span>120.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># ℹ 4 more variables: &lt;/span>&lt;span style='color: #555555; font-weight: bold;'>avg_qty&lt;/span>&lt;span style='color: #555555;'> &amp;lt;dbl&amp;gt;, &lt;/span>&lt;span style='color: #555555; font-weight: bold;'>avg_price&lt;/span>&lt;span style='color: #555555;'> &amp;lt;dbl&amp;gt;, &lt;/span>&lt;span style='color: #555555; font-weight: bold;'>avg_disc&lt;/span>&lt;span style='color: #555555;'> &amp;lt;dbl&amp;gt;,&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># &lt;/span>&lt;span style='color: #555555; font-weight: bold;'>count_order&lt;/span>&lt;span style='color: #555555;'> &amp;lt;int&amp;gt;&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>Note that the resulting object is indistinguishable from a regular tibble, except for the additional class.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/typeof.html'>typeof&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>out&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; [1] "list"&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/class.html'>class&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>out&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; [1] "duckplyr_df" "tbl_df" "tbl" "data.frame"&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;span class='nv'>out&lt;/span>&lt;span class='o'>$&lt;/span>&lt;span class='nv'>count_order&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; [1] 1478493 38854 2920374 1478870&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>Operations not yet supported by duckplyr are automatically outsourced to dplyr. For instance, filtering on grouped data is not supported, but it still works thanks to the fallback mechanism. By default, the fallback is silent, but you can make it visible by setting an environment variable. This is useful if you want to better understanding what&amp;rsquo;s making your code slow.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/Sys.setenv.html'>Sys.setenv&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>DUCKPLYR_FALLBACK_INFO &lt;span class='o'>=&lt;/span> &lt;span class='kc'>TRUE&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>lineitem_tbl&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>duckplyr&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://duckplyr.tidyverse.org/reference/duckdb_tibble.html'>as_duckdb_tibble&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/filter.html'>filter&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>l_quantity&lt;/span> &lt;span class='o'>==&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/Extremes.html'>max&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>l_quantity&lt;/span>&lt;span class='o'>)&lt;/span>, .by &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>l_returnflag&lt;/span>, &lt;span class='nv'>l_linestatus&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; Cannot process duckplyr query with DuckDB, falling back to dplyr.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>ℹ&lt;/span> `filter(.by = ...)` not implemented, try `mutate(.by = ...)` followed by a simple `filter()`.&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A duckplyr data frame: 16 variables&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='font-weight: bold;'>l_orderkey&lt;/span> &lt;span style='font-weight: bold;'>l_partkey&lt;/span> &lt;span style='font-weight: bold;'>l_suppkey&lt;/span> &lt;span style='font-weight: bold;'>l_linenumber&lt;/span> &lt;span style='font-weight: bold;'>l_quantity&lt;/span> &lt;span style='font-weight: bold;'>l_extendedprice&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 1&lt;/span> 5 &lt;span style='text-decoration: underline;'>37&lt;/span>531 35 3 50 &lt;span style='text-decoration: underline;'>73&lt;/span>426.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 2&lt;/span> 131 &lt;span style='text-decoration: underline;'>44&lt;/span>255 &lt;span style='text-decoration: underline;'>9&lt;/span>264 2 50 &lt;span style='text-decoration: underline;'>59&lt;/span>962.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 3&lt;/span> 199 &lt;span style='text-decoration: underline;'>132&lt;/span>072 &lt;span style='text-decoration: underline;'>9&lt;/span>612 1 50 &lt;span style='text-decoration: underline;'>55&lt;/span>204.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 4&lt;/span> 231 &lt;span style='text-decoration: underline;'>198&lt;/span>124 644 3 50 &lt;span style='text-decoration: underline;'>61&lt;/span>106 &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 5&lt;/span> 260 &lt;span style='text-decoration: underline;'>155&lt;/span>887 &lt;span style='text-decoration: underline;'>5&lt;/span>888 1 50 &lt;span style='text-decoration: underline;'>97&lt;/span>144 &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 6&lt;/span> 263 &lt;span style='text-decoration: underline;'>142&lt;/span>891 434 3 50 &lt;span style='text-decoration: underline;'>96&lt;/span>694.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 7&lt;/span> 323 &lt;span style='text-decoration: underline;'>163&lt;/span>628 &lt;span style='text-decoration: underline;'>1&lt;/span>177 1 50 &lt;span style='text-decoration: underline;'>84&lt;/span>581 &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 8&lt;/span> 354 &lt;span style='text-decoration: underline;'>58&lt;/span>125 &lt;span style='text-decoration: underline;'>8&lt;/span>126 3 50 &lt;span style='text-decoration: underline;'>54&lt;/span>156 &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 9&lt;/span> 484 &lt;span style='text-decoration: underline;'>183&lt;/span>351 &lt;span style='text-decoration: underline;'>5&lt;/span>870 3 50 &lt;span style='text-decoration: underline;'>71&lt;/span>718.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>10&lt;/span> 485 &lt;span style='text-decoration: underline;'>149&lt;/span>523 &lt;span style='text-decoration: underline;'>9&lt;/span>524 1 50 &lt;span style='text-decoration: underline;'>78&lt;/span>626 &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># ℹ more rows&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># ℹ 10 more variables: &lt;/span>&lt;span style='color: #555555; font-weight: bold;'>l_discount&lt;/span>&lt;span style='color: #555555;'> &amp;lt;dbl&amp;gt;, &lt;/span>&lt;span style='color: #555555; font-weight: bold;'>l_tax&lt;/span>&lt;span style='color: #555555;'> &amp;lt;dbl&amp;gt;, &lt;/span>&lt;span style='color: #555555; font-weight: bold;'>l_returnflag&lt;/span>&lt;span style='color: #555555;'> &amp;lt;chr&amp;gt;,&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># &lt;/span>&lt;span style='color: #555555; font-weight: bold;'>l_linestatus&lt;/span>&lt;span style='color: #555555;'> &amp;lt;chr&amp;gt;, &lt;/span>&lt;span style='color: #555555; font-weight: bold;'>l_shipdate&lt;/span>&lt;span style='color: #555555;'> &amp;lt;date&amp;gt;, &lt;/span>&lt;span style='color: #555555; font-weight: bold;'>l_commitdate&lt;/span>&lt;span style='color: #555555;'> &amp;lt;date&amp;gt;,&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># &lt;/span>&lt;span style='color: #555555; font-weight: bold;'>l_receiptdate&lt;/span>&lt;span style='color: #555555;'> &amp;lt;date&amp;gt;, &lt;/span>&lt;span style='color: #555555; font-weight: bold;'>l_shipinstruct&lt;/span>&lt;span style='color: #555555;'> &amp;lt;chr&amp;gt;, &lt;/span>&lt;span style='color: #555555; font-weight: bold;'>l_shipmode&lt;/span>&lt;span style='color: #555555;'> &amp;lt;chr&amp;gt;,&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># &lt;/span>&lt;span style='color: #555555; font-weight: bold;'>l_comment&lt;/span>&lt;span style='color: #555555;'> &amp;lt;chr&amp;gt;&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>You can also directly use DuckDB functions with the &lt;code>dd$&lt;/code> qualifier. Functions with this prefix will not be translated at all and passed through directly to DuckDB. For example, the following code uses DuckDB&amp;rsquo;s internal implementation of
&lt;a href="https://duckdb.org/docs/stable/sql/functions/text.html#editdist3s1-s2" target="_blank" rel="noopener">Levenstein distance&lt;/a>:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://tibble.tidyverse.org/reference/tibble.html'>tibble&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>a &lt;span class='o'>=&lt;/span> &lt;span class='s'>"dbplyr"&lt;/span>, b &lt;span class='o'>=&lt;/span> &lt;span class='s'>"duckplyr"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>c &lt;span class='o'>=&lt;/span> &lt;span class='nv'>dd&lt;/span>&lt;span class='o'>$&lt;/span>&lt;span class='nf'>levenshtein&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>a&lt;/span>, &lt;span class='nv'>b&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 1 × 3&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='font-weight: bold;'>a&lt;/span> &lt;span style='font-weight: bold;'>b&lt;/span> &lt;span style='font-weight: bold;'>c&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;chr&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;chr&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>1&lt;/span> dbplyr duckplyr 3&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>See
&lt;a href="https://duckplyr.tidyverse.org/articles/duckdb.html" target="_blank" rel="noopener">&lt;code>vignette(&amp;quot;duckdb&amp;quot;)&lt;/code>&lt;/a> for more information on these features.&lt;/p>
&lt;p>If you&amp;rsquo;re working with dbplyr too, you can use
&lt;a href="https://duckplyr.tidyverse.org/reference/as_tbl.html" target="_blank" rel="noopener">&lt;code>as_tbl()&lt;/code>&lt;/a> you to convert a duckplyr tibble to a dbplyr lazy table. This allows you to seamlessly interact with existing code that might use inline SQL or other dbplyr functionality. With
&lt;a href="https://duckplyr.tidyverse.org/reference/duckdb_tibble.html" target="_blank" rel="noopener">&lt;code>as_duckdb_tibble()&lt;/code>&lt;/a>, you can convert a dbplyr lazy table to a duckplyr tibble. Both operations work without intermediate materialization.&lt;/p>
&lt;h2 id="benchmark">Benchmark
&lt;a href="#benchmark">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>duckplyr is often much faster than dplyr. The comparison below is done in a fresh R session where dplyr is attached but duckplyr is not.&lt;/p>
&lt;p>We use &lt;code>tpch_dplyr()&lt;/code> as defined above to run the query with dplyr. The function that runs it with duckplyr only wraps the input data in a duck frame and forwards it to the dplyr function. The
&lt;a href="https://dplyr.tidyverse.org/reference/compute.html" target="_blank" rel="noopener">&lt;code>collect()&lt;/code>&lt;/a> at the end is required only for this benchmark to ensure fairness.&lt;sup id="fnref:2">&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref">2&lt;/a>&lt;/sup>&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>tpch_duckplyr&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='kr'>function&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>lineitem&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&amp;#123;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nv'>lineitem&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>duckplyr&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://duckplyr.tidyverse.org/reference/duckdb_tibble.html'>as_duckdb_tibble&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>tpch_dplyr&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/compute.html'>collect&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='o'>&amp;#125;&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>And now we compare the two:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>bench&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://bench.r-lib.org/reference/mark.html'>mark&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>tpch_dplyr&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>lineitem_tbl&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> &lt;span class='nf'>tpch_duckplyr&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>lineitem_tbl&lt;/span>&lt;span class='o'>)&lt;/span>,&lt;/span>
&lt;span> check &lt;span class='o'>=&lt;/span> &lt;span class='o'>~&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/all.equal.html'>all.equal&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>.x&lt;/span>, &lt;span class='nv'>.y&lt;/span>, tolerance &lt;span class='o'>=&lt;/span> &lt;span class='m'>1e-10&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; Warning: Some expressions had a GC in every iteration; so filtering is disabled.&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 2 × 6&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='font-weight: bold;'>expression&lt;/span> &lt;span style='font-weight: bold;'>min&lt;/span> &lt;span style='font-weight: bold;'>median&lt;/span> &lt;span style='font-weight: bold;'>`itr/sec`&lt;/span> &lt;span style='font-weight: bold;'>mem_alloc&lt;/span> &lt;span style='font-weight: bold;'>`gc/sec`&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;bch:expr&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;bch:tm&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;bch:tm&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;bch:byt&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>1&lt;/span> tpch_dplyr(lineitem_tbl) 611.6ms 611.6ms 1.64 1.25GB 1.64&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>2&lt;/span> tpch_duckplyr(lineitem_tbl) 71.4ms 72.3ms 13.8 314.38KB 0&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>In this example, duckplyr is a lot faster than dplyr. It also appears to use much less memory, but this is misleading: DuckDB manages the memory, not R, so the memory usage is not visible to
&lt;a href="https://bench.r-lib.org/reference/mark.html" target="_blank" rel="noopener">&lt;code>bench::mark()&lt;/code>&lt;/a>.&lt;/p>
&lt;h2 id="out-of-memory-data">Out-of-memory data
&lt;a href="#out-of-memory-data">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>As well as improved speed with in-memory datasets, duckplyr makes it easy to work with datasets that are too big to fit in memory. In this case, you want:&lt;/p>
&lt;ol>
&lt;li>To work with data stored in modern formats designed for large data (e.g. Parquet).&lt;/li>
&lt;li>To be able to store large intermediate results on disk, keeping them out of memory.&lt;/li>
&lt;li>Fast computation!&lt;/li>
&lt;/ol>
&lt;p>duckdplyr provides each of these features:&lt;/p>
&lt;ol>
&lt;li>You can read data from disk with functions like
&lt;a href="https://duckplyr.tidyverse.org/reference/read_parquet_duckdb.html" target="_blank" rel="noopener">&lt;code>read_parquet_duckdb()&lt;/code>&lt;/a>.&lt;/li>
&lt;li>You can save intermediate results to disk with
&lt;a href="https://duckplyr.tidyverse.org/reference/compute_parquet.html" target="_blank" rel="noopener">&lt;code>compute_parquet()&lt;/code>&lt;/a> and
&lt;a href="https://duckplyr.tidyverse.org/reference/compute_csv.html" target="_blank" rel="noopener">&lt;code>compute_csv()&lt;/code>&lt;/a>.&lt;/li>
&lt;li>duckdplyr takes advantage of DuckDB&amp;rsquo;s query planner which considers your entire pipeline holistically to figure out the most efficient way to get the data you need.&lt;/li>
&lt;/ol>
&lt;p>See
&lt;a href="https://duckplyr.tidyverse.org/articles/large.html" target="_blank" rel="noopener">&lt;code>vignette(&amp;quot;large&amp;quot;)&lt;/code>&lt;/a> for a walkthrough and more details.&lt;/p>
&lt;h2 id="help-us-improve-duckplyr">Help us improve duckplyr!
&lt;a href="#help-us-improve-duckplyr">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Our goals for future development of duckplyr include:&lt;/p>
&lt;ul>
&lt;li>Enabling users to provide
&lt;a href="https://github.com/tidyverse/duckplyr/issues/158" target="_blank" rel="noopener">custom translations&lt;/a> of dplyr functionality;&lt;/li>
&lt;li>Making it easier to contribute code to duckplyr;&lt;/li>
&lt;li>Supporting more dplyr and tidyr functionality natively in DuckDB.&lt;/li>
&lt;/ul>
&lt;p>You can help!&lt;/p>
&lt;ul>
&lt;li>Please report any issues, especially regarding unknown incompabilities. See
&lt;a href="https://duckplyr.tidyverse.org/articles/limits.html" target="_blank" rel="noopener">&lt;code>vignette(&amp;quot;limits&amp;quot;)&lt;/code>&lt;/a>.&lt;/li>
&lt;li>Contribute to the codebase after reading duckplyr&amp;rsquo;s
&lt;a href="https://duckplyr.tidyverse.org/CONTRIBUTING.html" target="_blank" rel="noopener">contributing guide&lt;/a>.&lt;/li>
&lt;li>Turn on telemetry to help us hear about the most frequent fallbacks so we can prioritize working on the corresponding missing dplyr translation. See
&lt;a href="https://duckplyr.tidyverse.org/articles/telemetry.html" target="_blank" rel="noopener">&lt;code>vignette(&amp;quot;telemetry&amp;quot;)&lt;/code>&lt;/a> and
&lt;a href="https://duckplyr.tidyverse.org/reference/fallback.html" target="_blank" rel="noopener">&lt;code>duckplyr::fallback_sitrep()&lt;/code>&lt;/a>.&lt;/li>
&lt;/ul>
&lt;h2 id="additional-resources">Additional resources
&lt;a href="#additional-resources">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Eager to learn more about duckplyr &amp;ndash; beside by trying it out yourself? The duckplyr website features several
&lt;a href="https://duckplyr.tidyverse.org/articles/" target="_blank" rel="noopener">articles&lt;/a>. Furthermore, the blog post
&lt;a href="https://duckdb.org/2024/04/02/duckplyr.html" target="_blank" rel="noopener">&amp;ldquo;duckplyr: dplyr Powered by DuckDB&amp;rdquo;&lt;/a> by Hannes Mühleisen provides some context on duckplyr including its inner workings, as also seen in a
&lt;a href="https://blog.r-hub.io/2025/02/13/lazy-meanings/#duckplyr-lazy-evaluation-and-prudence" target="_blank" rel="noopener">section&lt;/a> of the R-hub blog post
&lt;a href="https://blog.r-hub.io/2025/02/13/lazy-meanings/" target="_blank" rel="noopener">&amp;ldquo;Lazy introduction to laziness in R&amp;rdquo;&lt;/a> by Maëlle Salmon, Athanasia Mo Mowinckel and Hannah Frick.&lt;/p>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>A big thanks to all folks who filed issues, created PRs and generally helped to improve duckplyr and its workhorse
&lt;a href="https://r.duckdb.org/" target="_blank" rel="noopener">duckdb&lt;/a>!&lt;/p>
&lt;p>
&lt;a href="https://github.com/adamschwing" target="_blank" rel="noopener">@adamschwing&lt;/a>,
&lt;a href="https://github.com/alejandrohagan" target="_blank" rel="noopener">@alejandrohagan&lt;/a>,
&lt;a href="https://github.com/andreranza" target="_blank" rel="noopener">@andreranza&lt;/a>,
&lt;a href="https://github.com/apalacio9502" target="_blank" rel="noopener">@apalacio9502&lt;/a>,
&lt;a href="https://github.com/apsteinmetz" target="_blank" rel="noopener">@apsteinmetz&lt;/a>,
&lt;a href="https://github.com/barracuda156" target="_blank" rel="noopener">@barracuda156&lt;/a>,
&lt;a href="https://github.com/beniaminogreen" target="_blank" rel="noopener">@beniaminogreen&lt;/a>,
&lt;a href="https://github.com/bob-rietveld" target="_blank" rel="noopener">@bob-rietveld&lt;/a>,
&lt;a href="https://github.com/brichards920" target="_blank" rel="noopener">@brichards920&lt;/a>,
&lt;a href="https://github.com/cboettig" target="_blank" rel="noopener">@cboettig&lt;/a>,
&lt;a href="https://github.com/davidjayjackson" target="_blank" rel="noopener">@davidjayjackson&lt;/a>,
&lt;a href="https://github.com/DavisVaughan" target="_blank" rel="noopener">@DavisVaughan&lt;/a>,
&lt;a href="https://github.com/Ed2uiz" target="_blank" rel="noopener">@Ed2uiz&lt;/a>,
&lt;a href="https://github.com/eitsupi" target="_blank" rel="noopener">@eitsupi&lt;/a>,
&lt;a href="https://github.com/era127" target="_blank" rel="noopener">@era127&lt;/a>,
&lt;a href="https://github.com/etiennebacher" target="_blank" rel="noopener">@etiennebacher&lt;/a>,
&lt;a href="https://github.com/eutwt" target="_blank" rel="noopener">@eutwt&lt;/a>,
&lt;a href="https://github.com/fmichonneau" target="_blank" rel="noopener">@fmichonneau&lt;/a>,
&lt;a href="https://github.com/hadley" target="_blank" rel="noopener">@hadley&lt;/a>,
&lt;a href="https://github.com/hannes" target="_blank" rel="noopener">@hannes&lt;/a>,
&lt;a href="https://github.com/hawkfish" target="_blank" rel="noopener">@hawkfish&lt;/a>,
&lt;a href="https://github.com/IndrajeetPatil" target="_blank" rel="noopener">@IndrajeetPatil&lt;/a>,
&lt;a href="https://github.com/JanSulavik" target="_blank" rel="noopener">@JanSulavik&lt;/a>,
&lt;a href="https://github.com/JavOrraca" target="_blank" rel="noopener">@JavOrraca&lt;/a>,
&lt;a href="https://github.com/jeroen" target="_blank" rel="noopener">@jeroen&lt;/a>,
&lt;a href="https://github.com/jhk0530" target="_blank" rel="noopener">@jhk0530&lt;/a>,
&lt;a href="https://github.com/joakimlinde" target="_blank" rel="noopener">@joakimlinde&lt;/a>,
&lt;a href="https://github.com/JosiahParry" target="_blank" rel="noopener">@JosiahParry&lt;/a>,
&lt;a href="https://github.com/kevbaer" target="_blank" rel="noopener">@kevbaer&lt;/a>,
&lt;a href="https://github.com/larry77" target="_blank" rel="noopener">@larry77&lt;/a>,
&lt;a href="https://github.com/lnkuiper" target="_blank" rel="noopener">@lnkuiper&lt;/a>,
&lt;a href="https://github.com/lorenzwalthert" target="_blank" rel="noopener">@lorenzwalthert&lt;/a>,
&lt;a href="https://github.com/lschneiderbauer" target="_blank" rel="noopener">@lschneiderbauer&lt;/a>,
&lt;a href="https://github.com/luisDVA" target="_blank" rel="noopener">@luisDVA&lt;/a>,
&lt;a href="https://github.com/math-mcshane" target="_blank" rel="noopener">@math-mcshane&lt;/a>,
&lt;a href="https://github.com/meersel" target="_blank" rel="noopener">@meersel&lt;/a>,
&lt;a href="https://github.com/multimeric" target="_blank" rel="noopener">@multimeric&lt;/a>,
&lt;a href="https://github.com/mytarmail" target="_blank" rel="noopener">@mytarmail&lt;/a>,
&lt;a href="https://github.com/nicki-dese" target="_blank" rel="noopener">@nicki-dese&lt;/a>,
&lt;a href="https://github.com/PMassicotte" target="_blank" rel="noopener">@PMassicotte&lt;/a>,
&lt;a href="https://github.com/prasundutta87" target="_blank" rel="noopener">@prasundutta87&lt;/a>,
&lt;a href="https://github.com/rafapereirabr" target="_blank" rel="noopener">@rafapereirabr&lt;/a>,
&lt;a href="https://github.com/Robinlovelace" target="_blank" rel="noopener">@Robinlovelace&lt;/a>,
&lt;a href="https://github.com/romainfrancois" target="_blank" rel="noopener">@romainfrancois&lt;/a>,
&lt;a href="https://github.com/sparrow925" target="_blank" rel="noopener">@sparrow925&lt;/a>,
&lt;a href="https://github.com/stefanlinner" target="_blank" rel="noopener">@stefanlinner&lt;/a>,
&lt;a href="https://github.com/szarnyasg" target="_blank" rel="noopener">@szarnyasg&lt;/a>,
&lt;a href="https://github.com/thomasp85" target="_blank" rel="noopener">@thomasp85&lt;/a>,
&lt;a href="https://github.com/TimTaylor" target="_blank" rel="noopener">@TimTaylor&lt;/a>,
&lt;a href="https://github.com/Tmonster" target="_blank" rel="noopener">@Tmonster&lt;/a>,
&lt;a href="https://github.com/toppyy" target="_blank" rel="noopener">@toppyy&lt;/a>,
&lt;a href="https://github.com/wibeasley" target="_blank" rel="noopener">@wibeasley&lt;/a>,
&lt;a href="https://github.com/yjunechoe" target="_blank" rel="noopener">@yjunechoe&lt;/a>,
&lt;a href="https://github.com/ywhcuhk" target="_blank" rel="noopener">@ywhcuhk&lt;/a>,
&lt;a href="https://github.com/zhjx19" target="_blank" rel="noopener">@zhjx19&lt;/a>,
&lt;a href="https://github.com/ablack3" target="_blank" rel="noopener">@ablack3&lt;/a>,
&lt;a href="https://github.com/actuarial-lonewolf" target="_blank" rel="noopener">@actuarial-lonewolf&lt;/a>,
&lt;a href="https://github.com/ajdamico" target="_blank" rel="noopener">@ajdamico&lt;/a>,
&lt;a href="https://github.com/amirmazmi" target="_blank" rel="noopener">@amirmazmi&lt;/a>,
&lt;a href="https://github.com/anderson461123" target="_blank" rel="noopener">@anderson461123&lt;/a>,
&lt;a href="https://github.com/andrewGhazi" target="_blank" rel="noopener">@andrewGhazi&lt;/a>,
&lt;a href="https://github.com/Antonov548" target="_blank" rel="noopener">@Antonov548&lt;/a>,
&lt;a href="https://github.com/appiehappie999" target="_blank" rel="noopener">@appiehappie999&lt;/a>,
&lt;a href="https://github.com/ArthurAndrews" target="_blank" rel="noopener">@ArthurAndrews&lt;/a>,
&lt;a href="https://github.com/arthurgailes" target="_blank" rel="noopener">@arthurgailes&lt;/a>,
&lt;a href="https://github.com/babaknaimi" target="_blank" rel="noopener">@babaknaimi&lt;/a>,
&lt;a href="https://github.com/bcaradima" target="_blank" rel="noopener">@bcaradima&lt;/a>,
&lt;a href="https://github.com/bdforbes" target="_blank" rel="noopener">@bdforbes&lt;/a>,
&lt;a href="https://github.com/bergest" target="_blank" rel="noopener">@bergest&lt;/a>,
&lt;a href="https://github.com/bill-ash" target="_blank" rel="noopener">@bill-ash&lt;/a>,
&lt;a href="https://github.com/BorgeJorge" target="_blank" rel="noopener">@BorgeJorge&lt;/a>,
&lt;a href="https://github.com/brianmsm" target="_blank" rel="noopener">@brianmsm&lt;/a>,
&lt;a href="https://github.com/chainsawriot" target="_blank" rel="noopener">@chainsawriot&lt;/a>,
&lt;a href="https://github.com/ckarnes" target="_blank" rel="noopener">@ckarnes&lt;/a>,
&lt;a href="https://github.com/clementlefevre" target="_blank" rel="noopener">@clementlefevre&lt;/a>,
&lt;a href="https://github.com/cregouby" target="_blank" rel="noopener">@cregouby&lt;/a>,
&lt;a href="https://github.com/cy-james-lee" target="_blank" rel="noopener">@cy-james-lee&lt;/a>,
&lt;a href="https://github.com/daranzolin" target="_blank" rel="noopener">@daranzolin&lt;/a>,
&lt;a href="https://github.com/david-cortes" target="_blank" rel="noopener">@david-cortes&lt;/a>,
&lt;a href="https://github.com/DavZim" target="_blank" rel="noopener">@DavZim&lt;/a>,
&lt;a href="https://github.com/denis-or" target="_blank" rel="noopener">@denis-or&lt;/a>,
&lt;a href="https://github.com/developertest1234" target="_blank" rel="noopener">@developertest1234&lt;/a>,
&lt;a href="https://github.com/dicorynia" target="_blank" rel="noopener">@dicorynia&lt;/a>,
&lt;a href="https://github.com/dsolito" target="_blank" rel="noopener">@dsolito&lt;/a>,
&lt;a href="https://github.com/e-kotov" target="_blank" rel="noopener">@e-kotov&lt;/a>,
&lt;a href="https://github.com/EAVWing" target="_blank" rel="noopener">@EAVWing&lt;/a>,
&lt;a href="https://github.com/eddelbuettel" target="_blank" rel="noopener">@eddelbuettel&lt;/a>,
&lt;a href="https://github.com/edward-burn" target="_blank" rel="noopener">@edward-burn&lt;/a>,
&lt;a href="https://github.com/elefeint" target="_blank" rel="noopener">@elefeint&lt;/a>,
&lt;a href="https://github.com/eli-daniels" target="_blank" rel="noopener">@eli-daniels&lt;/a>,
&lt;a href="https://github.com/elysabethpc" target="_blank" rel="noopener">@elysabethpc&lt;/a>,
&lt;a href="https://github.com/erikvona" target="_blank" rel="noopener">@erikvona&lt;/a>,
&lt;a href="https://github.com/florisvdh" target="_blank" rel="noopener">@florisvdh&lt;/a>,
&lt;a href="https://github.com/gaborcsardi" target="_blank" rel="noopener">@gaborcsardi&lt;/a>,
&lt;a href="https://github.com/ggrothendieck" target="_blank" rel="noopener">@ggrothendieck&lt;/a>,
&lt;a href="https://github.com/hdmm3" target="_blank" rel="noopener">@hdmm3&lt;/a>,
&lt;a href="https://github.com/hope-data-science" target="_blank" rel="noopener">@hope-data-science&lt;/a>,
&lt;a href="https://github.com/IoannaNika" target="_blank" rel="noopener">@IoannaNika&lt;/a>,
&lt;a href="https://github.com/jabrown-aepenergy" target="_blank" rel="noopener">@jabrown-aepenergy&lt;/a>,
&lt;a href="https://github.com/JamesLMacAulay" target="_blank" rel="noopener">@JamesLMacAulay&lt;/a>,
&lt;a href="https://github.com/jangorecki" target="_blank" rel="noopener">@jangorecki&lt;/a>,
&lt;a href="https://github.com/javierlenzi" target="_blank" rel="noopener">@javierlenzi&lt;/a>,
&lt;a href="https://github.com/Joe-Heffer-Shef" target="_blank" rel="noopener">@Joe-Heffer-Shef&lt;/a>,
&lt;a href="https://github.com/kalibera" target="_blank" rel="noopener">@kalibera&lt;/a>,
&lt;a href="https://github.com/lboller-pwbm" target="_blank" rel="noopener">@lboller-pwbm&lt;/a>,
&lt;a href="https://github.com/lgaborini" target="_blank" rel="noopener">@lgaborini&lt;/a>,
&lt;a href="https://github.com/m-muecke" target="_blank" rel="noopener">@m-muecke&lt;/a>,
&lt;a href="https://github.com/meztez" target="_blank" rel="noopener">@meztez&lt;/a>,
&lt;a href="https://github.com/mgirlich" target="_blank" rel="noopener">@mgirlich&lt;/a>,
&lt;a href="https://github.com/mtmorgan" target="_blank" rel="noopener">@mtmorgan&lt;/a>,
&lt;a href="https://github.com/nassuphis" target="_blank" rel="noopener">@nassuphis&lt;/a>,
&lt;a href="https://github.com/nbc" target="_blank" rel="noopener">@nbc&lt;/a>,
&lt;a href="https://github.com/olivroy" target="_blank" rel="noopener">@olivroy&lt;/a>,
&lt;a href="https://github.com/pdet" target="_blank" rel="noopener">@pdet&lt;/a>,
&lt;a href="https://github.com/phdjsep" target="_blank" rel="noopener">@phdjsep&lt;/a>,
&lt;a href="https://github.com/pierre-lamarche" target="_blank" rel="noopener">@pierre-lamarche&lt;/a>,
&lt;a href="https://github.com/r2evans" target="_blank" rel="noopener">@r2evans&lt;/a>,
&lt;a href="https://github.com/ran-codes" target="_blank" rel="noopener">@ran-codes&lt;/a>,
&lt;a href="https://github.com/rplsmn" target="_blank" rel="noopener">@rplsmn&lt;/a>,
&lt;a href="https://github.com/Saarialho" target="_blank" rel="noopener">@Saarialho&lt;/a>,
&lt;a href="https://github.com/SimonCoulombe" target="_blank" rel="noopener">@SimonCoulombe&lt;/a>,
&lt;a href="https://github.com/tau31" target="_blank" rel="noopener">@tau31&lt;/a>,
&lt;a href="https://github.com/thohan88" target="_blank" rel="noopener">@thohan88&lt;/a>,
&lt;a href="https://github.com/ThomasSoeiro" target="_blank" rel="noopener">@ThomasSoeiro&lt;/a>,
&lt;a href="https://github.com/timothygmitchell" target="_blank" rel="noopener">@timothygmitchell&lt;/a>,
&lt;a href="https://github.com/vincentarelbundock" target="_blank" rel="noopener">@vincentarelbundock&lt;/a>,
&lt;a href="https://github.com/VincentGuyader" target="_blank" rel="noopener">@VincentGuyader&lt;/a>,
&lt;a href="https://github.com/wlangera" target="_blank" rel="noopener">@wlangera&lt;/a>,
&lt;a href="https://github.com/xbasics" target="_blank" rel="noopener">@xbasics&lt;/a>,
&lt;a href="https://github.com/xiaodaigh" target="_blank" rel="noopener">@xiaodaigh&lt;/a>,
&lt;a href="https://github.com/xtimbeau" target="_blank" rel="noopener">@xtimbeau&lt;/a>,
&lt;a href="https://github.com/yng-me" target="_blank" rel="noopener">@yng-me&lt;/a>,
&lt;a href="https://github.com/Yousuf28" target="_blank" rel="noopener">@Yousuf28&lt;/a>,
&lt;a href="https://github.com/yutannihilation" target="_blank" rel="noopener">@yutannihilation&lt;/a>, and
&lt;a href="https://github.com/zcatav" target="_blank" rel="noopener">@zcatav&lt;/a>&lt;/p>
&lt;p>Special thanks to Joe Thorley (
&lt;a href="https://github.com/joethorley" target="_blank" rel="noopener">@joethorley&lt;/a>) for help with choosing the right words.&lt;/p>
&lt;section class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1" role="doc-endnote">
&lt;p>If you haven&amp;rsquo;t heard of it yet, watch
&lt;a href="https://www.youtube.com/watch?v=GELhdezYmP0&amp;amp;feature=youtu.be" target="_blank" rel="noopener">Hannes Mühleisen&amp;rsquo;s keynote at posit::conf(2024)&lt;/a>. &lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:2" role="doc-endnote">
&lt;p>If omitted, the results would be unchanged but the measurements would be wrong. The computation would then be triggered by the check. See
&lt;a href="https://duckplyr.tidyverse.org/articles/prudence.html" target="_blank" rel="noopener">&lt;code>vignette(&amp;quot;prudence&amp;quot;)&lt;/code>&lt;/a> for details. &lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/section></description></item><item><title>Teaching the tidyverse in 2023</title><link>https://www.tidyverse.org/blog/2023/08/teach-tidyverse-23/</link><pubDate>Mon, 07 Aug 2023 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2023/08/teach-tidyverse-23/</guid><description>&lt;!--
TODO:
* [x] Look over / edit the post's title in the yaml
* [x] Edit (or delete) the description; note this appears in the Twitter card
* [x] Pick category and tags (see existing with [`hugodown::tidy_show_meta()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html))
* [x] Find photo &amp; update yaml metadata
* [x] Create `thumbnail-sq.jpg`; height and width should be equal
* [x] Create `thumbnail-wd.jpg`; width should be >5x height
* [x] [`hugodown::use_tidy_thumbnails()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html)
* [x] Add intro sentence, e.g. the standard tagline for the package
* [ ] [`usethis::use_tidy_thanks()`](https://usethis.r-lib.org/reference/use_tidy_thanks.html) -- not applicable
-->
&lt;p>Another year, another roundup of tidyverse updates, through the lens of an educator. As with previous
&lt;a href="https://www.tidyverse.org/blog/2021/08/teach-tidyverse-2021/">teaching the tidyverse posts&lt;/a>, much of what is discussed in this blog post has already been covered in package update posts, however the goal of this roundup is to summarize the highlights that are most relevant to teaching data science with the tidyverse, particularly to new learners.&lt;/p>
&lt;p>Specifically, I&amp;rsquo;ll discuss:&lt;/p>
&lt;ul>
&lt;li>
&lt;a href="#resource-refresh">Resource refresh&lt;/a>&lt;/li>
&lt;li>
&lt;a href="#nine-core-packages-in-tidyverse-200">Nine core packages in tidyverse 2.0.0&lt;/a>&lt;/li>
&lt;li>
&lt;a href="#conflict-resolution-in-the-tidyverse">Conflict resolution in the tidyverse&lt;/a>&lt;/li>
&lt;li>
&lt;a href="#improved-and-expanded-_join-functionality">Improved and expanded &lt;code>*_join()&lt;/code> functionality&lt;/a>&lt;/li>
&lt;li>
&lt;a href="#per-operation-grouping">Per operation grouping&lt;/a>&lt;/li>
&lt;li>
&lt;a href="#quality-of-life-improvements-to-case_when-and-if_else">Quality of life improvements to &lt;code>case_when()&lt;/code> and &lt;code>if_else()&lt;/code>&lt;/a>&lt;/li>
&lt;li>
&lt;a href="#new-syntax-for-separating-columns">New syntax for separating columns&lt;/a>&lt;/li>
&lt;li>
&lt;a href="#new-argument-for-line-geoms-linewidth">New argument for line geoms: linewidth&lt;/a>&lt;/li>
&lt;li>
&lt;a href="#other-highlights">Other highlights&lt;/a>&lt;/li>
&lt;li>
&lt;a href="#coming-up">Coming up&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>And different from previous posts on this topic, this one comes with a video! If you&amp;rsquo;d like a live demo of the code examples, and a few more additional tips along the way, you can watch the video below.&lt;/p>
&lt;center>
&lt;iframe width="560" height="315" src="https://www.youtube.com/embed/KsBBRHAgAhM" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen>&lt;/iframe>
&lt;/center>
&lt;p>Throughout this blog post you&amp;rsquo;ll encounter some code chunks with the comment &lt;code>previously&lt;/code>, indicating what you used to do in the tidyverse. Often these will be coupled with chunks with the comment &lt;code>now, optionally&lt;/code>, indicating what you &lt;em>can&lt;/em> now do with the tidyverse. And rarely, they will be coupled with chunks with the comment &lt;code>now&lt;/code>, indicating what you &lt;em>should&lt;/em> do instead now with the tidyverse.&lt;/p>
&lt;p>Let&amp;rsquo;s get started with the obligatory&amp;hellip;&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://tidyverse.tidyverse.org'>tidyverse&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; ── &lt;span style='font-weight: bold;'>Attaching core tidyverse packages&lt;/span> ──────────────────────── tidyverse 2.0.0 ──&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>dplyr &lt;/span> 1.1.2 &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>readr &lt;/span> 2.1.4&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>forcats &lt;/span> 1.0.0 &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>stringr &lt;/span> 1.5.0&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>ggplot2 &lt;/span> 3.4.2 &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>tibble &lt;/span> 3.2.1&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>lubridate&lt;/span> 1.9.2 &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>tidyr &lt;/span> 1.3.0&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>purrr &lt;/span> 1.0.1 &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; ── &lt;span style='font-weight: bold;'>Conflicts&lt;/span> ────────────────────────────────────────── tidyverse_conflicts() ──&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BB0000;'>✖&lt;/span> &lt;span style='color: #0000BB;'>dplyr&lt;/span>::&lt;span style='color: #00BB00;'>filter()&lt;/span> masks &lt;span style='color: #0000BB;'>stats&lt;/span>::filter()&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BB0000;'>✖&lt;/span> &lt;span style='color: #0000BB;'>dplyr&lt;/span>::&lt;span style='color: #00BB00;'>lag()&lt;/span> masks &lt;span style='color: #0000BB;'>stats&lt;/span>::lag()&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BBBB;'>ℹ&lt;/span> Use the conflicted package (&lt;span style='color: #0000BB; font-style: italic;'>&amp;lt;http://conflicted.r-lib.org/&amp;gt;&lt;/span>) to force all conflicts to become errors&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>And, let&amp;rsquo;s also load the
&lt;a href="https://allisonhorst.github.io/palmerpenguins/" target="_blank" rel="noopener">palmerpenguins&lt;/a> package that we will use in examples.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://allisonhorst.github.io/palmerpenguins/'>palmerpenguins&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;h2 id="resource-refresh">Resource refresh
&lt;a href="#resource-refresh">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>R for Data Science, 2nd Edition is out!
&lt;a href="https://www.tidyverse.org/blog/2023/07/r4ds-2e/">This blog post&lt;/a> (and the
&lt;a href="https://r4ds.hadley.nz/preface-2e.html" target="_blank" rel="noopener">book&amp;rsquo;s preface&lt;/a>) outlines updates since the first edition. Updates to the book served as the motivation for many of the changes mentioned in the remainder of this post as as well as on the Tidyverse blog over the last year. Now that the book is out, you can expect the pace of change to slow down again for a while, which means plenty of time for phasing these changes into your teaching materials.&lt;/p>
&lt;p>One change in the 2nd Edition that will most likely affect almost all of your teaching materials is the use of the native R pipe (&lt;code>|&amp;gt;&lt;/code>) instead of the magrittr pipe (&lt;code>%&amp;gt;%&lt;/code>). If you&amp;rsquo;re not familiar with the similarities and differences between these operators, I recommend reading
&lt;a href="https://www.tidyverse.org/blog/2023/04/base-vs-magrittr-pipe/" target="_blank" rel="noopener">this comparison blog post&lt;/a>. And I strongly recommend making this update since it will allow students to perform piped operations with any R function, and hence allow them to keep their data pipeline workflows regardless of whether the next package they learn is from the tidyverse (or package that uses tidyverse principles) or not.&lt;/p>
&lt;h2 id="nine-core-packages-in-tidyverse-200">Nine core packages in tidyverse 2.0.0
&lt;a href="#nine-core-packages-in-tidyverse-200">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>The main update in tidyverse 2.0.0, which was released in March 2023, is that it
&lt;a href="https://lubridate.tidyverse.org/" target="_blank" rel="noopener">lubridate&lt;/a> is now a core tidyverse package. The lubridate package that makes it easier to do the things R does with date-times, is now a core tidyverse package. So, while many of your scripts in the past may have started with&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='c'># previously&lt;/span>&lt;/span>
&lt;span>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://tidyverse.tidyverse.org'>tidyverse&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://lubridate.tidyverse.org'>lubridate&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>you can now just do&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='c'># now&lt;/span>&lt;/span>
&lt;span>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://tidyverse.tidyverse.org'>tidyverse&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>and the lubridate package will be loaded as well.&lt;/p>
&lt;p>If you, like me, use a graphic like the one below that maps the core tidyverse packages to phases of the data science cycle, here is an updated graphic including lubridate.&lt;/p>
&lt;p>&lt;img src="images/data-science.png" data-fig-alt="Data science cycle: import, tidy, transform, visualize, model, communicate. Packages readr and tibble are for import. Packages tidyr and purr for tidy and transform. Packages dplyr, stringr, forcats, and lubridate are for transform. Package ggplot2 is for visualize." />&lt;/p>
&lt;h2 id="conflict-resolution-in-the-tidyverse">Conflict resolution in the tidyverse
&lt;a href="#conflict-resolution-in-the-tidyverse">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>You may have also noticed that the package loading message for the tidyverse has been updated as well, and now advertises the
&lt;a href="https://conflicted.r-lib.org/" target="_blank" rel="noopener">conflicted&lt;/a> package.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='c'>#&amp;gt; ── &lt;span style='font-weight: bold;'>Conflicts&lt;/span> ────────────────────────────────────────── tidyverse_conflicts() ──&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BB0000;'>✖&lt;/span> &lt;span style='color: #0000BB;'>dplyr&lt;/span>::&lt;span style='color: #00BB00;'>filter()&lt;/span> masks &lt;span style='color: #0000BB;'>stats&lt;/span>::filter()&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BB0000;'>✖&lt;/span> &lt;span style='color: #0000BB;'>dplyr&lt;/span>::&lt;span style='color: #00BB00;'>lag()&lt;/span> masks &lt;span style='color: #0000BB;'>stats&lt;/span>::lag()&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BBBB;'>ℹ&lt;/span> Use the conflicted package (&lt;span style='color: #0000BB; font-style: italic;'>&amp;lt;http://conflicted.r-lib.org/&amp;gt;&lt;/span>) to force all conflicts to become errors&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>Conflict resolution in R, i.e., what to do if multiple packages that are loaded in a session have functions with the same name, can get tricky, and the conflicted package is designed to help with that. R&amp;rsquo;s default conflict resolution gives precedence to the most recently loaded package. For example, if you use the filter function before loading the tidyverse, R will use
&lt;a href="https://rdrr.io/r/stats/filter.html" target="_blank" rel="noopener">&lt;code>stats::filter()&lt;/code>&lt;/a>:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>penguins&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/filter.html'>filter&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>species&lt;/span> &lt;span class='o'>==&lt;/span> &lt;span class='s'>"Adelie"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; Error in eval(expr, envir, enclos): object 'species' not found&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>However, after loading the tidyverse, when you call
&lt;a href="https://dplyr.tidyverse.org/reference/filter.html" target="_blank" rel="noopener">&lt;code>filter()&lt;/code>&lt;/a>, R will &lt;em>silently&lt;/em> choose
&lt;a href="https://dplyr.tidyverse.org/reference/filter.html" target="_blank" rel="noopener">&lt;code>dplyr::filter()&lt;/code>&lt;/a>:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>penguins&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/filter.html'>filter&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>species&lt;/span> &lt;span class='o'>==&lt;/span> &lt;span class='s'>"Adelie"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 152 × 8&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; species island bill_length_mm bill_depth_mm flipper_length_mm body_mass_g&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;fct&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;fct&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;int&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;int&amp;gt;&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 1&lt;/span> Adelie Torgersen 39.1 18.7 181 &lt;span style='text-decoration: underline;'>3&lt;/span>750&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 2&lt;/span> Adelie Torgersen 39.5 17.4 186 &lt;span style='text-decoration: underline;'>3&lt;/span>800&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 3&lt;/span> Adelie Torgersen 40.3 18 195 &lt;span style='text-decoration: underline;'>3&lt;/span>250&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 4&lt;/span> Adelie Torgersen &lt;span style='color: #BB0000;'>NA&lt;/span> &lt;span style='color: #BB0000;'>NA&lt;/span> &lt;span style='color: #BB0000;'>NA&lt;/span> &lt;span style='color: #BB0000;'>NA&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 5&lt;/span> Adelie Torgersen 36.7 19.3 193 &lt;span style='text-decoration: underline;'>3&lt;/span>450&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 6&lt;/span> Adelie Torgersen 39.3 20.6 190 &lt;span style='text-decoration: underline;'>3&lt;/span>650&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 7&lt;/span> Adelie Torgersen 38.9 17.8 181 &lt;span style='text-decoration: underline;'>3&lt;/span>625&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 8&lt;/span> Adelie Torgersen 39.2 19.6 195 &lt;span style='text-decoration: underline;'>4&lt;/span>675&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 9&lt;/span> Adelie Torgersen 34.1 18.1 193 &lt;span style='text-decoration: underline;'>3&lt;/span>475&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>10&lt;/span> Adelie Torgersen 42 20.2 190 &lt;span style='text-decoration: underline;'>4&lt;/span>250&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># ℹ 142 more rows&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># ℹ 2 more variables: sex &amp;lt;fct&amp;gt;, year &amp;lt;int&amp;gt;&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>This silent conflict resolution approach works fine until it doesn&amp;rsquo;t, and then it can be very frustrating to debug. The conflicted package does not allow for silent conflict resolution:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://conflicted.r-lib.org/'>conflicted&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span> &lt;/span>
&lt;span>&lt;span class='nv'>penguins&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/filter.html'>filter&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>species&lt;/span> &lt;span class='o'>==&lt;/span> &lt;span class='s'>"Adelie"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00; font-weight: bold;'>Error&lt;/span>&lt;span style='font-weight: bold;'>:&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00;'>!&lt;/span> &lt;span style='color: #555555;'>[conflicted]&lt;/span> &lt;span style='font-weight: bold;'>filter&lt;/span> found in 2 packages.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; Either pick the one you want with `::`:&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BBBB;'>•&lt;/span> &lt;span style='color: #0000BB;'>dplyr&lt;/span>::filter&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BBBB;'>•&lt;/span> &lt;span style='color: #0000BB;'>stats&lt;/span>::filter&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; Or declare a preference with `conflicts_prefer()`:&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BBBB;'>•&lt;/span> `conflicts_prefer(dplyr::filter)`&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BBBB;'>•&lt;/span> `conflicts_prefer(stats::filter)`&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>You can, of course, use
&lt;a href="https://dplyr.tidyverse.org/reference/filter.html" target="_blank" rel="noopener">&lt;code>dplyr::filter()&lt;/code>&lt;/a> but if you have a bunch of data wrangling pipelines, which is likely the case if you&amp;rsquo;re teaching data wrangling, it can get pretty busy.&lt;/p>
&lt;p>Instead, with conflicted, you can explicitly declare which
&lt;a href="https://dplyr.tidyverse.org/reference/filter.html" target="_blank" rel="noopener">&lt;code>filter()&lt;/code>&lt;/a> you want to use at the beginning (of a session, of a script, or of an R Markdown or Quarto file) with
&lt;a href="https://conflicted.r-lib.org/reference/conflicts_prefer.html" target="_blank" rel="noopener">&lt;code>conflicts_prefer()&lt;/code>&lt;/a>:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://conflicted.r-lib.org/reference/conflicts_prefer.html'>conflicts_prefer&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>dplyr&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nv'>&lt;a href='https://dplyr.tidyverse.org/reference/filter.html'>filter&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>[conflicted]&lt;/span> Will prefer &lt;span style='color: #0000BB; font-weight: bold;'>dplyr&lt;/span>::filter over any other package.&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span> &lt;/span>
&lt;span>&lt;span class='nv'>penguins&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/filter.html'>filter&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>species&lt;/span> &lt;span class='o'>==&lt;/span> &lt;span class='s'>"Adelie"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 152 × 8&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; species island bill_length_mm bill_depth_mm flipper_length_mm body_mass_g&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;fct&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;fct&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;int&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;int&amp;gt;&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 1&lt;/span> Adelie Torgersen 39.1 18.7 181 &lt;span style='text-decoration: underline;'>3&lt;/span>750&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 2&lt;/span> Adelie Torgersen 39.5 17.4 186 &lt;span style='text-decoration: underline;'>3&lt;/span>800&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 3&lt;/span> Adelie Torgersen 40.3 18 195 &lt;span style='text-decoration: underline;'>3&lt;/span>250&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 4&lt;/span> Adelie Torgersen &lt;span style='color: #BB0000;'>NA&lt;/span> &lt;span style='color: #BB0000;'>NA&lt;/span> &lt;span style='color: #BB0000;'>NA&lt;/span> &lt;span style='color: #BB0000;'>NA&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 5&lt;/span> Adelie Torgersen 36.7 19.3 193 &lt;span style='text-decoration: underline;'>3&lt;/span>450&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 6&lt;/span> Adelie Torgersen 39.3 20.6 190 &lt;span style='text-decoration: underline;'>3&lt;/span>650&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 7&lt;/span> Adelie Torgersen 38.9 17.8 181 &lt;span style='text-decoration: underline;'>3&lt;/span>625&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 8&lt;/span> Adelie Torgersen 39.2 19.6 195 &lt;span style='text-decoration: underline;'>4&lt;/span>675&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 9&lt;/span> Adelie Torgersen 34.1 18.1 193 &lt;span style='text-decoration: underline;'>3&lt;/span>475&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>10&lt;/span> Adelie Torgersen 42 20.2 190 &lt;span style='text-decoration: underline;'>4&lt;/span>250&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># ℹ 142 more rows&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># ℹ 2 more variables: sex &amp;lt;fct&amp;gt;, year &amp;lt;int&amp;gt;&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>Getting back to the package loading message&amp;hellip; It can be tempting, particularly in a teaching scenario, particularly to an audience of new learners, and particularly if you teach with slides and messages take up valuable slide real estate, I would urge you to not hide startup messages from teaching materials. Instead, address them early on to:&lt;/p>
&lt;ol>
&lt;li>
&lt;p>Encourage reading and understanding messages, warnings, and errors &amp;ndash; teaching people to read error messages is hard enough, it&amp;rsquo;s going to be even harder if you&amp;rsquo;re not modeling that to them.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Help during hard-to-debug situations resulting from base R&amp;rsquo;s silent conflict resolution &amp;ndash; because, let&amp;rsquo;s face it, someone in your class, if not you during a live-coding session, will see that pesky object not found error at some point when using
&lt;a href="https://dplyr.tidyverse.org/reference/filter.html" target="_blank" rel="noopener">&lt;code>filter()&lt;/code>&lt;/a>.&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="improved-and-expanded-_join-functionality">Improved and expanded &lt;code>*_join()&lt;/code> functionality
&lt;a href="#improved-and-expanded-_join-functionality">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>The
&lt;a href="https://dplyr.tidyverse.org/" target="_blank" rel="noopener">dplyr&lt;/a> package has long had the
&lt;a href="https://dplyr.tidyverse.org/articles/two-table.html" target="_blank" rel="noopener">&lt;code>*_join()&lt;/code> family of functions&lt;/a> for joining data frames. dplyr 1.1.0 introduced a
&lt;a href="https://www.tidyverse.org/blog/2023/01/dplyr-1-1-0-joins/" target="_blank" rel="noopener">bunch of extensions&lt;/a> that bring joins closer to the power available in other systems like SQL and &lt;code>data.table&lt;/code>.&lt;/p>
&lt;h3 id="join_by">&lt;code>join_by()&lt;/code>
&lt;a href="#join_by">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>New functionality for join functions includes a new
&lt;a href="https://dplyr.tidyverse.org/reference/join_by.html" target="_blank" rel="noopener">&lt;code>join_by()&lt;/code>&lt;/a> function for the &lt;code>by&lt;/code> argument. So, while in the past your code may have looked like the following:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'># previously
*_join(
x, y,
by = c("&lt;x var>" = "&lt;y var>")
)
&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>you can now do:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'># now, optionally
*_join(
x, y,
by = join_by(&lt;x var> == &lt;y var>)
)
&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>For example, suppose you have the following information on the three islands we have penguins from:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>islands&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://tibble.tidyverse.org/reference/tribble.html'>tribble&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>~&lt;/span>&lt;span class='nv'>name&lt;/span>, &lt;span class='o'>~&lt;/span>&lt;span class='nv'>coordinates&lt;/span>,&lt;/span>
&lt;span> &lt;span class='s'>"Torgersen"&lt;/span>, &lt;span class='s'>"64°46′S 64°5′W"&lt;/span>,&lt;/span>
&lt;span> &lt;span class='s'>"Biscoe"&lt;/span>, &lt;span class='s'>"65°26′S 65°30′W"&lt;/span>,&lt;/span>
&lt;span> &lt;span class='s'>"Dream"&lt;/span>, &lt;span class='s'>"64°44′S 64°14′W"&lt;/span>&lt;/span>
&lt;span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>islands&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 3 × 2&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; name coordinates &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;chr&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;chr&amp;gt;&lt;/span> &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>1&lt;/span> Torgersen 64°46′S 64°5′W &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>2&lt;/span> Biscoe 65°26′S 65°30′W&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>3&lt;/span> Dream 64°44′S 64°14′W&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>You can join this to the penguins data frame by matching the &lt;code>island&lt;/code> column in the penguins data frame to the &lt;code>name&lt;/code> column in the islands data frame:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>penguins&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/mutate-joins.html'>left_join&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> &lt;span class='nv'>islands&lt;/span>, &lt;/span>
&lt;span> by &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/join_by.html'>join_by&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>island&lt;/span> &lt;span class='o'>==&lt;/span> &lt;span class='nv'>name&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/select.html'>select&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>species&lt;/span>, &lt;span class='nv'>island&lt;/span>, &lt;span class='nv'>coordinates&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 344 × 3&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; species island coordinates &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;fct&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;chr&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;chr&amp;gt;&lt;/span> &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 1&lt;/span> Adelie Torgersen 64°46′S 64°5′W&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 2&lt;/span> Adelie Torgersen 64°46′S 64°5′W&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 3&lt;/span> Adelie Torgersen 64°46′S 64°5′W&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 4&lt;/span> Adelie Torgersen 64°46′S 64°5′W&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 5&lt;/span> Adelie Torgersen 64°46′S 64°5′W&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 6&lt;/span> Adelie Torgersen 64°46′S 64°5′W&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 7&lt;/span> Adelie Torgersen 64°46′S 64°5′W&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 8&lt;/span> Adelie Torgersen 64°46′S 64°5′W&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 9&lt;/span> Adelie Torgersen 64°46′S 64°5′W&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>10&lt;/span> Adelie Torgersen 64°46′S 64°5′W&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># ℹ 334 more rows&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>While &lt;code>by = c(&amp;quot;island&amp;quot; = &amp;quot;name&amp;quot;)&lt;/code> would still work, I would recommend teaching
&lt;a href="https://dplyr.tidyverse.org/reference/join_by.html" target="_blank" rel="noopener">&lt;code>join_by()&lt;/code>&lt;/a> over &lt;code>by&lt;/code> so that:&lt;/p>
&lt;ol>
&lt;li>You can read it out loud as &amp;ldquo;where x is equal to y&amp;rdquo;, just like in other logical statements where &lt;code>==&lt;/code> is pronounced as &amp;ldquo;is equal to&amp;rdquo;.&lt;/li>
&lt;li>You don&amp;rsquo;t have to worry about &lt;code>by = c(x = y)&lt;/code> (which is invalid) vs. &lt;code>by = c(x = &amp;quot;y&amp;quot;)&lt;/code> (which is valid) vs. &lt;code>by = c(&amp;quot;x&amp;quot; = &amp;quot;y&amp;quot;)&lt;/code> (which is also valid).&lt;/li>
&lt;/ol>
&lt;p>In fact, for succinctness, you might avoid the argument name and express this as:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>penguins&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/mutate-joins.html'>left_join&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>islands&lt;/span>, &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/join_by.html'>join_by&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>island&lt;/span> &lt;span class='o'>==&lt;/span> &lt;span class='nv'>name&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;h3 id="handling-various-matches">Handling various matches
&lt;a href="#handling-various-matches">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>The &lt;code>*_join()&lt;/code> functions now have additional arguments for handling &lt;code>multiple&lt;/code> matches and &lt;code>unmatched&lt;/code> rows as well as for specifying the &lt;code>relationship&lt;/code> between the two data frames.&lt;/p>
&lt;p>So, while in the past your code may have looked like the following:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'># previously
*_join(
x, y, by
)
&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>you can now do:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'># now, optionally
*_join(
x, y, by,
multiple = "all",
unmatched = "drop",
relationship = NULL
)
&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>Let&amp;rsquo;s set up three data frames to demonstrate the new functionality:&lt;/p>
&lt;ul>
&lt;li>Information about three penguins, one row per &lt;code>samp_id&lt;/code>:&lt;/li>
&lt;/ul>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>three_penguins&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://tibble.tidyverse.org/reference/tribble.html'>tribble&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>~&lt;/span>&lt;span class='nv'>samp_id&lt;/span>, &lt;span class='o'>~&lt;/span>&lt;span class='nv'>species&lt;/span>, &lt;span class='o'>~&lt;/span>&lt;span class='nv'>island&lt;/span>,&lt;/span>
&lt;span> &lt;span class='m'>1&lt;/span>, &lt;span class='s'>"Adelie"&lt;/span>, &lt;span class='s'>"Torgersen"&lt;/span>,&lt;/span>
&lt;span> &lt;span class='m'>2&lt;/span>, &lt;span class='s'>"Gentoo"&lt;/span>, &lt;span class='s'>"Biscoe"&lt;/span>,&lt;/span>
&lt;span> &lt;span class='m'>3&lt;/span>, &lt;span class='s'>"Chinstrap"&lt;/span>, &lt;span class='s'>"Dream"&lt;/span>&lt;/span>
&lt;span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>three_penguins&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 3 × 3&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; samp_id species island &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;chr&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;chr&amp;gt;&lt;/span> &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>1&lt;/span> 1 Adelie Torgersen&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>2&lt;/span> 2 Gentoo Biscoe &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>3&lt;/span> 3 Chinstrap Dream&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;ul>
&lt;li>Information about weight measurements of these penguins, one row per &lt;code>samp_id&lt;/code>, &lt;code>meas_id&lt;/code> combination:&lt;/li>
&lt;/ul>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>weight_measurements&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://tibble.tidyverse.org/reference/tribble.html'>tribble&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>~&lt;/span>&lt;span class='nv'>samp_id&lt;/span>, &lt;span class='o'>~&lt;/span>&lt;span class='nv'>meas_id&lt;/span>, &lt;span class='o'>~&lt;/span>&lt;span class='nv'>body_mass_g&lt;/span>,&lt;/span>
&lt;span> &lt;span class='m'>1&lt;/span>, &lt;span class='m'>1&lt;/span>, &lt;span class='m'>3220&lt;/span>,&lt;/span>
&lt;span> &lt;span class='m'>1&lt;/span>, &lt;span class='m'>2&lt;/span>, &lt;span class='m'>3250&lt;/span>,&lt;/span>
&lt;span> &lt;span class='m'>2&lt;/span>, &lt;span class='m'>1&lt;/span>, &lt;span class='m'>4730&lt;/span>,&lt;/span>
&lt;span> &lt;span class='m'>2&lt;/span>, &lt;span class='m'>2&lt;/span>, &lt;span class='m'>4725&lt;/span>,&lt;/span>
&lt;span> &lt;span class='m'>3&lt;/span>, &lt;span class='m'>1&lt;/span>, &lt;span class='m'>4000&lt;/span>,&lt;/span>
&lt;span> &lt;span class='m'>3&lt;/span>, &lt;span class='m'>2&lt;/span>, &lt;span class='m'>4050&lt;/span>&lt;/span>
&lt;span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>weight_measurements&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 6 × 3&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; samp_id meas_id body_mass_g&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>1&lt;/span> 1 1 &lt;span style='text-decoration: underline;'>3&lt;/span>220&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>2&lt;/span> 1 2 &lt;span style='text-decoration: underline;'>3&lt;/span>250&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>3&lt;/span> 2 1 &lt;span style='text-decoration: underline;'>4&lt;/span>730&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>4&lt;/span> 2 2 &lt;span style='text-decoration: underline;'>4&lt;/span>725&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>5&lt;/span> 3 1 &lt;span style='text-decoration: underline;'>4&lt;/span>000&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>6&lt;/span> 3 2 &lt;span style='text-decoration: underline;'>4&lt;/span>050&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;ul>
&lt;li>Information about flipper measurements of these penguins, one row per &lt;code>samp_id&lt;/code>, &lt;code>meas_id&lt;/code> combination:&lt;/li>
&lt;/ul>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>flipper_measurements&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://tibble.tidyverse.org/reference/tribble.html'>tribble&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>~&lt;/span>&lt;span class='nv'>samp_id&lt;/span>, &lt;span class='o'>~&lt;/span>&lt;span class='nv'>meas_id&lt;/span>, &lt;span class='o'>~&lt;/span>&lt;span class='nv'>flipper_length_mm&lt;/span>,&lt;/span>
&lt;span> &lt;span class='m'>1&lt;/span>, &lt;span class='m'>1&lt;/span>, &lt;span class='m'>193&lt;/span>,&lt;/span>
&lt;span> &lt;span class='m'>1&lt;/span>, &lt;span class='m'>2&lt;/span>, &lt;span class='m'>195&lt;/span>,&lt;/span>
&lt;span> &lt;span class='m'>2&lt;/span>, &lt;span class='m'>1&lt;/span>, &lt;span class='m'>214&lt;/span>,&lt;/span>
&lt;span> &lt;span class='m'>2&lt;/span>, &lt;span class='m'>2&lt;/span>, &lt;span class='m'>216&lt;/span>,&lt;/span>
&lt;span> &lt;span class='m'>3&lt;/span>, &lt;span class='m'>1&lt;/span>, &lt;span class='m'>203&lt;/span>,&lt;/span>
&lt;span> &lt;span class='m'>3&lt;/span>, &lt;span class='m'>2&lt;/span>, &lt;span class='m'>203&lt;/span>&lt;/span>
&lt;span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>flipper_measurements&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 6 × 3&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; samp_id meas_id flipper_length_mm&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>1&lt;/span> 1 1 193&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>2&lt;/span> 1 2 195&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>3&lt;/span> 2 1 214&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>4&lt;/span> 2 2 216&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>5&lt;/span> 3 1 203&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>6&lt;/span> 3 2 203&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>One-to-many relationships don&amp;rsquo;t require extra care, they just work:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>three_penguins&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/mutate-joins.html'>left_join&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>weight_measurements&lt;/span>, &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/join_by.html'>join_by&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>samp_id&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 6 × 5&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; samp_id species island meas_id body_mass_g&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;chr&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;chr&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>1&lt;/span> 1 Adelie Torgersen 1 &lt;span style='text-decoration: underline;'>3&lt;/span>220&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>2&lt;/span> 1 Adelie Torgersen 2 &lt;span style='text-decoration: underline;'>3&lt;/span>250&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>3&lt;/span> 2 Gentoo Biscoe 1 &lt;span style='text-decoration: underline;'>4&lt;/span>730&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>4&lt;/span> 2 Gentoo Biscoe 2 &lt;span style='text-decoration: underline;'>4&lt;/span>725&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>5&lt;/span> 3 Chinstrap Dream 1 &lt;span style='text-decoration: underline;'>4&lt;/span>000&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>6&lt;/span> 3 Chinstrap Dream 2 &lt;span style='text-decoration: underline;'>4&lt;/span>050&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>However, many-to-many relationships require some extra care. For example, if we join the &lt;code>three_penguins&lt;/code> data frame to the &lt;code>flipper_measurements&lt;/code> data frame, we get a warning:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>weight_measurements&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/mutate-joins.html'>left_join&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>flipper_measurements&lt;/span>, &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/join_by.html'>join_by&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>samp_id&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; Warning in left_join(weight_measurements, flipper_measurements, join_by(samp_id)): Detected an unexpected many-to-many relationship between `x` and `y`.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BBBB;'>ℹ&lt;/span> Row 1 of `x` matches multiple rows in `y`.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BBBB;'>ℹ&lt;/span> Row 1 of `y` matches multiple rows in `x`.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BBBB;'>ℹ&lt;/span> If a many-to-many relationship is expected, set `relationship =&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; "many-to-many"` to silence this warning.&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 12 × 5&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; samp_id meas_id.x body_mass_g meas_id.y flipper_length_mm&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 1&lt;/span> 1 1 &lt;span style='text-decoration: underline;'>3&lt;/span>220 1 193&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 2&lt;/span> 1 1 &lt;span style='text-decoration: underline;'>3&lt;/span>220 2 195&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 3&lt;/span> 1 2 &lt;span style='text-decoration: underline;'>3&lt;/span>250 1 193&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 4&lt;/span> 1 2 &lt;span style='text-decoration: underline;'>3&lt;/span>250 2 195&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 5&lt;/span> 2 1 &lt;span style='text-decoration: underline;'>4&lt;/span>730 1 214&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 6&lt;/span> 2 1 &lt;span style='text-decoration: underline;'>4&lt;/span>730 2 216&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 7&lt;/span> 2 2 &lt;span style='text-decoration: underline;'>4&lt;/span>725 1 214&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 8&lt;/span> 2 2 &lt;span style='text-decoration: underline;'>4&lt;/span>725 2 216&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 9&lt;/span> 3 1 &lt;span style='text-decoration: underline;'>4&lt;/span>000 1 203&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>10&lt;/span> 3 1 &lt;span style='text-decoration: underline;'>4&lt;/span>000 2 203&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>11&lt;/span> 3 2 &lt;span style='text-decoration: underline;'>4&lt;/span>050 1 203&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>12&lt;/span> 3 2 &lt;span style='text-decoration: underline;'>4&lt;/span>050 2 203&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>We get a warning about unexpected many-to-many relationships (unexpected because we didn&amp;rsquo;t specify this type of relationship in our join call), and the warning suggests setting &lt;code>relationship = &amp;quot;many-to-many&amp;quot;&lt;/code>. And note that we went from 6 rows (measurements) to 12, which is also unexpected.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>weight_measurements&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/mutate-joins.html'>left_join&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>flipper_measurements&lt;/span>, &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/join_by.html'>join_by&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>samp_id&lt;/span>&lt;span class='o'>)&lt;/span>, relationship &lt;span class='o'>=&lt;/span> &lt;span class='s'>"many-to-many"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 12 × 5&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; samp_id meas_id.x body_mass_g meas_id.y flipper_length_mm&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 1&lt;/span> 1 1 &lt;span style='text-decoration: underline;'>3&lt;/span>220 1 193&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 2&lt;/span> 1 1 &lt;span style='text-decoration: underline;'>3&lt;/span>220 2 195&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 3&lt;/span> 1 2 &lt;span style='text-decoration: underline;'>3&lt;/span>250 1 193&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 4&lt;/span> 1 2 &lt;span style='text-decoration: underline;'>3&lt;/span>250 2 195&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 5&lt;/span> 2 1 &lt;span style='text-decoration: underline;'>4&lt;/span>730 1 214&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 6&lt;/span> 2 1 &lt;span style='text-decoration: underline;'>4&lt;/span>730 2 216&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 7&lt;/span> 2 2 &lt;span style='text-decoration: underline;'>4&lt;/span>725 1 214&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 8&lt;/span> 2 2 &lt;span style='text-decoration: underline;'>4&lt;/span>725 2 216&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 9&lt;/span> 3 1 &lt;span style='text-decoration: underline;'>4&lt;/span>000 1 203&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>10&lt;/span> 3 1 &lt;span style='text-decoration: underline;'>4&lt;/span>000 2 203&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>11&lt;/span> 3 2 &lt;span style='text-decoration: underline;'>4&lt;/span>050 1 203&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>12&lt;/span> 3 2 &lt;span style='text-decoration: underline;'>4&lt;/span>050 2 203&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>With &lt;code>relationship = &amp;quot;many-to-many&amp;quot;&lt;/code>, we no longer get a warning. However, the &amp;ldquo;explosion of rows&amp;rdquo; issue is still there. Addressing that requires rethinking what we join the two data frames by:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>weight_measurements&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/mutate-joins.html'>left_join&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>flipper_measurements&lt;/span>, &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/join_by.html'>join_by&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>samp_id&lt;/span>, &lt;span class='nv'>meas_id&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 6 × 4&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; samp_id meas_id body_mass_g flipper_length_mm&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>1&lt;/span> 1 1 &lt;span style='text-decoration: underline;'>3&lt;/span>220 193&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>2&lt;/span> 1 2 &lt;span style='text-decoration: underline;'>3&lt;/span>250 195&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>3&lt;/span> 2 1 &lt;span style='text-decoration: underline;'>4&lt;/span>730 214&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>4&lt;/span> 2 2 &lt;span style='text-decoration: underline;'>4&lt;/span>725 216&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>5&lt;/span> 3 1 &lt;span style='text-decoration: underline;'>4&lt;/span>000 203&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>6&lt;/span> 3 2 &lt;span style='text-decoration: underline;'>4&lt;/span>050 203&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>We can see that while the warning nudged us towards setting &lt;code>relationship = &amp;quot;many-to-many&amp;quot;&lt;/code>, turns out the correct way to address the problem was to join by both &lt;code>samp_id&lt;/code> and &lt;code>meas_id&lt;/code>.&lt;/p>
&lt;p>We&amp;rsquo;ll wrap up our discussion on new functionality for handling &lt;code>unmatched&lt;/code> cases. We&amp;rsquo;ll create one more data frame (&lt;code>four_penguins&lt;/code>) to exemplify this:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>four_penguins&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://tibble.tidyverse.org/reference/tribble.html'>tribble&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>~&lt;/span>&lt;span class='nv'>samp_id&lt;/span>, &lt;span class='o'>~&lt;/span>&lt;span class='nv'>species&lt;/span>, &lt;span class='o'>~&lt;/span>&lt;span class='nv'>island&lt;/span>,&lt;/span>
&lt;span> &lt;span class='m'>1&lt;/span>, &lt;span class='s'>"Adelie"&lt;/span>, &lt;span class='s'>"Torgersen"&lt;/span>,&lt;/span>
&lt;span> &lt;span class='m'>2&lt;/span>, &lt;span class='s'>"Gentoo"&lt;/span>, &lt;span class='s'>"Biscoe"&lt;/span>,&lt;/span>
&lt;span> &lt;span class='m'>3&lt;/span>, &lt;span class='s'>"Chinstrap"&lt;/span>, &lt;span class='s'>"Dream"&lt;/span>,&lt;/span>
&lt;span> &lt;span class='m'>4&lt;/span>, &lt;span class='s'>"Adelie"&lt;/span>, &lt;span class='s'>"Biscoe"&lt;/span>&lt;/span>
&lt;span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>four_penguins&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 4 × 3&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; samp_id species island &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;chr&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;chr&amp;gt;&lt;/span> &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>1&lt;/span> 1 Adelie Torgersen&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>2&lt;/span> 2 Gentoo Biscoe &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>3&lt;/span> 3 Chinstrap Dream &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>4&lt;/span> 4 Adelie Biscoe&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>If we just join &lt;code>weight_measurements&lt;/code> to &lt;code>four_penguins&lt;/code>, the unmatched fourth penguin silently disappears, which is less than ideal, particularly in a more realistic scenario with many more observations:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>weight_measurements&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/mutate-joins.html'>left_join&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>four_penguins&lt;/span>, &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/join_by.html'>join_by&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>samp_id&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 6 × 5&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; samp_id meas_id body_mass_g species island &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;chr&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;chr&amp;gt;&lt;/span> &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>1&lt;/span> 1 1 &lt;span style='text-decoration: underline;'>3&lt;/span>220 Adelie Torgersen&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>2&lt;/span> 1 2 &lt;span style='text-decoration: underline;'>3&lt;/span>250 Adelie Torgersen&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>3&lt;/span> 2 1 &lt;span style='text-decoration: underline;'>4&lt;/span>730 Gentoo Biscoe &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>4&lt;/span> 2 2 &lt;span style='text-decoration: underline;'>4&lt;/span>725 Gentoo Biscoe &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>5&lt;/span> 3 1 &lt;span style='text-decoration: underline;'>4&lt;/span>000 Chinstrap Dream &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>6&lt;/span> 3 2 &lt;span style='text-decoration: underline;'>4&lt;/span>050 Chinstrap Dream&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>Setting &lt;code>unmatched = &amp;quot;error&amp;quot;&lt;/code> protects you from accidentally dropping rows:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>weight_measurements&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/mutate-joins.html'>left_join&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>four_penguins&lt;/span>, &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/join_by.html'>join_by&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>samp_id&lt;/span>&lt;span class='o'>)&lt;/span>, unmatched &lt;span class='o'>=&lt;/span> &lt;span class='s'>"error"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00; font-weight: bold;'>Error&lt;/span>&lt;span style='font-weight: bold;'> in `left_join()`:&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00;'>!&lt;/span> Each row of `y` must be matched by `x`.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BBBB;'>ℹ&lt;/span> Row 4 of `y` was not matched.&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>Once you see the error message, you can decide how to handle the unmatched rows, e.g., explicitly drop them.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>weight_measurements&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/mutate-joins.html'>left_join&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>four_penguins&lt;/span>, &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/join_by.html'>join_by&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>samp_id&lt;/span>&lt;span class='o'>)&lt;/span>, unmatched &lt;span class='o'>=&lt;/span> &lt;span class='s'>"drop"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 6 × 5&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; samp_id meas_id body_mass_g species island &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;chr&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;chr&amp;gt;&lt;/span> &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>1&lt;/span> 1 1 &lt;span style='text-decoration: underline;'>3&lt;/span>220 Adelie Torgersen&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>2&lt;/span> 1 2 &lt;span style='text-decoration: underline;'>3&lt;/span>250 Adelie Torgersen&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>3&lt;/span> 2 1 &lt;span style='text-decoration: underline;'>4&lt;/span>730 Gentoo Biscoe &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>4&lt;/span> 2 2 &lt;span style='text-decoration: underline;'>4&lt;/span>725 Gentoo Biscoe &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>5&lt;/span> 3 1 &lt;span style='text-decoration: underline;'>4&lt;/span>000 Chinstrap Dream &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>6&lt;/span> 3 2 &lt;span style='text-decoration: underline;'>4&lt;/span>050 Chinstrap Dream&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>There are many more developments related to &lt;code>*_join()&lt;/code> functions (e.g.,
&lt;a href="https://www.tidyverse.org/blog/2023/01/dplyr-1-1-0-joins/#inequality-joins">inequality joins&lt;/a> and
&lt;a href="https://www.tidyverse.org/blog/2023/01/dplyr-1-1-0-joins/#rolling-joins">rolling joins&lt;/a>), but many of these likely wouldn&amp;rsquo;t come up in an introductory course so we won&amp;rsquo;t get into their details. A good place to read more about them is
&lt;a href="https://r4ds.hadley.nz/joins.html#sec-non-equi-joins" target="_blank" rel="noopener">R for Data Science, 2nd edition&lt;/a>.&lt;/p>
&lt;p>Exploding joins (i.e., joins that result in a larger number of rows than either of the data frames from bie) can be hard to debug for students! Teaching them the tools to diagnose whether the join they performed, and that may not have given an error, is indeed the one they wanted to perform. Did they lose any cases? Did they gain an unexpected amount of cases? Did they perform a join without thinking and take down the entire teaching server? These things happen, particularly if students are working with their own data for an open-ended project!&lt;/p>
&lt;h2 id="per-operation-grouping">Per operation grouping
&lt;a href="#per-operation-grouping">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>To calculate grouped summary statistics, you previously needed to do something like this:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='c'># previously&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>df&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>x&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarize&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/mean.html'>mean&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>y&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>Now, an alternative approach is to pass the groups directly in the
&lt;a href="https://dplyr.tidyverse.org/reference/summarise.html" target="_blank" rel="noopener">&lt;code>summarize()&lt;/code>&lt;/a> call:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='c'># now, optionally&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>df&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarize&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/mean.html'>mean&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>y&lt;/span>&lt;span class='o'>)&lt;/span>, &lt;/span>
&lt;span> .by &lt;span class='o'>=&lt;/span> &lt;span class='nv'>x&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>Let&amp;rsquo;s take a look at the differences between these two approaches before making a recommendation for one over the other.
&lt;a href="https://dplyr.tidyverse.org/reference/group_by.html" target="_blank" rel="noopener">&lt;code>group_by()&lt;/code>&lt;/a> can result in groups that persist in the output, particularly when grouping by multiple variables. For example, in the following pipeline we group the penguins data frame by &lt;code>species&lt;/code> and &lt;code>sex&lt;/code>, find mean body weights for each resulting species / sex combination, and then show the first observation in the output with &lt;code>slice_head(n = 1)&lt;/code>. Since the output is grouped by species, this results in one summary statistic per species.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>penguins&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://tidyr.tidyverse.org/reference/drop_na.html'>drop_na&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>sex&lt;/span>, &lt;span class='nv'>body_mass_g&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>species&lt;/span>, &lt;span class='nv'>sex&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarize&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>mean_bw &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/mean.html'>mean&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>body_mass_g&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/slice.html'>slice_head&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>n &lt;span class='o'>=&lt;/span> &lt;span class='m'>1&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; `summarise()` has grouped output by 'species'. You can override using the&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; `.groups` argument.&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 3 × 3&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># Groups: species [3]&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; species sex mean_bw&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;fct&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;fct&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>1&lt;/span> Adelie female &lt;span style='text-decoration: underline;'>3&lt;/span>369.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>2&lt;/span> Chinstrap female &lt;span style='text-decoration: underline;'>3&lt;/span>527.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>3&lt;/span> Gentoo female &lt;span style='text-decoration: underline;'>4&lt;/span>680.&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>If we explicitly drop the groups in the
&lt;a href="https://dplyr.tidyverse.org/reference/summarise.html" target="_blank" rel="noopener">&lt;code>summarize()&lt;/code>&lt;/a> call, so that the output is no longer grouped, we get just one row in our output.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>penguins&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://tidyr.tidyverse.org/reference/drop_na.html'>drop_na&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>sex&lt;/span>, &lt;span class='nv'>body_mass_g&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>species&lt;/span>, &lt;span class='nv'>sex&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarize&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>mean_bw &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/mean.html'>mean&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>body_mass_g&lt;/span>&lt;span class='o'>)&lt;/span>, .groups &lt;span class='o'>=&lt;/span> &lt;span class='s'>"drop"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/slice.html'>slice_head&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>n &lt;span class='o'>=&lt;/span> &lt;span class='m'>1&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 1 × 3&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; species sex mean_bw&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;fct&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;fct&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>1&lt;/span> Adelie female &lt;span style='text-decoration: underline;'>3&lt;/span>369.&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>This pair of examples show that whether your output is grouped or not can affect downstream results, and if you&amp;rsquo;re a
&lt;a href="https://dplyr.tidyverse.org/reference/group_by.html" target="_blank" rel="noopener">&lt;code>group_by()&lt;/code>&lt;/a> user, you&amp;rsquo;ve probably been burnt by this once or twice.&lt;/p>
&lt;p>Per-operation grouping allows you to define groups in a &lt;code>.by&lt;/code> argument, and these groups don&amp;rsquo;t persist. So, regardless of whether you group by one or two variables, the resulting data frame after calculating a summary statistic is not grouped.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='c'># group by 1 variable&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>penguins&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://tidyr.tidyverse.org/reference/drop_na.html'>drop_na&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>sex&lt;/span>, &lt;span class='nv'>body_mass_g&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarize&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> mean_bw &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/mean.html'>mean&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>body_mass_g&lt;/span>&lt;span class='o'>)&lt;/span>, &lt;/span>
&lt;span> .by &lt;span class='o'>=&lt;/span> &lt;span class='nv'>species&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 3 × 2&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; species mean_bw&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;fct&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>1&lt;/span> Adelie &lt;span style='text-decoration: underline;'>3&lt;/span>706.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>2&lt;/span> Gentoo &lt;span style='text-decoration: underline;'>5&lt;/span>092.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>3&lt;/span> Chinstrap &lt;span style='text-decoration: underline;'>3&lt;/span>733.&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;/span>
&lt;span>&lt;span class='c'># group by 2 variables&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>penguins&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://tidyr.tidyverse.org/reference/drop_na.html'>drop_na&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>sex&lt;/span>, &lt;span class='nv'>body_mass_g&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarize&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> mean_bw &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/mean.html'>mean&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>body_mass_g&lt;/span>&lt;span class='o'>)&lt;/span>, &lt;/span>
&lt;span> .by &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>species&lt;/span>, &lt;span class='nv'>sex&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 6 × 3&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; species sex mean_bw&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;fct&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;fct&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>1&lt;/span> Adelie male &lt;span style='text-decoration: underline;'>4&lt;/span>043.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>2&lt;/span> Adelie female &lt;span style='text-decoration: underline;'>3&lt;/span>369.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>3&lt;/span> Gentoo female &lt;span style='text-decoration: underline;'>4&lt;/span>680.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>4&lt;/span> Gentoo male &lt;span style='text-decoration: underline;'>5&lt;/span>485.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>5&lt;/span> Chinstrap female &lt;span style='text-decoration: underline;'>3&lt;/span>527.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>6&lt;/span> Chinstrap male &lt;span style='text-decoration: underline;'>3&lt;/span>939.&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>So, when teaching grouped operations, you now have the option to choose between these two approaches. The most important teaching tip I can give, particularly for teaching to new learners, is to choose one method and stick to it. The &lt;code>.by&lt;/code> method will result in fewer outputs that are unintentionally grouped, and hence, might potentially be easier for new learners. And while this approach is mentioned in R for Data Science, 2nd edition, the
&lt;a href="https://dplyr.tidyverse.org/reference/group_by.html" target="_blank" rel="noopener">&lt;code>group_by()&lt;/code>&lt;/a> approach is described in more detail.&lt;/p>
&lt;p>On the other hand. for more experienced learners, particularly those learning to design their own functions and packages, the evolution of grouping in the tidyverse can be an interesting subject to review.&lt;/p>
&lt;h2 id="quality-of-life-improvements-to-case_when-and-if_else">Quality of life improvements to &lt;code>case_when()&lt;/code> and &lt;code>if_else()&lt;/code>
&lt;a href="#quality-of-life-improvements-to-case_when-and-if_else">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>
&lt;h3 id="case_when">&lt;code>case_when()&lt;/code>
&lt;a href="#case_when">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>Previously, when writing a
&lt;a href="https://dplyr.tidyverse.org/reference/case_when.html" target="_blank" rel="noopener">&lt;code>case_when()&lt;/code>&lt;/a> statement, you had to use &lt;code>TRUE&lt;/code> to indicate &amp;ldquo;all else&amp;rdquo;. Additionally,
&lt;a href="https://dplyr.tidyverse.org/reference/case_when.html" target="_blank" rel="noopener">&lt;code>case_when()&lt;/code>&lt;/a> has historically been strict about the types on the right-hand side, e.g., requiring &lt;code>NA_character&lt;/code> when other right-hand side values are characters, and not letting you get away with just &lt;code>NA&lt;/code>.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'># previously
df |>
mutate(
x = case_when(
&lt;condition 1> ~ "value 1",
&lt;condition 2> ~ "value 2",
&lt;condition 3> ~ "value 3",
TRUE ~ NA_character_
)
)
&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>Now, optionally, you can define &amp;ldquo;all else&amp;rdquo; in a &lt;code>.default&lt;/code> argument of
&lt;a href="https://dplyr.tidyverse.org/reference/case_when.html" target="_blank" rel="noopener">&lt;code>case_when()&lt;/code>&lt;/a> and you no longer need to worry about the type of &lt;code>NA&lt;/code> you use on the right-hand side.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'># now, optionally
df |>
mutate(
x = case_when(
&lt;condition 1> ~ "value 1",
&lt;condition 2> ~ "value 2",
&lt;condition 3> ~ "value 3",
.default = NA
)
)
&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>For example, you can now do something like the following when creating a categorical version of a numerical variable that has some &lt;code>NA&lt;/code>s.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>penguins&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> bm_cat &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/case_when.html'>case_when&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/NA.html'>is.na&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>body_mass_g&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>~&lt;/span> &lt;span class='kc'>NA&lt;/span>,&lt;/span>
&lt;span> &lt;span class='nv'>body_mass_g&lt;/span> &lt;span class='o'>&amp;lt;&lt;/span> &lt;span class='m'>3550&lt;/span> &lt;span class='o'>~&lt;/span> &lt;span class='s'>"Small"&lt;/span>,&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/between.html'>between&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>body_mass_g&lt;/span>, &lt;span class='m'>3550&lt;/span>, &lt;span class='m'>4750&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>~&lt;/span> &lt;span class='s'>"Medium"&lt;/span>,&lt;/span>
&lt;span> .default &lt;span class='o'>=&lt;/span> &lt;span class='s'>"Large"&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/relocate.html'>relocate&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>body_mass_g&lt;/span>, &lt;span class='nv'>bm_cat&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 344 × 9&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; body_mass_g bm_cat species island bill_length_mm bill_depth_mm&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;int&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;chr&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;fct&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;fct&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 1&lt;/span> &lt;span style='text-decoration: underline;'>3&lt;/span>750 Medium Adelie Torgersen 39.1 18.7&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 2&lt;/span> &lt;span style='text-decoration: underline;'>3&lt;/span>800 Medium Adelie Torgersen 39.5 17.4&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 3&lt;/span> &lt;span style='text-decoration: underline;'>3&lt;/span>250 Small Adelie Torgersen 40.3 18 &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 4&lt;/span> &lt;span style='color: #BB0000;'>NA&lt;/span> &lt;span style='color: #BB0000;'>NA&lt;/span> Adelie Torgersen &lt;span style='color: #BB0000;'>NA&lt;/span> &lt;span style='color: #BB0000;'>NA&lt;/span> &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 5&lt;/span> &lt;span style='text-decoration: underline;'>3&lt;/span>450 Small Adelie Torgersen 36.7 19.3&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 6&lt;/span> &lt;span style='text-decoration: underline;'>3&lt;/span>650 Medium Adelie Torgersen 39.3 20.6&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 7&lt;/span> &lt;span style='text-decoration: underline;'>3&lt;/span>625 Medium Adelie Torgersen 38.9 17.8&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 8&lt;/span> &lt;span style='text-decoration: underline;'>4&lt;/span>675 Medium Adelie Torgersen 39.2 19.6&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 9&lt;/span> &lt;span style='text-decoration: underline;'>3&lt;/span>475 Small Adelie Torgersen 34.1 18.1&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>10&lt;/span> &lt;span style='text-decoration: underline;'>4&lt;/span>250 Medium Adelie Torgersen 42 20.2&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># ℹ 334 more rows&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># ℹ 3 more variables: flipper_length_mm &amp;lt;int&amp;gt;, sex &amp;lt;fct&amp;gt;, year &amp;lt;int&amp;gt;&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;h3 id="if_else">&lt;code>if_else()&lt;/code>
&lt;a href="#if_else">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>Similarly,
&lt;a href="https://dplyr.tidyverse.org/reference/if_else.html" target="_blank" rel="noopener">&lt;code>if_else()&lt;/code>&lt;/a> is no longer as strict about typed missing values either.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>penguins&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> bm_unit &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/if_else.html'>if_else&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>!&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/NA.html'>is.na&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>body_mass_g&lt;/span>&lt;span class='o'>)&lt;/span>, &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/paste.html'>paste&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>body_mass_g&lt;/span>, &lt;span class='s'>"g"&lt;/span>&lt;span class='o'>)&lt;/span>, &lt;span class='kc'>NA&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/relocate.html'>relocate&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>body_mass_g&lt;/span>, &lt;span class='nv'>bm_unit&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 344 × 9&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; body_mass_g bm_unit species island bill_length_mm bill_depth_mm&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;int&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;chr&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;fct&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;fct&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 1&lt;/span> &lt;span style='text-decoration: underline;'>3&lt;/span>750 3750 g Adelie Torgersen 39.1 18.7&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 2&lt;/span> &lt;span style='text-decoration: underline;'>3&lt;/span>800 3800 g Adelie Torgersen 39.5 17.4&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 3&lt;/span> &lt;span style='text-decoration: underline;'>3&lt;/span>250 3250 g Adelie Torgersen 40.3 18 &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 4&lt;/span> &lt;span style='color: #BB0000;'>NA&lt;/span> &lt;span style='color: #BB0000;'>NA&lt;/span> Adelie Torgersen &lt;span style='color: #BB0000;'>NA&lt;/span> &lt;span style='color: #BB0000;'>NA&lt;/span> &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 5&lt;/span> &lt;span style='text-decoration: underline;'>3&lt;/span>450 3450 g Adelie Torgersen 36.7 19.3&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 6&lt;/span> &lt;span style='text-decoration: underline;'>3&lt;/span>650 3650 g Adelie Torgersen 39.3 20.6&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 7&lt;/span> &lt;span style='text-decoration: underline;'>3&lt;/span>625 3625 g Adelie Torgersen 38.9 17.8&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 8&lt;/span> &lt;span style='text-decoration: underline;'>4&lt;/span>675 4675 g Adelie Torgersen 39.2 19.6&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 9&lt;/span> &lt;span style='text-decoration: underline;'>3&lt;/span>475 3475 g Adelie Torgersen 34.1 18.1&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>10&lt;/span> &lt;span style='text-decoration: underline;'>4&lt;/span>250 4250 g Adelie Torgersen 42 20.2&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># ℹ 334 more rows&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># ℹ 3 more variables: flipper_length_mm &amp;lt;int&amp;gt;, sex &amp;lt;fct&amp;gt;, year &amp;lt;int&amp;gt;&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>While these may be seemingly small improvements, I think they have huge benefits for teaching and learning. It&amp;rsquo;s a blessing to not have to introduce &lt;code>NA_character_&lt;/code> and friends as early as introducing
&lt;a href="https://dplyr.tidyverse.org/reference/if_else.html" target="_blank" rel="noopener">&lt;code>if_else()&lt;/code>&lt;/a> and
&lt;a href="https://dplyr.tidyverse.org/reference/case_when.html" target="_blank" rel="noopener">&lt;code>case_when()&lt;/code>&lt;/a>! Different types of &lt;code>NA&lt;/code>s are a good topic for a course on R as a programming language, statistical computing, etc. but they are unnecessarily complex for an introductory course.&lt;/p>
&lt;h2 id="new-syntax-for-separating-columns">New syntax for separating columns
&lt;a href="#new-syntax-for-separating-columns">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>The following table summarizes new syntax for separating columns in tidyr that supersede
&lt;a href="https://tidyr.tidyverse.org/reference/extract.html" target="_blank" rel="noopener">&lt;code>extract()&lt;/code>&lt;/a>,
&lt;a href="https://tidyr.tidyverse.org/reference/separate.html" target="_blank" rel="noopener">&lt;code>separate()&lt;/code>&lt;/a>, and
&lt;a href="https://tidyr.tidyverse.org/reference/separate_rows.html" target="_blank" rel="noopener">&lt;code>separate_rows()&lt;/code>&lt;/a>. These updates are motivated by the goal of achieving a set of functions that have more consistent names and arguments, have better performance, and provide a new approach for handling problems:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th align="left">&lt;/th>
&lt;th align="left">&lt;strong>MAKE COLUMNS&lt;/strong>&lt;/th>
&lt;th align="left">&lt;strong>MAKE ROWS&lt;/strong>&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td align="left">Separate with delimiter&lt;/td>
&lt;td align="left">
&lt;a href="https://tidyr.tidyverse.org/reference/separate_wider_delim.html" target="_blank" rel="noopener">&lt;code>separate_wider_delim()&lt;/code>&lt;/a>&lt;/td>
&lt;td align="left">
&lt;a href="https://tidyr.tidyverse.org/reference/separate_longer_delim.html" target="_blank" rel="noopener">&lt;code>separate_longer_delim()&lt;/code>&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="left">Separate by position&lt;/td>
&lt;td align="left">
&lt;a href="https://tidyr.tidyverse.org/reference/separate_wider_delim.html" target="_blank" rel="noopener">&lt;code>separate_wider_position()&lt;/code>&lt;/a>&lt;/td>
&lt;td align="left">
&lt;a href="https://tidyr.tidyverse.org/reference/separate_longer_delim.html" target="_blank" rel="noopener">&lt;code>separate_longer_position()&lt;/code>&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="left">Separate with regular expression&lt;/td>
&lt;td align="left">&lt;/td>
&lt;td align="left">&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>Here is an example for using some of these functions. Let&amp;rsquo;s suppose we have data on three penguins with their descriptions.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>three_penguin_descriptions&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://tibble.tidyverse.org/reference/tribble.html'>tribble&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>~&lt;/span>&lt;span class='nv'>id&lt;/span>, &lt;span class='o'>~&lt;/span>&lt;span class='nv'>description&lt;/span>,&lt;/span>
&lt;span> &lt;span class='m'>1&lt;/span>, &lt;span class='s'>"Species: Adelie, Island - Torgersen"&lt;/span>,&lt;/span>
&lt;span> &lt;span class='m'>2&lt;/span>, &lt;span class='s'>"Species: Gentoo, Island - Biscoe"&lt;/span>,&lt;/span>
&lt;span> &lt;span class='m'>3&lt;/span>, &lt;span class='s'>"Species: Chinstrap, Island - Dream"&lt;/span>,&lt;/span>
&lt;span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;/span>
&lt;span>&lt;span class='nv'>three_penguin_descriptions&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 3 × 2&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; id description &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;chr&amp;gt;&lt;/span> &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>1&lt;/span> 1 Species: Adelie, Island - Torgersen&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>2&lt;/span> 2 Species: Gentoo, Island - Biscoe &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>3&lt;/span> 3 Species: Chinstrap, Island - Dream&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>We can seaprate the description column into &lt;code>species&lt;/code> and &lt;code>island&lt;/code> with
&lt;a href="https://tidyr.tidyverse.org/reference/separate_wider_delim.html" target="_blank" rel="noopener">&lt;code>separate_wider_delim()&lt;/code>&lt;/a>:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>three_penguin_descriptions&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://tidyr.tidyverse.org/reference/separate_wider_delim.html'>separate_wider_delim&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> cols &lt;span class='o'>=&lt;/span> &lt;span class='nv'>description&lt;/span>,&lt;/span>
&lt;span> delim &lt;span class='o'>=&lt;/span> &lt;span class='s'>", "&lt;/span>,&lt;/span>
&lt;span> names &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"species"&lt;/span>, &lt;span class='s'>"island"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 3 × 3&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; id species island &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;chr&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;chr&amp;gt;&lt;/span> &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>1&lt;/span> 1 Species: Adelie Island - Torgersen&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>2&lt;/span> 2 Species: Gentoo Island - Biscoe &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>3&lt;/span> 3 Species: Chinstrap Island - Dream&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>Or we can do so with regular expressions:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>three_penguin_descriptions&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://tidyr.tidyverse.org/reference/separate_wider_delim.html'>separate_wider_regex&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> cols &lt;span class='o'>=&lt;/span> &lt;span class='nv'>description&lt;/span>,&lt;/span>
&lt;span> patterns &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;/span>
&lt;span> &lt;span class='s'>"Species: "&lt;/span>, species &lt;span class='o'>=&lt;/span> &lt;span class='s'>"[^,]+"&lt;/span>, &lt;/span>
&lt;span> &lt;span class='s'>", "&lt;/span>, &lt;/span>
&lt;span> &lt;span class='s'>"Island - "&lt;/span>, island &lt;span class='o'>=&lt;/span> &lt;span class='s'>".*"&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span> &lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 3 × 3&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; id species island &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;chr&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;chr&amp;gt;&lt;/span> &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>1&lt;/span> 1 Adelie Torgersen&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>2&lt;/span> 2 Gentoo Biscoe &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>3&lt;/span> 3 Chinstrap Dream&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>If teaching folks coming from doing data manipulation in spreadsheets, leverage that to motivate different types of &lt;code>separate_*()&lt;/code> functions, and show the benefits of programming over point-and-click software for more advanced operations like separating longer and separating with regular expressions.&lt;/p>
&lt;h2 id="new-argument-for-line-geoms-linewidth">New argument for line geoms: &lt;code>linewidth&lt;/code>
&lt;a href="#new-argument-for-line-geoms-linewidth">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>If you, like me, have a bunch of scatterplots with smooth lines overlaid on them, you might run into the following warning.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='c'># previously&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>penguins&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://tidyr.tidyverse.org/reference/drop_na.html'>drop_na&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='nv'>flipper_length_mm&lt;/span>, y &lt;span class='o'>=&lt;/span> &lt;span class='nv'>body_mass_g&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_smooth.html'>geom_smooth&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>size &lt;span class='o'>=&lt;/span> &lt;span class='m'>2&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BBBB;'>ℹ&lt;/span> Please use `linewidth` instead.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>This warning is displayed once every 8 hours.&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>Call `lifecycle::last_lifecycle_warnings()` to see where this warning was&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>generated.&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;span class='c'>#&amp;gt; `geom_smooth()` using method = 'loess' and formula = 'y ~ x'&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-42-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>Instead of &lt;code>size&lt;/code>, you should now be using &lt;code>linewidth&lt;/code>.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='c'># now&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>penguins&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://tidyr.tidyverse.org/reference/drop_na.html'>drop_na&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>|&amp;gt;&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>x &lt;span class='o'>=&lt;/span> &lt;span class='nv'>flipper_length_mm&lt;/span>, y &lt;span class='o'>=&lt;/span> &lt;span class='nv'>body_mass_g&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>+&lt;/span>&lt;/span>
&lt;span> &lt;span class='nf'>&lt;a href='https://ggplot2.tidyverse.org/reference/geom_smooth.html'>geom_smooth&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>linewidth &lt;span class='o'>=&lt;/span> &lt;span class='m'>2&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; `geom_smooth()` using method = 'loess' and formula = 'y ~ x'&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;p>&lt;img src="figs/unnamed-chunk-43-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;/div>
&lt;p>The teaching tip should be obvious here&amp;hellip; Check the output of your old teaching materials thoroughly to not make a fool of yourself when teaching! 🤣&lt;/p>
&lt;h2 id="other-highlights">Other highlights
&lt;a href="#other-highlights">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;ul>
&lt;li>
&lt;p>purrr 1.0.0: While purrr is likely not a common topic in introductory data science curricula, if you do teach iteration with purrr, you&amp;rsquo;ll want to check out the
&lt;a href="https://www.tidyverse.org/blog/2022/12/purrr-1-0-0/" target="_blank" rel="noopener">purrr 1.0.0 blog post&lt;/a>. I also highly recommend
&lt;a href="https://youtu.be/EGAs7zuRutY" target="_blank" rel="noopener">Hadley&amp;rsquo;s purrr video&lt;/a> to those who are new to purrr as well as those who want to quickly review most recent updates to it.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>webR 0.1.0: webR provides a framework for creating websites where users can run R code directly within the web browser, without R installed on their device or a supporting computational R server. This is hugely exciting for writing educational materials, like interactive lesson notes, and there&amp;rsquo;s already a Quarto extension that allows you to do this: &lt;a href="https://github.com/coatless/quarto-webr">https://github.com/coatless/quarto-webr&lt;/a>. I think this is an important space to watch for educators!&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="coming-up">Coming up
&lt;a href="#coming-up">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>I will be teaching a &amp;ldquo;Teaching Data Science Masterclass&amp;rdquo; at posit::conf(2023), with a module specifically on teaching the Tidyverse.
&lt;a href="https://youtu.be/5TVd_whxUus" target="_blank" rel="noopener">Watch the course trailer&lt;/a> and
&lt;a href="https://reg.conf.posit.co/flow/posit/positconf23/attendee-portal/page/sessioncatalog?search=%22Teaching%20Data%20Science%20Masterclass%22&amp;amp;search.sessiontype=1675316728702001wr6r" target="_blank" rel="noopener">read the full course description&lt;/a> if you&amp;rsquo;d like to find out more and sign up!&lt;/p></description></item><item><title>tidyverse 2.0.0</title><link>https://www.tidyverse.org/blog/2023/03/tidyverse-2-0-0/</link><pubDate>Wed, 08 Mar 2023 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2023/03/tidyverse-2-0-0/</guid><description>&lt;!--
TODO:
* [x] Look over / edit the post's title in the yaml
* [x] Edit (or delete) the description; note this appears in the Twitter card
* [x] Pick category and tags (see existing with [`hugodown::tidy_show_meta()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html))
* [x] Find photo &amp; update yaml metadata
* [x] Create `thumbnail-sq.jpg`; height and width should be equal
* [x] Create `thumbnail-wd.jpg`; width should be >5x height
* [x] [`hugodown::use_tidy_thumbnails()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html)
* [x] Add intro sentence, e.g. the standard tagline for the package
* [x] [`usethis::use_tidy_thanks()`](https://usethis.r-lib.org/reference/use_tidy_thanks.html)
-->
&lt;p>We&amp;rsquo;re tickled pink to announce the release of
&lt;a href="http://tidyverse.tidyverse.org/" target="_blank" rel="noopener">tidyverse&lt;/a> 2.0.0. The tidyverse is a set of packages that work in harmony because they share common data representations and API design. The tidyverse package is a &amp;ldquo;meta&amp;rdquo; package designed to make it easy to install and load core packages from the tidyverse in a single command. This is great for teaching and interactive use, but for package-development purposes we recommend that authors import only the specific packages that they use. For a complete list of changes, please see the release notes.&lt;/p>
&lt;p>You can install it from CRAN with:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/utils/install.packages.html'>install.packages&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"tidyverse"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>There&amp;rsquo;s only really one big change in tidyverse 2.0.0: lubridate is now a core member of the tidyverse! This means it&amp;rsquo;s attached automatically when you load the tidyverse:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://tidyverse.tidyverse.org'>tidyverse&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; ── &lt;span style='font-weight: bold;'>Attaching core tidyverse packages&lt;/span> ──────────────────────── tidyverse 2.0.0 ──&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>dplyr &lt;/span> 1.1.0.&lt;span style='color: #BB0000;'>9000&lt;/span> &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>readr &lt;/span> 2.1.4 &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>forcats &lt;/span> 1.0.0 &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>stringr &lt;/span> 1.5.0 &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>ggplot2 &lt;/span> 3.4.1 &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>tibble &lt;/span> 3.1.8 &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>lubridate&lt;/span> 1.9.2 &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>tidyr &lt;/span> 1.3.0 &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>purrr &lt;/span> 1.0.1 &lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; ── &lt;span style='font-weight: bold;'>Conflicts&lt;/span> ────────────────────────────────────────── tidyverse_conflicts() ──&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BB0000;'>✖&lt;/span> &lt;span style='color: #0000BB;'>dplyr&lt;/span>::&lt;span style='color: #00BB00;'>filter()&lt;/span> masks &lt;span style='color: #0000BB;'>stats&lt;/span>::filter()&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BB0000;'>✖&lt;/span> &lt;span style='color: #0000BB;'>dplyr&lt;/span>::&lt;span style='color: #00BB00;'>lag()&lt;/span> masks &lt;span style='color: #0000BB;'>stats&lt;/span>::lag()&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BBBB;'>ℹ&lt;/span> Use the &lt;a href='http://conflicted.r-lib.org/'>conflicted package&lt;/a> to force all conflicts to become errors&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>You&amp;rsquo;ll notice one other small change to the tidyverse message: we now advertise the
&lt;a href="https://conflicted.r-lib.org" target="_blank" rel="noopener">conflicted package&lt;/a>. This package has been around for a while, but we wanted to promote it a bit more heavily because it&amp;rsquo;s so useful.&lt;/p>
&lt;p>conflicted provides an alternative conflict resolution strategy, when multiple packages export a function of the same name. R&amp;rsquo;s default conflict resolution system gives precedence to the most recently loaded package. This can make it hard to detect conflicts, particularly when they&amp;rsquo;re introduced by an update to an existing package. conflicted takes a different approach, turning conflicts into errors and forcing you to choose which function to use.&lt;/p>
&lt;p>To use conflicted, all you need to do is load it:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://conflicted.r-lib.org/'>conflicted&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>Using any function that&amp;rsquo;s defined in multiple packages will now throw an error:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/filter.html'>filter&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mtcars&lt;/span>, &lt;span class='nv'>cyl&lt;/span> &lt;span class='o'>==&lt;/span> &lt;span class='m'>8&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00; font-weight: bold;'>Error&lt;/span>&lt;span style='font-weight: bold;'>:&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00;'>!&lt;/span> &lt;span style='color: #555555;'>[conflicted]&lt;/span> &lt;span style='font-weight: bold;'>filter&lt;/span> found in 2 packages.&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; Either pick the one you want with `::`:&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BBBB;'>•&lt;/span> &lt;span style='color: #0000BB;'>dplyr&lt;/span>::filter&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BBBB;'>•&lt;/span> &lt;span style='color: #0000BB;'>stats&lt;/span>::filter&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; Or declare a preference with `conflicts_prefer()`:&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BBBB;'>•&lt;/span> `conflicts_prefer(dplyr::filter)`&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BBBB;'>•&lt;/span> `conflicts_prefer(stats::filter)`&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>As the error suggests, to resolve the problem you can either namespace individual calls:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>dplyr&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/filter.html'>filter&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mtcars&lt;/span>, &lt;span class='nv'>am&lt;/span> &lt;span class='o'>&amp;amp;&lt;/span> &lt;span class='nv'>cyl&lt;/span> &lt;span class='o'>==&lt;/span> &lt;span class='m'>8&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; mpg cyl disp hp drat wt qsec vs am gear carb&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; Ford Pantera L 15.8 8 351 264 4.22 3.17 14.5 0 1 5 4&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; Maserati Bora 15.0 8 301 335 3.54 3.57 14.6 0 1 5 8&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>Or declare a session wide preference:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://conflicted.r-lib.org/reference/conflicts_prefer.html'>conflicts_prefer&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>dplyr&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/filter.html'>filter&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>[conflicted]&lt;/span> Will prefer &lt;span style='color: #0000BB; font-weight: bold;'>dplyr&lt;/span>::filter over any other package.&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/filter.html'>filter&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mtcars&lt;/span>, &lt;span class='nv'>am&lt;/span> &lt;span class='o'>&amp;amp;&lt;/span> &lt;span class='nv'>cyl&lt;/span> &lt;span class='o'>==&lt;/span> &lt;span class='m'>8&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; mpg cyl disp hp drat wt qsec vs am gear carb&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; Ford Pantera L 15.8 8 351 264 4.22 3.17 14.5 0 1 5 4&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; Maserati Bora 15.0 8 301 335 3.54 3.57 14.6 0 1 5 8&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>The conflicted package is fairly established, but it hasn&amp;rsquo;t seen a huge amount of use, so if you think of something that would make it better,
&lt;a href="https://github.com/r-lib/conflicted/issues" target="_blank" rel="noopener">please let us know!&lt;/a>.&lt;/p></description></item><item><title>stringr 1.5.0</title><link>https://www.tidyverse.org/blog/2022/12/stringr-1-5-0/</link><pubDate>Mon, 05 Dec 2022 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2022/12/stringr-1-5-0/</guid><description>&lt;!--
TODO:
* [x] Look over / edit the post's title in the yaml
* [x] Edit (or delete) the description; note this appears in the Twitter card
* [x] Pick category and tags (see existing with [`hugodown::tidy_show_meta()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html))
* [x] Find photo &amp; update yaml metadata
* [x] Create `thumbnail-sq.jpg`; height and width should be equal
* [x] Create `thumbnail-wd.jpg`; width should be >5x height
* [x] [`hugodown::use_tidy_thumbnails()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html)
* [x] Add intro sentence, e.g. the standard tagline for the package
* [ ] [`usethis::use_tidy_thanks()`](https://usethis.r-lib.org/reference/use_tidy_thanks.html)
* [ ] Update release link
-->
&lt;p>We&amp;rsquo;re chuffed to announce the release of
&lt;a href="https://stringr.tidyverse.org" target="_blank" rel="noopener">stringr&lt;/a> 1.5.0. stringr provides a cohesive set of functions designed to make working with strings as easy as possible.&lt;/p>
&lt;p>You can install it from CRAN with:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/utils/install.packages.html'>install.packages&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"stringr"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>This blog post will give you an overview of the biggest changes (you can get a detailed list of all changes from the
&lt;a href="https://stringr.tidyverse.org/news/index.html" target="_blank" rel="noopener">release notes&lt;/a>). Firstly, we need to update you on some (small) breaking changes we&amp;rsquo;ve made to make stringr more consistent with the rest of the tidyverse. Then, we&amp;rsquo;ll give a quick overview of improvements to documentation and stringr&amp;rsquo;s new license. Lastly, we&amp;rsquo;ll finish off by diving into a few of the many small, but useful, functions that we&amp;rsquo;ve accumulated in the three and half years since the last release.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://stringr.tidyverse.org'>stringr&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;h2 id="breaking-changes">Breaking changes
&lt;a href="#breaking-changes">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Lets start with the important stuff: the breaking changes. We&amp;rsquo;ve tried to keep these small and we don&amp;rsquo;t believe they&amp;rsquo;ll affect much code in the wild (they only affected ~20 of the ~1,600 packages that use stringr). But we&amp;rsquo;re believe they&amp;rsquo;re important to make as a consistent set of rules makes the tidyverse as a whole more predictable and easier to learn.&lt;/p>
&lt;h3 id="recycling-rules">Recycling rules
&lt;a href="#recycling-rules">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>stringr functions now consistently implement the tidyverse recycling rules&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>, which are stricter than the previous rules in two ways. Firstly, we no longer recycle shorter vectors that are an integer multiple of longer vectors:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://stringr.tidyverse.org/reference/str_detect.html'>str_detect&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>letters&lt;/span>, &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"x"&lt;/span>, &lt;span class='s'>"y"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00; font-weight: bold;'>Error&lt;/span>&lt;span style='font-weight: bold;'> in `str_detect()`:&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00;'>!&lt;/span> Can't recycle `string` (size 26) to match `pattern` (size 2).&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>Secondly, a 0-length vector no longer implies a 0-length output. Instead it&amp;rsquo;s recycled using the usual rules:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://stringr.tidyverse.org/reference/str_detect.html'>str_detect&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>letters&lt;/span>, &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/character.html'>character&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00; font-weight: bold;'>Error&lt;/span>&lt;span style='font-weight: bold;'> in `str_detect()`:&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00;'>!&lt;/span> Can't recycle `string` (size 26) to match `pattern` (size 0).&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;span class='nf'>&lt;a href='https://stringr.tidyverse.org/reference/str_detect.html'>str_detect&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"x"&lt;/span>, &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/character.html'>character&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; logical(0)&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>Neither of these situations occurs very commonly in data analysis, so this change primarily brings consistency with the rest of the tidyverse without affecting much existing code.&lt;/p>
&lt;p>Finally, stringr functions are generally a little stricter because we require the inputs to be vectors of some type. Again, this is unlikely to affect your data analysis code and will result in a clearer error if you accidentally pass in something weird:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://stringr.tidyverse.org/reference/str_detect.html'>str_detect&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mean&lt;/span>, &lt;span class='s'>"x"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00; font-weight: bold;'>Error&lt;/span>&lt;span style='font-weight: bold;'> in `str_detect()`:&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00;'>!&lt;/span> `string` must be a vector, not a function.&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;h3 id="empty-patterns">Empty patterns
&lt;a href="#empty-patterns">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>In many stringr functions, &lt;code>&amp;quot;&amp;quot;&lt;/code> will match or split on every character. This is motivated by base R&amp;rsquo;s
&lt;a href="https://rdrr.io/r/base/strsplit.html" target="_blank" rel="noopener">&lt;code>strsplit()&lt;/code>&lt;/a>:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/strsplit.html'>strsplit&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"abc"&lt;/span>, &lt;span class='s'>""&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>[[&lt;/span>&lt;span class='m'>1&lt;/span>&lt;span class='o'>]&lt;/span>&lt;span class='o'>]&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; [1] "a" "b" "c"&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;span class='nf'>&lt;a href='https://stringr.tidyverse.org/reference/str_split.html'>str_split&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"abc"&lt;/span>, &lt;span class='s'>""&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>[[&lt;/span>&lt;span class='m'>1&lt;/span>&lt;span class='o'>]&lt;/span>&lt;span class='o'>]&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; [1] "a" "b" "c"&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>When creating stringr (over 13 years ago!), I took this idea and ran with it, implementing similar support in every function where it might possibly work. But I missed an important problem with
&lt;a href="https://stringr.tidyverse.org/reference/str_detect.html" target="_blank" rel="noopener">&lt;code>str_detect()&lt;/code>&lt;/a>.&lt;/p>
&lt;p>What should &lt;code>str_detect(X, &amp;quot;&amp;quot;)&lt;/code> return? You can argue two ways:&lt;/p>
&lt;ul>
&lt;li>To be consistent with
&lt;a href="https://stringr.tidyverse.org/reference/str_split.html" target="_blank" rel="noopener">&lt;code>str_split()&lt;/code>&lt;/a>, it should return &lt;code>TRUE&lt;/code> whenever there are characters to match, i.e. &lt;code>x != &amp;quot;&amp;quot;&lt;/code>.&lt;/li>
&lt;li>It&amp;rsquo;s common to build up a set of possible matches by doing &lt;code>str_flatten(matches, &amp;quot;|&amp;quot;)&lt;/code>. What should this match if &lt;code>matches&lt;/code> is empty? Ideally it would match nothing implying that &lt;code>str_detect(x, &amp;quot;&amp;quot;)&lt;/code> should be equivalent to &lt;code>x == &amp;quot;&amp;quot;&lt;/code>.&lt;/li>
&lt;/ul>
&lt;p>This inconsistency potentially leads to some subtle bugs, so use of &lt;code>&amp;quot;&amp;quot;&lt;/code> in
&lt;a href="https://stringr.tidyverse.org/reference/str_detect.html" target="_blank" rel="noopener">&lt;code>str_detect()&lt;/code>&lt;/a> (and a few other related functions) is now an error:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://stringr.tidyverse.org/reference/str_detect.html'>str_detect&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>letters&lt;/span>, &lt;span class='s'>""&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00; font-weight: bold;'>Error&lt;/span>&lt;span style='font-weight: bold;'> in `str_detect()`:&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00;'>!&lt;/span> `pattern` can't be the empty string (`""`).&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;h2 id="documentation-and-licensing">Documentation and licensing
&lt;a href="#documentation-and-licensing">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Now that we&amp;rsquo;ve got the breaking changes out of the way we can focus on the new stuff 😃. Most importantly, there&amp;rsquo;s a new vignette that provides some advice if you&amp;rsquo;re transition from (or to) base R&amp;rsquo;s string functions:
&lt;a href="https://stringr.tidyverse.org/articles/from-base.html" target="_blank" rel="noopener">&lt;code>vignette(&amp;quot;from-base&amp;quot;, package = &amp;quot;stringr&amp;quot;)&lt;/code>&lt;/a>. It was written by
&lt;a href="https://sastoudt.github.io" target="_blank" rel="noopener">Sara Stoudt&lt;/a> during the 2019 Tidyverse developer day, and has finally made it to the released version!&lt;/p>
&lt;p>We&amp;rsquo;ve also spent a bunch of time reviewing the documentation, particularly the topic titles and descriptions. They&amp;rsquo;re now more informative and less duplicative, hopefully make it easier to find the function that you&amp;rsquo;re looking for. See the complete list of functions in the
&lt;a href="https://stringr.tidyverse.org/reference/index.html" target="_blank" rel="noopener">reference index&lt;/a>.&lt;/p>
&lt;p>Finally, stringr is now officially
&lt;a href="https://www.tidyverse.org/blog/2021/12/relicensing-packages/" target="_blank" rel="noopener">re-licensed as MIT&lt;/a>.&lt;/p>
&lt;h2 id="new-features">New features
&lt;a href="#new-features">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>The biggest improvement is to
&lt;a href="https://stringr.tidyverse.org/reference/str_view.html" target="_blank" rel="noopener">&lt;code>str_view()&lt;/code>&lt;/a> which has gained a bunch of new features, including using the
&lt;a href="https://cli.r-lib.org/" target="_blank" rel="noopener">cli&lt;/a> package so it can work in more places. We also have a grab bag of new functions that fill in small functionality gaps.&lt;/p>
&lt;h3 id="str_view">&lt;code>str_view()&lt;/code>
&lt;a href="#str_view">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>
&lt;a href="https://stringr.tidyverse.org/reference/str_view.html" target="_blank" rel="noopener">&lt;code>str_view()&lt;/code>&lt;/a> uses ANSI colouring rather than an HTML widget. This means it works in more places and requires fewer dependencies.
&lt;a href="https://stringr.tidyverse.org/reference/str_view.html" target="_blank" rel="noopener">&lt;code>str_view()&lt;/code>&lt;/a> now:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Displays strings with special characters:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>x&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"\\"&lt;/span>, &lt;span class='s'>"\"\nabcdef\n\""&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>x&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; [1] "\\" "\"\nabcdef\n\""&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://stringr.tidyverse.org/reference/str_view.html'>str_view&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>x&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>[1] │&lt;/span> \&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>[2] │&lt;/span> "&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>│&lt;/span> abcdef&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>│&lt;/span> "&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;/li>
&lt;li>
&lt;p>Highlights unusual whitespace characters:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://stringr.tidyverse.org/reference/str_view.html'>str_view&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"\t"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>[1] │&lt;/span> &lt;span style='color: #00BBBB;'>&amp;#123;\t&amp;#125;&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;/li>
&lt;li>
&lt;p>By default, only shows matching strings:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://stringr.tidyverse.org/reference/str_view.html'>str_view&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>fruit&lt;/span>, &lt;span class='s'>"(.)\\1"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> [1] │&lt;/span> a&lt;span style='color: #00BBBB;'>&amp;lt;pp&amp;gt;&lt;/span>le&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> [5] │&lt;/span> be&lt;span style='color: #00BBBB;'>&amp;lt;ll&amp;gt;&lt;/span> pe&lt;span style='color: #00BBBB;'>&amp;lt;pp&amp;gt;&lt;/span>er&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> [6] │&lt;/span> bilbe&lt;span style='color: #00BBBB;'>&amp;lt;rr&amp;gt;&lt;/span>y&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> [7] │&lt;/span> blackbe&lt;span style='color: #00BBBB;'>&amp;lt;rr&amp;gt;&lt;/span>y&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> [8] │&lt;/span> blackcu&lt;span style='color: #00BBBB;'>&amp;lt;rr&amp;gt;&lt;/span>ant&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> [9] │&lt;/span> bl&lt;span style='color: #00BBBB;'>&amp;lt;oo&amp;gt;&lt;/span>d orange&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>[10] │&lt;/span> bluebe&lt;span style='color: #00BBBB;'>&amp;lt;rr&amp;gt;&lt;/span>y&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>[11] │&lt;/span> boysenbe&lt;span style='color: #00BBBB;'>&amp;lt;rr&amp;gt;&lt;/span>y&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>[16] │&lt;/span> che&lt;span style='color: #00BBBB;'>&amp;lt;rr&amp;gt;&lt;/span>y&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>[17] │&lt;/span> chili pe&lt;span style='color: #00BBBB;'>&amp;lt;pp&amp;gt;&lt;/span>er&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>[19] │&lt;/span> cloudbe&lt;span style='color: #00BBBB;'>&amp;lt;rr&amp;gt;&lt;/span>y&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>[21] │&lt;/span> cranbe&lt;span style='color: #00BBBB;'>&amp;lt;rr&amp;gt;&lt;/span>y&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>[23] │&lt;/span> cu&lt;span style='color: #00BBBB;'>&amp;lt;rr&amp;gt;&lt;/span>ant&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>[28] │&lt;/span> e&lt;span style='color: #00BBBB;'>&amp;lt;gg&amp;gt;&lt;/span>plant&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>[29] │&lt;/span> elderbe&lt;span style='color: #00BBBB;'>&amp;lt;rr&amp;gt;&lt;/span>y&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>[32] │&lt;/span> goji be&lt;span style='color: #00BBBB;'>&amp;lt;rr&amp;gt;&lt;/span>y&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>[33] │&lt;/span> g&lt;span style='color: #00BBBB;'>&amp;lt;oo&amp;gt;&lt;/span>sebe&lt;span style='color: #00BBBB;'>&amp;lt;rr&amp;gt;&lt;/span>y&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>[38] │&lt;/span> hucklebe&lt;span style='color: #00BBBB;'>&amp;lt;rr&amp;gt;&lt;/span>y&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>[47] │&lt;/span> lych&lt;span style='color: #00BBBB;'>&amp;lt;ee&amp;gt;&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>[50] │&lt;/span> mulbe&lt;span style='color: #00BBBB;'>&amp;lt;rr&amp;gt;&lt;/span>y&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; ... and 9 more&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>(This makes
&lt;a href="https://stringr.tidyverse.org/reference/str_view.html" target="_blank" rel="noopener">&lt;code>str_view_all()&lt;/code>&lt;/a> redundant and hence deprecated.)&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="comparing-strings">Comparing strings
&lt;a href="#comparing-strings">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>There are three new functions related to comparing strings:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>
&lt;a href="https://stringr.tidyverse.org/reference/str_equal.html" target="_blank" rel="noopener">&lt;code>str_equal()&lt;/code>&lt;/a> compares two character vectors using Unicode rules, optionally ignoring case:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://stringr.tidyverse.org/reference/str_equal.html'>str_equal&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"a"&lt;/span>, &lt;span class='s'>"A"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; [1] FALSE&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;span class='nf'>&lt;a href='https://stringr.tidyverse.org/reference/str_equal.html'>str_equal&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"a"&lt;/span>, &lt;span class='s'>"A"&lt;/span>, ignore_case &lt;span class='o'>=&lt;/span> &lt;span class='kc'>TRUE&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; [1] TRUE&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;/li>
&lt;li>
&lt;p>
&lt;a href="https://stringr.tidyverse.org/reference/str_order.html" target="_blank" rel="noopener">&lt;code>str_rank()&lt;/code>&lt;/a> completes the set of order/rank/sort functions:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://stringr.tidyverse.org/reference/str_order.html'>str_rank&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"a"&lt;/span>, &lt;span class='s'>"c"&lt;/span>, &lt;span class='s'>"b"&lt;/span>, &lt;span class='s'>"b"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; [1] 1 4 2 2&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;span class='c'># compare to:&lt;/span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://stringr.tidyverse.org/reference/str_order.html'>str_order&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"a"&lt;/span>, &lt;span class='s'>"c"&lt;/span>, &lt;span class='s'>"b"&lt;/span>, &lt;span class='s'>"b"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; [1] 1 3 4 2&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;/li>
&lt;li>
&lt;p>
&lt;a href="https://stringr.tidyverse.org/reference/str_unique.html" target="_blank" rel="noopener">&lt;code>str_unique()&lt;/code>&lt;/a> returns unique values, optionally ignoring case:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://stringr.tidyverse.org/reference/str_unique.html'>str_unique&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"a"&lt;/span>, &lt;span class='s'>"a"&lt;/span>, &lt;span class='s'>"A"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; [1] "a" "A"&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;span class='nf'>&lt;a href='https://stringr.tidyverse.org/reference/str_unique.html'>str_unique&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"a"&lt;/span>, &lt;span class='s'>"a"&lt;/span>, &lt;span class='s'>"A"&lt;/span>&lt;span class='o'>)&lt;/span>, ignore_case &lt;span class='o'>=&lt;/span> &lt;span class='kc'>TRUE&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; [1] "a"&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;/li>
&lt;/ul>
&lt;h3 id="splitting">Splitting
&lt;a href="#splitting">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>
&lt;a href="https://stringr.tidyverse.org/reference/str_split.html" target="_blank" rel="noopener">&lt;code>str_split()&lt;/code>&lt;/a> gains two useful variants:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>
&lt;a href="https://stringr.tidyverse.org/reference/str_split.html" target="_blank" rel="noopener">&lt;code>str_split_1()&lt;/code>&lt;/a> is tailored for the special case of splitting up a single string. It returns a character vector, not a list, and errors if you try and give it multiple values:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://stringr.tidyverse.org/reference/str_split.html'>str_split_1&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"x-y-z"&lt;/span>, &lt;span class='s'>"-"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; [1] "x" "y" "z"&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;span class='nf'>&lt;a href='https://stringr.tidyverse.org/reference/str_split.html'>str_split_1&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"x-y"&lt;/span>, &lt;span class='s'>"a-b-c"&lt;/span>&lt;span class='o'>)&lt;/span>, &lt;span class='s'>"-"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00; font-weight: bold;'>Error&lt;/span>&lt;span style='font-weight: bold;'> in `str_split_1()`:&lt;/span>&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; &lt;span style='color: #BBBB00;'>!&lt;/span> `string` must be a single string, not a character vector.&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>It&amp;rsquo;s a shortcut for the common pattern of &lt;code>unlist(str_split(x, &amp;quot; &amp;quot;))&lt;/code>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>
&lt;a href="https://stringr.tidyverse.org/reference/str_split.html" target="_blank" rel="noopener">&lt;code>str_split_i()&lt;/code>&lt;/a> extracts a single piece from the split string:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>x&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"a-b-c"&lt;/span>, &lt;span class='s'>"d-e"&lt;/span>, &lt;span class='s'>"f-g-h-i"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://stringr.tidyverse.org/reference/str_split.html'>str_split_i&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>x&lt;/span>, &lt;span class='s'>"-"&lt;/span>, &lt;span class='m'>2&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; [1] "b" "e" "g"&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://stringr.tidyverse.org/reference/str_split.html'>str_split_i&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>x&lt;/span>, &lt;span class='s'>"-"&lt;/span>, &lt;span class='m'>4&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; [1] NA NA "i"&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://stringr.tidyverse.org/reference/str_split.html'>str_split_i&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>x&lt;/span>, &lt;span class='s'>"-"&lt;/span>, &lt;span class='o'>-&lt;/span>&lt;span class='m'>1&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; [1] "c" "e" "i"&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;/li>
&lt;/ul>
&lt;h3 id="miscellaneous">Miscellaneous
&lt;a href="#miscellaneous">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;ul>
&lt;li>
&lt;p>
&lt;a href="https://stringr.tidyverse.org/reference/str_escape.html" target="_blank" rel="noopener">&lt;code>str_escape()&lt;/code>&lt;/a> escapes regular expression metacharacters, providing an alternative to
&lt;a href="https://stringr.tidyverse.org/reference/modifiers.html" target="_blank" rel="noopener">&lt;code>fixed()&lt;/code>&lt;/a> if you want to compose a pattern from user supplied strings:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://stringr.tidyverse.org/reference/str_view.html'>str_view&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"[hello]"&lt;/span>, &lt;span class='nf'>&lt;a href='https://stringr.tidyverse.org/reference/str_escape.html'>str_escape&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"[]"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;/li>
&lt;li>
&lt;p>
&lt;a href="https://stringr.tidyverse.org/reference/str_extract.html" target="_blank" rel="noopener">&lt;code>str_extract()&lt;/code>&lt;/a> can now extract a capturing group instead of the complete match:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>x&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"Chapter 1"&lt;/span>, &lt;span class='s'>"Section 2.3"&lt;/span>, &lt;span class='s'>"Chapter 3"&lt;/span>, &lt;span class='s'>"Section 4.1.1"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://stringr.tidyverse.org/reference/str_extract.html'>str_extract&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>x&lt;/span>, &lt;span class='s'>"([A-Za-z]+) ([0-9.]+)"&lt;/span>, group &lt;span class='o'>=&lt;/span> &lt;span class='m'>1&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; [1] "Chapter" "Section" "Chapter" "Section"&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;span class='nf'>&lt;a href='https://stringr.tidyverse.org/reference/str_extract.html'>str_extract&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>x&lt;/span>, &lt;span class='s'>"([A-Za-z]+) ([0-9.]+)"&lt;/span>, group &lt;span class='o'>=&lt;/span> &lt;span class='m'>2&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; [1] "1" "2.3" "3" "4.1.1"&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;/li>
&lt;li>
&lt;p>
&lt;a href="https://stringr.tidyverse.org/reference/str_flatten.html" target="_blank" rel="noopener">&lt;code>str_flatten()&lt;/code>&lt;/a> gains a &lt;code>last&lt;/code> argument which is used to power the new
&lt;a href="https://stringr.tidyverse.org/reference/str_flatten.html" target="_blank" rel="noopener">&lt;code>str_flatten_comma()&lt;/code>&lt;/a>:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nf'>&lt;a href='https://stringr.tidyverse.org/reference/str_flatten.html'>str_flatten_comma&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"cats"&lt;/span>, &lt;span class='s'>"dogs"&lt;/span>, &lt;span class='s'>"mice"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; [1] "cats, dogs, mice"&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;span class='nf'>&lt;a href='https://stringr.tidyverse.org/reference/str_flatten.html'>str_flatten_comma&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"cats"&lt;/span>, &lt;span class='s'>"dogs"&lt;/span>, &lt;span class='s'>"mice"&lt;/span>&lt;span class='o'>)&lt;/span>, last &lt;span class='o'>=&lt;/span> &lt;span class='s'>" and "&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; [1] "cats, dogs and mice"&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;span class='nf'>&lt;a href='https://stringr.tidyverse.org/reference/str_flatten.html'>str_flatten_comma&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"cats"&lt;/span>, &lt;span class='s'>"dogs"&lt;/span>, &lt;span class='s'>"mice"&lt;/span>&lt;span class='o'>)&lt;/span>, last &lt;span class='o'>=&lt;/span> &lt;span class='s'>", and "&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; [1] "cats, dogs, and mice"&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;/span>
&lt;span>&lt;span class='c'># correctly handles the two element case with the Oxford comma&lt;/span>&lt;/span>
&lt;span>&lt;span class='nf'>&lt;a href='https://stringr.tidyverse.org/reference/str_flatten.html'>str_flatten_comma&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"cats"&lt;/span>, &lt;span class='s'>"dogs"&lt;/span>&lt;span class='o'>)&lt;/span>, last &lt;span class='o'>=&lt;/span> &lt;span class='s'>", and "&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; [1] "cats and dogs"&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;/li>
&lt;li>
&lt;p>
&lt;a href="https://stringr.tidyverse.org/reference/str_like.html" target="_blank" rel="noopener">&lt;code>str_like()&lt;/code>&lt;/a> works like
&lt;a href="https://stringr.tidyverse.org/reference/str_detect.html" target="_blank" rel="noopener">&lt;code>str_detect()&lt;/code>&lt;/a> but uses SQL&amp;rsquo;s LIKE syntax:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span>&lt;span class='nv'>fruit&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"apple"&lt;/span>, &lt;span class='s'>"banana"&lt;/span>, &lt;span class='s'>"pear"&lt;/span>, &lt;span class='s'>"pineapple"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/span>
&lt;span>&lt;span class='nv'>fruit&lt;/span>&lt;span class='o'>[&lt;/span>&lt;span class='nf'>&lt;a href='https://stringr.tidyverse.org/reference/str_like.html'>str_like&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>fruit&lt;/span>, &lt;span class='s'>"%apple"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>]&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; [1] "apple" "pineapple"&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;span>&lt;span class='nv'>fruit&lt;/span>&lt;span class='o'>[&lt;/span>&lt;span class='nf'>&lt;a href='https://stringr.tidyverse.org/reference/str_like.html'>str_like&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>fruit&lt;/span>, &lt;span class='s'>"p__r"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>]&lt;/span>&lt;/span>
&lt;span>&lt;span class='c'>#&amp;gt; [1] "pear"&lt;/span>&lt;/span>
&lt;span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;/li>
&lt;/ul>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>A big thanks to all 114 folks who contributed to this release through pull requests and issues!
&lt;a href="https://github.com/aaronrudkin" target="_blank" rel="noopener">@aaronrudkin&lt;/a>,
&lt;a href="https://github.com/adisarid" target="_blank" rel="noopener">@adisarid&lt;/a>,
&lt;a href="https://github.com/AleSR13" target="_blank" rel="noopener">@AleSR13&lt;/a>,
&lt;a href="https://github.com/anfederico" target="_blank" rel="noopener">@anfederico&lt;/a>,
&lt;a href="https://github.com/AR1337" target="_blank" rel="noopener">@AR1337&lt;/a>,
&lt;a href="https://github.com/arisp99" target="_blank" rel="noopener">@arisp99&lt;/a>,
&lt;a href="https://github.com/avila" target="_blank" rel="noopener">@avila&lt;/a>,
&lt;a href="https://github.com/balthasars" target="_blank" rel="noopener">@balthasars&lt;/a>,
&lt;a href="https://github.com/batpigandme" target="_blank" rel="noopener">@batpigandme&lt;/a>,
&lt;a href="https://github.com/bbarros50" target="_blank" rel="noopener">@bbarros50&lt;/a>,
&lt;a href="https://github.com/bbo2adwuff" target="_blank" rel="noopener">@bbo2adwuff&lt;/a>,
&lt;a href="https://github.com/bensenmansen" target="_blank" rel="noopener">@bensenmansen&lt;/a>,
&lt;a href="https://github.com/bfgray3" target="_blank" rel="noopener">@bfgray3&lt;/a>,
&lt;a href="https://github.com/Bisaloo" target="_blank" rel="noopener">@Bisaloo&lt;/a>,
&lt;a href="https://github.com/bonmac" target="_blank" rel="noopener">@bonmac&lt;/a>,
&lt;a href="https://github.com/botan" target="_blank" rel="noopener">@botan&lt;/a>,
&lt;a href="https://github.com/bshor" target="_blank" rel="noopener">@bshor&lt;/a>,
&lt;a href="https://github.com/carlganz" target="_blank" rel="noopener">@carlganz&lt;/a>,
&lt;a href="https://github.com/chintanp" target="_blank" rel="noopener">@chintanp&lt;/a>,
&lt;a href="https://github.com/chrimaho" target="_blank" rel="noopener">@chrimaho&lt;/a>,
&lt;a href="https://github.com/chris2b5" target="_blank" rel="noopener">@chris2b5&lt;/a>,
&lt;a href="https://github.com/clemenshug" target="_blank" rel="noopener">@clemenshug&lt;/a>,
&lt;a href="https://github.com/courtiol" target="_blank" rel="noopener">@courtiol&lt;/a>,
&lt;a href="https://github.com/dachosen1" target="_blank" rel="noopener">@dachosen1&lt;/a>,
&lt;a href="https://github.com/dan-reznik" target="_blank" rel="noopener">@dan-reznik&lt;/a>,
&lt;a href="https://github.com/datawookie" target="_blank" rel="noopener">@datawookie&lt;/a>,
&lt;a href="https://github.com/david-romano" target="_blank" rel="noopener">@david-romano&lt;/a>,
&lt;a href="https://github.com/DavisVaughan" target="_blank" rel="noopener">@DavisVaughan&lt;/a>,
&lt;a href="https://github.com/dbarrows" target="_blank" rel="noopener">@dbarrows&lt;/a>,
&lt;a href="https://github.com/deann88" target="_blank" rel="noopener">@deann88&lt;/a>,
&lt;a href="https://github.com/denrou" target="_blank" rel="noopener">@denrou&lt;/a>,
&lt;a href="https://github.com/deschen1" target="_blank" rel="noopener">@deschen1&lt;/a>,
&lt;a href="https://github.com/dsg38" target="_blank" rel="noopener">@dsg38&lt;/a>,
&lt;a href="https://github.com/dtburk" target="_blank" rel="noopener">@dtburk&lt;/a>,
&lt;a href="https://github.com/elbersb" target="_blank" rel="noopener">@elbersb&lt;/a>,
&lt;a href="https://github.com/geotheory" target="_blank" rel="noopener">@geotheory&lt;/a>,
&lt;a href="https://github.com/ghost" target="_blank" rel="noopener">@ghost&lt;/a>,
&lt;a href="https://github.com/GrimTrigger88" target="_blank" rel="noopener">@GrimTrigger88&lt;/a>,
&lt;a href="https://github.com/hadley" target="_blank" rel="noopener">@hadley&lt;/a>,
&lt;a href="https://github.com/iago-pssjd" target="_blank" rel="noopener">@iago-pssjd&lt;/a>,
&lt;a href="https://github.com/IndigoJay" target="_blank" rel="noopener">@IndigoJay&lt;/a>,
&lt;a href="https://github.com/jashapiro" target="_blank" rel="noopener">@jashapiro&lt;/a>,
&lt;a href="https://github.com/JBGruber" target="_blank" rel="noopener">@JBGruber&lt;/a>,
&lt;a href="https://github.com/jennybc" target="_blank" rel="noopener">@jennybc&lt;/a>,
&lt;a href="https://github.com/jimhester" target="_blank" rel="noopener">@jimhester&lt;/a>,
&lt;a href="https://github.com/jjesusfilho" target="_blank" rel="noopener">@jjesusfilho&lt;/a>,
&lt;a href="https://github.com/jmbarbone" target="_blank" rel="noopener">@jmbarbone&lt;/a>,
&lt;a href="https://github.com/joethorley" target="_blank" rel="noopener">@joethorley&lt;/a>,
&lt;a href="https://github.com/jonas-hag" target="_blank" rel="noopener">@jonas-hag&lt;/a>,
&lt;a href="https://github.com/jonthegeek" target="_blank" rel="noopener">@jonthegeek&lt;/a>,
&lt;a href="https://github.com/joshyam-k" target="_blank" rel="noopener">@joshyam-k&lt;/a>,
&lt;a href="https://github.com/jpeacock29" target="_blank" rel="noopener">@jpeacock29&lt;/a>,
&lt;a href="https://github.com/jzadra" target="_blank" rel="noopener">@jzadra&lt;/a>,
&lt;a href="https://github.com/KasperThystrup" target="_blank" rel="noopener">@KasperThystrup&lt;/a>,
&lt;a href="https://github.com/kendonB" target="_blank" rel="noopener">@kendonB&lt;/a>,
&lt;a href="https://github.com/kieran-mace" target="_blank" rel="noopener">@kieran-mace&lt;/a>,
&lt;a href="https://github.com/kiernann" target="_blank" rel="noopener">@kiernann&lt;/a>,
&lt;a href="https://github.com/Kodiologist" target="_blank" rel="noopener">@Kodiologist&lt;/a>,
&lt;a href="https://github.com/leej3" target="_blank" rel="noopener">@leej3&lt;/a>,
&lt;a href="https://github.com/leowill01" target="_blank" rel="noopener">@leowill01&lt;/a>,
&lt;a href="https://github.com/LimaRAF" target="_blank" rel="noopener">@LimaRAF&lt;/a>,
&lt;a href="https://github.com/lmwang9527" target="_blank" rel="noopener">@lmwang9527&lt;/a>,
&lt;a href="https://github.com/Ludsfer" target="_blank" rel="noopener">@Ludsfer&lt;/a>,
&lt;a href="https://github.com/lz01" target="_blank" rel="noopener">@lz01&lt;/a>,
&lt;a href="https://github.com/Marcade80" target="_blank" rel="noopener">@Marcade80&lt;/a>,
&lt;a href="https://github.com/Mashin6" target="_blank" rel="noopener">@Mashin6&lt;/a>,
&lt;a href="https://github.com/MattCowgill" target="_blank" rel="noopener">@MattCowgill&lt;/a>,
&lt;a href="https://github.com/maxheld83" target="_blank" rel="noopener">@maxheld83&lt;/a>,
&lt;a href="https://github.com/mgirlich" target="_blank" rel="noopener">@mgirlich&lt;/a>,
&lt;a href="https://github.com/MichaelChirico" target="_blank" rel="noopener">@MichaelChirico&lt;/a>,
&lt;a href="https://github.com/michaelweylandt" target="_blank" rel="noopener">@michaelweylandt&lt;/a>,
&lt;a href="https://github.com/mikeaalv" target="_blank" rel="noopener">@mikeaalv&lt;/a>,
&lt;a href="https://github.com/misea" target="_blank" rel="noopener">@misea&lt;/a>,
&lt;a href="https://github.com/mitchelloharawild" target="_blank" rel="noopener">@mitchelloharawild&lt;/a>,
&lt;a href="https://github.com/mkvasnicka" target="_blank" rel="noopener">@mkvasnicka&lt;/a>,
&lt;a href="https://github.com/mrcaseb" target="_blank" rel="noopener">@mrcaseb&lt;/a>,
&lt;a href="https://github.com/mtnbikerjoshua" target="_blank" rel="noopener">@mtnbikerjoshua&lt;/a>,
&lt;a href="https://github.com/mwip" target="_blank" rel="noopener">@mwip&lt;/a>,
&lt;a href="https://github.com/nachovoss" target="_blank" rel="noopener">@nachovoss&lt;/a>,
&lt;a href="https://github.com/neonira" target="_blank" rel="noopener">@neonira&lt;/a>,
&lt;a href="https://github.com/Nischal-Karki-ATW" target="_blank" rel="noopener">@Nischal-Karki-ATW&lt;/a>,
&lt;a href="https://github.com/oliverbeagley" target="_blank" rel="noopener">@oliverbeagley&lt;/a>,
&lt;a href="https://github.com/orgadish" target="_blank" rel="noopener">@orgadish&lt;/a>,
&lt;a href="https://github.com/pachadotdev" target="_blank" rel="noopener">@pachadotdev&lt;/a>,
&lt;a href="https://github.com/PathosEthosLogos" target="_blank" rel="noopener">@PathosEthosLogos&lt;/a>,
&lt;a href="https://github.com/pdelboca" target="_blank" rel="noopener">@pdelboca&lt;/a>,
&lt;a href="https://github.com/petermeissner" target="_blank" rel="noopener">@petermeissner&lt;/a>,
&lt;a href="https://github.com/phargarten2" target="_blank" rel="noopener">@phargarten2&lt;/a>,
&lt;a href="https://github.com/programLyrique" target="_blank" rel="noopener">@programLyrique&lt;/a>,
&lt;a href="https://github.com/psads-git" target="_blank" rel="noopener">@psads-git&lt;/a>,
&lt;a href="https://github.com/psychelzh" target="_blank" rel="noopener">@psychelzh&lt;/a>,
&lt;a href="https://github.com/PursuitOfDataScience" target="_blank" rel="noopener">@PursuitOfDataScience&lt;/a>,
&lt;a href="https://github.com/richardjtelford" target="_blank" rel="noopener">@richardjtelford&lt;/a>,
&lt;a href="https://github.com/richelbilderbeek" target="_blank" rel="noopener">@richelbilderbeek&lt;/a>,
&lt;a href="https://github.com/rjpat" target="_blank" rel="noopener">@rjpat&lt;/a>,
&lt;a href="https://github.com/romatik" target="_blank" rel="noopener">@romatik&lt;/a>,
&lt;a href="https://github.com/rressler" target="_blank" rel="noopener">@rressler&lt;/a>,
&lt;a href="https://github.com/rwbaer" target="_blank" rel="noopener">@rwbaer&lt;/a>,
&lt;a href="https://github.com/salim-b" target="_blank" rel="noopener">@salim-b&lt;/a>,
&lt;a href="https://github.com/sammo3182" target="_blank" rel="noopener">@sammo3182&lt;/a>,
&lt;a href="https://github.com/sastoudt" target="_blank" rel="noopener">@sastoudt&lt;/a>,
&lt;a href="https://github.com/SchmidtPaul" target="_blank" rel="noopener">@SchmidtPaul&lt;/a>,
&lt;a href="https://github.com/seasmith" target="_blank" rel="noopener">@seasmith&lt;/a>,
&lt;a href="https://github.com/selesnow" target="_blank" rel="noopener">@selesnow&lt;/a>,
&lt;a href="https://github.com/slee981" target="_blank" rel="noopener">@slee981&lt;/a>,
&lt;a href="https://github.com/Tal1987" target="_blank" rel="noopener">@Tal1987&lt;/a>,
&lt;a href="https://github.com/tanzatanza" target="_blank" rel="noopener">@tanzatanza&lt;/a>,
&lt;a href="https://github.com/THChan11" target="_blank" rel="noopener">@THChan11&lt;/a>,
&lt;a href="https://github.com/travis-leith" target="_blank" rel="noopener">@travis-leith&lt;/a>,
&lt;a href="https://github.com/vladtarko" target="_blank" rel="noopener">@vladtarko&lt;/a>,
&lt;a href="https://github.com/wdenton" target="_blank" rel="noopener">@wdenton&lt;/a>,
&lt;a href="https://github.com/wurli" target="_blank" rel="noopener">@wurli&lt;/a>,
&lt;a href="https://github.com/Yingjie4Science" target="_blank" rel="noopener">@Yingjie4Science&lt;/a>, and
&lt;a href="https://github.com/zeehio" target="_blank" rel="noopener">@zeehio&lt;/a>.&lt;/p>
&lt;section class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1" role="doc-endnote">
&lt;p>You might wonder why we developed our own set of recycling rules for the tidyverse instead of using the base R rules. That&amp;rsquo;s because, unfortunately, there isn&amp;rsquo;t a consistent set of rules used by base R, but a
&lt;a href="https://vctrs.r-lib.org/articles/type-size.html#appendix-recycling-in-base-r" target="_blank" rel="noopener">suite of variations&lt;/a>. &lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/section></description></item><item><title>Teaching the tidyverse in 2021</title><link>https://www.tidyverse.org/blog/2021/08/teach-tidyverse-2021/</link><pubDate>Tue, 31 Aug 2021 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2021/08/teach-tidyverse-2021/</guid><description>&lt;!--
TODO:
* [ x ] Look over / edit the post's title in the yaml
* [ x ] Edit (or delete) the description; note this appears in the Twitter card
* [ x ] Pick category and tags (see existing with [`hugodown::tidy_show_meta()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html))
* [ x ] Find photo &amp; update yaml metadata
* [ x ] Create `thumbnail-sq.jpg`; height and width should be equal
* [ x ] Create `thumbnail-wd.jpg`; width should be >5x height
* [ x ] [`hugodown::use_tidy_thumbnails()`](https://rdrr.io/pkg/hugodown/man/use_tidy_post.html)
* [ x ] Add intro sentence, e.g. the standard tagline for the package
* [ ] [`usethis::use_tidy_thanks()`](https://usethis.r-lib.org/reference/use_tidy_thanks.html) -- not applicable
-->
&lt;p>Last summer I wrote a series of blog posts titled
&lt;a href="https://education.rstudio.com/blog/2020/07/teaching-the-tidyverse-in-2020-part-4-when-to-purrr/" target="_blank" rel="noopener">teaching the tidyverse in 2020&lt;/a>. As we quickly approach the end of the summer (in the northern hemisphere) and the start of a new academic year, it seems like a good time to provide a new update for teaching the tidyverse, in 2021. The main audience for this post is educators who teach the tidyverse and who might want to bring their teaching materials up to date with updates to the tidyverse that happened over the past year. Much of what is discussed here has already been covered in package update posts on this blog, but my goal is to summarize the highlights that are most relevant to teaching data science with the tidyverse, particularly to new learners.&lt;/p>
&lt;p>Specifically, I&amp;rsquo;ll discuss&lt;/p>
&lt;ul>
&lt;li>
&lt;a href="#new-teaching-and-learning-resources">New teaching and learning resources&lt;/a>&lt;/li>
&lt;li>
&lt;a href="#lifecycle-stages">Lifecycle stages&lt;/a>&lt;/li>
&lt;li>
&lt;a href="#making-reproducible-examples-with-reprex">Making reproducible examples with &lt;strong>reprex&lt;/strong>&lt;/a>&lt;/li>
&lt;li>
&lt;a href="#building-on-tidyverse-for-modeling-with-tidymodels">Building on the tidyverse for modeling with &lt;strong>tidymodels&lt;/strong>&lt;/a>&lt;/li>
&lt;li>
&lt;a href="#reading-data-with-readr">Reading data with &lt;strong>readr&lt;/strong>&lt;/a>&lt;/li>
&lt;li>
&lt;a href="#web-scraping-with-rvest">Web scraping with &lt;strong>rvest&lt;/strong>&lt;/a>&lt;/li>
&lt;li>
&lt;a href="#sql-and-datatable-translations-with-dbplyr-and-dtplyr">SQL and data.table translations with &lt;strong>dbplyr&lt;/strong> and &lt;strong>dtplyr&lt;/strong>&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>Let&amp;rsquo;s get started!&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://tidyverse.tidyverse.org'>tidyverse&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; ── &lt;span style='font-weight: bold;'>Attaching packages&lt;/span> ─────────────────────────────────────── tidyverse 1.3.1 ──&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>ggplot2&lt;/span> 3.3.5 &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>purrr &lt;/span> 0.3.4&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>tibble &lt;/span> 3.1.4 &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>dplyr &lt;/span> 1.0.7&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>tidyr &lt;/span> 1.1.3 &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>stringr&lt;/span> 1.4.0&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>readr &lt;/span> 2.0.1 &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>forcats&lt;/span> 0.5.1&lt;/span>
&lt;span class='c'>#&amp;gt; ── &lt;span style='font-weight: bold;'>Conflicts&lt;/span> ────────────────────────────────────────── tidyverse_conflicts() ──&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #BB0000;'>✖&lt;/span> &lt;span style='color: #0000BB;'>dplyr&lt;/span>::&lt;span style='color: #00BB00;'>filter()&lt;/span> masks &lt;span style='color: #0000BB;'>stats&lt;/span>::filter()&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #BB0000;'>✖&lt;/span> &lt;span style='color: #0000BB;'>dplyr&lt;/span>::&lt;span style='color: #00BB00;'>lag()&lt;/span> masks &lt;span style='color: #0000BB;'>stats&lt;/span>::lag()&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;h2 id="new-teaching-and-learning-resources">New teaching and learning resources
&lt;a href="#new-teaching-and-learning-resources">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Before we dive into specific package functionality updates, I&amp;rsquo;d like to highlight two new teaching and learning resources:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Cheatsheets:&lt;/strong> Some of the most popular learning resources for the tidyverse are the cheatsheets, many of which have recently been updated. Huge thanks to our intern
&lt;a href="https://twitter.com/avperny" target="_blank" rel="noopener">Averi Perny&lt;/a> on the fantastic work on this project! You can read more about the updates
&lt;a href="https://blog.rstudio.com/2021/08/23/cheat-sheet-updates/" target="_blank" rel="noopener">here&lt;/a> and find the new cheatsheets
&lt;a href="https://www.rstudio.com/resources/cheatsheets/" target="_blank" rel="noopener">here&lt;/a>.&lt;/li>
&lt;li>&lt;strong>ggplot2 FAQ:&lt;/strong> A new resource that might be useful for learners is the FAQ we&amp;rsquo;ve recently developed for ggplot2, which you can access
&lt;a href="https://ggplot2.tidyverse.org/articles/" target="_blank" rel="noopener">here&lt;/a>. These were compiled based on popular questions on StackOverflow and RStudio Community. Each question is accompanied with a short answer as well as an expanded example.&lt;/li>
&lt;/ul>
&lt;h2 id="lifecycle-stages">Lifecycle stages
&lt;a href="#lifecycle-stages">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>The
&lt;a href="https://lifecycle.r-lib.org/" target="_blank" rel="noopener">&lt;strong>lifecycle&lt;/strong>&lt;/a> package is used to manage the lifecycle of functions and features within the tidyverse, with clear messaging about what is still experimental and what the tidyverse team is moving away from in the future. But instead of focusing on the package that implements this concept, when teaching, I recommend focusing on the stages of the lifecycle instead. These are &lt;em>experimental&lt;/em>, &lt;em>stable&lt;/em>, &lt;em>deprecated&lt;/em>, and &lt;em>superseded&lt;/em>. The lifecycle stages are a useful guide for teaching because they help you see what the tidyverse is moving toward and what it&amp;rsquo;s moving away from. Being aware of the lifecycle stages (and their associated badges) can be helpful as you review and revise your teaching materials or as you consider incorporating new tooling into your teaching.&lt;/p>
&lt;p>The diagram below depicts the lifecycle stages of functions and packages in the tidyverse.&lt;/p>
&lt;p>&lt;img src="lifecycle.png" alt="A diagram showing the transitions between the four main stages: experimental can become stable and stable can become deprecated or superseded.">&lt;/p>
&lt;p>Let&amp;rsquo;s discuss each of these stages in detail, along with recommendations on how you might consider them in the context of teaching:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;img src="lifecycle-stable.svg" alt="Stable" style="vertical-align:middle"/> Stable indicates that breaking changes will be avoided where possible, and they&amp;rsquo;re only made if the long term benefit of such a change exceeds the short term pain of changing existing code. If breaking changes are needed, they will occur gradually. This is the default state for most functions in the tidyverse and hence the badge is generally not shown. Teaching tip: feel free to teach any stable functions, they&amp;rsquo;re here to stay for the long run!&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;img src="lifecycle-deprecated.svg" alt="Deprecated" style="vertical-align:middle"/> If a function is noted as deprecated, this means a better alternative is available and this function is scheduled for removal. Generally functions will first be soft deprecated and then deprecated. Very important functions that become deprecated might next be defunct, which means that function continues to exist but the deprecation warning turns into an error. An example of a deprecated function is
&lt;a href="https://tibble.tidyverse.org/reference/deprecated.html" target="_blank" rel="noopener">&lt;code>tibble::data_frame()&lt;/code>&lt;/a>, with the preferred alternative
&lt;a href="https://tibble.tidyverse.org/reference/tibble.html" target="_blank" rel="noopener">&lt;code>tibble::tibble()&lt;/code>&lt;/a>. Arguments to functions can also be deprecated, e.g., in
&lt;a href="https://tidyr.tidyverse.org/reference/nest.html" target="_blank" rel="noopener">&lt;code>tidyr::nest()&lt;/code>&lt;/a> the new argument &lt;code>new_col&lt;/code> makes the former &lt;code>.key&lt;/code> argument not needed, and hence &lt;code>.key&lt;/code> is deprecated. You should avoid teaching functions that are deprecated and correct their usage in your students&amp;rsquo; code by suggesting the preferred alternative.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;img src="lifecycle-superseded.svg" alt="Superseded" style="vertical-align:middle"/> Superseded indicates that there is a known better alternative for the function, but it&amp;rsquo;s not going away. Some examples include the following:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>
&lt;a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" target="_blank" rel="noopener">&lt;code>tidyr::pivot_longer()&lt;/code>&lt;/a> /
&lt;a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" target="_blank" rel="noopener">&lt;code>tidyr::pivot_wider()&lt;/code>&lt;/a> for reshaping data supersede
&lt;a href="https://tidyr.tidyverse.org/reference/spread.html" target="_blank" rel="noopener">&lt;code>tidyr::spread()&lt;/code>&lt;/a> /
&lt;a href="https://tidyr.tidyverse.org/reference/gather.html" target="_blank" rel="noopener">&lt;code>tidyr::gather()&lt;/code>&lt;/a> (More on these
&lt;a href="https://www.tidyverse.org/blog/2019/09/tidyr-1-0-0/" target="_blank" rel="noopener">here&lt;/a> and
&lt;a href="https://tidyr.tidyverse.org/articles/pivot.html" target="_blank" rel="noopener">here&lt;/a>)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>
&lt;a href="https://dplyr.tidyverse.org/reference/across.html" target="_blank" rel="noopener">&lt;code>dplyr::across()&lt;/code>&lt;/a> for working across columns supersedes scoped verbs such as
&lt;a href="https://dplyr.tidyverse.org/reference/mutate_all.html" target="_blank" rel="noopener">&lt;code>dplyr::mutate_if()&lt;/code>&lt;/a>,
&lt;a href="https://dplyr.tidyverse.org/reference/select_all.html" target="_blank" rel="noopener">&lt;code>dplyr::select_at()&lt;/code>&lt;/a>,
&lt;a href="https://dplyr.tidyverse.org/reference/select_all.html" target="_blank" rel="noopener">&lt;code>dplyr::rename_all()&lt;/code>&lt;/a>, etc. (More on this
&lt;a href="https://www.tidyverse.org/blog/2020/04/dplyr-1-0-0-colwise/" target="_blank" rel="noopener">here&lt;/a> and
&lt;a href="https://dplyr.tidyverse.org/articles/colwise.html" target="_blank" rel="noopener">here&lt;/a>)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>
&lt;a href="https://dplyr.tidyverse.org/reference/slice.html" target="_blank" rel="noopener">&lt;code>dplyr::slice_sample()&lt;/code>&lt;/a> with &lt;code>n&lt;/code> and &lt;code>prop&lt;/code> arguments supersedes
&lt;a href="https://dplyr.tidyverse.org/reference/sample_n.html" target="_blank" rel="noopener">&lt;code>dplyr::sample_n()&lt;/code>&lt;/a> /
&lt;a href="https://dplyr.tidyverse.org/reference/sample_n.html" target="_blank" rel="noopener">&lt;code>dplyr::sample_frac()&lt;/code>&lt;/a> (More on this
&lt;a href="https://www.tidyverse.org/blog/2020/03/dplyr-1-0-0-is-coming-soon/#superseded-functions" target="_blank" rel="noopener">here&lt;/a>)&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>I don&amp;rsquo;t recommend teaching superseded functions to new learners, and for learners who might be aware of them already, I would recommend discouraging their use (though not correcting, i.e., no point deductions on a formative assessment), and suggesting an alternative.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;img src="lifecycle-experimental.svg" alt="Experimental" style="vertical-align:middle"/> Experimental functions are made available so the community can try them out and provide feedback, however they come with no promises for long term stability. For example, the following have been labeled experimental for a while and have received improvements based on community feedback (and are very likely to graduate to stable in the next dplyr release):&lt;/p>
&lt;ul>
&lt;li>
&lt;p>in
&lt;a href="https://dplyr.tidyverse.org/reference/summarise.html" target="_blank" rel="noopener">&lt;code>dplyr::summarize()&lt;/code>&lt;/a>: &lt;code>.groups&lt;/code> argument to define the grouping structure of the result&lt;/p>
&lt;/li>
&lt;li>
&lt;p>in
&lt;a href="https://dplyr.tidyverse.org/reference/mutate.html" target="_blank" rel="noopener">&lt;code>dplyr::mutate()&lt;/code>&lt;/a>: &lt;code>.before&lt;/code> and &lt;code>.after&lt;/code> arguments to control where new columns should appear&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>I recommend teaching experimental functions with caution, particularly to new learners with whom you might not formally discuss the concept of a &amp;ldquo;lifecycle&amp;rdquo;. However there is no reason to discourage use of these functions &amp;ndash; if students have stumbled upon a solution that involves an experimental function or argument and has used it correctly on their own, this is likely a good indication that the experiment is working!&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>If you&amp;rsquo;d like to learn more about the tidyverse lifecycle, I recommend the following resources:&lt;/p>
&lt;ul>
&lt;li>Blog post:
&lt;a href="https://www.tidyverse.org/blog/2021/02/lifecycle-1-0-0/" target="_blank" rel="noopener">lifecycle 1.0.0&lt;/a>&lt;/li>
&lt;li>Talk:
&lt;a href="https://www.rstudio.com/resources/rstudioglobal-2021/maintaining-the-house-the-tidyverse-built/" target="_blank" rel="noopener">Maintaining the house the tidyverse built&lt;/a> by Hadley Wickham at rstudio::global(2021)&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>&lt;/li>
&lt;/ul>
&lt;h2 id="making-reproducible-examples-with-reprex">Making reproducible examples with reprex
&lt;a href="#making-reproducible-examples-with-reprex">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>The
&lt;a href="https://reprex.tidyverse.org/" target="_blank" rel="noopener">&lt;strong>reprex&lt;/strong>&lt;/a> package helps users create &lt;strong>repr&lt;/strong>oducible &lt;strong>ex&lt;/strong>amples for posting to GitHub issues, StackOverflow, in Slack messages or snippets, or even to paste into PowerPoint or Keynote slides by placing the code to be shared in your clipboard. I find reprex very useful when teaching because it helps my students provide me with broken code in a way that makes it as easy as possible for me (and for other students in the class) to help them.&lt;/p>
&lt;p>There have been
&lt;a href="https://reprex.tidyverse.org/news/index.html#reprex-1-0-0-2021-01-27" target="_blank" rel="noopener">many&lt;/a>
&lt;a href="https://reprex.tidyverse.org/news/index.html#reprex-2-0-0-2021-04-02" target="_blank" rel="noopener">exciting&lt;/a> developments in reprex over the year. The one that is perhaps most relevant to teaching are improvements that make it easier to use reprex when working in
&lt;a href="https://www.rstudio.com/products/rstudio/#rstudio-server" target="_blank" rel="noopener">RStudio Server&lt;/a> and
&lt;a href="https://rstudio.cloud/" target="_blank" rel="noopener">RStudio Cloud&lt;/a> as well as those that allow using local data when creating a reprex.&lt;/p>
&lt;p>Many courses teach R using RStudio Server or RStudio Cloud since this approach circumvents the need for students to install software and allows the instructor to have full control over the R environment their students are learning in. When working in these environments, the R code is running in a web browser and for security reasons it&amp;rsquo;s not possible for reprex to place code on your system clipboard. When creating a reprex in these environments, you can now simply select the relevant code, and run &lt;code>reprex()&lt;/code>. This will create a &lt;code>.md&lt;/code> file containing the contents of the reprex, ready for you to copy via Cmd/Ctrl+C.&lt;/p>
&lt;img src="reprex-cloud.png" alt="On the left: RStudio Cloud window with an R script with two lines of code highlighted. On the right: Result after running reprex() in the Console, including a new markdown file with the name vivid-eider_reprex.md that includes the code and the resulting output, commented out, and selected, ready to be copy pasted elsewhere. The viewer pane on the bottom right shows the stylized result of the reprex." width="1000"/>
&lt;p>The new &lt;code>wd&lt;/code> argument can help students create reprexes when they are working on an assignment involving a local data file. When &lt;code>reprex(wd = &amp;quot;.&amp;quot;)&lt;/code>, the reprex will be executed in the current working directory.&lt;sup id="fnref:2">&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref">2&lt;/a>&lt;/sup> Writing a reproducible example with a minimal dataset is better practice, but this can be quite difficult for new learners. Being able to easily use local data will make it easier for them to benefit from other aspects of reprex earlier on.&lt;/p>
&lt;p>Being able to create a reprex in the current working directory means you can also benefit from a project-level &lt;code>.Rprofile&lt;/code> if you happen to have one in your project. This is likely not going to have implications for new learners, for whom this would be an advanced concept, but it can be helpful for instructors who teach with a different suite of packages than what they locally have installed (e.g., CRAN versions for teaching vs. development versions for personal use). If this describes you, I recommend using
&lt;a href="https://rstudio.github.io/renv/index.html" target="_blank" rel="noopener">&lt;strong>renv&lt;/strong>&lt;/a> in projects where you keep teaching materials, which uses &lt;code>.Rprofile&lt;/code> to implement a project-specific package library. Then, &lt;code>reprex(wd = &amp;quot;.&amp;quot;)&lt;/code> will create a reprex using the packages in that library.&lt;/p>
&lt;p>For more on updates in reprex, read the blog posts for the
&lt;a href="https://www.tidyverse.org/blog/2021/02/reprex-1-0-0/" target="_blank" rel="noopener">1.0.0&lt;/a> and
&lt;a href="https://www.tidyverse.org/blog/2021/04/reprex-2-0-0/" target="_blank" rel="noopener">2.0.0&lt;/a> releases. And if you&amp;rsquo;re new to reprex, start
&lt;a href="https://reprex.tidyverse.org/articles/articles/learn-reprex.html" target="_blank" rel="noopener">here&lt;/a>.&lt;/p>
&lt;h2 id="building-on-tidyverse-for-modeling-with-tidymodels">Building on tidyverse for modeling with tidymodels
&lt;a href="#building-on-tidyverse-for-modeling-with-tidymodels">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>The &lt;strong>tidymodels&lt;/strong> framework is a collection of packages for modeling and machine learning using tidyverse principles. This framework has been around since 2017, but over the past year many of the packages within tidymodels have become stable and gained lots of documentation, making them attractive choices for teaching. If you&amp;rsquo;re introducing your students to data science with the tidyverse, a great next step to consider is using tidymodels when it comes to modeling and inference.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://tidymodels.tidymodels.org'>tidymodels&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; Registered S3 method overwritten by 'tune':&lt;/span>
&lt;span class='c'>#&amp;gt; method from &lt;/span>
&lt;span class='c'>#&amp;gt; required_pkgs.model_spec parsnip&lt;/span>
&lt;span class='c'>#&amp;gt; ── &lt;span style='font-weight: bold;'>Attaching packages&lt;/span> ────────────────────────────────────── tidymodels 0.1.3 ──&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>broom &lt;/span> 0.7.9 &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>rsample &lt;/span> 0.1.0 &lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>dials &lt;/span> 0.0.9 &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>tune &lt;/span> 0.1.6 &lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>infer &lt;/span> 1.0.0 &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>workflows &lt;/span> 0.2.3 &lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>modeldata &lt;/span> 0.1.1 &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>workflowsets&lt;/span> 0.1.0 &lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>parsnip &lt;/span> 0.1.7 &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>yardstick &lt;/span> 0.0.8 &lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BB00;'>✔&lt;/span> &lt;span style='color: #0000BB;'>recipes &lt;/span> 0.1.16&lt;/span>
&lt;span class='c'>#&amp;gt; ── &lt;span style='font-weight: bold;'>Conflicts&lt;/span> ───────────────────────────────────────── tidymodels_conflicts() ──&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #BB0000;'>✖&lt;/span> &lt;span style='color: #0000BB;'>scales&lt;/span>::&lt;span style='color: #00BB00;'>discard()&lt;/span> masks &lt;span style='color: #0000BB;'>purrr&lt;/span>::discard()&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #BB0000;'>✖&lt;/span> &lt;span style='color: #0000BB;'>dplyr&lt;/span>::&lt;span style='color: #00BB00;'>filter()&lt;/span> masks &lt;span style='color: #0000BB;'>stats&lt;/span>::filter()&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #BB0000;'>✖&lt;/span> &lt;span style='color: #0000BB;'>recipes&lt;/span>::&lt;span style='color: #00BB00;'>fixed()&lt;/span> masks &lt;span style='color: #0000BB;'>stringr&lt;/span>::fixed()&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #BB0000;'>✖&lt;/span> &lt;span style='color: #0000BB;'>dplyr&lt;/span>::&lt;span style='color: #00BB00;'>lag()&lt;/span> masks &lt;span style='color: #0000BB;'>stats&lt;/span>::lag()&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #BB0000;'>✖&lt;/span> &lt;span style='color: #0000BB;'>yardstick&lt;/span>::&lt;span style='color: #00BB00;'>spec()&lt;/span> masks &lt;span style='color: #0000BB;'>readr&lt;/span>::spec()&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #BB0000;'>✖&lt;/span> &lt;span style='color: #0000BB;'>recipes&lt;/span>::&lt;span style='color: #00BB00;'>step()&lt;/span> masks &lt;span style='color: #0000BB;'>stats&lt;/span>::step()&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #0000BB;'>•&lt;/span> Use &lt;span style='color: #00BB00;'>tidymodels_prefer()&lt;/span> to resolve common conflicts.&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>From a pedagogical perspective, tidymodels has three main advantages:&lt;/p>
&lt;ol>
&lt;li>Similar interfaces to different models.&lt;/li>
&lt;li>Model outputs as tibbles, which are straightforward to interact with for learners who already know how to wrangle and visualize data stored in this format.&lt;/li>
&lt;li>Features that help users avoid common machine learning pitfalls such as safeguards in functions that avoid over-fitting by making the test-training split a fundamental part of the modeling process.&lt;/li>
&lt;/ol>
&lt;p>Let&amp;rsquo;s start with the first one &amp;mdash; providing similar interfaces to models. Consider the question &amp;ldquo;&lt;em>How do you define the the number of trees when fitting a random forest model?&amp;quot;&lt;/em> The answer is generally &lt;em>&amp;quot;depends on the package: &lt;code>randomForest::randomForest()&lt;/code> uses &lt;code>ntree&lt;/code>, &lt;code>ranger::ranger()&lt;/code> uses &lt;code>num.trees&lt;/code>, Spark&amp;rsquo;s &lt;code>sparklyr::ml_random_forest()&lt;/code> uses &lt;code>num_trees&lt;/code>&amp;quot;&lt;/em>. The answer with tidymodels is a bit simpler though: &lt;em>&amp;quot;using the &lt;code>trees&lt;/code> argument in the &lt;code>rand_forest()&lt;/code> package, regardless of the engine being used to fit the model&amp;quot;&lt;/em>. This can allow new learners to focus on what&amp;quot;trees&amp;quot; mean and how one decides how many to use, instead of the precise syntax needed by the various packages that can fit random forest models.&lt;/p>
&lt;p>The pedagogical advantages of teaching modeling with the full tidymodels framework may not be clear for fitting simple models with
&lt;a href="https://rdrr.io/r/stats/lm.html" target="_blank" rel="noopener">&lt;code>lm()&lt;/code>&lt;/a>. For example, below we fit a simple linear regression model with a single predictor, using base R first and then using tidymodels.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='c'># base R&lt;/span>
&lt;span class='nf'>&lt;a href='https://rdrr.io/r/stats/lm.html'>lm&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>hwy&lt;/span> &lt;span class='o'>~&lt;/span> &lt;span class='nv'>cty&lt;/span>, data &lt;span class='o'>=&lt;/span> &lt;span class='nv'>mpg&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/summary.html'>summary&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;/span>
&lt;span class='c'>#&amp;gt; Call:&lt;/span>
&lt;span class='c'>#&amp;gt; lm(formula = hwy ~ cty, data = mpg)&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;/span>
&lt;span class='c'>#&amp;gt; Residuals:&lt;/span>
&lt;span class='c'>#&amp;gt; Min 1Q Median 3Q Max &lt;/span>
&lt;span class='c'>#&amp;gt; -5.3408 -1.2790 0.0214 1.0338 4.0461 &lt;/span>
&lt;span class='c'>#&amp;gt; &lt;/span>
&lt;span class='c'>#&amp;gt; Coefficients:&lt;/span>
&lt;span class='c'>#&amp;gt; Estimate Std. Error t value Pr(&amp;gt;|t|) &lt;/span>
&lt;span class='c'>#&amp;gt; (Intercept) 0.89204 0.46895 1.902 0.0584 . &lt;/span>
&lt;span class='c'>#&amp;gt; cty 1.33746 0.02697 49.585 &amp;lt;2e-16 ***&lt;/span>
&lt;span class='c'>#&amp;gt; ---&lt;/span>
&lt;span class='c'>#&amp;gt; Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;/span>
&lt;span class='c'>#&amp;gt; Residual standard error: 1.752 on 232 degrees of freedom&lt;/span>
&lt;span class='c'>#&amp;gt; Multiple R-squared: 0.9138, Adjusted R-squared: 0.9134 &lt;/span>
&lt;span class='c'>#&amp;gt; F-statistic: 2459 on 1 and 232 DF, p-value: &amp;lt; 2.2e-16&lt;/span>
&lt;span class='c'># tidymodels&lt;/span>
&lt;span class='nf'>linear_reg&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>set_engine&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"lm"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>fit&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>hwy&lt;/span> &lt;span class='o'>~&lt;/span> &lt;span class='nv'>cty&lt;/span>, data &lt;span class='o'>=&lt;/span> &lt;span class='nv'>mpg&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>tidy&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 2 × 5&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; term estimate std.error statistic p.value&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;chr&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>1&lt;/span> (Intercept) 0.892 0.469 1.90 5.84&lt;span style='color: #555555;'>e&lt;/span>&lt;span style='color: #BB0000;'>- 2&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>2&lt;/span> cty 1.34 0.027&lt;span style='text-decoration: underline;'>0&lt;/span> 49.6 1.87&lt;span style='color: #555555;'>e&lt;/span>&lt;span style='color: #BB0000;'>-125&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>The tidymodels approach takes a few more steps, and for a simple model like this, the only advantage is likely in the summarisation step. With &lt;code>tidy()&lt;/code>, we get the model output as a tibble, which is more straightforward to interact with programmatically and which, by default, omits the significant stars.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/stats/lm.html'>lm&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>hwy&lt;/span> &lt;span class='o'>~&lt;/span> &lt;span class='nv'>cty&lt;/span>, data &lt;span class='o'>=&lt;/span> &lt;span class='nv'>mpg&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>tidy&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 2 × 5&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; term estimate std.error statistic p.value&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;chr&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>1&lt;/span> (Intercept) 0.892 0.469 1.90 5.84&lt;span style='color: #555555;'>e&lt;/span>&lt;span style='color: #BB0000;'>- 2&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>2&lt;/span> cty 1.34 0.027&lt;span style='text-decoration: underline;'>0&lt;/span> 49.6 1.87&lt;span style='color: #555555;'>e&lt;/span>&lt;span style='color: #BB0000;'>-125&lt;/span>&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>The pedagogical advantages for the consistent API of the framework become more clear when we move on to fitting different models. Below you can see examples of how we can fit models using various engines or using the same engine, but different modes.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='c'># different engines&lt;/span>
&lt;span class='nf'>linear_reg&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>set_engine&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"lm"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>set_mode&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"regression"&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nf'>logistic_reg&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>set_engine&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"glm"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>set_mode&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"classification"&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nf'>rand_forest&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>set_engine&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"ranger"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>set_mode&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"regression"&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nf'>decision_tree&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>set_engine&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"rpart"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>set_mode&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"regression"&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'># same engine, different modes&lt;/span>
&lt;span class='nf'>svm_linear&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>set_engine&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"LiblineaR"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>set_mode&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"regression"&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nf'>svm_linear&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>set_engine&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"LiblineaR"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>set_mode&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"classification"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>Fitting a bunch of models to the same data and picking the one you like the results of the best is not a good approach, so one would rarely see code as it appears in the chunk above in a single R script. Students will encounter these pipelines over the course of a semester, each in a slightly different data context. Because the syntax is uniform, it&amp;rsquo;s easier to focus on the details of the model, not how to fit the darn thing in R.&lt;/p>
&lt;p>Another pedagogical advantage, particularly for teaching tidymodels after tidyverse, is the syntax to build recipes for feature engineering resembles dplyr pipelines for data wrangling. In the following example we first provide a dplyr pipeline for data wrangling, and then show how a similar set of transformations can be achieved using &lt;strong>recipes&lt;/strong> for feature engineering. The example uses the &lt;code>email&lt;/code> dataset from the &lt;strong>openintro&lt;/strong> package, which has variables like when the email was sent and received, how many people were cc&amp;rsquo;ed, number of attachments, etc.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='c'># dplyr for data wrangling&lt;/span>
&lt;span class='nf'>openintro&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nv'>&lt;a href='https://openintrostat.github.io/openintro/reference/email.html'>email&lt;/a>&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/select.html'>select&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>-&lt;/span>&lt;span class='nv'>from&lt;/span>, &lt;span class='o'>-&lt;/span>&lt;span class='nv'>sent_email&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
day_of_week &lt;span class='o'>=&lt;/span> &lt;span class='nf'>lubridate&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='http://lubridate.tidyverse.org/reference/day.html'>wday&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>time&lt;/span>&lt;span class='o'>)&lt;/span>, &lt;span class='c'># new variable: day of week&lt;/span>
month &lt;span class='o'>=&lt;/span> &lt;span class='nf'>lubridate&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='http://lubridate.tidyverse.org/reference/month.html'>month&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>time&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='c'># new variable: month&lt;/span>
&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/select.html'>select&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>-&lt;/span>&lt;span class='nv'>time&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
cc &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/cut.html'>cut&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>cc&lt;/span>, breaks &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0&lt;/span>, &lt;span class='m'>1&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>, &lt;span class='c'># discretize cc&lt;/span>
attach &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/cut.html'>cut&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>attach&lt;/span>, breaks &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0&lt;/span>, &lt;span class='m'>1&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>, &lt;span class='c'># discretize attach&lt;/span>
dollar &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/cut.html'>cut&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>dollar&lt;/span>, breaks &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0&lt;/span>, &lt;span class='m'>1&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='c'># discretize dollar&lt;/span>
&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
inherit &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/cut.html'>cut&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>inherit&lt;/span>, breaks &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0&lt;/span>, &lt;span class='m'>1&lt;/span>, &lt;span class='m'>5&lt;/span>, &lt;span class='m'>10&lt;/span>, &lt;span class='m'>20&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>, &lt;span class='c'># discretize inherit&lt;/span>
password &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/cut.html'>cut&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>password&lt;/span>, breaks &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0&lt;/span>, &lt;span class='m'>1&lt;/span>, &lt;span class='m'>5&lt;/span>, &lt;span class='m'>10&lt;/span>, &lt;span class='m'>20&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='c'># discretize password&lt;/span>
&lt;span class='o'>)&lt;/span>
&lt;span class='c'># recipes for data preprocessing and feature engineering&lt;/span>
&lt;span class='c'># same steps, similar syntax, &lt;/span>
&lt;span class='c'># less bookkeeping for the analyst in modeling setting&lt;/span>
&lt;span class='nf'>recipe&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>spam&lt;/span> &lt;span class='o'>~&lt;/span> &lt;span class='nv'>.&lt;/span>, data &lt;span class='o'>=&lt;/span> &lt;span class='nf'>openintro&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nv'>&lt;a href='https://openintrostat.github.io/openintro/reference/email.html'>email&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>step_rm&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>from&lt;/span>, &lt;span class='nv'>sent_email&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>step_date&lt;/span>&lt;span class='o'>(&lt;/span>
&lt;span class='nv'>time&lt;/span>,
features &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"dow"&lt;/span>, &lt;span class='s'>"month"&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>step_rm&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>time&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>step_cut&lt;/span>&lt;span class='o'>(&lt;/span>
&lt;span class='nv'>cc&lt;/span>,
&lt;span class='nv'>attach&lt;/span>,
&lt;span class='nv'>dollar&lt;/span>, breaks &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0&lt;/span>, &lt;span class='m'>1&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>step_cut&lt;/span>&lt;span class='o'>(&lt;/span>
&lt;span class='nv'>inherit&lt;/span>,
&lt;span class='nv'>password&lt;/span>, breaks &lt;span class='o'>=&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>0&lt;/span>, &lt;span class='m'>1&lt;/span>, &lt;span class='m'>5&lt;/span>, &lt;span class='m'>10&lt;/span>, &lt;span class='m'>20&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='o'>)&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>You might be thinking &amp;ldquo;Why do I need the &lt;strong>recipes&lt;/strong> &lt;code>step_*()&lt;/code> functions when I can express the same steps with dplyr?&amp;rdquo; This brings us back to the &amp;ldquo;features that avoid common machine learning pitfalls&amp;rdquo;. The advantage of this approach is that once recipe steps are developed with the training data, they can be automatically applied to the testing data for final model assessment.&lt;/p>
&lt;p>So far the examples I&amp;rsquo;ve provided have been in a modeling context, but many statistics and data science courses also teach statistical inference, particularly parameter estimation using confidence intervals and hypothesis testing. The
&lt;a href="http://infer.tidymodels.org/" target="_blank" rel="noopener">&lt;strong>infer&lt;/strong>&lt;/a> package, which is part of the tidymodels ecosystem, is designed to perform statistical inference using an expressive statistical grammar that cohered with the tidyverse design framework. With recent updates in infer, it is now possible to carry out both theoretical (Central Limit Theorem based) and simulation-based statistical inference using a similar workflow. For example, below we show first the pipeline for building a bootstrap distribution for a mean using a simulation-based approach (with &lt;code>generate()&lt;/code> and then &lt;code>calculate()&lt;/code> and then we show we define the sampling distribution (with &lt;code>assume()&lt;/code>) if we were to build the confidence interval using a theoretical approach.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='c'># simulation-based&lt;/span>
&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/Random.html'>set.seed&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='m'>25&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>gss&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>specify&lt;/span>&lt;span class='o'>(&lt;/span>response &lt;span class='o'>=&lt;/span> &lt;span class='nv'>hours&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>generate&lt;/span>&lt;span class='o'>(&lt;/span>reps &lt;span class='o'>=&lt;/span> &lt;span class='m'>1000&lt;/span>, type &lt;span class='o'>=&lt;/span> &lt;span class='s'>"bootstrap"&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>calculate&lt;/span>&lt;span class='o'>(&lt;/span>stat &lt;span class='o'>=&lt;/span> &lt;span class='s'>"mean"&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; Response: hours (numeric)&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 1,000 × 2&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; replicate stat&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;int&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 1&lt;/span> 1 41.8&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 2&lt;/span> 2 41.7&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 3&lt;/span> 3 41.6&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 4&lt;/span> 4 39.3&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 5&lt;/span> 5 41.1&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 6&lt;/span> 6 41.3&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 7&lt;/span> 7 41.0&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 8&lt;/span> 8 43.2&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 9&lt;/span> 9 42.1&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>10&lt;/span> 10 40.4&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># … with 990 more rows&lt;/span>&lt;/span>
&lt;span class='c'># theoretical&lt;/span>
&lt;span class='nv'>gss&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>specify&lt;/span>&lt;span class='o'>(&lt;/span>response &lt;span class='o'>=&lt;/span> &lt;span class='nv'>hours&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>assume&lt;/span>&lt;span class='o'>(&lt;/span>distribution &lt;span class='o'>=&lt;/span> &lt;span class='s'>"t"&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; A T distribution with 499 degrees of freedom.&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>Other recent updates to infer include support for doing inference for multiple regression as well as behavioral consistency of &lt;code>calculate()&lt;/code>.&lt;/p>
&lt;p>If you&amp;rsquo;re new to the tidymodels ecosystem, I recommend the following resources for getting started&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Expanded documentation:&lt;/p>
&lt;ul>
&lt;li>
&lt;a href="https://www.tidymodels.org/start/" target="_blank" rel="noopener">Get started with tidymodels&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://www.tidymodels.org/learn/" target="_blank" rel="noopener">Learn more and go further&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Book:
&lt;a href="https://www.tmwr.org/" target="_blank" rel="noopener">Tidy Modeling with R&lt;/a> by Max Kuhn and Julia Silge&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Blog posts:&lt;/p>
&lt;ul>
&lt;li>
&lt;a href="Choose%20your%20own%20tidymodels%20adventure">Choose your own tidymodels adventure&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://www.tidyverse.org/blog/2021/08/infer-1-0-0/" target="_blank" rel="noopener">infer 1.0.0&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>If you&amp;rsquo;re new to teaching tidymodels, the following resources can be helpful:&lt;/p>
&lt;ul>
&lt;li>USCOTS 2021 Breakout session:
&lt;a href="https://bit.ly/tidymodels-uscots21/" target="_blank" rel="noopener">Tidy up your models&lt;/a> (developed and presented with
&lt;a href="https://www.ramapo.edu/tas/faculty/debbie-yuster/" target="_blank" rel="noopener">Debbie Yuster&lt;/a>)&lt;/li>
&lt;li>
&lt;a href="https://datasciencebox.org/making-rigorous-conclusions.html" target="_blank" rel="noopener">Data Science in a Box&lt;/a>: Slides, application exercises, computing labs, and homework assignments on modelling and inference with tidymodels.&lt;/li>
&lt;/ul>
&lt;h2 id="reading-data-with-readr">Reading data with readr
&lt;a href="#reading-data-with-readr">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>A new version of
&lt;a href="https://www.tidyverse.org/blog/2021/07/readr-2-0-0/#reading-multiple-files-at-once" target="_blank" rel="noopener">&lt;strong>readr&lt;/strong>&lt;/a> was recently released, with lots of updates outlined in
&lt;a href="https://www.tidyverse.org/blog/2021/07/readr-2-0-0/" target="_blank" rel="noopener">this blog post&lt;/a>. The update most relevant to teaching is the new functionality for reading in multiple files at once, or more specifically, reading sets of files with the same columns into one output table in a single command.&lt;/p>
&lt;p>Suppose in your &lt;code>data/&lt;/code> folder you have two files, one for sales in August and the other for sales in September. Each of the files contain two variables: &lt;code>brand&lt;/code> for brand ID, and &lt;code>n&lt;/code> for number of items sold with that brand ID.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>files&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>fs&lt;/span>&lt;span class='nf'>::&lt;/span>&lt;span class='nf'>&lt;a href='http://fs.r-lib.org/reference/dir_ls.html'>dir_ls&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"data/"&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>files&lt;/span>
&lt;span class='c'>#&amp;gt; data/sales-aug.csv&lt;/span>
&lt;span class='c'>#&amp;gt; data/sales-sep.csv&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>You can now pass this vector with the paths to multiple files directly to the &lt;code>read_*&lt;/code> functions in readr and add an identifying column for which file the records come from.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nf'>&lt;a href='https://readr.tidyverse.org/reference/read_delim.html'>read_csv&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>files&lt;/span>, id &lt;span class='o'>=&lt;/span> &lt;span class='s'>"path"&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; # A tibble: 7 × 3&lt;/span>
&lt;span class='c'>#&amp;gt; path brand n&lt;/span>
&lt;span class='c'>#&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;&lt;/span>
&lt;span class='c'>#&amp;gt; 1 data/sales-aug… 1234 8&lt;/span>
&lt;span class='c'>#&amp;gt; 2 data/sales-aug… 8721 2&lt;/span>
&lt;span class='c'>#&amp;gt; 3 data/sales-aug… 1822 3&lt;/span>
&lt;span class='c'>#&amp;gt; 4 data/sales-sep… 3333 1&lt;/span>
&lt;span class='c'>#&amp;gt; 5 data/sales-sep… 2156 3&lt;/span>
&lt;span class='c'>#&amp;gt; 6 data/sales-sep… 3987 6&lt;/span>
&lt;span class='c'>#&amp;gt; 7 data/sales-sep… 3216 5&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>Previously this not-so-advanced task required the use of mapping functions from purrr or the
&lt;a href="https://vroom.r-lib.org/" target="_blank" rel="noopener">vroom&lt;/a> package, but now tidyverse users are able to accomplish this task with just readr!&lt;/p>
&lt;h2 id="web-scraping-with-rvest">Web scraping with rvest
&lt;a href="#web-scraping-with-rvest">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>If you&amp;rsquo;ve been teaching web scraping with
&lt;a href="https://rvest.tidyverse.org/" target="_blank" rel="noopener">&lt;strong>rvest&lt;/strong>&lt;/a>, I recommend updating your teaching materials as you might be able to further simplify and streamline some of the code you present to students. And if you haven&amp;rsquo;t been teaching web scraping, I recommend reading our paper titled
&lt;a href="https://www.tandfonline.com/doi/full/10.1080/10691898.2020.1787116" target="_blank" rel="noopener">Web Scraping in the Statistics and Data Science Curriculum: Challenges and Opportunities&lt;/a> where we discuss how web scraping can be implemented in a pedagogically sound and technically executable way at various levels of statistics and data science curricula.&lt;/p>
&lt;p>Most recent updates to rvest include the addition of a new function,
&lt;a href="https://rvest.tidyverse.org/reference/html_text.html" target="_blank" rel="noopener">&lt;code>html_text2()&lt;/code>&lt;/a>, which offers better handling for line breaks. Suppose you have the following paragraph of text across two lines on a webpage.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://rvest.tidyverse.org/'>rvest&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;/span>
&lt;span class='c'>#&amp;gt; Attaching package: 'rvest'&lt;/span>
&lt;span class='c'>#&amp;gt; The following object is masked from 'package:readr':&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;/span>
&lt;span class='c'>#&amp;gt; guess_encoding&lt;/span>
&lt;span class='nv'>html&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rvest.tidyverse.org/reference/minimal_html.html'>minimal_html&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>
&lt;span class='s'>"&amp;lt;p&amp;gt;
This is the first sentence in the paragraph.
This is the second sentence that should be on the same line as the first sentence.&amp;lt;br&amp;gt;This third sentence should start on a new line.
&amp;lt;/p&amp;gt;"&lt;/span>
&lt;span class='o'>)&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>With the original
&lt;a href="https://rvest.tidyverse.org/reference/html_text.html" target="_blank" rel="noopener">&lt;code>html_text()&lt;/code>&lt;/a> function extracting the text out of this paragraph results in the following:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>html&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span> &lt;span class='nf'>&lt;a href='https://rvest.tidyverse.org/reference/html_text.html'>html_text&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/writeLines.html'>writeLines&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;/span>
&lt;span class='c'>#&amp;gt; This is the first sentence in the paragraph.&lt;/span>
&lt;span class='c'>#&amp;gt; This is the second sentence that should be on the same line as the first sentence.This third sentence should start on a new line.&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>Note that the line breaks in the output do not respect the line break defined with &lt;code>&amp;lt;br&amp;gt;&lt;/code>.&lt;/p>
&lt;p>With the new
&lt;a href="https://rvest.tidyverse.org/reference/html_text.html" target="_blank" rel="noopener">&lt;code>html_text2()&lt;/code>&lt;/a>, &lt;code>&amp;lt;br&amp;gt;&lt;/code> is handled appropriately and the line breaks follow the expected pattern.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>html&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span> &lt;span class='nf'>&lt;a href='https://rvest.tidyverse.org/reference/html_text.html'>html_text2&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/writeLines.html'>writeLines&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; This is the first sentence in the paragraph. This is the second sentence that should be on the same line as the first sentence.&lt;/span>
&lt;span class='c'>#&amp;gt; This third sentence should start on a new line.&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>The output of
&lt;a href="https://rvest.tidyverse.org/reference/html_text.html" target="_blank" rel="noopener">&lt;code>html_text2()&lt;/code>&lt;/a> is generally what you want, but note that it is slower than
&lt;a href="https://rvest.tidyverse.org/reference/html_text.html" target="_blank" rel="noopener">&lt;code>html_text()&lt;/code>&lt;/a>. This might not make a big difference for teaching web scraping as a new topic, but it is worth keeping in mind when the task involves scraping a large amount of data. Your choice might also depend on what you&amp;rsquo;re going to do next with the data. For example, if the next step involves tokenizing the scraped text with
&lt;a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html" target="_blank" rel="noopener">&lt;code>tidytext::unnest_tokens()&lt;/code>&lt;/a> you might not care how the line breaks were handled in the first step.&lt;/p>
&lt;p>Since this change involves the addition of a new function without changing behaviour in any existing functions, incorporating it into your teaching would require testing
&lt;a href="https://rvest.tidyverse.org/reference/html_text.html" target="_blank" rel="noopener">&lt;code>html_text2()&lt;/code>&lt;/a> in places where you previously used
&lt;a href="https://rvest.tidyverse.org/reference/html_text.html" target="_blank" rel="noopener">&lt;code>html_text()&lt;/code>&lt;/a> to see if the result is preferable.&lt;/p>
&lt;p>Another important update is that
&lt;a href="https://rvest.tidyverse.org/reference/rename.html" target="_blank" rel="noopener">&lt;code>html_node()&lt;/code>&lt;/a> and
&lt;a href="https://rvest.tidyverse.org/reference/rename.html" target="_blank" rel="noopener">&lt;code>html_nodes()&lt;/code>&lt;/a> (functions that undoubtedly show up in any lesson on web scraping with rvest) have been superseded in favor of
&lt;a href="https://rvest.tidyverse.org/reference/html_element.html" target="_blank" rel="noopener">&lt;code>html_element()&lt;/code>&lt;/a> and
&lt;a href="https://rvest.tidyverse.org/reference/html_element.html" target="_blank" rel="noopener">&lt;code>html_elements()&lt;/code>&lt;/a>. The motivation behind this update is to better match what learners see when they&amp;rsquo;re first learning about HTML. When updating teaching materials you should be able to use
&lt;a href="https://rvest.tidyverse.org/reference/html_element.html" target="_blank" rel="noopener">&lt;code>html_element()&lt;/code>&lt;/a> and
&lt;a href="https://rvest.tidyverse.org/reference/html_element.html" target="_blank" rel="noopener">&lt;code>html_elements()&lt;/code>&lt;/a> as drop in replacements for
&lt;a href="https://rvest.tidyverse.org/reference/rename.html" target="_blank" rel="noopener">&lt;code>html_node()&lt;/code>&lt;/a> and
&lt;a href="https://rvest.tidyverse.org/reference/rename.html" target="_blank" rel="noopener">&lt;code>html_nodes()&lt;/code>&lt;/a>, respectively.&lt;/p>
&lt;p>Finally, if
&lt;a href="https://rvest.tidyverse.org/reference/html_table.html" target="_blank" rel="noopener">&lt;code>html_table()&lt;/code>&lt;/a> didn&amp;rsquo;t work for you in the past, it&amp;rsquo;s worth trying again since it&amp;rsquo;s been rewritten from scratch to more closely match how browsers display tables with merged cells.&lt;/p>
&lt;p>For more on updates in rvest, read the
&lt;a href="https://www.tidyverse.org/blog/2021/03/rvest-1-0-0/" target="_blank" rel="noopener">rvest 1.0.0. blog post&lt;/a> and review the updated
&lt;a href="https://rvest.tidyverse.org/articles/rvest.html" target="_blank" rel="noopener">rvest vignette&lt;/a>.&lt;/p>
&lt;h2 id="sql-and-datatable-translations-with-dbplyr-and-dtplyr">SQL and data.table translations with dbplyr and dtplyr
&lt;a href="#sql-and-datatable-translations-with-dbplyr-and-dtplyr">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Two packages that provide interfaces for translations between &lt;strong>dplyr&lt;/strong> and SQL and
&lt;a href="https://rdatatable.gitlab.io/data.table/" target="_blank" rel="noopener">&lt;strong>data.table&lt;/strong>&lt;/a> code are &lt;strong>dbplyr&lt;/strong> and &lt;strong>dtplyr&lt;/strong>. If you&amp;rsquo;re teaching either of these tools alongside the tidyverse, particularly to students who have learned the tidyverse first, the
&lt;a href="https://dplyr.tidyverse.org/reference/explain.html" target="_blank" rel="noopener">&lt;code>show_query()&lt;/code>&lt;/a> function can be very helpful for translating tidyverse code into syntaxes used by these tools.&lt;/p>
&lt;p>dtplyr translates dplyr pipelines into equivalent data.table code. To start, we first need to create a
&lt;a href="https://rdrr.io/pkg/dtplyr/man/lazy_dt.html" target="_blank" rel="noopener">&lt;code>lazy_dt()&lt;/code>&lt;/a> object which will record the dplyr actions. Then, we write a dplyr pipeline as usual and save the result. The result can be viewed by piping it into
&lt;a href="https://tibble.tidyverse.org/reference/as_tibble.html" target="_blank" rel="noopener">&lt;code>as_tibble()&lt;/code>&lt;/a> and the data.table code can be viewed with
&lt;a href="https://dplyr.tidyverse.org/reference/explain.html" target="_blank" rel="noopener">&lt;code>show_query()&lt;/code>&lt;/a>.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://github.com/tidyverse/dtplyr'>dtplyr&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>mtcars_dt&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/pkg/dtplyr/man/lazy_dt.html'>lazy_dt&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>mtcars&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>cyl_summary&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nv'>mtcars_dt&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>cyl&lt;/span>&lt;span class='o'>)&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/across.html'>across&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>disp&lt;/span>&lt;span class='o'>:&lt;/span>&lt;span class='nv'>wt&lt;/span>, &lt;span class='nv'>mean&lt;/span>&lt;span class='o'>)&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'># result&lt;/span>
&lt;span class='nv'>cyl_summary&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span> &lt;span class='nf'>&lt;a href='https://tibble.tidyverse.org/reference/as_tibble.html'>as_tibble&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 3 × 5&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; cyl disp hp drat wt&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>1&lt;/span> 4 105. 82.6 4.07 2.29&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>2&lt;/span> 6 183. 122. 3.59 3.12&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>3&lt;/span> 8 353. 209. 3.23 4.00&lt;/span>
&lt;span class='c'># query&lt;/span>
&lt;span class='nv'>cyl_summary&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/explain.html'>show_query&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; `_DT1`[, .(disp = mean(disp), hp = mean(hp), drat = mean(drat), &lt;/span>
&lt;span class='c'>#&amp;gt; wt = mean(wt)), keyby = .(cyl)]&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>With recent updates, dtplyr can also translate some tidyr functions to data.table, e.g.,
&lt;a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" target="_blank" rel="noopener">&lt;code>pivot_wider()&lt;/code>&lt;/a>. In the following example the process is the same: start with
&lt;a href="https://rdrr.io/pkg/dtplyr/man/lazy_dt.html" target="_blank" rel="noopener">&lt;code>lazy_dt()&lt;/code>&lt;/a>, write a data transformation step using tidyverse code, view the result with
&lt;a href="https://tibble.tidyverse.org/reference/as_tibble.html" target="_blank" rel="noopener">&lt;code>as_tibble()&lt;/code>&lt;/a>, and view the query with
&lt;a href="https://dplyr.tidyverse.org/reference/explain.html" target="_blank" rel="noopener">&lt;code>show_query()&lt;/code>&lt;/a>.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>fish_encounters_dt&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/pkg/dtplyr/man/lazy_dt.html'>lazy_dt&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>fish_encounters&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>fish_encounters_wider&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nv'>fish_encounters_dt&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>&lt;a href='https://tidyr.tidyverse.org/reference/pivot_wider.html'>pivot_wider&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>names_from &lt;span class='o'>=&lt;/span> &lt;span class='nv'>station&lt;/span>, values_from &lt;span class='o'>=&lt;/span> &lt;span class='nv'>seen&lt;/span>, values_fill &lt;span class='o'>=&lt;/span> &lt;span class='m'>0&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'># result&lt;/span>
&lt;span class='nv'>fish_encounters_wider&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span> &lt;span class='nf'>&lt;a href='https://tibble.tidyverse.org/reference/as_tibble.html'>as_tibble&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 19 × 12&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; fish Release I80_1 Lisbon Rstr Base_TD BCE BCW BCE2 BCW2 MAE MAW&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;fct&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;int&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;int&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;int&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;int&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;int&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;int&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;int&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;int&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;int&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;int&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;int&amp;gt;&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 1&lt;/span> 4842 1 1 1 1 1 1 1 1 1 1 1&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 2&lt;/span> 4843 1 1 1 1 1 1 1 1 1 1 1&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 3&lt;/span> 4844 1 1 1 1 1 1 1 1 1 1 1&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 4&lt;/span> 4845 1 1 1 1 1 0 0 0 0 0 0&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 5&lt;/span> 4847 1 1 1 0 0 0 0 0 0 0 0&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 6&lt;/span> 4848 1 1 1 1 0 0 0 0 0 0 0&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 7&lt;/span> 4849 1 1 0 0 0 0 0 0 0 0 0&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 8&lt;/span> 4850 1 1 0 1 1 1 1 0 0 0 0&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 9&lt;/span> 4851 1 1 0 0 0 0 0 0 0 0 0&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>10&lt;/span> 4854 1 1 0 0 0 0 0 0 0 0 0&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>11&lt;/span> 4855 1 1 1 1 1 0 0 0 0 0 0&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>12&lt;/span> 4857 1 1 1 1 1 1 1 1 1 0 0&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>13&lt;/span> 4858 1 1 1 1 1 1 1 1 1 1 1&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>14&lt;/span> 4859 1 1 1 1 1 0 0 0 0 0 0&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>15&lt;/span> 4861 1 1 1 1 1 1 1 1 1 1 1&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>16&lt;/span> 4862 1 1 1 1 1 1 1 1 1 0 0&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>17&lt;/span> 4863 1 1 0 0 0 0 0 0 0 0 0&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>18&lt;/span> 4864 1 1 0 0 0 0 0 0 0 0 0&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>19&lt;/span> 4865 1 1 1 0 0 0 0 0 0 0 0&lt;/span>
&lt;span class='c'># query&lt;/span>
&lt;span class='nv'>fish_encounters_wider&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/explain.html'>show_query&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; dcast(`_DT2`, formula = fish ~ station, value.var = "seen", fill = 0)&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>Similarly, dbplyr translates dplyr pipelines into equivalent SQL code. The only difference in the following example translating tidyr code to SQL code is the function used in the first step,
&lt;a href="https://dbplyr.tidyverse.org/reference/memdb_frame.html" target="_blank" rel="noopener">&lt;code>memdb_frame()&lt;/code>&lt;/a>, which creates a database table.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='kr'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>&lt;a href='https://dbplyr.tidyverse.org/'>dbplyr&lt;/a>&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;/span>
&lt;span class='c'>#&amp;gt; Attaching package: 'dbplyr'&lt;/span>
&lt;span class='c'>#&amp;gt; The following objects are masked from 'package:dplyr':&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;/span>
&lt;span class='c'>#&amp;gt; ident, sql&lt;/span>
&lt;span class='nv'>fish_encounters_db&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://dbplyr.tidyverse.org/reference/memdb_frame.html'>memdb_frame&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>fish_encounters&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>fish_encounters_wider&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nv'>fish_encounters_db&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span>
&lt;span class='nf'>&lt;a href='https://tidyr.tidyverse.org/reference/pivot_wider.html'>pivot_wider&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>names_from &lt;span class='o'>=&lt;/span> &lt;span class='nv'>station&lt;/span>, values_from &lt;span class='o'>=&lt;/span> &lt;span class='nv'>seen&lt;/span>, values_fill &lt;span class='o'>=&lt;/span> &lt;span class='m'>0&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'># result&lt;/span>
&lt;span class='nv'>fish_encounters_wider&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span> &lt;span class='nf'>&lt;a href='https://tibble.tidyverse.org/reference/as_tibble.html'>as_tibble&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 19 × 12&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; fish Release I80_1 Lisbon Rstr Base_TD BCE BCW BCE2 BCW2 MAE MAW&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555; font-style: italic;'>&amp;lt;chr&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;int&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;int&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span> &lt;span style='color: #555555; font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 1&lt;/span> 4842 1 1 1 1 1 1 1 1 1 1 1&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 2&lt;/span> 4843 1 1 1 1 1 1 1 1 1 1 1&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 3&lt;/span> 4844 1 1 1 1 1 1 1 1 1 1 1&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 4&lt;/span> 4845 1 1 1 1 1 0 0 0 0 0 0&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 5&lt;/span> 4847 1 1 1 0 0 0 0 0 0 0 0&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 6&lt;/span> 4848 1 1 1 1 0 0 0 0 0 0 0&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 7&lt;/span> 4849 1 1 0 0 0 0 0 0 0 0 0&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 8&lt;/span> 4850 1 1 0 1 1 1 1 0 0 0 0&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'> 9&lt;/span> 4851 1 1 0 0 0 0 0 0 0 0 0&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>10&lt;/span> 4854 1 1 0 0 0 0 0 0 0 0 0&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>11&lt;/span> 4855 1 1 1 1 1 0 0 0 0 0 0&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>12&lt;/span> 4857 1 1 1 1 1 1 1 1 1 0 0&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>13&lt;/span> 4858 1 1 1 1 1 1 1 1 1 1 1&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>14&lt;/span> 4859 1 1 1 1 1 0 0 0 0 0 0&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>15&lt;/span> 4861 1 1 1 1 1 1 1 1 1 1 1&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>16&lt;/span> 4862 1 1 1 1 1 1 1 1 1 0 0&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>17&lt;/span> 4863 1 1 0 0 0 0 0 0 0 0 0&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>18&lt;/span> 4864 1 1 0 0 0 0 0 0 0 0 0&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #555555;'>19&lt;/span> 4865 1 1 1 0 0 0 0 0 0 0 0&lt;/span>
&lt;span class='c'># query&lt;/span>
&lt;span class='nv'>fish_encounters_wider&lt;/span> &lt;span class='o'>&lt;a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&amp;gt;%&lt;/a>&lt;/span> &lt;span class='nf'>&lt;a href='https://dplyr.tidyverse.org/reference/explain.html'>show_query&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; &amp;lt;SQL&amp;gt;&lt;/span>
&lt;span class='c'>#&amp;gt; SELECT `fish`, MAX(CASE WHEN (`station` = 'Release') THEN (`seen`) WHEN NOT(`station` = 'Release') THEN (0.0) END) AS `Release`, MAX(CASE WHEN (`station` = 'I80_1') THEN (`seen`) WHEN NOT(`station` = 'I80_1') THEN (0.0) END) AS `I80_1`, MAX(CASE WHEN (`station` = 'Lisbon') THEN (`seen`) WHEN NOT(`station` = 'Lisbon') THEN (0.0) END) AS `Lisbon`, MAX(CASE WHEN (`station` = 'Rstr') THEN (`seen`) WHEN NOT(`station` = 'Rstr') THEN (0.0) END) AS `Rstr`, MAX(CASE WHEN (`station` = 'Base_TD') THEN (`seen`) WHEN NOT(`station` = 'Base_TD') THEN (0.0) END) AS `Base_TD`, MAX(CASE WHEN (`station` = 'BCE') THEN (`seen`) WHEN NOT(`station` = 'BCE') THEN (0.0) END) AS `BCE`, MAX(CASE WHEN (`station` = 'BCW') THEN (`seen`) WHEN NOT(`station` = 'BCW') THEN (0.0) END) AS `BCW`, MAX(CASE WHEN (`station` = 'BCE2') THEN (`seen`) WHEN NOT(`station` = 'BCE2') THEN (0.0) END) AS `BCE2`, MAX(CASE WHEN (`station` = 'BCW2') THEN (`seen`) WHEN NOT(`station` = 'BCW2') THEN (0.0) END) AS `BCW2`, MAX(CASE WHEN (`station` = 'MAE') THEN (`seen`) WHEN NOT(`station` = 'MAE') THEN (0.0) END) AS `MAE`, MAX(CASE WHEN (`station` = 'MAW') THEN (`seen`) WHEN NOT(`station` = 'MAW') THEN (0.0) END) AS `MAW`&lt;/span>
&lt;span class='c'>#&amp;gt; FROM `dbplyr_001`&lt;/span>
&lt;span class='c'>#&amp;gt; GROUP BY `fish`&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>I recommend the following resources to get started with these packages:&lt;/p>
&lt;ul>
&lt;li>
&lt;a href="https://www.tidyverse.org/blog/2021/02/dplyr-backends/" target="_blank" rel="noopener">Blog post on dplyr backends&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://dtplyr.tidyverse.org/articles/translation.html" target="_blank" rel="noopener">dtplyr translation vignette&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://dbplyr.tidyverse.org/articles/dbplyr.html" target="_blank" rel="noopener">Introduction to dbplyr vignette&lt;/a>&lt;/li>
&lt;/ul>
&lt;section class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1" role="doc-endnote">
&lt;p>I think this talk would also be a good resource for software development courses on the topic of maintaining open source software and communicating updates and changes to users. &lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:2" role="doc-endnote">
&lt;p>Turns out this was always possible using the &lt;code>outfile&lt;/code> argument, but now it&amp;rsquo;s more intuitive! &lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/section></description></item><item><title>lifecycle 1.0.0</title><link>https://www.tidyverse.org/blog/2021/02/lifecycle-1-0-0/</link><pubDate>Mon, 15 Feb 2021 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2021/02/lifecycle-1-0-0/</guid><description>&lt;p>We&amp;rsquo;re exceedingly happy to announce the release of
&lt;a href="http://lifecycle.r-lib.org/" target="_blank" rel="noopener">lifecycle&lt;/a> 1.0.0. The tidyverse team uses the lifecycle package to manage the lifecycle of functions and features within the tidyverse, letting you know what&amp;rsquo;s still experimental and what we&amp;rsquo;re moving away from in the future.&lt;/p>
&lt;p>If you&amp;rsquo;re new to the lifecycle package, the best place to start is my
&lt;a href="https://rstudio.com/resources/rstudioglobal-2021/maintaining-the-house-the-tidyverse-built/" target="_blank" rel="noopener">rstudio::global() talk&lt;/a>:&lt;/p>
&lt;script src="https://fast.wistia.com/embed/medias/f7ph68edqb.jsonp" async>&lt;/script>
&lt;script src="https://fast.wistia.com/assets/external/E-v1.js" async>&lt;/script>
&lt;div class="wistia_responsive_padding" style="padding:56.25% 0 0 0;position:relative;">
&lt;div class="wistia_responsive_wrapper" style="height:100%;left:0;position:absolute;top:0;width:100%;">
&lt;div class="wistia_embed wistia_async_f7ph68edqb videoFoam=true" style="height:100%;position:relative;width:100%">
&lt;div class="wistia_swatch" style="height:100%;left:0;opacity:0;overflow:hidden;position:absolute;top:0;transition:opacity 200ms;width:100%;">
&lt;p>&lt;img src="https://fast.wistia.com/embed/medias/f7ph68edqb/swatch" style="filter:blur(5px);height:100%;object-fit:contain;width:100%;" alt="" aria-hidden="true" onload="this.parentNode.style.opacity=1;" />&lt;/p>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;p>Or if you&amp;rsquo;d prefer to read about it, the lifecycle package now contains three vignettes:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>
&lt;a href="https://lifecycle.r-lib.org/articles/stages.html" target="_blank" rel="noopener">&lt;code>vignette(&amp;quot;stages&amp;quot;)&lt;/code>&lt;/a> describes the lifecycle stages so you know what it means for a function to be experimental, stable, deprecated, or superseded.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>
&lt;a href="https://lifecycle.r-lib.org/articles/manage.html" target="_blank" rel="noopener">&lt;code>vignette(&amp;quot;manage&amp;quot;)&lt;/code>&lt;/a> shows you how to manage lifecycle changes in functions that you use.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>
&lt;a href="https://lifecycle.r-lib.org/articles/communicate.html" target="_blank" rel="noopener">&lt;code>vignette(&amp;quot;communicate&amp;quot;)&lt;/code>&lt;/a> shows you how to communicate lifecycle changes in the functions you write. This documents exactly the process we follow when (e.g.) we deprecate a function.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>This release of the lifecycle 1.0.0 package includes a few other minor improvements, which you can read about in the
&lt;a href="https://github.com/r-lib/lifecycle/releases/tag/v1.0.0" target="_blank" rel="noopener">release notes&lt;/a>.&lt;/p>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>A big thanks to all contributors:
&lt;a href="https://github.com/batpigandme" target="_blank" rel="noopener">@batpigandme&lt;/a>,
&lt;a href="https://github.com/bergsmat" target="_blank" rel="noopener">@bergsmat&lt;/a>,
&lt;a href="https://github.com/Bisaloo" target="_blank" rel="noopener">@Bisaloo&lt;/a>,
&lt;a href="https://github.com/colearendt" target="_blank" rel="noopener">@colearendt&lt;/a>,
&lt;a href="https://github.com/DanChaltiel" target="_blank" rel="noopener">@DanChaltiel&lt;/a>,
&lt;a href="https://github.com/dpprdan" target="_blank" rel="noopener">@dpprdan&lt;/a>,
&lt;a href="https://github.com/florianm" target="_blank" rel="noopener">@florianm&lt;/a>,
&lt;a href="https://github.com/gowerc" target="_blank" rel="noopener">@gowerc&lt;/a>,
&lt;a href="https://github.com/hadley" target="_blank" rel="noopener">@hadley&lt;/a>,
&lt;a href="https://github.com/HenrikBengtsson" target="_blank" rel="noopener">@HenrikBengtsson&lt;/a>,
&lt;a href="https://github.com/jarauh" target="_blank" rel="noopener">@jarauh&lt;/a>,
&lt;a href="https://github.com/jennybc" target="_blank" rel="noopener">@jennybc&lt;/a>,
&lt;a href="https://github.com/joethorley" target="_blank" rel="noopener">@joethorley&lt;/a>,
&lt;a href="https://github.com/jpritikin" target="_blank" rel="noopener">@jpritikin&lt;/a>,
&lt;a href="https://github.com/k-doering-NOAA" target="_blank" rel="noopener">@k-doering-NOAA&lt;/a>,
&lt;a href="https://github.com/KapLDN" target="_blank" rel="noopener">@KapLDN&lt;/a>,
&lt;a href="https://github.com/krlmlr" target="_blank" rel="noopener">@krlmlr&lt;/a>,
&lt;a href="https://github.com/lionel-" target="_blank" rel="noopener">@lionel-&lt;/a>,
&lt;a href="https://github.com/mkirzon" target="_blank" rel="noopener">@mkirzon&lt;/a>,
&lt;a href="https://github.com/Robinlovelace" target="_blank" rel="noopener">@Robinlovelace&lt;/a>,
&lt;a href="https://github.com/romainfrancois" target="_blank" rel="noopener">@romainfrancois&lt;/a>,
&lt;a href="https://github.com/salim-b" target="_blank" rel="noopener">@salim-b&lt;/a>,
&lt;a href="https://github.com/sigmasigmaiota" target="_blank" rel="noopener">@sigmasigmaiota&lt;/a>,
&lt;a href="https://github.com/wlandau" target="_blank" rel="noopener">@wlandau&lt;/a>,
&lt;a href="https://github.com/yonicd" target="_blank" rel="noopener">@yonicd&lt;/a>, and
&lt;a href="https://github.com/yutannihilation" target="_blank" rel="noopener">@yutannihilation&lt;/a>.&lt;/p></description></item><item><title>reprex 1.0.0</title><link>https://www.tidyverse.org/blog/2021/02/reprex-1-0-0/</link><pubDate>Mon, 01 Feb 2021 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2021/02/reprex-1-0-0/</guid><description>&lt;p>We&amp;rsquo;re exhilarated to announce the release of reprex 1.0.0 (
&lt;a href="https://reprex.tidyverse.org" target="_blank" rel="noopener">reprex.tidyverse.org&lt;/a>). reprex is a package that helps you prepare &lt;strong>REPR&lt;/strong>oducible &lt;strong>EX&lt;/strong>amples to share in places where people talk about code, e.g., on GitHub, on Stack Overflow, and in Slack or email messages.&lt;/p>
&lt;p>You can install the current version of reprex from CRAN with&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/utils/install.packages.html'>install.packages&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"reprex"&lt;/span>&lt;span class='o'>)&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>It turns out we&amp;rsquo;ve never blogged about reprex here on
&lt;a href="https://www.tidyverse.org" target="_blank" rel="noopener">tidyverse.org&lt;/a>, so we start with a general overview for newcomers, then close with a summary of recent changes of interest to existing users.&lt;/p>
&lt;p>You can see a full list of changes in the
&lt;a href="https://reprex.tidyverse.org/news/index.html#reprex-1-0-0-2021-01-27" target="_blank" rel="noopener">release notes&lt;/a>.&lt;/p>
&lt;h2 id="why-reprex-exists">Why reprex exists
&lt;a href="#why-reprex-exists">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>reprex is a convenience package that combines the power of R Markdown with conventional wisdom about what makes a good reproducible example. We believe that conversations about code are more productive with:&lt;/p>
&lt;ul>
&lt;li>Code that &lt;strong>actually runs&lt;/strong>&lt;/li>
&lt;li>Code that the reader &lt;strong>doesn&amp;rsquo;t necessarily have to run&lt;/strong>&lt;/li>
&lt;li>Code that the reader &lt;strong>can easily run&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>Someone new to R might be puzzled by this code and want to discuss it:&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nv'>x&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/factor.html'>factor&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"Hello, "&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>y&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/factor.html'>factor&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='s'>"world!"&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='nv'>x&lt;/span>
&lt;span class='c'>#&amp;gt; [1] Hello, &lt;/span>
&lt;span class='c'>#&amp;gt; Levels: Hello,&lt;/span>
&lt;span class='nv'>y&lt;/span>
&lt;span class='c'>#&amp;gt; [1] world!&lt;/span>
&lt;span class='c'>#&amp;gt; Levels: world!&lt;/span>
&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/c.html'>c&lt;/a>&lt;/span>&lt;span class='o'>(&lt;/span>&lt;span class='nv'>x&lt;/span>, &lt;span class='nv'>y&lt;/span>&lt;span class='o'>)&lt;/span>
&lt;span class='c'>#&amp;gt; [1] 1 1&lt;/span>&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>You, as a reader, just benefited from a few things:&lt;/p>
&lt;ol>
&lt;li>
&lt;p>The code was actually executed by the R interpreter, because this post is generated from an &lt;code>.Rmd&lt;/code> document. I am probably not misleading you, intentionally or by accident, with fictional or incomplete code.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>You got to see the actual result without firing up R yourself and executing this code locally. Many R veterans will instantly recognize what&amp;rsquo;s going on and be able to provide some useful explanation at this point.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>If you do want to execute the code yourself, you can easily copy the entire chunk, paste it into R, and press enter&lt;sup id="fnref:2">&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref">2&lt;/a>&lt;/sup>. Compare that with the fussy edits you&amp;rsquo;d have to make with this copy/paste from the R Console:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">x&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">factor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Hello, &amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">factor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;world!&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">x&lt;/span>
&lt;span class="n">[1]&lt;/span> &lt;span class="n">Hello&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">Levels&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="n">Hello&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">y&lt;/span>
&lt;span class="n">[1]&lt;/span> &lt;span class="n">world&lt;/span>&lt;span class="o">!&lt;/span>
&lt;span class="n">Levels&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="n">world&lt;/span>&lt;span class="o">!&lt;/span>
&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">[1]&lt;/span> &lt;span class="m">1&lt;/span> &lt;span class="m">1&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>You need to remove the
&lt;a href="https://rdrr.io/r/base/Comparison.html" target="_blank" rel="noopener">&lt;code>&amp;gt;&lt;/code>&lt;/a> prompts and delete all output. And don&amp;rsquo;t get me started on the problem of screenshots.&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>All of this is entirely possible without reprex. People just need to create a suitable &lt;code>.R&lt;/code> or &lt;code>.Rmd&lt;/code> file, render it to an appropriate output format, in a fresh R session, with working directory set to session temp directory. And also send me a pony!&lt;/p>
&lt;p>For any given code snippet, this feels like way too much work. But if you read, write, and talk about R often, this problem can easily come up multiple times per day.
&lt;a href="https://reprex.tidyverse.org/reference/reprex.html" target="_blank" rel="noopener">&lt;code>reprex::reprex()&lt;/code>&lt;/a> aims to make doing the right thing so easy that people stop taking photos of broken code with their cell phone.&lt;/p>
&lt;h2 id="reprexreprex">&lt;code>reprex::reprex()&lt;/code>
&lt;a href="#reprexreprex">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>
&lt;a href="https://reprex.tidyverse.org/reference/reprex.html" target="_blank" rel="noopener">&lt;code>reprex::reprex()&lt;/code>&lt;/a> is the main function in the package. It takes a little bit of R code, probably from the clipboard or current selection, and does all the fiddly things we mentioned:&lt;/p>
&lt;ul>
&lt;li>Writes it to a file. By default, to a file below the session temp directory.&lt;/li>
&lt;li>Sets various R and knitr options that are especially favorable for reprexes, such as the &lt;code>error = TRUE&lt;/code> chunk option.&lt;/li>
&lt;li>Renders the code in a fresh R session to ruthlessly expose missing
&lt;a href="https://rdrr.io/r/base/library.html" target="_blank" rel="noopener">&lt;code>library()&lt;/code>&lt;/a> calls and the use of objects that haven&amp;rsquo;t been defined.&lt;/li>
&lt;li>Ensures the output is optimized for the target venue, e.g. GitHub-flavored Markdown vs. commented R code vs. Rich Text Format.&lt;/li>
&lt;/ul>
&lt;p>By default, the result is waiting on your clipboard and you&amp;rsquo;ll also see an HTML preview of it.&lt;/p>
&lt;p>Here is a 50 second video that shows an entire roundtrip: copying local code, &lt;code>reprex()&lt;/code>ing, opening a GitHub issue, copying reprex from the issue, and re-executing the code in a local R session:&lt;/p>
&lt;iframe width="560" height="315" src="https://www.youtube.com/embed/35suhGR53wQ" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
&lt;/iframe>
&lt;p>There are many other handy features:&lt;/p>
&lt;ul>
&lt;li>Optionally include session info&lt;/li>
&lt;li>Post a figure to
&lt;a href="https://imgur.com" target="_blank" rel="noopener">imgur.com&lt;/a> and embed its link in the reprex&lt;/li>
&lt;li>Handy RStudio addin and gadget for even more convenience&lt;/li>
&lt;li>More ways to provide input and get output&lt;/li>
&lt;/ul>
&lt;p>Head over to
&lt;a href="https://reprex.tidyverse.org" target="_blank" rel="noopener">reprex.tidyverse.org&lt;/a> to learn more. In addition to the articles there, reprex &amp;mdash; as a lifestyle 🤓 and a package 📦 &amp;mdash; features in my
&lt;a href="https://github.com/jennybc/debugging#readme" target="_blank" rel="noopener">rstudio::global(2020) keynote about debugging&lt;/a>. The reprex section starts around the 14:11 mark in
&lt;a href="https://rstudio.com/resources/rstudioconf-2020/object-of-type-closure-is-not-subsettable/" target="_blank" rel="noopener">the video&lt;/a>.&lt;/p>
&lt;h2 id="whats-new-in-v100">What&amp;rsquo;s new in v1.0.0
&lt;a href="#whats-new-in-v100">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>For those who have been using reprex for a while, here are the most exciting developments in v1.0.0&lt;/p>
&lt;h3 id="venues">Venues
&lt;a href="#venues">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>We&amp;rsquo;ve added &lt;code>venue&lt;/code>-specific convenience wrappers. Instead of &lt;code>reprex(..., venue = &amp;quot;r&amp;quot;)&lt;/code>, you can now do &lt;code>reprex_r(...)&lt;/code>. This makes non-default &lt;code>venue&lt;/code>s easier to access with IDE autocompletion.&lt;/p>
&lt;p>&lt;code>&amp;quot;slack&amp;quot;&lt;/code> is a new venue that tweaks the default Markdown output for pasting into Slack messages. Slack&amp;rsquo;s markup is a frustrating variant of the Markdown we use elsewhere and it&amp;rsquo;s important to remove the &lt;code>r&lt;/code> language identifier from the opening code fence. We also simplify image links and, by default, suppress the ad. Note that &lt;code>venue = &amp;quot;slack&amp;quot;&lt;/code> or &lt;code>reprex_slack()&lt;/code> work best for people who opt-out of the WYSIWYG message editor&lt;sup id="fnref:3">&lt;a href="#fn:3" class="footnote-ref" role="doc-noteref">3&lt;/a>&lt;/sup>. While working on this, I appreciated for the first time that the default behaviour for figures (uploading to
&lt;a href="https://imgur.com" target="_blank" rel="noopener">imgur.com&lt;/a> and auto-linking) actually works pretty well for Slack messages. Who knew? 🤷‍♀ This is also a good time to remind everyone that &lt;code>venue = &amp;quot;r&amp;quot;&lt;/code> or &lt;code>reprex_r()&lt;/code> are great ways to create larger Slack code snippets. Before you finish by clicking &amp;ldquo;Create snippet&amp;rdquo;, select &lt;code>R&lt;/code> from the &amp;ldquo;Type&amp;rdquo; dropdown to get nice syntax highlighting.&lt;/p>
&lt;p>Stack Overflow now supports fenced code blocks, which means that the &lt;code>&amp;quot;so&amp;quot;&lt;/code> venue is no longer necessary. You can still request it, but it&amp;rsquo;s just an alias for the default GitHub (&lt;code>&amp;quot;gh&amp;quot;&lt;/code>) venue and we&amp;rsquo;re going to tell you that every time you do it.&lt;/p>
&lt;p>The experimental-but-oh-so-handy &lt;code>venue = &amp;quot;rtf&amp;quot;&lt;/code> now works about as well on Windows as it does on macOS. It is experimental (and shall remain so) because we still shell out to the
&lt;a href="http://www.andre-simon.de/doku/highlight/en/highlight.php" target="_blank" rel="noopener">highlight command line tool&lt;/a>, the installation of which is left as an exercise for the motivated user. This is a great way to get (un)rendered, syntax-highlighted code snippets into applications like PowerPoint, Keynote, and Word, when you aren&amp;rsquo;t generating the whole document with R Markdown. This special &lt;code>venue&lt;/code> is documented in
&lt;a href="https://reprex.tidyverse.org/articles/articles/rtf.html" target="_blank" rel="noopener">its own article&lt;/a>.&lt;/p>
&lt;h3 id="internal-changes">Internal changes
&lt;a href="#internal-changes">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>This should have no impact on most users, but &lt;code>reprex()&lt;/code> has been internally refactored to achieve its goals by applying the new &lt;code>reprex_render()&lt;/code> to an &lt;code>.Rmd&lt;/code> file that uses the new &lt;code>reprex_document()&lt;/code> output format. The motivation was mostly to make maintenance easier by using more official mechanisms for extending R Markdown and knitr.&lt;/p>
&lt;p>We have eagerly followed knitr&amp;rsquo;s lead and use UTF-8 everywhere internally.&lt;/p>
&lt;p>The &lt;code>tidyverse_quiet&lt;/code> argument and &lt;code>reprex.tidyverse_quiet&lt;/code> option, which default to &lt;code>TRUE&lt;/code>, also suppress startup messages from the tidymodels meta-package.&lt;/p>
&lt;p>Remember you can see a full list of changes in the
&lt;a href="https://reprex.tidyverse.org/news/index.html#reprex-1-0-0-2021-01-27" target="_blank" rel="noopener">release notes&lt;/a>.&lt;/p>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>We&amp;rsquo;ve never blogged about reprex here, so we&amp;rsquo;ll take this chance to thank all 116 people who have helped get reprex to this point. There have been 47 contributors since the previous release (v0.3.0).&lt;/p>
&lt;p>
&lt;a href="https://github.com/1029YanMa" target="_blank" rel="noopener">@1029YanMa&lt;/a>,
&lt;a href="https://github.com/Abhijitsj" target="_blank" rel="noopener">@Abhijitsj&lt;/a>,
&lt;a href="https://github.com/aegerton" target="_blank" rel="noopener">@aegerton&lt;/a>,
&lt;a href="https://github.com/alexpghayes" target="_blank" rel="noopener">@alexpghayes&lt;/a>,
&lt;a href="https://github.com/alistaire47" target="_blank" rel="noopener">@alistaire47&lt;/a>,
&lt;a href="https://github.com/andresrcs" target="_blank" rel="noopener">@andresrcs&lt;/a>,
&lt;a href="https://github.com/assignUser" target="_blank" rel="noopener">@assignUser&lt;/a>,
&lt;a href="https://github.com/atusy" target="_blank" rel="noopener">@atusy&lt;/a>,
&lt;a href="https://github.com/baptiste" target="_blank" rel="noopener">@baptiste&lt;/a>,
&lt;a href="https://github.com/barryrowlingson" target="_blank" rel="noopener">@barryrowlingson&lt;/a>,
&lt;a href="https://github.com/batpigandme" target="_blank" rel="noopener">@batpigandme&lt;/a>,
&lt;a href="https://github.com/billdenney" target="_blank" rel="noopener">@billdenney&lt;/a>,
&lt;a href="https://github.com/blairj09" target="_blank" rel="noopener">@blairj09&lt;/a>,
&lt;a href="https://github.com/brshallo" target="_blank" rel="noopener">@brshallo&lt;/a>,
&lt;a href="https://github.com/brunocarlin" target="_blank" rel="noopener">@brunocarlin&lt;/a>,
&lt;a href="https://github.com/carlmorgenstern" target="_blank" rel="noopener">@carlmorgenstern&lt;/a>,
&lt;a href="https://github.com/cderv" target="_blank" rel="noopener">@cderv&lt;/a>,
&lt;a href="https://github.com/chester-gan" target="_blank" rel="noopener">@chester-gan&lt;/a>,
&lt;a href="https://github.com/chris-prener" target="_blank" rel="noopener">@chris-prener&lt;/a>,
&lt;a href="https://github.com/chsafouane" target="_blank" rel="noopener">@chsafouane&lt;/a>,
&lt;a href="https://github.com/coatless" target="_blank" rel="noopener">@coatless&lt;/a>,
&lt;a href="https://github.com/ColinFay" target="_blank" rel="noopener">@ColinFay&lt;/a>,
&lt;a href="https://github.com/cooknl" target="_blank" rel="noopener">@cooknl&lt;/a>,
&lt;a href="https://github.com/crew102" target="_blank" rel="noopener">@crew102&lt;/a>,
&lt;a href="https://github.com/cstepper" target="_blank" rel="noopener">@cstepper&lt;/a>,
&lt;a href="https://github.com/cwickham" target="_blank" rel="noopener">@cwickham&lt;/a>,
&lt;a href="https://github.com/daattali" target="_blank" rel="noopener">@daattali&lt;/a>,
&lt;a href="https://github.com/david-romano" target="_blank" rel="noopener">@david-romano&lt;/a>,
&lt;a href="https://github.com/davidbody" target="_blank" rel="noopener">@davidbody&lt;/a>,
&lt;a href="https://github.com/DavisVaughan" target="_blank" rel="noopener">@DavisVaughan&lt;/a>,
&lt;a href="https://github.com/dchiu911" target="_blank" rel="noopener">@dchiu911&lt;/a>,
&lt;a href="https://github.com/dgrtwo" target="_blank" rel="noopener">@dgrtwo&lt;/a>,
&lt;a href="https://github.com/dpprdan" target="_blank" rel="noopener">@dpprdan&lt;/a>,
&lt;a href="https://github.com/dskard" target="_blank" rel="noopener">@dskard&lt;/a>,
&lt;a href="https://github.com/ellessenne" target="_blank" rel="noopener">@ellessenne&lt;/a>,
&lt;a href="https://github.com/emiltb" target="_blank" rel="noopener">@emiltb&lt;/a>,
&lt;a href="https://github.com/filipwastberg" target="_blank" rel="noopener">@filipwastberg&lt;/a>,
&lt;a href="https://github.com/franknarf1" target="_blank" rel="noopener">@franknarf1&lt;/a>,
&lt;a href="https://github.com/friendly" target="_blank" rel="noopener">@friendly&lt;/a>,
&lt;a href="https://github.com/gaborcsardi" target="_blank" rel="noopener">@gaborcsardi&lt;/a>,
&lt;a href="https://github.com/GegznaV" target="_blank" rel="noopener">@GegznaV&lt;/a>,
&lt;a href="https://github.com/gergness" target="_blank" rel="noopener">@gergness&lt;/a>,
&lt;a href="https://github.com/gvdr" target="_blank" rel="noopener">@gvdr&lt;/a>,
&lt;a href="https://github.com/hadley" target="_blank" rel="noopener">@hadley&lt;/a>,
&lt;a href="https://github.com/harrismcgehee" target="_blank" rel="noopener">@harrismcgehee&lt;/a>,
&lt;a href="https://github.com/HeidiSeibold" target="_blank" rel="noopener">@HeidiSeibold&lt;/a>,
&lt;a href="https://github.com/helix123" target="_blank" rel="noopener">@helix123&lt;/a>,
&lt;a href="https://github.com/Henrik-P" target="_blank" rel="noopener">@Henrik-P&lt;/a>,
&lt;a href="https://github.com/HughParsonage" target="_blank" rel="noopener">@HughParsonage&lt;/a>,
&lt;a href="https://github.com/IndrajeetPatil" target="_blank" rel="noopener">@IndrajeetPatil&lt;/a>,
&lt;a href="https://github.com/isteves" target="_blank" rel="noopener">@isteves&lt;/a>,
&lt;a href="https://github.com/j450h1" target="_blank" rel="noopener">@j450h1&lt;/a>,
&lt;a href="https://github.com/jasonmtroos" target="_blank" rel="noopener">@jasonmtroos&lt;/a>,
&lt;a href="https://github.com/jayhesselberth" target="_blank" rel="noopener">@jayhesselberth&lt;/a>,
&lt;a href="https://github.com/jemus42" target="_blank" rel="noopener">@jemus42&lt;/a>,
&lt;a href="https://github.com/jennformatics" target="_blank" rel="noopener">@jennformatics&lt;/a>,
&lt;a href="https://github.com/jennybc" target="_blank" rel="noopener">@jennybc&lt;/a>,
&lt;a href="https://github.com/JiaxiangBU" target="_blank" rel="noopener">@JiaxiangBU&lt;/a>,
&lt;a href="https://github.com/jimhester" target="_blank" rel="noopener">@jimhester&lt;/a>,
&lt;a href="https://github.com/joelgombin" target="_blank" rel="noopener">@joelgombin&lt;/a>,
&lt;a href="https://github.com/JohnMount" target="_blank" rel="noopener">@JohnMount&lt;/a>,
&lt;a href="https://github.com/jooyoungseo" target="_blank" rel="noopener">@jooyoungseo&lt;/a>,
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>,
&lt;a href="https://github.com/jzadra" target="_blank" rel="noopener">@jzadra&lt;/a>,
&lt;a href="https://github.com/karawoo" target="_blank" rel="noopener">@karawoo&lt;/a>,
&lt;a href="https://github.com/kevinushey" target="_blank" rel="noopener">@kevinushey&lt;/a>,
&lt;a href="https://github.com/krlmlr" target="_blank" rel="noopener">@krlmlr&lt;/a>,
&lt;a href="https://github.com/lbusett" target="_blank" rel="noopener">@lbusett&lt;/a>,
&lt;a href="https://github.com/lionel-" target="_blank" rel="noopener">@lionel-&lt;/a>,
&lt;a href="https://github.com/lizhiwei1994" target="_blank" rel="noopener">@lizhiwei1994&lt;/a>,
&lt;a href="https://github.com/llrs" target="_blank" rel="noopener">@llrs&lt;/a>,
&lt;a href="https://github.com/lorenzwalthert" target="_blank" rel="noopener">@lorenzwalthert&lt;/a>,
&lt;a href="https://github.com/maelle" target="_blank" rel="noopener">@maelle&lt;/a>,
&lt;a href="https://github.com/marionlouveaux" target="_blank" rel="noopener">@marionlouveaux&lt;/a>,
&lt;a href="https://github.com/markdly" target="_blank" rel="noopener">@markdly&lt;/a>,
&lt;a href="https://github.com/mattfidler" target="_blank" rel="noopener">@mattfidler&lt;/a>,
&lt;a href="https://github.com/maurolepore" target="_blank" rel="noopener">@maurolepore&lt;/a>,
&lt;a href="https://github.com/mcanouil" target="_blank" rel="noopener">@mcanouil&lt;/a>,
&lt;a href="https://github.com/mdlincoln" target="_blank" rel="noopener">@mdlincoln&lt;/a>,
&lt;a href="https://github.com/mine-cetinkaya-rundel" target="_blank" rel="noopener">@mine-cetinkaya-rundel&lt;/a>,
&lt;a href="https://github.com/missaugustina" target="_blank" rel="noopener">@missaugustina&lt;/a>,
&lt;a href="https://github.com/moodymudskipper" target="_blank" rel="noopener">@moodymudskipper&lt;/a>,
&lt;a href="https://github.com/mrchypark" target="_blank" rel="noopener">@mrchypark&lt;/a>,
&lt;a href="https://github.com/mrdwab" target="_blank" rel="noopener">@mrdwab&lt;/a>,
&lt;a href="https://github.com/njtierney" target="_blank" rel="noopener">@njtierney&lt;/a>,
&lt;a href="https://github.com/no-reply" target="_blank" rel="noopener">@no-reply&lt;/a>,
&lt;a href="https://github.com/noamross" target="_blank" rel="noopener">@noamross&lt;/a>,
&lt;a href="https://github.com/npjc" target="_blank" rel="noopener">@npjc&lt;/a>,
&lt;a href="https://github.com/paleolimbot" target="_blank" rel="noopener">@paleolimbot&lt;/a>,
&lt;a href="https://github.com/pat-s" target="_blank" rel="noopener">@pat-s&lt;/a>,
&lt;a href="https://github.com/paternogbc" target="_blank" rel="noopener">@paternogbc&lt;/a>,
&lt;a href="https://github.com/PeteHaitch" target="_blank" rel="noopener">@PeteHaitch&lt;/a>,
&lt;a href="https://github.com/pgensler" target="_blank" rel="noopener">@pgensler&lt;/a>,
&lt;a href="https://github.com/PiotrKoller" target="_blank" rel="noopener">@PiotrKoller&lt;/a>,
&lt;a href="https://github.com/PMassicotte" target="_blank" rel="noopener">@PMassicotte&lt;/a>,
&lt;a href="https://github.com/prosoitos" target="_blank" rel="noopener">@prosoitos&lt;/a>,
&lt;a href="https://github.com/PublicHealthDataGeek" target="_blank" rel="noopener">@PublicHealthDataGeek&lt;/a>,
&lt;a href="https://github.com/r2evans" target="_blank" rel="noopener">@r2evans&lt;/a>,
&lt;a href="https://github.com/rcorty" target="_blank" rel="noopener">@rcorty&lt;/a>,
&lt;a href="https://github.com/restonslacker" target="_blank" rel="noopener">@restonslacker&lt;/a>,
&lt;a href="https://github.com/RLesur" target="_blank" rel="noopener">@RLesur&lt;/a>,
&lt;a href="https://github.com/robjhyndman" target="_blank" rel="noopener">@robjhyndman&lt;/a>,
&lt;a href="https://github.com/romainfrancois" target="_blank" rel="noopener">@romainfrancois&lt;/a>,
&lt;a href="https://github.com/rpruim" target="_blank" rel="noopener">@rpruim&lt;/a>,
&lt;a href="https://github.com/sckott" target="_blank" rel="noopener">@sckott&lt;/a>,
&lt;a href="https://github.com/scottcame" target="_blank" rel="noopener">@scottcame&lt;/a>,
&lt;a href="https://github.com/sfirke" target="_blank" rel="noopener">@sfirke&lt;/a>,
&lt;a href="https://github.com/sjspielman" target="_blank" rel="noopener">@sjspielman&lt;/a>,
&lt;a href="https://github.com/Tugsdelger" target="_blank" rel="noopener">@Tugsdelger&lt;/a>,
&lt;a href="https://github.com/tungmilan" target="_blank" rel="noopener">@tungmilan&lt;/a>,
&lt;a href="https://github.com/uribo" target="_blank" rel="noopener">@uribo&lt;/a>,
&lt;a href="https://github.com/wlandau" target="_blank" rel="noopener">@wlandau&lt;/a>,
&lt;a href="https://github.com/yonicd" target="_blank" rel="noopener">@yonicd&lt;/a>,
&lt;a href="https://github.com/yutannihilation" target="_blank" rel="noopener">@yutannihilation&lt;/a>,
&lt;a href="https://github.com/zkamvar" target="_blank" rel="noopener">@zkamvar&lt;/a>, and
&lt;a href="https://github.com/zx8754" target="_blank" rel="noopener">@zx8754&lt;/a>.&lt;/p>
&lt;section class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1" role="doc-endnote">
&lt;p>Another way you might get reprex is by installing the tidyverse meta-package. reprex is one of the packages installed by
&lt;a href="https://rdrr.io/r/utils/install.packages.html" target="_blank" rel="noopener">&lt;code>install.packages(&amp;quot;tidyverse&amp;quot;)&lt;/code>&lt;/a>, however it is &lt;strong>not&lt;/strong> among the core packages attached by
&lt;a href="http://tidyverse.tidyverse.org" target="_blank" rel="noopener">&lt;code>library(tidyverse)&lt;/code>&lt;/a>. &lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:2" role="doc-endnote">
&lt;p>Since the output is commented out, its presence is harmless. But you can even use
&lt;a href="https://reprex.tidyverse.org/reference/un-reprex.html" target="_blank" rel="noopener">&lt;code>reprex::reprex_clean()&lt;/code>&lt;/a> and friends to un-reprex code, if you like. &lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:3" role="doc-endnote">
&lt;p>You can disable the WYSIWYG Slack message interface in &lt;strong>Preferences &amp;gt; Advanced&lt;/strong>. Select the &lt;strong>Format messages with markup setting&lt;/strong>. The
&lt;a href="https://www.markdownguide.org/tools/slack/" target="_blank" rel="noopener">Slack section of The Markdown Guide&lt;/a> is helpful for figuring out which subsets of Markdown are supported in different parts of Slack. &lt;a href="#fnref:3" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/section></description></item><item><title>readr 1.4.0</title><link>https://www.tidyverse.org/blog/2020/10/readr-1-4-0/</link><pubDate>Tue, 06 Oct 2020 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2020/10/readr-1-4-0/</guid><description>&lt;p>
&lt;a href="http://readr.tidyverse.org" target="_blank" rel="noopener">readr&lt;/a> 1.4.0 is now available on CRAN! Learn more about readr at &lt;a href="https://readr.tidyverse.org" class="uri">&lt;a href="https://readr.tidyverse.org">https://readr.tidyverse.org&lt;/a>&lt;/a>. Detailed notes are always in the
&lt;a href="https://readr.tidyverse.org/news/index.html#readr-1-4-0" target="_blank" rel="noopener">change log&lt;/a>.&lt;/p>
&lt;p>The readr package makes it easy to get rectangular data out of comma separated (csv), tab separated (tsv) or fixed width files (fwf) and into R. It is designed to flexibly parse many types of data found in the wild, while still cleanly failing when data unexpectedly changes. If you are new to readr, the best place to start is the
&lt;a href="https://r4ds.had.co.nz/data-import.html" target="_blank" rel="noopener">data import chapter&lt;/a> in R for data science.&lt;/p>
&lt;p>Install readr with&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">install.packages&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;readr&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>And load it with&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>(&lt;span class='k'>&lt;a href='http://tidyverse.tidyverse.org'>tidyverse&lt;/a>&lt;/span>)
&lt;span class='c'>#&amp;gt; ── &lt;span style='font-weight: bold;'>Attaching packages&lt;/span>&lt;span> ─────────────────────────────────────── tidyverse 1.3.0 ──&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BB00;'>✔&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #0000BB;'>ggplot2&lt;/span>&lt;span> 3.3.2 &lt;/span>&lt;span style='color: #00BB00;'>✔&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #0000BB;'>purrr &lt;/span>&lt;span> 0.3.4&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BB00;'>✔&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #0000BB;'>tibble &lt;/span>&lt;span> 3.0.3 &lt;/span>&lt;span style='color: #00BB00;'>✔&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #0000BB;'>dplyr &lt;/span>&lt;span> 1.0.2&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BB00;'>✔&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #0000BB;'>tidyr &lt;/span>&lt;span> 1.1.2 &lt;/span>&lt;span style='color: #00BB00;'>✔&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #0000BB;'>stringr&lt;/span>&lt;span> 1.4.0&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #00BB00;'>✔&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #0000BB;'>readr &lt;/span>&lt;span> 1.4.0 &lt;/span>&lt;span style='color: #00BB00;'>✔&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #0000BB;'>forcats&lt;/span>&lt;span> 0.5.0&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; ── &lt;span style='font-weight: bold;'>Conflicts&lt;/span>&lt;span> ────────────────────────────────────────── tidyverse_conflicts() ──&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #BB0000;'>✖&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #0000BB;'>dplyr&lt;/span>&lt;span>::&lt;/span>&lt;span style='color: #00BB00;'>filter()&lt;/span>&lt;span> masks &lt;/span>&lt;span style='color: #0000BB;'>stats&lt;/span>&lt;span>::filter()&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; &lt;span style='color: #BB0000;'>✖&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #0000BB;'>dplyr&lt;/span>&lt;span>::&lt;/span>&lt;span style='color: #00BB00;'>lag()&lt;/span>&lt;span> masks &lt;/span>&lt;span style='color: #0000BB;'>stats&lt;/span>&lt;span>::lag()&lt;/span>&lt;/span>
&lt;/code>&lt;/pre>
&lt;/div>
&lt;h2 id="breaking-changes">Breaking Changes
&lt;a href="#breaking-changes">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>
&lt;h3 id="argument-name-consistency">Argument name consistency
&lt;a href="#argument-name-consistency">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>The first argument to all of the &lt;code>write_()&lt;/code> functions, like &lt;code>write_csv()&lt;/code> had previously been &lt;code>path&lt;/code>. However the first argument to all of the &lt;code>read_()&lt;/code> functions is &lt;code>file&lt;/code>. As of readr 1.4.0 the first argument to both &lt;code>read_()&lt;/code> and &lt;code>write_()&lt;/code> functions is &lt;code>file&lt;/code> and &lt;code>path&lt;/code> is now deprecated.&lt;/p>
&lt;h3 id="nan-behavior">NaN behavior
&lt;a href="#nan-behavior">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>Some floating point operations can produce a &lt;code>NaN&lt;/code> value, e.g. &lt;code>0 / 0&lt;/code>. Previously &lt;code>write_csv()&lt;/code> would output &lt;code>NaN&lt;/code> values always as &lt;code>NaN&lt;/code> and this could not be controlled by the &lt;code>write_csv(na=)&lt;/code> argument. Now the output value of &lt;code>NaN&lt;/code> is the same as the &lt;code>NA&lt;/code> and can be controlled by the argument. This is a breaking change in that the same code would produce different output, but it should be rare in practice.&lt;/p>
&lt;h2 id="new-features">New features
&lt;a href="#new-features">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>
&lt;h3 id="generate-column-specifications-from-datasets">Generate column specifications from datasets
&lt;a href="#generate-column-specifications-from-datasets">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>Using &lt;code>as.col_spec()&lt;/code> on any &lt;code>data.frame&lt;/code> or &lt;code>tibble&lt;/code> object will now generate a column specification with the column types in the data.&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/library.html'>library&lt;/a>&lt;/span>(&lt;span class='k'>&lt;a href='https://allisonhorst.github.io/palmerpenguins/'>palmerpenguins&lt;/a>&lt;/span>)
&lt;span class='k'>spec&lt;/span> &lt;span class='o'>&amp;lt;-&lt;/span> &lt;span class='nf'>as.col_spec&lt;/span>(&lt;span class='k'>penguins&lt;/span>)
&lt;span class='k'>spec&lt;/span>
&lt;span class='c'>#&amp;gt; cols(&lt;/span>
&lt;span class='c'>#&amp;gt; species = &lt;span style='color: #BB0000;'>col_factor(levels = c("Adelie", "Chinstrap", "Gentoo"), ordered = FALSE, include_na = FALSE)&lt;/span>&lt;span>,&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; island = &lt;span style='color: #BB0000;'>col_factor(levels = c("Biscoe", "Dream", "Torgersen"), ordered = FALSE, include_na = FALSE)&lt;/span>&lt;span>,&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; bill_length_mm = &lt;span style='color: #00BB00;'>col_double()&lt;/span>&lt;span>,&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; bill_depth_mm = &lt;span style='color: #00BB00;'>col_double()&lt;/span>&lt;span>,&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; flipper_length_mm = &lt;span style='color: #00BB00;'>col_integer()&lt;/span>&lt;span>,&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; body_mass_g = &lt;span style='color: #00BB00;'>col_integer()&lt;/span>&lt;span>,&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; sex = &lt;span style='color: #BB0000;'>col_factor(levels = c("female", "male"), ordered = FALSE, include_na = FALSE)&lt;/span>&lt;span>,&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; year = &lt;span style='color: #00BB00;'>col_integer()&lt;/span>&lt;/span>
&lt;span class='c'>#&amp;gt; )&lt;/span>
&lt;/code>&lt;/pre>
&lt;/div>
&lt;p>You can also convert the column specifications to a condensed textual representation with
&lt;a href="https://rdrr.io/r/base/character.html" target="_blank" rel="noopener">&lt;code>as.character()&lt;/code>&lt;/a>&lt;/p>
&lt;div class="highlight">
&lt;pre class='chroma'>&lt;code class='language-r' data-lang='r'>&lt;span class='nf'>&lt;a href='https://rdrr.io/r/base/character.html'>as.character&lt;/a>&lt;/span>(&lt;span class='k'>spec&lt;/span>)
&lt;span class='c'>#&amp;gt; [1] "ffddiifi"&lt;/span>
&lt;/code>&lt;/pre>
&lt;/div>
&lt;h3 id="writing-end-of-line-characters">Writing end of line characters
&lt;a href="#writing-end-of-line-characters">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>Write functions now take a &lt;code>eol&lt;/code> argument to allow control of the end of line characters. Previously readr only supported using a single newline (&lt;code>\n&lt;/code>) character. You can now specify any number of characters, though windows linefeed newline (&lt;code>\r\n&lt;/code>) is by far the most common alternative.&lt;/p>
&lt;h3 id="cli-package-is-now-used-for-messages">cli package is now used for messages
&lt;a href="#cli-package-is-now-used-for-messages">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>The cli package is now used for messages. The most prominent place you will notice this is printing the column specifications. Previously these functions used
&lt;a href="https://rdrr.io/r/base/message.html" target="_blank" rel="noopener">&lt;code>message()&lt;/code>&lt;/a>, which in RStudio prints the text in red.&lt;/p>
&lt;p>While cli still uses message objects, they will now be more naturally colored, which hopefully will make them easier to read.&lt;/p>
&lt;h3 id="rcpp-dependency-removed">Rcpp dependency removed
&lt;a href="#rcpp-dependency-removed">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>The Rcpp dependency has been removed in favor of
&lt;a href="https://cpp11.r-lib.org/" target="_blank" rel="noopener">cpp11&lt;/a>. Compiling readr should now take less time and use less memory.&lt;/p>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>As usual, there were many more additional changes and bugfixes included in this release see the
&lt;a href="https://readr.tidyverse.org/news/index.html#readr-1-4-0" target="_blank" rel="noopener">change log&lt;/a> for details.&lt;/p>
&lt;p>Thank you to the 132 contributors who made this release possible by opening issues or submitting pull requests:
&lt;a href="https://github.com/adamroyjones" target="_blank" rel="noopener">@adamroyjones&lt;/a>,
&lt;a href="https://github.com/aetiologicCanada" target="_blank" rel="noopener">@aetiologicCanada&lt;/a>,
&lt;a href="https://github.com/ailich" target="_blank" rel="noopener">@ailich&lt;/a>,
&lt;a href="https://github.com/antoine-sachet" target="_blank" rel="noopener">@antoine-sachet&lt;/a>,
&lt;a href="https://github.com/archenemies" target="_blank" rel="noopener">@archenemies&lt;/a>,
&lt;a href="https://github.com/ashuchawla" target="_blank" rel="noopener">@ashuchawla&lt;/a>,
&lt;a href="https://github.com/Athanasiamo" target="_blank" rel="noopener">@Athanasiamo&lt;/a>,
&lt;a href="https://github.com/bastianilso" target="_blank" rel="noopener">@bastianilso&lt;/a>,
&lt;a href="https://github.com/batpigandme" target="_blank" rel="noopener">@batpigandme&lt;/a>,
&lt;a href="https://github.com/Ben-Cox" target="_blank" rel="noopener">@Ben-Cox&lt;/a>,
&lt;a href="https://github.com/bergen288" target="_blank" rel="noopener">@bergen288&lt;/a>,
&lt;a href="https://github.com/boshek" target="_blank" rel="noopener">@boshek&lt;/a>,
&lt;a href="https://github.com/bovender" target="_blank" rel="noopener">@bovender&lt;/a>,
&lt;a href="https://github.com/bransonf" target="_blank" rel="noopener">@bransonf&lt;/a>,
&lt;a href="https://github.com/brianrice2" target="_blank" rel="noopener">@brianrice2&lt;/a>,
&lt;a href="https://github.com/briatte" target="_blank" rel="noopener">@briatte&lt;/a>,
&lt;a href="https://github.com/c30saux" target="_blank" rel="noopener">@c30saux&lt;/a>,
&lt;a href="https://github.com/cboettig" target="_blank" rel="noopener">@cboettig&lt;/a>,
&lt;a href="https://github.com/cderv" target="_blank" rel="noopener">@cderv&lt;/a>,
&lt;a href="https://github.com/cdhowe" target="_blank" rel="noopener">@cdhowe&lt;/a>,
&lt;a href="https://github.com/ceresek" target="_blank" rel="noopener">@ceresek&lt;/a>,
&lt;a href="https://github.com/charliejhadley" target="_blank" rel="noopener">@charliejhadley&lt;/a>,
&lt;a href="https://github.com/chipkoziara" target="_blank" rel="noopener">@chipkoziara&lt;/a>,
&lt;a href="https://github.com/cwolk" target="_blank" rel="noopener">@cwolk&lt;/a>,
&lt;a href="https://github.com/damianooldoni" target="_blank" rel="noopener">@damianooldoni&lt;/a>,
&lt;a href="https://github.com/dan-reznik" target="_blank" rel="noopener">@dan-reznik&lt;/a>,
&lt;a href="https://github.com/DanielleQuinn" target="_blank" rel="noopener">@DanielleQuinn&lt;/a>,
&lt;a href="https://github.com/DarwinAwardWinner" target="_blank" rel="noopener">@DarwinAwardWinner&lt;/a>,
&lt;a href="https://github.com/dhmontgomery" target="_blank" rel="noopener">@dhmontgomery&lt;/a>,
&lt;a href="https://github.com/djbirke" target="_blank" rel="noopener">@djbirke&lt;/a>,
&lt;a href="https://github.com/dkahle" target="_blank" rel="noopener">@dkahle&lt;/a>,
&lt;a href="https://github.com/dmitrienka" target="_blank" rel="noopener">@dmitrienka&lt;/a>,
&lt;a href="https://github.com/dmurdoch" target="_blank" rel="noopener">@dmurdoch&lt;/a>,
&lt;a href="https://github.com/dpprdan" target="_blank" rel="noopener">@dpprdan&lt;/a>,
&lt;a href="https://github.com/dwachsmuth" target="_blank" rel="noopener">@dwachsmuth&lt;/a>,
&lt;a href="https://github.com/EarlGlynn" target="_blank" rel="noopener">@EarlGlynn&lt;/a>,
&lt;a href="https://github.com/edo91" target="_blank" rel="noopener">@edo91&lt;/a>,
&lt;a href="https://github.com/ellessenne" target="_blank" rel="noopener">@ellessenne&lt;/a>,
&lt;a href="https://github.com/Fernal73" target="_blank" rel="noopener">@Fernal73&lt;/a>,
&lt;a href="https://github.com/firasm" target="_blank" rel="noopener">@firasm&lt;/a>,
&lt;a href="https://github.com/fjuniorr" target="_blank" rel="noopener">@fjuniorr&lt;/a>,
&lt;a href="https://github.com/frahimov" target="_blank" rel="noopener">@frahimov&lt;/a>,
&lt;a href="https://github.com/frousseu" target="_blank" rel="noopener">@frousseu&lt;/a>,
&lt;a href="https://github.com/GegznaV" target="_blank" rel="noopener">@GegznaV&lt;/a>,
&lt;a href="https://github.com/georgevbsantiago" target="_blank" rel="noopener">@georgevbsantiago&lt;/a>,
&lt;a href="https://github.com/geotheory" target="_blank" rel="noopener">@geotheory&lt;/a>,
&lt;a href="https://github.com/greg-minshall" target="_blank" rel="noopener">@greg-minshall&lt;/a>,
&lt;a href="https://github.com/hadley" target="_blank" rel="noopener">@hadley&lt;/a>,
&lt;a href="https://github.com/hidekoji" target="_blank" rel="noopener">@hidekoji&lt;/a>,
&lt;a href="https://github.com/huashan" target="_blank" rel="noopener">@huashan&lt;/a>,
&lt;a href="https://github.com/ifendo" target="_blank" rel="noopener">@ifendo&lt;/a>,
&lt;a href="https://github.com/ijlyttle" target="_blank" rel="noopener">@ijlyttle&lt;/a>,
&lt;a href="https://github.com/isaactpetersen" target="_blank" rel="noopener">@isaactpetersen&lt;/a>,
&lt;a href="https://github.com/jangorecki" target="_blank" rel="noopener">@jangorecki&lt;/a>,
&lt;a href="https://github.com/jdblischak" target="_blank" rel="noopener">@jdblischak&lt;/a>,
&lt;a href="https://github.com/jemunro" target="_blank" rel="noopener">@jemunro&lt;/a>,
&lt;a href="https://github.com/jennahamlin" target="_blank" rel="noopener">@jennahamlin&lt;/a>,
&lt;a href="https://github.com/jesse-ross" target="_blank" rel="noopener">@jesse-ross&lt;/a>,
&lt;a href="https://github.com/jimhester" target="_blank" rel="noopener">@jimhester&lt;/a>,
&lt;a href="https://github.com/jmarshallnz" target="_blank" rel="noopener">@jmarshallnz&lt;/a>,
&lt;a href="https://github.com/jmcloughlin" target="_blank" rel="noopener">@jmcloughlin&lt;/a>,
&lt;a href="https://github.com/jmobrien" target="_blank" rel="noopener">@jmobrien&lt;/a>,
&lt;a href="https://github.com/jnolis" target="_blank" rel="noopener">@jnolis&lt;/a>,
&lt;a href="https://github.com/jokedurnez" target="_blank" rel="noopener">@jokedurnez&lt;/a>,
&lt;a href="https://github.com/jpwhitney" target="_blank" rel="noopener">@jpwhitney&lt;/a>,
&lt;a href="https://github.com/jssa98" target="_blank" rel="noopener">@jssa98&lt;/a>,
&lt;a href="https://github.com/juangomezduaso" target="_blank" rel="noopener">@juangomezduaso&lt;/a>,
&lt;a href="https://github.com/junqi108" target="_blank" rel="noopener">@junqi108&lt;/a>,
&lt;a href="https://github.com/JustGitting" target="_blank" rel="noopener">@JustGitting&lt;/a>,
&lt;a href="https://github.com/jxu" target="_blank" rel="noopener">@jxu&lt;/a>,
&lt;a href="https://github.com/kainhofer" target="_blank" rel="noopener">@kainhofer&lt;/a>,
&lt;a href="https://github.com/katgit" target="_blank" rel="noopener">@katgit&lt;/a>,
&lt;a href="https://github.com/kbzsl" target="_blank" rel="noopener">@kbzsl&lt;/a>,
&lt;a href="https://github.com/keesdeschepper" target="_blank" rel="noopener">@keesdeschepper&lt;/a>,
&lt;a href="https://github.com/kiernann" target="_blank" rel="noopener">@kiernann&lt;/a>,
&lt;a href="https://github.com/knausb" target="_blank" rel="noopener">@knausb&lt;/a>,
&lt;a href="https://github.com/krlmlr" target="_blank" rel="noopener">@krlmlr&lt;/a>,
&lt;a href="https://github.com/kvittingseerup" target="_blank" rel="noopener">@kvittingseerup&lt;/a>,
&lt;a href="https://github.com/lambdamoses" target="_blank" rel="noopener">@lambdamoses&lt;/a>,
&lt;a href="https://github.com/leopoldsw" target="_blank" rel="noopener">@leopoldsw&lt;/a>,
&lt;a href="https://github.com/lsaravia" target="_blank" rel="noopener">@lsaravia&lt;/a>,
&lt;a href="https://github.com/MihaiBabiac" target="_blank" rel="noopener">@MihaiBabiac&lt;/a>,
&lt;a href="https://github.com/mkearney" target="_blank" rel="noopener">@mkearney&lt;/a>,
&lt;a href="https://github.com/mlaunois" target="_blank" rel="noopener">@mlaunois&lt;/a>,
&lt;a href="https://github.com/mmuurr" target="_blank" rel="noopener">@mmuurr&lt;/a>,
&lt;a href="https://github.com/moodymudskipper" target="_blank" rel="noopener">@moodymudskipper&lt;/a>,
&lt;a href="https://github.com/MZellou" target="_blank" rel="noopener">@MZellou&lt;/a>,
&lt;a href="https://github.com/nacnudus" target="_blank" rel="noopener">@nacnudus&lt;/a>,
&lt;a href="https://github.com/natecobb" target="_blank" rel="noopener">@natecobb&lt;/a>,
&lt;a href="https://github.com/NFA" target="_blank" rel="noopener">@NFA&lt;/a>,
&lt;a href="https://github.com/NikKrieger" target="_blank" rel="noopener">@NikKrieger&lt;/a>,
&lt;a href="https://github.com/njtierney" target="_blank" rel="noopener">@njtierney&lt;/a>,
&lt;a href="https://github.com/nogeel" target="_blank" rel="noopener">@nogeel&lt;/a>,
&lt;a href="https://github.com/orderlyquant" target="_blank" rel="noopener">@orderlyquant&lt;/a>,
&lt;a href="https://github.com/oscci" target="_blank" rel="noopener">@oscci&lt;/a>,
&lt;a href="https://github.com/Ozan147" target="_blank" rel="noopener">@Ozan147&lt;/a>,
&lt;a href="https://github.com/pcgreen7" target="_blank" rel="noopener">@pcgreen7&lt;/a>,
&lt;a href="https://github.com/perog" target="_blank" rel="noopener">@perog&lt;/a>,
&lt;a href="https://github.com/phil-grayson" target="_blank" rel="noopener">@phil-grayson&lt;/a>,
&lt;a href="https://github.com/pralitp" target="_blank" rel="noopener">@pralitp&lt;/a>,
&lt;a href="https://github.com/psychelzh" target="_blank" rel="noopener">@psychelzh&lt;/a>,
&lt;a href="https://github.com/QuLogic" target="_blank" rel="noopener">@QuLogic&lt;/a>,
&lt;a href="https://github.com/r2evans" target="_blank" rel="noopener">@r2evans&lt;/a>,
&lt;a href="https://github.com/Rajesh-Ramasamy" target="_blank" rel="noopener">@Rajesh-Ramasamy&lt;/a>,
&lt;a href="https://github.com/ralsouza" target="_blank" rel="noopener">@ralsouza&lt;/a>,
&lt;a href="https://github.com/rcragun" target="_blank" rel="noopener">@rcragun&lt;/a>,
&lt;a href="https://github.com/romainfrancois" target="_blank" rel="noopener">@romainfrancois&lt;/a>,
&lt;a href="https://github.com/salim-b" target="_blank" rel="noopener">@salim-b&lt;/a>,
&lt;a href="https://github.com/sfrenk" target="_blank" rel="noopener">@sfrenk&lt;/a>,
&lt;a href="https://github.com/Shians" target="_blank" rel="noopener">@Shians&lt;/a>,
&lt;a href="https://github.com/shrektan" target="_blank" rel="noopener">@shrektan&lt;/a>,
&lt;a href="https://github.com/skaltman" target="_blank" rel="noopener">@skaltman&lt;/a>,
&lt;a href="https://github.com/sonhan18" target="_blank" rel="noopener">@sonhan18&lt;/a>,
&lt;a href="https://github.com/StevenMMortimer" target="_blank" rel="noopener">@StevenMMortimer&lt;/a>,
&lt;a href="https://github.com/thays42" target="_blank" rel="noopener">@thays42&lt;/a>,
&lt;a href="https://github.com/ThePrez" target="_blank" rel="noopener">@ThePrez&lt;/a>,
&lt;a href="https://github.com/tmalsburg" target="_blank" rel="noopener">@tmalsburg&lt;/a>,
&lt;a href="https://github.com/TrentLobdell" target="_blank" rel="noopener">@TrentLobdell&lt;/a>,
&lt;a href="https://github.com/ttimbers" target="_blank" rel="noopener">@ttimbers&lt;/a>,
&lt;a href="https://github.com/vnijs" target="_blank" rel="noopener">@vnijs&lt;/a>,
&lt;a href="https://github.com/wch" target="_blank" rel="noopener">@wch&lt;/a>,
&lt;a href="https://github.com/we-hop" target="_blank" rel="noopener">@we-hop&lt;/a>,
&lt;a href="https://github.com/wehopkins" target="_blank" rel="noopener">@wehopkins&lt;/a>,
&lt;a href="https://github.com/wibeasley" target="_blank" rel="noopener">@wibeasley&lt;/a>,
&lt;a href="https://github.com/wolski" target="_blank" rel="noopener">@wolski&lt;/a>,
&lt;a href="https://github.com/wwgordon" target="_blank" rel="noopener">@wwgordon&lt;/a>,
&lt;a href="https://github.com/xianwenchen" target="_blank" rel="noopener">@xianwenchen&lt;/a>,
&lt;a href="https://github.com/xiaodaigh" target="_blank" rel="noopener">@xiaodaigh&lt;/a>,
&lt;a href="https://github.com/xinyue-li" target="_blank" rel="noopener">@xinyue-li&lt;/a>,
&lt;a href="https://github.com/yutannihilation" target="_blank" rel="noopener">@yutannihilation&lt;/a>,
&lt;a href="https://github.com/Zack-83" target="_blank" rel="noopener">@Zack-83&lt;/a>, and
&lt;a href="https://github.com/zenggyu" target="_blank" rel="noopener">@zenggyu&lt;/a>.&lt;/p></description></item><item><title>haven 2.3.0</title><link>https://www.tidyverse.org/blog/2020/06/haven-2-3-0/</link><pubDate>Mon, 01 Jun 2020 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2020/06/haven-2-3-0/</guid><description>&lt;p>We&amp;rsquo;re tickled pink to announce the release of
&lt;a href="https://haven.tidyverse.org" target="_blank" rel="noopener">haven&lt;/a> 2.3.0. haven allows you to read and write SAS, SPSS, and Stata data formats from R, thanks to the wonderful
&lt;a href="https://github.com/WizardMac/ReadStat" target="_blank" rel="noopener">ReadStat&lt;/a> C library written by
&lt;a href="https://www.evanmiller.org/" target="_blank" rel="noopener">Evan Miller&lt;/a>.&lt;/p>
&lt;p>You can install haven from CRAN with:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">install.packages&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;haven&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>This release is mainly in preparation for dplyr 1.0.0. It includes improved
&lt;a href="https://www.tidyverse.org/blog/2020/04/dplyr-1-0-0-and-vctrs/" target="_blank" rel="noopener">vctrs support&lt;/a> for the &lt;code>labelled()&lt;/code> class that haven uses to represent labelled vectors that come from SAS, Stata, and SPSS. This is not terribly exciting, but it means that the labelled class is now preserved by every dplyr operation where it makes sense:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">haven&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dplyr&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">warn.conflicts&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">FALSE&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">x&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">labelled&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">sample&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">5&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;bad&amp;#34;&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;good&amp;#34;&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">5&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="s">&amp;#34;scores&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">df&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">letters&lt;/span>&lt;span class="nf">[c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">7&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">9&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="n">]&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">df&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 5 x 2&lt;/span>
&lt;span class="c1">#&amp;gt; x y &lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;int+lbl&amp;gt; &amp;lt;chr&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 5 [good] a &lt;/span>
&lt;span class="c1">#&amp;gt; 2 3 c &lt;/span>
&lt;span class="c1">#&amp;gt; 3 4 e &lt;/span>
&lt;span class="c1">#&amp;gt; 4 1 [bad] g &lt;/span>
&lt;span class="c1">#&amp;gt; 5 2 i&lt;/span>
&lt;span class="n">df&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">arrange&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 5 x 2&lt;/span>
&lt;span class="c1">#&amp;gt; x y &lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;int+lbl&amp;gt; &amp;lt;chr&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 1 [bad] g &lt;/span>
&lt;span class="c1">#&amp;gt; 2 2 i &lt;/span>
&lt;span class="c1">#&amp;gt; 3 3 c &lt;/span>
&lt;span class="c1">#&amp;gt; 4 4 e &lt;/span>
&lt;span class="c1">#&amp;gt; 5 5 [good] a&lt;/span>
&lt;span class="n">df&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">filter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">y&lt;/span> &lt;span class="o">%in%&lt;/span> &lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;a&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;c&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 2 x 2&lt;/span>
&lt;span class="c1">#&amp;gt; x y &lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;int+lbl&amp;gt; &amp;lt;chr&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 5 [good] a &lt;/span>
&lt;span class="c1">#&amp;gt; 2 3 c&lt;/span>
&lt;span class="nf">bind_rows&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">df&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 10 x 2&lt;/span>
&lt;span class="c1">#&amp;gt; x y &lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;int+lbl&amp;gt; &amp;lt;chr&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 5 [good] a &lt;/span>
&lt;span class="c1">#&amp;gt; 2 3 c &lt;/span>
&lt;span class="c1">#&amp;gt; 3 4 e &lt;/span>
&lt;span class="c1">#&amp;gt; 4 1 [bad] g &lt;/span>
&lt;span class="c1">#&amp;gt; 5 2 i &lt;/span>
&lt;span class="c1">#&amp;gt; 6 5 [good] a &lt;/span>
&lt;span class="c1">#&amp;gt; 7 3 c &lt;/span>
&lt;span class="c1">#&amp;gt; 8 4 e &lt;/span>
&lt;span class="c1">#&amp;gt; 9 1 [bad] g &lt;/span>
&lt;span class="c1">#&amp;gt; 10 2 i&lt;/span>
&lt;span class="n">df2&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">letters&lt;/span>&lt;span class="n">[1&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="m">10&lt;/span>&lt;span class="n">]&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">df2&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">left_join&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; Joining, by = &amp;#34;y&amp;#34;&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 10 x 2&lt;/span>
&lt;span class="c1">#&amp;gt; y x&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;int+lbl&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 a 5 [good]&lt;/span>
&lt;span class="c1">#&amp;gt; 2 b NA &lt;/span>
&lt;span class="c1">#&amp;gt; 3 c 3 &lt;/span>
&lt;span class="c1">#&amp;gt; 4 d NA &lt;/span>
&lt;span class="c1">#&amp;gt; 5 e 4 &lt;/span>
&lt;span class="c1">#&amp;gt; 6 f NA &lt;/span>
&lt;span class="c1">#&amp;gt; 7 g 1 [bad] &lt;/span>
&lt;span class="c1">#&amp;gt; 8 h NA &lt;/span>
&lt;span class="c1">#&amp;gt; 9 i 2 &lt;/span>
&lt;span class="c1">#&amp;gt; 10 j NA&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>As always thanks to the GitHub community who helped make this release happen:
&lt;a href="https://github.com/180312allison" target="_blank" rel="noopener">@180312allison&lt;/a>,
&lt;a href="https://github.com/armenic" target="_blank" rel="noopener">@armenic&lt;/a>,
&lt;a href="https://github.com/batpigandme" target="_blank" rel="noopener">@batpigandme&lt;/a>,
&lt;a href="https://github.com/beckerbenj" target="_blank" rel="noopener">@beckerbenj&lt;/a>,
&lt;a href="https://github.com/bergen288" target="_blank" rel="noopener">@bergen288&lt;/a>,
&lt;a href="https://github.com/courtiol" target="_blank" rel="noopener">@courtiol&lt;/a>,
&lt;a href="https://github.com/deschen1" target="_blank" rel="noopener">@deschen1&lt;/a>,
&lt;a href="https://github.com/edvbb" target="_blank" rel="noopener">@edvbb&lt;/a>,
&lt;a href="https://github.com/Ghanshyamsavaliya" target="_blank" rel="noopener">@Ghanshyamsavaliya&lt;/a>,
&lt;a href="https://github.com/hadley" target="_blank" rel="noopener">@hadley&lt;/a>,
&lt;a href="https://github.com/JackLandry" target="_blank" rel="noopener">@JackLandry&lt;/a>,
&lt;a href="https://github.com/Jagadeeshkb" target="_blank" rel="noopener">@Jagadeeshkb&lt;/a>,
&lt;a href="https://github.com/jimhester" target="_blank" rel="noopener">@jimhester&lt;/a>,
&lt;a href="https://github.com/kurt-vd" target="_blank" rel="noopener">@kurt-vd&lt;/a>,
&lt;a href="https://github.com/larmarange" target="_blank" rel="noopener">@larmarange&lt;/a>,
&lt;a href="https://github.com/lionel-" target="_blank" rel="noopener">@lionel-&lt;/a>,
&lt;a href="https://github.com/mayer79" target="_blank" rel="noopener">@mayer79&lt;/a>,
&lt;a href="https://github.com/mikmart" target="_blank" rel="noopener">@mikmart&lt;/a>,
&lt;a href="https://github.com/mitchelloharawild" target="_blank" rel="noopener">@mitchelloharawild&lt;/a>,
&lt;a href="https://github.com/omsai" target="_blank" rel="noopener">@omsai&lt;/a>,
&lt;a href="https://github.com/pdbailey0" target="_blank" rel="noopener">@pdbailey0&lt;/a>,
&lt;a href="https://github.com/randrescastaneda" target="_blank" rel="noopener">@randrescastaneda&lt;/a>,
&lt;a href="https://github.com/richarddmorey" target="_blank" rel="noopener">@richarddmorey&lt;/a>,
&lt;a href="https://github.com/romainfrancois" target="_blank" rel="noopener">@romainfrancois&lt;/a>,
&lt;a href="https://github.com/rubenarslan" target="_blank" rel="noopener">@rubenarslan&lt;/a>,
&lt;a href="https://github.com/sda030" target="_blank" rel="noopener">@sda030&lt;/a>,
&lt;a href="https://github.com/Sdurier" target="_blank" rel="noopener">@Sdurier&lt;/a>, and
&lt;a href="https://github.com/tobwen" target="_blank" rel="noopener">@tobwen&lt;/a>.&lt;/p></description></item><item><title>forcats 0.5.0</title><link>https://www.tidyverse.org/blog/2020/03/forcats-0-5-0/</link><pubDate>Mon, 02 Mar 2020 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2020/03/forcats-0-5-0/</guid><description>&lt;p>We&amp;rsquo;re exceedingly happy to announce the release of
&lt;a href="https://forcats.tidyverse.org/" target="_blank" rel="noopener">forcats&lt;/a> 0.5.0 on CRAN.
The goal of the forcats package is to provide a suite of tools that solve common problems with factors, including changing the order of levels or the values.&lt;/p>
&lt;p>This release includes improvements to several existing functions, as well as a division of
&lt;a href="https://forcats.tidyverse.org/reference/fct_lump.html" target="_blank" rel="noopener">&lt;code>fct_lump()&lt;/code>&lt;/a> into four new functions: &lt;code>fct_lump_min()&lt;/code>, &lt;code>fct_lump_prop()&lt;/code>, &lt;code>fct_lump_n()&lt;/code>, and &lt;code>fct_lump_lowfreq()&lt;/code>. For a complete inventory of updates in this version, please see the
&lt;a href="https://forcats.tidyverse.org/dev/news/index.html" target="_blank" rel="noopener">Change log&lt;/a>.&lt;/p>
&lt;p>You can install forcats with:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">install.packages&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;forcats&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Attach the package by running:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">forcats&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;h2 id="new-features">New features
&lt;a href="#new-features">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>
&lt;h3 id="fct_lump-function-family">&lt;code>fct_lump()&lt;/code> function family
&lt;a href="#fct_lump-function-family">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>Lumping seems like a popular activity, and there are many interesting variants. Splitting fct_lump() into pieces makes it much easier for this collection to grow over time.&lt;/p>
&lt;ul>
&lt;li>&lt;code>fct_lump_min()&lt;/code> lumps levels that appear fewer than &lt;code>min&lt;/code> times.&lt;/li>
&lt;li>&lt;code>fct_lump_prop()&lt;/code> lumps levels that appear fewer than &lt;code>prop * n&lt;/code> times.&lt;/li>
&lt;li>&lt;code>fct_lump_n()&lt;/code> lumps all levels except for the &lt;code>n&lt;/code> most frequent (or least frequent, if &lt;code>n &amp;lt; 0&lt;/code>).&lt;/li>
&lt;li>&lt;code>fct_lump_lowfreq()&lt;/code> lumps together the least frequent levels, ensuring that &lt;code>&amp;quot;Other&amp;quot;&lt;/code> is still the smallest level.&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">x&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">factor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">rep&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">LETTERS&lt;/span>&lt;span class="n">[1&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="m">8&lt;/span>&lt;span class="n">]&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">times&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">40&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">10&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">27&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;span class="n">x&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">table&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1">#&amp;gt; .&lt;/span>
&lt;span class="c1">#&amp;gt; A B C D E F G H &lt;/span>
&lt;span class="c1">#&amp;gt; 40 10 5 27 3 1 1 1&lt;/span>
&lt;span class="n">x&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">fct_lump_min&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">5&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">table&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1">#&amp;gt; .&lt;/span>
&lt;span class="c1">#&amp;gt; A B C D Other &lt;/span>
&lt;span class="c1">#&amp;gt; 40 10 5 27 6&lt;/span>
&lt;span class="n">x&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">fct_lump_prop&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">0.10&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">table&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1">#&amp;gt; .&lt;/span>
&lt;span class="c1">#&amp;gt; A B D Other &lt;/span>
&lt;span class="c1">#&amp;gt; 40 10 27 11&lt;/span>
&lt;span class="n">x&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">fct_lump_n&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">3&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">table&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1">#&amp;gt; .&lt;/span>
&lt;span class="c1">#&amp;gt; A B D Other &lt;/span>
&lt;span class="c1">#&amp;gt; 40 10 27 11&lt;/span>
&lt;span class="n">x&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">fct_lump_lowfreq&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">table&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1">#&amp;gt; .&lt;/span>
&lt;span class="c1">#&amp;gt; A D Other &lt;/span>
&lt;span class="c1">#&amp;gt; 40 27 21&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;h3 id="new-arguments-and-helpers">New arguments, and helpers
&lt;a href="#new-arguments-and-helpers">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>
&lt;a href="https://forcats.tidyverse.org/reference/fct_collapse.html" target="_blank" rel="noopener">&lt;code>fct_collapse()&lt;/code>&lt;/a> now has an argument, &lt;code>other_level&lt;/code>, which allows a user-specified &lt;code>Other&lt;/code> level. Factors are now correctly collapsed when &lt;code>other_level&lt;/code> is not &lt;code>NULL&lt;/code>, and makes &lt;code>Other&lt;/code> the last level.&lt;/p>
&lt;p>
&lt;a href="https://forcats.tidyverse.org/reference/fct_reorder.html" target="_blank" rel="noopener">&lt;code>fct_reorder2()&lt;/code>&lt;/a> now has a helper function, &lt;code>first2()&lt;/code>, which sorts &lt;code>.y&lt;/code> by the first value of &lt;code>.x&lt;/code>.&lt;/p>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>A special thanks goes out to everyone who contributed to forcats during Tidyverse developer day:
&lt;a href="https://github.com/kbodwin" target="_blank" rel="noopener">Kelly Bodwin&lt;/a>,
&lt;a href="https://github.com/labouz" target="_blank" rel="noopener">Layla Bouzoubaa&lt;/a>,
&lt;a href="https://github.com/808sAndBR" target="_blank" rel="noopener">Scott Brenstuhl&lt;/a>,
&lt;a href="https://github.com/jonocarroll" target="_blank" rel="noopener">Jonathan Carroll&lt;/a>,
&lt;a href="https://github.com/monicagerber" target="_blank" rel="noopener">Monica Gerber&lt;/a>,
&lt;a href="https://github.com/johngoldin" target="_blank" rel="noopener">John Goldin&lt;/a>,
&lt;a href="https://github.com/gralgomez" target="_blank" rel="noopener">Laura Gomez&lt;/a>,
&lt;a href="https://github.com/mitchelloharawild" target="_blank" rel="noopener">Mitchell O&amp;rsquo;Hara-Wild&lt;/a>,
&lt;a href="https://github.com/riinuots" target="_blank" rel="noopener">Riinu Pius&lt;/a>, and
&lt;a href="https://github.com/robinsones" target="_blank" rel="noopener">Emily Robinson&lt;/a>.&lt;/p>
&lt;p>We&amp;rsquo;re extremely grateful for all 48 people who helped with this release:
&lt;a href="https://github.com/808sAndBR" target="_blank" rel="noopener">@808sAndBR&lt;/a>,
&lt;a href="https://github.com/adisarid" target="_blank" rel="noopener">@adisarid&lt;/a>,
&lt;a href="https://github.com/alejandroschuler" target="_blank" rel="noopener">@alejandroschuler&lt;/a>,
&lt;a href="https://github.com/AmeliaMN" target="_blank" rel="noopener">@AmeliaMN&lt;/a>,
&lt;a href="https://github.com/AndrewKinsman" target="_blank" rel="noopener">@AndrewKinsman&lt;/a>,
&lt;a href="https://github.com/avishaitsur" target="_blank" rel="noopener">@avishaitsur&lt;/a>,
&lt;a href="https://github.com/batpigandme" target="_blank" rel="noopener">@batpigandme&lt;/a>,
&lt;a href="https://github.com/bczucz" target="_blank" rel="noopener">@bczucz&lt;/a>,
&lt;a href="https://github.com/billdenney" target="_blank" rel="noopener">@billdenney&lt;/a>,
&lt;a href="https://github.com/bxc147" target="_blank" rel="noopener">@bxc147&lt;/a>,
&lt;a href="https://github.com/cuttlefish44" target="_blank" rel="noopener">@cuttlefish44&lt;/a>,
&lt;a href="https://github.com/dan-reznik" target="_blank" rel="noopener">@dan-reznik&lt;/a>,
&lt;a href="https://github.com/dpprdan" target="_blank" rel="noopener">@dpprdan&lt;/a>,
&lt;a href="https://github.com/dylanjm" target="_blank" rel="noopener">@dylanjm&lt;/a>,
&lt;a href="https://github.com/GegznaV" target="_blank" rel="noopener">@GegznaV&lt;/a>,
&lt;a href="https://github.com/ghost" target="_blank" rel="noopener">@ghost&lt;/a>,
&lt;a href="https://github.com/gralgomez" target="_blank" rel="noopener">@gralgomez&lt;/a>,
&lt;a href="https://github.com/gtm19" target="_blank" rel="noopener">@gtm19&lt;/a>,
&lt;a href="https://github.com/hadley" target="_blank" rel="noopener">@hadley&lt;/a>,
&lt;a href="https://github.com/hongcui" target="_blank" rel="noopener">@hongcui&lt;/a>,
&lt;a href="https://github.com/jamiefo" target="_blank" rel="noopener">@jamiefo&lt;/a>,
&lt;a href="https://github.com/jburos" target="_blank" rel="noopener">@jburos&lt;/a>,
&lt;a href="https://github.com/jimhester" target="_blank" rel="noopener">@jimhester&lt;/a>,
&lt;a href="https://github.com/johngoldin" target="_blank" rel="noopener">@johngoldin&lt;/a>,
&lt;a href="https://github.com/jonocarroll" target="_blank" rel="noopener">@jonocarroll&lt;/a>,
&lt;a href="https://github.com/jtr13" target="_blank" rel="noopener">@jtr13&lt;/a>,
&lt;a href="https://github.com/jwilliman" target="_blank" rel="noopener">@jwilliman&lt;/a>,
&lt;a href="https://github.com/jzadra" target="_blank" rel="noopener">@jzadra&lt;/a>,
&lt;a href="https://github.com/kbodwin" target="_blank" rel="noopener">@kbodwin&lt;/a>,
&lt;a href="https://github.com/kei51e" target="_blank" rel="noopener">@kei51e&lt;/a>,
&lt;a href="https://github.com/kyzphong" target="_blank" rel="noopener">@kyzphong&lt;/a>,
&lt;a href="https://github.com/labouz" target="_blank" rel="noopener">@labouz&lt;/a>,
&lt;a href="https://github.com/ledbettc" target="_blank" rel="noopener">@ledbettc&lt;/a>,
&lt;a href="https://github.com/lwjohnst86" target="_blank" rel="noopener">@lwjohnst86&lt;/a>,
&lt;a href="https://github.com/martinjhnhadley" target="_blank" rel="noopener">@martinjhnhadley&lt;/a>,
&lt;a href="https://github.com/melissakey" target="_blank" rel="noopener">@melissakey&lt;/a>,
&lt;a href="https://github.com/mitchelloharawild" target="_blank" rel="noopener">@mitchelloharawild&lt;/a>,
&lt;a href="https://github.com/monicagerber" target="_blank" rel="noopener">@monicagerber&lt;/a>,
&lt;a href="https://github.com/mstr3336" target="_blank" rel="noopener">@mstr3336&lt;/a>,
&lt;a href="https://github.com/riinuots" target="_blank" rel="noopener">@riinuots&lt;/a>,
&lt;a href="https://github.com/robinsones" target="_blank" rel="noopener">@robinsones&lt;/a>,
&lt;a href="https://github.com/sgschreiber" target="_blank" rel="noopener">@sgschreiber&lt;/a>,
&lt;a href="https://github.com/sinarueeger" target="_blank" rel="noopener">@sinarueeger&lt;/a>,
&lt;a href="https://github.com/sindribaldur" target="_blank" rel="noopener">@sindribaldur&lt;/a>,
&lt;a href="https://github.com/stelsemeyer" target="_blank" rel="noopener">@stelsemeyer&lt;/a>,
&lt;a href="https://github.com/VincentGuyader" target="_blank" rel="noopener">@VincentGuyader&lt;/a>,
&lt;a href="https://github.com/yimingli" target="_blank" rel="noopener">@yimingli&lt;/a>, and
&lt;a href="https://github.com/zkamvar" target="_blank" rel="noopener">@zkamvar&lt;/a>.&lt;/p></description></item><item><title>Tidy eval now supports glue strings</title><link>https://www.tidyverse.org/blog/2020/02/glue-strings-and-tidy-eval/</link><pubDate>Tue, 11 Feb 2020 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2020/02/glue-strings-and-tidy-eval/</guid><description>&lt;p>
&lt;a href="https://www.tidyverse.org/blog/2019/06/rlang-0-4-0/" target="_blank" rel="noopener">rlang 0.4.0&lt;/a> introduced the curly-curly &lt;code>{{&lt;/code> operator to simplify writing functions around tidyverse pipelines. The minor update 0.4.3 of rlang makes it possible to use &lt;code>{&lt;/code> and &lt;code>{{&lt;/code> to create result names in tidyverse verbs taking pairs of names and expressions.&lt;/p>
&lt;p>Install the latest version of rlang to make the new feature globally available throughout the tidyverse:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">install.packages&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;rlang&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;h2 id="tunnelling-data-variables-with-curly-curly">Tunnelling data-variables with curly-curly
&lt;a href="#tunnelling-data-variables-with-curly-curly">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>With the &lt;code>{{&lt;/code> operator you can &lt;strong>tunnel&lt;/strong> data-variables (i.e. columns from the data frames) through arg-variables (function arguments):&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">tidyverse&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">mean_by&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">by&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">var&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="n">data&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_by&lt;/span>&lt;span class="p">({{&lt;/span> &lt;span class="n">by&lt;/span> &lt;span class="p">}})&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">summarise&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">avg&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">mean&lt;/span>&lt;span class="p">({{&lt;/span> &lt;span class="n">var&lt;/span> &lt;span class="p">}},&lt;/span> &lt;span class="n">na.rm&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">TRUE&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>The tunnel makes it possible to supply variables from the data frame to your wrapper function:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">iris&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">mean_by&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Species&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Sepal.Width&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 3 x 2&lt;/span>
&lt;span class="c1">#&amp;gt; Species avg&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;fct&amp;gt; &amp;lt;dbl&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 setosa 3.43&lt;/span>
&lt;span class="c1">#&amp;gt; 2 versicolor 2.77&lt;/span>
&lt;span class="c1">#&amp;gt; 3 virginica 2.97&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Without a tunnel, the ambiguity between data-variables and arg-variables causes R to complain about objects not found:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">mean_by_no_tunnel&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">by&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">var&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="n">data&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_by&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">by&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">summarise&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">avg&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">mean&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">var&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">na.rm&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">TRUE&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="n">iris&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">mean_by_no_tunnel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Species&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Sepal.Width&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; Error: Must group by variables found in `.data`&lt;/span>
&lt;span class="c1">#&amp;gt; * Column `by` is not found&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>That&amp;rsquo;s because of the ambiguity between the function argument &lt;code>by&lt;/code> and the data-variable &lt;code>Species&lt;/code>. R has no way of knowing that you meant the variable from the data frame.&lt;/p>
&lt;h2 id="custom-result-names">Custom result names
&lt;a href="#custom-result-names">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>In the example above, the result name is hard-coded to &lt;code>avg&lt;/code>. This is an informative generic name, but returning a more specific name that reflects the context might make the function more helpful. For this reason, tidy eval functions taking dots (like &lt;code>dplyr::mutate()&lt;/code>, &lt;code>dplyr::group_by()&lt;/code>, or &lt;code>dplyr::summarise()&lt;/code>) now support glue strings as result names.&lt;/p>
&lt;p>Glue strings are implemented in the
&lt;a href="https://glue.tidyverse.org/" target="_blank" rel="noopener">glue package&lt;/a>. They are a flexible way of composing a string from components, interpolating R code within the string:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">glue&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; Attaching package: &amp;#39;glue&amp;#39;&lt;/span>
&lt;span class="c1">#&amp;gt; The following object is masked from &amp;#39;package:dplyr&amp;#39;:&lt;/span>
&lt;span class="c1">#&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; collapse&lt;/span>
&lt;span class="n">name&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="s">&amp;#34;Bianca&amp;#34;&lt;/span>
&lt;span class="nf">glue&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;The result of `1 + 2` is {1 + 2}, so says {name}.&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; The result of `1 + 2` is 3, so says Bianca.&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>You can now use glue strings in result names. Note that for technical reasons you need the Walrus operator &lt;code>:=&lt;/code> instead of the usual &lt;code>=&lt;/code>.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">suffix&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="s">&amp;#34;foo&amp;#34;&lt;/span>
&lt;span class="n">iris&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">summarise&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;prefix_{suffix}&amp;#34;&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">mean&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Sepal.Width&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1">#&amp;gt; prefix_foo&lt;/span>
&lt;span class="c1">#&amp;gt; 1 3.057333&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>In addition to normal glue interpolation with &lt;code>{&lt;/code>, you can also tunnel data-variables through function arguments with &lt;code>{{&lt;/code> inside the string:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">mean_by&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">by&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">var&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="n">data&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_by&lt;/span>&lt;span class="p">({{&lt;/span> &lt;span class="n">by&lt;/span> &lt;span class="p">}})&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">summarise&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;{{ var }}&amp;#34;&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">mean&lt;/span>&lt;span class="p">({{&lt;/span> &lt;span class="n">var&lt;/span> &lt;span class="p">}},&lt;/span> &lt;span class="n">na.rm&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">TRUE&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="n">iris&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">mean_by&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Species&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Sepal.Width&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 3 x 2&lt;/span>
&lt;span class="c1">#&amp;gt; Species Sepal.Width&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;fct&amp;gt; &amp;lt;dbl&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 setosa 3.43&lt;/span>
&lt;span class="c1">#&amp;gt; 2 versicolor 2.77&lt;/span>
&lt;span class="c1">#&amp;gt; 3 virginica 2.97&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>And you can combine both forms of interpolation in a same glue string:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">mean_by&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">by&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">var&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">prefix&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;avg&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="n">data&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_by&lt;/span>&lt;span class="p">({{&lt;/span> &lt;span class="n">by&lt;/span> &lt;span class="p">}})&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">summarise&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;{prefix}_{{ var }}&amp;#34;&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">mean&lt;/span>&lt;span class="p">({{&lt;/span> &lt;span class="n">var&lt;/span> &lt;span class="p">}},&lt;/span> &lt;span class="n">na.rm&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">TRUE&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="n">iris&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">mean_by&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Species&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Sepal.Width&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 3 x 2&lt;/span>
&lt;span class="c1">#&amp;gt; Species avg_Sepal.Width&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;fct&amp;gt; &amp;lt;dbl&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 setosa 3.43&lt;/span>
&lt;span class="c1">#&amp;gt; 2 versicolor 2.77&lt;/span>
&lt;span class="c1">#&amp;gt; 3 virginica 2.97&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>You can learn more about tunnelling variables in
&lt;a href="https://speakerdeck.com/lionelhenry/interactivity-and-programming-in-the-tidyverse" target="_blank" rel="noopener">this RStudio::conf 2020 talk&lt;/a>.&lt;/p>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Read about other bugfixes and features from the 0.4.3 release in the
&lt;a href="https://github.com/r-lib/rlang/blob/master/NEWS.md#rlang-043" target="_blank" rel="noopener">changelog&lt;/a>. Many thanks to all the contributors for this release!&lt;/p>
&lt;p>
&lt;a href="https://github.com/chendaniely" target="_blank" rel="noopener">@chendaniely&lt;/a>,
&lt;a href="https://github.com/clauswilke" target="_blank" rel="noopener">@clauswilke&lt;/a>,
&lt;a href="https://github.com/DavisVaughan" target="_blank" rel="noopener">@DavisVaughan&lt;/a>,
&lt;a href="https://github.com/enoshliang" target="_blank" rel="noopener">@enoshliang&lt;/a>,
&lt;a href="https://github.com/hadley" target="_blank" rel="noopener">@hadley&lt;/a>,
&lt;a href="https://github.com/ianmcook" target="_blank" rel="noopener">@ianmcook&lt;/a>,
&lt;a href="https://github.com/jennybc" target="_blank" rel="noopener">@jennybc&lt;/a>,
&lt;a href="https://github.com/krlmlr" target="_blank" rel="noopener">@krlmlr&lt;/a>,
&lt;a href="https://github.com/lionel-" target="_blank" rel="noopener">@lionel-&lt;/a>,
&lt;a href="https://github.com/moodymudskipper" target="_blank" rel="noopener">@moodymudskipper&lt;/a>,
&lt;a href="https://github.com/neelan29" target="_blank" rel="noopener">@neelan29&lt;/a>,
&lt;a href="https://github.com/nick-youngblut" target="_blank" rel="noopener">@nick-youngblut&lt;/a>,
&lt;a href="https://github.com/nteetor" target="_blank" rel="noopener">@nteetor&lt;/a>,
&lt;a href="https://github.com/romainfrancois" target="_blank" rel="noopener">@romainfrancois&lt;/a>,
&lt;a href="https://github.com/TylerGrantSmith" target="_blank" rel="noopener">@TylerGrantSmith&lt;/a>,
&lt;a href="https://github.com/vspinu" target="_blank" rel="noopener">@vspinu&lt;/a>, and
&lt;a href="https://github.com/yutannihilation" target="_blank" rel="noopener">@yutannihilation&lt;/a>&lt;/p></description></item><item><title>tidyverse 1.3.0</title><link>https://www.tidyverse.org/blog/2019/11/tidyverse-1-3-0/</link><pubDate>Fri, 22 Nov 2019 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2019/11/tidyverse-1-3-0/</guid><description>&lt;html>
&lt;style>
.footnote-ref {
vertical-align: baseline;
position: relative;
top: -0.4em;
font-size: smaller;
}
&lt;/style>
&lt;/html>
&lt;p>We&amp;rsquo;re thrilled to announce that
&lt;a href="https://tidyverse.tidyverse.org/" target="_blank" rel="noopener">tidyverse&lt;/a> 1.3.0 is now on CRAN.
The tidyverse is a set of packages that work in harmony because they share common data representations and API design.
The tidyverse package is a &amp;ldquo;meta&amp;rdquo; package designed to make it easy to install and load core packages from the tidyverse in a single command.
This is great for teaching and interactive use, but for package development purposes we recommend that authors import only the specific packages that
they use.
For a complete list of changes, please see the
&lt;a href="https://tidyverse.tidyverse.org/news/index.html#tidyverse-1-3-0" target="_blank" rel="noopener">release notes&lt;/a>.&lt;/p>
&lt;p>You can install the latest version of tidyverse with:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">install.packages&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;tidyverse&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>And, as always, attach the package by running:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">tidyverse&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;h2 id="citing-the-tidyverse">Citing the tidyverse
&lt;a href="#citing-the-tidyverse">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>The most significant update in this version is a new vignette,
&lt;a href="https://tidyverse.tidyverse.org/articles/paper.html" target="_blank" rel="noopener">&amp;ldquo;Welcome to the Tidyverse&amp;rdquo;&lt;/a>, which is a mirror of the recently-released paper of the same name in the
&lt;a href="https://joss.theoj.org/papers/10.21105/joss.01686" target="_blank" rel="noopener">Journal of Open Source Software&lt;/a>.
The (long) list of authors includes all members of the tidyverse organisation and its component packages, and is now the canonical way to cite tidyverse packages.&lt;/p>
&lt;h3 id="when-to-cite-the-tidyverse">When to cite the tidyverse
&lt;a href="#when-to-cite-the-tidyverse">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>If you&amp;rsquo;re in a position where you can easily cite every package that materially contributed to your analysis, you should totally do it.
But it is often hard because many packages don&amp;rsquo;t have accompanying papers, and many journals still haven&amp;rsquo;t got the memo that software is an important research artifact.
Alternatively, you may be publishing in a venue with very tight page constraints
and you simply don&amp;rsquo;t have the room to cite every package.
For a more comprehensive discussion of best practices regarding citing software, see
&lt;a href="https://www.force11.org/software-citation-principles" target="_blank" rel="noopener">Software Citation Principles&lt;/a> by Arfon Smith, Daniel Katz, Kyle Niemeyer, and The FORCE11 Software Citation Working Group.&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>&lt;/p>
&lt;p>We generally recommend citing the tidyverse paper instead of citing individual packages.
This is less work, making it more likely that people will do it, and helps concentrate the citations across the whole tidyverse into a single place, which makes it easier to show the academic merit of our work.
Of course, you&amp;rsquo;re still free to cite individual tidyverse packages if you feel like they have been particularly important for your analysis, but you shouldn&amp;rsquo;t feel obliged.&lt;/p>
&lt;h3 id="how-to-cite-the-tidyverse">How to cite the tidyverse
&lt;a href="#how-to-cite-the-tidyverse">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>The R
&lt;a href="https://stat.ethz.ch/R-manual/R-devel/library/utils/html/citation.html" target="_blank" rel="noopener">&lt;code>citation()&lt;/code>&lt;/a> function makes it easy to cite R and R packages in publications.
The latest version of the tidyverse package has the citation built in:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">citation&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;tidyverse&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; Wickham et al., (2019). Welcome to the tidyverse. Journal of Open&lt;/span>
&lt;span class="c1">#&amp;gt; Source Software, 4(43), 1686, https://doi.org/10.21105/joss.01686&lt;/span>
&lt;span class="c1">#&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; A BibTeX entry for LaTeX users is&lt;/span>
&lt;span class="c1">#&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; @Article{,&lt;/span>
&lt;span class="c1">#&amp;gt; title = {Welcome to the {tidyverse}},&lt;/span>
&lt;span class="c1">#&amp;gt; author = {Hadley Wickham and Mara Averick and Jennifer Bryan and Winston Chang and Lucy D&amp;#39;Agostino McGowan and Romain François and Garrett Grolemund and Alex Hayes and Lionel Henry and Jim Hester and Max Kuhn and Thomas Lin Pedersen and Evan Miller and Stephan Milton Bache and Kirill Müller and Jeroen Ooms and David Robinson and Dana Paige Seidel and Vitalie Spinu and Kohske Takahashi and Davis Vaughan and Claus Wilke and Kara Woo and Hiroaki Yutani},&lt;/span>
&lt;span class="c1">#&amp;gt; year = {2019},&lt;/span>
&lt;span class="c1">#&amp;gt; journal = {Journal of Open Source Software},&lt;/span>
&lt;span class="c1">#&amp;gt; volume = {4},&lt;/span>
&lt;span class="c1">#&amp;gt; number = {43},&lt;/span>
&lt;span class="c1">#&amp;gt; pages = {1686},&lt;/span>
&lt;span class="c1">#&amp;gt; doi = {10.21105/joss.01686},&lt;/span>
&lt;span class="c1">#&amp;gt; }&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Since the tidyverse wouldn&amp;rsquo;t be possible without R, we strongly recommend that you also cite R:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">citation&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1">#&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; To cite R in publications use:&lt;/span>
&lt;span class="c1">#&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; R Core Team (2019). R: A language and environment for statistical&lt;/span>
&lt;span class="c1">#&amp;gt; computing. R Foundation for Statistical Computing, Vienna, Austria.&lt;/span>
&lt;span class="c1">#&amp;gt; URL https://www.R-project.org/.&lt;/span>
&lt;span class="c1">#&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; A BibTeX entry for LaTeX users is&lt;/span>
&lt;span class="c1">#&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; @Manual{,&lt;/span>
&lt;span class="c1">#&amp;gt; title = {R: A Language and Environment for Statistical Computing},&lt;/span>
&lt;span class="c1">#&amp;gt; author = {{R Core Team}},&lt;/span>
&lt;span class="c1">#&amp;gt; organization = {R Foundation for Statistical Computing},&lt;/span>
&lt;span class="c1">#&amp;gt; address = {Vienna, Austria},&lt;/span>
&lt;span class="c1">#&amp;gt; year = {2019},&lt;/span>
&lt;span class="c1">#&amp;gt; url = {https://www.R-project.org/},&lt;/span>
&lt;span class="c1">#&amp;gt; }&lt;/span>
&lt;span class="c1">#&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; We have invested a lot of time and effort in creating R, please cite it&lt;/span>
&lt;span class="c1">#&amp;gt; when using it for data analysis. See also &amp;#39;citation(&amp;#34;pkgname&amp;#34;)&amp;#39; for&lt;/span>
&lt;span class="c1">#&amp;gt; citing R packages.&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;h2 id="acknowledgments">Acknowledgments
&lt;a href="#acknowledgments">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>A huge thank you to the paper&amp;rsquo;s reviewers,
&lt;a href="https://github.com/ldecicco-USGS" target="_blank" rel="noopener">Laura DeCicco&lt;/a> and
&lt;a href="https://github.com/jeffreyhanson" target="_blank" rel="noopener">Jeff Hanson&lt;/a>, and journal editor,
&lt;a href="https://github.com/karthik" target="_blank" rel="noopener">Karthik Ram&lt;/a>, who improved the quality of the paper immensely.&lt;/p>
&lt;p>We&amp;rsquo;re also grateful to the 89 people who contributed to this release:
&lt;a href="https://github.com/andrewheiss" target="_blank" rel="noopener">@andrewheiss&lt;/a>,
&lt;a href="https://github.com/arcole" target="_blank" rel="noopener">@arcole&lt;/a>,
&lt;a href="https://github.com/arfon" target="_blank" rel="noopener">@arfon&lt;/a>,
&lt;a href="https://github.com/Armos05" target="_blank" rel="noopener">@Armos05&lt;/a>,
&lt;a href="https://github.com/arne1921KF" target="_blank" rel="noopener">@arne1921KF&lt;/a>,
&lt;a href="https://github.com/batpigandme" target="_blank" rel="noopener">@batpigandme&lt;/a>,
&lt;a href="https://github.com/BenoitLondon" target="_blank" rel="noopener">@BenoitLondon&lt;/a>,
&lt;a href="https://github.com/bschneidr" target="_blank" rel="noopener">@bschneidr&lt;/a>,
&lt;a href="https://github.com/cawoodjm" target="_blank" rel="noopener">@cawoodjm&lt;/a>,
&lt;a href="https://github.com/christa88" target="_blank" rel="noopener">@christa88&lt;/a>,
&lt;a href="https://github.com/coatless" target="_blank" rel="noopener">@coatless&lt;/a>,
&lt;a href="https://github.com/cryptic0" target="_blank" rel="noopener">@cryptic0&lt;/a>,
&lt;a href="https://github.com/cwickham" target="_blank" rel="noopener">@cwickham&lt;/a>,
&lt;a href="https://github.com/d8aninja" target="_blank" rel="noopener">@d8aninja&lt;/a>,
&lt;a href="https://github.com/daltonhance" target="_blank" rel="noopener">@daltonhance&lt;/a>,
&lt;a href="https://github.com/dan-reznik" target="_blank" rel="noopener">@dan-reznik&lt;/a>,
&lt;a href="https://github.com/danhalligan" target="_blank" rel="noopener">@danhalligan&lt;/a>,
&lt;a href="https://github.com/DataXujing" target="_blank" rel="noopener">@DataXujing&lt;/a>,
&lt;a href="https://github.com/DavoOZ" target="_blank" rel="noopener">@DavoOZ&lt;/a>,
&lt;a href="https://github.com/dchiu911" target="_blank" rel="noopener">@dchiu911&lt;/a>,
&lt;a href="https://github.com/dhslone" target="_blank" rel="noopener">@dhslone&lt;/a>,
&lt;a href="https://github.com/Fredo-XVII" target="_blank" rel="noopener">@Fredo-XVII&lt;/a>,
&lt;a href="https://github.com/gaborcsardi" target="_blank" rel="noopener">@gaborcsardi&lt;/a>,
&lt;a href="https://github.com/genewch" target="_blank" rel="noopener">@genewch&lt;/a>,
&lt;a href="https://github.com/grayskripko" target="_blank" rel="noopener">@grayskripko&lt;/a>,
&lt;a href="https://github.com/gvwilson" target="_blank" rel="noopener">@gvwilson&lt;/a>,
&lt;a href="https://github.com/gwd999" target="_blank" rel="noopener">@gwd999&lt;/a>,
&lt;a href="https://github.com/hadley" target="_blank" rel="noopener">@hadley&lt;/a>,
&lt;a href="https://github.com/hammer" target="_blank" rel="noopener">@hammer&lt;/a>,
&lt;a href="https://github.com/harrismcgehee" target="_blank" rel="noopener">@harrismcgehee&lt;/a>,
&lt;a href="https://github.com/ijlyttle" target="_blank" rel="noopener">@ijlyttle&lt;/a>,
&lt;a href="https://github.com/jennybc" target="_blank" rel="noopener">@jennybc&lt;/a>,
&lt;a href="https://github.com/jeroen" target="_blank" rel="noopener">@jeroen&lt;/a>,
&lt;a href="https://github.com/jflynn264" target="_blank" rel="noopener">@jflynn264&lt;/a>,
&lt;a href="https://github.com/jimhester" target="_blank" rel="noopener">@jimhester&lt;/a>,
&lt;a href="https://github.com/jnolis" target="_blank" rel="noopener">@jnolis&lt;/a>,
&lt;a href="https://github.com/JoeFernando" target="_blank" rel="noopener">@JoeFernando&lt;/a>,
&lt;a href="https://github.com/JoFAM" target="_blank" rel="noopener">@JoFAM&lt;/a>,
&lt;a href="https://github.com/jonocarroll" target="_blank" rel="noopener">@jonocarroll&lt;/a>,
&lt;a href="https://github.com/josegonzalez" target="_blank" rel="noopener">@josegonzalez&lt;/a>,
&lt;a href="https://github.com/jrosen48" target="_blank" rel="noopener">@jrosen48&lt;/a>,
&lt;a href="https://github.com/jtelleria" target="_blank" rel="noopener">@jtelleria&lt;/a>,
&lt;a href="https://github.com/jzadra" target="_blank" rel="noopener">@jzadra&lt;/a>,
&lt;a href="https://github.com/karawoo" target="_blank" rel="noopener">@karawoo&lt;/a>,
&lt;a href="https://github.com/karthik" target="_blank" rel="noopener">@karthik&lt;/a>,
&lt;a href="https://github.com/kent37" target="_blank" rel="noopener">@kent37&lt;/a>,
&lt;a href="https://github.com/kevinushey" target="_blank" rel="noopener">@kevinushey&lt;/a>,
&lt;a href="https://github.com/kevinykuo" target="_blank" rel="noopener">@kevinykuo&lt;/a>,
&lt;a href="https://github.com/krlmlr" target="_blank" rel="noopener">@krlmlr&lt;/a>,
&lt;a href="https://github.com/ljmills" target="_blank" rel="noopener">@ljmills&lt;/a>,
&lt;a href="https://github.com/malcolmbarrett" target="_blank" rel="noopener">@malcolmbarrett&lt;/a>,
&lt;a href="https://github.com/maptracker" target="_blank" rel="noopener">@maptracker&lt;/a>,
&lt;a href="https://github.com/martinamorris" target="_blank" rel="noopener">@martinamorris&lt;/a>,
&lt;a href="https://github.com/martinjhnhadley" target="_blank" rel="noopener">@martinjhnhadley&lt;/a>,
&lt;a href="https://github.com/MartinMSPedersen" target="_blank" rel="noopener">@MartinMSPedersen&lt;/a>,
&lt;a href="https://github.com/mattsgithub" target="_blank" rel="noopener">@mattsgithub&lt;/a>,
&lt;a href="https://github.com/maurolepore" target="_blank" rel="noopener">@maurolepore&lt;/a>,
&lt;a href="https://github.com/mfherman" target="_blank" rel="noopener">@mfherman&lt;/a>,
&lt;a href="https://github.com/mgsosna" target="_blank" rel="noopener">@mgsosna&lt;/a>,
&lt;a href="https://github.com/mikeyEcology" target="_blank" rel="noopener">@mikeyEcology&lt;/a>,
&lt;a href="https://github.com/mloop" target="_blank" rel="noopener">@mloop&lt;/a>,
&lt;a href="https://github.com/moodymudskipper" target="_blank" rel="noopener">@moodymudskipper&lt;/a>,
&lt;a href="https://github.com/msberends" target="_blank" rel="noopener">@msberends&lt;/a>,
&lt;a href="https://github.com/njtierney" target="_blank" rel="noopener">@njtierney&lt;/a>,
&lt;a href="https://github.com/osmelmillan" target="_blank" rel="noopener">@osmelmillan&lt;/a>,
&lt;a href="https://github.com/pgensler" target="_blank" rel="noopener">@pgensler&lt;/a>,
&lt;a href="https://github.com/PoGibas" target="_blank" rel="noopener">@PoGibas&lt;/a>,
&lt;a href="https://github.com/psychelzh" target="_blank" rel="noopener">@psychelzh&lt;/a>,
&lt;a href="https://github.com/rkalescky" target="_blank" rel="noopener">@rkalescky&lt;/a>,
&lt;a href="https://github.com/rmcd1024" target="_blank" rel="noopener">@rmcd1024&lt;/a>,
&lt;a href="https://github.com/romainfrancois" target="_blank" rel="noopener">@romainfrancois&lt;/a>,
&lt;a href="https://github.com/rsheppar" target="_blank" rel="noopener">@rsheppar&lt;/a>,
&lt;a href="https://github.com/sampath2510" target="_blank" rel="noopener">@sampath2510&lt;/a>,
&lt;a href="https://github.com/Selvamjn" target="_blank" rel="noopener">@Selvamjn&lt;/a>,
&lt;a href="https://github.com/SinfantiHU" target="_blank" rel="noopener">@SinfantiHU&lt;/a>,
&lt;a href="https://github.com/steenharsted" target="_blank" rel="noopener">@steenharsted&lt;/a>,
&lt;a href="https://github.com/stefvanbuuren" target="_blank" rel="noopener">@stefvanbuuren&lt;/a>,
&lt;a href="https://github.com/steveharoz" target="_blank" rel="noopener">@steveharoz&lt;/a>,
&lt;a href="https://github.com/sulgik" target="_blank" rel="noopener">@sulgik&lt;/a>,
&lt;a href="https://github.com/talban14" target="_blank" rel="noopener">@talban14&lt;/a>,
&lt;a href="https://github.com/thanosgatos" target="_blank" rel="noopener">@thanosgatos&lt;/a>,
&lt;a href="https://github.com/tmalsburg" target="_blank" rel="noopener">@tmalsburg&lt;/a>,
&lt;a href="https://github.com/toouggy" target="_blank" rel="noopener">@toouggy&lt;/a>,
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>,
&lt;a href="https://github.com/tsufz" target="_blank" rel="noopener">@tsufz&lt;/a>,
&lt;a href="https://github.com/willbowditch" target="_blank" rel="noopener">@willbowditch&lt;/a>,
&lt;a href="https://github.com/XiangyunHuang" target="_blank" rel="noopener">@XiangyunHuang&lt;/a>,
&lt;a href="https://github.com/yatharth" target="_blank" rel="noopener">@yatharth&lt;/a>, and
&lt;a href="https://github.com/yutannihilation" target="_blank" rel="noopener">@yutannihilation&lt;/a>.&lt;/p>
&lt;section class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1" role="doc-endnote">
&lt;p>Smith AM, Katz DS, Niemeyer KE, FORCE11 Software Citation Working Group. (2016) Software Citation Principles. &lt;em>PeerJ Computer Science&lt;/em> 2:e86. doi:
&lt;a href="https://doi.org/10.7717/peerj-cs.86" target="_blank" rel="noopener">10.7717/peerj-cs.86&lt;/a>. &lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/section></description></item><item><title>dtplyr 1.0.0</title><link>https://www.tidyverse.org/blog/2019/11/dtplyr-1-0-0/</link><pubDate>Tue, 12 Nov 2019 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2019/11/dtplyr-1-0-0/</guid><description>&lt;p>I&amp;rsquo;m very excited to announce that
&lt;a href="https://dtplyr.tidyverse.org" target="_blank" rel="noopener">dtplyr&lt;/a> 1.0.0 is now on CRAN. dtplyr provides a
&lt;a href="http://r-datatable.com/" target="_blank" rel="noopener">data.table&lt;/a> backend for dplyr, allowing you to write dplyr code that is automatically translated to the equivalent data.table code.&lt;/p>
&lt;p>dtplyr 1.0.0 gives you the speed of data.table with the syntax of dplyr, unlocking the value of data.table to every user of dplyr. Of course, if you know data.table, you can still write it directly, just as we expect SQL experts to continue to write SQL rather than having
&lt;a href="http://dbplyr.tidyverse.org/" target="_blank" rel="noopener">dbplyr&lt;/a> generate it for them. Understanding these foundational tools is particularly important if you want to eke out every last drop of performance.&lt;/p>
&lt;p>This version of dtplyr is a complete rewrite which allows it to generate significantly more performant translations. dtplyr now works like
&lt;a href="https://dbplyr.tidyverse.org" target="_blank" rel="noopener">dbplyr&lt;/a>, where computation only happens when requested by &lt;code>as.data.table()&lt;/code>, &lt;code>as.data.frame()&lt;/code> or &lt;code>as_tibble()&lt;/code> (this idea can also be seen in the
&lt;a href="https://github.com/asardaes/table.express" target="_blank" rel="noopener">table.express&lt;/a> and
&lt;a href="https://github.com/WinVector/rqdatatable/" target="_blank" rel="noopener">rqdatatable&lt;/a> packages). Unfortunately, this rewrite breaks pretty much all existing uses of dtplyr. But frankly, the prior version of dtplyr was not very good and few people used it, so a major overhaul should break little code in the wild.&lt;/p>
&lt;p>In this article, I&amp;rsquo;ll introduce you to the basic usage of dtplyr, talk about some of the performance implications, and show off some of the translations that I&amp;rsquo;m most proud of.&lt;/p>
&lt;h2 id="usage">Usage
&lt;a href="#usage">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>To use dtplyr, you must at least load dtplyr and dplyr. You might also want to load
&lt;a href="http://r-datatable.com/" target="_blank" rel="noopener">data.table&lt;/a> so you can access the other goodies that it provides:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data.table&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dtplyr&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dplyr&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">warn.conflicts&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">FALSE&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Then use &lt;code>lazy_dt()&lt;/code> to create a &amp;ldquo;lazy&amp;rdquo; data table that tracks the operations performed on it:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">mtcars2&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">lazy_dt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mtcars&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>You can use dplyr verbs with this object as if it was a data frame. But there&amp;rsquo;s a big difference behind the scenes: instead of immediately performing the operation, dtplyr just records what you&amp;rsquo;re doing so when needed it can generate a single, efficient, data.table statement. You can preview the transformation (including the generated data.table code) by printing the result:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">mtcars2&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">filter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">wt&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="m">5&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">mutate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">l100k&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">235.21&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="n">mpg&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="c1"># liters / 100 km&lt;/span>
&lt;span class="nf">group_by&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cyl&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">summarise&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">l100k&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">mean&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">l100k&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1">#&amp;gt; Source: local data table [?? x 2]&lt;/span>
&lt;span class="c1">#&amp;gt; Call: `_DT1`[wt &amp;lt; 5][, `:=`(l100k = 235.21/mpg)][, .(l100k = mean(l100k)), &lt;/span>
&lt;span class="c1">#&amp;gt; keyby = .(cyl)]&lt;/span>
&lt;span class="c1">#&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; cyl l100k&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 4 9.05&lt;/span>
&lt;span class="c1">#&amp;gt; 2 6 12.0 &lt;/span>
&lt;span class="c1">#&amp;gt; 3 8 14.9 &lt;/span>
&lt;span class="c1">#&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; # Use as.data.table()/as.data.frame()/as_tibble() to access results&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Generally, however, you should reserve this preview for exploration and debugging, and instead use &lt;code>as.data.table()&lt;/code>, &lt;code>as.data.frame()&lt;/code>, or &lt;code>as_tibble()&lt;/code> to indicate that you&amp;rsquo;re done writing the transformation and want to access the results:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">mtcars2&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">filter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">wt&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="m">5&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">mutate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">l100k&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">235.21&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="n">mpg&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="c1"># liters / 100 km&lt;/span>
&lt;span class="nf">group_by&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cyl&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">summarise&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">l100k&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">mean&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">l100k&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">as_tibble&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 3 x 2&lt;/span>
&lt;span class="c1">#&amp;gt; cyl l100k&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 4 9.05&lt;/span>
&lt;span class="c1">#&amp;gt; 2 6 12.0 &lt;/span>
&lt;span class="c1">#&amp;gt; 3 8 14.9&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;h2 id="performance">Performance
&lt;a href="#performance">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>How fast is dtplyr? data.table is generally faster than dplyr, but dtplyr has to do some work to perform the translation, so it&amp;rsquo;s reasonable to ask if it&amp;rsquo;s worth it. Do the benefits of using data.table outweigh the cost of the automated translation? My experimentation suggests that it is: the cost of translation is low, and independent of the size of the data. In this section, I&amp;rsquo;ll explore the performance trade-off through three lenses: translation cost, copies, and interface mismatch.&lt;/p>
&lt;h3 id="translation-cost">Translation cost
&lt;a href="#translation-cost">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>Each dplyr verb must do some work to convert dplyr syntax to data.table syntax. We can use the
&lt;a href="http://bench.r-lib.org/" target="_blank" rel="noopener">bench&lt;/a> package to time the cost of the four-step pipeline that I used above:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">bench&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="nf">mark&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="n">translate&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">mtcars2&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">filter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">wt&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="m">5&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">mutate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">l100k&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">235.21&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="n">mpg&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="c1"># liters / 100 km&lt;/span>
&lt;span class="nf">group_by&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cyl&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">summarise&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">l100k&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">mean&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">l100k&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 1 x 6&lt;/span>
&lt;span class="c1">#&amp;gt; expression min median `itr/sec` mem_alloc `gc/sec`&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;bch:expr&amp;gt; &amp;lt;bch:tm&amp;gt; &amp;lt;bch:tm&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;bch:byt&amp;gt; &amp;lt;dbl&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 translate 787µs 969µs 1028. 280B 26.4&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Because this pipeline does not use &lt;code>as.data.table()&lt;/code> or &lt;code>print()&lt;/code> it only generates the data.table code, it doesn&amp;rsquo;t run it, so we&amp;rsquo;re timing the translation cost. The translation cost scales with the complexity of the pipeline, not the size of the data, so these timings will apply regardless of the size of the underlying data.&lt;/p>
&lt;p>My intial experiments suggest that the translation cost is typically a few milliseconds. Since the computational cost increases with the size of the data, the translation cost becomes a smaller proportion of the total as the data size grows, suggesting the dtplyr does not impose a significant overhead on top of data.table.&lt;/p>
&lt;p>Take the following example, which uses the large nycflights13 dataset. This isn&amp;rsquo;t really big enough for data.table to really shine, but it&amp;rsquo;s about as big as you can get in an R package. Here I&amp;rsquo;m going to compute the average arrival delay by destination. It takes raw dplyr about 40ms to do the work. Again, the dtplyr translation is fast, around 1ms, and then computation using data.table only takes about 20ms, almost twice as fast as dplyr.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nycflights13&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">flights_dt&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">lazy_dt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">flights&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">delay_by_dest&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="n">df&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">filter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="nf">is.na&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">arr_delay&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_by&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dest&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">summarise&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">n&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="n">delay&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">mean&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">arr_delay&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="n">bench&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="nf">mark&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="n">flights&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">delay_by_dest&lt;/span>&lt;span class="p">(),&lt;/span>
&lt;span class="n">flights_dt&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">delay_by_dest&lt;/span>&lt;span class="p">(),&lt;/span>
&lt;span class="n">flights_dt&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">delay_by_dest&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">as_tibble&lt;/span>&lt;span class="p">(),&lt;/span>
&lt;span class="n">check&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">FALSE&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 3 x 6&lt;/span>
&lt;span class="c1">#&amp;gt; expression min median `itr/sec`&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;bch:expr&amp;gt; &amp;lt;bch:t&amp;gt; &amp;lt;bch:t&amp;gt; &amp;lt;dbl&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 flights %&amp;gt;% delay_by_dest() 35.7ms 36ms 27.8&lt;/span>
&lt;span class="c1">#&amp;gt; 2 flights_dt %&amp;gt;% delay_by_dest() 671.9µs 824.6µs 1230. &lt;/span>
&lt;span class="c1">#&amp;gt; 3 flights_dt %&amp;gt;% delay_by_dest() %&amp;gt;% as_tibble() 18.7ms 20.2ms 48.0&lt;/span>
&lt;span class="c1">#&amp;gt; # … with 2 more variables: mem_alloc &amp;lt;bch:byt&amp;gt;, `gc/sec` &amp;lt;dbl&amp;gt;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;h3 id="copies">Copies
&lt;a href="#copies">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>There is one place where dtplyr does have to add overhead: when translations would generate data.table code that modifies the input in place, like &lt;code>mutate()&lt;/code>. dtplyr matches dplyr semantics (which never modifies in place), so most expressions involving &lt;code>mutate()&lt;/code> must make a copy:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">mtcars2&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">mutate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">x&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="m">2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">show_query&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1">#&amp;gt; copy(`_DT1`)[, `:=`(x = x * 2)]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>However, dtplyr never generates more than one copy (no matter how many mutates you use), and it also recognises many situations where data.table creates an implicit copy:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">mtcars2&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">mutate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">x&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="m">2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">mutate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">z&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="m">2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">show_query&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1">#&amp;gt; copy(`_DT1`)[, `:=`(y = x * 2)][, `:=`(z = y * 2)]&lt;/span>
&lt;span class="n">mtcars2&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">filter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">mutate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">x&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="m">2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">show_query&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1">#&amp;gt; `_DT1`[x == 1][, `:=`(x = x * 2)]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>However, if you have very datasets, creating a deep copy can be expensive. dtplyr allows you to opt out by setting &lt;code>immutable = FALSE&lt;/code>. This ensures that dtplyr never makes a copy:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">mtcars3&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">lazy_dt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">as.data.table&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mtcars&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">immutable&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">FALSE&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">mtcars3&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">mutate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">x&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="m">2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">show_query&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1">#&amp;gt; `_DT3`[, `:=`(x2 = x * 2)]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;h3 id="interface-mismatch">Interface mismatch
&lt;a href="#interface-mismatch">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>The hardest overhead to measure is the cost of interface mismatch, i.e. where data.table has features that dplyr doesn&amp;rsquo;t. For example, there&amp;rsquo;s no way to express cross- or rolling-joins with dplyr, so there&amp;rsquo;s no way to generate efficient data.table code for these cases. It&amp;rsquo;s hard to estimate this cost, but it&amp;rsquo;s something that we think about when considering what features to add to dplyr next.&lt;/p>
&lt;h2 id="translation">Translation
&lt;a href="#translation">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>If you&amp;rsquo;re familiar with data.table, you might be interested to learn more about how the translation works. Here I&amp;rsquo;ll show a few things I think are particularly interesting, using &lt;code>show_query()&lt;/code>.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">df&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">data.frame&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="m">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">b&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="m">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">c&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="m">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="m">5&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">dt&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">lazy_dt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Most uses of the basic dplyr verbs generate calls to &lt;code>[.data.table&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">dt&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">select&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">show_query&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1">#&amp;gt; `_DT4`[, .(a, b)]&lt;/span>
&lt;span class="n">dt&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">summarise&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">mean&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">show_query&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1">#&amp;gt; `_DT4`[, .(x = mean(x))]&lt;/span>
&lt;span class="n">dt&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">mutate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">show_query&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1">#&amp;gt; copy(`_DT4`)[, `:=`(x = a + b)]&lt;/span>
&lt;span class="n">dt&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">filter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">show_query&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1">#&amp;gt; `_DT4`[a == 1]&lt;/span>
&lt;span class="n">dt&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">arrange&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">desc&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">show_query&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1">#&amp;gt; `_DT4`[order(a, desc(b))]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>As do simple left and right joins:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">dt2&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">lazy_dt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">data.frame&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">z&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="n">dt&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">left_join&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dt2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">by&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;a&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">show_query&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1">#&amp;gt; `_DT5`[`_DT4`, on = .(a), allow.cartesian = TRUE]&lt;/span>
&lt;span class="n">dt&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">right_join&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dt2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">by&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;a&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">show_query&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1">#&amp;gt; `_DT4`[`_DT5`, on = .(a), allow.cartesian = TRUE]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Where possible, dtplyr will collapse multiple calls to &lt;code>[&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">dt&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">filter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">select&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">show_query&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1">#&amp;gt; `_DT4`[a == 1, .(b, c, d)]&lt;/span>
&lt;span class="n">dt&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">left_join&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dt2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">by&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;a&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">select&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">z&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">show_query&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1">#&amp;gt; `_DT5`[`_DT4`, .(a, b, z), on = .(a), allow.cartesian = TRUE]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>But note that the order is important, as a &lt;code>select()&lt;/code> followed by a &lt;code>filter()&lt;/code> has to generate two statements:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">dt&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">select&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">filter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">show_query&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1">#&amp;gt; `_DT4`[, .(a = b)][a == 1]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>When you mix basic dplyr verbs with &lt;code>group_by()&lt;/code>, dtplyr adds the &lt;code>keyby&lt;/code> argument:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">dt&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_by&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">summarise&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">b&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">mean&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">show_query&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1">#&amp;gt; `_DT4`[, .(b = mean(b)), keyby = .(a)]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>And when filtering, this automatically uses &lt;code>.SD&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">dt&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_by&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">filter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">b&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="nf">mean&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">show_query&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1">#&amp;gt; `_DT4`[, .SD[b &amp;lt; mean(b)], keyby = .(a)]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>You can learn more in
&lt;a href="https://dtplyr.tidyverse.org/articles/translation.html" target="_blank" rel="noopener">&lt;code>vignette(&amp;quot;translation&amp;quot;)&lt;/code>&lt;/a>.&lt;/p>
&lt;p>There are a couple of limitations that I hope to address in the next version of dtplyr. Currently, you can&amp;rsquo;t translate
&lt;a href="https://github.com/tidyverse/dtplyr/issues/109" target="_blank" rel="noopener">the &lt;code>_if&lt;/code> variants&lt;/a>, and there is weak support for the
&lt;a href="https://github.com/tidyverse/dtplyr/issues/108" target="_blank" rel="noopener">&lt;code>group_&lt;/code> functions&lt;/a>. If you discover other functions that don&amp;rsquo;t work as you expect,
&lt;a href="https://github.com/tidyverse/dtplyr/issues/new/choose" target="_blank" rel="noopener">please file an issue!&lt;/a>.&lt;/p>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Big thanks to the data.table community, particularly
&lt;a href="https://github.com/MichaelChirico" target="_blank" rel="noopener">Michael Chirico&lt;/a>, for their help educating me on the best way to translate dplyr code into performant, idiomatic, data.table code.&lt;/p>
&lt;p>I&amp;rsquo;d also like to thank everyone to helped make this release happen through their contributions on GitHub:
&lt;a href="https://github.com/AlanFeder" target="_blank" rel="noopener">@AlanFeder&lt;/a>,
&lt;a href="https://github.com/batpigandme" target="_blank" rel="noopener">@batpigandme&lt;/a>,
&lt;a href="https://github.com/benjaminleroy" target="_blank" rel="noopener">@benjaminleroy&lt;/a>,
&lt;a href="https://github.com/clayphan" target="_blank" rel="noopener">@clayphan&lt;/a>,
&lt;a href="https://github.com/ColinFay" target="_blank" rel="noopener">@ColinFay&lt;/a>,
&lt;a href="https://github.com/daranzolin" target="_blank" rel="noopener">@daranzolin&lt;/a>,
&lt;a href="https://github.com/edgararuiz" target="_blank" rel="noopener">@edgararuiz&lt;/a>,
&lt;a href="https://github.com/franknarf1" target="_blank" rel="noopener">@franknarf1&lt;/a>,
&lt;a href="https://github.com/hadley" target="_blank" rel="noopener">@hadley&lt;/a>,
&lt;a href="https://github.com/hlynurhallgrims" target="_blank" rel="noopener">@hlynurhallgrims&lt;/a>,
&lt;a href="https://github.com/hope-data-science" target="_blank" rel="noopener">@hope-data-science&lt;/a>,
&lt;a href="https://github.com/ianmcook" target="_blank" rel="noopener">@ianmcook&lt;/a>,
&lt;a href="https://github.com/jl5000" target="_blank" rel="noopener">@jl5000&lt;/a>,
&lt;a href="https://github.com/jonthegeek" target="_blank" rel="noopener">@jonthegeek&lt;/a>,
&lt;a href="https://github.com/JoshuaSturm" target="_blank" rel="noopener">@JoshuaSturm&lt;/a>,
&lt;a href="https://github.com/lenay12" target="_blank" rel="noopener">@lenay12&lt;/a>,
&lt;a href="https://github.com/MichaelChirico" target="_blank" rel="noopener">@MichaelChirico&lt;/a>,
&lt;a href="https://github.com/nlbjan1" target="_blank" rel="noopener">@nlbjan1&lt;/a>,
&lt;a href="https://github.com/quantitative-technologies" target="_blank" rel="noopener">@quantitative-technologies&lt;/a>,
&lt;a href="https://github.com/richpauloo" target="_blank" rel="noopener">@richpauloo&lt;/a>,
&lt;a href="https://github.com/S-UP" target="_blank" rel="noopener">@S-UP&lt;/a>,
&lt;a href="https://github.com/tmastny" target="_blank" rel="noopener">@tmastny&lt;/a>,
&lt;a href="https://github.com/TobiRoby" target="_blank" rel="noopener">@TobiRoby&lt;/a>,
&lt;a href="https://github.com/tomazweiss" target="_blank" rel="noopener">@tomazweiss&lt;/a>,
&lt;a href="https://github.com/torema-ed" target="_blank" rel="noopener">@torema-ed&lt;/a>,
&lt;a href="https://github.com/Vidaringa" target="_blank" rel="noopener">@Vidaringa&lt;/a>,
&lt;a href="https://github.com/vlahm" target="_blank" rel="noopener">@vlahm&lt;/a>,
&lt;a href="https://github.com/vspinu" target="_blank" rel="noopener">@vspinu&lt;/a>,
&lt;a href="https://github.com/xiaodaigh" target="_blank" rel="noopener">@xiaodaigh&lt;/a>, and
&lt;a href="https://github.com/yiqinfu" target="_blank" rel="noopener">@yiqinfu&lt;/a>.&lt;/p></description></item><item><title>haven 2.2.0</title><link>https://www.tidyverse.org/blog/2019/11/haven-2-2-0/</link><pubDate>Fri, 08 Nov 2019 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2019/11/haven-2-2-0/</guid><description>&lt;p>We&amp;rsquo;re delighted to announce that
&lt;a href="https://haven.tidyverse.org/" target="_blank" rel="noopener">haven 2.2.0&lt;/a> is now on CRAN. haven enables R to read and write various data formats used by other statistical packages by wrapping the
&lt;a href="https://github.com/WizardMac/ReadStat" target="_blank" rel="noopener">ReadStat&lt;/a> C library written by
&lt;a href="https://www.evanmiller.org/" target="_blank" rel="noopener">Evan Miller&lt;/a>.&lt;/p>
&lt;p>You can install haven from CRAN with:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">install.packages&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;haven&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>This release features big improvements thanks to the hard work of
&lt;a href="https://github.com/mikmart" target="_blank" rel="noopener">Mikko Marttila&lt;/a>: all &lt;code>read_*()&lt;/code> functions gain three new arguments that allow you to read in only part of a large file. I&amp;rsquo;ll quickly show of these features by saving out the
&lt;a href="https://ggplot2.tidyverse.org/reference/diamonds.html" target="_blank" rel="noopener">&lt;code>diamonds&lt;/code>&lt;/a> dataset to a Stata file:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">haven&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">write_dta&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ggplot2&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">diamonds&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;diamonds.dta&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>n_max&lt;/code> and &lt;code>skip&lt;/code> allow you to read in just a portion of the rows:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">read_dta&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;diamonds.dta&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">n_max&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">5&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 5 x 10&lt;/span>
&lt;span class="c1">#&amp;gt; carat cut color clarity depth table price x y z&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl+lbl&amp;gt; &amp;lt;dbl+lbl&amp;gt; &amp;lt;dbl+lbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 0.23 5 [Ideal] 2 [E] 2 [SI2] 61.5 55 326 3.95 3.98 2.43&lt;/span>
&lt;span class="c1">#&amp;gt; 2 0.21 4 [Premium] 2 [E] 3 [SI1] 59.8 61 326 3.89 3.84 2.31&lt;/span>
&lt;span class="c1">#&amp;gt; 3 0.23 2 [Good] 2 [E] 5 [VS1] 56.9 65 327 4.05 4.07 2.31&lt;/span>
&lt;span class="c1">#&amp;gt; 4 0.290 4 [Premium] 6 [I] 4 [VS2] 62.4 58 334 4.2 4.23 2.63&lt;/span>
&lt;span class="c1">#&amp;gt; 5 0.31 2 [Good] 7 [J] 2 [SI2] 63.3 58 335 4.34 4.35 2.75&lt;/span>
&lt;span class="nf">read_dta&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;diamonds.dta&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">skip&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">4&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">n_max&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">5&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 5 x 10&lt;/span>
&lt;span class="c1">#&amp;gt; carat cut color clarity depth table price x y z&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl+lbl&amp;gt; &amp;lt;dbl+lbl&amp;gt; &amp;lt;dbl+lb&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 0.31 2 [Good] 7 [J] 2 [SI2] 63.3 58 335 4.34 4.35 2.75&lt;/span>
&lt;span class="c1">#&amp;gt; 2 0.24 3 [Very Goo… 7 [J] 6 [VVS2] 62.8 57 336 3.94 3.96 2.48&lt;/span>
&lt;span class="c1">#&amp;gt; 3 0.24 3 [Very Goo… 6 [I] 7 [VVS1] 62.3 57 336 3.95 3.98 2.47&lt;/span>
&lt;span class="c1">#&amp;gt; 4 0.26 3 [Very Goo… 5 [H] 3 [SI1] 61.9 55 337 4.07 4.11 2.53&lt;/span>
&lt;span class="c1">#&amp;gt; 5 0.22 1 [Fair] 2 [E] 4 [VS2] 65.1 61 337 3.87 3.78 2.49&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>And &lt;code>col_select()&lt;/code> allows you to read in just some of the columns, using the same syntax that you use with
&lt;a href="https://dplyr.tidyverse.org/reference/select.html" target="_blank" rel="noopener">&lt;code>dplyr::select()&lt;/code>&lt;/a>:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">read_dta&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;diamonds.dta&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">col_select&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="n">z&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 53,940 x 3&lt;/span>
&lt;span class="c1">#&amp;gt; x y z&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 3.95 3.98 2.43&lt;/span>
&lt;span class="c1">#&amp;gt; 2 3.89 3.84 2.31&lt;/span>
&lt;span class="c1">#&amp;gt; 3 4.05 4.07 2.31&lt;/span>
&lt;span class="c1">#&amp;gt; 4 4.2 4.23 2.63&lt;/span>
&lt;span class="c1">#&amp;gt; 5 4.34 4.35 2.75&lt;/span>
&lt;span class="c1">#&amp;gt; 6 3.94 3.96 2.48&lt;/span>
&lt;span class="c1">#&amp;gt; 7 3.95 3.98 2.47&lt;/span>
&lt;span class="c1">#&amp;gt; 8 4.07 4.11 2.53&lt;/span>
&lt;span class="c1">#&amp;gt; 9 3.87 3.78 2.49&lt;/span>
&lt;span class="c1">#&amp;gt; 10 4 4.05 2.39&lt;/span>
&lt;span class="c1">#&amp;gt; # … with 53,930 more rows&lt;/span>
&lt;span class="nf">read_dta&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;diamonds.dta&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">col_select&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">starts_with&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;c&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 53,940 x 4&lt;/span>
&lt;span class="c1">#&amp;gt; carat cut color clarity&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl+lbl&amp;gt; &amp;lt;dbl+lbl&amp;gt; &amp;lt;dbl+lbl&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 0.23 5 [Ideal] 2 [E] 2 [SI2] &lt;/span>
&lt;span class="c1">#&amp;gt; 2 0.21 4 [Premium] 2 [E] 3 [SI1] &lt;/span>
&lt;span class="c1">#&amp;gt; 3 0.23 2 [Good] 2 [E] 5 [VS1] &lt;/span>
&lt;span class="c1">#&amp;gt; 4 0.290 4 [Premium] 6 [I] 4 [VS2] &lt;/span>
&lt;span class="c1">#&amp;gt; 5 0.31 2 [Good] 7 [J] 2 [SI2] &lt;/span>
&lt;span class="c1">#&amp;gt; 6 0.24 3 [Very Good] 7 [J] 6 [VVS2]&lt;/span>
&lt;span class="c1">#&amp;gt; 7 0.24 3 [Very Good] 6 [I] 7 [VVS1]&lt;/span>
&lt;span class="c1">#&amp;gt; 8 0.26 3 [Very Good] 5 [H] 3 [SI1] &lt;/span>
&lt;span class="c1">#&amp;gt; 9 0.22 1 [Fair] 2 [E] 4 [VS2] &lt;/span>
&lt;span class="c1">#&amp;gt; 10 0.23 3 [Very Good] 5 [H] 5 [VS1] &lt;/span>
&lt;span class="c1">#&amp;gt; # … with 53,930 more rows&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>These features allow you to read in datasets that would otherwise not fit in memory, and should substantially improve performance when you only need a few rows or columns from a large file.&lt;/p>
&lt;p>This release includes a number of other bug fixes and small improvements, see the
&lt;a href="https://haven.tidyverse.org/news/index.html" target="_blank" rel="noopener">changelog&lt;/a> for a complete list.&lt;/p>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>A big thanks to everyone who helped out with this release:
&lt;a href="https://github.com/aaronrudkin" target="_blank" rel="noopener">@aaronrudkin&lt;/a>,
&lt;a href="https://github.com/batpigandme" target="_blank" rel="noopener">@batpigandme&lt;/a>,
&lt;a href="https://github.com/ccccfys" target="_blank" rel="noopener">@ccccfys&lt;/a>,
&lt;a href="https://github.com/courtiol" target="_blank" rel="noopener">@courtiol&lt;/a>,
&lt;a href="https://github.com/hadley" target="_blank" rel="noopener">@hadley&lt;/a>,
&lt;a href="https://github.com/Hadsga" target="_blank" rel="noopener">@Hadsga&lt;/a>,
&lt;a href="https://github.com/jeremy17-Endo" target="_blank" rel="noopener">@jeremy17-Endo&lt;/a>,
&lt;a href="https://github.com/KyleHaynes" target="_blank" rel="noopener">@KyleHaynes&lt;/a>,
&lt;a href="https://github.com/lguangyu" target="_blank" rel="noopener">@lguangyu&lt;/a>,
&lt;a href="https://github.com/mihagazvoda" target="_blank" rel="noopener">@mihagazvoda&lt;/a>,
&lt;a href="https://github.com/mikmart" target="_blank" rel="noopener">@mikmart&lt;/a>,
&lt;a href="https://github.com/MokeEire" target="_blank" rel="noopener">@MokeEire&lt;/a>,
&lt;a href="https://github.com/npaszty" target="_blank" rel="noopener">@npaszty&lt;/a>,
&lt;a href="https://github.com/pvanheus" target="_blank" rel="noopener">@pvanheus&lt;/a>,
&lt;a href="https://github.com/RaymondBalise" target="_blank" rel="noopener">@RaymondBalise&lt;/a>,
&lt;a href="https://github.com/sclewis23" target="_blank" rel="noopener">@sclewis23&lt;/a>,
&lt;a href="https://github.com/shubham1637" target="_blank" rel="noopener">@shubham1637&lt;/a>,
&lt;a href="https://github.com/sigbertklinke" target="_blank" rel="noopener">@sigbertklinke&lt;/a>,
&lt;a href="https://github.com/steffen-stell" target="_blank" rel="noopener">@steffen-stell&lt;/a>, and
&lt;a href="https://github.com/ttrodrigz" target="_blank" rel="noopener">@ttrodrigz&lt;/a>.&lt;/p></description></item><item><title>tidyr 1.0.0</title><link>https://www.tidyverse.org/blog/2019/09/tidyr-1-0-0/</link><pubDate>Fri, 13 Sep 2019 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2019/09/tidyr-1-0-0/</guid><description>&lt;p>I&amp;rsquo;m very excited to announce the release of
&lt;a href="https://tidyr.tidyverse.org" target="_blank" rel="noopener">tidyr 1.0.0&lt;/a>! tidyr provides a set of tools for transforming data frames to and from
&lt;a href="https://tidyr.tidyverse.org/articles/tidy-data.html" target="_blank" rel="noopener">tidy data&lt;/a>, where each variable is a column and each observation is a row. Tidy data is a convention for matching the semantics and structure of your data that makes using the rest of the tidyverse (and many other R packages) much easier.&lt;/p>
&lt;p>Install tidyr with:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">install.packages&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;tidyr&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>As you might guess from the version number, this is a major release, and the 1.0.0 moniker indicates that I&amp;rsquo;m finally happy with the overall interface of the package. This has been a long time coming: it&amp;rsquo;s five years since the first tidyr release, nine years since the first reshape2 release, and fourteen years since the first reshape release!&lt;/p>
&lt;p>This blog post summarises the four major changes to the package:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>New &lt;code>pivot_longer()&lt;/code> and &lt;code>pivot_wider()&lt;/code> provide improved tools for reshaping,
superceding &lt;code>spread()&lt;/code> and &lt;code>gather()&lt;/code>. The new functions are substantially
more powerful, thanks to ideas from the
&lt;a href="https://CRAN.R-project.org/package=data.table" target="_blank" rel="noopener">data.table&lt;/a> and
&lt;a href="https://CRAN.R-project.org/package=cdata" target="_blank" rel="noopener">cdata&lt;/a> packages, and I&amp;rsquo;m
confident that you&amp;rsquo;ll find them easier to use and remember than their
predecessors.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>New &lt;code>unnest_auto()&lt;/code>, &lt;code>unnest_longer()&lt;/code>, &lt;code>unnest_wider()&lt;/code>, and &lt;code>hoist()&lt;/code>
provide new tools for rectangling, converting deeply nested lists into tidy
data frames.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>nest()&lt;/code> and &lt;code>unnest()&lt;/code> have been changed to match an emerging principle for
the design of &lt;code>...&lt;/code> interfaces. Four new functions (&lt;code>pack()&lt;/code>/&lt;code>unpack()&lt;/code>, and
&lt;code>chop()&lt;/code>/&lt;code>unchop()&lt;/code>) reveal that nesting is the combination of two simpler
steps.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>New &lt;code>expand_grid()&lt;/code>, a variant of &lt;code>base::expand.grid()&lt;/code>. This is a useful
function to know about, but also serves as a good reason to discuss the
important role that
&lt;a href="http://vctrs.r-lib.org/" target="_blank" rel="noopener">vctrs&lt;/a> plays behind the scenes.
You shouldn&amp;rsquo;t ever &lt;em>have&lt;/em> to learn about vctrs, but it brings improvements to
consistency and performance.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>As well as implementing the new features, I&amp;rsquo;ve spent considerable time on the documentation, including four major new vignettes:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>
&lt;a href="https://tidyr.tidyverse.org/articles/pivot.html" target="_blank" rel="noopener">&lt;code>vignette(&amp;quot;pivot&amp;quot;)&lt;/code>&lt;/a>,
&lt;a href="https://tidyr.tidyverse.org/articles/rectangle.html" target="_blank" rel="noopener">&lt;code>vignette(&amp;quot;rectangle&amp;quot;)&lt;/code>&lt;/a>,
and
&lt;a href="https://tidyr.tidyverse.org/articles/nest.html" target="_blank" rel="noopener">&lt;code>vignette(&amp;quot;nest&amp;quot;)&lt;/code>&lt;/a>
provide detailed documentation and case studies of pivotting, rectangling,
and nesting respectively.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>
&lt;a href="https://tidyr.tidyverse.org/articles/in-packages.html" target="_blank" rel="noopener">&lt;code>vignette(&amp;quot;in-packages&amp;quot;)&lt;/code>&lt;/a>
provides best practices for using tidyr inside
another package, and detailed advice on working with multiple
versions of tidyr if an interface change has affected your package.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>You can see a list of all the other minor bug fixes and improvements in the
&lt;a href="https://tidyr.tidyverse.org/news/index.html#tidyr-1-0-0" target="_blank" rel="noopener">release notes&lt;/a>. I strongly recommend reading the complete release notes if you&amp;rsquo;re a package developer.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">tidyr&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dplyr&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;h2 id="pivoting">Pivoting
&lt;a href="#pivoting">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>New
&lt;a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" target="_blank" rel="noopener">&lt;code>pivot_longer()&lt;/code>&lt;/a> and
&lt;a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" target="_blank" rel="noopener">&lt;code>pivot_wider()&lt;/code>&lt;/a> provide modern alternatives to &lt;code>spread()&lt;/code> and &lt;code>gather()&lt;/code>. They have been carefully redesigned to be easier to learn and remember, and include many new features. &lt;code>spread()&lt;/code> and &lt;code>gather()&lt;/code> won&amp;rsquo;t go away, but they&amp;rsquo;ve been retired which means that they&amp;rsquo;re no longer under active development.&lt;/p>
&lt;p>The best place to learn about &lt;code>pivot_longer()&lt;/code> and &lt;code>pivot_wider()&lt;/code> is
&lt;a href="https://tidyr.tidyverse.org/articles/pivot.html" target="_blank" rel="noopener">&lt;code>vignette(&amp;quot;pivot&amp;quot;)&lt;/code>&lt;/a>, or by watching my presentation to the
&lt;a href="https://www.youtube.com/watch?v=D48JHU4llkk" target="_blank" rel="noopener">Vienna R users group&lt;/a>. Here I&amp;rsquo;ll quickly show off a few of the coolest new features:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;code>pivot_longer()&lt;/code> can now separate column names into multiple variables in
a single step. For example, take the &lt;code>who&lt;/code> dataset which has column names
that look like &lt;code>new_{diagnosis}_{gender}{age}&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">names&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">who&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; [1] &amp;#34;country&amp;#34; &amp;#34;iso2&amp;#34; &amp;#34;iso3&amp;#34; &amp;#34;year&amp;#34; &lt;/span>
&lt;span class="c1">#&amp;gt; [5] &amp;#34;new_sp_m014&amp;#34; &amp;#34;new_sp_m1524&amp;#34; &amp;#34;new_sp_m2534&amp;#34; &amp;#34;new_sp_m3544&amp;#34;&lt;/span>
&lt;span class="c1">#&amp;gt; [9] &amp;#34;new_sp_m4554&amp;#34; &amp;#34;new_sp_m5564&amp;#34; &amp;#34;new_sp_m65&amp;#34; &amp;#34;new_sp_f014&amp;#34; &lt;/span>
&lt;span class="c1">#&amp;gt; [13] &amp;#34;new_sp_f1524&amp;#34; &amp;#34;new_sp_f2534&amp;#34; &amp;#34;new_sp_f3544&amp;#34; &amp;#34;new_sp_f4554&amp;#34;&lt;/span>
&lt;span class="c1">#&amp;gt; [17] &amp;#34;new_sp_f5564&amp;#34; &amp;#34;new_sp_f65&amp;#34; &amp;#34;new_sn_m014&amp;#34; &amp;#34;new_sn_m1524&amp;#34;&lt;/span>
&lt;span class="c1">#&amp;gt; [21] &amp;#34;new_sn_m2534&amp;#34; &amp;#34;new_sn_m3544&amp;#34; &amp;#34;new_sn_m4554&amp;#34; &amp;#34;new_sn_m5564&amp;#34;&lt;/span>
&lt;span class="c1">#&amp;gt; [25] &amp;#34;new_sn_m65&amp;#34; &amp;#34;new_sn_f014&amp;#34; &amp;#34;new_sn_f1524&amp;#34; &amp;#34;new_sn_f2534&amp;#34;&lt;/span>
&lt;span class="c1">#&amp;gt; [29] &amp;#34;new_sn_f3544&amp;#34; &amp;#34;new_sn_f4554&amp;#34; &amp;#34;new_sn_f5564&amp;#34; &amp;#34;new_sn_f65&amp;#34; &lt;/span>
&lt;span class="c1">#&amp;gt; [33] &amp;#34;new_ep_m014&amp;#34; &amp;#34;new_ep_m1524&amp;#34; &amp;#34;new_ep_m2534&amp;#34; &amp;#34;new_ep_m3544&amp;#34;&lt;/span>
&lt;span class="c1">#&amp;gt; [37] &amp;#34;new_ep_m4554&amp;#34; &amp;#34;new_ep_m5564&amp;#34; &amp;#34;new_ep_m65&amp;#34; &amp;#34;new_ep_f014&amp;#34; &lt;/span>
&lt;span class="c1">#&amp;gt; [41] &amp;#34;new_ep_f1524&amp;#34; &amp;#34;new_ep_f2534&amp;#34; &amp;#34;new_ep_f3544&amp;#34; &amp;#34;new_ep_f4554&amp;#34;&lt;/span>
&lt;span class="c1">#&amp;gt; [45] &amp;#34;new_ep_f5564&amp;#34; &amp;#34;new_ep_f65&amp;#34; &amp;#34;newrel_m014&amp;#34; &amp;#34;newrel_m1524&amp;#34;&lt;/span>
&lt;span class="c1">#&amp;gt; [49] &amp;#34;newrel_m2534&amp;#34; &amp;#34;newrel_m3544&amp;#34; &amp;#34;newrel_m4554&amp;#34; &amp;#34;newrel_m5564&amp;#34;&lt;/span>
&lt;span class="c1">#&amp;gt; [53] &amp;#34;newrel_m65&amp;#34; &amp;#34;newrel_f014&amp;#34; &amp;#34;newrel_f1524&amp;#34; &amp;#34;newrel_f2534&amp;#34;&lt;/span>
&lt;span class="c1">#&amp;gt; [57] &amp;#34;newrel_f3544&amp;#34; &amp;#34;newrel_f4554&amp;#34; &amp;#34;newrel_f5564&amp;#34; &amp;#34;newrel_f65&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>You can now tease apart the variable names in a single step
(i.e. without
&lt;a href="https://tidyr.tidyverse.org/reference/separate.html" target="_blank" rel="noopener">&lt;code>separate()&lt;/code>&lt;/a>))
by supplying a vector of variable names to &lt;code>names_to&lt;/code> and a regular
expression to &lt;code>names_pattern&lt;/code> (simpler cases might only need &lt;code>names_sep&lt;/code>):&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">who&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">pivot_longer&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="n">cols&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">new_sp_m014&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="n">newrel_f65&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">names_to&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;diagnosis&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;gender&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;age&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="n">names_pattern&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;new_?(.*)_(.)(.*)&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">values_to&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;count&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">values_drop_na&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">TRUE&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 76,046 x 8&lt;/span>
&lt;span class="c1">#&amp;gt; country iso2 iso3 year diagnosis gender age count&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;int&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;int&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 Afghanistan AF AFG 1997 sp m 014 0&lt;/span>
&lt;span class="c1">#&amp;gt; 2 Afghanistan AF AFG 1997 sp m 1524 10&lt;/span>
&lt;span class="c1">#&amp;gt; 3 Afghanistan AF AFG 1997 sp m 2534 6&lt;/span>
&lt;span class="c1">#&amp;gt; 4 Afghanistan AF AFG 1997 sp m 3544 3&lt;/span>
&lt;span class="c1">#&amp;gt; 5 Afghanistan AF AFG 1997 sp m 4554 5&lt;/span>
&lt;span class="c1">#&amp;gt; 6 Afghanistan AF AFG 1997 sp m 5564 2&lt;/span>
&lt;span class="c1">#&amp;gt; # … with 7.604e+04 more rows&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>&lt;code>pivot_longer()&lt;/code> can now work with rows that contain multiple observations
(this feature was inspired by data.table&amp;rsquo;s &lt;code>dcast()&lt;/code> method). For example,
take the base &lt;code>anscombe&lt;/code> dataset. Each row consists of four pairs of
&lt;code>x&lt;/code> and &lt;code>y&lt;/code> measurements:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">head&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">anscombe&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; x1 x2 x3 x4 y1 y2 y3 y4&lt;/span>
&lt;span class="c1">#&amp;gt; 1 10 10 10 8 8.04 9.14 7.46 6.58&lt;/span>
&lt;span class="c1">#&amp;gt; 2 8 8 8 8 6.95 8.14 6.77 5.76&lt;/span>
&lt;span class="c1">#&amp;gt; 3 13 13 13 8 7.58 8.74 12.74 7.71&lt;/span>
&lt;span class="c1">#&amp;gt; 4 9 9 9 8 8.81 8.77 7.11 8.84&lt;/span>
&lt;span class="c1">#&amp;gt; 5 11 11 11 8 8.33 9.26 7.81 8.47&lt;/span>
&lt;span class="c1">#&amp;gt; 6 14 14 14 8 9.96 8.10 8.84 7.04&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>We can now tidy this in a single step by using the special &lt;code>.value&lt;/code>
variable name:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">anscombe&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">pivot_longer&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="nf">everything&lt;/span>&lt;span class="p">(),&lt;/span>
&lt;span class="n">names_to&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;.value&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;set&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="n">names_pattern&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;(.)(.)&amp;#34;&lt;/span>
&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">as_tibble&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 44 x 3&lt;/span>
&lt;span class="c1">#&amp;gt; set x y&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 1 10 8.04&lt;/span>
&lt;span class="c1">#&amp;gt; 2 2 10 9.14&lt;/span>
&lt;span class="c1">#&amp;gt; 3 3 10 7.46&lt;/span>
&lt;span class="c1">#&amp;gt; 4 4 8 6.58&lt;/span>
&lt;span class="c1">#&amp;gt; 5 1 8 6.95&lt;/span>
&lt;span class="c1">#&amp;gt; 6 2 8 8.14&lt;/span>
&lt;span class="c1">#&amp;gt; # … with 38 more rows&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>&lt;code>pivot_wider()&lt;/code> can now do simple aggregations (&lt;code>reshape2::dcast()&lt;/code> fans
rejoice!). For example, take the base &lt;code>warpbreaks&lt;/code> dataset (converted to a
tibble to print more compactly):&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">warpbreaks&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="n">warpbreaks&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">as_tibble&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">select&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">wool&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">tension&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">breaks&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">warpbreaks&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 54 x 3&lt;/span>
&lt;span class="c1">#&amp;gt; wool tension breaks&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;fct&amp;gt; &amp;lt;fct&amp;gt; &amp;lt;dbl&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 A L 26&lt;/span>
&lt;span class="c1">#&amp;gt; 2 A L 30&lt;/span>
&lt;span class="c1">#&amp;gt; 3 A L 54&lt;/span>
&lt;span class="c1">#&amp;gt; 4 A L 25&lt;/span>
&lt;span class="c1">#&amp;gt; 5 A L 70&lt;/span>
&lt;span class="c1">#&amp;gt; 6 A L 52&lt;/span>
&lt;span class="c1">#&amp;gt; # … with 48 more rows&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>This is a designed experiment with nine replicates for every combination of
&lt;code>wool&lt;/code> (&lt;code>A&lt;/code> and &lt;code>B&lt;/code>) and &lt;code>tension&lt;/code> (&lt;code>L&lt;/code>, &lt;code>M&lt;/code>, &lt;code>H&lt;/code>). If we attempt to pivot
the levels of &lt;code>wool&lt;/code> into the columns, we get a warning and the output
contains list-columns:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">warpbreaks&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">pivot_wider&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">names_from&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">wool&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">values_from&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">breaks&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; Warning: Values in `breaks` are not uniquely identified; output will contain list-cols.&lt;/span>
&lt;span class="c1">#&amp;gt; * Use `values_fn = list(breaks = list)` to suppress this warning.&lt;/span>
&lt;span class="c1">#&amp;gt; * Use `values_fn = list(breaks = length)` to identify where the duplicates arise&lt;/span>
&lt;span class="c1">#&amp;gt; * Use `values_fn = list(breaks = summary_fun)` to summarise duplicates&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 3 x 3&lt;/span>
&lt;span class="c1">#&amp;gt; tension A B&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;fct&amp;gt; &amp;lt;list&amp;lt;dbl&amp;gt;&amp;gt; &amp;lt;list&amp;lt;dbl&amp;gt;&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 L [9] [9]&lt;/span>
&lt;span class="c1">#&amp;gt; 2 M [9] [9]&lt;/span>
&lt;span class="c1">#&amp;gt; 3 H [9] [9]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>You can now summarise the duplicates with the &lt;code>values_fn&lt;/code> argument:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">warpbreaks&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">pivot_wider&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="n">names_from&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">wool&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">values_from&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">breaks&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">values_fn&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">list&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">breaks&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">mean&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 3 x 3&lt;/span>
&lt;span class="c1">#&amp;gt; tension A B&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;fct&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 L 44.6 28.2&lt;/span>
&lt;span class="c1">#&amp;gt; 2 M 24 28.8&lt;/span>
&lt;span class="c1">#&amp;gt; 3 H 24.6 18.8&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;p>Learn the full details and see many more examples in
&lt;a href="http://tidyr.tidyverse.org/articles/pivot.html" target="_blank" rel="noopener">&lt;code>vignette(&amp;quot;pivot&amp;quot;)&lt;/code>&lt;/a>.&lt;/p>
&lt;h2 id="rectangling">Rectangling
&lt;a href="#rectangling">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Rectangling is the art and craft of taking a deeply nested list (often sourced from wild-caught JSON or XML) and taming it into a tidy data set of rows and columns. tidyr 1.0.0 provides four new functions to aid rectangling:&lt;/p>
&lt;ul>
&lt;li>&lt;code>unnest_longer()&lt;/code> takes each element of a list-column and makes a new row.&lt;/li>
&lt;li>&lt;code>unnest_wider()&lt;/code> takes each element of a list-column and makes a new column.&lt;/li>
&lt;li>&lt;code>unnest_auto()&lt;/code> uses some heuristics to guess whether you want
&lt;code>unnest_longer()&lt;/code> or &lt;code>unnest_wider()&lt;/code>.&lt;/li>
&lt;li>&lt;code>hoist()&lt;/code> is similar to &lt;code>unnest_wider()&lt;/code> but only plucks out selected
components, and can reach down multiple levels.&lt;/li>
&lt;/ul>
&lt;p>To see them in action, take this small sample from &lt;code>repurrrsive::got_chars&lt;/code>. It contains data about three characters from the Game of Thrones:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">characters&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">list&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="nf">list&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;Theon Greyjoy&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">aliases&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Prince of Fools&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Theon Turncloak&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Theon Kinslayer&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="n">alive&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">TRUE&lt;/span>
&lt;span class="p">),&lt;/span>
&lt;span class="nf">list&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;Tyrion Lannister&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">aliases&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;The Imp&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Halfman&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Giant of Lannister&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="n">alive&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">TRUE&lt;/span>
&lt;span class="p">),&lt;/span>
&lt;span class="nf">list&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;Arys Oakheart&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">alive&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">FALSE&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>To work with the new tidyr rectangling tools, we first put the list into a data frame, creating a list-column:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">got&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">character&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">characters&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">got&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 3 x 1&lt;/span>
&lt;span class="c1">#&amp;gt; character &lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;list&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; 1 &amp;lt;named list [3]&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 2 &amp;lt;named list [3]&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 3 &amp;lt;named list [2]&amp;gt;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>We can then use &lt;code>unnest_wider()&lt;/code> to make each element of that list into a column:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">got&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">unnest_wider&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">character&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 3 x 3&lt;/span>
&lt;span class="c1">#&amp;gt; name aliases alive&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;list&amp;gt; &amp;lt;lgl&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 Theon Greyjoy &amp;lt;chr [3]&amp;gt; TRUE &lt;/span>
&lt;span class="c1">#&amp;gt; 2 Tyrion Lannister &amp;lt;chr [3]&amp;gt; TRUE &lt;/span>
&lt;span class="c1">#&amp;gt; 3 Arys Oakheart &amp;lt;???&amp;gt; FALSE&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Followed by &lt;code>unnest_longer()&lt;/code> to turn each alias into its own row:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">got&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">unnest_wider&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">character&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">unnest_longer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">aliases&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 7 x 3&lt;/span>
&lt;span class="c1">#&amp;gt; name aliases alive&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;lgl&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 Theon Greyjoy Prince of Fools TRUE &lt;/span>
&lt;span class="c1">#&amp;gt; 2 Theon Greyjoy Theon Turncloak TRUE &lt;/span>
&lt;span class="c1">#&amp;gt; 3 Theon Greyjoy Theon Kinslayer TRUE &lt;/span>
&lt;span class="c1">#&amp;gt; 4 Tyrion Lannister The Imp TRUE &lt;/span>
&lt;span class="c1">#&amp;gt; 5 Tyrion Lannister Halfman TRUE &lt;/span>
&lt;span class="c1">#&amp;gt; 6 Tyrion Lannister Giant of Lannister TRUE &lt;/span>
&lt;span class="c1">#&amp;gt; 7 Arys Oakheart &amp;lt;NA&amp;gt; FALSE&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Even more conveniently, you can use &lt;code>unnest_auto()&lt;/code> to guess which direction a list column should be unnested in. Here it yields the same results as above, and the messages tell you why:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">got&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">unnest_auto&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">character&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">unnest_auto&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">aliases&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; Using `unnest_wider(character)`; elements have 2 names in common&lt;/span>
&lt;span class="c1">#&amp;gt; Using `unnest_longer(aliases)`; no element has names&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Alternatively, you can use &lt;code>hoist()&lt;/code> to reach deeply into a data structure and put out just the pieces you need:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">got&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">hoist&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">character&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">alias&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">list&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;aliases&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="n">alive&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;alive&amp;#34;&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 3 x 4&lt;/span>
&lt;span class="c1">#&amp;gt; name alias alive character &lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;lgl&amp;gt; &amp;lt;list&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; 1 Theon Greyjoy Prince of Fools TRUE &amp;lt;named list [1]&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 2 Tyrion Lannister The Imp TRUE &amp;lt;named list [1]&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 3 Arys Oakheart &amp;lt;NA&amp;gt; FALSE &amp;lt;named list [0]&amp;gt;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>This syntax provides a more approachable alternative to using &lt;code>purrr::map()&lt;/code> inside &lt;code>dplyr::mutate()&lt;/code>, as we&amp;rsquo;d previously recommended:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">got&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">mutate&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">purrr&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="nf">map_chr&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">character&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="n">alias&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">purrr&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="nf">map_chr&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">character&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">list&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;aliases&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">.default&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">NA&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="n">alive&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">purrr&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="nf">map_lgl&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">character&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;alive&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Learn more in
&lt;a href="http://tidyr.tidyverse.org/articles/rectangle.html" target="_blank" rel="noopener">&lt;code>vignette(&amp;quot;rectangle&amp;quot;)&lt;/code>&lt;/a>.&lt;/p>
&lt;h2 id="nesting">Nesting
&lt;a href="#nesting">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>&lt;code>nest()&lt;/code> and &lt;code>unnest()&lt;/code> have been updated with new interfaces that are more closely aligned to evolving tidyverse conventions. The biggest change is to their operation with multiple columns:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="c1"># old&lt;/span>
&lt;span class="n">df&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">nest&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">z&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># new&lt;/span>
&lt;span class="n">df&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">nest&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">z&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1"># old&lt;/span>
&lt;span class="n">df&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">unnest&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">z&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># new&lt;/span>
&lt;span class="n">df&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">unnest&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">z&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>I&amp;rsquo;ve done my best to ensure that common uses of &lt;code>nest()&lt;/code> and &lt;code>unnest()&lt;/code> will continue to work, generating an informative warning telling you precisely how you need to update your code. If this doesn&amp;rsquo;t work, you can use &lt;code>nest_legacy()&lt;/code> or &lt;code>unnest_legacy()&lt;/code> to access the previous interfaces; see
&lt;a href="https://tidyr.tidyverse.org/articles/in-packages.html#tidyr-v0-8-3---v1-0-0" target="_blank" rel="noopener">&lt;code>vignette(&amp;quot;in-packages&amp;quot;)&lt;/code>&lt;/a> for more advice on managing this transition.&lt;/p>
&lt;p>Behind the scenes, I discovered that nesting (and unnesting) can be decomposed into the combination of two simpler operations:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;code>pack()&lt;/code> and &lt;code>unpack()&lt;/code> multiple columns into and out of a data
frame column.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>chop()&lt;/code> and &lt;code>unchop()&lt;/code> chop up rows into and out of list-columns. It&amp;rsquo;s
a bit like an explicit form of &lt;code>dplyr::group_by()&lt;/code>.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://www.tidyverse.org/images/tidyr-1-0-0/nest-pack-chop.png" width="480" height="352" />&lt;/p>
&lt;p>This is primarily of internal interest, but it considerably simplifies the implementation of &lt;code>nest()&lt;/code>, and you may occasionally find the underlying functions useful when working with exotic data structures.&lt;/p>
&lt;h2 id="expand_grid">&lt;code>expand_grid()&lt;/code>
&lt;a href="#expand_grid">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>
&lt;a href="https://tidyr.tidyverse.org/reference/expand_grid.html" target="_blank" rel="noopener">&lt;code>expand_grid()&lt;/code>&lt;/a> completes the existing family of &lt;code>expand()&lt;/code>, &lt;code>nesting()&lt;/code>, and &lt;code>crossing()&lt;/code> with a low-level function that works with vectors:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">expand_grid&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="m">3&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">letters&lt;/span>&lt;span class="n">[1&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="m">3&lt;/span>&lt;span class="n">]&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">z&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">LETTERS&lt;/span>&lt;span class="n">[1&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="m">3&lt;/span>&lt;span class="n">]&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 27 x 3&lt;/span>
&lt;span class="c1">#&amp;gt; x y z &lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;int&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 1 a A &lt;/span>
&lt;span class="c1">#&amp;gt; 2 1 a B &lt;/span>
&lt;span class="c1">#&amp;gt; 3 1 a C &lt;/span>
&lt;span class="c1">#&amp;gt; 4 1 b A &lt;/span>
&lt;span class="c1">#&amp;gt; 5 1 b B &lt;/span>
&lt;span class="c1">#&amp;gt; 6 1 b C &lt;/span>
&lt;span class="c1">#&amp;gt; # … with 21 more rows&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Compared to the existing base function &lt;code>expand.grid()&lt;/code>, &lt;code>expand_grid()&lt;/code>:&lt;/p>
&lt;ul>
&lt;li>Varies the first element most slowly (not most quickly).&lt;/li>
&lt;li>Never converts strings to factors and doesn&amp;rsquo;t add any additional attributes.&lt;/li>
&lt;li>Returns a tibble, not a data frame.&lt;/li>
&lt;li>Can expand data frames.&lt;/li>
&lt;/ul>
&lt;p>The last feature is quite powerful, as it allows you to generate partial grids:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">students&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">tribble&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="o">~&lt;/span> &lt;span class="n">school&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">~&lt;/span> &lt;span class="n">student&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="s">&amp;#34;A&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;John&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="s">&amp;#34;A&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Mary&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="s">&amp;#34;A&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Susan&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="s">&amp;#34;B&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;John&amp;#34;&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;span class="nf">expand_grid&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">students&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">semester&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="m">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 8 x 3&lt;/span>
&lt;span class="c1">#&amp;gt; school student semester&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;int&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 A John 1&lt;/span>
&lt;span class="c1">#&amp;gt; 2 A John 2&lt;/span>
&lt;span class="c1">#&amp;gt; 3 A Mary 1&lt;/span>
&lt;span class="c1">#&amp;gt; 4 A Mary 2&lt;/span>
&lt;span class="c1">#&amp;gt; 5 A Susan 1&lt;/span>
&lt;span class="c1">#&amp;gt; 6 A Susan 2&lt;/span>
&lt;span class="c1">#&amp;gt; 7 B John 1&lt;/span>
&lt;span class="c1">#&amp;gt; 8 B John 2&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>This is made possible by the
&lt;a href="https://vctrs.r-lib.org" target="_blank" rel="noopener">vctrs&lt;/a> package. vctrs is primarily of interest to package developers but I want to talk about it briefly here because I&amp;rsquo;ve been having a lot of fun working with it. It&amp;rsquo;s hard to concisely describe vctrs, but one aspect is carefully defining what a &amp;ldquo;vector&amp;rdquo; is, and providing a set of useful functions that work on all types of vctrs, without any special cases. One interesting finding is that thinking of a data frame as a vector of &lt;em>rows&lt;/em> (not columns, as R usually does) is suprisingly useful, and something you can expect to see in more places in the tidyverse in the future.&lt;/p>
&lt;p>Note that when data frame inputs are unnamed, they&amp;rsquo;re automatically unpacked into individual columns in the output. It&amp;rsquo;s also possible to create a column that is itself a data frame, a &lt;strong>df-column&lt;/strong>, if you name it:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">expand_grid&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">student&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">students&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">semester&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="m">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 8 x 2&lt;/span>
&lt;span class="c1">#&amp;gt; student$school $student semester&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;int&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 A John 1&lt;/span>
&lt;span class="c1">#&amp;gt; 2 A John 2&lt;/span>
&lt;span class="c1">#&amp;gt; 3 A Mary 1&lt;/span>
&lt;span class="c1">#&amp;gt; 4 A Mary 2&lt;/span>
&lt;span class="c1">#&amp;gt; 5 A Susan 1&lt;/span>
&lt;span class="c1">#&amp;gt; 6 A Susan 2&lt;/span>
&lt;span class="c1">#&amp;gt; 7 B John 1&lt;/span>
&lt;span class="c1">#&amp;gt; 8 B John 2&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Df-columns aren&amp;rsquo;t particularly useful yet, but they provide powerful building blocks for future extensions. For example, we expect a future version of dplyr will support df-columns as a way for &lt;code>mutate()&lt;/code> and &lt;code>summarise()&lt;/code> to create multiple new columns from a single function call.&lt;/p>
&lt;h2 id="thanks">Thanks
&lt;a href="#thanks">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>A big thanks to all 95 people who help to make this release possible!
&lt;a href="https://github.com/abiyug" target="_blank" rel="noopener">@abiyug&lt;/a>,
&lt;a href="https://github.com/AdvikS" target="_blank" rel="noopener">@AdvikS&lt;/a>,
&lt;a href="https://github.com/ahcyip" target="_blank" rel="noopener">@ahcyip&lt;/a>,
&lt;a href="https://github.com/alexpghayes" target="_blank" rel="noopener">@alexpghayes&lt;/a>,
&lt;a href="https://github.com/aneisse" target="_blank" rel="noopener">@aneisse&lt;/a>,
&lt;a href="https://github.com/apreshill" target="_blank" rel="noopener">@apreshill&lt;/a>,
&lt;a href="https://github.com/atusy" target="_blank" rel="noopener">@atusy&lt;/a>,
&lt;a href="https://github.com/ax42" target="_blank" rel="noopener">@ax42&lt;/a>,
&lt;a href="https://github.com/banfai" target="_blank" rel="noopener">@banfai&lt;/a>,
&lt;a href="https://github.com/billdenney" target="_blank" rel="noopener">@billdenney&lt;/a>,
&lt;a href="https://github.com/brentthorne" target="_blank" rel="noopener">@brentthorne&lt;/a>,
&lt;a href="https://github.com/brunj7" target="_blank" rel="noopener">@brunj7&lt;/a>,
&lt;a href="https://github.com/coolbutuseless" target="_blank" rel="noopener">@coolbutuseless&lt;/a>,
&lt;a href="https://github.com/courtiol" target="_blank" rel="noopener">@courtiol&lt;/a>,
&lt;a href="https://github.com/cwickham" target="_blank" rel="noopener">@cwickham&lt;/a>,
&lt;a href="https://github.com/DanielReedOcean" target="_blank" rel="noopener">@DanielReedOcean&lt;/a>,
&lt;a href="https://github.com/DavisVaughan" target="_blank" rel="noopener">@DavisVaughan&lt;/a>,
&lt;a href="https://github.com/dewittpe" target="_blank" rel="noopener">@dewittpe&lt;/a>,
&lt;a href="https://github.com/donboyd5" target="_blank" rel="noopener">@donboyd5&lt;/a>,
&lt;a href="https://github.com/earowang" target="_blank" rel="noopener">@earowang&lt;/a>,
&lt;a href="https://github.com/eElor" target="_blank" rel="noopener">@eElor&lt;/a>,
&lt;a href="https://github.com/enricoferrero" target="_blank" rel="noopener">@enricoferrero&lt;/a>,
&lt;a href="https://github.com/fresques" target="_blank" rel="noopener">@fresques&lt;/a>,
&lt;a href="https://github.com/garrettgman" target="_blank" rel="noopener">@garrettgman&lt;/a>,
&lt;a href="https://github.com/gederajeg" target="_blank" rel="noopener">@gederajeg&lt;/a>,
&lt;a href="https://github.com/georgevbsantiago" target="_blank" rel="noopener">@georgevbsantiago&lt;/a>,
&lt;a href="https://github.com/giocomai" target="_blank" rel="noopener">@giocomai&lt;/a>,
&lt;a href="https://github.com/gireeshkbogu" target="_blank" rel="noopener">@gireeshkbogu&lt;/a>,
&lt;a href="https://github.com/gorkang" target="_blank" rel="noopener">@gorkang&lt;/a>,
&lt;a href="https://github.com/ha0ye" target="_blank" rel="noopener">@ha0ye&lt;/a>,
&lt;a href="https://github.com/hadley" target="_blank" rel="noopener">@hadley&lt;/a>,
&lt;a href="https://github.com/hplieninger" target="_blank" rel="noopener">@hplieninger&lt;/a>,
&lt;a href="https://github.com/iago-pssjd" target="_blank" rel="noopener">@iago-pssjd&lt;/a>,
&lt;a href="https://github.com/IndrajeetPatil" target="_blank" rel="noopener">@IndrajeetPatil&lt;/a>,
&lt;a href="https://github.com/jackdolgin" target="_blank" rel="noopener">@jackdolgin&lt;/a>,
&lt;a href="https://github.com/japhir" target="_blank" rel="noopener">@japhir&lt;/a>,
&lt;a href="https://github.com/jayhesselberth" target="_blank" rel="noopener">@jayhesselberth&lt;/a>,
&lt;a href="https://github.com/jennybc" target="_blank" rel="noopener">@jennybc&lt;/a>,
&lt;a href="https://github.com/jeroenjanssens" target="_blank" rel="noopener">@jeroenjanssens&lt;/a>,
&lt;a href="https://github.com/jestarr" target="_blank" rel="noopener">@jestarr&lt;/a>,
&lt;a href="https://github.com/jgendrinal" target="_blank" rel="noopener">@jgendrinal&lt;/a>,
&lt;a href="https://github.com/Jim89" target="_blank" rel="noopener">@Jim89&lt;/a>,
&lt;a href="https://github.com/jl5000" target="_blank" rel="noopener">@jl5000&lt;/a>,
&lt;a href="https://github.com/jmcastagnetto" target="_blank" rel="noopener">@jmcastagnetto&lt;/a>,
&lt;a href="https://github.com/justasmundeikis" target="_blank" rel="noopener">@justasmundeikis&lt;/a>,
&lt;a href="https://github.com/Kaz272" target="_blank" rel="noopener">@Kaz272&lt;/a>,
&lt;a href="https://github.com/KenatRSF" target="_blank" rel="noopener">@KenatRSF&lt;/a>,
&lt;a href="https://github.com/koncina" target="_blank" rel="noopener">@koncina&lt;/a>,
&lt;a href="https://github.com/krlmlr" target="_blank" rel="noopener">@krlmlr&lt;/a>,
&lt;a href="https://github.com/kuriwaki" target="_blank" rel="noopener">@kuriwaki&lt;/a>,
&lt;a href="https://github.com/lazappi" target="_blank" rel="noopener">@lazappi&lt;/a>,
&lt;a href="https://github.com/leeper" target="_blank" rel="noopener">@leeper&lt;/a>,
&lt;a href="https://github.com/lionel-" target="_blank" rel="noopener">@lionel-&lt;/a>,
&lt;a href="https://github.com/markdly" target="_blank" rel="noopener">@markdly&lt;/a>,
&lt;a href="https://github.com/martinjhnhadley" target="_blank" rel="noopener">@martinjhnhadley&lt;/a>,
&lt;a href="https://github.com/MatthieuStigler" target="_blank" rel="noopener">@MatthieuStigler&lt;/a>,
&lt;a href="https://github.com/mattwarkentin" target="_blank" rel="noopener">@mattwarkentin&lt;/a>,
&lt;a href="https://github.com/mehrgoltiv" target="_blank" rel="noopener">@mehrgoltiv&lt;/a>,
&lt;a href="https://github.com/meriops" target="_blank" rel="noopener">@meriops&lt;/a>,
&lt;a href="https://github.com/mikemc" target="_blank" rel="noopener">@mikemc&lt;/a>,
&lt;a href="https://github.com/mikmart" target="_blank" rel="noopener">@mikmart&lt;/a>,
&lt;a href="https://github.com/mine-cetinkaya-rundel" target="_blank" rel="noopener">@mine-cetinkaya-rundel&lt;/a>,
&lt;a href="https://github.com/mitchelloharawild" target="_blank" rel="noopener">@mitchelloharawild&lt;/a>,
&lt;a href="https://github.com/mixolydianpink" target="_blank" rel="noopener">@mixolydianpink&lt;/a>,
&lt;a href="https://github.com/mkapplebee" target="_blank" rel="noopener">@mkapplebee&lt;/a>,
&lt;a href="https://github.com/moodymudskipper" target="_blank" rel="noopener">@moodymudskipper&lt;/a>,
&lt;a href="https://github.com/mpaulacaldas" target="_blank" rel="noopener">@mpaulacaldas&lt;/a>,
&lt;a href="https://github.com/Myfanwy" target="_blank" rel="noopener">@Myfanwy&lt;/a>,
&lt;a href="https://github.com/ogorodriguez" target="_blank" rel="noopener">@ogorodriguez&lt;/a>,
&lt;a href="https://github.com/onesandzeroes" target="_blank" rel="noopener">@onesandzeroes&lt;/a>,
&lt;a href="https://github.com/Overlytic" target="_blank" rel="noopener">@Overlytic&lt;/a>,
&lt;a href="https://github.com/paleolimbot" target="_blank" rel="noopener">@paleolimbot&lt;/a>,
&lt;a href="https://github.com/PMassicotte" target="_blank" rel="noopener">@PMassicotte&lt;/a>,
&lt;a href="https://github.com/psychometrician" target="_blank" rel="noopener">@psychometrician&lt;/a>,
&lt;a href="https://github.com/Rekyt" target="_blank" rel="noopener">@Rekyt&lt;/a>,
&lt;a href="https://github.com/romainfrancois" target="_blank" rel="noopener">@romainfrancois&lt;/a>,
&lt;a href="https://github.com/romatik" target="_blank" rel="noopener">@romatik&lt;/a>,
&lt;a href="https://github.com/rubenarslan" target="_blank" rel="noopener">@rubenarslan&lt;/a>,
&lt;a href="https://github.com/SchollJ" target="_blank" rel="noopener">@SchollJ&lt;/a>,
&lt;a href="https://github.com/seabbs" target="_blank" rel="noopener">@seabbs&lt;/a>,
&lt;a href="https://github.com/sethmund" target="_blank" rel="noopener">@sethmund&lt;/a>,
&lt;a href="https://github.com/sfirke" target="_blank" rel="noopener">@sfirke&lt;/a>,
&lt;a href="https://github.com/SimonCoulombe" target="_blank" rel="noopener">@SimonCoulombe&lt;/a>,
&lt;a href="https://github.com/Stephonomon" target="_blank" rel="noopener">@Stephonomon&lt;/a>,
&lt;a href="https://github.com/stufield" target="_blank" rel="noopener">@stufield&lt;/a>,
&lt;a href="https://github.com/tdjames1" target="_blank" rel="noopener">@tdjames1&lt;/a>,
&lt;a href="https://github.com/thierrygosselin" target="_blank" rel="noopener">@thierrygosselin&lt;/a>,
&lt;a href="https://github.com/tklebel" target="_blank" rel="noopener">@tklebel&lt;/a>,
&lt;a href="https://github.com/tmastny" target="_blank" rel="noopener">@tmastny&lt;/a>,
&lt;a href="https://github.com/trannhatanh89" target="_blank" rel="noopener">@trannhatanh89&lt;/a>,
&lt;a href="https://github.com/TrentLobdell" target="_blank" rel="noopener">@TrentLobdell&lt;/a>,
&lt;a href="https://github.com/wcmbishop" target="_blank" rel="noopener">@wcmbishop&lt;/a>,
&lt;a href="https://github.com/wulixin" target="_blank" rel="noopener">@wulixin&lt;/a>,
&lt;a href="https://github.com/yutannihilation" target="_blank" rel="noopener">@yutannihilation&lt;/a>, and
&lt;a href="https://github.com/zeehio" target="_blank" rel="noopener">@zeehio&lt;/a>.&lt;/p></description></item><item><title>googledrive v1.0.0</title><link>https://www.tidyverse.org/blog/2019/08/googledrive-1-0-0/</link><pubDate>Tue, 20 Aug 2019 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2019/08/googledrive-1-0-0/</guid><description>
&lt;h2 id="introduction">Introduction
&lt;a href="#introduction">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>We&amp;rsquo;re jazzed to announce the release of googledrive v1.0.0 (&lt;a href="https://googledrive.tidyverse.org">https://googledrive.tidyverse.org&lt;/a>).&lt;/p>
&lt;p>googledrive wraps the
&lt;a href="https://developers.google.com/drive/" target="_blank" rel="noopener">Drive REST API v3&lt;/a>. The most common file operations are implemented in high-level functions designed for ease of use. You can find, list, create, trash, delete, rename, move, copy, browse, download, share and publish Drive files, including those on Team Drives.&lt;/p>
&lt;p>Install googledrive with:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">install.packages&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;googledrive&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>The release of version 1.0.0 marks two events:&lt;/p>
&lt;ul>
&lt;li>The overall design of googledrive has survived ~2 years on CRAN, with very little need for change. The interface and feature set are fairly stable. googledrive facilitated around 7 million requests to the Drive API in the past month. But also &amp;hellip;&lt;/li>
&lt;li>There are changes in the auth interface that are not backwards compatible.&lt;/li>
&lt;/ul>
&lt;p>There is also new functionality that makes it less likely you&amp;rsquo;ll create multiple files with the same name, without actually meaning to.&lt;/p>
&lt;h2 id="auth-from-gargle">Auth from gargle
&lt;a href="#auth-from-gargle">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>googledrive&amp;rsquo;s auth functionality now comes from the
&lt;a href="https://gargle.r-lib.org" target="_blank" rel="noopener">gargle package&lt;/a>, which provides R infrastructure to work with Google APIs, in general. We&amp;rsquo;ve just
&lt;a href="https://www.tidyverse.org/articles/2019/08/gargle-hello-world/" target="_blank" rel="noopener">blogged about gargle&amp;rsquo;s initial release&lt;/a>, so check out that post for more details.&lt;/p>
&lt;p>We&amp;rsquo;re adopting gargle for auth in several other packages, such as
&lt;a href="https://bigrquery.r-dbi.org" target="_blank" rel="noopener">bigrquery&lt;/a> (&amp;gt;= v1.2.0),
&lt;a href="https://gmailr.r-lib.org" target="_blank" rel="noopener">gmailr&lt;/a> (&amp;gt;= v1.0.0 &lt;em>coming soon to CRAN&lt;/em>), and
&lt;a href="https://googlesheets4.tidyverse.org" target="_blank" rel="noopener">googlesheets4&lt;/a> (currently GitHub-only, successor of googlesheets). This makes new token flows available in these packages, such as
&lt;a href="https://www.jhanley.com/google-cloud-application-default-credentials/" target="_blank" rel="noopener">Application Default Credentials&lt;/a>, and makes auth less idiosyncratic.&lt;/p>
&lt;h3 id="auth-changes-the-typical-user-will-notice">Auth changes the typical user will notice
&lt;a href="#auth-changes-the-typical-user-will-notice">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>If you&amp;rsquo;ve always let googledrive guide you through auth, here is the one change you will notice:&lt;/p>
&lt;blockquote>
&lt;p>OAuth2 tokens are now cached at the user level, by default, instead of in &lt;code>.httr-oauth&lt;/code> in the current project. We will ask if it&amp;rsquo;s OK to create a new folder to hold your OAuth tokens. We recommend that you delete any vestigial &lt;code>.httr-oauth&lt;/code> files lying around your googledrive projects and re-authorize googledrive, i.e. get a new token, stored in the new way.&lt;/p>
&lt;/blockquote>
&lt;p>The new strategy makes it harder to accidentally push your tokens to the cloud, easier to use multiple Google identities, and easier to share tokens across projects and packages.&lt;/p>
&lt;p>Overall, googledrive has gotten more careful about getting your permission to use a cached token. See the gargle vignette
&lt;a href="https://gargle.r-lib.org/articles/non-interactive-auth.html" target="_blank" rel="noopener">Non-interactive auth&lt;/a> to learn how to prevent attempts to interact with you, especially the section
&lt;a href="https://gargle.r-lib.org/articles/non-interactive-auth.html#i-just-want-my--rmd-to-render" target="_blank" rel="noopener">&amp;ldquo;I just want my &lt;code>.Rmd&lt;/code> to render&amp;rdquo;&lt;/a>.&lt;/p>
&lt;p>googledrive also uses a new OAuth &amp;ldquo;app&amp;rdquo;, owned by a verified Google Cloud Project entitled &amp;ldquo;Tidyverse API Packages&amp;rdquo;, which is the project name you will see on the OAuth consent screen. See our new
&lt;a href="https://www.tidyverse.org/google_privacy_policy/" target="_blank" rel="noopener">Privacy Policy&lt;/a> for details.&lt;/p>
&lt;p>For more advanced users who call &lt;code>drive_auth()&lt;/code> directly or who configure auth settings, such as their own OAuth app or API key, see the
&lt;a href="https://googledrive.tidyverse.org/news/index.html#googledrive-1-0-0" target="_blank" rel="noopener">changelog&lt;/a> for more details.&lt;/p>
&lt;h2 id="preventing-name-clashes">Preventing name clashes
&lt;a href="#preventing-name-clashes">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Google Drive doesn&amp;rsquo;t impose a 1-to-1 relationship between files and filepaths, the way your local file system does. Therefore, when working via the Drive API (instead of in the browser), it&amp;rsquo;s fairly easy to create multiple Drive files with the same name or filepath, without actually meaning to. This is perfectly valid on Drive, which identifies file by ID, but can be confusing and undesirable for humans. Very few people actually want this:&lt;/p>
&lt;p>&lt;img src="https://www.tidyverse.org/images/googledrive/je-suis-unique.png" width="60%" />&lt;/p>
&lt;p>googledrive v1.0.0 offers some new ways to prevent writing more than one file to the same filepath.&lt;/p>
&lt;p>All functions that create a new item or rename/move an existing item have gained an &lt;code>overwrite&lt;/code> argument:&lt;/p>
&lt;ul>
&lt;li>&lt;code>drive_create()&lt;/code> &lt;em>this function is new in v1.0.0&lt;/em>&lt;/li>
&lt;li>&lt;code>drive_cp()&lt;/code>&lt;/li>
&lt;li>&lt;code>drive_mkdir()&lt;/code>&lt;/li>
&lt;li>&lt;code>drive_mv()&lt;/code>&lt;/li>
&lt;li>&lt;code>drive_rename()&lt;/code>&lt;/li>
&lt;li>&lt;code>drive_upload()&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>The default of &lt;code>overwrite = NA&lt;/code> corresponds to the existing behaviour, which does not consider pre-existing files at all. &lt;code>overwrite = TRUE&lt;/code> requests to move a pre-existing file at the target filepath to the trash, prior to creating the new item. If 2 or more files are found, an error is thrown, because it&amp;rsquo;s not clear which one(s) to trash. &lt;code>overwrite = FALSE&lt;/code> means the new item will only be created if there is no pre-existing file at that filepath. Existence checks based on filepath (or name) can be expensive. This is why the default is &lt;code>overwrite = NA&lt;/code>, in addition to backwards compatibility.&lt;/p>
&lt;p>&lt;code>drive_put()&lt;/code> is a new convenience wrapper that figures out whether to call &lt;code>drive_upload()&lt;/code> or &lt;code>drive_update()&lt;/code>.&lt;/p>
&lt;p>Sometimes you have a file you will repeatedly send to Drive, i.e. the first time you run an analysis, you create the file and, when you re-run it, you update the file. Previously this was hard to express with googledrive.&lt;/p>
&lt;p>&lt;code>drive_put()&lt;/code> is useful here and refers to the HTTP verb &lt;code>PUT&lt;/code>: create the thing if it doesn&amp;rsquo;t exist or, if it does, replace its contents. A good explanation of &lt;code>PUT&lt;/code> is
&lt;a href="https://medium.com/backticks-tildes/restful-api-design-put-vs-patch-4a061aa3ed0b" target="_blank" rel="noopener">RESTful API Design — PUT vs PATCH&lt;/a>.&lt;/p>
&lt;p>In pseudo-code, here&amp;rsquo;s the basic idea of &lt;code>drive_put()&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">target_filepath&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">determined&lt;/span> &lt;span class="n">from&lt;/span> &lt;span class="n">arguments&lt;/span> &lt;span class="n">`path`&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">`name`&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">and&lt;/span> &lt;span class="n">`media`&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;span class="n">hits&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">get&lt;/span> &lt;span class="n">all&lt;/span> &lt;span class="n">Drive&lt;/span> &lt;span class="n">files&lt;/span> &lt;span class="n">at&lt;/span> &lt;span class="n">target_filepath&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;span class="nf">if &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">no&lt;/span> &lt;span class="n">hits&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nf">drive_upload&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">media&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">path&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">type&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">...&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">verbose&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">}&lt;/span> &lt;span class="n">else&lt;/span> &lt;span class="nf">if &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">exactly&lt;/span> &lt;span class="m">1&lt;/span> &lt;span class="n">hit&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nf">drive_update&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">hit&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">media&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">...&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">verbose&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">}&lt;/span> &lt;span class="n">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="n">ERROR&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;h2 id="shared-workflows">Shared workflows
&lt;a href="#shared-workflows">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>The shared use of gargle allows us to create centralized articles for several workflows that can be tricky for useRs:&lt;/p>
&lt;ul>
&lt;li>
&lt;a href="https://gargle.r-lib.org/articles/non-interactive-auth.html" target="_blank" rel="noopener">Non-interactive auth&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://gargle.r-lib.org/articles/auth-from-web.html" target="_blank" rel="noopener">Auth when using R in the browser&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://gargle.r-lib.org/articles/articles/managing-tokens-securely.html" target="_blank" rel="noopener">Managing tokens securely&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://gargle.r-lib.org/articles/get-api-credentials.html" target="_blank" rel="noopener">How to get your own API credentials&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="thanks">Thanks!
&lt;a href="#thanks">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Thank you to the &lt;strong>41&lt;/strong> people who contributed issues, code, and comments to this release:&lt;/p>
&lt;p>
&lt;a href="https://github.com/abeburnett" target="_blank" rel="noopener">@abeburnett&lt;/a>,
&lt;a href="https://github.com/admahood" target="_blank" rel="noopener">@admahood&lt;/a>,
&lt;a href="https://github.com/alexpghayes" target="_blank" rel="noopener">@alexpghayes&lt;/a>,
&lt;a href="https://github.com/arendsee" target="_blank" rel="noopener">@arendsee&lt;/a>,
&lt;a href="https://github.com/batpigandme" target="_blank" rel="noopener">@batpigandme&lt;/a>,
&lt;a href="https://github.com/benmarwick" target="_blank" rel="noopener">@benmarwick&lt;/a>,
&lt;a href="https://github.com/Chanajit" target="_blank" rel="noopener">@Chanajit&lt;/a>,
&lt;a href="https://github.com/cowlumbus" target="_blank" rel="noopener">@cowlumbus&lt;/a>,
&lt;a href="https://github.com/ctlamb" target="_blank" rel="noopener">@ctlamb&lt;/a>,
&lt;a href="https://github.com/DavidGarciaEstaun" target="_blank" rel="noopener">@DavidGarciaEstaun&lt;/a>,
&lt;a href="https://github.com/dgplaco" target="_blank" rel="noopener">@dgplaco&lt;/a>,
&lt;a href="https://github.com/Diego-MX" target="_blank" rel="noopener">@Diego-MX&lt;/a>,
&lt;a href="https://github.com/dsdaveh" target="_blank" rel="noopener">@dsdaveh&lt;/a>,
&lt;a href="https://github.com/eeenilsson" target="_blank" rel="noopener">@eeenilsson&lt;/a>,
&lt;a href="https://github.com/efh0888" target="_blank" rel="noopener">@efh0888&lt;/a>,
&lt;a href="https://github.com/giocomai" target="_blank" rel="noopener">@giocomai&lt;/a>,
&lt;a href="https://github.com/grabear" target="_blank" rel="noopener">@grabear&lt;/a>,
&lt;a href="https://github.com/hwsamuel" target="_blank" rel="noopener">@hwsamuel&lt;/a>,
&lt;a href="https://github.com/ianmcook" target="_blank" rel="noopener">@ianmcook&lt;/a>,
&lt;a href="https://github.com/jarodmeng" target="_blank" rel="noopener">@jarodmeng&lt;/a>,
&lt;a href="https://github.com/jennybc" target="_blank" rel="noopener">@jennybc&lt;/a>,
&lt;a href="https://github.com/jimhester" target="_blank" rel="noopener">@jimhester&lt;/a>,
&lt;a href="https://github.com/lohancock" target="_blank" rel="noopener">@lohancock&lt;/a>,
&lt;a href="https://github.com/lotard" target="_blank" rel="noopener">@lotard&lt;/a>,
&lt;a href="https://github.com/LucyMcGowan" target="_blank" rel="noopener">@LucyMcGowan&lt;/a>,
&lt;a href="https://github.com/lukaskawerau" target="_blank" rel="noopener">@lukaskawerau&lt;/a>,
&lt;a href="https://github.com/MariaMetriplica" target="_blank" rel="noopener">@MariaMetriplica&lt;/a>,
&lt;a href="https://github.com/Martin-Jung" target="_blank" rel="noopener">@Martin-Jung&lt;/a>,
&lt;a href="https://github.com/medewitt" target="_blank" rel="noopener">@medewitt&lt;/a>,
&lt;a href="https://github.com/njudd" target="_blank" rel="noopener">@njudd&lt;/a>,
&lt;a href="https://github.com/philmikejones" target="_blank" rel="noopener">@philmikejones&lt;/a>,
&lt;a href="https://github.com/prokulski" target="_blank" rel="noopener">@prokulski&lt;/a>,
&lt;a href="https://github.com/RNA-Ninja" target="_blank" rel="noopener">@RNA-Ninja&lt;/a>,
&lt;a href="https://github.com/romunov" target="_blank" rel="noopener">@romunov&lt;/a>,
&lt;a href="https://github.com/sanjmeh" target="_blank" rel="noopener">@sanjmeh&lt;/a>,
&lt;a href="https://github.com/Serenthia" target="_blank" rel="noopener">@Serenthia&lt;/a>,
&lt;a href="https://github.com/shawzhifei" target="_blank" rel="noopener">@shawzhifei&lt;/a>,
&lt;a href="https://github.com/stapial" target="_blank" rel="noopener">@stapial&lt;/a>,
&lt;a href="https://github.com/svenhalvorson" target="_blank" rel="noopener">@svenhalvorson&lt;/a>,
&lt;a href="https://github.com/tarunparmar" target="_blank" rel="noopener">@tarunparmar&lt;/a>, and
&lt;a href="https://github.com/tsmith64" target="_blank" rel="noopener">@tsmith64&lt;/a>&lt;/p></description></item><item><title>dplyr 0.8.3</title><link>https://www.tidyverse.org/blog/2019/07/dplyr-0-8-3/</link><pubDate>Thu, 04 Jul 2019 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2019/07/dplyr-0-8-3/</guid><description>
&lt;h2 id="introduction">Introduction
&lt;a href="#introduction">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>We&amp;rsquo;re pleased (and a little embarrassed) to announce the release of dplyr 0.8.3 on CRAN 😬 !&lt;/p>
&lt;p>This is an emergency release, one week after
&lt;a href="https://www.tidyverse.org/articles/2019/06/dplyr-0-8-2/" target="_blank" rel="noopener">0.8.2&lt;/a>
to fix a major performance regression as reported by the community on twitter.&lt;/p>
&lt;h2 id="nostra-culpa">Nostra culpa
&lt;a href="#nostra-culpa">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>This
&lt;a href="https://github.com/tidyverse/dplyr/commit/036de90fbf9e3eef72c015982a5d1294d2157a2c#r34165423" target="_blank" rel="noopener">commit&lt;/a> was pushed to
&lt;a href="https://dplyr.tidyverse.org" target="_blank" rel="noopener">dplyr&lt;/a> on May 10, as a seemingly very harmless update to better support list
columns being used in
&lt;a href="https://dplyr.tidyverse.org/reference/summarise.html" target="_blank" rel="noopener">summarise()&lt;/a>.&lt;/p>
&lt;p>In addition to the changes that were necessary to fix the problem reported in
&lt;a href="https://github.com/tidyverse/dplyr/issues/4349" target="_blank" rel="noopener">issue 4349&lt;/a>,
the commit removed two lines of code in a very central piece of
&lt;a href="https://dplyr.tidyverse.org" target="_blank" rel="noopener">dplyr&lt;/a> infrastructure,
namely its data mask layout.&lt;/p>
&lt;p>As part of
&lt;a href="https://www.tidyverse.org/articles/2019/02/dplyr-0-8-0/" target="_blank" rel="noopener">dplyr 0.8.0&lt;/a>, internals of the data mask layout has
dramatically changed and uses a data mask composed of two environments. The first environment contains a set of active
bindings for each of the columns in the data frame to process, the first time a variable is used in an expression,
presumably on the first group, the active binding is resolved to get the relevant slice of that column. This is a
somewhat expensive operation, therefore subsequent groups pro actively materialise the slice of columns which are known
to be needed, using the second environment of the data mask.&lt;/p>
&lt;p>The two lines that were removed by mistake are central to this system, without them each group would
invoke the costly active binding. Even worse, the list of indices of columns to be rematerialised,
as maintained by a vector of integers, would grow each time, so on the second group the column slice would
be materialized twice to be then forgotten, on the third group three times &amp;hellip;&lt;/p>
&lt;p>Classic embarrassing quadratic performance regression.&lt;/p>
&lt;h2 id="thanks">Thanks
&lt;a href="#thanks">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Thanks to the community for quickly alerting us of the situation, the 🐌 had been
in the code base for almost two months but we had not noticed because our continuous
integration protects us from regressions in functionality, but not regression in performance.&lt;/p>
&lt;p>We might investigate in that direction in the future.Thanks to all contributors for this release.&lt;/p>
&lt;p>
&lt;a href="https://github.com/ajkroeg" target="_blank" rel="noopener">@ajkroeg&lt;/a>,
&lt;a href="https://github.com/bschneidr" target="_blank" rel="noopener">@bschneidr&lt;/a>,
&lt;a href="https://github.com/DavisVaughan" target="_blank" rel="noopener">@DavisVaughan&lt;/a>,
&lt;a href="https://github.com/dhicks" target="_blank" rel="noopener">@dhicks&lt;/a>,
&lt;a href="https://github.com/gvfarns" target="_blank" rel="noopener">@gvfarns&lt;/a>,
&lt;a href="https://github.com/IndrajeetPatil" target="_blank" rel="noopener">@IndrajeetPatil&lt;/a>,
&lt;a href="https://github.com/krlmlr" target="_blank" rel="noopener">@krlmlr&lt;/a>,
&lt;a href="https://github.com/romainfrancois" target="_blank" rel="noopener">@romainfrancois&lt;/a>, and
&lt;a href="https://github.com/shane-kercheval" target="_blank" rel="noopener">@shane-kercheval&lt;/a>&lt;/p></description></item><item><title>dplyr 0.8.2</title><link>https://www.tidyverse.org/blog/2019/06/dplyr-0-8-2/</link><pubDate>Sat, 29 Jun 2019 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2019/06/dplyr-0-8-2/</guid><description>
&lt;h2 id="introduction">Introduction
&lt;a href="#introduction">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>We&amp;rsquo;re delighted to announce the release of dplyr 0.8.2 on CRAN 🍉 !&lt;/p>
&lt;p>This is a minor maintenance release in the &lt;code>0.8.*&lt;/code> series, addressing a collection of
issues since the
&lt;a href="https://www.tidyverse.org/articles/2019/05/dplyr-0-8-1/" target="_blank" rel="noopener">0.8.1&lt;/a> and
&lt;a href="https://www.tidyverse.org/articles/2019/02/dplyr-0-8-0/" target="_blank" rel="noopener">0.8.0&lt;/a> versions.&lt;/p>
&lt;h2 id="top_n-and-top_frac">top_n() and top_frac()
&lt;a href="#top_n-and-top_frac">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>
&lt;a href="https://dplyr.tidyverse.org/reference/top_n.html" target="_blank" rel="noopener">top_n()&lt;/a> has been around for a long time in
&lt;a href="https://dplyr.tidyverse.org/index.html" target="_blank" rel="noopener">dplyr&lt;/a>, as a convenient wrapper around
&lt;a href="https://dplyr.tidyverse.org/articles/dplyr.html?q=filter" target="_blank" rel="noopener">filter()&lt;/a>
and
&lt;a href="https://dplyr.tidyverse.org/reference/ranking.html" target="_blank" rel="noopener">min_rank()&lt;/a>,
to select top (or bottom) entries in each group of a tibble.&lt;/p>
&lt;p>In this release,
&lt;a href="https://dplyr.tidyverse.org/reference/top_n.html" target="_blank" rel="noopener">top_n()&lt;/a> is no longer
limited to a constant number of entries per group, its &lt;code>n&lt;/code> argument is now quoted
to be evaluated later in the context of the group.&lt;/p>
&lt;p>Here are the top half countries, i.e. &lt;code>n() / 2&lt;/code>, in terms of life expectancy in 2007.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dplyr&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; Attaching package: &amp;#39;dplyr&amp;#39;&lt;/span>
&lt;span class="c1">#&amp;gt; The following objects are masked from &amp;#39;package:stats&amp;#39;:&lt;/span>
&lt;span class="c1">#&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; filter, lag&lt;/span>
&lt;span class="c1">#&amp;gt; The following objects are masked from &amp;#39;package:base&amp;#39;:&lt;/span>
&lt;span class="c1">#&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; intersect, setdiff, setequal, union&lt;/span>
&lt;span class="n">gapminder&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">gapminder&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">filter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">year&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="m">2007&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_by&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">continent&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">top_n&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">n&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="m">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">lifeExp&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 70 x 6&lt;/span>
&lt;span class="c1">#&amp;gt; # Groups: continent [5]&lt;/span>
&lt;span class="c1">#&amp;gt; country continent year lifeExp pop gdpPercap&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;fct&amp;gt; &amp;lt;fct&amp;gt; &amp;lt;int&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;int&amp;gt; &amp;lt;dbl&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 Algeria Africa 2007 72.3 33333216 6223.&lt;/span>
&lt;span class="c1">#&amp;gt; 2 Argentina Americas 2007 75.3 40301927 12779.&lt;/span>
&lt;span class="c1">#&amp;gt; 3 Australia Oceania 2007 81.2 20434176 34435.&lt;/span>
&lt;span class="c1">#&amp;gt; 4 Austria Europe 2007 79.8 8199783 36126.&lt;/span>
&lt;span class="c1">#&amp;gt; 5 Bahrain Asia 2007 75.6 708573 29796.&lt;/span>
&lt;span class="c1">#&amp;gt; 6 Belgium Europe 2007 79.4 10392226 33693.&lt;/span>
&lt;span class="c1">#&amp;gt; 7 Benin Africa 2007 56.7 8078314 1441.&lt;/span>
&lt;span class="c1">#&amp;gt; 8 Canada Americas 2007 80.7 33390141 36319.&lt;/span>
&lt;span class="c1">#&amp;gt; 9 Chile Americas 2007 78.6 16284741 13172.&lt;/span>
&lt;span class="c1">#&amp;gt; 10 China Asia 2007 73.0 1318683096 4959.&lt;/span>
&lt;span class="c1">#&amp;gt; # … with 60 more rows&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>
&lt;a href="https://dplyr.tidyverse.org/reference/top_n.html" target="_blank" rel="noopener">top_frac()&lt;/a> is new convenience shortcut for
the top n percent, i.e.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">gapminder&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">gapminder&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">filter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">year&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="m">2007&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_by&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">continent&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">top_frac&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">0.5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">lifeExp&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 70 x 6&lt;/span>
&lt;span class="c1">#&amp;gt; # Groups: continent [5]&lt;/span>
&lt;span class="c1">#&amp;gt; country continent year lifeExp pop gdpPercap&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;fct&amp;gt; &amp;lt;fct&amp;gt; &amp;lt;int&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;int&amp;gt; &amp;lt;dbl&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 Algeria Africa 2007 72.3 33333216 6223.&lt;/span>
&lt;span class="c1">#&amp;gt; 2 Argentina Americas 2007 75.3 40301927 12779.&lt;/span>
&lt;span class="c1">#&amp;gt; 3 Australia Oceania 2007 81.2 20434176 34435.&lt;/span>
&lt;span class="c1">#&amp;gt; 4 Austria Europe 2007 79.8 8199783 36126.&lt;/span>
&lt;span class="c1">#&amp;gt; 5 Bahrain Asia 2007 75.6 708573 29796.&lt;/span>
&lt;span class="c1">#&amp;gt; 6 Belgium Europe 2007 79.4 10392226 33693.&lt;/span>
&lt;span class="c1">#&amp;gt; 7 Benin Africa 2007 56.7 8078314 1441.&lt;/span>
&lt;span class="c1">#&amp;gt; 8 Canada Americas 2007 80.7 33390141 36319.&lt;/span>
&lt;span class="c1">#&amp;gt; 9 Chile Americas 2007 78.6 16284741 13172.&lt;/span>
&lt;span class="c1">#&amp;gt; 10 China Asia 2007 73.0 1318683096 4959.&lt;/span>
&lt;span class="c1">#&amp;gt; # … with 60 more rows&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;h2 id="tbl_vars-and-group_cols">tbl_vars() and group_cols()
&lt;a href="#tbl_vars-and-group_cols">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>
&lt;a href="https://dplyr.tidyverse.org/reference/tbl_vars.html" target="_blank" rel="noopener">tbl_vars()&lt;/a> now returns a &lt;code>dplyr_sel_vars&lt;/code>
object that keeps track of the grouping variables. This information powers
&lt;a href="https://dplyr.tidyverse.org/reference/group_cols.html" target="_blank" rel="noopener">group_cols()&lt;/a>, which can now be used
in every function that uses tidy selection of columns.&lt;/p>
&lt;p>Functions in the tidyverse and beyond may start to use the
&lt;a href="https://dplyr.tidyverse.org/reference/tbl_vars.html" target="_blank" rel="noopener">tbl_vars()&lt;/a>/
&lt;a href="https://dplyr.tidyverse.org/reference/group_cols.html" target="_blank" rel="noopener">group_cols()&lt;/a> duo,
starting from
&lt;a href="https://tidyr.tidyverse.org" target="_blank" rel="noopener">tidyr&lt;/a> and this
&lt;a href="https://github.com/tidyverse/tidyr/pull/668" target="_blank" rel="noopener">pull request&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="c1"># pak::pkg_install(&amp;#34;tidyverse/tidyr#668&amp;#34;)&lt;/span>
&lt;span class="n">iris&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_by&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Species&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="n">tidyr&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="nf">gather&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;flower_att&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;measurement&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="nf">group_cols&lt;/span>&lt;span class="p">())&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 600 x 3&lt;/span>
&lt;span class="c1">#&amp;gt; # Groups: Species [3]&lt;/span>
&lt;span class="c1">#&amp;gt; Species flower_att measurement&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;fct&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;dbl&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 setosa Sepal.Length 5.1&lt;/span>
&lt;span class="c1">#&amp;gt; 2 setosa Sepal.Length 4.9&lt;/span>
&lt;span class="c1">#&amp;gt; 3 setosa Sepal.Length 4.7&lt;/span>
&lt;span class="c1">#&amp;gt; 4 setosa Sepal.Length 4.6&lt;/span>
&lt;span class="c1">#&amp;gt; 5 setosa Sepal.Length 5 &lt;/span>
&lt;span class="c1">#&amp;gt; 6 setosa Sepal.Length 5.4&lt;/span>
&lt;span class="c1">#&amp;gt; 7 setosa Sepal.Length 4.6&lt;/span>
&lt;span class="c1">#&amp;gt; 8 setosa Sepal.Length 5 &lt;/span>
&lt;span class="c1">#&amp;gt; 9 setosa Sepal.Length 4.4&lt;/span>
&lt;span class="c1">#&amp;gt; 10 setosa Sepal.Length 4.9&lt;/span>
&lt;span class="c1">#&amp;gt; # … with 590 more rows&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;h2 id="group_split-group_map-group_modify">group_split(), group_map(), group_modify()
&lt;a href="#group_split-group_map-group_modify">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>
&lt;a href="https://dplyr.tidyverse.org/reference/group_split.html" target="_blank" rel="noopener">group_split()&lt;/a> always keeps
a &lt;code>ptype&lt;/code> attribute to track the prototype of the splits.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">mtcars&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_by&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cyl&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">filter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">hp&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_split&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1">#&amp;gt; list()&lt;/span>
&lt;span class="c1">#&amp;gt; attr(,&amp;#34;ptype&amp;#34;)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 0 x 11&lt;/span>
&lt;span class="c1">#&amp;gt; # … with 11 variables: mpg &amp;lt;dbl&amp;gt;, cyl &amp;lt;dbl&amp;gt;, disp &amp;lt;dbl&amp;gt;, hp &amp;lt;dbl&amp;gt;,&lt;/span>
&lt;span class="c1">#&amp;gt; # drat &amp;lt;dbl&amp;gt;, wt &amp;lt;dbl&amp;gt;, qsec &amp;lt;dbl&amp;gt;, vs &amp;lt;dbl&amp;gt;, am &amp;lt;dbl&amp;gt;, gear &amp;lt;dbl&amp;gt;,&lt;/span>
&lt;span class="c1">#&amp;gt; # carb &amp;lt;dbl&amp;gt;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>
&lt;a href="https://dplyr.tidyverse.org/reference/group_map.html" target="_blank" rel="noopener">group_map()&lt;/a> and
&lt;a href="https://dplyr.tidyverse.org/reference/group_map.html" target="_blank" rel="noopener">group_modify()&lt;/a>
benefit from this in the edge case where there are no groups.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">mtcars&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_by&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cyl&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">filter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">hp&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_map&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">~&lt;/span>&lt;span class="n">.x&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; list()&lt;/span>
&lt;span class="c1">#&amp;gt; attr(,&amp;#34;ptype&amp;#34;)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 0 x 10&lt;/span>
&lt;span class="c1">#&amp;gt; # … with 10 variables: mpg &amp;lt;dbl&amp;gt;, disp &amp;lt;dbl&amp;gt;, hp &amp;lt;dbl&amp;gt;, drat &amp;lt;dbl&amp;gt;,&lt;/span>
&lt;span class="c1">#&amp;gt; # wt &amp;lt;dbl&amp;gt;, qsec &amp;lt;dbl&amp;gt;, vs &amp;lt;dbl&amp;gt;, am &amp;lt;dbl&amp;gt;, gear &amp;lt;dbl&amp;gt;, carb &amp;lt;dbl&amp;gt;&lt;/span>
&lt;span class="n">mtcars&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_by&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cyl&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">filter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">hp&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_modify&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">~&lt;/span>&lt;span class="n">.x&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 0 x 11&lt;/span>
&lt;span class="c1">#&amp;gt; # Groups: cyl [0]&lt;/span>
&lt;span class="c1">#&amp;gt; # … with 11 variables: cyl &amp;lt;dbl&amp;gt;, mpg &amp;lt;dbl&amp;gt;, disp &amp;lt;dbl&amp;gt;, hp &amp;lt;dbl&amp;gt;,&lt;/span>
&lt;span class="c1">#&amp;gt; # drat &amp;lt;dbl&amp;gt;, wt &amp;lt;dbl&amp;gt;, qsec &amp;lt;dbl&amp;gt;, vs &amp;lt;dbl&amp;gt;, am &amp;lt;dbl&amp;gt;, gear &amp;lt;dbl&amp;gt;,&lt;/span>
&lt;span class="c1">#&amp;gt; # carb &amp;lt;dbl&amp;gt;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;h2 id="thanks">Thanks
&lt;a href="#thanks">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Thanks to all contributors for this release.&lt;/p>
&lt;p>
&lt;a href="https://github.com/abirasathiy" target="_blank" rel="noopener">@abirasathiy&lt;/a>,
&lt;a href="https://github.com/ajkroeg" target="_blank" rel="noopener">@ajkroeg&lt;/a>,
&lt;a href="https://github.com/alejandroschuler" target="_blank" rel="noopener">@alejandroschuler&lt;/a>,
&lt;a href="https://github.com/anuj2054" target="_blank" rel="noopener">@anuj2054&lt;/a>,
&lt;a href="https://github.com/arider2" target="_blank" rel="noopener">@arider2&lt;/a>,
&lt;a href="https://github.com/arielfuentes" target="_blank" rel="noopener">@arielfuentes&lt;/a>,
&lt;a href="https://github.com/artidata" target="_blank" rel="noopener">@artidata&lt;/a>,
&lt;a href="https://github.com/BenPVD" target="_blank" rel="noopener">@BenPVD&lt;/a>,
&lt;a href="https://github.com/bkmontgom" target="_blank" rel="noopener">@bkmontgom&lt;/a>,
&lt;a href="https://github.com/brodieG" target="_blank" rel="noopener">@brodieG&lt;/a>,
&lt;a href="https://github.com/cderv" target="_blank" rel="noopener">@cderv&lt;/a>,
&lt;a href="https://github.com/clanker" target="_blank" rel="noopener">@clanker&lt;/a>,
&lt;a href="https://github.com/clemenshug" target="_blank" rel="noopener">@clemenshug&lt;/a>,
&lt;a href="https://github.com/CSheehan1" target="_blank" rel="noopener">@CSheehan1&lt;/a>,
&lt;a href="https://github.com/danielecook" target="_blank" rel="noopener">@danielecook&lt;/a>,
&lt;a href="https://github.com/dannyparsons" target="_blank" rel="noopener">@dannyparsons&lt;/a>,
&lt;a href="https://github.com/daskandalis" target="_blank" rel="noopener">@daskandalis&lt;/a>,
&lt;a href="https://github.com/davidbaniadam" target="_blank" rel="noopener">@davidbaniadam&lt;/a>,
&lt;a href="https://github.com/DavisVaughan" target="_blank" rel="noopener">@DavisVaughan&lt;/a>,
&lt;a href="https://github.com/deliciouslytyped" target="_blank" rel="noopener">@deliciouslytyped&lt;/a>,
&lt;a href="https://github.com/earowang" target="_blank" rel="noopener">@earowang&lt;/a>,
&lt;a href="https://github.com/fkatharina" target="_blank" rel="noopener">@fkatharina&lt;/a>,
&lt;a href="https://github.com/hadley" target="_blank" rel="noopener">@hadley&lt;/a>,
&lt;a href="https://github.com/Hardervidertsie" target="_blank" rel="noopener">@Hardervidertsie&lt;/a>,
&lt;a href="https://github.com/iago-pssjd" target="_blank" rel="noopener">@iago-pssjd&lt;/a>,
&lt;a href="https://github.com/IndrajeetPatil" target="_blank" rel="noopener">@IndrajeetPatil&lt;/a>,
&lt;a href="https://github.com/jackdolgin" target="_blank" rel="noopener">@jackdolgin&lt;/a>,
&lt;a href="https://github.com/jangorecki" target="_blank" rel="noopener">@jangorecki&lt;/a>,
&lt;a href="https://github.com/jimhester" target="_blank" rel="noopener">@jimhester&lt;/a>,
&lt;a href="https://github.com/jjesusfilho" target="_blank" rel="noopener">@jjesusfilho&lt;/a>,
&lt;a href="https://github.com/jonjhitchcock" target="_blank" rel="noopener">@jonjhitchcock&lt;/a>,
&lt;a href="https://github.com/jxu" target="_blank" rel="noopener">@jxu&lt;/a>,
&lt;a href="https://github.com/krlmlr" target="_blank" rel="noopener">@krlmlr&lt;/a>,
&lt;a href="https://github.com/laresbernardo" target="_blank" rel="noopener">@laresbernardo&lt;/a>,
&lt;a href="https://github.com/lionel-" target="_blank" rel="noopener">@lionel-&lt;/a>,
&lt;a href="https://github.com/LukeGoodsell" target="_blank" rel="noopener">@LukeGoodsell&lt;/a>,
&lt;a href="https://github.com/madmark81" target="_blank" rel="noopener">@madmark81&lt;/a>,
&lt;a href="https://github.com/MarkusBerroth" target="_blank" rel="noopener">@MarkusBerroth&lt;/a>,
&lt;a href="https://github.com/matheus-donato" target="_blank" rel="noopener">@matheus-donato&lt;/a>,
&lt;a href="https://github.com/mattfidler" target="_blank" rel="noopener">@mattfidler&lt;/a>,
&lt;a href="https://github.com/MatthieuStigler" target="_blank" rel="noopener">@MatthieuStigler&lt;/a>,
&lt;a href="https://github.com/md0u80c9" target="_blank" rel="noopener">@md0u80c9&lt;/a>,
&lt;a href="https://github.com/michaelhogersosis" target="_blank" rel="noopener">@michaelhogersosis&lt;/a>,
&lt;a href="https://github.com/MikeJohnPage" target="_blank" rel="noopener">@MikeJohnPage&lt;/a>,
&lt;a href="https://github.com/MJL9588" target="_blank" rel="noopener">@MJL9588&lt;/a>,
&lt;a href="https://github.com/moodymudskipper" target="_blank" rel="noopener">@moodymudskipper&lt;/a>,
&lt;a href="https://github.com/mwillumz" target="_blank" rel="noopener">@mwillumz&lt;/a>,
&lt;a href="https://github.com/Nelson-Gon" target="_blank" rel="noopener">@Nelson-Gon&lt;/a>,
&lt;a href="https://github.com/qdread" target="_blank" rel="noopener">@qdread&lt;/a>,
&lt;a href="https://github.com/randomgambit" target="_blank" rel="noopener">@randomgambit&lt;/a>,
&lt;a href="https://github.com/rcorty" target="_blank" rel="noopener">@rcorty&lt;/a>,
&lt;a href="https://github.com/romainfrancois" target="_blank" rel="noopener">@romainfrancois&lt;/a>,
&lt;a href="https://github.com/romatik" target="_blank" rel="noopener">@romatik&lt;/a>,
&lt;a href="https://github.com/spressi" target="_blank" rel="noopener">@spressi&lt;/a>,
&lt;a href="https://github.com/sstoeckl" target="_blank" rel="noopener">@sstoeckl&lt;/a>,
&lt;a href="https://github.com/stephLH" target="_blank" rel="noopener">@stephLH&lt;/a>,
&lt;a href="https://github.com/urskalbitzer" target="_blank" rel="noopener">@urskalbitzer&lt;/a>,
&lt;a href="https://github.com/vpanfilov" target="_blank" rel="noopener">@vpanfilov&lt;/a>, and
&lt;a href="https://github.com/ZahraEconomist" target="_blank" rel="noopener">@ZahraEconomist&lt;/a>.&lt;/p></description></item><item><title>ggplot2 3.2.0</title><link>https://www.tidyverse.org/blog/2019/06/ggplot2-3-2-0/</link><pubDate>Sun, 16 Jun 2019 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2019/06/ggplot2-3-2-0/</guid><description>&lt;p>We&amp;rsquo;re thrilled to announce the release of
&lt;a href="https://ggplot2.tidyverse.org" target="_blank" rel="noopener">ggplot2 3.2.0&lt;/a> on CRAN. ggplot2 is a system for declaratively creating graphics, based on The Grammar of Graphics. You provide the data, tell ggplot2 how to map variables to aesthetics, what graphical primitives to use, and it takes care of the details.&lt;/p>
&lt;p>The 3.2.0 release is a minor release which focuses on performance improvements, but also includes a few new features and a range of bug fixes. There are no breaking changes in this release, though a few changes may affect the visual appearance of plots in minor ways, noted below. Further, there are a few changes that developers of extension packages may need to take into account, but which won&amp;rsquo;t affect regular users. For a full overview of the changes, please see the
&lt;a href="https://ggplot2.tidyverse.org/news/index.html" target="_blank" rel="noopener">release notes&lt;/a>.&lt;/p>
&lt;p>This release also includes a range of contributions made during our tidyverse developer day in Austin, many from first-time contributors. We hope these contributors have been inspired to continue taking part in the development of ggplot2.&lt;/p>
&lt;p>Lastly, this release also sees the entrance of Hiroaki Yutani (&lt;em>yutannihilation&lt;/em> on both
&lt;a href="https://github.com/yutannihilation" target="_blank" rel="noopener">Github&lt;/a> and
&lt;a href="https://twitter.com/yutannihilat_en" target="_blank" rel="noopener">Twitter&lt;/a>) into the core developer team. Hiroaki has been amazing in tackling large and small issues, and we are very lucky to have him.&lt;/p>
&lt;h2 id="performance">Performance
&lt;a href="#performance">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>A large part of this release relates to internal changes intended to speed up ggplot2. Most of these are general and will affect the rendering speed of all the plots you make, but there has also been a specific focus on
&lt;a href="https://ggplot2.tidyverse.org/reference/ggsf.html" target="_blank" rel="noopener">&lt;code>geom_sf()&lt;/code>&lt;/a>. This is all part of a larger effort to make plotting in R more performant, and also includes changes in
&lt;a href="https://gtable.r-lib.org" target="_blank" rel="noopener">gtable&lt;/a>,
&lt;a href="http://r-spatial.github.io/sf/" target="_blank" rel="noopener">sf&lt;/a>, and R itself. Make sure to use the latest version of all of these packages to get the full benefit of the improvements.&lt;/p>
&lt;h3 id="geom_sf">geom_sf
&lt;a href="#geom_sf">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>While most changes are general, &lt;code>geom_sf()&lt;/code> has received special attention. Most of this comes down to how &lt;code>geom_sf()&lt;/code> converted its input to grobs, which was done row by row. This meant that plotting 10,000 &lt;code>ST_POINT&lt;/code> objects would create 10,000 point grobs instead of a single grob containing 10,000 points. The same was true for all other data types. With the new release, ggplot2 will try to pack all objects into a single grob, which is possible when all objects are of the same type (&lt;code>MULTI*&lt;/code> types can be mixed with scalar types). Packing polygons into a single grob is only possible with R 3.6.0 and upwards, but all other types are backwards compatible with older versions of R. If the data contains a mix of types, ggplot2 will fall back to creating a grob for each row, but this is a much less frequent situation, and can usually be remedied by creating multiple sf layers instead. The other big performance bottleneck in plotting sf data was the normalization of the coordinates. As sf stores its data in nested lists, the standard vectorization in R doesn&amp;rsquo;t apply, which led to much worse performance compared to normalizing data stored in standard data frame format. The latest release of sf includes optimized functions for these operations implemented in C which ggplot2 now uses, so plotting performance has improved immensely.&lt;/p>
&lt;h2 id="new-features">New features
&lt;a href="#new-features">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>With this release, ggplot2 gains the ability to plot polygons with holes (only in R 3.6 and later). Rather than providing a new geom, the functionality is built into
&lt;a href="https://ggplot2.tidyverse.org/reference/geom_polygon.html" target="_blank" rel="noopener">&lt;code>geom_polygon()&lt;/code>&lt;/a> through a new &lt;code>subgroup&lt;/code> aesthetic. Much as the &lt;code>group&lt;/code> aesthetic separates polygons in the data, the &lt;code>subgroup&lt;/code> aesthetic separates parts of each polygon. The first occurring subgroup should always be the outer ring of the polygon and any subsequent subgroup will describe holes in this (or, potentially, polygons within the holes and so on). There will not be any checks performed on the position of the subgroups, so it is the responsibility of the user to make sure they are inside the outer ring.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ggplot2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">tibble&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">radians&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">seq&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">2&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="kc">pi&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">length.out&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">101&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="n">[&lt;/span>&lt;span class="m">-1&lt;/span>&lt;span class="n">]&lt;/span>
&lt;span class="n">circle&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">tibble&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">cos&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">radians&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="nf">cos&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">radians&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="m">0.5&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">sin&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">radians&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="nf">sin&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">radians&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="m">0.5&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="n">subgroup&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">rep&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">2&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">each&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">100&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">circle&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_polygon&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">subgroup&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">subgroup&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="n">fill&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;firebrick&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">colour&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;black&amp;#34;&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2019-03-ggplot2-3-2-0_files/figure-html/unnamed-chunk-1-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;p>The other bigger new feature is the ability to modify the guide representation
of a layer through a new &lt;code>key_glyph&lt;/code> argument in all geoms. While the defaults
are often fine, there are situations where a different look serves the
visualisation:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">economics&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">date&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">psavert&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">color&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;savings rate&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_line&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">key_glyph&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;timeseries&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2019-03-ggplot2-3-2-0_files/figure-html/unnamed-chunk-2-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;p>&lt;code>geom_rug&lt;/code> has seen a range of improvements to give users more control over the appearance of the rug lines. The length of the rug lines can now be controlled and it is further possible to specify that they should be placed outside of the plotting region:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mtcars&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">wt&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">mpg&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_point&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_rug&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sides&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;tr&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">length&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">unit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;mm&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">outside&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">TRUE&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="c1"># Need to turn clipping off if rug is outside plot area&lt;/span>
&lt;span class="nf">coord_cartesian&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">clip&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;off&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2019-03-ggplot2-3-2-0_files/figure-html/unnamed-chunk-3-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;p>Aesthetics will now accept a function returning &lt;code>NULL&lt;/code>, and treat it as setting the aesthetic to &lt;code>NULL&lt;/code>. This can make it easier to program with ggplot2 e.g. by catching errors from non-existing variables:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">df&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">data.frame&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="m">10&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="m">10&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">wrap&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">...&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">tryCatch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">...&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">error&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kc">NULL&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">colour&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">wrap&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">no_such_column&lt;/span>&lt;span class="p">)))&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_point&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2019-03-ggplot2-3-2-0_files/figure-html/unnamed-chunk-4-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;p>Lastly,
&lt;a href="https://ggplot2.tidyverse.org/reference/stat_function.html" target="_blank" rel="noopener">&lt;code>stat_function()&lt;/code>&lt;/a> gains the ability to accept purrr-style lambda functions. The use of the formula notation for creating lambda functions has become widespread, and it is only natural that ggplot2 accepts it as well:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">df&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">data.frame&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="m">10&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="m">10&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="n">^2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_point&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">stat_function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fun&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">~&lt;/span> &lt;span class="n">.x^2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2019-03-ggplot2-3-2-0_files/figure-html/unnamed-chunk-5-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;h2 id="minor-fixes-and-improvements">Minor fixes and improvements
&lt;a href="#minor-fixes-and-improvements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>
&lt;a href="https://ggplot2.tidyverse.org/reference/ggsf.html" target="_blank" rel="noopener">&lt;code>coord_sf&lt;/code>&lt;/a> now behaves the same as the other coords in relation to how it draws grid lines. This means that the aesthetics of the grid matches that of the other coordinate systems, and that it can be turned off through the theming system. You may see slight visual changes when using &lt;code>geom_sf()&lt;/code> as the default grid lines were slightly thicker in &lt;code>coord_sf()&lt;/code> prior to this change.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sf&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; Linking to GEOS 3.6.1, GDAL 2.1.3, PROJ 4.9.3&lt;/span>
&lt;span class="n">nc&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">st_read&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">system.file&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;gpkg/nc.gpkg&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">package&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;sf&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">quiet&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">TRUE&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nc&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_sf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">nc&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fill&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">AREA&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">theme_void&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2019-03-ggplot2-3-2-0_files/figure-html/unnamed-chunk-6-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;p>The automatic naming of scales has been refined and no longer contains back-ticks when the scale name is based on a complex aesthetic expression (e.g. &lt;code>aes(x = a + b)&lt;/code>). Again, this may result in slight changes to the visual appearance of plots, but only on a very superficial level.&lt;/p>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Thank you to the 171 people who who contributed issues, code and comments to this release:
&lt;a href="https://github.com/abl0719" target="_blank" rel="noopener">@abl0719&lt;/a>,
&lt;a href="https://github.com/agila5" target="_blank" rel="noopener">@agila5&lt;/a>,
&lt;a href="https://github.com/ahmohamed" target="_blank" rel="noopener">@ahmohamed&lt;/a>,
&lt;a href="https://github.com/amysheep" target="_blank" rel="noopener">@amysheep&lt;/a>,
&lt;a href="https://github.com/andhamel" target="_blank" rel="noopener">@andhamel&lt;/a>,
&lt;a href="https://github.com/anthonytw" target="_blank" rel="noopener">@anthonytw&lt;/a>,
&lt;a href="https://github.com/Atomizer15" target="_blank" rel="noopener">@Atomizer15&lt;/a>,
&lt;a href="https://github.com/atusy" target="_blank" rel="noopener">@atusy&lt;/a>,
&lt;a href="https://github.com/baderstine" target="_blank" rel="noopener">@baderstine&lt;/a>,
&lt;a href="https://github.com/bakaburg1" target="_blank" rel="noopener">@bakaburg1&lt;/a>,
&lt;a href="https://github.com/batpigandme" target="_blank" rel="noopener">@batpigandme&lt;/a>,
&lt;a href="https://github.com/bdschwartzkopf" target="_blank" rel="noopener">@bdschwartzkopf&lt;/a>,
&lt;a href="https://github.com/beckymaust" target="_blank" rel="noopener">@beckymaust&lt;/a>,
&lt;a href="https://github.com/behrman" target="_blank" rel="noopener">@behrman&lt;/a>,
&lt;a href="https://github.com/bfgray3" target="_blank" rel="noopener">@bfgray3&lt;/a>,
&lt;a href="https://github.com/billdenney" target="_blank" rel="noopener">@billdenney&lt;/a>,
&lt;a href="https://github.com/Bisaloo" target="_blank" rel="noopener">@Bisaloo&lt;/a>,
&lt;a href="https://github.com/bjreisman" target="_blank" rel="noopener">@bjreisman&lt;/a>,
&lt;a href="https://github.com/blueskypie" target="_blank" rel="noopener">@blueskypie&lt;/a>,
&lt;a href="https://github.com/brfitzpatrick" target="_blank" rel="noopener">@brfitzpatrick&lt;/a>,
&lt;a href="https://github.com/brianwdavis" target="_blank" rel="noopener">@brianwdavis&lt;/a>,
&lt;a href="https://github.com/brodieG" target="_blank" rel="noopener">@brodieG&lt;/a>,
&lt;a href="https://github.com/caayala" target="_blank" rel="noopener">@caayala&lt;/a>,
&lt;a href="https://github.com/cderv" target="_blank" rel="noopener">@cderv&lt;/a>,
&lt;a href="https://github.com/chambox" target="_blank" rel="noopener">@chambox&lt;/a>,
&lt;a href="https://github.com/clairemcwhite" target="_blank" rel="noopener">@clairemcwhite&lt;/a>,
&lt;a href="https://github.com/clauswilke" target="_blank" rel="noopener">@clauswilke&lt;/a>,
&lt;a href="https://github.com/codetrainee" target="_blank" rel="noopener">@codetrainee&lt;/a>,
&lt;a href="https://github.com/ColinFay" target="_blank" rel="noopener">@ColinFay&lt;/a>,
&lt;a href="https://github.com/connorlewis" target="_blank" rel="noopener">@connorlewis&lt;/a>,
&lt;a href="https://github.com/coolbutuseless" target="_blank" rel="noopener">@coolbutuseless&lt;/a>,
&lt;a href="https://github.com/courtiol" target="_blank" rel="noopener">@courtiol&lt;/a>,
&lt;a href="https://github.com/cschwarz-stat-sfu-ca" target="_blank" rel="noopener">@cschwarz-stat-sfu-ca&lt;/a>,
&lt;a href="https://github.com/cystein" target="_blank" rel="noopener">@cystein&lt;/a>,
&lt;a href="https://github.com/dan-booth" target="_blank" rel="noopener">@dan-booth&lt;/a>,
&lt;a href="https://github.com/daniel-wells" target="_blank" rel="noopener">@daniel-wells&lt;/a>,
&lt;a href="https://github.com/DanielReedOcean" target="_blank" rel="noopener">@DanielReedOcean&lt;/a>,
&lt;a href="https://github.com/danielsjf" target="_blank" rel="noopener">@danielsjf&lt;/a>,
&lt;a href="https://github.com/daranzolin" target="_blank" rel="noopener">@daranzolin&lt;/a>,
&lt;a href="https://github.com/dariyasydykova" target="_blank" rel="noopener">@dariyasydykova&lt;/a>,
&lt;a href="https://github.com/dempseynoel" target="_blank" rel="noopener">@dempseynoel&lt;/a>,
&lt;a href="https://github.com/dipterix" target="_blank" rel="noopener">@dipterix&lt;/a>,
&lt;a href="https://github.com/dirkschumacher" target="_blank" rel="noopener">@dirkschumacher&lt;/a>,
&lt;a href="https://github.com/dkahle" target="_blank" rel="noopener">@dkahle&lt;/a>,
&lt;a href="https://github.com/dominicroye" target="_blank" rel="noopener">@dominicroye&lt;/a>,
&lt;a href="https://github.com/dongzhuoer" target="_blank" rel="noopener">@dongzhuoer&lt;/a>,
&lt;a href="https://github.com/dpseidel" target="_blank" rel="noopener">@dpseidel&lt;/a>,
&lt;a href="https://github.com/dvcv" target="_blank" rel="noopener">@dvcv&lt;/a>,
&lt;a href="https://github.com/efehandanisman" target="_blank" rel="noopener">@efehandanisman&lt;/a>,
&lt;a href="https://github.com/Eisit" target="_blank" rel="noopener">@Eisit&lt;/a>,
&lt;a href="https://github.com/Eli-Berkow" target="_blank" rel="noopener">@Eli-Berkow&lt;/a>,
&lt;a href="https://github.com/eliocamp" target="_blank" rel="noopener">@eliocamp&lt;/a>,
&lt;a href="https://github.com/ellessenne" target="_blank" rel="noopener">@ellessenne&lt;/a>,
&lt;a href="https://github.com/eoppe1022" target="_blank" rel="noopener">@eoppe1022&lt;/a>,
&lt;a href="https://github.com/felipegerard" target="_blank" rel="noopener">@felipegerard&lt;/a>,
&lt;a href="https://github.com/fereshtehizadi" target="_blank" rel="noopener">@fereshtehizadi&lt;/a>,
&lt;a href="https://github.com/flying-sheep" target="_blank" rel="noopener">@flying-sheep&lt;/a>,
&lt;a href="https://github.com/fmmattioni" target="_blank" rel="noopener">@fmmattioni&lt;/a>,
&lt;a href="https://github.com/foehnwind" target="_blank" rel="noopener">@foehnwind&lt;/a>,
&lt;a href="https://github.com/fostvedt" target="_blank" rel="noopener">@fostvedt&lt;/a>,
&lt;a href="https://github.com/gagnagaman" target="_blank" rel="noopener">@gagnagaman&lt;/a>,
&lt;a href="https://github.com/gangstertiny" target="_blank" rel="noopener">@gangstertiny&lt;/a>,
&lt;a href="https://github.com/GBuchanon" target="_blank" rel="noopener">@GBuchanon&lt;/a>,
&lt;a href="https://github.com/gdkrmr" target="_blank" rel="noopener">@gdkrmr&lt;/a>,
&lt;a href="https://github.com/gdmcdonald" target="_blank" rel="noopener">@gdmcdonald&lt;/a>,
&lt;a href="https://github.com/ghost" target="_blank" rel="noopener">@ghost&lt;/a>,
&lt;a href="https://github.com/gibran-ali" target="_blank" rel="noopener">@gibran-ali&lt;/a>,
&lt;a href="https://github.com/hadley" target="_blank" rel="noopener">@hadley&lt;/a>,
&lt;a href="https://github.com/HaoLi111" target="_blank" rel="noopener">@HaoLi111&lt;/a>,
&lt;a href="https://github.com/has2k1" target="_blank" rel="noopener">@has2k1&lt;/a>,
&lt;a href="https://github.com/heavywatal" target="_blank" rel="noopener">@heavywatal&lt;/a>,
&lt;a href="https://github.com/Henrik-P" target="_blank" rel="noopener">@Henrik-P&lt;/a>,
&lt;a href="https://github.com/HenrikBengtsson" target="_blank" rel="noopener">@HenrikBengtsson&lt;/a>,
&lt;a href="https://github.com/hlendway" target="_blank" rel="noopener">@hlendway&lt;/a>,
&lt;a href="https://github.com/hoasxyz" target="_blank" rel="noopener">@hoasxyz&lt;/a>,
&lt;a href="https://github.com/hwt" target="_blank" rel="noopener">@hwt&lt;/a>,
&lt;a href="https://github.com/hyiltiz" target="_blank" rel="noopener">@hyiltiz&lt;/a>,
&lt;a href="https://github.com/idavydov" target="_blank" rel="noopener">@idavydov&lt;/a>,
&lt;a href="https://github.com/Ilia-Kosenkov" target="_blank" rel="noopener">@Ilia-Kosenkov&lt;/a>,
&lt;a href="https://github.com/IndrajeetPatil" target="_blank" rel="noopener">@IndrajeetPatil&lt;/a>,
&lt;a href="https://github.com/ismayc" target="_blank" rel="noopener">@ismayc&lt;/a>,
&lt;a href="https://github.com/JamesCuster" target="_blank" rel="noopener">@JamesCuster&lt;/a>,
&lt;a href="https://github.com/jarauh" target="_blank" rel="noopener">@jarauh&lt;/a>,
&lt;a href="https://github.com/JayVii" target="_blank" rel="noopener">@JayVii&lt;/a>,
&lt;a href="https://github.com/jmarshallnz" target="_blank" rel="noopener">@jmarshallnz&lt;/a>,
&lt;a href="https://github.com/JohnMount" target="_blank" rel="noopener">@JohnMount&lt;/a>,
&lt;a href="https://github.com/jonoyuan" target="_blank" rel="noopener">@jonoyuan&lt;/a>,
&lt;a href="https://github.com/jprice80" target="_blank" rel="noopener">@jprice80&lt;/a>,
&lt;a href="https://github.com/jpritikin" target="_blank" rel="noopener">@jpritikin&lt;/a>,
&lt;a href="https://github.com/jrnold" target="_blank" rel="noopener">@jrnold&lt;/a>,
&lt;a href="https://github.com/jsekamane" target="_blank" rel="noopener">@jsekamane&lt;/a>,
&lt;a href="https://github.com/jtelleria" target="_blank" rel="noopener">@jtelleria&lt;/a>,
&lt;a href="https://github.com/jugularvein" target="_blank" rel="noopener">@jugularvein&lt;/a>,
&lt;a href="https://github.com/karawoo" target="_blank" rel="noopener">@karawoo&lt;/a>,
&lt;a href="https://github.com/Katiedaisey" target="_blank" rel="noopener">@Katiedaisey&lt;/a>,
&lt;a href="https://github.com/katossky" target="_blank" rel="noopener">@katossky&lt;/a>,
&lt;a href="https://github.com/kdarras" target="_blank" rel="noopener">@kdarras&lt;/a>,
&lt;a href="https://github.com/kendonB" target="_blank" rel="noopener">@kendonB&lt;/a>,
&lt;a href="https://github.com/kilterwind" target="_blank" rel="noopener">@kilterwind&lt;/a>,
&lt;a href="https://github.com/LDalby" target="_blank" rel="noopener">@LDalby&lt;/a>,
&lt;a href="https://github.com/linzi-sg" target="_blank" rel="noopener">@linzi-sg&lt;/a>,
&lt;a href="https://github.com/lionel-" target="_blank" rel="noopener">@lionel-&lt;/a>,
&lt;a href="https://github.com/llendway" target="_blank" rel="noopener">@llendway&lt;/a>,
&lt;a href="https://github.com/llrs" target="_blank" rel="noopener">@llrs&lt;/a>,
&lt;a href="https://github.com/lpantano" target="_blank" rel="noopener">@lpantano&lt;/a>,
&lt;a href="https://github.com/LuffyLuffy" target="_blank" rel="noopener">@LuffyLuffy&lt;/a>,
&lt;a href="https://github.com/lwjohnst86" target="_blank" rel="noopener">@lwjohnst86&lt;/a>,
&lt;a href="https://github.com/lz1nwm" target="_blank" rel="noopener">@lz1nwm&lt;/a>,
&lt;a href="https://github.com/m-macaskill" target="_blank" rel="noopener">@m-macaskill&lt;/a>,
&lt;a href="https://github.com/malcolmbarrett" target="_blank" rel="noopener">@malcolmbarrett&lt;/a>,
&lt;a href="https://github.com/martin-ueding" target="_blank" rel="noopener">@martin-ueding&lt;/a>,
&lt;a href="https://github.com/matthewParksViome" target="_blank" rel="noopener">@matthewParksViome&lt;/a>,
&lt;a href="https://github.com/maxheld83" target="_blank" rel="noopener">@maxheld83&lt;/a>,
&lt;a href="https://github.com/MaximOtt" target="_blank" rel="noopener">@MaximOtt&lt;/a>,
&lt;a href="https://github.com/mbertolacci" target="_blank" rel="noopener">@mbertolacci&lt;/a>,
&lt;a href="https://github.com/mcguinlu" target="_blank" rel="noopener">@mcguinlu&lt;/a>,
&lt;a href="https://github.com/MCM-Math" target="_blank" rel="noopener">@MCM-Math&lt;/a>,
&lt;a href="https://github.com/miguelmorin" target="_blank" rel="noopener">@miguelmorin&lt;/a>,
&lt;a href="https://github.com/mine-cetinkaya-rundel" target="_blank" rel="noopener">@mine-cetinkaya-rundel&lt;/a>,
&lt;a href="https://github.com/mitchelloharawild" target="_blank" rel="noopener">@mitchelloharawild&lt;/a>,
&lt;a href="https://github.com/mluerig" target="_blank" rel="noopener">@mluerig&lt;/a>,
&lt;a href="https://github.com/moodymudskipper" target="_blank" rel="noopener">@moodymudskipper&lt;/a>,
&lt;a href="https://github.com/njtierney" target="_blank" rel="noopener">@njtierney&lt;/a>,
&lt;a href="https://github.com/noahmotion" target="_blank" rel="noopener">@noahmotion&lt;/a>,
&lt;a href="https://github.com/npjc" target="_blank" rel="noopener">@npjc&lt;/a>,
&lt;a href="https://github.com/oranwutang" target="_blank" rel="noopener">@oranwutang&lt;/a>,
&lt;a href="https://github.com/osorensen" target="_blank" rel="noopener">@osorensen&lt;/a>,
&lt;a href="https://github.com/pachamaltese" target="_blank" rel="noopener">@pachamaltese&lt;/a>,
&lt;a href="https://github.com/paleolimbot" target="_blank" rel="noopener">@paleolimbot&lt;/a>,
&lt;a href="https://github.com/PaulLantos" target="_blank" rel="noopener">@PaulLantos&lt;/a>,
&lt;a href="https://github.com/peterhurford" target="_blank" rel="noopener">@peterhurford&lt;/a>,
&lt;a href="https://github.com/phmarek" target="_blank" rel="noopener">@phmarek&lt;/a>,
&lt;a href="https://github.com/powerbilayeredmap" target="_blank" rel="noopener">@powerbilayeredmap&lt;/a>,
&lt;a href="https://github.com/ppanko" target="_blank" rel="noopener">@ppanko&lt;/a>,
&lt;a href="https://github.com/ptoche" target="_blank" rel="noopener">@ptoche&lt;/a>,
&lt;a href="https://github.com/puhachov" target="_blank" rel="noopener">@puhachov&lt;/a>,
&lt;a href="https://github.com/rajkstats" target="_blank" rel="noopener">@rajkstats&lt;/a>,
&lt;a href="https://github.com/richierocks" target="_blank" rel="noopener">@richierocks&lt;/a>,
&lt;a href="https://github.com/sabahzero" target="_blank" rel="noopener">@sabahzero&lt;/a>,
&lt;a href="https://github.com/sahilseth" target="_blank" rel="noopener">@sahilseth&lt;/a>,
&lt;a href="https://github.com/SavasAli" target="_blank" rel="noopener">@SavasAli&lt;/a>,
&lt;a href="https://github.com/sctyner" target="_blank" rel="noopener">@sctyner&lt;/a>,
&lt;a href="https://github.com/sebneus" target="_blank" rel="noopener">@sebneus&lt;/a>,
&lt;a href="https://github.com/shauyin520" target="_blank" rel="noopener">@shauyin520&lt;/a>,
&lt;a href="https://github.com/sjackman" target="_blank" rel="noopener">@sjackman&lt;/a>,
&lt;a href="https://github.com/skanskan" target="_blank" rel="noopener">@skanskan&lt;/a>,
&lt;a href="https://github.com/slowkow" target="_blank" rel="noopener">@slowkow&lt;/a>,
&lt;a href="https://github.com/smouksassi" target="_blank" rel="noopener">@smouksassi&lt;/a>,
&lt;a href="https://github.com/sn248" target="_blank" rel="noopener">@sn248&lt;/a>,
&lt;a href="https://github.com/sowla" target="_blank" rel="noopener">@sowla&lt;/a>,
&lt;a href="https://github.com/sschloss1" target="_blank" rel="noopener">@sschloss1&lt;/a>,
&lt;a href="https://github.com/StefanBRas" target="_blank" rel="noopener">@StefanBRas&lt;/a>,
&lt;a href="https://github.com/steffilazerte" target="_blank" rel="noopener">@steffilazerte&lt;/a>,
&lt;a href="https://github.com/tcastrosantos" target="_blank" rel="noopener">@tcastrosantos&lt;/a>,
&lt;a href="https://github.com/thomasp85" target="_blank" rel="noopener">@thomasp85&lt;/a>,
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>,
&lt;a href="https://github.com/Torvaney" target="_blank" rel="noopener">@Torvaney&lt;/a>,
&lt;a href="https://github.com/touala" target="_blank" rel="noopener">@touala&lt;/a>,
&lt;a href="https://github.com/tungmilan" target="_blank" rel="noopener">@tungmilan&lt;/a>,
&lt;a href="https://github.com/vanzanden" target="_blank" rel="noopener">@vanzanden&lt;/a>,
&lt;a href="https://github.com/vbuchhold" target="_blank" rel="noopener">@vbuchhold&lt;/a>,
&lt;a href="https://github.com/W-L" target="_blank" rel="noopener">@W-L&lt;/a>,
&lt;a href="https://github.com/wongjingping" target="_blank" rel="noopener">@wongjingping&lt;/a>,
&lt;a href="https://github.com/wrightaprilm" target="_blank" rel="noopener">@wrightaprilm&lt;/a>,
&lt;a href="https://github.com/x1o" target="_blank" rel="noopener">@x1o&lt;/a>,
&lt;a href="https://github.com/yosukefk" target="_blank" rel="noopener">@yosukefk&lt;/a>,
&lt;a href="https://github.com/yudong862" target="_blank" rel="noopener">@yudong862&lt;/a>,
&lt;a href="https://github.com/yutannihilation" target="_blank" rel="noopener">@yutannihilation&lt;/a>,
&lt;a href="https://github.com/zeehio" target="_blank" rel="noopener">@zeehio&lt;/a>,
&lt;a href="https://github.com/zlskidmore" target="_blank" rel="noopener">@zlskidmore&lt;/a>, and
&lt;a href="https://github.com/zuccaval" target="_blank" rel="noopener">@zuccaval&lt;/a>.&lt;/p></description></item><item><title>forcats 0.4.0</title><link>https://www.tidyverse.org/blog/2019/05/forcats-0-4-0/</link><pubDate>Fri, 10 May 2019 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2019/05/forcats-0-4-0/</guid><description>&lt;p>We are pleased to announce that
&lt;a href="http://forcats.tidyverse.org/" target="_blank" rel="noopener">forcats 0.4.0&lt;/a> is now on CRAN.
The forcats package provides a suite of useful tools that solve common problems with factors in R. This version benefited from the hard work of contributors new and old at our first
&lt;a href="https://www.tidyverse.org/articles/2018/11/tidyverse-developer-day-2019/" target="_blank" rel="noopener">tidyverse dev day&lt;/a>. For a complete set of changes, please see the
&lt;a href="https://github.com/tidyverse/forcats/releases/tag/v0.4.0" target="_blank" rel="noopener">release notes&lt;/a>.&lt;/p>
&lt;p>To install the latest version, run:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">install.packages&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;forcats&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>As always, attach the package with:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">forcats&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;h2 id="new-functions">New functions
&lt;a href="#new-functions">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>
&lt;a href="https://forcats.tidyverse.org/reference/fct_cross.html" target="_blank" rel="noopener">&lt;code>fct_cross()&lt;/code>&lt;/a> creates a new factor containing the combined levels from two or more input factors, similar to &lt;code>base::interaction()&lt;/code>.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">fruit&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">factor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;apple&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;kiwi&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;apple&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;apple&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="n">colour&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">factor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;green&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;green&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;red&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;green&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="nf">fct_cross&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fruit&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">colour&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; [1] apple:green kiwi:green apple:red apple:green&lt;/span>
&lt;span class="c1">#&amp;gt; Levels: apple:green apple:red kiwi:green&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>
&lt;a href="https://forcats.tidyverse.org/reference/fct_lump.html" target="_blank" rel="noopener">&lt;code>fct_lump_min()&lt;/code>&lt;/a> preserves levels that appear at least &lt;code>min&lt;/code> times (can also be used with the &lt;code>w&lt;/code> weighted argument).&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">x&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">factor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">letters&lt;/span>&lt;span class="nf">[rpois&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">50&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">3&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="n">]&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">fct_lump_min&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">min&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">10&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; [1] Other b Other b Other Other Other b Other Other b &lt;/span>
&lt;span class="c1">#&amp;gt; [12] Other Other Other b Other b Other Other b b Other&lt;/span>
&lt;span class="c1">#&amp;gt; [23] Other Other b b Other Other Other Other Other b Other&lt;/span>
&lt;span class="c1">#&amp;gt; [34] Other Other b Other Other Other Other Other Other Other Other&lt;/span>
&lt;span class="c1">#&amp;gt; [45] Other b Other b &lt;/span>
&lt;span class="c1">#&amp;gt; Levels: b Other&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>
&lt;a href="https://forcats.tidyverse.org/reference/fct_match.html" target="_blank" rel="noopener">&lt;code>fct_match()&lt;/code>&lt;/a> tests for the presence of levels in a factor, providing a safer alternative to &lt;code>%in%&lt;/code> by throwing an error when there are unexpected levels.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">table&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">fct_match&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">gss_cat&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="n">marital&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Married&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Divorced&amp;#34;&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;span class="c1">#&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; FALSE TRUE &lt;/span>
&lt;span class="c1">#&amp;gt; 7983 13500&lt;/span>
&lt;span class="nf">table&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">gss_cat&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="n">marital&lt;/span> &lt;span class="o">%in%&lt;/span> &lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Maried&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Davorced&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1">#&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; FALSE &lt;/span>
&lt;span class="c1">#&amp;gt; 21483&lt;/span>
&lt;span class="nf">table&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">fct_match&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">gss_cat&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="n">marital&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Maried&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;Davorced&amp;#34;&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;span class="c1">#&amp;gt; Error: Levels not present in factor: &amp;#34;Maried&amp;#34;, &amp;#34;Davorced&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;h2 id="other-improvements">Other improvements
&lt;a href="#other-improvements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;ul>
&lt;li>
&lt;p>
&lt;a href="https://forcats.tidyverse.org/reference/fct_relevel.html" target="_blank" rel="noopener">&lt;code>fct_relevel()&lt;/code>&lt;/a> can now relevel factors using a function that is passed the current levels.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">f&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">factor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;a&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;b&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;c&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;d&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">levels&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;b&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;c&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;d&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;a&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="nf">fct_relevel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">f&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">sort&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; [1] a b c d&lt;/span>
&lt;span class="c1">#&amp;gt; Levels: a b c d&lt;/span>
&lt;span class="nf">fct_relevel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">f&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">rev&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; [1] a b c d&lt;/span>
&lt;span class="c1">#&amp;gt; Levels: a d c b&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>
&lt;a href="https://forcats.tidyverse.org/dev/reference/as_factor.html" target="_blank" rel="noopener">&lt;code>as_factor()&lt;/code>&lt;/a> now has a numeric method which orders factors in numeric order, unlike the other methods which default to order of appearance.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">y&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;1.1&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;11&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;2.2&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;22&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">as_factor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; [1] 1.1 11 2.2 22 &lt;/span>
&lt;span class="c1">#&amp;gt; Levels: 1.1 11 2.2 22&lt;/span>
&lt;span class="n">z&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">as.numeric&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">as_factor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">z&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; [1] 1.1 11 2.2 22 &lt;/span>
&lt;span class="c1">#&amp;gt; Levels: 1.1 2.2 11 22&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>
&lt;a href="https://forcats.tidyverse.org/dev/reference/fct_inorder.html" target="_blank" rel="noopener">&lt;code>fct_inseq()&lt;/code>&lt;/a> reorders labels numerically, when possible.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>Thanks to Emily Robinson, forcats also has a new
&lt;a href="https://forcats.tidyverse.org/articles/forcats.html" target="_blank" rel="noopener">introductory vignette&lt;/a>.&lt;/p>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>We&amp;rsquo;re grateful for the 35 people who contributed to this release:
&lt;a href="https://github.com/ahaque-utd" target="_blank" rel="noopener">@ahaque-utd&lt;/a>,
&lt;a href="https://github.com/AmeliaMN" target="_blank" rel="noopener">@AmeliaMN&lt;/a>,
&lt;a href="https://github.com/ashiklom" target="_blank" rel="noopener">@ashiklom&lt;/a>,
&lt;a href="https://github.com/batpigandme" target="_blank" rel="noopener">@batpigandme&lt;/a>,
&lt;a href="https://github.com/billdenney" target="_blank" rel="noopener">@billdenney&lt;/a>,
&lt;a href="https://github.com/brianwdavis" target="_blank" rel="noopener">@brianwdavis&lt;/a>,
&lt;a href="https://github.com/corybrunson" target="_blank" rel="noopener">@corybrunson&lt;/a>,
&lt;a href="https://github.com/dalewsteele" target="_blank" rel="noopener">@dalewsteele&lt;/a>,
&lt;a href="https://github.com/ewenharrison" target="_blank" rel="noopener">@ewenharrison&lt;/a>,
&lt;a href="https://github.com/grayskripko" target="_blank" rel="noopener">@grayskripko&lt;/a>,
&lt;a href="https://github.com/gtm19" target="_blank" rel="noopener">@gtm19&lt;/a>,
&lt;a href="https://github.com/hack-r" target="_blank" rel="noopener">@hack-r&lt;/a>,
&lt;a href="https://github.com/hadley" target="_blank" rel="noopener">@hadley&lt;/a>,
&lt;a href="https://github.com/huftis" target="_blank" rel="noopener">@huftis&lt;/a>,
&lt;a href="https://github.com/isteves" target="_blank" rel="noopener">@isteves&lt;/a>,
&lt;a href="https://github.com/jimhester" target="_blank" rel="noopener">@jimhester&lt;/a>,
&lt;a href="https://github.com/jonocarroll" target="_blank" rel="noopener">@jonocarroll&lt;/a>,
&lt;a href="https://github.com/jrosen48" target="_blank" rel="noopener">@jrosen48&lt;/a>,
&lt;a href="https://github.com/jthomasmock" target="_blank" rel="noopener">@jthomasmock&lt;/a>,
&lt;a href="https://github.com/kbodwin" target="_blank" rel="noopener">@kbodwin&lt;/a>,
&lt;a href="https://github.com/mdjeric" target="_blank" rel="noopener">@mdjeric&lt;/a>,
&lt;a href="https://github.com/orchid00" target="_blank" rel="noopener">@orchid00&lt;/a>,
&lt;a href="https://github.com/richierocks" target="_blank" rel="noopener">@richierocks&lt;/a>,
&lt;a href="https://github.com/robinsones" target="_blank" rel="noopener">@robinsones&lt;/a>,
&lt;a href="https://github.com/rosedu1" target="_blank" rel="noopener">@rosedu1&lt;/a>,
&lt;a href="https://github.com/RoyalTS" target="_blank" rel="noopener">@RoyalTS&lt;/a>,
&lt;a href="https://github.com/russHyde" target="_blank" rel="noopener">@russHyde&lt;/a>,
&lt;a href="https://github.com/Ryo-N7" target="_blank" rel="noopener">@Ryo-N7&lt;/a>,
&lt;a href="https://github.com/s-fleck" target="_blank" rel="noopener">@s-fleck&lt;/a>,
&lt;a href="https://github.com/seaaan" target="_blank" rel="noopener">@seaaan&lt;/a>,
&lt;a href="https://github.com/spedygiorgio" target="_blank" rel="noopener">@spedygiorgio&lt;/a>,
&lt;a href="https://github.com/tslumley" target="_blank" rel="noopener">@tslumley&lt;/a>,
&lt;a href="https://github.com/xuhuizhang" target="_blank" rel="noopener">@xuhuizhang&lt;/a>,
&lt;a href="https://github.com/zhiiiyang" target="_blank" rel="noopener">@zhiiiyang&lt;/a>, and
&lt;a href="https://github.com/zx8754" target="_blank" rel="noopener">@zx8754&lt;/a>.&lt;/p></description></item><item><title>tibble 2.1.1</title><link>https://www.tidyverse.org/blog/2019/03/tibble-2.1.1/</link><pubDate>Tue, 19 Mar 2019 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2019/03/tibble-2.1.1/</guid><description>&lt;STYLE type='text/css' scoped>
PRE.fansi SPAN {padding-top: .25em; padding-bottom: .25em};
&lt;/STYLE>
&lt;p>Version 2.1.1 of the &lt;em>tibble&lt;/em> package is on CRAN now. Tibbles are a modern reimagining of the data frame, keeping what time has shown to be effective, and throwing out what is not, with nicer default output too! Grab the latest version with:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">install.packages&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;tibble&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>This release mostly focuses on the name repair introduced in &lt;em>tibble&lt;/em> 2.0.1.
We have specific regrets about one aspect of name repair and we think the pros of fixing it outweigh the cons:
when a column name is completely absent, the numbered suffix we add becomes the entire name.
Originally, we chose &lt;code>..j&lt;/code> (two dots and a number).
However, that produces names that require special handling, because names of the form &lt;code>..j&lt;/code> have a special meaning: they are reserved words, you can assign them a value but not query them.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="kc">..2&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="m">5&lt;/span>
&lt;span class="kc">..2&lt;/span>
&lt;span class="c1">#&amp;gt; Error in eval(expr, envir, enclos): ..2 used in an incorrect context, no ... to look in&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>The ability to query a value by name is very important for data frames in general and especially for the tidy evaluation framework:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">df&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">`..1`&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;not ok&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">.name_repair&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;minimal&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">with&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">`..1`&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; Error in eval(substitute(expr), data, enclos = parent.frame()): ..1 used in an incorrect context, no ... to look in&lt;/span>
&lt;span class="n">dplyr&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="nf">select&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">`..1`&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; Error in .f(.x[[i]], ...): ..1 used in an incorrect context, no ... to look in&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Since name repair is often something that happens automatically, we think it&amp;rsquo;s best to suffix with &lt;code>...j&lt;/code> (three dots and a number) and leave people with names that are easier to work with.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">as_tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">list&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">3&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">.name_repair&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;unique&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; New names:&lt;/span>
&lt;span class="c1">#&amp;gt; * `` -&amp;gt; ...1&lt;/span>
&lt;span class="c1">#&amp;gt; * `` -&amp;gt; ...2&lt;/span>
&lt;span class="c1">#&amp;gt; * `` -&amp;gt; ...3&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;PRE class="fansi fansi-output">&lt;CODE>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 1 x 3&lt;/span>
#&amp;gt; .​.​.1 .​.​.2 .​.​.3
#&amp;gt; &lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>
#&amp;gt; &lt;span style='color: #555555;'>1&lt;/span>&lt;span> 1 2 3&lt;/span>&lt;/CODE>&lt;/PRE>
&lt;p>Existing names of the form &lt;code>..j&lt;/code> (and also &lt;code>...&lt;/code>) are repaired too:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">...&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;a&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">..1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;b&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">.name_repair&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;unique&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; New names:&lt;/span>
&lt;span class="c1">#&amp;gt; * `...` -&amp;gt; ...1&lt;/span>
&lt;span class="c1">#&amp;gt; * `..1` -&amp;gt; ...2&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;PRE class="fansi fansi-output">&lt;CODE>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 1 x 2&lt;/span>
#&amp;gt; .​.​.1 .​.​.2
#&amp;gt; &lt;span style='color: #555555;font-style: italic;'>&amp;lt;chr&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;chr&amp;gt;&lt;/span>
#&amp;gt; &lt;span style='color: #555555;'>1&lt;/span>&lt;span> a b&lt;/span>&lt;/CODE>&lt;/PRE>
&lt;p>By extension, this means that names of this form are rejected unless you specify a name repair strategy:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">..1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;a&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; Error: Column 1 must not have names of the form ... or ..j.&lt;/span>
&lt;span class="c1">#&amp;gt; Use .name_repair to specify repair.&lt;/span>
&lt;span class="nf">tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">..1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;a&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">.name_repair&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;minimal&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;PRE class="fansi fansi-output">&lt;CODE>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 1 x 1&lt;/span>
#&amp;gt; ..1
#&amp;gt; &lt;span style='color: #555555;font-style: italic;'>&amp;lt;chr&amp;gt;&lt;/span>
#&amp;gt; &lt;span style='color: #555555;'>1&lt;/span>&lt;span> a&lt;/span>&lt;/CODE>&lt;/PRE>
&lt;p>For consistency, three dots are used for all disambiguating suffixes, not only for empty names.&lt;/p>
&lt;p>This might affect you if you use &lt;em>readxl&lt;/em> or another package that uses the new name repair, and we&amp;rsquo;re sorry for the disruption.
We&amp;rsquo;re confident that a bit of short-term pain now is better than the agony that would have come from the existent behavior.
Also, name repair currently is in the &amp;ldquo;maturing&amp;rdquo; lifecycle,
Read more about name repair in the
&lt;a href="https://principles.tidyverse.org/names-attribute.html#the-names-attribute-of-an-object" target="_blank" rel="noopener">tidyverse design principles&lt;/a>.&lt;/p>
&lt;p>&lt;img src="https://www.tidyverse.org/images/tibble-2.1.1/dots.jpg"/>&lt;/p></description></item><item><title>stringr 1.4.0</title><link>https://www.tidyverse.org/blog/2019/02/stringr-1-4-0/</link><pubDate>Thu, 21 Feb 2019 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2019/02/stringr-1-4-0/</guid><description>&lt;html>
&lt;style>
h2 code {
font-size: 1em;
&lt;p>}
&lt;/style>&lt;/p>
&lt;/html>
&lt;p>We are happy to announce that
&lt;a href="http://stringr.tidyverse.org/" target="_blank" rel="noopener">stringr&lt;/a> 1.4.0
is now on CRAN. stringr provides a cohesive set of functions designed to make
working with strings as easy as possible. For a full list of changes, please see the
&lt;a href="https://stringr.tidyverse.org/news/index.html#stringr-1-4-0" target="_blank" rel="noopener">release notes&lt;/a>.&lt;/p>
&lt;p>You can install the released version from CRAN:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">install.packages&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;stringr&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">stringr&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;h2 id="new-functions">New functions
&lt;a href="#new-functions">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Thanks to the hard work of
&lt;a href="https://github.com/jonthegeek" target="_blank" rel="noopener">John Harmon&lt;/a> at
&lt;a href="https://github.com/tidyverse/dev-day-2019" target="_blank" rel="noopener">Tidyverse Developer Day&lt;/a>, stringr has three new functions.&lt;/p>
&lt;p>
&lt;a href="https://stringr.tidyverse.org/reference/str_starts.html" target="_blank" rel="noopener">&lt;code>str_starts()&lt;/code>&lt;/a> and
&lt;a href="https://stringr.tidyverse.org/reference/str_starts.html" target="_blank" rel="noopener">&lt;code>str_ends()&lt;/code>&lt;/a> detect the presence or absence of patterns at the beginning or end of strings.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">fruit&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;apple&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;banana&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;pear&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;pineapple&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">str_starts&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fruit&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;p&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; [1] FALSE FALSE TRUE TRUE&lt;/span>
&lt;span class="nf">str_starts&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fruit&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;p&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">negate&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">TRUE&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; [1] TRUE TRUE FALSE FALSE&lt;/span>
&lt;span class="nf">str_ends&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fruit&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;e&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; [1] TRUE FALSE FALSE TRUE&lt;/span>
&lt;span class="nf">str_ends&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fruit&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;e&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">negate&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">TRUE&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; [1] FALSE TRUE TRUE FALSE&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>The new
&lt;a href="https://stringr.tidyverse.org/reference/case.html" target="_blank" rel="noopener">&lt;code>str_to_sentence()&lt;/code>&lt;/a> function capitalizes strings with sentence case, like so:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">str_to_sentence&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;the quick brown dog&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; [1] &amp;#34;The quick brown dog&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;h2 id="support-for-negate">Support for &lt;code>negate&lt;/code>
&lt;a href="#support-for-negate">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>
&lt;a href="https://stringr.tidyverse.org/reference/str_subset.html" target="_blank" rel="noopener">&lt;code>str_subset()&lt;/code>&lt;/a>,
&lt;a href="https://stringr.tidyverse.org/reference/str_detect.html" target="_blank" rel="noopener">&lt;code>str_detect()&lt;/code>&lt;/a>, and
&lt;a href="https://stringr.tidyverse.org/reference/str_subset.html" target="_blank" rel="noopener">&lt;code>str_which()&lt;/code>&lt;/a> now have the &lt;code>negate&lt;/code> argument, which is used to find the elements that do &lt;em>not&lt;/em> match a pattern (as seen above in the &lt;code>str_starts()&lt;/code> and &lt;code>str_ends()&lt;/code> examples).&lt;/p>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Thank you to everyone who contributed to this release:
&lt;a href="https://github.com/AmeliaMN" target="_blank" rel="noopener">@AmeliaMN&lt;/a>,
&lt;a href="https://github.com/batpigandme" target="_blank" rel="noopener">@batpigandme&lt;/a>,
&lt;a href="https://github.com/beckymaust" target="_blank" rel="noopener">@beckymaust&lt;/a>,
&lt;a href="https://github.com/BenjaminLouis" target="_blank" rel="noopener">@BenjaminLouis&lt;/a>,
&lt;a href="https://github.com/blablablerg" target="_blank" rel="noopener">@blablablerg&lt;/a>,
&lt;a href="https://github.com/bschneidr" target="_blank" rel="noopener">@bschneidr&lt;/a>,
&lt;a href="https://github.com/bwiernik" target="_blank" rel="noopener">@bwiernik&lt;/a>,
&lt;a href="https://github.com/ctmann" target="_blank" rel="noopener">@ctmann&lt;/a>,
&lt;a href="https://github.com/damianooldoni" target="_blank" rel="noopener">@damianooldoni&lt;/a>,
&lt;a href="https://github.com/dan-reznik" target="_blank" rel="noopener">@dan-reznik&lt;/a>,
&lt;a href="https://github.com/denrou" target="_blank" rel="noopener">@denrou&lt;/a>,
&lt;a href="https://github.com/diegogarcilazo" target="_blank" rel="noopener">@diegogarcilazo&lt;/a>,
&lt;a href="https://github.com/DieselAnalytics" target="_blank" rel="noopener">@DieselAnalytics&lt;/a>,
&lt;a href="https://github.com/elisakreiss" target="_blank" rel="noopener">@elisakreiss&lt;/a>,
&lt;a href="https://github.com/giovannikraushaar" target="_blank" rel="noopener">@giovannikraushaar&lt;/a>,
&lt;a href="https://github.com/hadley" target="_blank" rel="noopener">@hadley&lt;/a>,
&lt;a href="https://github.com/hammer" target="_blank" rel="noopener">@hammer&lt;/a>,
&lt;a href="https://github.com/jennybc" target="_blank" rel="noopener">@jennybc&lt;/a>,
&lt;a href="https://github.com/jimhester" target="_blank" rel="noopener">@jimhester&lt;/a>,
&lt;a href="https://github.com/jonocarroll" target="_blank" rel="noopener">@jonocarroll&lt;/a>,
&lt;a href="https://github.com/jonthegeek" target="_blank" rel="noopener">@jonthegeek&lt;/a>,
&lt;a href="https://github.com/jrnold" target="_blank" rel="noopener">@jrnold&lt;/a>,
&lt;a href="https://github.com/juanrocha" target="_blank" rel="noopener">@juanrocha&lt;/a>,
&lt;a href="https://github.com/kmace" target="_blank" rel="noopener">@kmace&lt;/a>,
&lt;a href="https://github.com/krlmlr" target="_blank" rel="noopener">@krlmlr&lt;/a>,
&lt;a href="https://github.com/osorensen" target="_blank" rel="noopener">@osorensen&lt;/a>,
&lt;a href="https://github.com/paleolimbot" target="_blank" rel="noopener">@paleolimbot&lt;/a>,
&lt;a href="https://github.com/pdelboca" target="_blank" rel="noopener">@pdelboca&lt;/a>,
&lt;a href="https://github.com/pgrandinetti" target="_blank" rel="noopener">@pgrandinetti&lt;/a>,
&lt;a href="https://github.com/PirateGrunt" target="_blank" rel="noopener">@PirateGrunt&lt;/a>,
&lt;a href="https://github.com/samhinshaw" target="_blank" rel="noopener">@samhinshaw&lt;/a>,
&lt;a href="https://github.com/sastoudt" target="_blank" rel="noopener">@sastoudt&lt;/a>,
&lt;a href="https://github.com/seanpor" target="_blank" rel="noopener">@seanpor&lt;/a>,
&lt;a href="https://github.com/yj-danielyang" target="_blank" rel="noopener">@yj-danielyang&lt;/a>, and
&lt;a href="https://github.com/yutannihilation" target="_blank" rel="noopener">@yutannihilation&lt;/a>.&lt;/p></description></item><item><title>haven 2.1.0</title><link>https://www.tidyverse.org/blog/2019/02/haven-2-1-0/</link><pubDate>Tue, 19 Feb 2019 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2019/02/haven-2-1-0/</guid><description>&lt;p>We&amp;rsquo;re delighted to announce that
&lt;a href="https://haven.tidyverse.org/" target="_blank" rel="noopener">haven 2.1.0&lt;/a> is now on CRAN. haven enables R to read and write various data formats used by other statistical packages by wrapping the
&lt;a href="https://github.com/WizardMac/ReadStat" target="_blank" rel="noopener">ReadStat&lt;/a> C library written by
&lt;a href="https://www.evanmiller.org/" target="_blank" rel="noopener">Evan Miller&lt;/a>. For a full account of updates in this release, see the
&lt;a href="https://haven.tidyverse.org/news/index.html" target="_blank" rel="noopener">Changelog&lt;/a>.&lt;/p>
&lt;h2 id="improved-labelling">Improved labelling
&lt;a href="#improved-labelling">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Both
&lt;a href="https://haven.tidyverse.org/reference/labelled.html" target="_blank" rel="noopener">&lt;code>labelled()&lt;/code>&lt;/a> and
&lt;a href="https://haven.tidyverse.org/reference/labelled_spss.html" target="_blank" rel="noopener">&lt;code>labelled_spss()&lt;/code>&lt;/a> now allow &lt;code>NULL&lt;/code> labels. This makes both classes more flexible, allowing you to use them for their other attributes.&lt;code>labelled()&lt;/code> also now tests that value labels are unique.&lt;/p>
&lt;p>&lt;code>labelled&lt;/code> objects now get pretty printing that shows the labels and &lt;code>NA&lt;/code> values when inside of a &lt;code>tbl_df&lt;/code>. You can turn this behaviour off by using &lt;code>option(haven.show_pillar_labels = FALSE)&lt;/code>.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">tibble&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="nf">tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">haven&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="nf">labelled&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">10&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">labels&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;A&amp;#34;&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;B&amp;#34;&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">10&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 2 x 1&lt;/span>
&lt;span class="c1">#&amp;gt; s&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;dbl+lbl&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 1 [A]&lt;/span>
&lt;span class="c1">#&amp;gt; 2 10 [B]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;h2 id="minor-improvements-and-fixes">Minor improvements and fixes
&lt;a href="#minor-improvements-and-fixes">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>This release is updated to the latest version of Evan Miller&amp;rsquo;s
&lt;a href="https://github.com/WizardMac/ReadStat" target="_blank" rel="noopener">ReadStat&lt;/a>, which includes the following changes:&lt;/p>
&lt;ul>
&lt;li>
&lt;a href="https://haven.tidyverse.org/reference/read_spss.html" target="_blank" rel="noopener">&lt;code>read_por()&lt;/code>&lt;/a> can now read files from SPSS 25.&lt;/li>
&lt;li>
&lt;a href="https://haven.tidyverse.org/reference/read_spss.html" target="_blank" rel="noopener">&lt;code>read_por()&lt;/code>&lt;/a> uses base-10 instead of base-30 for the exponent.&lt;/li>
&lt;li>
&lt;a href="https://haven.tidyverse.org/reference/read_sas.html" target="_blank" rel="noopener">&lt;code>read_sas()&lt;/code>&lt;/a> can read zero-column files.&lt;/li>
&lt;li>
&lt;a href="https://haven.tidyverse.org/reference/read_spss.html" target="_blank" rel="noopener">&lt;code>read_sav()&lt;/code>&lt;/a> now reads long strings, and has greater memory limit, allowing it to read more labels.&lt;/li>
&lt;li>
&lt;a href="https://haven.tidyverse.org/reference/read_spss.html" target="_blank" rel="noopener">&lt;code>read_spss()&lt;/code>&lt;/a> reads long variable labels.&lt;/li>
&lt;li>
&lt;a href="https://haven.tidyverse.org/reference/read_spss.html" target="_blank" rel="noopener">&lt;code>write_sav()&lt;/code>&lt;/a> no longer creates incorrect column names when &amp;gt;10k columns.&lt;/li>
&lt;li>
&lt;a href="https://haven.tidyverse.org/reference/read_spss.html" target="_blank" rel="noopener">&lt;code>write_sav()&lt;/code>&lt;/a> no longer crashes when writing long label names.&lt;/li>
&lt;/ul>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Thank you to Evan Miller, as well as
&lt;a href="https://github.com/armenic" target="_blank" rel="noopener">@armenic&lt;/a>,
&lt;a href="https://github.com/beckerbenj" target="_blank" rel="noopener">@beckerbenj&lt;/a>,
&lt;a href="https://github.com/caayala" target="_blank" rel="noopener">@caayala&lt;/a>,
&lt;a href="https://github.com/gergness" target="_blank" rel="noopener">@gergness&lt;/a>,
&lt;a href="https://github.com/jeffeaton" target="_blank" rel="noopener">@jeffeaton&lt;/a>,
&lt;a href="https://github.com/philstraforelli" target="_blank" rel="noopener">@philstraforelli&lt;/a>,
&lt;a href="https://github.com/thays42" target="_blank" rel="noopener">@thays42&lt;/a>, and
&lt;a href="https://github.com/visseho" target="_blank" rel="noopener">@visseho&lt;/a> for their contributions to this release.&lt;/p></description></item><item><title>dplyr 0.8.0</title><link>https://www.tidyverse.org/blog/2019/02/dplyr-0-8-0/</link><pubDate>Fri, 15 Feb 2019 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2019/02/dplyr-0-8-0/</guid><description>&lt;p>We&amp;rsquo;re tickled pink to announce the release of version 0.8.0 of
&lt;a href="https://dplyr.tidyverse.org" target="_blank" rel="noopener">dplyr&lt;/a>, the grammar of data manipulation in the tidyverse.
This is a major update that has kept us busy for almost a year. We take the coincidence of a Valentine&amp;rsquo;s day release as a sign
of continuous ❤️ for &lt;code>dplyr&lt;/code>'s approach to tidy data manipulation.&lt;/p>
&lt;p>Important changes are discussed in detail in the
&lt;a href="https://www.tidyverse.org/articles/2018/12/dplyr-0-8-0-release-candidate/" target="_blank" rel="noopener">pre-release post&lt;/a>,
we are grateful to members of the community for their feedback in the last couple of months, this
has been tremendously useful in making the release process smoother.&lt;/p>
&lt;p>The bulk of the changes are internal, and part of an ongoing effort to make the codebase more robust and
less surprising. This is an investment that will continue to pay off for years, and serve as a foundation for
more innovations in the future.&lt;/p>
&lt;p>For a comprehensive list of changes, please see
&lt;a href="https://dplyr.tidyverse.org/news/index.html#dplyr-0-8-0" target="_blank" rel="noopener">the NEWS&lt;/a>
for the 0.8.0 release, the sections below discusses the main changes.&lt;/p>
&lt;h2 id="group-hug">Group hug
&lt;a href="#group-hug">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Grouping has always been at the center of what &lt;code>dplyr&lt;/code> is about, this release expands on the
existing &lt;code>group_by()&lt;/code> with a set of &lt;em>experimental&lt;/em> functions with a variety of
perspectives on the notion of grouping.&lt;/p>
&lt;p>We believe they offer new unique possibilities, but we welcome community feedback and use cases
before we put a 💍 on them. Let&amp;rsquo;s illustrate them with a subset from the
well-known &lt;code>gapminder&lt;/code> data.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">oceania&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="n">gapminder&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">gapminder&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">filter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">continent&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s">&amp;#34;Oceania&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">mutate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">yr1952&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">year&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="m">1952&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">select&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">continent&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_by&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">country&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">oceania&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 24 x 6&lt;/span>
&lt;span class="c1">#&amp;gt; # Groups: country [2]&lt;/span>
&lt;span class="c1">#&amp;gt; country year lifeExp pop gdpPercap yr1952&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;fct&amp;gt; &amp;lt;int&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;int&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 Australia 1952 69.1 8691212 10040. 0&lt;/span>
&lt;span class="c1">#&amp;gt; 2 Australia 1957 70.3 9712569 10950. 5&lt;/span>
&lt;span class="c1">#&amp;gt; 3 Australia 1962 70.9 10794968 12217. 10&lt;/span>
&lt;span class="c1">#&amp;gt; 4 Australia 1967 71.1 11872264 14526. 15&lt;/span>
&lt;span class="c1">#&amp;gt; 5 Australia 1972 71.9 13177000 16789. 20&lt;/span>
&lt;span class="c1">#&amp;gt; 6 Australia 1977 73.5 14074100 18334. 25&lt;/span>
&lt;span class="c1">#&amp;gt; 7 Australia 1982 74.7 15184200 19477. 30&lt;/span>
&lt;span class="c1">#&amp;gt; 8 Australia 1987 76.3 16257249 21889. 35&lt;/span>
&lt;span class="c1">#&amp;gt; 9 Australia 1992 77.6 17481977 23425. 40&lt;/span>
&lt;span class="c1">#&amp;gt; 10 Australia 1997 78.8 18565243 26998. 45&lt;/span>
&lt;span class="c1">#&amp;gt; # … with 14 more rows&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>
&lt;a href="https://dplyr.tidyverse.org/reference/group_nest.html" target="_blank" rel="noopener">group_nest()&lt;/a> is similar to
&lt;code>tidyr::nest()&lt;/code>, but focuses on the variables to &lt;em>nest by&lt;/em> instead of the nested columns.&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">oceania&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_nest&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 2 x 2&lt;/span>
&lt;span class="c1">#&amp;gt; country data &lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;fct&amp;gt; &amp;lt;list&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; 1 Australia &amp;lt;tibble [12 × 5]&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 2 New Zealand &amp;lt;tibble [12 × 5]&amp;gt;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>
&lt;a href="https://dplyr.tidyverse.org/reference/group_split.html" target="_blank" rel="noopener">group_split()&lt;/a> is a tidy version
of &lt;code>base::split()&lt;/code>. In particular, it respects a &lt;code>group_by()&lt;/code>-like grouping specification,
and refuses to name its result.&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">oceania&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_split&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1">#&amp;gt; [[1]]&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 12 x 6&lt;/span>
&lt;span class="c1">#&amp;gt; country year lifeExp pop gdpPercap yr1952&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;fct&amp;gt; &amp;lt;int&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;int&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 Australia 1952 69.1 8691212 10040. 0&lt;/span>
&lt;span class="c1">#&amp;gt; 2 Australia 1957 70.3 9712569 10950. 5&lt;/span>
&lt;span class="c1">#&amp;gt; 3 Australia 1962 70.9 10794968 12217. 10&lt;/span>
&lt;span class="c1">#&amp;gt; 4 Australia 1967 71.1 11872264 14526. 15&lt;/span>
&lt;span class="c1">#&amp;gt; 5 Australia 1972 71.9 13177000 16789. 20&lt;/span>
&lt;span class="c1">#&amp;gt; 6 Australia 1977 73.5 14074100 18334. 25&lt;/span>
&lt;span class="c1">#&amp;gt; 7 Australia 1982 74.7 15184200 19477. 30&lt;/span>
&lt;span class="c1">#&amp;gt; 8 Australia 1987 76.3 16257249 21889. 35&lt;/span>
&lt;span class="c1">#&amp;gt; 9 Australia 1992 77.6 17481977 23425. 40&lt;/span>
&lt;span class="c1">#&amp;gt; 10 Australia 1997 78.8 18565243 26998. 45&lt;/span>
&lt;span class="c1">#&amp;gt; 11 Australia 2002 80.4 19546792 30688. 50&lt;/span>
&lt;span class="c1">#&amp;gt; 12 Australia 2007 81.2 20434176 34435. 55&lt;/span>
&lt;span class="c1">#&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; [[2]]&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 12 x 6&lt;/span>
&lt;span class="c1">#&amp;gt; country year lifeExp pop gdpPercap yr1952&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;fct&amp;gt; &amp;lt;int&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;int&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 New Zealand 1952 69.4 1994794 10557. 0&lt;/span>
&lt;span class="c1">#&amp;gt; 2 New Zealand 1957 70.3 2229407 12247. 5&lt;/span>
&lt;span class="c1">#&amp;gt; 3 New Zealand 1962 71.2 2488550 13176. 10&lt;/span>
&lt;span class="c1">#&amp;gt; 4 New Zealand 1967 71.5 2728150 14464. 15&lt;/span>
&lt;span class="c1">#&amp;gt; 5 New Zealand 1972 71.9 2929100 16046. 20&lt;/span>
&lt;span class="c1">#&amp;gt; 6 New Zealand 1977 72.2 3164900 16234. 25&lt;/span>
&lt;span class="c1">#&amp;gt; 7 New Zealand 1982 73.8 3210650 17632. 30&lt;/span>
&lt;span class="c1">#&amp;gt; 8 New Zealand 1987 74.3 3317166 19007. 35&lt;/span>
&lt;span class="c1">#&amp;gt; 9 New Zealand 1992 76.3 3437674 18363. 40&lt;/span>
&lt;span class="c1">#&amp;gt; 10 New Zealand 1997 77.6 3676187 21050. 45&lt;/span>
&lt;span class="c1">#&amp;gt; 11 New Zealand 2002 79.1 3908037 23190. 50&lt;/span>
&lt;span class="c1">#&amp;gt; 12 New Zealand 2007 80.2 4115771 25185. 55&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>
&lt;a href="https://dplyr.tidyverse.org/reference/group_map.html" target="_blank" rel="noopener">group_map()&lt;/a> and
&lt;a href="https://dplyr.tidyverse.org/reference/group_map.html" target="_blank" rel="noopener">group_walk()&lt;/a> offer
a way to iterate on groups of a grouped data frame.&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">oceania&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">mutate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">yr1952&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">year&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="m">1952&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_map&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">~&lt;/span>&lt;span class="n">broom&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="nf">tidy&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">stats&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="nf">lm&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">lifeExp&lt;/span> &lt;span class="o">~&lt;/span> &lt;span class="n">yr1952&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">.x&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 4 x 6&lt;/span>
&lt;span class="c1">#&amp;gt; # Groups: country [2]&lt;/span>
&lt;span class="c1">#&amp;gt; country term estimate std.error statistic p.value&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;fct&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 Australia (Intercept) 68.4 0.337 203. 2.07e-19&lt;/span>
&lt;span class="c1">#&amp;gt; 2 Australia yr1952 0.228 0.0104 21.9 8.67e-10&lt;/span>
&lt;span class="c1">#&amp;gt; 3 New Zealand (Intercept) 68.7 0.437 157. 2.66e-18&lt;/span>
&lt;span class="c1">#&amp;gt; 4 New Zealand yr1952 0.193 0.0135 14.3 5.41e- 8&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>
&lt;a href="https://dplyr.tidyverse.org/reference/group_data.html" target="_blank" rel="noopener">group_data()&lt;/a>,
&lt;a href="https://dplyr.tidyverse.org/reference/group_data.html" target="_blank" rel="noopener">group_rows()&lt;/a>, and
&lt;a href="https://dplyr.tidyverse.org/reference/group_split.html" target="_blank" rel="noopener">group_keys()&lt;/a> expose the grouping information, that has
been restructured in a tibble.&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">oceania&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_data&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 2 x 2&lt;/span>
&lt;span class="c1">#&amp;gt; country .rows &lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;fct&amp;gt; &amp;lt;list&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; 1 Australia &amp;lt;int [12]&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 2 New Zealand &amp;lt;int [12]&amp;gt;&lt;/span>
&lt;span class="n">oceania&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_keys&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 2 x 1&lt;/span>
&lt;span class="c1">#&amp;gt; country &lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;fct&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; 1 Australia &lt;/span>
&lt;span class="c1">#&amp;gt; 2 New Zealand&lt;/span>
&lt;span class="n">oceania&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_rows&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1">#&amp;gt; [[1]]&lt;/span>
&lt;span class="c1">#&amp;gt; [1] 1 2 3 4 5 6 7 8 9 10 11 12&lt;/span>
&lt;span class="c1">#&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; [[2]]&lt;/span>
&lt;span class="c1">#&amp;gt; [1] 13 14 15 16 17 18 19 20 21 22 23 24&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>
&lt;a href="https://dplyr.tidyverse.org/reference/group_by.html" target="_blank" rel="noopener">group_by()&lt;/a> gains a &lt;code>.drop&lt;/code> argument
which you can set to &lt;code>FALSE&lt;/code> to respect empty groups associated with factors (more on this below).&lt;/li>
&lt;/ul>
&lt;h2 id="give-factors-some-love">Give factors some love
&lt;a href="#give-factors-some-love">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>The internal grouping algorithm has been redesigned to make it possible to
better respect factor levels and empty groups. To limit the disruption, we have not made
this the default behaviour. To keep empty groups,
you have to set
&lt;a href="https://dplyr.tidyverse.org/reference/group_by.html" target="_blank" rel="noopener">group_by()&lt;/a>&amp;lsquo;s
&lt;code>.drop&lt;/code> argument to &lt;code>FALSE&lt;/code>.&lt;/p>
&lt;p>This can make data manipulation more predictable and reliable, because when factors are
involved, the groups are based on the levels of the factors, rather than which levels
have data points.&lt;/p>
&lt;p>Let&amp;rsquo;s illustrate this with our favourite flowers 💐,
and a function, &lt;code>species_count()&lt;/code>, that counts the number of each species after
a &lt;code>filter()&lt;/code>, and structures it as a tibble with one column per species.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">species_count&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">...&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="n">iris&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">filter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">...&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_by&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Species&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">.drop&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">FALSE&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">summarise&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">n&lt;/span>&lt;span class="p">())&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="n">tidyr&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="nf">spread&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Species&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Because we use &lt;code>.drop = FALSE&lt;/code> we get one column per level of the factor,
even when there&amp;rsquo;s no data associated with a level:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">species_count&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Petal.Length&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="m">3&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 1 x 3&lt;/span>
&lt;span class="c1">#&amp;gt; setosa versicolor virginica&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;int&amp;gt; &amp;lt;int&amp;gt; &amp;lt;int&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 0 49 50&lt;/span>
&lt;span class="nf">species_count&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Petal.Length&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="m">6.5&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 1 x 3&lt;/span>
&lt;span class="c1">#&amp;gt; setosa versicolor virginica&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;int&amp;gt; &amp;lt;int&amp;gt; &amp;lt;int&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 0 0 4&lt;/span>
&lt;span class="nf">species_count&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Petal.Length&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="m">42&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 1 x 3&lt;/span>
&lt;span class="c1">#&amp;gt; setosa versicolor virginica&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;int&amp;gt; &amp;lt;int&amp;gt; &amp;lt;int&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 0 0 0&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>These 0 instead of missing columns make the experience easier when you want to combine multiple results:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">limits&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">seq&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">8&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">by&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">.5&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">limits&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="n">purrr&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="nf">map_dfr&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="nf">species_count&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Petal.Length&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">.x&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">mutate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Sepal.Length&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">limits&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">select&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Sepal.Length&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">everything&lt;/span>&lt;span class="p">())&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 17 x 4&lt;/span>
&lt;span class="c1">#&amp;gt; Sepal.Length setosa versicolor virginica&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;int&amp;gt; &amp;lt;int&amp;gt; &amp;lt;int&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 0 50 50 50&lt;/span>
&lt;span class="c1">#&amp;gt; 2 0.5 50 50 50&lt;/span>
&lt;span class="c1">#&amp;gt; 3 1 49 50 50&lt;/span>
&lt;span class="c1">#&amp;gt; 4 1.5 13 50 50&lt;/span>
&lt;span class="c1">#&amp;gt; 5 2 0 50 50&lt;/span>
&lt;span class="c1">#&amp;gt; 6 2.5 0 50 50&lt;/span>
&lt;span class="c1">#&amp;gt; 7 3 0 49 50&lt;/span>
&lt;span class="c1">#&amp;gt; 8 3.5 0 45 50&lt;/span>
&lt;span class="c1">#&amp;gt; 9 4 0 34 50&lt;/span>
&lt;span class="c1">#&amp;gt; 10 4.5 0 14 49&lt;/span>
&lt;span class="c1">#&amp;gt; 11 5 0 1 41&lt;/span>
&lt;span class="c1">#&amp;gt; 12 5.5 0 0 25&lt;/span>
&lt;span class="c1">#&amp;gt; 13 6 0 0 9&lt;/span>
&lt;span class="c1">#&amp;gt; 14 6.5 0 0 4&lt;/span>
&lt;span class="c1">#&amp;gt; 15 7 0 0 0&lt;/span>
&lt;span class="c1">#&amp;gt; 16 7.5 0 0 0&lt;/span>
&lt;span class="c1">#&amp;gt; 17 8 0 0 0&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;h2 id="thanks">Thanks
&lt;a href="#thanks">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Thanks to all contributors for this release.&lt;/p>
&lt;p>
&lt;a href="https://github.com/abouf" target="_blank" rel="noopener">@abouf&lt;/a>,
&lt;a href="https://github.com/adisarid" target="_blank" rel="noopener">@adisarid&lt;/a>,
&lt;a href="https://github.com/adrfantini" target="_blank" rel="noopener">@adrfantini&lt;/a>,
&lt;a href="https://github.com/aetiologicCanada" target="_blank" rel="noopener">@aetiologicCanada&lt;/a>,
&lt;a href="https://github.com/afdta" target="_blank" rel="noopener">@afdta&lt;/a>,
&lt;a href="https://github.com/albertomv83" target="_blank" rel="noopener">@albertomv83&lt;/a>,
&lt;a href="https://github.com/alistaire47" target="_blank" rel="noopener">@alistaire47&lt;/a>,
&lt;a href="https://github.com/aloes2512" target="_blank" rel="noopener">@aloes2512&lt;/a>,
&lt;a href="https://github.com/andresimi" target="_blank" rel="noopener">@andresimi&lt;/a>,
&lt;a href="https://github.com/antaldaniel" target="_blank" rel="noopener">@antaldaniel&lt;/a>,
&lt;a href="https://github.com/AnthonyEbert" target="_blank" rel="noopener">@AnthonyEbert&lt;/a>,
&lt;a href="https://github.com/ArtemSokolov" target="_blank" rel="noopener">@ArtemSokolov&lt;/a>,
&lt;a href="https://github.com/AshesITR" target="_blank" rel="noopener">@AshesITR&lt;/a>,
&lt;a href="https://github.com/bakaburg1" target="_blank" rel="noopener">@bakaburg1&lt;/a>,
&lt;a href="https://github.com/batpigandme" target="_blank" rel="noopener">@batpigandme&lt;/a>,
&lt;a href="https://github.com/bbachrach" target="_blank" rel="noopener">@bbachrach&lt;/a>,
&lt;a href="https://github.com/bbolker" target="_blank" rel="noopener">@bbolker&lt;/a>,
&lt;a href="https://github.com/behrman" target="_blank" rel="noopener">@behrman&lt;/a>,
&lt;a href="https://github.com/BenjaminLouis" target="_blank" rel="noopener">@BenjaminLouis&lt;/a>,
&lt;a href="https://github.com/bifouba" target="_blank" rel="noopener">@bifouba&lt;/a>,
&lt;a href="https://github.com/billdenney" target="_blank" rel="noopener">@billdenney&lt;/a>,
&lt;a href="https://github.com/bnicenboim" target="_blank" rel="noopener">@bnicenboim&lt;/a>,
&lt;a href="https://github.com/BobMuenchen" target="_blank" rel="noopener">@BobMuenchen&lt;/a>,
&lt;a href="https://github.com/brooke-watson" target="_blank" rel="noopener">@brooke-watson&lt;/a>,
&lt;a href="https://github.com/CarolineBarret" target="_blank" rel="noopener">@CarolineBarret&lt;/a>,
&lt;a href="https://github.com/cbailiss" target="_blank" rel="noopener">@cbailiss&lt;/a>,
&lt;a href="https://github.com/CerebralMastication" target="_blank" rel="noopener">@CerebralMastication&lt;/a>,
&lt;a href="https://github.com/cfhammill" target="_blank" rel="noopener">@cfhammill&lt;/a>,
&lt;a href="https://github.com/cfry-propeller" target="_blank" rel="noopener">@cfry-propeller&lt;/a>,
&lt;a href="https://github.com/choisy" target="_blank" rel="noopener">@choisy&lt;/a>,
&lt;a href="https://github.com/ChrisBeeley" target="_blank" rel="noopener">@ChrisBeeley&lt;/a>,
&lt;a href="https://github.com/chrsigg" target="_blank" rel="noopener">@chrsigg&lt;/a>,
&lt;a href="https://github.com/clauswilke" target="_blank" rel="noopener">@clauswilke&lt;/a>,
&lt;a href="https://github.com/ClaytonJY" target="_blank" rel="noopener">@ClaytonJY&lt;/a>,
&lt;a href="https://github.com/colearendt" target="_blank" rel="noopener">@colearendt&lt;/a>,
&lt;a href="https://github.com/ColinFay" target="_blank" rel="noopener">@ColinFay&lt;/a>,
&lt;a href="https://github.com/coolbutuseless" target="_blank" rel="noopener">@coolbutuseless&lt;/a>,
&lt;a href="https://github.com/Copepoda" target="_blank" rel="noopener">@Copepoda&lt;/a>,
&lt;a href="https://github.com/cpsievert" target="_blank" rel="noopener">@cpsievert&lt;/a>,
&lt;a href="https://github.com/dah33" target="_blank" rel="noopener">@dah33&lt;/a>,
&lt;a href="https://github.com/damianooldoni" target="_blank" rel="noopener">@damianooldoni&lt;/a>,
&lt;a href="https://github.com/DanChaltiel" target="_blank" rel="noopener">@DanChaltiel&lt;/a>,
&lt;a href="https://github.com/danyal123" target="_blank" rel="noopener">@danyal123&lt;/a>,
&lt;a href="https://github.com/DavisVaughan" target="_blank" rel="noopener">@DavisVaughan&lt;/a>,
&lt;a href="https://github.com/Demetrio92" target="_blank" rel="noopener">@Demetrio92&lt;/a>,
&lt;a href="https://github.com/dewoller" target="_blank" rel="noopener">@dewoller&lt;/a>,
&lt;a href="https://github.com/dfalbel" target="_blank" rel="noopener">@dfalbel&lt;/a>,
&lt;a href="https://github.com/DiogoFerrari" target="_blank" rel="noopener">@DiogoFerrari&lt;/a>,
&lt;a href="https://github.com/dirkschumacher" target="_blank" rel="noopener">@dirkschumacher&lt;/a>,
&lt;a href="https://github.com/dmenne" target="_blank" rel="noopener">@dmenne&lt;/a>,
&lt;a href="https://github.com/dmvianna" target="_blank" rel="noopener">@dmvianna&lt;/a>,
&lt;a href="https://github.com/dongzhuoer" target="_blank" rel="noopener">@dongzhuoer&lt;/a>,
&lt;a href="https://github.com/earowang" target="_blank" rel="noopener">@earowang&lt;/a>,
&lt;a href="https://github.com/echasnovski" target="_blank" rel="noopener">@echasnovski&lt;/a>,
&lt;a href="https://github.com/eddelbuettel" target="_blank" rel="noopener">@eddelbuettel&lt;/a>,
&lt;a href="https://github.com/EdwinTh" target="_blank" rel="noopener">@EdwinTh&lt;/a>,
&lt;a href="https://github.com/eijoac" target="_blank" rel="noopener">@eijoac&lt;/a>,
&lt;a href="https://github.com/elbersb" target="_blank" rel="noopener">@elbersb&lt;/a>,
&lt;a href="https://github.com/Eli-Berkow" target="_blank" rel="noopener">@Eli-Berkow&lt;/a>,
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/epetrovski" target="_blank" rel="noopener">@epetrovski&lt;/a>,
&lt;a href="https://github.com/erblast" target="_blank" rel="noopener">@erblast&lt;/a>,
&lt;a href="https://github.com/etienne-s" target="_blank" rel="noopener">@etienne-s&lt;/a>,
&lt;a href="https://github.com/foundinblank" target="_blank" rel="noopener">@foundinblank&lt;/a>,
&lt;a href="https://github.com/FrancoisGuillem" target="_blank" rel="noopener">@FrancoisGuillem&lt;/a>,
&lt;a href="https://github.com/geotheory" target="_blank" rel="noopener">@geotheory&lt;/a>,
&lt;a href="https://github.com/ggrothendieck" target="_blank" rel="noopener">@ggrothendieck&lt;/a>,
&lt;a href="https://github.com/GoldbergData" target="_blank" rel="noopener">@GoldbergData&lt;/a>,
&lt;a href="https://github.com/gowerc" target="_blank" rel="noopener">@gowerc&lt;/a>,
&lt;a href="https://github.com/grayskripko" target="_blank" rel="noopener">@grayskripko&lt;/a>,
&lt;a href="https://github.com/GrimTrigger88" target="_blank" rel="noopener">@GrimTrigger88&lt;/a>,
&lt;a href="https://github.com/grizzthepro64" target="_blank" rel="noopener">@grizzthepro64&lt;/a>,
&lt;a href="https://github.com/hadley" target="_blank" rel="noopener">@hadley&lt;/a>,
&lt;a href="https://github.com/hafen" target="_blank" rel="noopener">@hafen&lt;/a>,
&lt;a href="https://github.com/heavywatal" target="_blank" rel="noopener">@heavywatal&lt;/a>,
&lt;a href="https://github.com/helix123" target="_blank" rel="noopener">@helix123&lt;/a>,
&lt;a href="https://github.com/henrikmidtiby" target="_blank" rel="noopener">@henrikmidtiby&lt;/a>,
&lt;a href="https://github.com/hpeaker" target="_blank" rel="noopener">@hpeaker&lt;/a>,
&lt;a href="https://github.com/htc502" target="_blank" rel="noopener">@htc502&lt;/a>,
&lt;a href="https://github.com/hughjonesd" target="_blank" rel="noopener">@hughjonesd&lt;/a>,
&lt;a href="https://github.com/ignacio82" target="_blank" rel="noopener">@ignacio82&lt;/a>,
&lt;a href="https://github.com/igoldin2u" target="_blank" rel="noopener">@igoldin2u&lt;/a>,
&lt;a href="https://github.com/igordot" target="_blank" rel="noopener">@igordot&lt;/a>,
&lt;a href="https://github.com/ilarischeinin" target="_blank" rel="noopener">@ilarischeinin&lt;/a>,
&lt;a href="https://github.com/Ilia-Kosenkov" target="_blank" rel="noopener">@Ilia-Kosenkov&lt;/a>,
&lt;a href="https://github.com/IndrajeetPatil" target="_blank" rel="noopener">@IndrajeetPatil&lt;/a>,
&lt;a href="https://github.com/ipofanes" target="_blank" rel="noopener">@ipofanes&lt;/a>,
&lt;a href="https://github.com/jasonmhoule" target="_blank" rel="noopener">@jasonmhoule&lt;/a>,
&lt;a href="https://github.com/jayhesselberth" target="_blank" rel="noopener">@jayhesselberth&lt;/a>,
&lt;a href="https://github.com/jennybc" target="_blank" rel="noopener">@jennybc&lt;/a>,
&lt;a href="https://github.com/jepusto" target="_blank" rel="noopener">@jepusto&lt;/a>,
&lt;a href="https://github.com/jflynn264" target="_blank" rel="noopener">@jflynn264&lt;/a>,
&lt;a href="https://github.com/jialu512" target="_blank" rel="noopener">@jialu512&lt;/a>,
&lt;a href="https://github.com/JiaxiangBU" target="_blank" rel="noopener">@JiaxiangBU&lt;/a>,
&lt;a href="https://github.com/jimhester" target="_blank" rel="noopener">@jimhester&lt;/a>,
&lt;a href="https://github.com/jkylearmstrongibx" target="_blank" rel="noopener">@jkylearmstrongibx&lt;/a>,
&lt;a href="https://github.com/jnolis" target="_blank" rel="noopener">@jnolis&lt;/a>,
&lt;a href="https://github.com/JohnMount" target="_blank" rel="noopener">@JohnMount&lt;/a>,
&lt;a href="https://github.com/jonkeane" target="_blank" rel="noopener">@jonkeane&lt;/a>,
&lt;a href="https://github.com/jonthegeek" target="_blank" rel="noopener">@jonthegeek&lt;/a>,
&lt;a href="https://github.com/jschelbert" target="_blank" rel="noopener">@jschelbert&lt;/a>,
&lt;a href="https://github.com/jsekamane" target="_blank" rel="noopener">@jsekamane&lt;/a>,
&lt;a href="https://github.com/jtelleria" target="_blank" rel="noopener">@jtelleria&lt;/a>,
&lt;a href="https://github.com/kendonB" target="_blank" rel="noopener">@kendonB&lt;/a>,
&lt;a href="https://github.com/kevinykuo" target="_blank" rel="noopener">@kevinykuo&lt;/a>,
&lt;a href="https://github.com/krlmlr" target="_blank" rel="noopener">@krlmlr&lt;/a>,
&lt;a href="https://github.com/langbe" target="_blank" rel="noopener">@langbe&lt;/a>,
&lt;a href="https://github.com/ldecicco-USGS" target="_blank" rel="noopener">@ldecicco-USGS&lt;/a>,
&lt;a href="https://github.com/leungi" target="_blank" rel="noopener">@leungi&lt;/a>,
&lt;a href="https://github.com/libbieweimer" target="_blank" rel="noopener">@libbieweimer&lt;/a>,
&lt;a href="https://github.com/lionel-" target="_blank" rel="noopener">@lionel-&lt;/a>,
&lt;a href="https://github.com/liz-is" target="_blank" rel="noopener">@liz-is&lt;/a>,
&lt;a href="https://github.com/lloven" target="_blank" rel="noopener">@lloven&lt;/a>,
&lt;a href="https://github.com/ltrgoddard" target="_blank" rel="noopener">@ltrgoddard&lt;/a>,
&lt;a href="https://github.com/luccastermans" target="_blank" rel="noopener">@luccastermans&lt;/a>,
&lt;a href="https://github.com/maicel1978" target="_blank" rel="noopener">@maicel1978&lt;/a>,
&lt;a href="https://github.com/Make42" target="_blank" rel="noopener">@Make42&lt;/a>,
&lt;a href="https://github.com/MalditoBarbudo" target="_blank" rel="noopener">@MalditoBarbudo&lt;/a>,
&lt;a href="https://github.com/markdly" target="_blank" rel="noopener">@markdly&lt;/a>,
&lt;a href="https://github.com/markvanderloo" target="_blank" rel="noopener">@markvanderloo&lt;/a>,
&lt;a href="https://github.com/mattbk" target="_blank" rel="noopener">@mattbk&lt;/a>,
&lt;a href="https://github.com/maxheld83" target="_blank" rel="noopener">@maxheld83&lt;/a>,
&lt;a href="https://github.com/melissakey" target="_blank" rel="noopener">@melissakey&lt;/a>,
&lt;a href="https://github.com/mem48" target="_blank" rel="noopener">@mem48&lt;/a>,
&lt;a href="https://github.com/mgirlich" target="_blank" rel="noopener">@mgirlich&lt;/a>,
&lt;a href="https://github.com/mikmart" target="_blank" rel="noopener">@mikmart&lt;/a>,
&lt;a href="https://github.com/MilesMcBain" target="_blank" rel="noopener">@MilesMcBain&lt;/a>,
&lt;a href="https://github.com/minhsphuc12" target="_blank" rel="noopener">@minhsphuc12&lt;/a>,
&lt;a href="https://github.com/mkoohafkan" target="_blank" rel="noopener">@mkoohafkan&lt;/a>,
&lt;a href="https://github.com/momeara" target="_blank" rel="noopener">@momeara&lt;/a>,
&lt;a href="https://github.com/moodymudskipper" target="_blank" rel="noopener">@moodymudskipper&lt;/a>,
&lt;a href="https://github.com/move[bot]" target="_blank" rel="noopener">@move[bot]&lt;/a>,
&lt;a href="https://github.com/nealpsmith" target="_blank" rel="noopener">@nealpsmith&lt;/a>,
&lt;a href="https://github.com/NightWinkle" target="_blank" rel="noopener">@NightWinkle&lt;/a>,
&lt;a href="https://github.com/o1iv3r" target="_blank" rel="noopener">@o1iv3r&lt;/a>,
&lt;a href="https://github.com/PascalKieslich" target="_blank" rel="noopener">@PascalKieslich&lt;/a>,
&lt;a href="https://github.com/petermeissner" target="_blank" rel="noopener">@petermeissner&lt;/a>,
&lt;a href="https://github.com/peterzsohar" target="_blank" rel="noopener">@peterzsohar&lt;/a>,
&lt;a href="https://github.com/philstraforelli" target="_blank" rel="noopener">@philstraforelli&lt;/a>,
&lt;a href="https://github.com/PMassicotte" target="_blank" rel="noopener">@PMassicotte&lt;/a>,
&lt;a href="https://github.com/PPICARDO" target="_blank" rel="noopener">@PPICARDO&lt;/a>,
&lt;a href="https://github.com/privefl" target="_blank" rel="noopener">@privefl&lt;/a>,
&lt;a href="https://github.com/prokulski" target="_blank" rel="noopener">@prokulski&lt;/a>,
&lt;a href="https://github.com/quartin" target="_blank" rel="noopener">@quartin&lt;/a>,
&lt;a href="https://github.com/rabutler-usbr" target="_blank" rel="noopener">@rabutler-usbr&lt;/a>,
&lt;a href="https://github.com/ramongallego" target="_blank" rel="noopener">@ramongallego&lt;/a>,
&lt;a href="https://github.com/randomgambit" target="_blank" rel="noopener">@randomgambit&lt;/a>,
&lt;a href="https://github.com/rappster" target="_blank" rel="noopener">@rappster&lt;/a>,
&lt;a href="https://github.com/rensa" target="_blank" rel="noopener">@rensa&lt;/a>,
&lt;a href="https://github.com/reshmamena" target="_blank" rel="noopener">@reshmamena&lt;/a>,
&lt;a href="https://github.com/richard987" target="_blank" rel="noopener">@richard987&lt;/a>,
&lt;a href="https://github.com/richierocks" target="_blank" rel="noopener">@richierocks&lt;/a>,
&lt;a href="https://github.com/RickPack" target="_blank" rel="noopener">@RickPack&lt;/a>,
&lt;a href="https://github.com/riship2009" target="_blank" rel="noopener">@riship2009&lt;/a>,
&lt;a href="https://github.com/RobertMyles" target="_blank" rel="noopener">@RobertMyles&lt;/a>,
&lt;a href="https://github.com/romainfrancois" target="_blank" rel="noopener">@romainfrancois&lt;/a>,
&lt;a href="https://github.com/rontomer" target="_blank" rel="noopener">@rontomer&lt;/a>,
&lt;a href="https://github.com/roumail" target="_blank" rel="noopener">@roumail&lt;/a>,
&lt;a href="https://github.com/rozsoma" target="_blank" rel="noopener">@rozsoma&lt;/a>,
&lt;a href="https://github.com/rundel" target="_blank" rel="noopener">@rundel&lt;/a>,
&lt;a href="https://github.com/rupesh2017" target="_blank" rel="noopener">@rupesh2017&lt;/a>,
&lt;a href="https://github.com/s-fleck" target="_blank" rel="noopener">@s-fleck&lt;/a>,
&lt;a href="https://github.com/S-UP" target="_blank" rel="noopener">@S-UP&lt;/a>,
&lt;a href="https://github.com/salmansyed0709" target="_blank" rel="noopener">@salmansyed0709&lt;/a>,
&lt;a href="https://github.com/schloerke" target="_blank" rel="noopener">@schloerke&lt;/a>,
&lt;a href="https://github.com/seasmith" target="_blank" rel="noopener">@seasmith&lt;/a>,
&lt;a href="https://github.com/sharlagelfand" target="_blank" rel="noopener">@sharlagelfand&lt;/a>,
&lt;a href="https://github.com/shizidushu" target="_blank" rel="noopener">@shizidushu&lt;/a>,
&lt;a href="https://github.com/simon-anasta" target="_blank" rel="noopener">@simon-anasta&lt;/a>,
&lt;a href="https://github.com/skaltman" target="_blank" rel="noopener">@skaltman&lt;/a>,
&lt;a href="https://github.com/skylarhopkins" target="_blank" rel="noopener">@skylarhopkins&lt;/a>,
&lt;a href="https://github.com/sowla" target="_blank" rel="noopener">@sowla&lt;/a>,
&lt;a href="https://github.com/statsccpr" target="_blank" rel="noopener">@statsccpr&lt;/a>,
&lt;a href="https://github.com/stenhaug" target="_blank" rel="noopener">@stenhaug&lt;/a>,
&lt;a href="https://github.com/streamline55" target="_blank" rel="noopener">@streamline55&lt;/a>,
&lt;a href="https://github.com/stuartE9" target="_blank" rel="noopener">@stuartE9&lt;/a>,
&lt;a href="https://github.com/stufield" target="_blank" rel="noopener">@stufield&lt;/a>,
&lt;a href="https://github.com/suzanbaert" target="_blank" rel="noopener">@suzanbaert&lt;/a>,
&lt;a href="https://github.com/sverchkov" target="_blank" rel="noopener">@sverchkov&lt;/a>,
&lt;a href="https://github.com/thackl" target="_blank" rel="noopener">@thackl&lt;/a>,
&lt;a href="https://github.com/the-knife" target="_blank" rel="noopener">@the-knife&lt;/a>,
&lt;a href="https://github.com/ThiAmm" target="_blank" rel="noopener">@ThiAmm&lt;/a>,
&lt;a href="https://github.com/thisisnic" target="_blank" rel="noopener">@thisisnic&lt;/a>,
&lt;a href="https://github.com/tinyheero" target="_blank" rel="noopener">@tinyheero&lt;/a>,
&lt;a href="https://github.com/tmelconian" target="_blank" rel="noopener">@tmelconian&lt;/a>,
&lt;a href="https://github.com/tobadia" target="_blank" rel="noopener">@tobadia&lt;/a>,
&lt;a href="https://github.com/tonyelhabr" target="_blank" rel="noopener">@tonyelhabr&lt;/a>,
&lt;a href="https://github.com/torbjorn" target="_blank" rel="noopener">@torbjorn&lt;/a>,
&lt;a href="https://github.com/trueNico" target="_blank" rel="noopener">@trueNico&lt;/a>,
&lt;a href="https://github.com/tungmilan" target="_blank" rel="noopener">@tungmilan&lt;/a>,
&lt;a href="https://github.com/TylerGrantSmith" target="_blank" rel="noopener">@TylerGrantSmith&lt;/a>,
&lt;a href="https://github.com/ukkonen" target="_blank" rel="noopener">@ukkonen&lt;/a>,
&lt;a href="https://github.com/vincentanutama" target="_blank" rel="noopener">@vincentanutama&lt;/a>,
&lt;a href="https://github.com/vnijs" target="_blank" rel="noopener">@vnijs&lt;/a>,
&lt;a href="https://github.com/wanfahmi" target="_blank" rel="noopener">@wanfahmi&lt;/a>,
&lt;a href="https://github.com/waynelapierre" target="_blank" rel="noopener">@waynelapierre&lt;/a>,
&lt;a href="https://github.com/wch" target="_blank" rel="noopener">@wch&lt;/a>,
&lt;a href="https://github.com/wdenton" target="_blank" rel="noopener">@wdenton&lt;/a>,
&lt;a href="https://github.com/wgrundlingh" target="_blank" rel="noopener">@wgrundlingh&lt;/a>,
&lt;a href="https://github.com/wmayner" target="_blank" rel="noopener">@wmayner&lt;/a>,
&lt;a href="https://github.com/wolski" target="_blank" rel="noopener">@wolski&lt;/a>,
&lt;a href="https://github.com/yiqinfu" target="_blank" rel="noopener">@yiqinfu&lt;/a>,
&lt;a href="https://github.com/yutannihilation" target="_blank" rel="noopener">@yutannihilation&lt;/a>,
&lt;a href="https://github.com/Zanidean" target="_blank" rel="noopener">@Zanidean&lt;/a>,
&lt;a href="https://github.com/Zedseayou" target="_blank" rel="noopener">@Zedseayou&lt;/a>,
&lt;a href="https://github.com/zslajchrt" target="_blank" rel="noopener">@zslajchrt&lt;/a>,
&lt;a href="https://github.com/zx8754" target="_blank" rel="noopener">@zx8754&lt;/a>, and
&lt;a href="https://github.com/zzygyx9119" target="_blank" rel="noopener">@zzygyx9119&lt;/a>.&lt;/p></description></item><item><title>purrr 0.3.0</title><link>https://www.tidyverse.org/blog/2019/02/purrr-0-3-0/</link><pubDate>Wed, 06 Feb 2019 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2019/02/purrr-0-3-0/</guid><description>
&lt;p>We’re excited to announce the release of &lt;a href="https://purrr.tidyverse.org">purrr&lt;/a> 0.3.0! purrr enhances R’s functional programming toolkit by providing a complete and consistent set of tools for working with functions and vectors.&lt;/p>
&lt;pre class="r">&lt;code># Install the latest version with:
install.packages(&amp;quot;purrr&amp;quot;)
# Start working with purrr:
library(purrr)&lt;/code>&lt;/pre>
&lt;p>In this release, &lt;code>pluck()&lt;/code> gets a few new variants:&lt;/p>
&lt;ul>
&lt;li>&lt;p>&lt;code>pluck&amp;lt;-&lt;/code>, &lt;code>assign_in()&lt;/code> and &lt;code>modify_in()&lt;/code> allow deep modifications of nested structures.&lt;/p>&lt;/li>
&lt;li>&lt;p>&lt;code>chuck()&lt;/code> is a stricter variant of &lt;code>pluck()&lt;/code> that consistently fails instead of returning &lt;code>NULL&lt;/code> when the structure does not have the expected shape.&lt;/p>&lt;/li>
&lt;/ul>
&lt;p>A new set of tools helps limiting the rate at which a function is called:&lt;/p>
&lt;ul>
&lt;li>&lt;p>&lt;code>slowly()&lt;/code> forces a function to sleep between each invokation.&lt;/p>&lt;/li>
&lt;li>&lt;p>&lt;code>insistently()&lt;/code> automatically invokes a function again on error until it succeeds, and sleeps between invokations.&lt;/p>&lt;/li>
&lt;li>&lt;p>The &lt;code>rate_delay()&lt;/code> and &lt;code>rate_backoff()&lt;/code> helpers control the invokation rate of &lt;code>slowly()&lt;/code> and &lt;code>insistently()&lt;/code>.&lt;/p>&lt;/li>
&lt;/ul>
&lt;p>The reduce and map functions gain a few improvements:&lt;/p>
&lt;ul>
&lt;li>&lt;p>&lt;code>map_if()&lt;/code> accepts an optional function with the &lt;code>.else&lt;/code> parameter. This function is applied on elements for which the predicate is &lt;code>FALSE&lt;/code>.&lt;/p>&lt;/li>
&lt;li>&lt;p>&lt;code>map_at()&lt;/code> now accepts &lt;code>vars()&lt;/code> selections. This lets you use selection helpers like &lt;code>dplyr::starts_with()&lt;/code> to determine the elements of a list which should be mapped.&lt;/p>&lt;/li>
&lt;li>&lt;p>&lt;code>reduce()&lt;/code> now supports early termination of a computation. Just return a value wrapped in a &lt;code>done()&lt;/code> to signal to &lt;code>reduce()&lt;/code> that you’re done.&lt;/p>&lt;/li>
&lt;/ul>
&lt;p>Besides these new functions and tools, purrr 0.3.0 is mostly a polishing release. We have improved the consistency of behaviour:&lt;/p>
&lt;ul>
&lt;li>&lt;p>&lt;code>modify()&lt;/code> is now a wrapper around &lt;code>[[&amp;lt;-&lt;/code> instead of &lt;code>[&amp;lt;-&lt;/code>. This makes it compatible with a larger variety of S3 vector classes.&lt;/p>&lt;/li>
&lt;li>&lt;p>Predicate functions (such that you would pass to &lt;code>map_if()&lt;/code>) now must return a single &lt;code>TRUE&lt;/code> or &lt;code>FALSE&lt;/code>. Missing values and integers are no longer valid predicate outputs.&lt;/p>&lt;/li>
&lt;/ul>
&lt;p>Finally, we improved the consistency of the interface:&lt;/p>
&lt;ul>
&lt;li>&lt;p>The direction of iteration/application is now consistently specified with a &lt;code>.dir&lt;/code> argument.&lt;/p>&lt;/li>
&lt;li>&lt;p>Many missing functions were added to fill the gaps: &lt;code>accumulate2()&lt;/code>, &lt;code>imodify()&lt;/code>, &lt;code>map_depth()&lt;/code>, …&lt;/p>&lt;/li>
&lt;li>&lt;p>&lt;code>partial()&lt;/code> has a much improved and more flexible interface.&lt;/p>&lt;/li>
&lt;/ul>
&lt;p>Find a detailed account of the changes in the &lt;a href="https://github.com/tidyverse/purrr/blob/master/NEWS.md#purrr-030">NEWS&lt;/a> file.&lt;/p>
&lt;div id="new-pluck-variants" class="section level2">
&lt;h2>New pluck variants&lt;/h2>
&lt;p>&lt;code>pluck()&lt;/code> implements a generalised form of &lt;code>[[&lt;/code> that allow you to index deeply and flexibly into data structures. For instance, &lt;code>pluck(x, &amp;quot;foo&amp;quot;, 2)&lt;/code> is equivalent to &lt;code>x[[&amp;quot;foo&amp;quot;]][[2]]&lt;/code>. You can also supply a default value in case the element does not exist. For instance, &lt;code>pluck(x, &amp;quot;foo&amp;quot;, 2, .default = NA)&lt;/code> is equivalent to &lt;code>x[[&amp;quot;foo&amp;quot;]][[2]]&lt;/code>, returning an &lt;code>NA&lt;/code> if that element doesn’t exist. purrr 0.3.0 introduces variants of &lt;code>pluck()&lt;/code> to make it easier to work with deep data structures.&lt;/p>
&lt;div id="pluck-assignment" class="section level3">
&lt;h3>Pluck assignment&lt;/h3>
&lt;p>This release introduces the new functions &lt;code>pluck&amp;lt;-&lt;/code>, &lt;code>assign_in()&lt;/code> and &lt;code>modify_in()&lt;/code> as assignment variants of &lt;code>pluck()&lt;/code>. To illustrate deep assignment, let’s create a nested data structure:&lt;/p>
&lt;pre class="r">&lt;code>x &amp;lt;- list(foo = list(1, 2), bar = list(3, 4))
str(x)
#&amp;gt; List of 2
#&amp;gt; $ foo:List of 2
#&amp;gt; ..$ : num 1
#&amp;gt; ..$ : num 2
#&amp;gt; $ bar:List of 2
#&amp;gt; ..$ : num 3
#&amp;gt; ..$ : num 4&lt;/code>&lt;/pre>
&lt;p>This sort of repeated structure is the kind of data where &lt;code>pluck()&lt;/code> shines:&lt;/p>
&lt;pre class="r">&lt;code>pluck(x, &amp;quot;foo&amp;quot;, 2)
#&amp;gt; [1] 2
pluck(x, &amp;quot;bar&amp;quot;, 1)
#&amp;gt; [1] 3&lt;/code>&lt;/pre>
&lt;p>You can now use the same syntax to modify the data:&lt;/p>
&lt;pre class="r">&lt;code>pluck(x, &amp;quot;foo&amp;quot;, 2) &amp;lt;- 100
str(x)
#&amp;gt; List of 2
#&amp;gt; $ foo:List of 2
#&amp;gt; ..$ : num 1
#&amp;gt; ..$ : num 100
#&amp;gt; $ bar:List of 2
#&amp;gt; ..$ : num 3
#&amp;gt; ..$ : num 4&lt;/code>&lt;/pre>
&lt;p>&lt;code>pluck&amp;lt;-&lt;/code> also has a functional form that does not modify objects in your environment, but instead returns a modified copy:&lt;/p>
&lt;pre class="r">&lt;code>out &amp;lt;- assign_in(x, list(&amp;quot;foo&amp;quot;, 2), 2000)
# The object is still the same as before
str(x)
#&amp;gt; List of 2
#&amp;gt; $ foo:List of 2
#&amp;gt; ..$ : num 1
#&amp;gt; ..$ : num 100
#&amp;gt; $ bar:List of 2
#&amp;gt; ..$ : num 3
#&amp;gt; ..$ : num 4
# The modified data is in `out`
str(out)
#&amp;gt; List of 2
#&amp;gt; $ foo:List of 2
#&amp;gt; ..$ : num 1
#&amp;gt; ..$ : num 2000
#&amp;gt; $ bar:List of 2
#&amp;gt; ..$ : num 3
#&amp;gt; ..$ : num 4&lt;/code>&lt;/pre>
&lt;p>Finally, &lt;code>modify_in()&lt;/code> is a variant of &lt;code>modify()&lt;/code> that only changes the pluck location with the result of applying a function:&lt;/p>
&lt;pre class="r">&lt;code>out &amp;lt;- modify_in(x, list(&amp;quot;foo&amp;quot;, 2), as.character)
str(out)
#&amp;gt; List of 2
#&amp;gt; $ foo:List of 2
#&amp;gt; ..$ : num 1
#&amp;gt; ..$ : chr &amp;quot;100&amp;quot;
#&amp;gt; $ bar:List of 2
#&amp;gt; ..$ : num 3
#&amp;gt; ..$ : num 4&lt;/code>&lt;/pre>
&lt;/div>
&lt;div id="stricter-pluck" class="section level3">
&lt;h3>Stricter pluck()&lt;/h3>
&lt;p>Thanks to Daniel Barnett (&lt;span class="citation">@daniel-barnett&lt;/span> on Github), &lt;code>pluck()&lt;/code> now has a stricter cousin &lt;code>chuck()&lt;/code>. Whereas &lt;code>pluck()&lt;/code> is very permissive regarding non-existing locations and returns &lt;code>NULL&lt;/code> in these cases, and &lt;code>[[&lt;/code> inconsistently returns &lt;code>NULL&lt;/code>, &lt;code>NA&lt;/code>, or throws an error, &lt;code>chuck()&lt;/code> fails consistently with informative messages (i.e., it “chucks” an error message):&lt;/p>
&lt;pre class="r">&lt;code>pluck(list(1), &amp;quot;foo&amp;quot;)
#&amp;gt; NULL
chuck(list(1), &amp;quot;foo&amp;quot;)
#&amp;gt; Error: Index 1 is attempting to pluck from an unnamed vector using a string name&lt;/code>&lt;/pre>
&lt;/div>
&lt;/div>
&lt;div id="rates" class="section level2">
&lt;h2>Rates&lt;/h2>
&lt;p>Thanks to Richie Cotton (&lt;span class="citation">@richierocks&lt;/span>) and Ian Lyttle (&lt;span class="citation">@ijlyttle&lt;/span>), purrr gains a function operator to make a function call itself repeatedly when an error occurs.&lt;/p>
&lt;pre class="r">&lt;code>counter &amp;lt;- 0
f &amp;lt;- function(...) {
if (counter &amp;lt; 2) {
counter &amp;lt;&amp;lt;- counter + 1
stop(&amp;quot;tilt!&amp;quot;)
}
&amp;quot;result&amp;quot;
}
f()
#&amp;gt; Error in f(): tilt!&lt;/code>&lt;/pre>
&lt;p>If the function is wrapped with &lt;code>insistently()&lt;/code>, it will try a few times before giving up:&lt;/p>
&lt;pre class="r">&lt;code># Reset counter
counter &amp;lt;- 0
f2 &amp;lt;- insistently(f)
f2()
#&amp;gt; [1] &amp;quot;result&amp;quot;&lt;/code>&lt;/pre>
&lt;p>Another rate limiting function is &lt;code>slowly()&lt;/code>. While &lt;code>insistently()&lt;/code> loops by itself, &lt;code>slowly()&lt;/code> is designed to be used in your own loops, for instance in a map iteration:&lt;/p>
&lt;pre class="r">&lt;code>f &amp;lt;- function(...) print(Sys.time())
walk(1:3, f)
#&amp;gt; [1] &amp;quot;2019-02-06 16:22:28 CET&amp;quot;
#&amp;gt; [1] &amp;quot;2019-02-06 16:22:28 CET&amp;quot;
#&amp;gt; [1] &amp;quot;2019-02-06 16:22:28 CET&amp;quot;
walk(1:3, slowly(f))
#&amp;gt; [1] &amp;quot;2019-02-06 16:22:28 CET&amp;quot;
#&amp;gt; [1] &amp;quot;2019-02-06 16:22:29 CET&amp;quot;
#&amp;gt; [1] &amp;quot;2019-02-06 16:22:30 CET&amp;quot;&lt;/code>&lt;/pre>
&lt;p>&lt;code>slowly()&lt;/code> uses a constant rate by default while &lt;code>insistently()&lt;/code> uses a backoff rate. The rate limiting can be configured with optional jitter via &lt;code>rate_backoff()&lt;/code> and &lt;code>rate_delay()&lt;/code>, which implement exponential backoff rate and constant rate respectively.&lt;/p>
&lt;pre class="r">&lt;code>walk(1:3, slowly(f, rate_backoff(2, max_times = Inf)))
#&amp;gt; [1] &amp;quot;2019-02-06 16:22:30 CET&amp;quot;
#&amp;gt; [1] &amp;quot;2019-02-06 16:22:32 CET&amp;quot;
#&amp;gt; [1] &amp;quot;2019-02-06 16:22:34 CET&amp;quot;&lt;/code>&lt;/pre>
&lt;/div>
&lt;div id="map-and-reduce-improvements" class="section level2">
&lt;h2>Map and reduce improvements&lt;/h2>
&lt;div id="map_if-or-else" class="section level3">
&lt;h3>&lt;code>map_if()&lt;/code>… or else?&lt;/h3>
&lt;p>If you like using &lt;code>map_if()&lt;/code>, perhaps you’ll find the new &lt;code>.else&lt;/code> argument useful. &lt;code>.else&lt;/code> is a function applied to elements for which the predicate is &lt;code>FALSE&lt;/code>:&lt;/p>
&lt;pre class="r">&lt;code>map_if(iris, is.numeric, mean, .else = nlevels)
#&amp;gt; $Sepal.Length
#&amp;gt; [1] 5.843333
#&amp;gt;
#&amp;gt; $Sepal.Width
#&amp;gt; [1] 3.057333
#&amp;gt;
#&amp;gt; $Petal.Length
#&amp;gt; [1] 3.758
#&amp;gt;
#&amp;gt; $Petal.Width
#&amp;gt; [1] 1.199333
#&amp;gt;
#&amp;gt; $Species
#&amp;gt; [1] 3&lt;/code>&lt;/pre>
&lt;/div>
&lt;div id="new-map_at-features" class="section level3">
&lt;h3>New &lt;code>map_at()&lt;/code> features&lt;/h3>
&lt;p>Colin Fay (&lt;span class="citation">@ColinFay&lt;/span>) has added support for tidyselect expressions to &lt;code>map_at()&lt;/code> and other &lt;code>_at&lt;/code> mappers. This brings the interface of these functions closer to scoped functions from the dplyr package, such as &lt;code>dplyr::mutate_at()&lt;/code>. Note that &lt;code>vars()&lt;/code> is currently not reexported from purrr, so you need to use &lt;code>dplyr::vars()&lt;/code> or &lt;code>ggplot2::vars()&lt;/code> for the time being.&lt;/p>
&lt;pre class="r">&lt;code>suppressMessages(library(&amp;quot;dplyr&amp;quot;))
x &amp;lt;- list(
foo = 1:5,
bar = 6:10,
baz = 11:15
)
map_at(x, vars(starts_with(&amp;quot;b&amp;quot;)), mean)
#&amp;gt; $foo
#&amp;gt; [1] 1 2 3 4 5
#&amp;gt;
#&amp;gt; $bar
#&amp;gt; [1] 8
#&amp;gt;
#&amp;gt; $baz
#&amp;gt; [1] 13&lt;/code>&lt;/pre>
&lt;p>&lt;code>map_at()&lt;/code> now also supports negative selections:&lt;/p>
&lt;pre class="r">&lt;code>map_at(x, -2, `*`, 1000)
#&amp;gt; $foo
#&amp;gt; [1] 1000 2000 3000 4000 5000
#&amp;gt;
#&amp;gt; $bar
#&amp;gt; [1] 6 7 8 9 10
#&amp;gt;
#&amp;gt; $baz
#&amp;gt; [1] 11000 12000 13000 14000 15000&lt;/code>&lt;/pre>
&lt;/div>
&lt;div id="early-termination-of-reduction" class="section level3">
&lt;h3>Early termination of reduction&lt;/h3>
&lt;p>&lt;code>reduce()&lt;/code> is an operation that combines the elements of a vector into a single value by calling a binary function repeatedly with the result so far and the next input of a vector. &lt;code>reduce()&lt;/code> and its variant &lt;code>accumulate()&lt;/code> now support early termination of the reduction. To halt the computation, just return the last value wrapped in a &lt;code>done()&lt;/code> box:&lt;/p>
&lt;pre class="r">&lt;code># This computes the total sum of the input vector
reduce(1:100, ~ .x + .y)
#&amp;gt; [1] 5050
# This stops as soon as the sum is greater than 50
reduce(1:100, ~ if (.x &amp;gt; 50) done(.x) else .x + .y)
#&amp;gt; [1] 55&lt;/code>&lt;/pre>
&lt;p>This feature takes inspiration from the &lt;a href="https://clojuredocs.org/clojure.core/reduced">Clojure&lt;/a> language.&lt;/p>
&lt;/div>
&lt;/div>
&lt;div id="consistency" class="section level2">
&lt;h2>Consistency&lt;/h2>
&lt;p>In this polishing release, a lot of effort went towards consistency of behaviour and of the interface.&lt;/p>
&lt;div id="behaviour" class="section level3">
&lt;h3>Behaviour&lt;/h3>
&lt;div id="better-support-for-s3-vectors" class="section level4">
&lt;h4>Better support for S3 vectors&lt;/h4>
&lt;p>We are working hard on improving support for S3 vectors in the tidyverse. As of this release, &lt;code>modify()&lt;/code> is now a wrapper around &lt;code>[[&amp;lt;-&lt;/code> instead of &lt;code>[&amp;lt;-&lt;/code>. This should make it directly compatible with a larger set of vector classes. Thanks to the work of Mikko Marttila (&lt;span class="citation">@mikmart&lt;/span>), &lt;code>pmap()&lt;/code> and &lt;code>pwalk()&lt;/code> also do a better job of preserving S3 classes. Finally, &lt;code>pluck()&lt;/code> now properly calls the &lt;code>[[&lt;/code> methods of S3 objects.&lt;/p>
&lt;p>In the next version of purrr, we plan to use the in-development vctrs package to provide more principled and predictable vector operations. This should help us preserve the class and properties of S3 vectors like factors, dates, or your custom classes.&lt;/p>
&lt;/div>
&lt;div id="stricter-predicate-checking" class="section level4">
&lt;h4>Stricter predicate checking&lt;/h4>
&lt;p>purrr now checks the results of your predicate functions, which must now consistently return &lt;code>TRUE&lt;/code> or &lt;code>FALSE&lt;/code>. We no longer offer support for &lt;code>NA&lt;/code> or for boolish numeric values (R normally interprets 0 as &lt;code>FALSE&lt;/code> and all other values as &lt;code>TRUE&lt;/code>). The purpose of this change is to detect errors earlier with a more relevant error message.&lt;/p>
&lt;pre class="r">&lt;code>keep(c(1, NA, 3), ~ . %% 2 == 0)
#&amp;gt; Error: Predicate functions must return a single `TRUE` or `FALSE`, not a missing value&lt;/code>&lt;/pre>
&lt;/div>
&lt;/div>
&lt;div id="interface" class="section level3">
&lt;h3>Interface&lt;/h3>
&lt;div id="direction-of-application" class="section level4">
&lt;h4>Direction of application&lt;/h4>
&lt;p>The direction of application is now specified the same way across purrr functions. &lt;code>reduce()&lt;/code>, &lt;code>compose()&lt;/code> and &lt;code>detect()&lt;/code> now have a &lt;code>.dir&lt;/code> parameter that can take the value &lt;code>&amp;quot;forward&amp;quot;&lt;/code> or &lt;code>&amp;quot;backward&amp;quot;&lt;/code>. This terminology should be less ambiguous than “left” and “right”:&lt;/p>
&lt;pre class="r">&lt;code>reduce(1:4, `-`, .dir = &amp;quot;backward&amp;quot;)
compose(foo, bar, .dir = &amp;quot;forward&amp;quot;)
detect(1:5, ~ . %% 2 == 0, .dir = &amp;quot;backward&amp;quot;)&lt;/code>&lt;/pre>
&lt;p>Note that the backward version of &lt;code>reduce()&lt;/code> (called right-reduce in the literature) applies the reduced function in a slightly different way than &lt;code>reduce_right()&lt;/code>. The new algorithm is more consistent with how this operation is usually defined in other languages.&lt;/p>
&lt;p>Following the introduction of the &lt;code>.dir&lt;/code> parameters, the &lt;code>_right&lt;/code> variants such as &lt;code>reduce_right()&lt;/code> have been soft-deprecated, as well as the &lt;code>.right&lt;/code> parameter of &lt;code>detect()&lt;/code> and &lt;code>detect_index()&lt;/code>.&lt;/p>
&lt;/div>
&lt;div id="partial" class="section level4">
&lt;h4>partial()&lt;/h4>
&lt;p>&lt;code>partial()&lt;/code> has been rewritten to be a simple wrapper around &lt;code>call_modify()&lt;/code> and &lt;code>eval_tidy()&lt;/code> from the rlang package. Consequently, the &lt;code>.env&lt;/code>, &lt;code>.lazy&lt;/code> and &lt;code>.first&lt;/code> arguments are soft-deprecated and replaced by a flexible syntax.&lt;/p>
&lt;p>To control the timing of evaluation, unquote the partialised arguments that should be evaluated only once when the function is created. The non-unquoted arguments are evaluated at each invokation of the function:&lt;/p>
&lt;pre class="r">&lt;code>my_list &amp;lt;- partial(list, lazy = rnorm(3), eager = !!rnorm(3))
my_list()
#&amp;gt; $lazy
#&amp;gt; [1] 0.2945451 0.3897943 -1.2080762
#&amp;gt;
#&amp;gt; $eager
#&amp;gt; [1] -0.1842525 -1.3713305 -0.5991677
my_list()
#&amp;gt; $lazy
#&amp;gt; [1] -0.3636760 -1.6266727 -0.2564784
#&amp;gt;
#&amp;gt; $eager
#&amp;gt; [1] -0.1842525 -1.3713305 -0.5991677&lt;/code>&lt;/pre>
&lt;p>You can also control the position of the future arguments by passing an empty &lt;code>... =&lt;/code> parameter. This syntax is powered by &lt;code>rlang::call_modify()&lt;/code> and allows you to add or move dots in a quoted function call. In the case of &lt;code>partial()&lt;/code>, the dots represent the future arguments. We use this syntax in the following snippet to position the future arguments right between two partialised arguments:&lt;/p>
&lt;pre class="r">&lt;code>my_list &amp;lt;- partial(list, 1, ... = , 2)
my_list()
#&amp;gt; [[1]]
#&amp;gt; [1] 1
#&amp;gt;
#&amp;gt; [[2]]
#&amp;gt; [1] 2
my_list(&amp;quot;foo&amp;quot;)
#&amp;gt; [[1]]
#&amp;gt; [1] 1
#&amp;gt;
#&amp;gt; [[2]]
#&amp;gt; [1] &amp;quot;foo&amp;quot;
#&amp;gt;
#&amp;gt; [[3]]
#&amp;gt; [1] 2&lt;/code>&lt;/pre>
&lt;/div>
&lt;div id="exec-replaces-invoke" class="section level4">
&lt;h4>&lt;code>exec()&lt;/code> replaces &lt;code>invoke()&lt;/code>&lt;/h4>
&lt;p>We are retiring &lt;code>invoke()&lt;/code> and &lt;code>invoke_map()&lt;/code> in favour of &lt;code>exec()&lt;/code>. Retirement means that we’ll keep these functions indefinitely in the package, but we won’t add features or recommend using them.&lt;/p>
&lt;p>We are now favouring &lt;code>exec()&lt;/code>, which uses the tidy dots syntax for passing lists of arguments:&lt;/p>
&lt;pre class="r">&lt;code># Before:
invoke(mean, list(na.rm = TRUE), x = 1:10)
#&amp;gt; [1] 5.5
# After
exec(mean, 1:10, !!!list(na.rm = TRUE))
#&amp;gt; [1] 5.5&lt;/code>&lt;/pre>
&lt;/div>
&lt;div id="filling-the-missing-parts" class="section level4">
&lt;h4>Filling the missing parts&lt;/h4>
&lt;ul>
&lt;li>&lt;p>purrr 0.3.0 introduces &lt;code>accumulate2()&lt;/code>, &lt;code>modify2()&lt;/code> and &lt;code>imodify()&lt;/code> variants.&lt;/p>&lt;/li>
&lt;li>&lt;p>By popular request, &lt;code>at_depth()&lt;/code> is back as &lt;code>map_depth()&lt;/code>. Unlike &lt;code>modify_depth()&lt;/code> which preserves the class structure of the input tree, this variant only returns trees made of lists of lists (up to the given depth), coercing vectors if needed.&lt;/p>&lt;/li>
&lt;/ul>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;div id="thanks" class="section level2">
&lt;h2>Thanks!&lt;/h2>
&lt;p>Thanks to all the contributors for this release!&lt;/p>
&lt;p>&lt;a href="https://github.com/ArtemSokolov">＠ArtemSokolov&lt;/a>, &lt;a href="https://github.com/batpigandme">＠batpigandme&lt;/a>, &lt;a href="https://github.com/bbrewington">＠bbrewington&lt;/a>, &lt;a href="https://github.com/billdenney">＠billdenney&lt;/a>, &lt;a href="https://github.com/cderv">＠cderv&lt;/a>, &lt;a href="https://github.com/cfhammill">＠cfhammill&lt;/a>, &lt;a href="https://github.com/ColinFay">＠ColinFay&lt;/a>, &lt;a href="https://github.com/dan-reznik">＠dan-reznik&lt;/a>, &lt;a href="https://github.com/daniel-barnett">＠daniel-barnett&lt;/a>, &lt;a href="https://github.com/danilinares">＠danilinares&lt;/a>, &lt;a href="https://github.com/drtjc">＠drtjc&lt;/a>, &lt;a href="https://github.com/egnha">＠egnha&lt;/a>, &lt;a href="https://github.com/Eluvias">＠Eluvias&lt;/a>, &lt;a href="https://github.com/flying-sheep">＠flying-sheep&lt;/a>, &lt;a href="https://github.com/gergness">＠gergness&lt;/a>, &lt;a href="https://github.com/gvwilson">＠gvwilson&lt;/a>, &lt;a href="https://github.com/hadley">＠hadley&lt;/a>, &lt;a href="https://github.com/hammer">＠hammer&lt;/a>, &lt;a href="https://github.com/ijlyttle">＠ijlyttle&lt;/a>, &lt;a href="https://github.com/ilarischeinin">＠ilarischeinin&lt;/a>, &lt;a href="https://github.com/IndrajeetPatil">＠IndrajeetPatil&lt;/a>, &lt;a href="https://github.com/ISPritchin">＠ISPritchin&lt;/a>, &lt;a href="https://github.com/jameslairdsmith">＠jameslairdsmith&lt;/a>, &lt;a href="https://github.com/jameslamb">＠jameslamb&lt;/a>, &lt;a href="https://github.com/jrnold">＠jrnold&lt;/a>, &lt;a href="https://github.com/kcf-jackson">＠kcf-jackson&lt;/a>, &lt;a href="https://github.com/leungi">＠leungi&lt;/a>, &lt;a href="https://github.com/lionel-">＠lionel-&lt;/a>, &lt;a href="https://github.com/loladze">＠loladze&lt;/a>, &lt;a href="https://github.com/maxheld83">＠maxheld83&lt;/a>, &lt;a href="https://github.com/mikmart">＠mikmart&lt;/a>, &lt;a href="https://github.com/MilesMcBain">＠MilesMcBain&lt;/a>, &lt;a href="https://github.com/moodymudskipper">＠moodymudskipper&lt;/a>, &lt;a href="https://github.com/mrstlee">＠mrstlee&lt;/a>, &lt;a href="https://github.com/namelessjon">＠namelessjon&lt;/a>, &lt;a href="https://github.com/r-cheologist">＠r-cheologist&lt;/a>, &lt;a href="https://github.com/randomgambit">＠randomgambit&lt;/a>, &lt;a href="https://github.com/rmflight">＠rmflight&lt;/a>, &lt;a href="https://github.com/roumail">＠roumail&lt;/a>, &lt;a href="https://github.com/Ryo-N7">＠Ryo-N7&lt;/a>, &lt;a href="https://github.com/serina-robinson">＠serina-robinson&lt;/a>, &lt;a href="https://github.com/skaltman">＠skaltman&lt;/a>, &lt;a href="https://github.com/suraggupta">＠suraggupta&lt;/a>, &lt;a href="https://github.com/thays42">＠thays42&lt;/a>, &lt;a href="https://github.com/tyluRp">＠tyluRp&lt;/a>, &lt;a href="https://github.com/tzakharko">＠tzakharko&lt;/a>, &lt;a href="https://github.com/VincentGuyader">＠VincentGuyader&lt;/a>, &lt;a href="https://github.com/wlandau">＠wlandau&lt;/a>, &lt;a href="https://github.com/wmayner">＠wmayner&lt;/a>, &lt;a href="https://github.com/yanxianl">＠yanxianl&lt;/a>, &lt;a href="https://github.com/yutannihilation">＠yutannihilation&lt;/a>, and &lt;a href="https://github.com/yysh12">＠yysh12&lt;/a>&lt;/p>
&lt;/div></description></item><item><title>tibble 2.0.1</title><link>https://www.tidyverse.org/blog/2019/01/tibble-2.0.1/</link><pubDate>Tue, 15 Jan 2019 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2019/01/tibble-2.0.1/</guid><description>&lt;STYLE type='text/css' scoped>
PRE.fansi SPAN {padding-top: .25em; padding-bottom: .25em};
&lt;/STYLE>
&lt;p>I&amp;rsquo;m pleased to announce that version 2.0.1 of the &lt;em>tibble&lt;/em> package is on CRAN now, just in time for
&lt;a href="https://www.rstudio.com/conference/" target="_blank" rel="noopener">rstudio::conf()&lt;/a>. Tibbles are a modern reimagining of the data frame, keeping what time has shown to be effective, and throwing out what is not, with nicer default output too! Grab the latest version with:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">install.packages&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;tibble&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>This release required a bit of preparation, including a
&lt;a href="https://www.tidyverse.org/articles/2018/11/tibble-2.0.0-pre-announce/" target="_blank" rel="noopener">pre-release blog post&lt;/a> that described the breaking changes, mostly in
&lt;a href="https://tibble.tidyverse.org/reference/as_tibble.html" target="_blank" rel="noopener">&lt;code>as_tibble()&lt;/code>&lt;/a>,
&lt;a href="https://tibble.tidyverse.org/reference/new_tibble.html" target="_blank" rel="noopener">&lt;code>new_tibble()&lt;/code>&lt;/a>,
&lt;a href="https://tibble.tidyverse.org/reference/set_tidy_names.html" target="_blank" rel="noopener">&lt;code>set_tidy_names()&lt;/code>&lt;/a>,
&lt;a href="https://tibble.tidyverse.org/reference/tidy_names.html" target="_blank" rel="noopener">&lt;code>tidy_names()&lt;/code>&lt;/a>, and &lt;code>names&amp;lt;-()&lt;/code>, and a patch release that fixed problems found after the initial 2.0.0 release.
In this blog post, I focus on a few user- and programmer-related changes, and give an outlook over future development:&lt;/p>
&lt;ul>
&lt;li>
&lt;a href="https://tibble.tidyverse.org/reference/view.html" target="_blank" rel="noopener">&lt;code>view()&lt;/code>&lt;/a>, nameless
&lt;a href="https://tibble.tidyverse.org/reference/enframe.html" target="_blank" rel="noopener">&lt;code>enframe()&lt;/code>&lt;/a>, 2D columns&lt;/li>
&lt;li>Lifecycle, robustness, name repair, row names,
&lt;a href="https://tibble.tidyverse.org/reference/glimpse.html" target="_blank" rel="noopener">&lt;code>glimpse()&lt;/code>&lt;/a> for subclasses&lt;/li>
&lt;li>&lt;em>vctrs&lt;/em>, dependencies, decorations&lt;/li>
&lt;/ul>
&lt;p>For a complete overview please see the
&lt;a href="https://github.com/tidyverse/tibble/releases/tag/v2.0.0" target="_blank" rel="noopener">release notes&lt;/a>.&lt;/p>
&lt;p>Use the
&lt;a href="https://github.com/tidyverse/tibble/issues" target="_blank" rel="noopener">issue tracker&lt;/a> to submit bugs or suggest ideas, your contributions are always welcome.&lt;/p>
&lt;h2 id="changes-that-affect-users">Changes that affect users
&lt;a href="#changes-that-affect-users">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>
&lt;h3 id="view">view
&lt;a href="#view">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>The experimental
&lt;a href="https://tibble.tidyverse.org/reference/view.html" target="_blank" rel="noopener">&lt;code>view()&lt;/code>&lt;/a> function forwards its input to &lt;code>utils::View()&lt;/code> (only in interactive mode) and always returns its input invisibly, which is useful for pipe-based workflows.
Currently it is unclear if this functionality should live in &lt;em>tibble&lt;/em> or elsewhere.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="c1"># This is a no-op in non-interactive mode.&lt;/span>
&lt;span class="c1"># In interactive mode, a viewer window/pane will open.&lt;/span>
&lt;span class="n">iris&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">view&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;h3 id="nameless-enframe">Nameless enframe
&lt;a href="#nameless-enframe">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>The
&lt;a href="https://tibble.tidyverse.org/reference/enframe.html" target="_blank" rel="noopener">&lt;code>enframe()&lt;/code>&lt;/a> function always has been a good way to convert a (named) vector to a two-column data frame.
In this version, conversion to a one-column data frame is also supported by setting the &lt;code>name&lt;/code> argument to &lt;code>NULL&lt;/code>.
This is now the recommended way to turn a vector to a one-column tibble, due to changes to the default implementation of
&lt;a href="https://tibble.tidyverse.org/reference/as_tibble.html" target="_blank" rel="noopener">&lt;code>as_tibble()&lt;/code>&lt;/a>.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">enframe&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">letters&lt;/span>&lt;span class="n">[1&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="m">3&lt;/span>&lt;span class="n">]&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;PRE class="fansi fansi-output">&lt;CODE>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 3 x 2&lt;/span>
#&amp;gt; &lt;span style='font-weight: bold;'>name&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>value&lt;/span>
#&amp;gt; &lt;span style='color: #555555;font-style: italic;'>&amp;lt;int&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;chr&amp;gt;&lt;/span>
#&amp;gt; &lt;span style='color: #555555;'>1&lt;/span>&lt;span> 1 a &lt;/span>
#&amp;gt; &lt;span style='color: #555555;'>2&lt;/span>&lt;span> 2 b &lt;/span>
#&amp;gt; &lt;span style='color: #555555;'>3&lt;/span>&lt;span> 3 c&lt;/span>&lt;/CODE>&lt;/PRE>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">enframe&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">letters&lt;/span>&lt;span class="n">[1&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="m">3&lt;/span>&lt;span class="n">]&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">NULL&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;PRE class="fansi fansi-output">&lt;CODE>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 3 x 1&lt;/span>
#&amp;gt; &lt;span style='font-weight: bold;'>value&lt;/span>
#&amp;gt; &lt;span style='color: #555555;font-style: italic;'>&amp;lt;chr&amp;gt;&lt;/span>
#&amp;gt; &lt;span style='color: #555555;'>1&lt;/span>&lt;span> a &lt;/span>
#&amp;gt; &lt;span style='color: #555555;'>2&lt;/span>&lt;span> b &lt;/span>
#&amp;gt; &lt;span style='color: #555555;'>3&lt;/span>&lt;span> c&lt;/span>&lt;/CODE>&lt;/PRE>
&lt;h3 id="2d-columns">2D columns
&lt;a href="#2d-columns">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>&lt;code>tibble()&lt;/code> now supports columns that are matrices or data frames.
These have always been supported in data frames and are used in some modelling functions.
We are looking forward to supporting these and other exciting use cases, see also the
&lt;a href="https://adv-r.hadley.nz/vectors-chap.html#matrix-and-data-frame-columns" target="_blank" rel="noopener">Matrix and data frame columns&lt;/a> chapter of adv-r.
The number of rows in these objects must be consistent with the length of the other columns.
Internally, this feature required using &lt;code>NROW()&lt;/code> instead of &lt;code>length()&lt;/code> in a few spots, which conveniently returns the length for vectors and the number of rows for 2D objects.
The required support in &lt;em>pillar&lt;/em> has been added earlier last year.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">tibble&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="n">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="m">3&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">b&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">c&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">4&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="m">6&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="n">d&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">7&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="m">9&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">f&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">g&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">10&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">h&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">11&lt;/span>&lt;span class="p">)),&lt;/span>
&lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">diag&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">3&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;PRE class="fansi fansi-output">&lt;CODE>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 3 x 4&lt;/span>
#&amp;gt; &lt;span style='font-weight: bold;'>a&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>b$c&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>d$e&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>$f$g&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>$$h&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>i[,1]&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>[,2]&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>[,3]&lt;/span>
#&amp;gt; &lt;span style='color: #555555;font-style: italic;'>&amp;lt;int&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;int&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;int&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>
#&amp;gt; &lt;span style='color: #555555;'>1&lt;/span>&lt;span> 1 4 7 10 11 1 0 0&lt;/span>
#&amp;gt; &lt;span style='color: #555555;'>2&lt;/span>&lt;span> 2 5 8 10 11 0 1 0&lt;/span>
#&amp;gt; &lt;span style='color: #555555;'>3&lt;/span>&lt;span> 3 6 9 10 11 0 0 1&lt;/span>&lt;/CODE>&lt;/PRE>
&lt;h2 id="changes-that-affect-package-developers">Changes that affect package developers
&lt;a href="#changes-that-affect-package-developers">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>
&lt;h3 id="lifecycle">Lifecycle
&lt;a href="#lifecycle">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>
&lt;a href="https://www.tidyverse.org/lifecycle/" target="_blank" rel="noopener">&lt;img src="https://img.shields.io/badge/lifecycle-stable-brightgreen.svg" alt="Lifecycle">&lt;/a>&lt;/p>
&lt;p>All functions have been assigned a lifecycle.
The &lt;em>tibble&lt;/em> package has now reached the &amp;ldquo;stable&amp;rdquo; lifecycle, functions in a different lifecycle stage are marked as such in their documentation.
One example is the
&lt;a href="https://tibble.tidyverse.org/reference/add_row.html" target="_blank" rel="noopener">&lt;code>add_row()&lt;/code>&lt;/a> function: it is unclear if it should ensure that all columns have length one by wrapping in a list if necessary, and a better implementation is perhaps possible once &lt;em>tibble&lt;/em> uses the &lt;em>vctrs&lt;/em> package, see below.
Therefore this function is marked &amp;ldquo;questioning&amp;rdquo;.
Learn more about lifecycle in the tidyverse at &lt;a href="https://www.tidyverse.org/lifecycle/">https://www.tidyverse.org/lifecycle/&lt;/a>.&lt;/p>
&lt;h3 id="robustness">Robustness
&lt;a href="#robustness">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>The new &lt;code>.rows&lt;/code> argument to
&lt;a href="https://tibble.tidyverse.org/reference/tibble.html" target="_blank" rel="noopener">&lt;code>tibble()&lt;/code>&lt;/a> and
&lt;a href="https://tibble.tidyverse.org/reference/as_tibble.html" target="_blank" rel="noopener">&lt;code>as_tibble()&lt;/code>&lt;/a> allows specifying the expected number of rows explicitly, even if it&amp;rsquo;s evident from the data.
This supports writing even more defensive code.
The &lt;code>nrow&lt;/code> argument to the low-level
&lt;a href="https://tibble.tidyverse.org/reference/new_tibble.html" target="_blank" rel="noopener">&lt;code>new_tibble()&lt;/code>&lt;/a> constructor is now mandatory, on the other hand most expensive checks have been moved to the new
&lt;a href="https://tibble.tidyverse.org/reference/validate_tibble.html" target="_blank" rel="noopener">&lt;code>validate_tibble()&lt;/code>&lt;/a> function.
This means that constructions of tibbles is now faster by default if you know that the inputs are correct, but you can always double-check if needed.
See also the
&lt;a href="https://adv-r.hadley.nz/s3.html#s3-classes" target="_blank" rel="noopener">S3 classes&lt;/a> chapter in adv-r for motivation.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">b&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="m">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">.rows&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">3&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;PRE class="fansi fansi-output">&lt;CODE>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 3 x 2&lt;/span>
#&amp;gt; &lt;span style='font-weight: bold;'>a&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>b&lt;/span>
#&amp;gt; &lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;int&amp;gt;&lt;/span>
#&amp;gt; &lt;span style='color: #555555;'>1&lt;/span>&lt;span> 1 1&lt;/span>
#&amp;gt; &lt;span style='color: #555555;'>2&lt;/span>&lt;span> 1 2&lt;/span>
#&amp;gt; &lt;span style='color: #555555;'>3&lt;/span>&lt;span> 1 3&lt;/span>&lt;/CODE>&lt;/PRE>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">b&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">2&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="m">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">.rows&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">3&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; Error: Tibble columns must have consistent lengths, only values of length one are recycled:&lt;/span>
&lt;span class="c1">#&amp;gt; * Length 3: Requested with `.rows` argument&lt;/span>
&lt;span class="c1">#&amp;gt; * Length 2: Column `b`&lt;/span>
&lt;span class="nf">tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">.rows&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">3&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;PRE class="fansi fansi-output">&lt;CODE>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 3 x 1&lt;/span>
#&amp;gt; &lt;span style='font-weight: bold;'>a&lt;/span>
#&amp;gt; &lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>
#&amp;gt; &lt;span style='color: #555555;'>1&lt;/span>&lt;span> 1&lt;/span>
#&amp;gt; &lt;span style='color: #555555;'>2&lt;/span>&lt;span> 1&lt;/span>
#&amp;gt; &lt;span style='color: #555555;'>3&lt;/span>&lt;span> 1&lt;/span>&lt;/CODE>&lt;/PRE>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">as_tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">iris[1&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="m">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">]&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">.rows&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">3&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;PRE class="fansi fansi-output">&lt;CODE>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 3 x 5&lt;/span>
#&amp;gt; &lt;span style='font-weight: bold;'>Sepal.Length&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>Sepal.Width&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>Petal.Length&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>Petal.Width&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>Species&lt;/span>
#&amp;gt; &lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;fct&amp;gt;&lt;/span>&lt;span> &lt;/span>
#&amp;gt; &lt;span style='color: #555555;'>1&lt;/span>&lt;span> 5.1 3.5 1.4 0.2 setosa &lt;/span>
#&amp;gt; &lt;span style='color: #555555;'>2&lt;/span>&lt;span> 4.9 3 1.4 0.2 setosa &lt;/span>
#&amp;gt; &lt;span style='color: #555555;'>3&lt;/span>&lt;span> 4.7 3.2 1.3 0.2 setosa&lt;/span>&lt;/CODE>&lt;/PRE>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">new_tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">list&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="m">3&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">nrow&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">3&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;PRE class="fansi fansi-output">&lt;CODE>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 3 x 1&lt;/span>
#&amp;gt; &lt;span style='font-weight: bold;'>a&lt;/span>
#&amp;gt; &lt;span style='color: #555555;font-style: italic;'>&amp;lt;int&amp;gt;&lt;/span>
#&amp;gt; &lt;span style='color: #555555;'>1&lt;/span>&lt;span> 1&lt;/span>
#&amp;gt; &lt;span style='color: #555555;'>2&lt;/span>&lt;span> 2&lt;/span>
#&amp;gt; &lt;span style='color: #555555;'>3&lt;/span>&lt;span> 3&lt;/span>&lt;/CODE>&lt;/PRE>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">bad&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">new_tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">list&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="m">2&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">nrow&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">3&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">validate_tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">bad&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; Error: Tibble columns must have consistent lengths, only values of length one are recycled:&lt;/span>
&lt;span class="c1">#&amp;gt; * Length 3: Requested with `nrow` argument&lt;/span>
&lt;span class="c1">#&amp;gt; * Length 2: Column `a`&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;h3 id="name-repair">Name repair
&lt;a href="#name-repair">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>Column name repair has more direct support, via the new &lt;code>.name_repair&lt;/code> argument to
&lt;a href="https://tibble.tidyverse.org/reference/tibble.html" target="_blank" rel="noopener">&lt;code>tibble()&lt;/code>&lt;/a> and
&lt;a href="https://tibble.tidyverse.org/reference/as_tibble.html" target="_blank" rel="noopener">&lt;code>as_tibble()&lt;/code>&lt;/a>.
It takes the following values:&lt;/p>
&lt;ul>
&lt;li>&lt;code>&amp;quot;minimal&amp;quot;&lt;/code>: No name repair or checks, beyond basic existence.&lt;/li>
&lt;li>&lt;code>&amp;quot;unique&amp;quot;&lt;/code>: Make sure names are unique and not empty.&lt;/li>
&lt;li>&lt;code>&amp;quot;check_unique&amp;quot;&lt;/code>: (default value), no name repair, but check they are &lt;code>unique&lt;/code>.&lt;/li>
&lt;li>&lt;code>&amp;quot;universal&amp;quot;&lt;/code>: Make the names &lt;code>unique&lt;/code> and syntactic.&lt;/li>
&lt;li>a function: apply custom name repair (e.g., &lt;code>.name_repair = make.names&lt;/code> or &lt;code>.name_repair = ~make.names(., unique = TRUE)&lt;/code> for names in the style of base R).&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="c1">## by default, duplicate names are not allowed&lt;/span>
&lt;span class="nf">tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">`1a`&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">`1a`&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; Error: Column name `1a` must not be duplicated.&lt;/span>
&lt;span class="c1">#&amp;gt; Use .name_repair to specify repair.&lt;/span>
&lt;span class="c1">## you can authorize duplicate names&lt;/span>
&lt;span class="nf">tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">`1a`&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">`1a`&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">.name_repair&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;minimal&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;PRE class="fansi fansi-output">&lt;CODE>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 1 x 2&lt;/span>
#&amp;gt; &lt;span style='font-weight: bold;'>`1a`&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>`1a`&lt;/span>
#&amp;gt; &lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>
#&amp;gt; &lt;span style='color: #555555;'>1&lt;/span>&lt;span> 1 2&lt;/span>&lt;/CODE>&lt;/PRE>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="c1">## or request that the names be made unique&lt;/span>
&lt;span class="nf">tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">`1a`&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">`1a`&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">.name_repair&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;unique&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; New names:&lt;/span>
&lt;span class="c1">#&amp;gt; * `1a` -&amp;gt; `1a..1`&lt;/span>
&lt;span class="c1">#&amp;gt; * `1a` -&amp;gt; `1a..2`&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;PRE class="fansi fansi-output">&lt;CODE>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 1 x 2&lt;/span>
#&amp;gt; &lt;span style='font-weight: bold;'>`1a..1`&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>`1a..2`&lt;/span>
#&amp;gt; &lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>
#&amp;gt; &lt;span style='color: #555555;'>1&lt;/span>&lt;span> 1 2&lt;/span>&lt;/CODE>&lt;/PRE>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="c1">## or universal&lt;/span>
&lt;span class="nf">tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">`1a`&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">`1a`&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">.name_repair&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;universal&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; New names:&lt;/span>
&lt;span class="c1">#&amp;gt; * `1a` -&amp;gt; ..1a..1&lt;/span>
&lt;span class="c1">#&amp;gt; * `1a` -&amp;gt; ..1a..2&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;PRE class="fansi fansi-output">&lt;CODE>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 1 x 2&lt;/span>
#&amp;gt; &lt;span style='font-weight: bold;'>..1a..1&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>..1a..2&lt;/span>
#&amp;gt; &lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>
#&amp;gt; &lt;span style='color: #555555;'>1&lt;/span>&lt;span> 1 2&lt;/span>&lt;/CODE>&lt;/PRE>
&lt;h3 id="row-names">Row names
&lt;a href="#row-names">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>Row name handling is stricter.
Row names were never supported in
&lt;a href="https://tibble.tidyverse.org/reference/tibble.html" target="_blank" rel="noopener">&lt;code>tibble()&lt;/code>&lt;/a> and
&lt;a href="https://tibble.tidyverse.org/reference/new_tibble.html" target="_blank" rel="noopener">&lt;code>new_tibble()&lt;/code>&lt;/a>, and are now stripped by default in
&lt;a href="https://tibble.tidyverse.org/reference/as_tibble.html" target="_blank" rel="noopener">&lt;code>as_tibble()&lt;/code>&lt;/a>.
The &lt;code>rownames&lt;/code> argument to
&lt;a href="https://tibble.tidyverse.org/reference/as_tibble.html" target="_blank" rel="noopener">&lt;code>as_tibble()&lt;/code>&lt;/a> supports:&lt;/p>
&lt;ul>
&lt;li>&lt;code>NULL&lt;/code>: remove row names (default),&lt;/li>
&lt;li>&lt;code>NA&lt;/code>: keep row names,&lt;/li>
&lt;li>A string: the name of the new column that will contain the existing row names, which are no longer present in the result.&lt;/li>
&lt;/ul>
&lt;p>The old default can be restored by calling &lt;code>pkgconfig::set_config(&amp;quot;tibble::rownames&amp;quot;, NA)&lt;/code>, this also works for packages that import &lt;em>tibble&lt;/em>.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">rownames&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">as_tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mtcars&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1">#&amp;gt; [1] &amp;#34;1&amp;#34; &amp;#34;2&amp;#34; &amp;#34;3&amp;#34; &amp;#34;4&amp;#34; &amp;#34;5&amp;#34; &amp;#34;6&amp;#34; &amp;#34;7&amp;#34; &amp;#34;8&amp;#34; &amp;#34;9&amp;#34; &amp;#34;10&amp;#34; &amp;#34;11&amp;#34; &amp;#34;12&amp;#34; &amp;#34;13&amp;#34; &amp;#34;14&amp;#34;&lt;/span>
&lt;span class="c1">#&amp;gt; [15] &amp;#34;15&amp;#34; &amp;#34;16&amp;#34; &amp;#34;17&amp;#34; &amp;#34;18&amp;#34; &amp;#34;19&amp;#34; &amp;#34;20&amp;#34; &amp;#34;21&amp;#34; &amp;#34;22&amp;#34; &amp;#34;23&amp;#34; &amp;#34;24&amp;#34; &amp;#34;25&amp;#34; &amp;#34;26&amp;#34; &amp;#34;27&amp;#34; &amp;#34;28&amp;#34;&lt;/span>
&lt;span class="c1">#&amp;gt; [29] &amp;#34;29&amp;#34; &amp;#34;30&amp;#34; &amp;#34;31&amp;#34; &amp;#34;32&amp;#34;&lt;/span>
&lt;span class="nf">as_tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mtcars&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">rownames&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;make_model&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;PRE class="fansi fansi-output">&lt;CODE>#&amp;gt; &lt;span style='color: #555555;'># A tibble: 32 x 12&lt;/span>
#&amp;gt; &lt;span style='font-weight: bold;'>make_model&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>mpg&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>cyl&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>disp&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>hp&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>drat&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>wt&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>qsec&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>vs&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>am&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>gear&lt;/span>
#&amp;gt; &lt;span style='color: #555555;font-style: italic;'>&amp;lt;chr&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>
#&amp;gt; &lt;span style='color: #555555;'> 1&lt;/span>&lt;span> Mazda RX4 21 6 160 110 3.9 2.62 16.5 0 1 4&lt;/span>
#&amp;gt; &lt;span style='color: #555555;'> 2&lt;/span>&lt;span> Mazda RX4… 21 6 160 110 3.9 2.88 17.0 0 1 4&lt;/span>
#&amp;gt; &lt;span style='color: #555555;'> 3&lt;/span>&lt;span> Datsun 710 22.8 4 108 93 3.85 2.32 18.6 1 1 4&lt;/span>
#&amp;gt; &lt;span style='color: #555555;'> 4&lt;/span>&lt;span> Hornet 4 … 21.4 6 258 110 3.08 3.22 19.4 1 0 3&lt;/span>
#&amp;gt; &lt;span style='color: #555555;'> 5&lt;/span>&lt;span> Hornet Sp… 18.7 8 360 175 3.15 3.44 17.0 0 0 3&lt;/span>
#&amp;gt; &lt;span style='color: #555555;'> 6&lt;/span>&lt;span> Valiant 18.1 6 225 105 2.76 3.46 20.2 1 0 3&lt;/span>
#&amp;gt; &lt;span style='color: #555555;'> 7&lt;/span>&lt;span> Duster 360 14.3 8 360 245 3.21 3.57 15.8 0 0 3&lt;/span>
#&amp;gt; &lt;span style='color: #555555;'> 8&lt;/span>&lt;span> Merc 240D 24.4 4 147. 62 3.69 3.19 20 1 0 4&lt;/span>
#&amp;gt; &lt;span style='color: #555555;'> 9&lt;/span>&lt;span> Merc 230 22.8 4 141. 95 3.92 3.15 22.9 1 0 4&lt;/span>
#&amp;gt; &lt;span style='color: #555555;'>10&lt;/span>&lt;span> Merc 280 19.2 6 168. 123 3.92 3.44 18.3 1 0 4&lt;/span>
#&amp;gt; &lt;span style='color: #555555;'># … with 22 more rows, and 1 more variable: &lt;/span>&lt;span style='color: #555555;font-weight: bold;'>carb&lt;/span>&lt;span style='color: #555555;'> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;/CODE>&lt;/PRE>
&lt;h3 id="glimpse-for-subclasses">glimpse for subclasses
&lt;a href="#glimpse-for-subclasses">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>The
&lt;a href="https://tibble.tidyverse.org/reference/glimpse.html" target="_blank" rel="noopener">&lt;code>glimpse()&lt;/code>&lt;/a> function shows information obtained from
&lt;a href="https://tibble.tidyverse.org/reference/tbl_sum.html" target="_blank" rel="noopener">&lt;code>tbl_sum()&lt;/code>&lt;/a> in the header, e.g. grouping information for &lt;code>grouped_df&lt;/code> from &lt;em>dplyr&lt;/em>, or other information from packages that override the &lt;code>tbl_df&lt;/code> class.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">iris&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_by&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Species&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">glimpse&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;PRE class="fansi fansi-output">&lt;CODE>#&amp;gt; Observations: 150
#&amp;gt; Variables: 5
#&amp;gt; Groups: Species [3]
#&amp;gt; $ &lt;span style='font-weight: bold;'>Sepal.Length&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;span> 5.1, 4.9, 4.7, 4.6, 5.0, 5.4, 4.6, 5.0, 4.4, 4.9, 5…&lt;/span>
#&amp;gt; $ &lt;span style='font-weight: bold;'>Sepal.Width &lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;span> 3.5, 3.0, 3.2, 3.1, 3.6, 3.9, 3.4, 3.4, 2.9, 3.1, 3…&lt;/span>
#&amp;gt; $ &lt;span style='font-weight: bold;'>Petal.Length&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;span> 1.4, 1.4, 1.3, 1.5, 1.4, 1.7, 1.4, 1.5, 1.4, 1.5, 1…&lt;/span>
#&amp;gt; $ &lt;span style='font-weight: bold;'>Petal.Width &lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;span> 0.2, 0.2, 0.2, 0.2, 0.2, 0.4, 0.3, 0.2, 0.2, 0.1, 0…&lt;/span>
#&amp;gt; $ &lt;span style='font-weight: bold;'>Species &lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;fct&amp;gt;&lt;/span>&lt;span> setosa, setosa, setosa, setosa, setosa, setosa, set…&lt;/span>&lt;/CODE>&lt;/PRE>
&lt;h2 id="outlook">Outlook
&lt;a href="#outlook">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>
&lt;h3 id="vctrs">vctrs
&lt;a href="#vctrs">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>The plan is to
&lt;a href="https://github.com/tidyverse/tibble/issues/521" target="_blank" rel="noopener">use &lt;em>vctrs&lt;/em>&lt;/a> in &lt;em>tibble&lt;/em> 2.1.0.
This package is a solid foundation for handling coercion, concatenation and recycling in vectors of arbitrary type.
The support provided by &lt;em>vctrs&lt;/em> will yield a better
&lt;a href="https://tibble.tidyverse.org/reference/add_row.html" target="_blank" rel="noopener">&lt;code>add_row()&lt;/code>&lt;/a> implementation, in return name repair which is currently defined in &lt;em>tibble&lt;/em> should likely live in &lt;em>vctrs&lt;/em>.&lt;/p>
&lt;h3 id="dependencies">Dependencies
&lt;a href="#dependencies">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>Currently, installing &lt;em>tibble&lt;/em> can bring in almost dozen other packages:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">tools&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="nf">package_dependencies&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;tibble&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">recursive&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">TRUE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">which&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;Imports&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; $tibble&lt;/span>
&lt;span class="c1">#&amp;gt; [1] &amp;#34;cli&amp;#34; &amp;#34;crayon&amp;#34; &amp;#34;fansi&amp;#34; &amp;#34;methods&amp;#34; &amp;#34;pillar&amp;#34; &lt;/span>
&lt;span class="c1">#&amp;gt; [6] &amp;#34;pkgconfig&amp;#34; &amp;#34;rlang&amp;#34; &amp;#34;utils&amp;#34; &amp;#34;assertthat&amp;#34; &amp;#34;grDevices&amp;#34; &lt;/span>
&lt;span class="c1">#&amp;gt; [11] &amp;#34;utf8&amp;#34; &amp;#34;tools&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Some of them, namely &lt;em>fansi&lt;/em> and &lt;em>utf8&lt;/em>, contain code that requires compilation and are only required for optional features.
&lt;a href="https://github.com/tidyverse/tibble/issues/475" target="_blank" rel="noopener">The plan&lt;/a> is to make these packages, and &lt;em>crayon&lt;/em>, a suggested package to &lt;em>cli&lt;/em>, and provide fallback implementations there.
When finished, taking a strong dependency on &lt;em>tibble&lt;/em> won&amp;rsquo;t add too many new dependencies (again): &lt;em>rlang&lt;/em>, &lt;em>vctrs&lt;/em> and &lt;em>cli&lt;/em> will be used by most of the tidyverse anyway, &lt;em>pillar&lt;/em> is the only truly new strong dependency.
Packages that subclass &lt;code>tbl_df&lt;/code> should import &lt;em>tibble&lt;/em> to make sure that the subsetting operator &lt;code>[&lt;/code> always behaves the same.
Constructing (subclasses of) tibbles should happen through
&lt;a href="https://tibble.tidyverse.org/reference/new_tibble.html" target="_blank" rel="noopener">&lt;code>new_tibble()&lt;/code>&lt;/a> only.&lt;/p>
&lt;h3 id="decorations">Decorations
&lt;a href="#decorations">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>Tibbles have a very opinionated way to print their data, not always in line with users&amp;rsquo; expectations, and sometimes clearly wrong (e.g. for numerical data where the absolute mean is much larger than the standard deviation).
It seems difficult to devise a formatting that suits all needs, especially for numbers: how do we tell if a number represents money, or perhaps is a misspecified categorical variable or a UID?
&lt;a href="https://github.com/tidyverse/tibble/pull/411" target="_blank" rel="noopener">Decorations&lt;/a> are an idea that might help here.
A decoration is applied only when printing a vector, which behaves identically to a bare vector otherwise.
Decorations can be &amp;ldquo;learned&amp;rdquo; from the data (using heuristics), or specified directly after import or when creating column,
and stored in attribues like &lt;code>&amp;quot;class&amp;quot;&lt;/code>.
It will be important to make sure that these attributes survive subsetting and perhaps some arithmetic transformations, easiest to achieve with the help of &lt;em>vctrs&lt;/em>.&lt;/p>
&lt;h2 id="acknowledgments">Acknowledgments
&lt;a href="#acknowledgments">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Thanks to Brodie Gaslam (
&lt;a href="https://github.com/brodieG" target="_blank" rel="noopener">@brodieG&lt;/a>) for his help with formatting this blog post and for spotting inaccurate wording.&lt;/p>
&lt;p>We also received issues, pull requests, and comments from 108 people since tibble 1.4.2. Thanks to everyone:&lt;/p>
&lt;p>
&lt;a href="https://github.com/adam-gruer" target="_blank" rel="noopener">@adam-gruer&lt;/a>,
&lt;a href="https://github.com/aegerton" target="_blank" rel="noopener">@aegerton&lt;/a>,
&lt;a href="https://github.com/alaindanet" target="_blank" rel="noopener">@alaindanet&lt;/a>,
&lt;a href="https://github.com/alexpghayes" target="_blank" rel="noopener">@alexpghayes&lt;/a>,
&lt;a href="https://github.com/alexwhan" target="_blank" rel="noopener">@alexwhan&lt;/a>,
&lt;a href="https://github.com/alistaire47" target="_blank" rel="noopener">@alistaire47&lt;/a>,
&lt;a href="https://github.com/anhqle" target="_blank" rel="noopener">@anhqle&lt;/a>,
&lt;a href="https://github.com/batpigandme" target="_blank" rel="noopener">@batpigandme&lt;/a>,
&lt;a href="https://github.com/brendanf" target="_blank" rel="noopener">@brendanf&lt;/a>,
&lt;a href="https://github.com/brodieG" target="_blank" rel="noopener">@brodieG&lt;/a>,
&lt;a href="https://github.com/cfhammill" target="_blank" rel="noopener">@cfhammill&lt;/a>,
&lt;a href="https://github.com/christophsax" target="_blank" rel="noopener">@christophsax&lt;/a>,
&lt;a href="https://github.com/cimentadaj" target="_blank" rel="noopener">@cimentadaj&lt;/a>,
&lt;a href="https://github.com/czeildi" target="_blank" rel="noopener">@czeildi&lt;/a>,
&lt;a href="https://github.com/DasHammett" target="_blank" rel="noopener">@DasHammett&lt;/a>,
&lt;a href="https://github.com/DavisVaughan" target="_blank" rel="noopener">@DavisVaughan&lt;/a>,
&lt;a href="https://github.com/earowang" target="_blank" rel="noopener">@earowang&lt;/a>,
&lt;a href="https://github.com/Eluvias" target="_blank" rel="noopener">@Eluvias&lt;/a>,
&lt;a href="https://github.com/Enchufa2" target="_blank" rel="noopener">@Enchufa2&lt;/a>,
&lt;a href="https://github.com/esford3" target="_blank" rel="noopener">@esford3&lt;/a>,
&lt;a href="https://github.com/flying-sheep" target="_blank" rel="noopener">@flying-sheep&lt;/a>,
&lt;a href="https://github.com/gavinsimpson" target="_blank" rel="noopener">@gavinsimpson&lt;/a>,
&lt;a href="https://github.com/GeorgeHayduke" target="_blank" rel="noopener">@GeorgeHayduke&lt;/a>,
&lt;a href="https://github.com/gregorp" target="_blank" rel="noopener">@gregorp&lt;/a>,
&lt;a href="https://github.com/hadley" target="_blank" rel="noopener">@hadley&lt;/a>,
&lt;a href="https://github.com/IndrajeetPatil" target="_blank" rel="noopener">@IndrajeetPatil&lt;/a>,
&lt;a href="https://github.com/iron0012" target="_blank" rel="noopener">@iron0012&lt;/a>,
&lt;a href="https://github.com/isteves" target="_blank" rel="noopener">@isteves&lt;/a>,
&lt;a href="https://github.com/jeffreyhanson" target="_blank" rel="noopener">@jeffreyhanson&lt;/a>,
&lt;a href="https://github.com/jennybc" target="_blank" rel="noopener">@jennybc&lt;/a>,
&lt;a href="https://github.com/jimhester" target="_blank" rel="noopener">@jimhester&lt;/a>,
&lt;a href="https://github.com/JLYJabc" target="_blank" rel="noopener">@JLYJabc&lt;/a>,
&lt;a href="https://github.com/joranE" target="_blank" rel="noopener">@joranE&lt;/a>,
&lt;a href="https://github.com/jtelleriar" target="_blank" rel="noopener">@jtelleriar&lt;/a>,
&lt;a href="https://github.com/karldw" target="_blank" rel="noopener">@karldw&lt;/a>,
&lt;a href="https://github.com/kendonB" target="_blank" rel="noopener">@kendonB&lt;/a>,
&lt;a href="https://github.com/kevinushey" target="_blank" rel="noopener">@kevinushey&lt;/a>,
&lt;a href="https://github.com/kovla" target="_blank" rel="noopener">@kovla&lt;/a>,
&lt;a href="https://github.com/lbusett" target="_blank" rel="noopener">@lbusett&lt;/a>,
&lt;a href="https://github.com/lionel-" target="_blank" rel="noopener">@lionel-&lt;/a>,
&lt;a href="https://github.com/lorenzwalthert" target="_blank" rel="noopener">@lorenzwalthert&lt;/a>,
&lt;a href="https://github.com/lwiklendt" target="_blank" rel="noopener">@lwiklendt&lt;/a>,
&lt;a href="https://github.com/mattfidler" target="_blank" rel="noopener">@mattfidler&lt;/a>,
&lt;a href="https://github.com/MatthieuStigler" target="_blank" rel="noopener">@MatthieuStigler&lt;/a>,
&lt;a href="https://github.com/maxheld83" target="_blank" rel="noopener">@maxheld83&lt;/a>,
&lt;a href="https://github.com/michaelweylandt" target="_blank" rel="noopener">@michaelweylandt&lt;/a>,
&lt;a href="https://github.com/mingsu" target="_blank" rel="noopener">@mingsu&lt;/a>,
&lt;a href="https://github.com/momeara" target="_blank" rel="noopener">@momeara&lt;/a>,
&lt;a href="https://github.com/PalaceChan" target="_blank" rel="noopener">@PalaceChan&lt;/a>,
&lt;a href="https://github.com/pat-s" target="_blank" rel="noopener">@pat-s&lt;/a>,
&lt;a href="https://github.com/plantarum" target="_blank" rel="noopener">@plantarum&lt;/a>,
&lt;a href="https://github.com/prosoitos" target="_blank" rel="noopener">@prosoitos&lt;/a>,
&lt;a href="https://github.com/ptoche" target="_blank" rel="noopener">@ptoche&lt;/a>,
&lt;a href="https://github.com/QuLogic" target="_blank" rel="noopener">@QuLogic&lt;/a>,
&lt;a href="https://github.com/ralonso-igenomix" target="_blank" rel="noopener">@ralonso-igenomix&lt;/a>,
&lt;a href="https://github.com/randomgambit" target="_blank" rel="noopener">@randomgambit&lt;/a>,
&lt;a href="https://github.com/riccardopinosio" target="_blank" rel="noopener">@riccardopinosio&lt;/a>,
&lt;a href="https://github.com/romainfrancois" target="_blank" rel="noopener">@romainfrancois&lt;/a>,
&lt;a href="https://github.com/tomroh" target="_blank" rel="noopener">@tomroh&lt;/a>,
&lt;a href="https://github.com/Woosah" target="_blank" rel="noopener">@Woosah&lt;/a>,
&lt;a href="https://github.com/yonicd" target="_blank" rel="noopener">@yonicd&lt;/a>, and
&lt;a href="https://github.com/yutannihilation" target="_blank" rel="noopener">@yutannihilation&lt;/a>.&lt;/p></description></item><item><title>dbplyr 1.3.0</title><link>https://www.tidyverse.org/blog/2019/01/dbplyr-1-3-0/</link><pubDate>Wed, 09 Jan 2019 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2019/01/dbplyr-1-3-0/</guid><description>&lt;p>We&amp;rsquo;re stoked to announce that
&lt;a href="https://dbplyr.tidyverse.org" target="_blank" rel="noopener">dbplyr&lt;/a> 1.3.0 is now available on CRAN. dbplyr is the database backend for dplyr, translating dplyr syntax into SQL. This is a minor release primarily for compatibility with dplyr 0.8.0. However, there have been some changes to the API, and minor improvements (the full details of which can be found in the
&lt;a href="https://dbplyr.tidyverse.org/news/index.html" target="_blank" rel="noopener">changelog&lt;/a>). A more substantive update can be expected after rstudio::conf.&lt;/p>
&lt;h2 id="api-changes">API changes
&lt;a href="#api-changes">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;ul>
&lt;li>
&lt;p>Calls of the form &lt;code>dplyr::foo()&lt;/code> are now evaluated in the database, rather than locally.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>The &lt;code>vars&lt;/code> argument to
&lt;a href="https://dbplyr.tidyverse.org/reference/tbl_sql.html" target="_blank" rel="noopener">&lt;code>tbl_sql()&lt;/code>&lt;/a> has been formally deprecated.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>src&lt;/code> and &lt;code>tbl&lt;/code> objects now include a class generated from the class of the underlying connection object. This makes it possible for dplyr backends to implement different behaviour at the dplyr level, when needed.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="sql-translation">SQL translation
&lt;a href="#sql-translation">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;ul>
&lt;li>
&lt;p>The new &lt;code>as.integer64(x)&lt;/code> is translated to &lt;code>CAST(x AS BIGINT)&lt;/code>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>
&lt;a href="https://dplyr.tidyverse.org/reference/cumall.html" target="_blank" rel="noopener">&lt;code>cummean()&lt;/code>&lt;/a> now translates to SQL &lt;code>AVG()&lt;/code> as opposed to &lt;code>MEAN()&lt;/code>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>x %in% y&lt;/code> is now translated to &lt;code>FALSE&lt;/code> if &lt;code>y&lt;/code> is empty.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Thank you to the 49 people who contributed to this release:
&lt;a href="https://github.com/AkhilGNair" target="_blank" rel="noopener">@AkhilGNair&lt;/a>,
&lt;a href="https://github.com/andypohl" target="_blank" rel="noopener">@andypohl&lt;/a>,
&lt;a href="https://github.com/batpigandme" target="_blank" rel="noopener">@batpigandme&lt;/a>,
&lt;a href="https://github.com/bogdanrau" target="_blank" rel="noopener">@bogdanrau&lt;/a>,
&lt;a href="https://github.com/cboettig" target="_blank" rel="noopener">@cboettig&lt;/a>,
&lt;a href="https://github.com/cderv" target="_blank" rel="noopener">@cderv&lt;/a>,
&lt;a href="https://github.com/chris-park" target="_blank" rel="noopener">@chris-park&lt;/a>,
&lt;a href="https://github.com/colearendt" target="_blank" rel="noopener">@colearendt&lt;/a>,
&lt;a href="https://github.com/copernican" target="_blank" rel="noopener">@copernican&lt;/a>,
&lt;a href="https://github.com/cseidman" target="_blank" rel="noopener">@cseidman&lt;/a>,
&lt;a href="https://github.com/DavisVaughan" target="_blank" rel="noopener">@DavisVaughan&lt;/a>,
&lt;a href="https://github.com/dgrtwo" target="_blank" rel="noopener">@dgrtwo&lt;/a>,
&lt;a href="https://github.com/dlindelof" target="_blank" rel="noopener">@dlindelof&lt;/a>,
&lt;a href="https://github.com/dpprdan" target="_blank" rel="noopener">@dpprdan&lt;/a>,
&lt;a href="https://github.com/edgararuiz" target="_blank" rel="noopener">@edgararuiz&lt;/a>,
&lt;a href="https://github.com/foonwong" target="_blank" rel="noopener">@foonwong&lt;/a>,
&lt;a href="https://github.com/gbisschoff" target="_blank" rel="noopener">@gbisschoff&lt;/a>,
&lt;a href="https://github.com/hadley" target="_blank" rel="noopener">@hadley&lt;/a>,
&lt;a href="https://github.com/halldc" target="_blank" rel="noopener">@halldc&lt;/a>,
&lt;a href="https://github.com/happyshows" target="_blank" rel="noopener">@happyshows&lt;/a>,
&lt;a href="https://github.com/iangow" target="_blank" rel="noopener">@iangow&lt;/a>,
&lt;a href="https://github.com/javierluraschi" target="_blank" rel="noopener">@javierluraschi&lt;/a>,
&lt;a href="https://github.com/jimhester" target="_blank" rel="noopener">@jimhester&lt;/a>,
&lt;a href="https://github.com/jinaliu" target="_blank" rel="noopener">@jinaliu&lt;/a>,
&lt;a href="https://github.com/JohnMount" target="_blank" rel="noopener">@JohnMount&lt;/a>,
&lt;a href="https://github.com/jonthegeek" target="_blank" rel="noopener">@jonthegeek&lt;/a>,
&lt;a href="https://github.com/jrjohnson0821" target="_blank" rel="noopener">@jrjohnson0821&lt;/a>,
&lt;a href="https://github.com/karldw" target="_blank" rel="noopener">@karldw&lt;/a>,
&lt;a href="https://github.com/kevinykuo" target="_blank" rel="noopener">@kevinykuo&lt;/a>,
&lt;a href="https://github.com/kmace" target="_blank" rel="noopener">@kmace&lt;/a>,
&lt;a href="https://github.com/krlmlr" target="_blank" rel="noopener">@krlmlr&lt;/a>,
&lt;a href="https://github.com/lincis" target="_blank" rel="noopener">@lincis&lt;/a>,
&lt;a href="https://github.com/lionel-" target="_blank" rel="noopener">@lionel-&lt;/a>,
&lt;a href="https://github.com/mfalcioni1" target="_blank" rel="noopener">@mfalcioni1&lt;/a>,
&lt;a href="https://github.com/mgirlich" target="_blank" rel="noopener">@mgirlich&lt;/a>,
&lt;a href="https://github.com/mkirzon" target="_blank" rel="noopener">@mkirzon&lt;/a>,
&lt;a href="https://github.com/mkuehn10" target="_blank" rel="noopener">@mkuehn10&lt;/a>,
&lt;a href="https://github.com/mtmorgan" target="_blank" rel="noopener">@mtmorgan&lt;/a>,
&lt;a href="https://github.com/N1h1l1sT" target="_blank" rel="noopener">@N1h1l1sT&lt;/a>,
&lt;a href="https://github.com/Prometheus77" target="_blank" rel="noopener">@Prometheus77&lt;/a>,
&lt;a href="https://github.com/ramnathv" target="_blank" rel="noopener">@ramnathv&lt;/a>,
&lt;a href="https://github.com/romainfrancois" target="_blank" rel="noopener">@romainfrancois&lt;/a>,
&lt;a href="https://github.com/sandan" target="_blank" rel="noopener">@sandan&lt;/a>,
&lt;a href="https://github.com/sverchkov" target="_blank" rel="noopener">@sverchkov&lt;/a>,
&lt;a href="https://github.com/tdsmith" target="_blank" rel="noopener">@tdsmith&lt;/a>,
&lt;a href="https://github.com/tmastny" target="_blank" rel="noopener">@tmastny&lt;/a>,
&lt;a href="https://github.com/TomWeishaar" target="_blank" rel="noopener">@TomWeishaar&lt;/a>,
&lt;a href="https://github.com/vitallish" target="_blank" rel="noopener">@vitallish&lt;/a>, and
&lt;a href="https://github.com/yutannihilation" target="_blank" rel="noopener">@yutannihilation&lt;/a>.&lt;/p></description></item><item><title>haven 2.0.0</title><link>https://www.tidyverse.org/blog/2019/01/haven-2-0-0/</link><pubDate>Wed, 02 Jan 2019 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2019/01/haven-2-0-0/</guid><description>
&lt;p>We’re pleased to announce that &lt;a href="https://haven.tidyverse.org/">haven 2.0.0&lt;/a> is now on CRAN. haven enables R to read and write various data formats used by other statistical packages by wrapping the &lt;a href="https://github.com/WizardMac/ReadStat">ReadStat&lt;/a> C library written by &lt;a href="http://www.evanmiller.org/">Evan Miller&lt;/a>. As always, you can find a detailed account of all the changes in this release in the &lt;a href="https://haven.tidyverse.org/news/index.html#haven-2-0-0">Changelog&lt;/a>.&lt;/p>
&lt;div id="breaking-changes" class="section level2">
&lt;h2>Breaking changes&lt;/h2>
&lt;p>The biggest change is that &lt;a href="https://haven.tidyverse.org/reference/labelled.html">&lt;code>labelled()&lt;/code>&lt;/a> and &lt;a href="https://haven.tidyverse.org/reference/labelled_spss.html">&lt;code>labelled_spss()&lt;/code>&lt;/a> now produce objects with class “haven_labelled” and “haven_labelled_spss”. This resolves a &lt;a href="https://github.com/tidyverse/haven/issues/329">problematic clash&lt;/a> with the labelled class defined by &lt;a href="http://www.fharrell.com/">Frank Harrell&lt;/a>’s &lt;a href="https://cran.r-project.org/web/packages/Hmisc/index.html">Hmisc&lt;/a> package.&lt;/p>
&lt;p>Given Hmisc has been around much longer than haven (Hmisc’s oldest source &lt;a href="https://cran.r-project.org/src/contrib/Archive/Hmisc/">archive on CRAN&lt;/a> is from 2003), it makes sense that haven should be the one to make the change. This will require some changes to packages that use haven, but shouldn’t affect user code.&lt;/p>
&lt;pre class="r">&lt;code>x1 &amp;lt;- haven::labelled(c(1, 1, 2), c(Grunt = 1, Sgt = 2),
label = &amp;quot;Army status&amp;quot;)
class(x1)
#&amp;gt; [1] &amp;quot;haven_labelled&amp;quot;&lt;/code>&lt;/pre>
&lt;pre class="r">&lt;code>x2 &amp;lt;- haven::labelled_spss(1:10, c(Good = 1, Bad = 8), na_range = c(9, Inf),
label = &amp;quot;Quality rating&amp;quot;)
class(x2)
#&amp;gt; [1] &amp;quot;haven_labelled_spss&amp;quot; &amp;quot;haven_labelled&amp;quot;&lt;/code>&lt;/pre>
&lt;/div>
&lt;div id="minor-improvements" class="section level2">
&lt;h2>Minor improvements&lt;/h2>
&lt;p>&lt;code>labelled()&lt;/code> and &lt;code>labelled_spss()&lt;/code> now support adding the label attribute to the resulting object (as seen in the code above). The label is a short, human-readable description of the object, and is now also used when printing, and can be easily removed using the new &lt;a href="https://haven.tidyverse.org/reference/zap_label.html">&lt;code>zap_label()&lt;/code>&lt;/a> function.&lt;/p>
&lt;pre class="r">&lt;code>x1
#&amp;gt; &amp;lt;Labelled double&amp;gt;: Army status
#&amp;gt; [1] 1 1 2
#&amp;gt;
#&amp;gt; Labels:
#&amp;gt; value label
#&amp;gt; 1 Grunt
#&amp;gt; 2 Sgt
zap_labels(x1)
#&amp;gt; [1] 1 1 2
#&amp;gt; attr(,&amp;quot;label&amp;quot;)
#&amp;gt; [1] &amp;quot;Army status&amp;quot;&lt;/code>&lt;/pre>
&lt;/div>
&lt;div id="acknowledgements" class="section level2">
&lt;h2>Acknowledgements&lt;/h2>
&lt;p>A special thanks to &lt;a href="https://github.com/huftis">Karl Ove Hufthammer&lt;/a> for implementing &lt;code>zap_label()&lt;/code>, as well as to the 30 others who contributed to this release: &lt;a href="https://github.com/ajdamico">@ajdamico&lt;/a>, &lt;a href="https://github.com/alexeyknorre">@alexeyknorre&lt;/a>, &lt;a href="https://github.com/batpigandme">@batpigandme&lt;/a>, &lt;a href="https://github.com/beckerbenj">@beckerbenj&lt;/a>, &lt;a href="https://github.com/caayala">@caayala&lt;/a>, &lt;a href="https://github.com/Crismoc">@Crismoc&lt;/a>, &lt;a href="https://github.com/dar143">@dar143&lt;/a>, &lt;a href="https://github.com/davidc92">@davidc92&lt;/a>, &lt;a href="https://github.com/elbersb">@elbersb&lt;/a>, &lt;a href="https://github.com/gergness">@gergness&lt;/a>, &lt;a href="https://github.com/hadley">@hadley&lt;/a>, &lt;a href="https://github.com/helge-baumann">@helge-baumann&lt;/a>, &lt;a href="https://github.com/HughParsonage">@HughParsonage&lt;/a>, &lt;a href="https://github.com/iadli100">@iadli100&lt;/a>, &lt;a href="https://github.com/JanMarvin">@JanMarvin&lt;/a>, &lt;a href="https://github.com/jeffeaton">@jeffeaton&lt;/a>, &lt;a href="https://github.com/jimhester">@jimhester&lt;/a>, &lt;a href="https://github.com/jmetzel">@jmetzel&lt;/a>, &lt;a href="https://github.com/larmarange">@larmarange&lt;/a>, &lt;a href="https://github.com/lemzwerg">@lemzwerg&lt;/a>, &lt;a href="https://github.com/Majid-Eismann">@Majid-Eismann&lt;/a>, &lt;a href="https://github.com/nealrichardson">@nealrichardson&lt;/a>, &lt;a href="https://github.com/oscardssmith">@oscardssmith&lt;/a>, &lt;a href="https://github.com/philstraforelli">@philstraforelli&lt;/a>, &lt;a href="https://github.com/reyntjesr">@reyntjesr&lt;/a>, &lt;a href="https://github.com/rubenarslan">@rubenarslan&lt;/a>, &lt;a href="https://github.com/sjkiss">@sjkiss&lt;/a>, &lt;a href="https://github.com/visseho">@visseho&lt;/a>, &lt;a href="https://github.com/zkamvar">@zkamvar&lt;/a>, and &lt;a href="https://github.com/zross">@zross&lt;/a>.&lt;/p>
&lt;/div></description></item><item><title>readr 1.3.1</title><link>https://www.tidyverse.org/blog/2018/12/readr-1-3-1/</link><pubDate>Thu, 27 Dec 2018 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2018/12/readr-1-3-1/</guid><description>&lt;p>
&lt;a href="http://readr.tidyverse.org" target="_blank" rel="noopener">readr&lt;/a> 1.3.1 is now available on CRAN! Learn more
about readr at &lt;a href="https://readr.tidyverse.org">https://readr.tidyverse.org&lt;/a>. Detailed notes are always in the
&lt;a href="https://readr.tidyverse.org/news/index.html#readr-1-3-1" target="_blank" rel="noopener">change log&lt;/a>.&lt;/p>
&lt;p>The readr package makes it easy to get rectangular data out of comma separated
(csv), tab separated (tsv) or fixed width files (fwf) and into R. It
is designed to flexibly parse many types of data found in the wild, while still
cleanly failing when data unexpectedly changes. If you are new to readr, the
best place to start is the
&lt;a href="https://r4ds.had.co.nz/data-import.html" target="_blank" rel="noopener">data import
chapter&lt;/a> in R for data science.&lt;/p>
&lt;p>The easiest way to install the latest version from CRAN is to install the whole tidyverse.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">install.packages&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;tidyverse&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Alternatively, install just readr from CRAN:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">install.packages&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;readr&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>readr is part of the core tidyverse, so load it with:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">tidyverse&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; ── Attaching packages ────────────────────────────────── tidyverse 1.2.1 ──&lt;/span>
&lt;span class="c1">#&amp;gt; ✔ ggplot2 3.1.0 ✔ purrr 0.2.5&lt;/span>
&lt;span class="c1">#&amp;gt; ✔ tibble 1.4.2 ✔ dplyr 0.7.8&lt;/span>
&lt;span class="c1">#&amp;gt; ✔ tidyr 0.8.2 ✔ stringr 1.3.1&lt;/span>
&lt;span class="c1">#&amp;gt; ✔ readr 1.3.1 ✔ forcats 0.3.0&lt;/span>
&lt;span class="c1">#&amp;gt; ── Conflicts ───────────────────────────────────── tidyverse_conflicts() ──&lt;/span>
&lt;span class="c1">#&amp;gt; ✖ dplyr::filter() masks stats::filter()&lt;/span>
&lt;span class="c1">#&amp;gt; ✖ dplyr::lag() masks stats::lag()&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>There have been three releases of readr recently, this post will highlight the
most significant changes across all three releases.&lt;/p>
&lt;h2 id="breaking-changes">Breaking Changes
&lt;a href="#breaking-changes">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>
&lt;h3 id="blank-line-skipping">Blank line skipping
&lt;a href="#blank-line-skipping">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>The logic for blank line skipping has been overhauled, which should make it
easier to predict and more robust.&lt;/p>
&lt;p>Now both commented lines and completely blank lines are skipped by default.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">file&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span>
&lt;span class="s">&amp;#34;# A file with comments
&lt;/span>&lt;span class="s">
&lt;/span>&lt;span class="s">first_name,last_name
&lt;/span>&lt;span class="s">Mary,Sue
&lt;/span>&lt;span class="s">John,Doe
&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>
&lt;span class="nf">read_csv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">file&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">comment&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;#&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 2 x 2&lt;/span>
&lt;span class="c1">#&amp;gt; first_name last_name&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; 1 Mary Sue &lt;/span>
&lt;span class="c1">#&amp;gt; 2 John Doe&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Some useful properties about &lt;code>skip&lt;/code>.&lt;/p>
&lt;ul>
&lt;li>It is a &lt;em>lower&lt;/em> bound on the number of lines that will actually be skipped.
e.g. both of the following examples result in identical output.&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">read_csv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">file&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">skip&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 2 x 2&lt;/span>
&lt;span class="c1">#&amp;gt; first_name last_name&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; 1 Mary Sue &lt;/span>
&lt;span class="c1">#&amp;gt; 2 John Doe&lt;/span>
&lt;span class="nf">read_csv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">file&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">skip&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 2 x 2&lt;/span>
&lt;span class="c1">#&amp;gt; first_name last_name&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; 1 Mary Sue &lt;/span>
&lt;span class="c1">#&amp;gt; 2 John Doe&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;code>skip&lt;/code> is enforced without looking at the line contents, so both commented
and blank lines are counted.&lt;/li>
&lt;/ul>
&lt;p>So if you wanted to skip all the way including the &lt;code>first_name,last_name&lt;/code> line
you would need to use &lt;code>skip = 3&lt;/code>. N.B. the results are identical with and
without &lt;code>comment = &amp;quot;#&amp;quot;&lt;/code>.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">read_csv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">file&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">skip&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">col_names&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">FALSE&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 2 x 2&lt;/span>
&lt;span class="c1">#&amp;gt; X1 X2 &lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 Mary Sue &lt;/span>
&lt;span class="c1">#&amp;gt; 2 John Doe&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;h3 id="integer-column-guessing">Integer column guessing
&lt;a href="#integer-column-guessing">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>readr functions no longer guess columns are of type integer, instead these
columns are guessed as numeric. Because R uses 32 bit integers and 64 bit
doubles all integers can be stored in doubles, guaranteeing no loss of
information. This change was made to remove errors when numeric columns were
incorrectly guessed as integers. If you know a certain column is an integer and
would like to read it as such you can do so by specifying the column type
explicitly with the &lt;code>col_types&lt;/code> argument.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">file&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span>
&lt;span class="s">&amp;#34;a,b
&lt;/span>&lt;span class="s">1,3
&lt;/span>&lt;span class="s">2,4
&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>
&lt;span class="nf">read_csv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">file&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">col_type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">b&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;i&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 2 x 2&lt;/span>
&lt;span class="c1">#&amp;gt; a b&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;int&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 1 3&lt;/span>
&lt;span class="c1">#&amp;gt; 2 2 4&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;h3 id="tibble-subclass">tibble subclass
&lt;a href="#tibble-subclass">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>readr now returns results with a &lt;code>spec_tbl_df&lt;/code> subclass. This differs from a
regular tibble only in that the &lt;code>spec&lt;/code> attribute (which holds the column
specification) is lost as soon as the object is subset and a normal &lt;code>tbl_df&lt;/code>
object is returned.&lt;/p>
&lt;p>Historically &lt;code>tbl_df&lt;/code>'s lost their attributes once they were subset. However
recent versions of tibble retain the attributes when subsetting, so the
&lt;code>spec_tbl_df&lt;/code> subclass is needed to retain the previous behavior.&lt;/p>
&lt;p>This should only break compatibility if you are explicitly checking the class
of the returned object. A way to get backwards compatible behavior is to
call subset with no arguments on your object, e.g. &lt;code>x[]&lt;/code>.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">data&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">read_csv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">file&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">class&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; [1] &amp;#34;spec_tbl_df&amp;#34; &amp;#34;tbl_df&amp;#34; &amp;#34;tbl&amp;#34; &amp;#34;data.frame&amp;#34;&lt;/span>
&lt;span class="nf">class&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data[]&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; [1] &amp;#34;tbl_df&amp;#34; &amp;#34;tbl&amp;#34; &amp;#34;data.frame&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;h2 id="new-features">New features
&lt;a href="#new-features">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>
&lt;h3 id="colored-specifications">Colored specifications
&lt;a href="#colored-specifications">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>The most user visible change is coloration of the column specifications. The column types are now colored based on 4 broad classes&lt;/p>
&lt;ul>
&lt;li>&lt;strong>&lt;font color="#CC0000">Red&lt;/font>&lt;/strong> - Character data (characters, factors)&lt;/li>
&lt;li>&lt;strong>&lt;font color="#4D9901">Green&lt;/font>&lt;/strong> - Numeric data (doubles, integers)&lt;/li>
&lt;li>&lt;strong>&lt;font color="#C6A30D">Yellow&lt;/font>&lt;/strong> - Logical data (logicals)&lt;/li>
&lt;li>&lt;strong>&lt;font color="#265A9E">Blue&lt;/font>&lt;/strong> - Temporal data (dates, times, datetimes)&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://www.tidyverse.org/images/readr-1.3.1/readr-colors.png" alt="Readr column specifications">&lt;/p>
&lt;p>By coloring the specification, we hope to make it easier to spot when a column
differs from the rest or when guessing leads to import with an unexpected type.&lt;/p>
&lt;p>The coloring can be disabled by setting &lt;code>options(crayon.enabled = FALSE)&lt;/code>.&lt;/p>
&lt;h3 id="melt-functions">Melt functions
&lt;a href="#melt-functions">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>There is now a family of &lt;code>melt_*()&lt;/code> functions in readr. These functions store
data in &amp;lsquo;long&amp;rsquo; or &amp;lsquo;melted&amp;rsquo; form, where each row corresponds to a single
value in the dataset. This form is useful when your data is ragged and not
rectangular.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">file&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span>
&lt;span class="s">&amp;#34;a,b,c
&lt;/span>&lt;span class="s">1,2
&lt;/span>&lt;span class="s">w,x,y,z&amp;#34;&lt;/span>
&lt;span class="n">readr&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="nf">melt_csv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">file&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 9 x 4&lt;/span>
&lt;span class="c1">#&amp;gt; row col data_type value&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 1 1 character a &lt;/span>
&lt;span class="c1">#&amp;gt; 2 1 2 character b &lt;/span>
&lt;span class="c1">#&amp;gt; 3 1 3 character c &lt;/span>
&lt;span class="c1">#&amp;gt; 4 2 1 integer 1 &lt;/span>
&lt;span class="c1">#&amp;gt; 5 2 2 integer 2 &lt;/span>
&lt;span class="c1">#&amp;gt; 6 3 1 character w &lt;/span>
&lt;span class="c1">#&amp;gt; 7 3 2 character x &lt;/span>
&lt;span class="c1">#&amp;gt; 8 3 3 character y &lt;/span>
&lt;span class="c1">#&amp;gt; 9 3 4 character z&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Thanks to
&lt;a href="https://github.com/nacnudus" target="_blank" rel="noopener">Duncan Garmonsway (@nacnudus)&lt;/a> for great work on the idea and
implementation of the &lt;code>melt_*()&lt;/code> functions!&lt;/p>
&lt;h3 id="connection-improvements">Connection improvements
&lt;a href="#connection-improvements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>In previous versions of readr the connections were read into an in-memory raw
vector, then passed to the readr functions. This made reading connections for
small to medium datasets fast, but also meant that the dataset had to fit into
memory at least twice (once for the raw data, once for the parsed data). It
also meant that reading could not begin until the full vector was read through
the connection.&lt;/p>
&lt;p>We now write the connection to a temporary file (in the R temporary directory),
than parse that temporary file. This means connections may take a little longer
to be read, but also means they will no longer need to fit into memory. It also
allows the use of the chunked readers to process the data in parts.&lt;/p>
&lt;p>Future improvements to readr could allow it to parse data from connections in a
streaming fashion, which would avoid many of the drawbacks of either approach.&lt;/p>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Thank you to the 188 contributors who made this release possible by opening issues or submitting pull requests:
&lt;a href="https://github.com/aaronschiff" target="_blank" rel="noopener">@aaronschiff&lt;/a>,
&lt;a href="https://github.com/abelew" target="_blank" rel="noopener">@abelew&lt;/a>,
&lt;a href="https://github.com/Abhijitsj" target="_blank" rel="noopener">@Abhijitsj&lt;/a>,
&lt;a href="https://github.com/ADraginda" target="_blank" rel="noopener">@ADraginda&lt;/a>,
&lt;a href="https://github.com/adrtod" target="_blank" rel="noopener">@adrtod&lt;/a>,
&lt;a href="https://github.com/ajdamico" target="_blank" rel="noopener">@ajdamico&lt;/a>,
&lt;a href="https://github.com/alessandro-gentilini" target="_blank" rel="noopener">@alessandro-gentilini&lt;/a>,
&lt;a href="https://github.com/arendsee" target="_blank" rel="noopener">@arendsee&lt;/a>,
&lt;a href="https://github.com/batpigandme" target="_blank" rel="noopener">@batpigandme&lt;/a>,
&lt;a href="https://github.com/bbrewington" target="_blank" rel="noopener">@bbrewington&lt;/a>,
&lt;a href="https://github.com/benmarwick" target="_blank" rel="noopener">@benmarwick&lt;/a>,
&lt;a href="https://github.com/benwhalley" target="_blank" rel="noopener">@benwhalley&lt;/a>,
&lt;a href="https://github.com/benzipperer" target="_blank" rel="noopener">@benzipperer&lt;/a>,
&lt;a href="https://github.com/BerwinTurlach" target="_blank" rel="noopener">@BerwinTurlach&lt;/a>,
&lt;a href="https://github.com/bheavner" target="_blank" rel="noopener">@bheavner&lt;/a>,
&lt;a href="https://github.com/billdenney" target="_blank" rel="noopener">@billdenney&lt;/a>,
&lt;a href="https://github.com/biostu24" target="_blank" rel="noopener">@biostu24&lt;/a>,
&lt;a href="https://github.com/blablablerg" target="_blank" rel="noopener">@blablablerg&lt;/a>,
&lt;a href="https://github.com/blakeboswell" target="_blank" rel="noopener">@blakeboswell&lt;/a>,
&lt;a href="https://github.com/brainfood" target="_blank" rel="noopener">@brainfood&lt;/a>,
&lt;a href="https://github.com/brianstamper" target="_blank" rel="noopener">@brianstamper&lt;/a>,
&lt;a href="https://github.com/brisk022" target="_blank" rel="noopener">@brisk022&lt;/a>,
&lt;a href="https://github.com/Brunohnp" target="_blank" rel="noopener">@Brunohnp&lt;/a>,
&lt;a href="https://github.com/bschneidr" target="_blank" rel="noopener">@bschneidr&lt;/a>,
&lt;a href="https://github.com/cameron-faerber" target="_blank" rel="noopener">@cameron-faerber&lt;/a>,
&lt;a href="https://github.com/Carenser" target="_blank" rel="noopener">@Carenser&lt;/a>,
&lt;a href="https://github.com/cboettig" target="_blank" rel="noopener">@cboettig&lt;/a>,
&lt;a href="https://github.com/cderv" target="_blank" rel="noopener">@cderv&lt;/a>,
&lt;a href="https://github.com/ChiWPak" target="_blank" rel="noopener">@ChiWPak&lt;/a>,
&lt;a href="https://github.com/christellacaze" target="_blank" rel="noopener">@christellacaze&lt;/a>,
&lt;a href="https://github.com/cimentadaj" target="_blank" rel="noopener">@cimentadaj&lt;/a>,
&lt;a href="https://github.com/conchoecia" target="_blank" rel="noopener">@conchoecia&lt;/a>,
&lt;a href="https://github.com/cuttlefish44" target="_blank" rel="noopener">@cuttlefish44&lt;/a>,
&lt;a href="https://github.com/dan-reznik" target="_blank" rel="noopener">@dan-reznik&lt;/a>,
&lt;a href="https://github.com/danielsjf" target="_blank" rel="noopener">@danielsjf&lt;/a>,
&lt;a href="https://github.com/dapperjapper" target="_blank" rel="noopener">@dapperjapper&lt;/a>,
&lt;a href="https://github.com/DarioS" target="_blank" rel="noopener">@DarioS&lt;/a>,
&lt;a href="https://github.com/DataStrategist" target="_blank" rel="noopener">@DataStrategist&lt;/a>,
&lt;a href="https://github.com/DDWetzel" target="_blank" rel="noopener">@DDWetzel&lt;/a>,
&lt;a href="https://github.com/DevGri" target="_blank" rel="noopener">@DevGri&lt;/a>,
&lt;a href="https://github.com/dfjenkins3" target="_blank" rel="noopener">@dfjenkins3&lt;/a>,
&lt;a href="https://github.com/dhbrand" target="_blank" rel="noopener">@dhbrand&lt;/a>,
&lt;a href="https://github.com/dhimmel" target="_blank" rel="noopener">@dhimmel&lt;/a>,
&lt;a href="https://github.com/digital-dharma" target="_blank" rel="noopener">@digital-dharma&lt;/a>,
&lt;a href="https://github.com/dioh" target="_blank" rel="noopener">@dioh&lt;/a>,
&lt;a href="https://github.com/djbirke" target="_blank" rel="noopener">@djbirke&lt;/a>,
&lt;a href="https://github.com/dkulp2" target="_blank" rel="noopener">@dkulp2&lt;/a>,
&lt;a href="https://github.com/dongzhuoer" target="_blank" rel="noopener">@dongzhuoer&lt;/a>,
&lt;a href="https://github.com/dpprdan" target="_blank" rel="noopener">@dpprdan&lt;/a>,
&lt;a href="https://github.com/Dulani" target="_blank" rel="noopener">@Dulani&lt;/a>,
&lt;a href="https://github.com/eddelbuettel" target="_blank" rel="noopener">@eddelbuettel&lt;/a>,
&lt;a href="https://github.com/ElToro1966" target="_blank" rel="noopener">@ElToro1966&lt;/a>,
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/Enchufa2" target="_blank" rel="noopener">@Enchufa2&lt;/a>,
&lt;a href="https://github.com/epetrovski" target="_blank" rel="noopener">@epetrovski&lt;/a>,
&lt;a href="https://github.com/eric-pedersen" target="_blank" rel="noopener">@eric-pedersen&lt;/a>,
&lt;a href="https://github.com/EricHe98" target="_blank" rel="noopener">@EricHe98&lt;/a>,
&lt;a href="https://github.com/EruIluvatar" target="_blank" rel="noopener">@EruIluvatar&lt;/a>,
&lt;a href="https://github.com/evelynmitchell" target="_blank" rel="noopener">@evelynmitchell&lt;/a>,
&lt;a href="https://github.com/EvgenyPetrovsky" target="_blank" rel="noopener">@EvgenyPetrovsky&lt;/a>,
&lt;a href="https://github.com/gandalf-randolph" target="_blank" rel="noopener">@gandalf-randolph&lt;/a>,
&lt;a href="https://github.com/GegznaV" target="_blank" rel="noopener">@GegznaV&lt;/a>,
&lt;a href="https://github.com/gergness" target="_blank" rel="noopener">@gergness&lt;/a>,
&lt;a href="https://github.com/ghost" target="_blank" rel="noopener">@ghost&lt;/a>,
&lt;a href="https://github.com/gksmyth" target="_blank" rel="noopener">@gksmyth&lt;/a>,
&lt;a href="https://github.com/gregrs-uk" target="_blank" rel="noopener">@gregrs-uk&lt;/a>,
&lt;a href="https://github.com/gwarnes-mdsol" target="_blank" rel="noopener">@gwarnes-mdsol&lt;/a>,
&lt;a href="https://github.com/ha0ye" target="_blank" rel="noopener">@ha0ye&lt;/a>,
&lt;a href="https://github.com/hadley" target="_blank" rel="noopener">@hadley&lt;/a>,
&lt;a href="https://github.com/hbeale" target="_blank" rel="noopener">@hbeale&lt;/a>,
&lt;a href="https://github.com/Henri-Lo" target="_blank" rel="noopener">@Henri-Lo&lt;/a>,
&lt;a href="https://github.com/hiltonmbr" target="_blank" rel="noopener">@hiltonmbr&lt;/a>,
&lt;a href="https://github.com/hmorzaria" target="_blank" rel="noopener">@hmorzaria&lt;/a>,
&lt;a href="https://github.com/holstius" target="_blank" rel="noopener">@holstius&lt;/a>,
&lt;a href="https://github.com/hstojic" target="_blank" rel="noopener">@hstojic&lt;/a>,
&lt;a href="https://github.com/huftis" target="_blank" rel="noopener">@huftis&lt;/a>,
&lt;a href="https://github.com/ilyasustun" target="_blank" rel="noopener">@ilyasustun&lt;/a>,
&lt;a href="https://github.com/IndrajeetPatil" target="_blank" rel="noopener">@IndrajeetPatil&lt;/a>,
&lt;a href="https://github.com/isomorphisms" target="_blank" rel="noopener">@isomorphisms&lt;/a>,
&lt;a href="https://github.com/isteves" target="_blank" rel="noopener">@isteves&lt;/a>,
&lt;a href="https://github.com/j-bartholome" target="_blank" rel="noopener">@j-bartholome&lt;/a>,
&lt;a href="https://github.com/J535D165" target="_blank" rel="noopener">@J535D165&lt;/a>,
&lt;a href="https://github.com/jaearick" target="_blank" rel="noopener">@jaearick&lt;/a>,
&lt;a href="https://github.com/jasonserviss" target="_blank" rel="noopener">@jasonserviss&lt;/a>,
&lt;a href="https://github.com/javierluraschi" target="_blank" rel="noopener">@javierluraschi&lt;/a>,
&lt;a href="https://github.com/jdeboer" target="_blank" rel="noopener">@jdeboer&lt;/a>,
&lt;a href="https://github.com/jennybc" target="_blank" rel="noopener">@jennybc&lt;/a>,
&lt;a href="https://github.com/jhpoelen" target="_blank" rel="noopener">@jhpoelen&lt;/a>,
&lt;a href="https://github.com/jiho" target="_blank" rel="noopener">@jiho&lt;/a>,
&lt;a href="https://github.com/jimhester" target="_blank" rel="noopener">@jimhester&lt;/a>,
&lt;a href="https://github.com/jimmo" target="_blank" rel="noopener">@jimmo&lt;/a>,
&lt;a href="https://github.com/johncassil" target="_blank" rel="noopener">@johncassil&lt;/a>,
&lt;a href="https://github.com/jomuller" target="_blank" rel="noopener">@jomuller&lt;/a>,
&lt;a href="https://github.com/jonovik" target="_blank" rel="noopener">@jonovik&lt;/a>,
&lt;a href="https://github.com/josiekre" target="_blank" rel="noopener">@josiekre&lt;/a>,
&lt;a href="https://github.com/jpiggod" target="_blank" rel="noopener">@jpiggod&lt;/a>,
&lt;a href="https://github.com/jschelbert" target="_blank" rel="noopener">@jschelbert&lt;/a>,
&lt;a href="https://github.com/jstaf" target="_blank" rel="noopener">@jstaf&lt;/a>,
&lt;a href="https://github.com/jtelleria" target="_blank" rel="noopener">@jtelleria&lt;/a>,
&lt;a href="https://github.com/jtelleriar" target="_blank" rel="noopener">@jtelleriar&lt;/a>,
&lt;a href="https://github.com/jtr13" target="_blank" rel="noopener">@jtr13&lt;/a>,
&lt;a href="https://github.com/juyeongkim" target="_blank" rel="noopener">@juyeongkim&lt;/a>,
&lt;a href="https://github.com/jzadra" target="_blank" rel="noopener">@jzadra&lt;/a>,
&lt;a href="https://github.com/kadekillary" target="_blank" rel="noopener">@kadekillary&lt;/a>,
&lt;a href="https://github.com/kendonB" target="_blank" rel="noopener">@kendonB&lt;/a>,
&lt;a href="https://github.com/kerry-ja" target="_blank" rel="noopener">@kerry-ja&lt;/a>,
&lt;a href="https://github.com/kevinushey" target="_blank" rel="noopener">@kevinushey&lt;/a>,
&lt;a href="https://github.com/kforner" target="_blank" rel="noopener">@kforner&lt;/a>,
&lt;a href="https://github.com/kk22boy" target="_blank" rel="noopener">@kk22boy&lt;/a>,
&lt;a href="https://github.com/KKulma" target="_blank" rel="noopener">@KKulma&lt;/a>,
&lt;a href="https://github.com/kos59125" target="_blank" rel="noopener">@kos59125&lt;/a>,
&lt;a href="https://github.com/kwstat" target="_blank" rel="noopener">@kwstat&lt;/a>,
&lt;a href="https://github.com/laresbernardo" target="_blank" rel="noopener">@laresbernardo&lt;/a>,
&lt;a href="https://github.com/lbartnik" target="_blank" rel="noopener">@lbartnik&lt;/a>,
&lt;a href="https://github.com/ldecicco-USGS" target="_blank" rel="noopener">@ldecicco-USGS&lt;/a>,
&lt;a href="https://github.com/Leo-Lee15" target="_blank" rel="noopener">@Leo-Lee15&lt;/a>,
&lt;a href="https://github.com/lsusatyo-gcmlp" target="_blank" rel="noopener">@lsusatyo-gcmlp&lt;/a>,
&lt;a href="https://github.com/martinjhnhadley" target="_blank" rel="noopener">@martinjhnhadley&lt;/a>,
&lt;a href="https://github.com/martj42" target="_blank" rel="noopener">@martj42&lt;/a>,
&lt;a href="https://github.com/matthewarbo" target="_blank" rel="noopener">@matthewarbo&lt;/a>,
&lt;a href="https://github.com/MatthieuStigler" target="_blank" rel="noopener">@MatthieuStigler&lt;/a>,
&lt;a href="https://github.com/mawds" target="_blank" rel="noopener">@mawds&lt;/a>,
&lt;a href="https://github.com/md0u80c9" target="_blank" rel="noopener">@md0u80c9&lt;/a>,
&lt;a href="https://github.com/mgirlich" target="_blank" rel="noopener">@mgirlich&lt;/a>,
&lt;a href="https://github.com/mikmart" target="_blank" rel="noopener">@mikmart&lt;/a>,
&lt;a href="https://github.com/mirkhosro" target="_blank" rel="noopener">@mirkhosro&lt;/a>,
&lt;a href="https://github.com/mohkar123" target="_blank" rel="noopener">@mohkar123&lt;/a>,
&lt;a href="https://github.com/momeara" target="_blank" rel="noopener">@momeara&lt;/a>,
&lt;a href="https://github.com/msberends" target="_blank" rel="noopener">@msberends&lt;/a>,
&lt;a href="https://github.com/msmall318" target="_blank" rel="noopener">@msmall318&lt;/a>,
&lt;a href="https://github.com/Naboum" target="_blank" rel="noopener">@Naboum&lt;/a>,
&lt;a href="https://github.com/nacnudus" target="_blank" rel="noopener">@nacnudus&lt;/a>,
&lt;a href="https://github.com/namelessjon" target="_blank" rel="noopener">@namelessjon&lt;/a>,
&lt;a href="https://github.com/nan1949" target="_blank" rel="noopener">@nan1949&lt;/a>,
&lt;a href="https://github.com/nbenn" target="_blank" rel="noopener">@nbenn&lt;/a>,
&lt;a href="https://github.com/neveldo" target="_blank" rel="noopener">@neveldo&lt;/a>,
&lt;a href="https://github.com/nevrome" target="_blank" rel="noopener">@nevrome&lt;/a>,
&lt;a href="https://github.com/NicolasImberty" target="_blank" rel="noopener">@NicolasImberty&lt;/a>,
&lt;a href="https://github.com/normandev" target="_blank" rel="noopener">@normandev&lt;/a>,
&lt;a href="https://github.com/olgamie" target="_blank" rel="noopener">@olgamie&lt;/a>,
&lt;a href="https://github.com/osorensen" target="_blank" rel="noopener">@osorensen&lt;/a>,
&lt;a href="https://github.com/pachevalier" target="_blank" rel="noopener">@pachevalier&lt;/a>,
&lt;a href="https://github.com/pakuipers" target="_blank" rel="noopener">@pakuipers&lt;/a>,
&lt;a href="https://github.com/pgensler" target="_blank" rel="noopener">@pgensler&lt;/a>,
&lt;a href="https://github.com/PMassicotte" target="_blank" rel="noopener">@PMassicotte&lt;/a>,
&lt;a href="https://github.com/prebours" target="_blank" rel="noopener">@prebours&lt;/a>,
&lt;a href="https://github.com/prosoitos" target="_blank" rel="noopener">@prosoitos&lt;/a>,
&lt;a href="https://github.com/QuLogic" target="_blank" rel="noopener">@QuLogic&lt;/a>,
&lt;a href="https://github.com/rafazaya" target="_blank" rel="noopener">@rafazaya&lt;/a>,
&lt;a href="https://github.com/ramiromagno" target="_blank" rel="noopener">@ramiromagno&lt;/a>,
&lt;a href="https://github.com/randomgambit" target="_blank" rel="noopener">@randomgambit&lt;/a>,
&lt;a href="https://github.com/raw937" target="_blank" rel="noopener">@raw937&lt;/a>,
&lt;a href="https://github.com/rdisalv2" target="_blank" rel="noopener">@rdisalv2&lt;/a>,
&lt;a href="https://github.com/rensa" target="_blank" rel="noopener">@rensa&lt;/a>,
&lt;a href="https://github.com/richierocks" target="_blank" rel="noopener">@richierocks&lt;/a>,
&lt;a href="https://github.com/RickPack" target="_blank" rel="noopener">@RickPack&lt;/a>,
&lt;a href="https://github.com/rmcd1024" target="_blank" rel="noopener">@rmcd1024&lt;/a>,
&lt;a href="https://github.com/RomeroBarata" target="_blank" rel="noopener">@RomeroBarata&lt;/a>,
&lt;a href="https://github.com/roshnamohan" target="_blank" rel="noopener">@roshnamohan&lt;/a>,
&lt;a href="https://github.com/ryanatanner" target="_blank" rel="noopener">@ryanatanner&lt;/a>,
&lt;a href="https://github.com/s-fleck" target="_blank" rel="noopener">@s-fleck&lt;/a>,
&lt;a href="https://github.com/saghirb" target="_blank" rel="noopener">@saghirb&lt;/a>,
&lt;a href="https://github.com/sambrady3" target="_blank" rel="noopener">@sambrady3&lt;/a>,
&lt;a href="https://github.com/seandavi" target="_blank" rel="noopener">@seandavi&lt;/a>,
&lt;a href="https://github.com/seanpor" target="_blank" rel="noopener">@seanpor&lt;/a>,
&lt;a href="https://github.com/sellisd" target="_blank" rel="noopener">@sellisd&lt;/a>,
&lt;a href="https://github.com/sibojan" target="_blank" rel="noopener">@sibojan&lt;/a>,
&lt;a href="https://github.com/SimonGoring" target="_blank" rel="noopener">@SimonGoring&lt;/a>,
&lt;a href="https://github.com/sindile" target="_blank" rel="noopener">@sindile&lt;/a>,
&lt;a href="https://github.com/statsccpr" target="_blank" rel="noopener">@statsccpr&lt;/a>,
&lt;a href="https://github.com/stelsemeyer" target="_blank" rel="noopener">@stelsemeyer&lt;/a>,
&lt;a href="https://github.com/StevenMMortimer" target="_blank" rel="noopener">@StevenMMortimer&lt;/a>,
&lt;a href="https://github.com/stianlagstad" target="_blank" rel="noopener">@stianlagstad&lt;/a>,
&lt;a href="https://github.com/tarmenic" target="_blank" rel="noopener">@tarmenic&lt;/a>,
&lt;a href="https://github.com/tdsmith" target="_blank" rel="noopener">@tdsmith&lt;/a>,
&lt;a href="https://github.com/thanosgatos" target="_blank" rel="noopener">@thanosgatos&lt;/a>,
&lt;a href="https://github.com/tigertoes" target="_blank" rel="noopener">@tigertoes&lt;/a>,
&lt;a href="https://github.com/tomsing1" target="_blank" rel="noopener">@tomsing1&lt;/a>,
&lt;a href="https://github.com/TPreijers" target="_blank" rel="noopener">@TPreijers&lt;/a>,
&lt;a href="https://github.com/tres-pitt" target="_blank" rel="noopener">@tres-pitt&lt;/a>,
&lt;a href="https://github.com/tungmilan" target="_blank" rel="noopener">@tungmilan&lt;/a>,
&lt;a href="https://github.com/wgrundlingh" target="_blank" rel="noopener">@wgrundlingh&lt;/a>,
&lt;a href="https://github.com/wibeasley" target="_blank" rel="noopener">@wibeasley&lt;/a>,
&lt;a href="https://github.com/willemvdb42" target="_blank" rel="noopener">@willemvdb42&lt;/a>,
&lt;a href="https://github.com/xhudik" target="_blank" rel="noopener">@xhudik&lt;/a>,
&lt;a href="https://github.com/yutannihilation" target="_blank" rel="noopener">@yutannihilation&lt;/a>,
&lt;a href="https://github.com/Zack-83" target="_blank" rel="noopener">@Zack-83&lt;/a>, and
&lt;a href="https://github.com/zeehio" target="_blank" rel="noopener">@zeehio&lt;/a>&lt;/p></description></item><item><title>readxl 1.2.0</title><link>https://www.tidyverse.org/blog/2018/12/readxl-1-2-0/</link><pubDate>Thu, 20 Dec 2018 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2018/12/readxl-1-2-0/</guid><description>&lt;p>We&amp;rsquo;re stoked to announce that
&lt;a href="http://readxl.tidyverse.org" target="_blank" rel="noopener">readxl&lt;/a> 1.2.0 is now available on CRAN. Learn more about readxl at &lt;a href="http://readxl.tidyverse.org">http://readxl.tidyverse.org&lt;/a>. Detailed notes are always in the
&lt;a href="https://readxl.tidyverse.org/news/index.html#readxl-1-2-0" target="_blank" rel="noopener">change log&lt;/a>.&lt;/p>
&lt;p>The readxl package makes it easy to get tabular data out of Excel files and into R with code, not mouse clicks. It supports both the legacy &lt;code>.xls&lt;/code> format and the modern XML-based &lt;code>.xlsx&lt;/code> format. readxl is expressly designed to be easy to install and use on all operating systems. Therefore it has no external dependencies, such as Java or Perl, which have historically been a source of aggravation with some R packages that read Excel files.&lt;/p>
&lt;p>The easiest way to install the latest version from CRAN is to install the whole tidyverse.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">install.packages&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;tidyverse&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Alternatively, install just readxl from CRAN:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">install.packages&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;readxl&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Regardless, you will still need to attach readxl explicitly. It is not a core tidyverse package, i.e. readxl is NOT attached via &lt;code>library(tidyverse)&lt;/code>. Instead, do this in your script:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">readxl&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;h2 id="column-name-repair">Column name repair
&lt;a href="#column-name-repair">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>The most exciting change in the v1.2.0 release is the introduction of the new &lt;code>.name_repair&lt;/code> argument to &lt;code>read_excel()&lt;/code>, &lt;code>read_xlsx()&lt;/code>, and &lt;code>read_xls()&lt;/code>. readxl exposes the &lt;code>.name_repair&lt;/code> argument that is
&lt;a href="https://www.tidyverse.org/articles/2018/11/tibble-2.0.0-pre-announce/" target="_blank" rel="noopener">coming soon to version 2.0.0 of the tibble package&lt;/a>. &lt;strong>Note: the following examples were executed with the not-yet-released version 2.0.0 of the tibble package.&lt;/strong>&lt;/p>
&lt;p>First, rest assured that if your sheet has unique column names, readxl leaves them alone, as always:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">read_excel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">readxl_example&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;datasets.xlsx&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">sheet&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;iris&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">n_max&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">3&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 3 x 5&lt;/span>
&lt;span class="c1">#&amp;gt; Sepal.Length Sepal.Width Petal.Length Petal.Width Species&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;chr&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; 1 5.1 3.5 1.4 0.2 setosa &lt;/span>
&lt;span class="c1">#&amp;gt; 2 4.9 3 1.4 0.2 setosa &lt;/span>
&lt;span class="c1">#&amp;gt; 3 4.7 3.2 1.3 0.2 setosa&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>However, spreadsheet column names frequently leave much to be desired. &lt;code>.name_repair&lt;/code> is a more flexible alternative to passing a specific vector of &lt;code>col_names&lt;/code>. You can express what you want in two main ways:&lt;/p>
&lt;ul>
&lt;li>Levels of name repair:
&lt;ul>
&lt;li>&lt;code>&amp;quot;minimal&amp;quot;&lt;/code>: use &lt;code>&amp;quot;&amp;quot;&lt;/code> for any missing names&lt;/li>
&lt;li>&lt;code>&amp;quot;unique&amp;quot;&lt;/code>: names are made unique &lt;strong>readxl&amp;rsquo;s default&lt;/strong>&lt;/li>
&lt;li>&lt;code>&amp;quot;universal&amp;quot;&lt;/code>: names are made &lt;code>&amp;quot;unique&amp;quot;&lt;/code> and syntactic&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Name repair strategy, as a function that takes (bad) names in and returns (good) names:
&lt;ul>
&lt;li>Function defined in base R, by another package, or by you&lt;/li>
&lt;li>Anonymous function, specified using a purrr-style &lt;code>~&lt;/code> formula&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>Here are two examples of specifying a name repair strategy.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="c1">## pass custom function to implement &amp;#34;lower_snake_case&amp;#34;&lt;/span>
&lt;span class="n">my_custom_name_repair&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nms&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">tolower&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">gsub&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;[.]&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;_&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">nms&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="nf">read_excel&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="nf">readxl_example&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;datasets.xlsx&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">n_max&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">3&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">.name_repair&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">my_custom_name_repair&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 3 x 5&lt;/span>
&lt;span class="c1">#&amp;gt; sepal_length sepal_width petal_length petal_width species&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;chr&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; 1 5.1 3.5 1.4 0.2 setosa &lt;/span>
&lt;span class="c1">#&amp;gt; 2 4.9 3 1.4 0.2 setosa &lt;/span>
&lt;span class="c1">#&amp;gt; 3 4.7 3.2 1.3 0.2 setosa&lt;/span>
&lt;span class="c1">## use purrr-style formula to truncate names at 3 characters&lt;/span>
&lt;span class="nf">read_excel&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="nf">readxl_example&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;datasets.xlsx&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">sheet&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;chickwts&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">n_max&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">3&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">.name_repair&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">~&lt;/span> &lt;span class="nf">substr&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">.x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">start&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">stop&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">3&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 3 x 2&lt;/span>
&lt;span class="c1">#&amp;gt; wei fee &lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;chr&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; 1 179 horsebean&lt;/span>
&lt;span class="c1">#&amp;gt; 2 160 horsebean&lt;/span>
&lt;span class="c1">#&amp;gt; 3 136 horsebean&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Read more in readxl&amp;rsquo;s new
&lt;a href="https://readxl.tidyverse.org/articles/articles/column-names.html" target="_blank" rel="noopener">Column Names&lt;/a> article.&lt;/p>
&lt;h2 id="hello-is-any-one-there">Hello, is any one there?
&lt;a href="#hello-is-any-one-there">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>readxl now displays a progress spinner in interactive sessions if it looks like the operation might take several seconds or more. This should provide some measure of reassurance when reading large sheets. This was accompanied by a rationalization of when readxl checks for user interrupts.&lt;/p>
&lt;h2 id="updated-libxls">Updated libxls
&lt;a href="#updated-libxls">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>The last user-visible change is that all known &lt;code>.xls&lt;/code> regressions have been fixed. The previous version, readxl v1.1.0, included some big updates in the embedded libxls library, which were overwhelmingly positive. But there were a few reports of &lt;code>.xls&lt;/code> files that went from &amp;ldquo;readable&amp;rdquo; to &amp;ldquo;unreadable&amp;rdquo;. To the best of my knowledge, those regressions have now all been addressed upstream and in readxl v1.2.0.&lt;/p>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Special thanks to Evan Miller for his recent work on libxls.&lt;/p>
&lt;p>Thank you to the 47 contributors who made this release possible:
&lt;a href="https://github.com/2005m" target="_blank" rel="noopener">@2005m&lt;/a>,
&lt;a href="https://github.com/ajdamico" target="_blank" rel="noopener">@ajdamico&lt;/a>,
&lt;a href="https://github.com/alfredojavier5" target="_blank" rel="noopener">@alfredojavier5&lt;/a>,
&lt;a href="https://github.com/antuki" target="_blank" rel="noopener">@antuki&lt;/a>,
&lt;a href="https://github.com/apreshill" target="_blank" rel="noopener">@apreshill&lt;/a>,
&lt;a href="https://github.com/awwsmm" target="_blank" rel="noopener">@awwsmm&lt;/a>,
&lt;a href="https://github.com/batpigandme" target="_blank" rel="noopener">@batpigandme&lt;/a>,
&lt;a href="https://github.com/berkorbay" target="_blank" rel="noopener">@berkorbay&lt;/a>,
&lt;a href="https://github.com/billdenney" target="_blank" rel="noopener">@billdenney&lt;/a>,
&lt;a href="https://github.com/breichholf" target="_blank" rel="noopener">@breichholf&lt;/a>,
&lt;a href="https://github.com/brianwdavis" target="_blank" rel="noopener">@brianwdavis&lt;/a>,
&lt;a href="https://github.com/chrowe" target="_blank" rel="noopener">@chrowe&lt;/a>,
&lt;a href="https://github.com/ddheart" target="_blank" rel="noopener">@ddheart&lt;/a>,
&lt;a href="https://github.com/doctsh" target="_blank" rel="noopener">@doctsh&lt;/a>,
&lt;a href="https://github.com/dominicshore" target="_blank" rel="noopener">@dominicshore&lt;/a>,
&lt;a href="https://github.com/Gillis" target="_blank" rel="noopener">@Gillis&lt;/a>,
&lt;a href="https://github.com/gorkang" target="_blank" rel="noopener">@gorkang&lt;/a>,
&lt;a href="https://github.com/gregdutkowski" target="_blank" rel="noopener">@gregdutkowski&lt;/a>,
&lt;a href="https://github.com/gregleleu" target="_blank" rel="noopener">@gregleleu&lt;/a>,
&lt;a href="https://github.com/hidekoji" target="_blank" rel="noopener">@hidekoji&lt;/a>,
&lt;a href="https://github.com/hlenka" target="_blank" rel="noopener">@hlenka&lt;/a>,
&lt;a href="https://github.com/hroptatyr" target="_blank" rel="noopener">@hroptatyr&lt;/a>,
&lt;a href="https://github.com/j6t" target="_blank" rel="noopener">@j6t&lt;/a>,
&lt;a href="https://github.com/jamesdalg" target="_blank" rel="noopener">@jamesdalg&lt;/a>,
&lt;a href="https://github.com/jameshunterbr" target="_blank" rel="noopener">@jameshunterbr&lt;/a>,
&lt;a href="https://github.com/jennybc" target="_blank" rel="noopener">@jennybc&lt;/a>,
&lt;a href="https://github.com/jeroen" target="_blank" rel="noopener">@jeroen&lt;/a>,
&lt;a href="https://github.com/jimhester" target="_blank" rel="noopener">@jimhester&lt;/a>,
&lt;a href="https://github.com/KS2907" target="_blank" rel="noopener">@KS2907&lt;/a>,
&lt;a href="https://github.com/KyleHaynes" target="_blank" rel="noopener">@KyleHaynes&lt;/a>,
&lt;a href="https://github.com/llrs" target="_blank" rel="noopener">@llrs&lt;/a>,
&lt;a href="https://github.com/ltierney" target="_blank" rel="noopener">@ltierney&lt;/a>,
&lt;a href="https://github.com/LTLA" target="_blank" rel="noopener">@LTLA&lt;/a>,
&lt;a href="https://github.com/mcSamuelDataSci" target="_blank" rel="noopener">@mcSamuelDataSci&lt;/a>,
&lt;a href="https://github.com/mdekstrand" target="_blank" rel="noopener">@mdekstrand&lt;/a>,
&lt;a href="https://github.com/msgoussi" target="_blank" rel="noopener">@msgoussi&lt;/a>,
&lt;a href="https://github.com/N1h1l1sT" target="_blank" rel="noopener">@N1h1l1sT&lt;/a>,
&lt;a href="https://github.com/pm321" target="_blank" rel="noopener">@pm321&lt;/a>,
&lt;a href="https://github.com/ptoche" target="_blank" rel="noopener">@ptoche&lt;/a>,
&lt;a href="https://github.com/randallhelms" target="_blank" rel="noopener">@randallhelms&lt;/a>,
&lt;a href="https://github.com/rnuske" target="_blank" rel="noopener">@rnuske&lt;/a>,
&lt;a href="https://github.com/roualdes" target="_blank" rel="noopener">@roualdes&lt;/a>,
&lt;a href="https://github.com/rrohwer" target="_blank" rel="noopener">@rrohwer&lt;/a>,
&lt;a href="https://github.com/SebVen" target="_blank" rel="noopener">@SebVen&lt;/a>,
&lt;a href="https://github.com/siemersn" target="_blank" rel="noopener">@siemersn&lt;/a>,
&lt;a href="https://github.com/VincentGuyader" target="_blank" rel="noopener">@VincentGuyader&lt;/a>, and
&lt;a href="https://github.com/yurasmol" target="_blank" rel="noopener">@yurasmol&lt;/a>.&lt;/p></description></item><item><title>tidyverse and r-lib: a year in review</title><link>https://www.tidyverse.org/blog/2018/12/tidyverse-and-r-lib-year-in-review/</link><pubDate>Mon, 17 Dec 2018 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2018/12/tidyverse-and-r-lib-year-in-review/</guid><description>&lt;p>It&amp;rsquo;s been a banner year for the tidyverse and r-lib teams, and, as we close out 2018, we wanted to take a look back at some of our achievements.&lt;/p>
&lt;p>We added significant roster depth this year, with
&lt;a href="https://twitter.com/dvaughan32/" target="_blank" rel="noopener">Davis Vaughan&lt;/a>,
&lt;a href="https://twitter.com/thomasp85/" target="_blank" rel="noopener">Thomas Lin Pedersen&lt;/a>, and
&lt;a href="https://twitter.com/romain_francois/" target="_blank" rel="noopener">Romain François&lt;/a> all joining the squad.&lt;/p>
&lt;h2 id="by-the-numbers">By the numbers
&lt;a href="#by-the-numbers">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;ul>
&lt;li>
&lt;p>&lt;strong>22&lt;/strong> new packages on CRAN (
&lt;a href="https://github.com/r-lib/vctrs" target="_blank" rel="noopener">vctrs&lt;/a>,
&lt;a href="https://github.com/tidymodels/parsnip" target="_blank" rel="noopener">parsnip&lt;/a>,
&lt;a href="https://github.com/r-lib/lobstr" target="_blank" rel="noopener">lobstr&lt;/a>,
&lt;a href="https://github.com/r-lib/sloop" target="_blank" rel="noopener">sloop&lt;/a>,
&lt;a href="https://github.com/r-lib/err" target="_blank" rel="noopener">err&lt;/a>,
&lt;a href="https://github.com/r-lib/generics" target="_blank" rel="noopener">generics&lt;/a>,
&lt;a href="https://github.com/r-lib/carrier" target="_blank" rel="noopener">carrier&lt;/a>,
&lt;a href="https://github.com/r-lib/xopen" target="_blank" rel="noopener">xopen&lt;/a>,
&lt;a href="https://github.com/tidymodels/embed" target="_blank" rel="noopener">embed&lt;/a>,
&lt;a href="https://github.com/tidymodels/dials" target="_blank" rel="noopener">dials&lt;/a>,
&lt;a href="https://github.com/tidymodels/tidymodels" target="_blank" rel="noopener">tidymodels&lt;/a>,
&lt;a href="https://github.com/r-lib/ps" target="_blank" rel="noopener">ps&lt;/a>,
&lt;a href="https://github.com/r-lib/pkgload" target="_blank" rel="noopener">pkgload&lt;/a>,
&lt;a href="https://github.com/r-lib/pkgbuild" target="_blank" rel="noopener">pkgbuild&lt;/a>,
&lt;a href="https://github.com/r-lib/conflicted" target="_blank" rel="noopener">conflicted&lt;/a>,
&lt;a href="https://github.com/r-lib/bench" target="_blank" rel="noopener">bench&lt;/a>,
&lt;a href="https://github.com/r-lib/pkgdown" target="_blank" rel="noopener">pkgdown&lt;/a>,
&lt;a href="https://github.com/r-lib/conf" target="_blank" rel="noopener">conf&lt;/a>,
&lt;a href="https://github.com/r-lib/filelock" target="_blank" rel="noopener">filelock&lt;/a>,
&lt;a href="https://github.com/r-lib/showimage" target="_blank" rel="noopener">showimage&lt;/a>,
&lt;a href="https://github.com/r-lib/fs" target="_blank" rel="noopener">fs&lt;/a>, and
&lt;a href="https://github.com/tidymodels/infer" target="_blank" rel="noopener">infer&lt;/a>.)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>54&lt;/strong> packages with &lt;em>major&lt;/em> releases&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>91&lt;/strong> packages with releases this year&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>100+&lt;/strong> talks and workshops&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>42&lt;/strong> articles on
&lt;a href="https://www.tidyverse.org/articles/" target="_blank" rel="noopener">tidyverse.org&lt;/a>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="major-accomplishments">Major accomplishments
&lt;a href="#major-accomplishments">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>After 6 years of development,
&lt;a href="https://www.tidyverse.org/articles/2018/05/pkgdown-1-0-0/" target="_blank" rel="noopener">&lt;strong>pkgdown&lt;/strong>&lt;/a> had its initial release on CRAN. pkgdown is designed to make it quick and easy to build a website for your package, and has already been used to make sites for over 2500 packages.&lt;/p>
&lt;p>Several major tidyverse package releases have centered on the implementation of
&lt;a href="https://tidyeval.tidyverse.org/" target="_blank" rel="noopener">&lt;strong>tidy evaluation&lt;/strong>&lt;/a>. Notable among these was the 3.0.0 release of
&lt;a href="https://www.tidyverse.org/articles/2018/07/ggplot2-3-0-0/" target="_blank" rel="noopener">&lt;strong>ggplot2&lt;/strong>&lt;/a>, which has more than 2000 reverse dependencies. We continue to improve our tools for and skills with releases with large numbers of reverse dependencies.&lt;/p>
&lt;p>
&lt;a href="https://www.tidyverse.org/articles/2018/10/devtools-2-0-0/" target="_blank" rel="noopener">&lt;strong>devtools 2.0.0&lt;/strong>&lt;/a> split the functionality in devtools into a number of smaller packages which are simpler to develop, and also easier for other packages to depend on. Though devtools will remain the primary package with which developers interact, the functionality will come from its component packages (in what we’re calling a
&lt;a href="https://github.com/r-lib/devtools#conscious-uncoupling" target="_blank" rel="noopener">conscious uncoupling&lt;/a>).&lt;/p>
&lt;p>The
&lt;a href="https://github.com/tidymodels" target="_blank" rel="noopener">&lt;strong>tidymodels&lt;/strong>&lt;/a> collection is the home of several new modelling packages, which follow opinionated but reasonable
&lt;a href="https://tidymodels.github.io/model-implementation-principles/" target="_blank" rel="noopener">model implementation practices&lt;/a>. This includes the
&lt;a href="https://tidymodels.github.io/parsnip/" target="_blank" rel="noopener">&lt;strong>parsnip&lt;/strong>&lt;/a> package, which standardizes the interface for fitting models as well as their return values — separating model &lt;em>specification&lt;/em> from model &lt;em>implementation&lt;/em> (
&lt;a href="https://www.tidyverse.org/articles/2018/11/parsnip-0-0-1/" target="_blank" rel="noopener">more detail here&lt;/a>). In effect, when using parsnip, you don’t have to remember each interface and its unique set of argument names to easily move between R packages.&lt;/p>
&lt;h2 id="consistency">Consistency
&lt;a href="#consistency">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Among the
&lt;a href="https://principles.tidyverse.org" target="_blank" rel="noopener">tidyverse development principles&lt;/a> is the goal of being
&lt;a href="https://principles.tidyverse.org/unifying-principles.html#consistent" target="_blank" rel="noopener">consistent&lt;/a>. This has, perhaps, been most visible in our implementation of
&lt;a href="https://tidyeval.tidyverse.org/" target="_blank" rel="noopener">tidy evaluation&lt;/a> across tidyverse packages. The
&lt;a href="https://fs.r-lib.org/" target="_blank" rel="noopener">&lt;strong>fs&lt;/strong>&lt;/a> r-lib package, first released at the beginning of the year, helps bring such consistency to file system operations. More recently, we’ve devised a consistent strategy for handling
&lt;a href="https://principles.tidyverse.org/names-attribute.html" target="_blank" rel="noopener">name repair&lt;/a> that can be used to make name-handling more predictable.
&lt;a href="https://vctrs.r-lib.org/" target="_blank" rel="noopener">&lt;strong>vctrs&lt;/strong>&lt;/a>, which recently had its first CRAN release, will allow us to bring
&lt;a href="https://vctrs.r-lib.org/articles/stability.html" target="_blank" rel="noopener">type- and size-stability&lt;/a> to user-facing functions; a major focus as we head into the next year.&lt;/p>
&lt;h2 id="tidyverse-dev-day">Tidyverse dev day
&lt;a href="#tidyverse-dev-day">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>We hope that our first
&lt;a href="https://www.tidyverse.org/articles/2018/11/tidyverse-developer-day-2019/" target="_blank" rel="noopener">&lt;strong>tidyverse developer day&lt;/strong>&lt;/a> (held after rstudio::conf) will help us continue to nurture regular contributors of all skill levels. We have 100 developers (50 general admission + 50 URM) signed up to participate, and we&amp;rsquo;re looking forward to a fun and productive day!&lt;/p>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>A huge thank you goes out to the &lt;strong>568&lt;/strong> people who submitted PRs to the
&lt;a href="https://github.com/tidyverse/" target="_blank" rel="noopener">tidyverse&lt;/a>,
&lt;a href="https://github.com/r-lib/" target="_blank" rel="noopener">r-lib&lt;/a>,
&lt;a href="https://github.com/tidymodels" target="_blank" rel="noopener">tidymodels&lt;/a>, or
&lt;a href="https://github.com/r-dbi" target="_blank" rel="noopener">r-dbi&lt;/a> repos in 2018:
&lt;a href="https://github.com/414theodore" target="_blank" rel="noopener">@414theodore&lt;/a>,
&lt;a href="https://github.com/aaronrudkin" target="_blank" rel="noopener">@aaronrudkin&lt;/a>,
&lt;a href="https://github.com/aaronwolen" target="_blank" rel="noopener">@aaronwolen&lt;/a>,
&lt;a href="https://github.com/aayala15" target="_blank" rel="noopener">@aayala15&lt;/a>,
&lt;a href="https://github.com/abichat" target="_blank" rel="noopener">@abichat&lt;/a>,
&lt;a href="https://github.com/adam-gruer" target="_blank" rel="noopener">@adam-gruer&lt;/a>,
&lt;a href="https://github.com/AdeelH" target="_blank" rel="noopener">@AdeelH&lt;/a>,
&lt;a href="https://github.com/adibender" target="_blank" rel="noopener">@adibender&lt;/a>,
&lt;a href="https://github.com/AdrianHordyk" target="_blank" rel="noopener">@AdrianHordyk&lt;/a>,
&lt;a href="https://github.com/AEBilgrau" target="_blank" rel="noopener">@AEBilgrau&lt;/a>,
&lt;a href="https://github.com/aeklant" target="_blank" rel="noopener">@aeklant&lt;/a>,
&lt;a href="https://github.com/aghaynes" target="_blank" rel="noopener">@aghaynes&lt;/a>,
&lt;a href="https://github.com/ahoho" target="_blank" rel="noopener">@ahoho&lt;/a>,
&lt;a href="https://github.com/ajdamico" target="_blank" rel="noopener">@ajdamico&lt;/a>,
&lt;a href="https://github.com/akbertram" target="_blank" rel="noopener">@akbertram&lt;/a>,
&lt;a href="https://github.com/AkhilGNair" target="_blank" rel="noopener">@AkhilGNair&lt;/a>,
&lt;a href="https://github.com/Alanocallaghan" target="_blank" rel="noopener">@Alanocallaghan&lt;/a>,
&lt;a href="https://github.com/alecuba16" target="_blank" rel="noopener">@alecuba16&lt;/a>,
&lt;a href="https://github.com/alexpghayes" target="_blank" rel="noopener">@alexpghayes&lt;/a>,
&lt;a href="https://github.com/alexwhan" target="_blank" rel="noopener">@alexwhan&lt;/a>,
&lt;a href="https://github.com/alistaire47" target="_blank" rel="noopener">@alistaire47&lt;/a>,
&lt;a href="https://github.com/amhrasmussen" target="_blank" rel="noopener">@amhrasmussen&lt;/a>,
&lt;a href="https://github.com/amilenkovic" target="_blank" rel="noopener">@amilenkovic&lt;/a>,
&lt;a href="https://github.com/AmundsenJunior" target="_blank" rel="noopener">@AmundsenJunior&lt;/a>,
&lt;a href="https://github.com/AndreaCirilloAC" target="_blank" rel="noopener">@AndreaCirilloAC&lt;/a>,
&lt;a href="https://github.com/andrewjlm" target="_blank" rel="noopener">@andrewjlm&lt;/a>,
&lt;a href="https://github.com/andrewpbray" target="_blank" rel="noopener">@andrewpbray&lt;/a>,
&lt;a href="https://github.com/anhqle" target="_blank" rel="noopener">@anhqle&lt;/a>,
&lt;a href="https://github.com/Anirudhsekar96" target="_blank" rel="noopener">@Anirudhsekar96&lt;/a>,
&lt;a href="https://github.com/ankane" target="_blank" rel="noopener">@ankane&lt;/a>,
&lt;a href="https://github.com/aoles" target="_blank" rel="noopener">@aoles&lt;/a>,
&lt;a href="https://github.com/apreshill" target="_blank" rel="noopener">@apreshill&lt;/a>,
&lt;a href="https://github.com/ArtemSokolov" target="_blank" rel="noopener">@ArtemSokolov&lt;/a>,
&lt;a href="https://github.com/artichaud1" target="_blank" rel="noopener">@artichaud1&lt;/a>,
&lt;a href="https://github.com/aryoda" target="_blank" rel="noopener">@aryoda&lt;/a>,
&lt;a href="https://github.com/AshesITR" target="_blank" rel="noopener">@AshesITR&lt;/a>,
&lt;a href="https://github.com/asieira" target="_blank" rel="noopener">@asieira&lt;/a>,
&lt;a href="https://github.com/atheriel" target="_blank" rel="noopener">@atheriel&lt;/a>,
&lt;a href="https://github.com/atusy" target="_blank" rel="noopener">@atusy&lt;/a>,
&lt;a href="https://github.com/atyre2" target="_blank" rel="noopener">@atyre2&lt;/a>,
&lt;a href="https://github.com/austensen" target="_blank" rel="noopener">@austensen&lt;/a>,
&lt;a href="https://github.com/austin3dickey" target="_blank" rel="noopener">@austin3dickey&lt;/a>,
&lt;a href="https://github.com/aviast" target="_blank" rel="noopener">@aviast&lt;/a>,
&lt;a href="https://github.com/Ax3man" target="_blank" rel="noopener">@Ax3man&lt;/a>,
&lt;a href="https://github.com/baogorek" target="_blank" rel="noopener">@baogorek&lt;/a>,
&lt;a href="https://github.com/BarkleyBG" target="_blank" rel="noopener">@BarkleyBG&lt;/a>,
&lt;a href="https://github.com/Bart6114" target="_blank" rel="noopener">@Bart6114&lt;/a>,
&lt;a href="https://github.com/bastistician" target="_blank" rel="noopener">@bastistician&lt;/a>,
&lt;a href="https://github.com/batpigandme" target="_blank" rel="noopener">@batpigandme&lt;/a>,
&lt;a href="https://github.com/bblette1" target="_blank" rel="noopener">@bblette1&lt;/a>,
&lt;a href="https://github.com/bbolker" target="_blank" rel="noopener">@bbolker&lt;/a>,
&lt;a href="https://github.com/bbrewington" target="_blank" rel="noopener">@bbrewington&lt;/a>,
&lt;a href="https://github.com/bcipolli" target="_blank" rel="noopener">@bcipolli&lt;/a>,
&lt;a href="https://github.com/bdemeshev" target="_blank" rel="noopener">@bdemeshev&lt;/a>,
&lt;a href="https://github.com/beanumber" target="_blank" rel="noopener">@beanumber&lt;/a>,
&lt;a href="https://github.com/benmarwick" target="_blank" rel="noopener">@benmarwick&lt;/a>,
&lt;a href="https://github.com/bensoltoff" target="_blank" rel="noopener">@bensoltoff&lt;/a>,
&lt;a href="https://github.com/bfgray3" target="_blank" rel="noopener">@bfgray3&lt;/a>,
&lt;a href="https://github.com/bgreenwell" target="_blank" rel="noopener">@bgreenwell&lt;/a>,
&lt;a href="https://github.com/bhive01" target="_blank" rel="noopener">@bhive01&lt;/a>,
&lt;a href="https://github.com/billdenney" target="_blank" rel="noopener">@billdenney&lt;/a>,
&lt;a href="https://github.com/Bisaloo" target="_blank" rel="noopener">@Bisaloo&lt;/a>,
&lt;a href="https://github.com/bjreisman" target="_blank" rel="noopener">@bjreisman&lt;/a>,
&lt;a href="https://github.com/blairj09" target="_blank" rel="noopener">@blairj09&lt;/a>,
&lt;a href="https://github.com/blakeboswell" target="_blank" rel="noopener">@blakeboswell&lt;/a>,
&lt;a href="https://github.com/blakeyc" target="_blank" rel="noopener">@blakeyc&lt;/a>,
&lt;a href="https://github.com/bleemayer" target="_blank" rel="noopener">@bleemayer&lt;/a>,
&lt;a href="https://github.com/bleutner" target="_blank" rel="noopener">@bleutner&lt;/a>,
&lt;a href="https://github.com/bmannakee" target="_blank" rel="noopener">@bmannakee&lt;/a>,
&lt;a href="https://github.com/boshek" target="_blank" rel="noopener">@boshek&lt;/a>,
&lt;a href="https://github.com/breichholf" target="_blank" rel="noopener">@breichholf&lt;/a>,
&lt;a href="https://github.com/BrianDiggs" target="_blank" rel="noopener">@BrianDiggs&lt;/a>,
&lt;a href="https://github.com/brianwdavis" target="_blank" rel="noopener">@brianwdavis&lt;/a>,
&lt;a href="https://github.com/briatte" target="_blank" rel="noopener">@briatte&lt;/a>,
&lt;a href="https://github.com/brodieG" target="_blank" rel="noopener">@brodieG&lt;/a>,
&lt;a href="https://github.com/brunolucian" target="_blank" rel="noopener">@brunolucian&lt;/a>,
&lt;a href="https://github.com/bschneidr" target="_blank" rel="noopener">@bschneidr&lt;/a>,
&lt;a href="https://github.com/burchill" target="_blank" rel="noopener">@burchill&lt;/a>,
&lt;a href="https://github.com/buyske" target="_blank" rel="noopener">@buyske&lt;/a>,
&lt;a href="https://github.com/byapparov" target="_blank" rel="noopener">@byapparov&lt;/a>,
&lt;a href="https://github.com/caijun" target="_blank" rel="noopener">@caijun&lt;/a>,
&lt;a href="https://github.com/calpan" target="_blank" rel="noopener">@calpan&lt;/a>,
&lt;a href="https://github.com/cathblatter" target="_blank" rel="noopener">@cathblatter&lt;/a>,
&lt;a href="https://github.com/cderv" target="_blank" rel="noopener">@cderv&lt;/a>,
&lt;a href="https://github.com/cfhammill" target="_blank" rel="noopener">@cfhammill&lt;/a>,
&lt;a href="https://github.com/CharlesNaylor" target="_blank" rel="noopener">@CharlesNaylor&lt;/a>,
&lt;a href="https://github.com/chendaniely" target="_blank" rel="noopener">@chendaniely&lt;/a>,
&lt;a href="https://github.com/chiarapiccino" target="_blank" rel="noopener">@chiarapiccino&lt;/a>,
&lt;a href="https://github.com/chris-park" target="_blank" rel="noopener">@chris-park&lt;/a>,
&lt;a href="https://github.com/ChrisMuir" target="_blank" rel="noopener">@ChrisMuir&lt;/a>,
&lt;a href="https://github.com/christophergandrud" target="_blank" rel="noopener">@christophergandrud&lt;/a>,
&lt;a href="https://github.com/ChuliangXiao" target="_blank" rel="noopener">@ChuliangXiao&lt;/a>,
&lt;a href="https://github.com/cimentadaj" target="_blank" rel="noopener">@cimentadaj&lt;/a>,
&lt;a href="https://github.com/ck37" target="_blank" rel="noopener">@ck37&lt;/a>,
&lt;a href="https://github.com/clauswilke" target="_blank" rel="noopener">@clauswilke&lt;/a>,
&lt;a href="https://github.com/ClaytonJY" target="_blank" rel="noopener">@ClaytonJY&lt;/a>,
&lt;a href="https://github.com/coatless" target="_blank" rel="noopener">@coatless&lt;/a>,
&lt;a href="https://github.com/codetriage-readme-bot" target="_blank" rel="noopener">@codetriage-readme-bot&lt;/a>,
&lt;a href="https://github.com/colearendt" target="_blank" rel="noopener">@colearendt&lt;/a>,
&lt;a href="https://github.com/ColinFay" target="_blank" rel="noopener">@ColinFay&lt;/a>,
&lt;a href="https://github.com/comicfans" target="_blank" rel="noopener">@comicfans&lt;/a>,
&lt;a href="https://github.com/ConorIA" target="_blank" rel="noopener">@ConorIA&lt;/a>,
&lt;a href="https://github.com/const-ae" target="_blank" rel="noopener">@const-ae&lt;/a>,
&lt;a href="https://github.com/coolbutuseless" target="_blank" rel="noopener">@coolbutuseless&lt;/a>,
&lt;a href="https://github.com/corinne-riddell" target="_blank" rel="noopener">@corinne-riddell&lt;/a>,
&lt;a href="https://github.com/CorradoLanera" target="_blank" rel="noopener">@CorradoLanera&lt;/a>,
&lt;a href="https://github.com/corybrunson" target="_blank" rel="noopener">@corybrunson&lt;/a>,
&lt;a href="https://github.com/cosmomeese" target="_blank" rel="noopener">@cosmomeese&lt;/a>,
&lt;a href="https://github.com/cpsievert" target="_blank" rel="noopener">@cpsievert&lt;/a>,
&lt;a href="https://github.com/crew102" target="_blank" rel="noopener">@crew102&lt;/a>,
&lt;a href="https://github.com/crossett" target="_blank" rel="noopener">@crossett&lt;/a>,
&lt;a href="https://github.com/cschroed-usgs" target="_blank" rel="noopener">@cschroed-usgs&lt;/a>,
&lt;a href="https://github.com/csetraynor" target="_blank" rel="noopener">@csetraynor&lt;/a>,
&lt;a href="https://github.com/ctbrown" target="_blank" rel="noopener">@ctbrown&lt;/a>,
&lt;a href="https://github.com/ctrombley" target="_blank" rel="noopener">@ctrombley&lt;/a>,
&lt;a href="https://github.com/cwickham" target="_blank" rel="noopener">@cwickham&lt;/a>,
&lt;a href="https://github.com/czeildi" target="_blank" rel="noopener">@czeildi&lt;/a>,
&lt;a href="https://github.com/daattali" target="_blank" rel="noopener">@daattali&lt;/a>,
&lt;a href="https://github.com/dandermotj" target="_blank" rel="noopener">@dandermotj&lt;/a>,
&lt;a href="https://github.com/daniel-barnett" target="_blank" rel="noopener">@daniel-barnett&lt;/a>,
&lt;a href="https://github.com/daniellima123" target="_blank" rel="noopener">@daniellima123&lt;/a>,
&lt;a href="https://github.com/DataWookie" target="_blank" rel="noopener">@DataWookie&lt;/a>,
&lt;a href="https://github.com/davechilders" target="_blank" rel="noopener">@davechilders&lt;/a>,
&lt;a href="https://github.com/davidkane9" target="_blank" rel="noopener">@davidkane9&lt;/a>,
&lt;a href="https://github.com/DavisVaughan" target="_blank" rel="noopener">@DavisVaughan&lt;/a>,
&lt;a href="https://github.com/dchiu911" target="_blank" rel="noopener">@dchiu911&lt;/a>,
&lt;a href="https://github.com/delferts" target="_blank" rel="noopener">@delferts&lt;/a>,
&lt;a href="https://github.com/devillemereuil" target="_blank" rel="noopener">@devillemereuil&lt;/a>,
&lt;a href="https://github.com/dgkf" target="_blank" rel="noopener">@dgkf&lt;/a>,
&lt;a href="https://github.com/dgromer" target="_blank" rel="noopener">@dgromer&lt;/a>,
&lt;a href="https://github.com/dgrtwo" target="_blank" rel="noopener">@dgrtwo&lt;/a>,
&lt;a href="https://github.com/diogocp" target="_blank" rel="noopener">@diogocp&lt;/a>,
&lt;a href="https://github.com/dleutnant" target="_blank" rel="noopener">@dleutnant&lt;/a>,
&lt;a href="https://github.com/dmenne" target="_blank" rel="noopener">@dmenne&lt;/a>,
&lt;a href="https://github.com/dominiklanger" target="_blank" rel="noopener">@dominiklanger&lt;/a>,
&lt;a href="https://github.com/dongzhuoer" target="_blank" rel="noopener">@dongzhuoer&lt;/a>,
&lt;a href="https://github.com/doug-friedman" target="_blank" rel="noopener">@doug-friedman&lt;/a>,
&lt;a href="https://github.com/dougmitarotonda" target="_blank" rel="noopener">@dougmitarotonda&lt;/a>,
&lt;a href="https://github.com/Dpananos" target="_blank" rel="noopener">@Dpananos&lt;/a>,
&lt;a href="https://github.com/dpastoor" target="_blank" rel="noopener">@dpastoor&lt;/a>,
&lt;a href="https://github.com/dpocock" target="_blank" rel="noopener">@dpocock&lt;/a>,
&lt;a href="https://github.com/dpprdan" target="_blank" rel="noopener">@dpprdan&lt;/a>,
&lt;a href="https://github.com/dpseidel" target="_blank" rel="noopener">@dpseidel&lt;/a>,
&lt;a href="https://github.com/dracodoc" target="_blank" rel="noopener">@dracodoc&lt;/a>,
&lt;a href="https://github.com/dragosmg" target="_blank" rel="noopener">@dragosmg&lt;/a>,
&lt;a href="https://github.com/drewabbot" target="_blank" rel="noopener">@drewabbot&lt;/a>,
&lt;a href="https://github.com/drkrynstrng" target="_blank" rel="noopener">@drkrynstrng&lt;/a>,
&lt;a href="https://github.com/drsimonj" target="_blank" rel="noopener">@drsimonj&lt;/a>,
&lt;a href="https://github.com/duckmayr" target="_blank" rel="noopener">@duckmayr&lt;/a>,
&lt;a href="https://github.com/duju211" target="_blank" rel="noopener">@duju211&lt;/a>,
&lt;a href="https://github.com/dvcv" target="_blank" rel="noopener">@dvcv&lt;/a>,
&lt;a href="https://github.com/dveeden" target="_blank" rel="noopener">@dveeden&lt;/a>,
&lt;a href="https://github.com/dvmlls" target="_blank" rel="noopener">@dvmlls&lt;/a>,
&lt;a href="https://github.com/dynamicwebpaige" target="_blank" rel="noopener">@dynamicwebpaige&lt;/a>,
&lt;a href="https://github.com/earowang" target="_blank" rel="noopener">@earowang&lt;/a>,
&lt;a href="https://github.com/echasnovski" target="_blank" rel="noopener">@echasnovski&lt;/a>,
&lt;a href="https://github.com/eclarke" target="_blank" rel="noopener">@eclarke&lt;/a>,
&lt;a href="https://github.com/econandrew" target="_blank" rel="noopener">@econandrew&lt;/a>,
&lt;a href="https://github.com/ecortens" target="_blank" rel="noopener">@ecortens&lt;/a>,
&lt;a href="https://github.com/eddelbuettel" target="_blank" rel="noopener">@eddelbuettel&lt;/a>,
&lt;a href="https://github.com/edgararuiz" target="_blank" rel="noopener">@edgararuiz&lt;/a>,
&lt;a href="https://github.com/edublancas" target="_blank" rel="noopener">@edublancas&lt;/a>,
&lt;a href="https://github.com/EdwinTh" target="_blank" rel="noopener">@EdwinTh&lt;/a>,
&lt;a href="https://github.com/edzer" target="_blank" rel="noopener">@edzer&lt;/a>,
&lt;a href="https://github.com/egnha" target="_blank" rel="noopener">@egnha&lt;/a>,
&lt;a href="https://github.com/elben10" target="_blank" rel="noopener">@elben10&lt;/a>,
&lt;a href="https://github.com/eliocamp" target="_blank" rel="noopener">@eliocamp&lt;/a>,
&lt;a href="https://github.com/EllaKaye" target="_blank" rel="noopener">@EllaKaye&lt;/a>,
&lt;a href="https://github.com/ellessenne" target="_blank" rel="noopener">@ellessenne&lt;/a>,
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/Enchufa2" target="_blank" rel="noopener">@Enchufa2&lt;/a>,
&lt;a href="https://github.com/endore" target="_blank" rel="noopener">@endore&lt;/a>,
&lt;a href="https://github.com/erleholgersen" target="_blank" rel="noopener">@erleholgersen&lt;/a>,
&lt;a href="https://github.com/erocoar" target="_blank" rel="noopener">@erocoar&lt;/a>,
&lt;a href="https://github.com/espinielli" target="_blank" rel="noopener">@espinielli&lt;/a>,
&lt;a href="https://github.com/ethchr" target="_blank" rel="noopener">@ethchr&lt;/a>,
&lt;a href="https://github.com/etiennebr" target="_blank" rel="noopener">@etiennebr&lt;/a>,
&lt;a href="https://github.com/evanhaldane" target="_blank" rel="noopener">@evanhaldane&lt;/a>,
&lt;a href="https://github.com/evanmiller" target="_blank" rel="noopener">@evanmiller&lt;/a>,
&lt;a href="https://github.com/everron" target="_blank" rel="noopener">@everron&lt;/a>,
&lt;a href="https://github.com/ewallace" target="_blank" rel="noopener">@ewallace&lt;/a>,
&lt;a href="https://github.com/ezequielpaura" target="_blank" rel="noopener">@ezequielpaura&lt;/a>,
&lt;a href="https://github.com/fbchow" target="_blank" rel="noopener">@fbchow&lt;/a>,
&lt;a href="https://github.com/fbreitwieser" target="_blank" rel="noopener">@fbreitwieser&lt;/a>,
&lt;a href="https://github.com/Felipe-Rubin" target="_blank" rel="noopener">@Felipe-Rubin&lt;/a>,
&lt;a href="https://github.com/filipefilardi" target="_blank" rel="noopener">@filipefilardi&lt;/a>,
&lt;a href="https://github.com/flaviobarros" target="_blank" rel="noopener">@flaviobarros&lt;/a>,
&lt;a href="https://github.com/flying-sheep" target="_blank" rel="noopener">@flying-sheep&lt;/a>,
&lt;a href="https://github.com/fmichonneau" target="_blank" rel="noopener">@fmichonneau&lt;/a>,
&lt;a href="https://github.com/foo-bar-baz-qux" target="_blank" rel="noopener">@foo-bar-baz-qux&lt;/a>,
&lt;a href="https://github.com/foundinblank" target="_blank" rel="noopener">@foundinblank&lt;/a>,
&lt;a href="https://github.com/frostell" target="_blank" rel="noopener">@frostell&lt;/a>,
&lt;a href="https://github.com/fxdlmatt" target="_blank" rel="noopener">@fxdlmatt&lt;/a>,
&lt;a href="https://github.com/gaborcsardi" target="_blank" rel="noopener">@gaborcsardi&lt;/a>,
&lt;a href="https://github.com/gadenbuie" target="_blank" rel="noopener">@gadenbuie&lt;/a>,
&lt;a href="https://github.com/gavinsimpson" target="_blank" rel="noopener">@gavinsimpson&lt;/a>,
&lt;a href="https://github.com/GegznaV" target="_blank" rel="noopener">@GegznaV&lt;/a>,
&lt;a href="https://github.com/gergness" target="_blank" rel="noopener">@gergness&lt;/a>,
&lt;a href="https://github.com/gfiumara" target="_blank" rel="noopener">@gfiumara&lt;/a>,
&lt;a href="https://github.com/ghost" target="_blank" rel="noopener">@ghost&lt;/a>,
&lt;a href="https://github.com/gitter-badger" target="_blank" rel="noopener">@gitter-badger&lt;/a>,
&lt;a href="https://github.com/GoldbergData" target="_blank" rel="noopener">@GoldbergData&lt;/a>,
&lt;a href="https://github.com/goldingn" target="_blank" rel="noopener">@goldingn&lt;/a>,
&lt;a href="https://github.com/gorcha" target="_blank" rel="noopener">@gorcha&lt;/a>,
&lt;a href="https://github.com/grayskripko" target="_blank" rel="noopener">@grayskripko&lt;/a>,
&lt;a href="https://github.com/gregmacfarlane" target="_blank" rel="noopener">@gregmacfarlane&lt;/a>,
&lt;a href="https://github.com/gregrs-uk" target="_blank" rel="noopener">@gregrs-uk&lt;/a>,
&lt;a href="https://github.com/Guillaume-Lombardo" target="_blank" rel="noopener">@Guillaume-Lombardo&lt;/a>,
&lt;a href="https://github.com/gutorc92" target="_blank" rel="noopener">@gutorc92&lt;/a>,
&lt;a href="https://github.com/gvelasq" target="_blank" rel="noopener">@gvelasq&lt;/a>,
&lt;a href="https://github.com/gvwilson" target="_blank" rel="noopener">@gvwilson&lt;/a>,
&lt;a href="https://github.com/haavardw" target="_blank" rel="noopener">@haavardw&lt;/a>,
&lt;a href="https://github.com/hadley" target="_blank" rel="noopener">@hadley&lt;/a>,
&lt;a href="https://github.com/hannesmuehleisen" target="_blank" rel="noopener">@hannesmuehleisen&lt;/a>,
&lt;a href="https://github.com/haozhu233" target="_blank" rel="noopener">@haozhu233&lt;/a>,
&lt;a href="https://github.com/hardeepsjohar" target="_blank" rel="noopener">@hardeepsjohar&lt;/a>,
&lt;a href="https://github.com/harrismcgehee" target="_blank" rel="noopener">@harrismcgehee&lt;/a>,
&lt;a href="https://github.com/harvey131" target="_blank" rel="noopener">@harvey131&lt;/a>,
&lt;a href="https://github.com/has2k1" target="_blank" rel="noopener">@has2k1&lt;/a>,
&lt;a href="https://github.com/helix123" target="_blank" rel="noopener">@helix123&lt;/a>,
&lt;a href="https://github.com/HenrikBengtsson" target="_blank" rel="noopener">@HenrikBengtsson&lt;/a>,
&lt;a href="https://github.com/hlynurhallgrims" target="_blank" rel="noopener">@hlynurhallgrims&lt;/a>,
&lt;a href="https://github.com/hmalmedal" target="_blank" rel="noopener">@hmalmedal&lt;/a>,
&lt;a href="https://github.com/Hong-Revo" target="_blank" rel="noopener">@Hong-Revo&lt;/a>,
&lt;a href="https://github.com/hrbrmstr" target="_blank" rel="noopener">@hrbrmstr&lt;/a>,
&lt;a href="https://github.com/huftis" target="_blank" rel="noopener">@huftis&lt;/a>,
&lt;a href="https://github.com/hughjonesd" target="_blank" rel="noopener">@hughjonesd&lt;/a>,
&lt;a href="https://github.com/HughParsonage" target="_blank" rel="noopener">@HughParsonage&lt;/a>,
&lt;a href="https://github.com/ijlyttle" target="_blank" rel="noopener">@ijlyttle&lt;/a>,
&lt;a href="https://github.com/ilarischeinin" target="_blank" rel="noopener">@ilarischeinin&lt;/a>,
&lt;a href="https://github.com/imanuelcostigan" target="_blank" rel="noopener">@imanuelcostigan&lt;/a>,
&lt;a href="https://github.com/Ironholds" target="_blank" rel="noopener">@Ironholds&lt;/a>,
&lt;a href="https://github.com/IronistM" target="_blank" rel="noopener">@IronistM&lt;/a>,
&lt;a href="https://github.com/ismayc" target="_blank" rel="noopener">@ismayc&lt;/a>,
&lt;a href="https://github.com/isomorphisms" target="_blank" rel="noopener">@isomorphisms&lt;/a>,
&lt;a href="https://github.com/isteves" target="_blank" rel="noopener">@isteves&lt;/a>,
&lt;a href="https://github.com/itsdalmo" target="_blank" rel="noopener">@itsdalmo&lt;/a>,
&lt;a href="https://github.com/j450h1" target="_blank" rel="noopener">@j450h1&lt;/a>,
&lt;a href="https://github.com/j6t" target="_blank" rel="noopener">@j6t&lt;/a>,
&lt;a href="https://github.com/jalsalam" target="_blank" rel="noopener">@jalsalam&lt;/a>,
&lt;a href="https://github.com/jameshowison" target="_blank" rel="noopener">@jameshowison&lt;/a>,
&lt;a href="https://github.com/jameslairdsmith" target="_blank" rel="noopener">@jameslairdsmith&lt;/a>,
&lt;a href="https://github.com/jameslamb" target="_blank" rel="noopener">@jameslamb&lt;/a>,
&lt;a href="https://github.com/jan-glx" target="_blank" rel="noopener">@jan-glx&lt;/a>,
&lt;a href="https://github.com/jankislinger" target="_blank" rel="noopener">@jankislinger&lt;/a>,
&lt;a href="https://github.com/jaredhuling" target="_blank" rel="noopener">@jaredhuling&lt;/a>,
&lt;a href="https://github.com/jarodmeng" target="_blank" rel="noopener">@jarodmeng&lt;/a>,
&lt;a href="https://github.com/jarvisc1" target="_blank" rel="noopener">@jarvisc1&lt;/a>,
&lt;a href="https://github.com/jasonmhoule" target="_blank" rel="noopener">@jasonmhoule&lt;/a>,
&lt;a href="https://github.com/javierluraschi" target="_blank" rel="noopener">@javierluraschi&lt;/a>,
&lt;a href="https://github.com/jayhesselberth" target="_blank" rel="noopener">@jayhesselberth&lt;/a>,
&lt;a href="https://github.com/jbao" target="_blank" rel="noopener">@jbao&lt;/a>,
&lt;a href="https://github.com/jbiesanz" target="_blank" rel="noopener">@jbiesanz&lt;/a>,
&lt;a href="https://github.com/jcheng5" target="_blank" rel="noopener">@jcheng5&lt;/a>,
&lt;a href="https://github.com/jdblischak" target="_blank" rel="noopener">@jdblischak&lt;/a>,
&lt;a href="https://github.com/jefferis" target="_blank" rel="noopener">@jefferis&lt;/a>,
&lt;a href="https://github.com/jeffreyhanson" target="_blank" rel="noopener">@jeffreyhanson&lt;/a>,
&lt;a href="https://github.com/jemus42" target="_blank" rel="noopener">@jemus42&lt;/a>,
&lt;a href="https://github.com/jennybc" target="_blank" rel="noopener">@jennybc&lt;/a>,
&lt;a href="https://github.com/jentjr" target="_blank" rel="noopener">@jentjr&lt;/a>,
&lt;a href="https://github.com/jenzopr" target="_blank" rel="noopener">@jenzopr&lt;/a>,
&lt;a href="https://github.com/jepusto" target="_blank" rel="noopener">@jepusto&lt;/a>,
&lt;a href="https://github.com/jeroen" target="_blank" rel="noopener">@jeroen&lt;/a>,
&lt;a href="https://github.com/jfcharney" target="_blank" rel="noopener">@jfcharney&lt;/a>,
&lt;a href="https://github.com/jgabry" target="_blank" rel="noopener">@jgabry&lt;/a>,
&lt;a href="https://github.com/JHonaker" target="_blank" rel="noopener">@JHonaker&lt;/a>,
&lt;a href="https://github.com/jiho" target="_blank" rel="noopener">@jiho&lt;/a>,
&lt;a href="https://github.com/jimhester" target="_blank" rel="noopener">@jimhester&lt;/a>,
&lt;a href="https://github.com/jimrothstein" target="_blank" rel="noopener">@jimrothstein&lt;/a>,
&lt;a href="https://github.com/jimvine" target="_blank" rel="noopener">@jimvine&lt;/a>,
&lt;a href="https://github.com/jinzhen-lin" target="_blank" rel="noopener">@jinzhen-lin&lt;/a>,
&lt;a href="https://github.com/jjchern" target="_blank" rel="noopener">@jjchern&lt;/a>,
&lt;a href="https://github.com/jlegewie" target="_blank" rel="noopener">@jlegewie&lt;/a>,
&lt;a href="https://github.com/jmpsteen" target="_blank" rel="noopener">@jmpsteen&lt;/a>,
&lt;a href="https://github.com/jmuhlenkamp" target="_blank" rel="noopener">@jmuhlenkamp&lt;/a>,
&lt;a href="https://github.com/jmwerner" target="_blank" rel="noopener">@jmwerner&lt;/a>,
&lt;a href="https://github.com/joelgombin" target="_blank" rel="noopener">@joelgombin&lt;/a>,
&lt;a href="https://github.com/jongbinjung" target="_blank" rel="noopener">@jongbinjung&lt;/a>,
&lt;a href="https://github.com/jonmcalder" target="_blank" rel="noopener">@jonmcalder&lt;/a>,
&lt;a href="https://github.com/jonocarroll" target="_blank" rel="noopener">@jonocarroll&lt;/a>,
&lt;a href="https://github.com/jonthegeek" target="_blank" rel="noopener">@jonthegeek&lt;/a>,
&lt;a href="https://github.com/joranE" target="_blank" rel="noopener">@joranE&lt;/a>,
&lt;a href="https://github.com/joshuaulrich" target="_blank" rel="noopener">@joshuaulrich&lt;/a>,
&lt;a href="https://github.com/josue-rodriguez" target="_blank" rel="noopener">@josue-rodriguez&lt;/a>,
&lt;a href="https://github.com/jrnold" target="_blank" rel="noopener">@jrnold&lt;/a>,
&lt;a href="https://github.com/jrosen48" target="_blank" rel="noopener">@jrosen48&lt;/a>,
&lt;a href="https://github.com/jschelbert" target="_blank" rel="noopener">@jschelbert&lt;/a>,
&lt;a href="https://github.com/jthurner" target="_blank" rel="noopener">@jthurner&lt;/a>,
&lt;a href="https://github.com/jtr13" target="_blank" rel="noopener">@jtr13&lt;/a>,
&lt;a href="https://github.com/junkka" target="_blank" rel="noopener">@junkka&lt;/a>,
&lt;a href="https://github.com/jwnorman" target="_blank" rel="noopener">@jwnorman&lt;/a>,
&lt;a href="https://github.com/kanishkamisra" target="_blank" rel="noopener">@kanishkamisra&lt;/a>,
&lt;a href="https://github.com/karawoo" target="_blank" rel="noopener">@karawoo&lt;/a>,
&lt;a href="https://github.com/karissawhiting" target="_blank" rel="noopener">@karissawhiting&lt;/a>,
&lt;a href="https://github.com/karldw" target="_blank" rel="noopener">@karldw&lt;/a>,
&lt;a href="https://github.com/katrinleinweber" target="_blank" rel="noopener">@katrinleinweber&lt;/a>,
&lt;a href="https://github.com/keithgw" target="_blank" rel="noopener">@keithgw&lt;/a>,
&lt;a href="https://github.com/kenahoo" target="_blank" rel="noopener">@kenahoo&lt;/a>,
&lt;a href="https://github.com/kendonB" target="_blank" rel="noopener">@kendonB&lt;/a>,
&lt;a href="https://github.com/kevinushey" target="_blank" rel="noopener">@kevinushey&lt;/a>,
&lt;a href="https://github.com/kevinykuo" target="_blank" rel="noopener">@kevinykuo&lt;/a>,
&lt;a href="https://github.com/kforner" target="_blank" rel="noopener">@kforner&lt;/a>,
&lt;a href="https://github.com/khotilov" target="_blank" rel="noopener">@khotilov&lt;/a>,
&lt;a href="https://github.com/kiendang" target="_blank" rel="noopener">@kiendang&lt;/a>,
&lt;a href="https://github.com/kiwiroy" target="_blank" rel="noopener">@kiwiroy&lt;/a>,
&lt;a href="https://github.com/KKulma" target="_blank" rel="noopener">@KKulma&lt;/a>,
&lt;a href="https://github.com/kohske" target="_blank" rel="noopener">@kohske&lt;/a>,
&lt;a href="https://github.com/kopperud" target="_blank" rel="noopener">@kopperud&lt;/a>,
&lt;a href="https://github.com/kos59125" target="_blank" rel="noopener">@kos59125&lt;/a>,
&lt;a href="https://github.com/krivit" target="_blank" rel="noopener">@krivit&lt;/a>,
&lt;a href="https://github.com/krlmlr" target="_blank" rel="noopener">@krlmlr&lt;/a>,
&lt;a href="https://github.com/ktmud" target="_blank" rel="noopener">@ktmud&lt;/a>,
&lt;a href="https://github.com/ktrask" target="_blank" rel="noopener">@ktrask&lt;/a>,
&lt;a href="https://github.com/kwstat" target="_blank" rel="noopener">@kwstat&lt;/a>,
&lt;a href="https://github.com/KZARCA" target="_blank" rel="noopener">@KZARCA&lt;/a>,
&lt;a href="https://github.com/l4u532" target="_blank" rel="noopener">@l4u532&lt;/a>,
&lt;a href="https://github.com/lambiase" target="_blank" rel="noopener">@lambiase&lt;/a>,
&lt;a href="https://github.com/landesbergn" target="_blank" rel="noopener">@landesbergn&lt;/a>,
&lt;a href="https://github.com/larmarange" target="_blank" rel="noopener">@larmarange&lt;/a>,
&lt;a href="https://github.com/lawwu" target="_blank" rel="noopener">@lawwu&lt;/a>,
&lt;a href="https://github.com/lbartnik" target="_blank" rel="noopener">@lbartnik&lt;/a>,
&lt;a href="https://github.com/lbusett" target="_blank" rel="noopener">@lbusett&lt;/a>,
&lt;a href="https://github.com/ledell" target="_blank" rel="noopener">@ledell&lt;/a>,
&lt;a href="https://github.com/leerssej" target="_blank" rel="noopener">@leerssej&lt;/a>,
&lt;a href="https://github.com/lemna" target="_blank" rel="noopener">@lemna&lt;/a>,
&lt;a href="https://github.com/lepennec" target="_blank" rel="noopener">@lepennec&lt;/a>,
&lt;a href="https://github.com/lindbrook" target="_blank" rel="noopener">@lindbrook&lt;/a>,
&lt;a href="https://github.com/LiNk-NY" target="_blank" rel="noopener">@LiNk-NY&lt;/a>,
&lt;a href="https://github.com/lionel-" target="_blank" rel="noopener">@lionel-&lt;/a>,
&lt;a href="https://github.com/llrs" target="_blank" rel="noopener">@llrs&lt;/a>,
&lt;a href="https://github.com/LluisRamon" target="_blank" rel="noopener">@LluisRamon&lt;/a>,
&lt;a href="https://github.com/lmullen" target="_blank" rel="noopener">@lmullen&lt;/a>,
&lt;a href="https://github.com/lorenzwalthert" target="_blank" rel="noopener">@lorenzwalthert&lt;/a>,
&lt;a href="https://github.com/lpmi-13" target="_blank" rel="noopener">@lpmi-13&lt;/a>,
&lt;a href="https://github.com/lselzer" target="_blank" rel="noopener">@lselzer&lt;/a>,
&lt;a href="https://github.com/ltobalina" target="_blank" rel="noopener">@ltobalina&lt;/a>,
&lt;a href="https://github.com/LucyMcGowan" target="_blank" rel="noopener">@LucyMcGowan&lt;/a>,
&lt;a href="https://github.com/luisDVA" target="_blank" rel="noopener">@luisDVA&lt;/a>,
&lt;a href="https://github.com/lukesonnet" target="_blank" rel="noopener">@lukesonnet&lt;/a>,
&lt;a href="https://github.com/lwjohnst86" target="_blank" rel="noopener">@lwjohnst86&lt;/a>,
&lt;a href="https://github.com/m-sostero" target="_blank" rel="noopener">@m-sostero&lt;/a>,
&lt;a href="https://github.com/m0nhawk" target="_blank" rel="noopener">@m0nhawk&lt;/a>,
&lt;a href="https://github.com/maelle" target="_blank" rel="noopener">@maelle&lt;/a>,
&lt;a href="https://github.com/malcolmbarrett" target="_blank" rel="noopener">@malcolmbarrett&lt;/a>,
&lt;a href="https://github.com/MarcusWalz" target="_blank" rel="noopener">@MarcusWalz&lt;/a>,
&lt;a href="https://github.com/mariusbarth" target="_blank" rel="noopener">@mariusbarth&lt;/a>,
&lt;a href="https://github.com/markdly" target="_blank" rel="noopener">@markdly&lt;/a>,
&lt;a href="https://github.com/MarkEdmondson1234" target="_blank" rel="noopener">@MarkEdmondson1234&lt;/a>,
&lt;a href="https://github.com/martin-mfg" target="_blank" rel="noopener">@martin-mfg&lt;/a>,
&lt;a href="https://github.com/martinjhnhadley" target="_blank" rel="noopener">@martinjhnhadley&lt;/a>,
&lt;a href="https://github.com/matthieugomez" target="_blank" rel="noopener">@matthieugomez&lt;/a>,
&lt;a href="https://github.com/MatthieuStigler" target="_blank" rel="noopener">@MatthieuStigler&lt;/a>,
&lt;a href="https://github.com/mattle24" target="_blank" rel="noopener">@mattle24&lt;/a>,
&lt;a href="https://github.com/maurolepore" target="_blank" rel="noopener">@maurolepore&lt;/a>,
&lt;a href="https://github.com/mawds" target="_blank" rel="noopener">@mawds&lt;/a>,
&lt;a href="https://github.com/maxheld83" target="_blank" rel="noopener">@maxheld83&lt;/a>,
&lt;a href="https://github.com/mb706" target="_blank" rel="noopener">@mb706&lt;/a>,
&lt;a href="https://github.com/mbjoseph" target="_blank" rel="noopener">@mbjoseph&lt;/a>,
&lt;a href="https://github.com/mbojan" target="_blank" rel="noopener">@mbojan&lt;/a>,
&lt;a href="https://github.com/mcol" target="_blank" rel="noopener">@mcol&lt;/a>,
&lt;a href="https://github.com/md0u80c9" target="_blank" rel="noopener">@md0u80c9&lt;/a>,
&lt;a href="https://github.com/mdlincoln" target="_blank" rel="noopener">@mdlincoln&lt;/a>,
&lt;a href="https://github.com/medinali" target="_blank" rel="noopener">@medinali&lt;/a>,
&lt;a href="https://github.com/mfansler" target="_blank" rel="noopener">@mfansler&lt;/a>,
&lt;a href="https://github.com/mgirlich" target="_blank" rel="noopener">@mgirlich&lt;/a>,
&lt;a href="https://github.com/mhpedersen" target="_blank" rel="noopener">@mhpedersen&lt;/a>,
&lt;a href="https://github.com/MichaelChirico" target="_blank" rel="noopener">@MichaelChirico&lt;/a>,
&lt;a href="https://github.com/michaellevy" target="_blank" rel="noopener">@michaellevy&lt;/a>,
&lt;a href="https://github.com/michaelquinn32" target="_blank" rel="noopener">@michaelquinn32&lt;/a>,
&lt;a href="https://github.com/michaelweylandt" target="_blank" rel="noopener">@michaelweylandt&lt;/a>,
&lt;a href="https://github.com/mikmart" target="_blank" rel="noopener">@mikmart&lt;/a>,
&lt;a href="https://github.com/MilesMcBain" target="_blank" rel="noopener">@MilesMcBain&lt;/a>,
&lt;a href="https://github.com/mine-cetinkaya-rundel" target="_blank" rel="noopener">@mine-cetinkaya-rundel&lt;/a>,
&lt;a href="https://github.com/mingwandroid" target="_blank" rel="noopener">@mingwandroid&lt;/a>,
&lt;a href="https://github.com/mitchelloharawild" target="_blank" rel="noopener">@mitchelloharawild&lt;/a>,
&lt;a href="https://github.com/mjskay" target="_blank" rel="noopener">@mjskay&lt;/a>,
&lt;a href="https://github.com/mkcor" target="_blank" rel="noopener">@mkcor&lt;/a>,
&lt;a href="https://github.com/mkearney" target="_blank" rel="noopener">@mkearney&lt;/a>,
&lt;a href="https://github.com/mkuehn10" target="_blank" rel="noopener">@mkuehn10&lt;/a>,
&lt;a href="https://github.com/mllg" target="_blank" rel="noopener">@mllg&lt;/a>,
&lt;a href="https://github.com/mlysy" target="_blank" rel="noopener">@mlysy&lt;/a>,
&lt;a href="https://github.com/moodymudskipper" target="_blank" rel="noopener">@moodymudskipper&lt;/a>,
&lt;a href="https://github.com/moslehi" target="_blank" rel="noopener">@moslehi&lt;/a>,
&lt;a href="https://github.com/mpadge" target="_blank" rel="noopener">@mpadge&lt;/a>,
&lt;a href="https://github.com/mpancia" target="_blank" rel="noopener">@mpancia&lt;/a>,
&lt;a href="https://github.com/mrchypark" target="_blank" rel="noopener">@mrchypark&lt;/a>,
&lt;a href="https://github.com/mrtns" target="_blank" rel="noopener">@mrtns&lt;/a>,
&lt;a href="https://github.com/mruessler" target="_blank" rel="noopener">@mruessler&lt;/a>,
&lt;a href="https://github.com/mtmorgan" target="_blank" rel="noopener">@mtmorgan&lt;/a>,
&lt;a href="https://github.com/Mullefa" target="_blank" rel="noopener">@Mullefa&lt;/a>,
&lt;a href="https://github.com/mundl" target="_blank" rel="noopener">@mundl&lt;/a>,
&lt;a href="https://github.com/muschellij2" target="_blank" rel="noopener">@muschellij2&lt;/a>,
&lt;a href="https://github.com/mvevans89" target="_blank" rel="noopener">@mvevans89&lt;/a>,
&lt;a href="https://github.com/mvkorpel" target="_blank" rel="noopener">@mvkorpel&lt;/a>,
&lt;a href="https://github.com/mwaldstein" target="_blank" rel="noopener">@mwaldstein&lt;/a>,
&lt;a href="https://github.com/nacnudus" target="_blank" rel="noopener">@nacnudus&lt;/a>,
&lt;a href="https://github.com/namelessjon" target="_blank" rel="noopener">@namelessjon&lt;/a>,
&lt;a href="https://github.com/nbenn" target="_blank" rel="noopener">@nbenn&lt;/a>,
&lt;a href="https://github.com/nealrichardson" target="_blank" rel="noopener">@nealrichardson&lt;/a>,
&lt;a href="https://github.com/neilmontgomery" target="_blank" rel="noopener">@neilmontgomery&lt;/a>,
&lt;a href="https://github.com/nfultz" target="_blank" rel="noopener">@nfultz&lt;/a>,
&lt;a href="https://github.com/nhamilton1980" target="_blank" rel="noopener">@nhamilton1980&lt;/a>,
&lt;a href="https://github.com/Nick-Rivera" target="_blank" rel="noopener">@Nick-Rivera&lt;/a>,
&lt;a href="https://github.com/nijibabulu" target="_blank" rel="noopener">@nijibabulu&lt;/a>,
&lt;a href="https://github.com/njtierney" target="_blank" rel="noopener">@njtierney&lt;/a>,
&lt;a href="https://github.com/nmattia" target="_blank" rel="noopener">@nmattia&lt;/a>,
&lt;a href="https://github.com/noamross" target="_blank" rel="noopener">@noamross&lt;/a>,
&lt;a href="https://github.com/ntdef" target="_blank" rel="noopener">@ntdef&lt;/a>,
&lt;a href="https://github.com/nuest" target="_blank" rel="noopener">@nuest&lt;/a>,
&lt;a href="https://github.com/nutterb" target="_blank" rel="noopener">@nutterb&lt;/a>,
&lt;a href="https://github.com/nzxwang" target="_blank" rel="noopener">@nzxwang&lt;/a>,
&lt;a href="https://github.com/odeleongt" target="_blank" rel="noopener">@odeleongt&lt;/a>,
&lt;a href="https://github.com/oscardssmith" target="_blank" rel="noopener">@oscardssmith&lt;/a>,
&lt;a href="https://github.com/osorensen" target="_blank" rel="noopener">@osorensen&lt;/a>,
&lt;a href="https://github.com/overmar" target="_blank" rel="noopener">@overmar&lt;/a>,
&lt;a href="https://github.com/pachevalier" target="_blank" rel="noopener">@pachevalier&lt;/a>,
&lt;a href="https://github.com/pank" target="_blank" rel="noopener">@pank&lt;/a>,
&lt;a href="https://github.com/pat-s" target="_blank" rel="noopener">@pat-s&lt;/a>,
&lt;a href="https://github.com/patperry" target="_blank" rel="noopener">@patperry&lt;/a>,
&lt;a href="https://github.com/paul-buerkner" target="_blank" rel="noopener">@paul-buerkner&lt;/a>,
&lt;a href="https://github.com/paulponcet" target="_blank" rel="noopener">@paulponcet&lt;/a>,
&lt;a href="https://github.com/pavel-filatov" target="_blank" rel="noopener">@pavel-filatov&lt;/a>,
&lt;a href="https://github.com/Paxanator" target="_blank" rel="noopener">@Paxanator&lt;/a>,
&lt;a href="https://github.com/peterdesmet" target="_blank" rel="noopener">@peterdesmet&lt;/a>,
&lt;a href="https://github.com/peterhartman" target="_blank" rel="noopener">@peterhartman&lt;/a>,
&lt;a href="https://github.com/petermeissner" target="_blank" rel="noopener">@petermeissner&lt;/a>,
&lt;a href="https://github.com/pgensler" target="_blank" rel="noopener">@pgensler&lt;/a>,
&lt;a href="https://github.com/phaverty" target="_blank" rel="noopener">@phaverty&lt;/a>,
&lt;a href="https://github.com/philmikejones" target="_blank" rel="noopener">@philmikejones&lt;/a>,
&lt;a href="https://github.com/pierreroudier" target="_blank" rel="noopener">@pierreroudier&lt;/a>,
&lt;a href="https://github.com/PirateGrunt" target="_blank" rel="noopener">@PirateGrunt&lt;/a>,
&lt;a href="https://github.com/pitakakariki" target="_blank" rel="noopener">@pitakakariki&lt;/a>,
&lt;a href="https://github.com/pjpaulpj" target="_blank" rel="noopener">@pjpaulpj&lt;/a>,
&lt;a href="https://github.com/pkq" target="_blank" rel="noopener">@pkq&lt;/a>,
&lt;a href="https://github.com/pkrog" target="_blank" rel="noopener">@pkrog&lt;/a>,
&lt;a href="https://github.com/pmenzel" target="_blank" rel="noopener">@pmenzel&lt;/a>,
&lt;a href="https://github.com/PoGibas" target="_blank" rel="noopener">@PoGibas&lt;/a>,
&lt;a href="https://github.com/pohzipohzi" target="_blank" rel="noopener">@pohzipohzi&lt;/a>,
&lt;a href="https://github.com/privefl" target="_blank" rel="noopener">@privefl&lt;/a>,
&lt;a href="https://github.com/prosoitos" target="_blank" rel="noopener">@prosoitos&lt;/a>,
&lt;a href="https://github.com/puterleat" target="_blank" rel="noopener">@puterleat&lt;/a>,
&lt;a href="https://github.com/pzingg" target="_blank" rel="noopener">@pzingg&lt;/a>,
&lt;a href="https://github.com/quartin" target="_blank" rel="noopener">@quartin&lt;/a>,
&lt;a href="https://github.com/QuLogic" target="_blank" rel="noopener">@QuLogic&lt;/a>,
&lt;a href="https://github.com/r2evans" target="_blank" rel="noopener">@r2evans&lt;/a>,
&lt;a href="https://github.com/raffscallion" target="_blank" rel="noopener">@raffscallion&lt;/a>,
&lt;a href="https://github.com/rajanand" target="_blank" rel="noopener">@rajanand&lt;/a>,
&lt;a href="https://github.com/ramnathv" target="_blank" rel="noopener">@ramnathv&lt;/a>,
&lt;a href="https://github.com/randy3k" target="_blank" rel="noopener">@randy3k&lt;/a>,
&lt;a href="https://github.com/ras44" target="_blank" rel="noopener">@ras44&lt;/a>,
&lt;a href="https://github.com/rasmusab" target="_blank" rel="noopener">@rasmusab&lt;/a>,
&lt;a href="https://github.com/rbloehm" target="_blank" rel="noopener">@rbloehm&lt;/a>,
&lt;a href="https://github.com/rcannood" target="_blank" rel="noopener">@rcannood&lt;/a>,
&lt;a href="https://github.com/realAkhmed" target="_blank" rel="noopener">@realAkhmed&lt;/a>,
&lt;a href="https://github.com/Rekyt" target="_blank" rel="noopener">@Rekyt&lt;/a>,
&lt;a href="https://github.com/RemkoDuursma" target="_blank" rel="noopener">@RemkoDuursma&lt;/a>,
&lt;a href="https://github.com/renkun-ken" target="_blank" rel="noopener">@renkun-ken&lt;/a>,
&lt;a href="https://github.com/renozao" target="_blank" rel="noopener">@renozao&lt;/a>,
&lt;a href="https://github.com/rensa" target="_blank" rel="noopener">@rensa&lt;/a>,
&lt;a href="https://github.com/rentrop" target="_blank" rel="noopener">@rentrop&lt;/a>,
&lt;a href="https://github.com/riccardopinosio" target="_blank" rel="noopener">@riccardopinosio&lt;/a>,
&lt;a href="https://github.com/RichardJActon" target="_blank" rel="noopener">@RichardJActon&lt;/a>,
&lt;a href="https://github.com/richardkunze" target="_blank" rel="noopener">@richardkunze&lt;/a>,
&lt;a href="https://github.com/richfitz" target="_blank" rel="noopener">@richfitz&lt;/a>,
&lt;a href="https://github.com/richierocks" target="_blank" rel="noopener">@richierocks&lt;/a>,
&lt;a href="https://github.com/rkahne" target="_blank" rel="noopener">@rkahne&lt;/a>,
&lt;a href="https://github.com/RLesur" target="_blank" rel="noopener">@RLesur&lt;/a>,
&lt;a href="https://github.com/rmatkins" target="_blank" rel="noopener">@rmatkins&lt;/a>,
&lt;a href="https://github.com/rmflight" target="_blank" rel="noopener">@rmflight&lt;/a>,
&lt;a href="https://github.com/rnuske" target="_blank" rel="noopener">@rnuske&lt;/a>,
&lt;a href="https://github.com/robertzk" target="_blank" rel="noopener">@robertzk&lt;/a>,
&lt;a href="https://github.com/Robinlovelace" target="_blank" rel="noopener">@Robinlovelace&lt;/a>,
&lt;a href="https://github.com/robinsones" target="_blank" rel="noopener">@robinsones&lt;/a>,
&lt;a href="https://github.com/robkar" target="_blank" rel="noopener">@robkar&lt;/a>,
&lt;a href="https://github.com/RolandASc" target="_blank" rel="noopener">@RolandASc&lt;/a>,
&lt;a href="https://github.com/romainfrancois" target="_blank" rel="noopener">@romainfrancois&lt;/a>,
&lt;a href="https://github.com/romunov" target="_blank" rel="noopener">@romunov&lt;/a>,
&lt;a href="https://github.com/rorynolan" target="_blank" rel="noopener">@rorynolan&lt;/a>,
&lt;a href="https://github.com/rsaporta" target="_blank" rel="noopener">@rsaporta&lt;/a>,
&lt;a href="https://github.com/rstub" target="_blank" rel="noopener">@rstub&lt;/a>,
&lt;a href="https://github.com/rtaph" target="_blank" rel="noopener">@rtaph&lt;/a>,
&lt;a href="https://github.com/rtobar" target="_blank" rel="noopener">@rtobar&lt;/a>,
&lt;a href="https://github.com/ruaridhw" target="_blank" rel="noopener">@ruaridhw&lt;/a>,
&lt;a href="https://github.com/rudeboybert" target="_blank" rel="noopener">@rudeboybert&lt;/a>,
&lt;a href="https://github.com/ryanatanner" target="_blank" rel="noopener">@ryanatanner&lt;/a>,
&lt;a href="https://github.com/ryapric" target="_blank" rel="noopener">@ryapric&lt;/a>,
&lt;a href="https://github.com/s-fleck" target="_blank" rel="noopener">@s-fleck&lt;/a>,
&lt;a href="https://github.com/sachsmc" target="_blank" rel="noopener">@sachsmc&lt;/a>,
&lt;a href="https://github.com/saghirb" target="_blank" rel="noopener">@saghirb&lt;/a>,
&lt;a href="https://github.com/salim-b" target="_blank" rel="noopener">@salim-b&lt;/a>,
&lt;a href="https://github.com/samssann" target="_blank" rel="noopener">@samssann&lt;/a>,
&lt;a href="https://github.com/samzhang111" target="_blank" rel="noopener">@samzhang111&lt;/a>,
&lt;a href="https://github.com/sandan" target="_blank" rel="noopener">@sandan&lt;/a>,
&lt;a href="https://github.com/saurfang" target="_blank" rel="noopener">@saurfang&lt;/a>,
&lt;a href="https://github.com/schloerke" target="_blank" rel="noopener">@schloerke&lt;/a>,
&lt;a href="https://github.com/schoonees" target="_blank" rel="noopener">@schoonees&lt;/a>,
&lt;a href="https://github.com/seaaan" target="_blank" rel="noopener">@seaaan&lt;/a>,
&lt;a href="https://github.com/seanpor" target="_blank" rel="noopener">@seanpor&lt;/a>,
&lt;a href="https://github.com/setempler" target="_blank" rel="noopener">@setempler&lt;/a>,
&lt;a href="https://github.com/sflippl" target="_blank" rel="noopener">@sflippl&lt;/a>,
&lt;a href="https://github.com/shabbybanks" target="_blank" rel="noopener">@shabbybanks&lt;/a>,
&lt;a href="https://github.com/shrektan" target="_blank" rel="noopener">@shrektan&lt;/a>,
&lt;a href="https://github.com/ShreyasSingh" target="_blank" rel="noopener">@ShreyasSingh&lt;/a>,
&lt;a href="https://github.com/siddharthab" target="_blank" rel="noopener">@siddharthab&lt;/a>,
&lt;a href="https://github.com/sinhrks" target="_blank" rel="noopener">@sinhrks&lt;/a>,
&lt;a href="https://github.com/sjackman" target="_blank" rel="noopener">@sjackman&lt;/a>,
&lt;a href="https://github.com/slnovak" target="_blank" rel="noopener">@slnovak&lt;/a>,
&lt;a href="https://github.com/slowkow" target="_blank" rel="noopener">@slowkow&lt;/a>,
&lt;a href="https://github.com/smaakage85" target="_blank" rel="noopener">@smaakage85&lt;/a>,
&lt;a href="https://github.com/snaut" target="_blank" rel="noopener">@snaut&lt;/a>,
&lt;a href="https://github.com/sowla" target="_blank" rel="noopener">@sowla&lt;/a>,
&lt;a href="https://github.com/statist7" target="_blank" rel="noopener">@statist7&lt;/a>,
&lt;a href="https://github.com/statwonk" target="_blank" rel="noopener">@statwonk&lt;/a>,
&lt;a href="https://github.com/stefanfritsch" target="_blank" rel="noopener">@stefanfritsch&lt;/a>,
&lt;a href="https://github.com/stillmatic" target="_blank" rel="noopener">@stillmatic&lt;/a>,
&lt;a href="https://github.com/stragu" target="_blank" rel="noopener">@stragu&lt;/a>,
&lt;a href="https://github.com/superchordate" target="_blank" rel="noopener">@superchordate&lt;/a>,
&lt;a href="https://github.com/surmann" target="_blank" rel="noopener">@surmann&lt;/a>,
&lt;a href="https://github.com/suzanbaert" target="_blank" rel="noopener">@suzanbaert&lt;/a>,
&lt;a href="https://github.com/sverchkov" target="_blank" rel="noopener">@sverchkov&lt;/a>,
&lt;a href="https://github.com/t-kalinowski" target="_blank" rel="noopener">@t-kalinowski&lt;/a>,
&lt;a href="https://github.com/talgalili" target="_blank" rel="noopener">@talgalili&lt;/a>,
&lt;a href="https://github.com/tareefk" target="_blank" rel="noopener">@tareefk&lt;/a>,
&lt;a href="https://github.com/tdsmith" target="_blank" rel="noopener">@tdsmith&lt;/a>,
&lt;a href="https://github.com/tereom" target="_blank" rel="noopener">@tereom&lt;/a>,
&lt;a href="https://github.com/terrytangyuan" target="_blank" rel="noopener">@terrytangyuan&lt;/a>,
&lt;a href="https://github.com/theGreatWhiteShark" target="_blank" rel="noopener">@theGreatWhiteShark&lt;/a>,
&lt;a href="https://github.com/ThierryO" target="_blank" rel="noopener">@ThierryO&lt;/a>,
&lt;a href="https://github.com/thisisnic" target="_blank" rel="noopener">@thisisnic&lt;/a>,
&lt;a href="https://github.com/thomascwells" target="_blank" rel="noopener">@thomascwells&lt;/a>,
&lt;a href="https://github.com/thomasp85" target="_blank" rel="noopener">@thomasp85&lt;/a>,
&lt;a href="https://github.com/tigertoes" target="_blank" rel="noopener">@tigertoes&lt;/a>,
&lt;a href="https://github.com/timgoodman" target="_blank" rel="noopener">@timgoodman&lt;/a>,
&lt;a href="https://github.com/timtrice" target="_blank" rel="noopener">@timtrice&lt;/a>,
&lt;a href="https://github.com/tmastny" target="_blank" rel="noopener">@tmastny&lt;/a>,
&lt;a href="https://github.com/tnagler" target="_blank" rel="noopener">@tnagler&lt;/a>,
&lt;a href="https://github.com/tonytonov" target="_blank" rel="noopener">@tonytonov&lt;/a>,
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>,
&lt;a href="https://github.com/truemoid" target="_blank" rel="noopener">@truemoid&lt;/a>,
&lt;a href="https://github.com/tstev" target="_blank" rel="noopener">@tstev&lt;/a>,
&lt;a href="https://github.com/tyluRp" target="_blank" rel="noopener">@tyluRp&lt;/a>,
&lt;a href="https://github.com/uribo" target="_blank" rel="noopener">@uribo&lt;/a>,
&lt;a href="https://github.com/vkapartzianis" target="_blank" rel="noopener">@vkapartzianis&lt;/a>,
&lt;a href="https://github.com/vnijs" target="_blank" rel="noopener">@vnijs&lt;/a>,
&lt;a href="https://github.com/vsabarly" target="_blank" rel="noopener">@vsabarly&lt;/a>,
&lt;a href="https://github.com/washcycle" target="_blank" rel="noopener">@washcycle&lt;/a>,
&lt;a href="https://github.com/wch" target="_blank" rel="noopener">@wch&lt;/a>,
&lt;a href="https://github.com/wenjie2wang" target="_blank" rel="noopener">@wenjie2wang&lt;/a>,
&lt;a href="https://github.com/wibeasley" target="_blank" rel="noopener">@wibeasley&lt;/a>,
&lt;a href="https://github.com/wilkox" target="_blank" rel="noopener">@wilkox&lt;/a>,
&lt;a href="https://github.com/wilsonfreitas" target="_blank" rel="noopener">@wilsonfreitas&lt;/a>,
&lt;a href="https://github.com/wjakethompson" target="_blank" rel="noopener">@wjakethompson&lt;/a>,
&lt;a href="https://github.com/wlandau" target="_blank" rel="noopener">@wlandau&lt;/a>,
&lt;a href="https://github.com/xhdong-umd" target="_blank" rel="noopener">@xhdong-umd&lt;/a>,
&lt;a href="https://github.com/xvrdm" target="_blank" rel="noopener">@xvrdm&lt;/a>,
&lt;a href="https://github.com/yatharth" target="_blank" rel="noopener">@yatharth&lt;/a>,
&lt;a href="https://github.com/yihui" target="_blank" rel="noopener">@yihui&lt;/a>,
&lt;a href="https://github.com/yiluheihei" target="_blank" rel="noopener">@yiluheihei&lt;/a>,
&lt;a href="https://github.com/yiufung" target="_blank" rel="noopener">@yiufung&lt;/a>,
&lt;a href="https://github.com/yonicd" target="_blank" rel="noopener">@yonicd&lt;/a>,
&lt;a href="https://github.com/yutannihilation" target="_blank" rel="noopener">@yutannihilation&lt;/a>,
&lt;a href="https://github.com/zachary-foster" target="_blank" rel="noopener">@zachary-foster&lt;/a>,
&lt;a href="https://github.com/zappingseb" target="_blank" rel="noopener">@zappingseb&lt;/a>,
&lt;a href="https://github.com/zeehio" target="_blank" rel="noopener">@zeehio&lt;/a>,
&lt;a href="https://github.com/zkamvar" target="_blank" rel="noopener">@zkamvar&lt;/a>,
&lt;a href="https://github.com/ZoidbergIII" target="_blank" rel="noopener">@ZoidbergIII&lt;/a>,
&lt;a href="https://github.com/zozlak" target="_blank" rel="noopener">@zozlak&lt;/a>, and
&lt;a href="https://github.com/Zsedo" target="_blank" rel="noopener">@Zsedo&lt;/a>.&lt;/p></description></item><item><title>dplyr 0.8.0 release candidate</title><link>https://www.tidyverse.org/blog/2018/12/dplyr-0-8-0-release-candidate/</link><pubDate>Mon, 03 Dec 2018 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2018/12/dplyr-0-8-0-release-candidate/</guid><description>&lt;style>
blockquote {
margin: 10px 0px 10px 0px;
padding: 10px 10px 0px 10px;
border: 2px solid red;
background: rgb(248, 248, 248);
font-size: 100%;
font-style: inherit;
font-weight: inherit;
}
&lt;/style>
&lt;blockquote>
&lt;p>This post, published in early December 2018 and promoted on Twitter
generated valuable discussions that led us to reconsider some
design choices for &lt;code>dplyr&lt;/code> 0.8.0&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>We&amp;rsquo;ve left the original post unchanged, with addenda when
changes have been made.&lt;/p>
&lt;/blockquote>
&lt;p>A new release of dplyr (0.8.0) is on the horizon, &lt;del>roughly planned for early January&lt;/del> planned
for February 1st.&lt;/p>
&lt;p>Since it is a major release with some potential
disruption, we&amp;rsquo;d love for the community to try it out, give us some feedback,
and
&lt;a href="https://github.com/tidyverse/dplyr/issues" target="_blank" rel="noopener">report issues&lt;/a>
before we submit to CRAN. This version represents about nine months of development, making dplyr more
respectful of factors, and less surprising in its evaluation of expressions.&lt;/p>
&lt;p>In this post, we&amp;rsquo;ll highlight the major changes. Please see the
&lt;a href="https://github.com/tidyverse/dplyr/blob/master/NEWS.md" target="_blank" rel="noopener">NEWS&lt;/a> for a more
detailed description of changes. Our formalised process for this release is captured
in
&lt;a href="https://github.com/tidyverse/dplyr/issues/3931" target="_blank" rel="noopener">this issue&lt;/a>.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="c1"># install.packages(&amp;#34;devtools&amp;#34;)&lt;/span>
&lt;span class="n">devtools&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="nf">install_github&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;tidyverse/dplyr@rc_0.8.0&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>If needed, you can restore the
&lt;a href="https://CRAN.R-project.org/package=dplyr" target="_blank" rel="noopener">release version&lt;/a> by installing from CRAN:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">install.packages&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;dplyr&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;h1 id="new-grouping-algorithm">New grouping algorithm
&lt;a href="#new-grouping-algorithm">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h1>
&lt;h2 id="group-creation">Group creation
&lt;a href="#group-creation">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>The algorithm behind
&lt;a href="https://dplyr.tidyverse.org/reference/group_by.html" target="_blank" rel="noopener">&lt;code>group_by()&lt;/code>&lt;/a> has been redesigned to better respect factor levels,
so that a group is created for each level of the factor, even if there is no data. This
differs from previous versions of dplyr where groups were only created to
match the observed data. This closes the epic issue
&lt;a href="https://github.com/tidyverse/dplyr/issues/341" target="_blank" rel="noopener">341&lt;/a>, which dates back to 2014, and has generated
a lot of press and frustration, see
&lt;a href="https://kieranhealy.org/blog/archives/2018/11/19/zero-counts-in-dplyr/" target="_blank" rel="noopener">Zero Counts in dplyr&lt;/a>
for a recent walkthrough of the issue.&lt;/p>
&lt;p>Let&amp;rsquo;s illustrate the new algorithm with the
&lt;a href="https://dplyr.tidyverse.org/reference/count.html" target="_blank" rel="noopener">&lt;code>count()&lt;/code>&lt;/a> function:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">df&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">tibble&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="n">f1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">factor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;a&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;a&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;a&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;b&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;b&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">levels&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;a&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;b&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;c&amp;#34;&lt;/span>&lt;span class="p">)),&lt;/span>
&lt;span class="n">f2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">factor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;d&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;e&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;d&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;e&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;f&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">levels&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;d&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;e&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;f&amp;#34;&lt;/span>&lt;span class="p">)),&lt;/span>
&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">2&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="m">5&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;span class="n">df&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 5 x 4&lt;/span>
&lt;span class="c1">#&amp;gt; f1 f2 x y&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;fct&amp;gt; &amp;lt;fct&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;int&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 a d 1 1&lt;/span>
&lt;span class="c1">#&amp;gt; 2 a e 1 2&lt;/span>
&lt;span class="c1">#&amp;gt; 3 a d 1 3&lt;/span>
&lt;span class="c1">#&amp;gt; 4 b e 2 4&lt;/span>
&lt;span class="c1">#&amp;gt; 5 b f 2 5&lt;/span>
&lt;span class="n">df&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">count&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">f1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 3 x 2&lt;/span>
&lt;span class="c1">#&amp;gt; f1 n&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;fct&amp;gt; &amp;lt;int&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 a 3&lt;/span>
&lt;span class="c1">#&amp;gt; 2 b 2&lt;/span>
&lt;span class="c1">#&amp;gt; 3 c 0&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Where previous versions of &lt;code>dplyr&lt;/code> would have created only two groups (for levels &lt;code>a&lt;/code> and &lt;code>b&lt;/code>),
it now creates one group per level, and the group related to the level &lt;code>c&lt;/code> just happens to be
empty.&lt;/p>
&lt;p>Groups are still made to match the data on other types of columns:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">df&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">count&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 2 x 2&lt;/span>
&lt;span class="c1">#&amp;gt; x n&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;int&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 1 3&lt;/span>
&lt;span class="c1">#&amp;gt; 2 2 2&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Expansion of groups for factors happens at each step of the grouping, so if we group
by &lt;code>f1&lt;/code> and &lt;code>f2&lt;/code> we get 9 groups,&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">df&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">count&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">f1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">f2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 9 x 3&lt;/span>
&lt;span class="c1">#&amp;gt; f1 f2 n&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;fct&amp;gt; &amp;lt;fct&amp;gt; &amp;lt;int&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 a d 2&lt;/span>
&lt;span class="c1">#&amp;gt; 2 a e 1&lt;/span>
&lt;span class="c1">#&amp;gt; 3 a f 0&lt;/span>
&lt;span class="c1">#&amp;gt; 4 b d 0&lt;/span>
&lt;span class="c1">#&amp;gt; 5 b e 1&lt;/span>
&lt;span class="c1">#&amp;gt; 6 b f 1&lt;/span>
&lt;span class="c1">#&amp;gt; 7 c d 0&lt;/span>
&lt;span class="c1">#&amp;gt; 8 c e 0&lt;/span>
&lt;span class="c1">#&amp;gt; 9 c f 0&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>When factors and non factors are involved in the grouping, the number of
groups depends on the order. At each level of grouping, factors are always expanded
to one group per level, but non factors only create groups based on observed data.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">df&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">count&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">f1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 3 x 3&lt;/span>
&lt;span class="c1">#&amp;gt; f1 x n&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;fct&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;int&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 a 1 3&lt;/span>
&lt;span class="c1">#&amp;gt; 2 b 2 2&lt;/span>
&lt;span class="c1">#&amp;gt; 3 c NA 0&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>In this example, we group by &lt;code>f1&lt;/code> then &lt;code>x&lt;/code>. At the first layer, grouping on &lt;code>f1&lt;/code> creates
three groups. Each of these groups is then subdivided based on the values of the second
variable &lt;code>x&lt;/code>. Since &lt;code>x&lt;/code> is always 1 when &lt;code>f1&lt;/code> is &lt;code>a&lt;/code> the group is not
further divided.&lt;/p>
&lt;p>The last group, associated with the level &lt;code>c&lt;/code> of the factor &lt;code>f1&lt;/code> is empty, and
consequently has no values for the vector &lt;code>x&lt;/code>. In that case,
&lt;a href="https://dplyr.tidyverse.org/reference/group_by.html" target="_blank" rel="noopener">&lt;code>group_by()&lt;/code>&lt;/a> uses
&lt;code>NA&lt;/code>.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">df&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">count&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">f1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 6 x 3&lt;/span>
&lt;span class="c1">#&amp;gt; x f1 n&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;fct&amp;gt; &amp;lt;int&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 1 a 3&lt;/span>
&lt;span class="c1">#&amp;gt; 2 1 b 0&lt;/span>
&lt;span class="c1">#&amp;gt; 3 1 c 0&lt;/span>
&lt;span class="c1">#&amp;gt; 4 2 a 0&lt;/span>
&lt;span class="c1">#&amp;gt; 5 2 b 2&lt;/span>
&lt;span class="c1">#&amp;gt; 6 2 c 0&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>When we group by &lt;code>x&lt;/code> then &lt;code>f1&lt;/code> we initially split the data according to &lt;code>x&lt;/code> which
gives 2 groups. Each of these two groups is then further divided in 3 groups,
i.e. one for each level of &lt;code>f1&lt;/code>.&lt;/p>
&lt;blockquote>
&lt;p>We&amp;rsquo;ve added the possibility to drop the empty groups, and hence
get the previous behaviour by using &lt;code>group_by(.drop = TRUE)&lt;/code>.&lt;/p>
&lt;p>This is not the default value, because we still strongly believe that
all levels of factors should be represented in the grouping structure.&lt;/p>
&lt;/blockquote>
&lt;h2 id="group-preservation">Group preservation
&lt;a href="#group-preservation">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>The grouping structure is more coherently preserved by dplyr verbs.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">df&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_by&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">f1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">summarise&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">mean&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 6 x 3&lt;/span>
&lt;span class="c1">#&amp;gt; # Groups: x [2]&lt;/span>
&lt;span class="c1">#&amp;gt; x f1 y&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;fct&amp;gt; &amp;lt;dbl&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 1 a 2 &lt;/span>
&lt;span class="c1">#&amp;gt; 2 1 b NaN &lt;/span>
&lt;span class="c1">#&amp;gt; 3 1 c NaN &lt;/span>
&lt;span class="c1">#&amp;gt; 4 2 a NaN &lt;/span>
&lt;span class="c1">#&amp;gt; 5 2 b 4.5&lt;/span>
&lt;span class="c1">#&amp;gt; 6 2 c NaN&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>The expression &lt;code>mean(y)&lt;/code> is evaluated for the empty groups as well, and gives
consistent results with :&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">mean&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">numeric&lt;/span>&lt;span class="p">())&lt;/span>
&lt;span class="c1">#&amp;gt; [1] NaN&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>In particular the result of
&lt;a href="https://dplyr.tidyverse.org/reference/filter.html" target="_blank" rel="noopener">&lt;code>filter()&lt;/code>&lt;/a> preserves the grouping structure of the input
data frame.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">df&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_by&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">f1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">filter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">y&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="m">4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 3 x 4&lt;/span>
&lt;span class="c1">#&amp;gt; # Groups: x, f1 [3]&lt;/span>
&lt;span class="c1">#&amp;gt; f1 f2 x y&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;fct&amp;gt; &amp;lt;fct&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;int&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 a d 1 1&lt;/span>
&lt;span class="c1">#&amp;gt; 2 a e 1 2&lt;/span>
&lt;span class="c1">#&amp;gt; 3 a d 1 3&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>The resulting tibble after the
&lt;a href="https://dplyr.tidyverse.org/reference/filter.html" target="_blank" rel="noopener">&lt;code>filter()&lt;/code>&lt;/a> call has six groups, the same
exact groups that were made by
&lt;a href="https://dplyr.tidyverse.org/reference/group_by.html" target="_blank" rel="noopener">&lt;code>group_by()&lt;/code>&lt;/a>. Previous versions of dplyr
would perform an implicit &lt;code>group_by()&lt;/code> after the filtering, potentially losing
groups.&lt;/p>
&lt;p>Because this is potentially disruptive,
&lt;a href="https://dplyr.tidyverse.org/reference/filter.html" target="_blank" rel="noopener">&lt;code>filter()&lt;/code>&lt;/a> has gained a &lt;code>.preserve&lt;/code> argument,
when &lt;code>.preserve&lt;/code> is &lt;code>FALSE&lt;/code> the data is first filtered and then regrouped:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">df&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_by&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">f1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">filter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">y&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="m">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">.preserve&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">FALSE&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 4 x 4&lt;/span>
&lt;span class="c1">#&amp;gt; # Groups: x, f1 [6]&lt;/span>
&lt;span class="c1">#&amp;gt; f1 f2 x y&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;fct&amp;gt; &amp;lt;fct&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;int&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 a d 1 1&lt;/span>
&lt;span class="c1">#&amp;gt; 2 a e 1 2&lt;/span>
&lt;span class="c1">#&amp;gt; 3 a d 1 3&lt;/span>
&lt;span class="c1">#&amp;gt; 4 b e 2 4&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;blockquote>
&lt;p>As opposed to what is described above, feedback from this post led us
to change the default value of &lt;code>.preserve&lt;/code> to &lt;code>FALSE&lt;/code>, and update the
algorithm to limit the cost of preserving.&lt;/p>
&lt;/blockquote>
&lt;p>Note however, that even &lt;code>.preserve = FALSE&lt;/code> respects the factors that are used as
grouping variables, in particular &lt;code>filter( , .preserve = FALSE)&lt;/code> is not a way to
discard empty groups. The
&lt;a href="https://forcats.tidyverse.org" target="_blank" rel="noopener">forcats&lt;/a> 📦 may help:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">iris&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_by&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Species&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">filter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">stringr&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="nf">str_detect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Species&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;^v&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">ungroup&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_by&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Species&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">forcats&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="nf">fct_drop&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Species&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 100 x 5&lt;/span>
&lt;span class="c1">#&amp;gt; # Groups: Species [2]&lt;/span>
&lt;span class="c1">#&amp;gt; Sepal.Length Sepal.Width Petal.Length Petal.Width Species &lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;fct&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; 1 7 3.2 4.7 1.4 versicolor&lt;/span>
&lt;span class="c1">#&amp;gt; 2 6.4 3.2 4.5 1.5 versicolor&lt;/span>
&lt;span class="c1">#&amp;gt; 3 6.9 3.1 4.9 1.5 versicolor&lt;/span>
&lt;span class="c1">#&amp;gt; 4 5.5 2.3 4 1.3 versicolor&lt;/span>
&lt;span class="c1">#&amp;gt; 5 6.5 2.8 4.6 1.5 versicolor&lt;/span>
&lt;span class="c1">#&amp;gt; 6 5.7 2.8 4.5 1.3 versicolor&lt;/span>
&lt;span class="c1">#&amp;gt; 7 6.3 3.3 4.7 1.6 versicolor&lt;/span>
&lt;span class="c1">#&amp;gt; 8 4.9 2.4 3.3 1 versicolor&lt;/span>
&lt;span class="c1">#&amp;gt; 9 6.6 2.9 4.6 1.3 versicolor&lt;/span>
&lt;span class="c1">#&amp;gt; 10 5.2 2.7 3.9 1.4 versicolor&lt;/span>
&lt;span class="c1">#&amp;gt; # … with 90 more rows&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;blockquote>
&lt;p>Furthermore, the &lt;code>group_trim()&lt;/code> function has been added. &lt;code>group_trim()&lt;/code>
recalculates the grouping metadata after dropping unused levels for
all grouping variables that are factors.&lt;/p>
&lt;/blockquote>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">iris&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_by&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Species&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">filter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">stringr&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="nf">str_detect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Species&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;^v&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_trim&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 100 x 5&lt;/span>
&lt;span class="c1">#&amp;gt; # Groups: Species [2]&lt;/span>
&lt;span class="c1">#&amp;gt; Sepal.Length Sepal.Width Petal.Length Petal.Width Species &lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;fct&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; 1 7 3.2 4.7 1.4 versicolor&lt;/span>
&lt;span class="c1">#&amp;gt; 2 6.4 3.2 4.5 1.5 versicolor&lt;/span>
&lt;span class="c1">#&amp;gt; 3 6.9 3.1 4.9 1.5 versicolor&lt;/span>
&lt;span class="c1">#&amp;gt; 4 5.5 2.3 4 1.3 versicolor&lt;/span>
&lt;span class="c1">#&amp;gt; 5 6.5 2.8 4.6 1.5 versicolor&lt;/span>
&lt;span class="c1">#&amp;gt; 6 5.7 2.8 4.5 1.3 versicolor&lt;/span>
&lt;span class="c1">#&amp;gt; 7 6.3 3.3 4.7 1.6 versicolor&lt;/span>
&lt;span class="c1">#&amp;gt; 8 4.9 2.4 3.3 1 versicolor&lt;/span>
&lt;span class="c1">#&amp;gt; 9 6.6 2.9 4.6 1.3 versicolor&lt;/span>
&lt;span class="c1">#&amp;gt; 10 5.2 2.7 3.9 1.4 versicolor&lt;/span>
&lt;span class="c1">#&amp;gt; # … with 90 more rows&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;h2 id="new-grouping-fuctions">New grouping fuctions
&lt;a href="#new-grouping-fuctions">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>The grouping family is extended with new functions:&lt;/p>
&lt;ul>
&lt;li>
&lt;a href="https://dplyr.tidyverse.org/reference/group_nest.html" target="_blank" rel="noopener">&lt;code>group_nest()&lt;/code>&lt;/a> : similar to
&lt;a href="https://tidyr.tidyverse.org/reference/nest.html" target="_blank" rel="noopener">&lt;code>tidyr::nest()&lt;/code>&lt;/a> but focusing on the grouping columns
rather than the columns to nest&lt;/li>
&lt;li>
&lt;a href="https://dplyr.tidyverse.org/reference/group_split.html" target="_blank" rel="noopener">&lt;code>group_split()&lt;/code>&lt;/a> : similar to &lt;code>base::split()&lt;/code> but the grouping is subject to the data mask&lt;/li>
&lt;li>
&lt;a href="https://dplyr.tidyverse.org/reference/group_keys.html" target="_blank" rel="noopener">&lt;code>group_keys()&lt;/code>&lt;/a> : retrieves a tibble with one row per group and one column per grouping variable&lt;/li>
&lt;li>
&lt;a href="https://dplyr.tidyverse.org/reference/group_rows.html" target="_blank" rel="noopener">&lt;code>group_rows()&lt;/code>&lt;/a> : retrieves a list of 1-based integer vectors, each vector represents the indices
of the group in the grouped data frame&lt;/li>
&lt;/ul>
&lt;p>The primary use case for these functions is with already grouped data frames, that may directly
or indirectly originate from
&lt;a href="https://dplyr.tidyverse.org/reference/group_by.html" target="_blank" rel="noopener">&lt;code>group_by()&lt;/code>&lt;/a>.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">data&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="n">iris&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_by&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Species&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">filter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Sepal.Length&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="nf">mean&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Sepal.Length&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="n">data&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_nest&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 3 x 2&lt;/span>
&lt;span class="c1">#&amp;gt; Species data &lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;fct&amp;gt; &amp;lt;list&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; 1 setosa &amp;lt;tibble [22 × 4]&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 2 versicolor &amp;lt;tibble [24 × 4]&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 3 virginica &amp;lt;tibble [22 × 4]&amp;gt;&lt;/span>
&lt;span class="n">data&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_split&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1">#&amp;gt; [[1]]&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 22 x 5&lt;/span>
&lt;span class="c1">#&amp;gt; Sepal.Length Sepal.Width Petal.Length Petal.Width Species&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;fct&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; 1 5.1 3.5 1.4 0.2 setosa &lt;/span>
&lt;span class="c1">#&amp;gt; 2 5.4 3.9 1.7 0.4 setosa &lt;/span>
&lt;span class="c1">#&amp;gt; 3 5.4 3.7 1.5 0.2 setosa &lt;/span>
&lt;span class="c1">#&amp;gt; 4 5.8 4 1.2 0.2 setosa &lt;/span>
&lt;span class="c1">#&amp;gt; 5 5.7 4.4 1.5 0.4 setosa &lt;/span>
&lt;span class="c1">#&amp;gt; 6 5.4 3.9 1.3 0.4 setosa &lt;/span>
&lt;span class="c1">#&amp;gt; 7 5.1 3.5 1.4 0.3 setosa &lt;/span>
&lt;span class="c1">#&amp;gt; 8 5.7 3.8 1.7 0.3 setosa &lt;/span>
&lt;span class="c1">#&amp;gt; 9 5.1 3.8 1.5 0.3 setosa &lt;/span>
&lt;span class="c1">#&amp;gt; 10 5.4 3.4 1.7 0.2 setosa &lt;/span>
&lt;span class="c1">#&amp;gt; # … with 12 more rows&lt;/span>
&lt;span class="c1">#&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; [[2]]&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 24 x 5&lt;/span>
&lt;span class="c1">#&amp;gt; Sepal.Length Sepal.Width Petal.Length Petal.Width Species &lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;fct&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; 1 7 3.2 4.7 1.4 versicolor&lt;/span>
&lt;span class="c1">#&amp;gt; 2 6.4 3.2 4.5 1.5 versicolor&lt;/span>
&lt;span class="c1">#&amp;gt; 3 6.9 3.1 4.9 1.5 versicolor&lt;/span>
&lt;span class="c1">#&amp;gt; 4 6.5 2.8 4.6 1.5 versicolor&lt;/span>
&lt;span class="c1">#&amp;gt; 5 6.3 3.3 4.7 1.6 versicolor&lt;/span>
&lt;span class="c1">#&amp;gt; 6 6.6 2.9 4.6 1.3 versicolor&lt;/span>
&lt;span class="c1">#&amp;gt; 7 6 2.2 4 1 versicolor&lt;/span>
&lt;span class="c1">#&amp;gt; 8 6.1 2.9 4.7 1.4 versicolor&lt;/span>
&lt;span class="c1">#&amp;gt; 9 6.7 3.1 4.4 1.4 versicolor&lt;/span>
&lt;span class="c1">#&amp;gt; 10 6.2 2.2 4.5 1.5 versicolor&lt;/span>
&lt;span class="c1">#&amp;gt; # … with 14 more rows&lt;/span>
&lt;span class="c1">#&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; [[3]]&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 22 x 5&lt;/span>
&lt;span class="c1">#&amp;gt; Sepal.Length Sepal.Width Petal.Length Petal.Width Species &lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;fct&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; 1 7.1 3 5.9 2.1 virginica&lt;/span>
&lt;span class="c1">#&amp;gt; 2 7.6 3 6.6 2.1 virginica&lt;/span>
&lt;span class="c1">#&amp;gt; 3 7.3 2.9 6.3 1.8 virginica&lt;/span>
&lt;span class="c1">#&amp;gt; 4 6.7 2.5 5.8 1.8 virginica&lt;/span>
&lt;span class="c1">#&amp;gt; 5 7.2 3.6 6.1 2.5 virginica&lt;/span>
&lt;span class="c1">#&amp;gt; 6 6.8 3 5.5 2.1 virginica&lt;/span>
&lt;span class="c1">#&amp;gt; 7 7.7 3.8 6.7 2.2 virginica&lt;/span>
&lt;span class="c1">#&amp;gt; 8 7.7 2.6 6.9 2.3 virginica&lt;/span>
&lt;span class="c1">#&amp;gt; 9 6.9 3.2 5.7 2.3 virginica&lt;/span>
&lt;span class="c1">#&amp;gt; 10 7.7 2.8 6.7 2 virginica&lt;/span>
&lt;span class="c1">#&amp;gt; # … with 12 more rows&lt;/span>
&lt;span class="n">data&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_keys&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 3 x 1&lt;/span>
&lt;span class="c1">#&amp;gt; Species &lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;fct&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; 1 setosa &lt;/span>
&lt;span class="c1">#&amp;gt; 2 versicolor&lt;/span>
&lt;span class="c1">#&amp;gt; 3 virginica&lt;/span>
&lt;span class="n">data&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_rows&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1">#&amp;gt; [[1]]&lt;/span>
&lt;span class="c1">#&amp;gt; [1] 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22&lt;/span>
&lt;span class="c1">#&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; [[2]]&lt;/span>
&lt;span class="c1">#&amp;gt; [1] 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45&lt;/span>
&lt;span class="c1">#&amp;gt; [24] 46&lt;/span>
&lt;span class="c1">#&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; [[3]]&lt;/span>
&lt;span class="c1">#&amp;gt; [1] 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Alternatively, these functions may be used on an ungrouped data frame, together with a
grouping specification that is subject to the data mask. In that case, the grouping is
implicitly performed by
&lt;a href="https://dplyr.tidyverse.org/reference/group_by.html" target="_blank" rel="noopener">&lt;code>group_by()&lt;/code>&lt;/a>:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">iris&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_nest&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Species&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 3 x 2&lt;/span>
&lt;span class="c1">#&amp;gt; Species data &lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;fct&amp;gt; &amp;lt;list&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; 1 setosa &amp;lt;tibble [50 × 4]&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 2 versicolor &amp;lt;tibble [50 × 4]&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 3 virginica &amp;lt;tibble [50 × 4]&amp;gt;&lt;/span>
&lt;span class="n">iris&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_split&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Species&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; [[1]]&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 50 x 5&lt;/span>
&lt;span class="c1">#&amp;gt; Sepal.Length Sepal.Width Petal.Length Petal.Width Species&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;fct&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; 1 5.1 3.5 1.4 0.2 setosa &lt;/span>
&lt;span class="c1">#&amp;gt; 2 4.9 3 1.4 0.2 setosa &lt;/span>
&lt;span class="c1">#&amp;gt; 3 4.7 3.2 1.3 0.2 setosa &lt;/span>
&lt;span class="c1">#&amp;gt; 4 4.6 3.1 1.5 0.2 setosa &lt;/span>
&lt;span class="c1">#&amp;gt; 5 5 3.6 1.4 0.2 setosa &lt;/span>
&lt;span class="c1">#&amp;gt; 6 5.4 3.9 1.7 0.4 setosa &lt;/span>
&lt;span class="c1">#&amp;gt; 7 4.6 3.4 1.4 0.3 setosa &lt;/span>
&lt;span class="c1">#&amp;gt; 8 5 3.4 1.5 0.2 setosa &lt;/span>
&lt;span class="c1">#&amp;gt; 9 4.4 2.9 1.4 0.2 setosa &lt;/span>
&lt;span class="c1">#&amp;gt; 10 4.9 3.1 1.5 0.1 setosa &lt;/span>
&lt;span class="c1">#&amp;gt; # … with 40 more rows&lt;/span>
&lt;span class="c1">#&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; [[2]]&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 50 x 5&lt;/span>
&lt;span class="c1">#&amp;gt; Sepal.Length Sepal.Width Petal.Length Petal.Width Species &lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;fct&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; 1 7 3.2 4.7 1.4 versicolor&lt;/span>
&lt;span class="c1">#&amp;gt; 2 6.4 3.2 4.5 1.5 versicolor&lt;/span>
&lt;span class="c1">#&amp;gt; 3 6.9 3.1 4.9 1.5 versicolor&lt;/span>
&lt;span class="c1">#&amp;gt; 4 5.5 2.3 4 1.3 versicolor&lt;/span>
&lt;span class="c1">#&amp;gt; 5 6.5 2.8 4.6 1.5 versicolor&lt;/span>
&lt;span class="c1">#&amp;gt; 6 5.7 2.8 4.5 1.3 versicolor&lt;/span>
&lt;span class="c1">#&amp;gt; 7 6.3 3.3 4.7 1.6 versicolor&lt;/span>
&lt;span class="c1">#&amp;gt; 8 4.9 2.4 3.3 1 versicolor&lt;/span>
&lt;span class="c1">#&amp;gt; 9 6.6 2.9 4.6 1.3 versicolor&lt;/span>
&lt;span class="c1">#&amp;gt; 10 5.2 2.7 3.9 1.4 versicolor&lt;/span>
&lt;span class="c1">#&amp;gt; # … with 40 more rows&lt;/span>
&lt;span class="c1">#&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; [[3]]&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 50 x 5&lt;/span>
&lt;span class="c1">#&amp;gt; Sepal.Length Sepal.Width Petal.Length Petal.Width Species &lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;fct&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; 1 6.3 3.3 6 2.5 virginica&lt;/span>
&lt;span class="c1">#&amp;gt; 2 5.8 2.7 5.1 1.9 virginica&lt;/span>
&lt;span class="c1">#&amp;gt; 3 7.1 3 5.9 2.1 virginica&lt;/span>
&lt;span class="c1">#&amp;gt; 4 6.3 2.9 5.6 1.8 virginica&lt;/span>
&lt;span class="c1">#&amp;gt; 5 6.5 3 5.8 2.2 virginica&lt;/span>
&lt;span class="c1">#&amp;gt; 6 7.6 3 6.6 2.1 virginica&lt;/span>
&lt;span class="c1">#&amp;gt; 7 4.9 2.5 4.5 1.7 virginica&lt;/span>
&lt;span class="c1">#&amp;gt; 8 7.3 2.9 6.3 1.8 virginica&lt;/span>
&lt;span class="c1">#&amp;gt; 9 6.7 2.5 5.8 1.8 virginica&lt;/span>
&lt;span class="c1">#&amp;gt; 10 7.2 3.6 6.1 2.5 virginica&lt;/span>
&lt;span class="c1">#&amp;gt; # … with 40 more rows&lt;/span>
&lt;span class="n">iris&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_keys&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Species&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 3 x 1&lt;/span>
&lt;span class="c1">#&amp;gt; Species &lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;fct&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; 1 setosa &lt;/span>
&lt;span class="c1">#&amp;gt; 2 versicolor&lt;/span>
&lt;span class="c1">#&amp;gt; 3 virginica&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>These functions are related to each other in how they handle and organize the
grouping information and who/what is responsible for maintaining the relation between the
data and the groups.&lt;/p>
&lt;ul>
&lt;li>
&lt;p>A grouped data frame, as generated by
&lt;a href="https://dplyr.tidyverse.org/reference/group_by.html" target="_blank" rel="noopener">&lt;code>group_by()&lt;/code>&lt;/a> stores the grouping information
as an attribute of the data frame, dplyr verbs use that information to maintain
the relationship&lt;/p>
&lt;/li>
&lt;li>
&lt;p>When using
&lt;a href="https://dplyr.tidyverse.org/reference/group_nest.html" target="_blank" rel="noopener">&lt;code>group_nest()&lt;/code>&lt;/a> the data is structured as a data frame that has a list column
to hold the non grouping columns. The result of
&lt;a href="https://dplyr.tidyverse.org/reference/group_nest.html" target="_blank" rel="noopener">&lt;code>group_nest()&lt;/code>&lt;/a> is not a grouped data frame,
therefore the structure of the data frame maintains the relationship.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>When using
&lt;a href="https://dplyr.tidyverse.org/reference/group_split.html" target="_blank" rel="noopener">&lt;code>group_split()&lt;/code>&lt;/a> the data is split into a list, and each element of the list
contains a tibble with the rows of the associated group. The user is responsible to
maintain the relationship, and may benefit from the assistance of the
&lt;a href="https://dplyr.tidyverse.org/reference/group_keys.html" target="_blank" rel="noopener">&lt;code>group_keys()&lt;/code>&lt;/a>
function, especially in the presence of empty groups.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="iterate-on-grouped-tibbles-by-group">Iterate on grouped tibbles by group
&lt;a href="#iterate-on-grouped-tibbles-by-group">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>The new
&lt;a href="https://dplyr.tidyverse.org/reference/group_map.html" target="_blank" rel="noopener">&lt;code>group_map()&lt;/code>&lt;/a> function provides a purrr style function that can be used to
iterate on grouped tibbles. Each conceptual group of the data frame is exposed to the
function with two pieces of information:&lt;/p>
&lt;ul>
&lt;li>The subset of the data for the group, exposed as &lt;code>.x&lt;/code>.&lt;/li>
&lt;li>The key, a tibble with exactly one row and columns for each grouping variable,
exposed as &lt;code>.y&lt;/code>&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">mtcars&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_by&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cyl&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_map&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">~&lt;/span> &lt;span class="nf">head&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">.x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">2L&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 6 x 11&lt;/span>
&lt;span class="c1">#&amp;gt; # Groups: cyl [3]&lt;/span>
&lt;span class="c1">#&amp;gt; cyl mpg disp hp drat wt qsec vs am gear carb&lt;/span>
&lt;span class="c1">#&amp;gt; * &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 4 22.8 108 93 3.85 2.32 18.6 1 1 4 1&lt;/span>
&lt;span class="c1">#&amp;gt; 2 4 24.4 147. 62 3.69 3.19 20 1 0 4 2&lt;/span>
&lt;span class="c1">#&amp;gt; 3 6 21 160 110 3.9 2.62 16.5 0 1 4 4&lt;/span>
&lt;span class="c1">#&amp;gt; 4 6 21 160 110 3.9 2.88 17.0 0 1 4 4&lt;/span>
&lt;span class="c1">#&amp;gt; 5 8 18.7 360 175 3.15 3.44 17.0 0 0 3 2&lt;/span>
&lt;span class="c1">#&amp;gt; 6 8 14.3 360 245 3.21 3.57 15.8 0 0 3 4&lt;/span>
&lt;span class="n">mtcars&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_by&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cyl&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_map&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">~&lt;/span> &lt;span class="nf">tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mod&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">list&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">lm&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mpg&lt;/span> &lt;span class="o">~&lt;/span> &lt;span class="n">disp&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">.x&lt;/span>&lt;span class="p">))))&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 3 x 2&lt;/span>
&lt;span class="c1">#&amp;gt; # Groups: cyl [3]&lt;/span>
&lt;span class="c1">#&amp;gt; cyl mod &lt;/span>
&lt;span class="c1">#&amp;gt; * &amp;lt;dbl&amp;gt; &amp;lt;list&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; 1 4 &amp;lt;S3: lm&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 2 6 &amp;lt;S3: lm&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 3 8 &amp;lt;S3: lm&amp;gt;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>The lambda function must return a data frame.
&lt;a href="https://dplyr.tidyverse.org/reference/group_map.html" target="_blank" rel="noopener">&lt;code>group_map()&lt;/code>&lt;/a> row binds the data
frames, recycles the grouping columns and structures the result as a grouped tibble.&lt;/p>
&lt;blockquote>
&lt;p>&lt;code>group_walk()&lt;/code> can be used when iterating on the groups is only desired for side effects.
It applies the formula to each group, and then silently returns its input.&lt;/p>
&lt;/blockquote>
&lt;h1 id="changes-in-filter-and-slice">Changes in filter and slice
&lt;a href="#changes-in-filter-and-slice">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h1>&lt;p>Besides changes described previously related to preservation of the grouping structure,
&lt;a href="https://dplyr.tidyverse.org/reference/filter.html" target="_blank" rel="noopener">&lt;code>filter()&lt;/code>&lt;/a> and
&lt;a href="https://dplyr.tidyverse.org/reference/slice.html" target="_blank" rel="noopener">&lt;code>slice()&lt;/code>&lt;/a> now reorganize the data by groups for performance reasons:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">tibble&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">4&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">5&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_by&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">filter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">y&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="m">5&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 4 x 2&lt;/span>
&lt;span class="c1">#&amp;gt; # Groups: x [2]&lt;/span>
&lt;span class="c1">#&amp;gt; x y&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 1 1&lt;/span>
&lt;span class="c1">#&amp;gt; 2 2 2&lt;/span>
&lt;span class="c1">#&amp;gt; 3 1 3&lt;/span>
&lt;span class="c1">#&amp;gt; 4 2 4&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;blockquote>
&lt;p>This has been reverted for &lt;code>filter()&lt;/code> due to popular demand. Calling &lt;code>filter()&lt;/code>
on a grouped data frame leaves the rows in the original order.&lt;/p>
&lt;/blockquote>
&lt;h1 id="redesigned-hybrid-evaluation">Redesigned hybrid evaluation
&lt;a href="#redesigned-hybrid-evaluation">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h1>
&lt;h2 id="whats-hybrid-evaluation-again-">What&amp;rsquo;s hybrid evaluation again ?
&lt;a href="#whats-hybrid-evaluation-again-">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Hybrid evaluation is used in
&lt;a href="https://dplyr.tidyverse.org/reference/summarise.html" target="_blank" rel="noopener">&lt;code>summarise()&lt;/code>&lt;/a> and
&lt;a href="https://dplyr.tidyverse.org/reference/mutate.html" target="_blank" rel="noopener">&lt;code>mutate()&lt;/code>&lt;/a> to replace
potential expensive R operations by native C++ code that is group aware.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">iris&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_by&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Species&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">summarise&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Petal.Length&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">mean&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Petal.Length&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 3 x 2&lt;/span>
&lt;span class="c1">#&amp;gt; Species Petal.Length&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;fct&amp;gt; &amp;lt;dbl&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 setosa 1.46&lt;/span>
&lt;span class="c1">#&amp;gt; 2 versicolor 4.26&lt;/span>
&lt;span class="c1">#&amp;gt; 3 virginica 5.55&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>In the example, the &lt;code>base::mean()&lt;/code> function is never called because the
hybrid alternative can directly calculate the mean for each group. Hybrid
evaluation typically gives better performance because it needs fewer memory
allocations.&lt;/p>
&lt;p>In this example, a standard evaluation path would need to:&lt;/p>
&lt;ul>
&lt;li>create subsets of the &lt;code>Petal.Length&lt;/code> column for each group&lt;/li>
&lt;li>call the &lt;code>base::mean()&lt;/code> function on each subset, which would also
imply a cost for S3 dispatching to the right method&lt;/li>
&lt;li>collect all results in a new vector&lt;/li>
&lt;/ul>
&lt;p>In constrast, hybrid evaluation can directly allocate the final
vector, and calculate all 3 means without having to allocate the subsets.&lt;/p>
&lt;h2 id="flaws-in-previous-version">Flaws in previous version
&lt;a href="#flaws-in-previous-version">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Previous versions of hybrid evaluation relied on folding to
replace part of the expression by their hybrid result. For example,
there are hybrid versions of &lt;code>sum()&lt;/code> and &lt;code>n()&lt;/code>, so previous
versions attempted to use them for:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">iris&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_by&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Species&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">summarise&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Petal.Length&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">sum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Petal.Length&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="nf">n&lt;/span>&lt;span class="p">())&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 3 x 2&lt;/span>
&lt;span class="c1">#&amp;gt; Species Petal.Length&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;fct&amp;gt; &amp;lt;dbl&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 setosa 1.46&lt;/span>
&lt;span class="c1">#&amp;gt; 2 versicolor 4.26&lt;/span>
&lt;span class="c1">#&amp;gt; 3 virginica 5.55&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>The gain of replacing parts of the expression with the result of the
hybrid versions was minimal, and the we had to rely on
brittle heuristics to try to respect standard R evaluation semantics.&lt;/p>
&lt;h2 id="new-implementation">New implementation
&lt;a href="#new-implementation">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>The new hybrid system is stricter and falls back to standard R evaluation
when the expression is not entirely recognized.&lt;/p>
&lt;p>The
&lt;a href="https://dplyr.tidyverse.org/reference/hybrid_call.html" target="_blank" rel="noopener">&lt;code>hybrid_call()&lt;/code>&lt;/a> function (subject to change) can be used to test if an expression
would be handled by hybrid or standard evaluation:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">iris&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">hybrid_call&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">mean&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Sepal.Length&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;hybrid evaluation&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; call : base::mean(Sepal.Length)&lt;/span>
&lt;span class="c1">#&amp;gt; C++ class : dplyr::hybrid::internal::SimpleDispatchImpl&amp;lt;14, false, dplyr::NaturalDataFrame, dplyr::hybrid::internal::MeanImpl&amp;gt;&lt;/span>
&lt;span class="n">iris&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">hybrid_call&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">sum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Sepal.Length&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="nf">n&lt;/span>&lt;span class="p">())&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;standard evaluation&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; call : sum(Sepal.Length)/n()&lt;/span>
&lt;span class="n">iris&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">hybrid_call&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="nf">mean&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Sepal.Length&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;standard evaluation&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; call : +mean(Sepal.Length)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Hybrid is very picky about what it can handle, for example &lt;code>TRUE&lt;/code> and &lt;code>FALSE&lt;/code>
are fine for &lt;code>na.rm=&lt;/code> because they are reserved words that can&amp;rsquo;t be replaced, but
&lt;code>T&lt;/code>, &lt;code>F&lt;/code> or any expression that would resolve to a scalar logical are not:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">iris&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">hybrid_call&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">mean&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Sepal.Length&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">na.rm&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">TRUE&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;hybrid evaluation&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; call : base::mean(Sepal.Length, na.rm = TRUE)&lt;/span>
&lt;span class="c1">#&amp;gt; C++ class : dplyr::hybrid::internal::SimpleDispatchImpl&amp;lt;14, true, dplyr::NaturalDataFrame, dplyr::hybrid::internal::MeanImpl&amp;gt;&lt;/span>
&lt;span class="n">iris&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">hybrid_call&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">mean&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Sepal.Length&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">na.rm&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="bp">T&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;standard evaluation&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; call : mean(Sepal.Length, na.rm = T)&lt;/span>
&lt;span class="n">iris&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span> &lt;span class="nf">hybrid_call&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">mean&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Sepal.Length&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">na.rm&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;standard evaluation&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; call : mean(Sepal.Length, na.rm = 1 == 1)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>The first step of the new hybrid system consists of studying the
expression and compare it to known expression patterns. If we find an exact
match, then we have all the information we need, and R is never called
to materialize the result.&lt;/p>
&lt;p>When there is no match, the expression gets evaluated for each group using R standard
evaluation rules in the data mask: a special environment that makes the
columns available and uses contextual information for functions such as
&lt;a href="https://dplyr.tidyverse.org/reference/n.html" target="_blank" rel="noopener">&lt;code>n()&lt;/code>&lt;/a>
and
&lt;a href="https://dplyr.tidyverse.org/reference/row_number.html" target="_blank" rel="noopener">&lt;code>row_number()&lt;/code>&lt;/a>.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">iris&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_by&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Species&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">summarise&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Petal.Length&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">sum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Petal.Length&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="nf">n&lt;/span>&lt;span class="p">())&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 3 x 2&lt;/span>
&lt;span class="c1">#&amp;gt; Species Petal.Length&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;fct&amp;gt; &amp;lt;dbl&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 setosa 1.46&lt;/span>
&lt;span class="c1">#&amp;gt; 2 versicolor 4.26&lt;/span>
&lt;span class="c1">#&amp;gt; 3 virginica 5.55&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;h1 id="performance">Performance
&lt;a href="#performance">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h1>&lt;p>When
&lt;a href="https://dplyr.tidyverse.org/reference/summarise.html" target="_blank" rel="noopener">&lt;code>summarise()&lt;/code>&lt;/a> or
&lt;a href="https://dplyr.tidyverse.org/reference/mutate.html" target="_blank" rel="noopener">&lt;code>mutate()&lt;/code>&lt;/a> use expressions that cannot be handled by
hybrid evaluation, they call back to R from the C++ internals for each group.&lt;/p>
&lt;p>This is an expensive operation because the expressions have to be evaluated
with extra care. Traditionally it meant wrapping the expression in an R &lt;code>tryCatch()&lt;/code>
before evaluating, but R 3.5.0 has added unwind protection which we
&lt;a href="https://github.com/RcppCore/Rcpp/pull/873" target="_blank" rel="noopener">exposed to
Rcpp&lt;/a>. Consequently, the cost of evaluating an R expression carefully is lower
than before.&lt;/p>
&lt;p>We ran a benchmark calculating the means of 10,000 small groups with the
release version of dplyr and this release candidate with and without
using the unwind protect feature.&lt;/p>
&lt;p>Just using the &lt;code>mean()&lt;/code> function would not illustrate the feature, because dplyr would
use hybrid evaluation and never use callbacks to R. So instead we defined a &lt;code>mean_&lt;/code>
function that has the same body as &lt;code>base::mean()&lt;/code>. We also compare this to
the expression &lt;code>sum(x) / n()&lt;/code> because it woudld have been handled by
partial hybrid evaluation in previous versions.&lt;/p>
&lt;p>&lt;img src="https://www.tidyverse.org/articles/2018-12-dplyr-0-8-0_files/timings_summarise_mean.jpeg" alt="">&lt;/p>
&lt;p>This is not a comprehensive benchmark analysis, but on this small example we can read:&lt;/p>
&lt;ul>
&lt;li>unwind protection has no impact when using the hybrid evaluation, this is not a surprise
because the hybrid path does not call back to R.&lt;/li>
&lt;li>hybrid evaluation performs better on the release candidate. This is a direct consequence of
the redesign of hybrid evaluation.&lt;/li>
&lt;li>unwind protection gives a performance boost &lt;code>mean_()&lt;/code>. Please note that the
x axis is on a log scale.&lt;/li>
&lt;li>unwind protection more than compensates for no longer using partial hybrid evaluation.&lt;/li>
&lt;/ul>
&lt;h1 id="nest_join">nest_join
&lt;a href="#nest_join">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h1>&lt;p>The
&lt;a href="https://dplyr.tidyverse.org/reference/nest_join.html" target="_blank" rel="noopener">&lt;code>nest_join()&lt;/code>&lt;/a> function is the newest addition to the join family.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">band_members&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">nest_join&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">band_instruments&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; Joining, by = &amp;#34;name&amp;#34;&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 3 x 3&lt;/span>
&lt;span class="c1">#&amp;gt; name band band_instruments&lt;/span>
&lt;span class="c1">#&amp;gt; * &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;list&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; 1 Mick Stones &amp;lt;tibble [0 × 1]&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 2 John Beatles &amp;lt;tibble [1 × 1]&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 3 Paul Beatles &amp;lt;tibble [1 × 1]&amp;gt;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>A nest join of &lt;code>x&lt;/code> and &lt;code>y&lt;/code> returns all rows and all columns from &lt;code>x&lt;/code>, plus an additional column
that contains a list of tibbles. Each tibble contains all the rows from &lt;code>y&lt;/code> that match that row of &lt;code>x&lt;/code>.
When there is no match, the list column is a 0-row tibble with the same column names and types as &lt;code>y&lt;/code>.&lt;/p>
&lt;p>
&lt;a href="https://dplyr.tidyverse.org/reference/nest_join.html" target="_blank" rel="noopener">&lt;code>nest_join()&lt;/code>&lt;/a> is the most fundamental join since you can recreate the other joins from it:&lt;/p>
&lt;ul>
&lt;li>
&lt;a href="https://dplyr.tidyverse.org/reference/inner_join.html" target="_blank" rel="noopener">&lt;code>inner_join()&lt;/code>&lt;/a> is a
&lt;a href="https://dplyr.tidyverse.org/reference/nest_join.html" target="_blank" rel="noopener">&lt;code>nest_join()&lt;/code>&lt;/a> plus an
&lt;a href="https://tidyr.tidyverse.org/reference/unnest.html" target="_blank" rel="noopener">&lt;code>tidyr::unnest()&lt;/code>&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://dplyr.tidyverse.org/reference/left_join.html" target="_blank" rel="noopener">&lt;code>left_join()&lt;/code>&lt;/a> is a
&lt;a href="https://dplyr.tidyverse.org/reference/nest_join.html" target="_blank" rel="noopener">&lt;code>nest_join()&lt;/code>&lt;/a> plus an
&lt;a href="https://tidyr.tidyverse.org/reference/unnest.html" target="_blank" rel="noopener">&lt;code>tidyr::unnest()&lt;/code>&lt;/a> with &lt;code>drop=TRUE&lt;/code>&lt;/li>
&lt;li>
&lt;a href="https://dplyr.tidyverse.org/reference/semi_join.html" target="_blank" rel="noopener">&lt;code>semi_join()&lt;/code>&lt;/a> is a
&lt;a href="https://dplyr.tidyverse.org/reference/nest_join.html" target="_blank" rel="noopener">&lt;code>nest_join()&lt;/code>&lt;/a> plus a
&lt;a href="https://dplyr.tidyverse.org/reference/filter.html" target="_blank" rel="noopener">&lt;code>filter()&lt;/code>&lt;/a> where you check that every element of data has at least one row.&lt;/li>
&lt;li>
&lt;a href="https://dplyr.tidyverse.org/reference/anti_join.html" target="_blank" rel="noopener">&lt;code>anti_join()&lt;/code>&lt;/a> is a
&lt;a href="https://dplyr.tidyverse.org/reference/nest_join.html" target="_blank" rel="noopener">&lt;code>nest_join()&lt;/code>&lt;/a> plus a
&lt;a href="https://dplyr.tidyverse.org/reference/filter.html" target="_blank" rel="noopener">&lt;code>filter()&lt;/code>&lt;/a> where you check every element has zero rows.&lt;/li>
&lt;/ul>
&lt;h1 id="scoped-variants">Scoped variants
&lt;a href="#scoped-variants">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h1>&lt;p>The scoped (or colwise) verbs are the set of verbs with &lt;code>_at&lt;/code>, &lt;code>_if&lt;/code> and &lt;code>_all&lt;/code> suffixes.
These verbs apply a certain behaviour (for instance, a mutating or summarising operation) to a given
selection of columns. This release of dplyr improves the consistency of the syntax and the behaviour with grouped tibbles.&lt;/p>
&lt;h2 id="a-purrr-like-syntax-for-passing-functions">A purrr-like syntax for passing functions
&lt;a href="#a-purrr-like-syntax-for-passing-functions">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>In dplyr 0.8.0, we have implemented support for functions and purrr-style lambda functions:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">iris&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">as_tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">iris&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># For concise print method&lt;/span>
&lt;span class="nf">mutate_if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">iris&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">is.numeric&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">~&lt;/span> &lt;span class="n">. &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nf">mean&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">.)&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 150 x 5&lt;/span>
&lt;span class="c1">#&amp;gt; Sepal.Length Sepal.Width Petal.Length Petal.Width Species&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;fct&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; 1 -0.743 0.443 -2.36 -0.999 setosa &lt;/span>
&lt;span class="c1">#&amp;gt; 2 -0.943 -0.0573 -2.36 -0.999 setosa &lt;/span>
&lt;span class="c1">#&amp;gt; 3 -1.14 0.143 -2.46 -0.999 setosa &lt;/span>
&lt;span class="c1">#&amp;gt; 4 -1.24 0.0427 -2.26 -0.999 setosa &lt;/span>
&lt;span class="c1">#&amp;gt; 5 -0.843 0.543 -2.36 -0.999 setosa &lt;/span>
&lt;span class="c1">#&amp;gt; 6 -0.443 0.843 -2.06 -0.799 setosa &lt;/span>
&lt;span class="c1">#&amp;gt; 7 -1.24 0.343 -2.36 -0.899 setosa &lt;/span>
&lt;span class="c1">#&amp;gt; 8 -0.843 0.343 -2.26 -0.999 setosa &lt;/span>
&lt;span class="c1">#&amp;gt; 9 -1.44 -0.157 -2.36 -0.999 setosa &lt;/span>
&lt;span class="c1">#&amp;gt; 10 -0.943 0.0427 -2.26 -1.10 setosa &lt;/span>
&lt;span class="c1">#&amp;gt; # … with 140 more rows&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>And lists of functions and purrr-style lambda functions:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">fns&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">list&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="n">centered&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">mean&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1"># Function object&lt;/span>
&lt;span class="n">scaled&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">~&lt;/span> &lt;span class="n">. &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nf">mean&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">.)&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="nf">sd&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">.)&lt;/span> &lt;span class="c1"># Purrr-style lambda&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;span class="nf">mutate_if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">iris&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">is.numeric&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">fns&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 150 x 13&lt;/span>
&lt;span class="c1">#&amp;gt; Sepal.Length Sepal.Width Petal.Length Petal.Width Species&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;fct&amp;gt; &lt;/span>
&lt;span class="c1">#&amp;gt; 1 5.1 3.5 1.4 0.2 setosa &lt;/span>
&lt;span class="c1">#&amp;gt; 2 4.9 3 1.4 0.2 setosa &lt;/span>
&lt;span class="c1">#&amp;gt; 3 4.7 3.2 1.3 0.2 setosa &lt;/span>
&lt;span class="c1">#&amp;gt; 4 4.6 3.1 1.5 0.2 setosa &lt;/span>
&lt;span class="c1">#&amp;gt; 5 5 3.6 1.4 0.2 setosa &lt;/span>
&lt;span class="c1">#&amp;gt; 6 5.4 3.9 1.7 0.4 setosa &lt;/span>
&lt;span class="c1">#&amp;gt; 7 4.6 3.4 1.4 0.3 setosa &lt;/span>
&lt;span class="c1">#&amp;gt; 8 5 3.4 1.5 0.2 setosa &lt;/span>
&lt;span class="c1">#&amp;gt; 9 4.4 2.9 1.4 0.2 setosa &lt;/span>
&lt;span class="c1">#&amp;gt; 10 4.9 3.1 1.5 0.1 setosa &lt;/span>
&lt;span class="c1">#&amp;gt; # … with 140 more rows, and 8 more variables: Sepal.Length_centered &amp;lt;dbl&amp;gt;,&lt;/span>
&lt;span class="c1">#&amp;gt; # Sepal.Width_centered &amp;lt;dbl&amp;gt;, Petal.Length_centered &amp;lt;dbl&amp;gt;,&lt;/span>
&lt;span class="c1">#&amp;gt; # Petal.Width_centered &amp;lt;dbl&amp;gt;, Sepal.Length_scaled &amp;lt;dbl&amp;gt;,&lt;/span>
&lt;span class="c1">#&amp;gt; # Sepal.Width_scaled &amp;lt;dbl&amp;gt;, Petal.Length_scaled &amp;lt;dbl&amp;gt;,&lt;/span>
&lt;span class="c1">#&amp;gt; # Petal.Width_scaled &amp;lt;dbl&amp;gt;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>This is now the preferred syntax for passing functions to the scoped verbs because it is simpler and consistent with purrr.
Counting from dplyr 0.8.0, the hybrid evaluator recognises and inlines these lambdas, so that native implementation of
common algorithms will kick in just as it did with expressions passed with &lt;code>funs()&lt;/code>.
Consequently, we are soft-deprecating &lt;code>funs()&lt;/code>: it will continue to work without any warnings for now,
but will eventually start issuing warnings.&lt;/p>
&lt;h2 id="behaviour-with-grouped-tibbles">Behaviour with grouped tibbles
&lt;a href="#behaviour-with-grouped-tibbles">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>We have reviewed the documentation of all scoped variants to make clear how the scoped operations
are applied to grouped tibbles. For most of the scoped verbs, the operations also apply on
the grouping variables when they are part of the selection. This includes:&lt;/p>
&lt;ul>
&lt;li>
&lt;a href="https://dplyr.tidyverse.org/reference/arrange_all.html" target="_blank" rel="noopener">&lt;code>arrange_all()&lt;/code>&lt;/a>,
&lt;a href="https://dplyr.tidyverse.org/reference/arrange_at.html" target="_blank" rel="noopener">&lt;code>arrange_at()&lt;/code>&lt;/a>, and
&lt;a href="https://dplyr.tidyverse.org/reference/arrange_if.html" target="_blank" rel="noopener">&lt;code>arrange_if()&lt;/code>&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://dplyr.tidyverse.org/reference/distinct_all.html" target="_blank" rel="noopener">&lt;code>distinct_all()&lt;/code>&lt;/a>,
&lt;a href="https://dplyr.tidyverse.org/reference/distinct_at.html" target="_blank" rel="noopener">&lt;code>distinct_at()&lt;/code>&lt;/a>, and
&lt;a href="https://dplyr.tidyverse.org/reference/distinct_if.html" target="_blank" rel="noopener">&lt;code>distinct_if()&lt;/code>&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://dplyr.tidyverse.org/reference/filter_all.html" target="_blank" rel="noopener">&lt;code>filter_all()&lt;/code>&lt;/a>,
&lt;a href="https://dplyr.tidyverse.org/reference/filter_at.html" target="_blank" rel="noopener">&lt;code>filter_at()&lt;/code>&lt;/a>, and
&lt;a href="https://dplyr.tidyverse.org/reference/filter_if.html" target="_blank" rel="noopener">&lt;code>filter_if()&lt;/code>&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://dplyr.tidyverse.org/reference/group_by_all.html" target="_blank" rel="noopener">&lt;code>group_by_all()&lt;/code>&lt;/a>,
&lt;a href="https://dplyr.tidyverse.org/reference/group_by_at.html" target="_blank" rel="noopener">&lt;code>group_by_at()&lt;/code>&lt;/a>, and
&lt;a href="https://dplyr.tidyverse.org/reference/group_by_if.html" target="_blank" rel="noopener">&lt;code>group_by_if()&lt;/code>&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://dplyr.tidyverse.org/reference/select_all.html" target="_blank" rel="noopener">&lt;code>select_all()&lt;/code>&lt;/a>,
&lt;a href="https://dplyr.tidyverse.org/reference/select_at.html" target="_blank" rel="noopener">&lt;code>select_at()&lt;/code>&lt;/a>, and
&lt;a href="https://dplyr.tidyverse.org/reference/select_if.html" target="_blank" rel="noopener">&lt;code>select_if()&lt;/code>&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>This is not the case for summarising and mutating variants where operations are &lt;em>not&lt;/em> applied on grouping variables.
The behaviour depends on whether the selection is &lt;strong>implicit&lt;/strong> (&lt;code>all&lt;/code> and &lt;code>if&lt;/code> selections) or &lt;strong>explicit&lt;/strong> (&lt;code>at&lt;/code> selections).
Grouping variables covered by explicit selections (with
&lt;a href="https://dplyr.tidyverse.org/reference/summarise_at.html" target="_blank" rel="noopener">&lt;code>summarise_at()&lt;/code>&lt;/a>,
&lt;a href="https://dplyr.tidyverse.org/reference/mutate_at.html" target="_blank" rel="noopener">&lt;code>mutate_at()&lt;/code>&lt;/a>, and
&lt;a href="https://dplyr.tidyverse.org/reference/transmute_at.html" target="_blank" rel="noopener">&lt;code>transmute_at()&lt;/code>&lt;/a> are always an error.
For implicit selections, the grouping variables are always ignored. In this case, the level of verbosity depends on the kind of operation:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Summarising operations (
&lt;a href="https://dplyr.tidyverse.org/reference/summarise_all.html" target="_blank" rel="noopener">&lt;code>summarise_all()&lt;/code>&lt;/a> and
&lt;a href="https://dplyr.tidyverse.org/reference/summarise_if.html" target="_blank" rel="noopener">&lt;code>summarise_if()&lt;/code>&lt;/a>
ignore grouping variables silently because it is obvious that
operations are not applied on grouping variables.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>On the other hand, it isn&amp;rsquo;t as obvious in the case of mutating operations (
&lt;a href="https://dplyr.tidyverse.org/reference/mutate_all.html" target="_blank" rel="noopener">&lt;code>mutate_all()&lt;/code>&lt;/a>,
&lt;a href="https://dplyr.tidyverse.org/reference/mutate_if.html" target="_blank" rel="noopener">&lt;code>mutate_if()&lt;/code>&lt;/a>,
&lt;a href="https://dplyr.tidyverse.org/reference/transmute_all.html" target="_blank" rel="noopener">&lt;code>transmute_all()&lt;/code>&lt;/a>, and
&lt;a href="https://dplyr.tidyverse.org/reference/transmute_if.html" target="_blank" rel="noopener">&lt;code>transmute_if()&lt;/code>&lt;/a>).
For this reason, they issue a message indicating which grouping variables are ignored.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>In order to make it easier to explicitly remove the grouping columns from an &lt;code>_at&lt;/code> selection, we have introduced a
new selection helper
&lt;a href="https://dplyr.tidyverse.org/reference/group_cols.html" target="_blank" rel="noopener">&lt;code>group_cols()&lt;/code>&lt;/a>. Just like
&lt;a href="https://dplyr.tidyverse.org/reference/last_col.html" target="_blank" rel="noopener">&lt;code>last_col()&lt;/code>&lt;/a> matches the last column of a tibble,
&lt;a href="https://dplyr.tidyverse.org/reference/group_cols.html" target="_blank" rel="noopener">&lt;code>group_cols()&lt;/code>&lt;/a> matches all grouping columns:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">mtcars&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_by&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cyl&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">select&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">group_cols&lt;/span>&lt;span class="p">())&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 32 x 1&lt;/span>
&lt;span class="c1">#&amp;gt; # Groups: cyl [3]&lt;/span>
&lt;span class="c1">#&amp;gt; cyl&lt;/span>
&lt;span class="c1">#&amp;gt; * &amp;lt;dbl&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 6&lt;/span>
&lt;span class="c1">#&amp;gt; 2 6&lt;/span>
&lt;span class="c1">#&amp;gt; 3 4&lt;/span>
&lt;span class="c1">#&amp;gt; 4 6&lt;/span>
&lt;span class="c1">#&amp;gt; 5 8&lt;/span>
&lt;span class="c1">#&amp;gt; 6 6&lt;/span>
&lt;span class="c1">#&amp;gt; 7 8&lt;/span>
&lt;span class="c1">#&amp;gt; 8 4&lt;/span>
&lt;span class="c1">#&amp;gt; 9 4&lt;/span>
&lt;span class="c1">#&amp;gt; 10 6&lt;/span>
&lt;span class="c1">#&amp;gt; # … with 22 more rows&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>This new helper is mostly intended for selection in scoped variants:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">mtcars&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_by&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cyl&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">mutate_at&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="nf">vars&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">starts_with&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;c&amp;#34;&lt;/span>&lt;span class="p">)),&lt;/span>
&lt;span class="o">~&lt;/span> &lt;span class="n">. &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nf">mean&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">.)&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; Error: Column `cyl` can&amp;#39;t be modified because it&amp;#39;s a grouping variable&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>It makes it easy to remove explicitly the grouping variables:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">mtcars&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">group_by&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cyl&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">mutate_at&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="nf">vars&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">starts_with&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;c&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="nf">group_cols&lt;/span>&lt;span class="p">()),&lt;/span>
&lt;span class="o">~&lt;/span> &lt;span class="n">. &lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nf">mean&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">.)&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 32 x 11&lt;/span>
&lt;span class="c1">#&amp;gt; # Groups: cyl [3]&lt;/span>
&lt;span class="c1">#&amp;gt; mpg cyl disp hp drat wt qsec vs am gear carb&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 21 6 160 110 3.9 2.62 16.5 0 1 4 0.571&lt;/span>
&lt;span class="c1">#&amp;gt; 2 21 6 160 110 3.9 2.88 17.0 0 1 4 0.571&lt;/span>
&lt;span class="c1">#&amp;gt; 3 22.8 4 108 93 3.85 2.32 18.6 1 1 4 -0.545&lt;/span>
&lt;span class="c1">#&amp;gt; 4 21.4 6 258 110 3.08 3.22 19.4 1 0 3 -2.43 &lt;/span>
&lt;span class="c1">#&amp;gt; 5 18.7 8 360 175 3.15 3.44 17.0 0 0 3 -1.5 &lt;/span>
&lt;span class="c1">#&amp;gt; 6 18.1 6 225 105 2.76 3.46 20.2 1 0 3 -2.43 &lt;/span>
&lt;span class="c1">#&amp;gt; 7 14.3 8 360 245 3.21 3.57 15.8 0 0 3 0.5 &lt;/span>
&lt;span class="c1">#&amp;gt; 8 24.4 4 147. 62 3.69 3.19 20 1 0 4 0.455&lt;/span>
&lt;span class="c1">#&amp;gt; 9 22.8 4 141. 95 3.92 3.15 22.9 1 0 4 0.455&lt;/span>
&lt;span class="c1">#&amp;gt; 10 19.2 6 168. 123 3.92 3.44 18.3 1 0 4 0.571&lt;/span>
&lt;span class="c1">#&amp;gt; # … with 22 more rows&lt;/span>
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Coming soon: tibble 2.0.0</title><link>https://www.tidyverse.org/blog/2018/11/tibble-2.0.0-pre-announce/</link><pubDate>Wed, 28 Nov 2018 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2018/11/tibble-2.0.0-pre-announce/</guid><description>&lt;p>Version 2.0.0 of the
&lt;a href="https://tibble.tidyverse.org" target="_blank" rel="noopener">tibble package&lt;/a> is almost ready for release. Tibbles are a modern reimagining of the data frame, keeping what time has shown to be effective, and throwing out what is not, with nicer default output too! Grab the development version with:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">devtools&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="nf">install_github&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;tidyverse/tibble&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>We&amp;rsquo;re making a pre-release announcement, because some changes require the attention of maintainers of packages that import or otherwise depend on tibble.
This post describes how to adapt to the next version of tibble and is also an invitation for maintainers to provide feedback before v2.0.0 is finalized and submitted to CRAN.
The easiest way to get in touch is to file an issue at &lt;a href="https://github.com/tidyverse/tibble/issues">https://github.com/tidyverse/tibble/issues&lt;/a> (or to comment on an existing one).
This blog post is aimed at package developers and those who maintain &amp;ldquo;production&amp;rdquo; scripts or apps. A high-level overview of new user-facing features will come in a separate blog post.&lt;/p>
&lt;h2 id="reverse-dependency-checks">Reverse dependency checks
&lt;a href="#reverse-dependency-checks">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>We ran &lt;code>R CMD check&lt;/code> for over 3000 CRAN and Bioconductor packages that depend directly or indirectly on the tibble package and compared results obtained with the CRAN versus development version of tibble.
We will notify the maintainers of all affected packages (regardless of the check results of their package) and aim for a CRAN release before Christmas, so the dust has settled in time for
&lt;a href="https://www.rstudio.com/conference/" target="_blank" rel="noopener">rstudio::conf&lt;/a>.&lt;/p>
&lt;p>We made pull requests to implement the necessary changes in several of the most heavily downloaded packages. Based on this experience, this post highlights the problems downstream maintainers are most likely to see and how to solve them. Most fixes should be quite simple.&lt;/p>
&lt;p>For the full list of changes, features, and bug fixes, please see the
&lt;a href="https://github.com/tidyverse/tibble/tree/master/NEWS.md" target="_blank" rel="noopener">release notes&lt;/a>.&lt;/p>
&lt;h2 id="tibble-construction-and-validation">Tibble construction and validation
&lt;a href="#tibble-construction-and-validation">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>End users should use the
&lt;a href="https://tibble.tidyverse.org/dev/reference/tibble.html" target="_blank" rel="noopener">&lt;code>tibble()&lt;/code>&lt;/a> function to construct tibbles.
It checks the input for consistency and makes sure that the returned tibble is valid.&lt;/p>
&lt;p>Package developers, however, can also consider the low-level
&lt;a href="https://tibble.tidyverse.org/dev/reference/new_tibble.html" target="_blank" rel="noopener">&lt;code>new_tibble()&lt;/code>&lt;/a> constructor. Use
&lt;a href="https://tibble.tidyverse.org/dev/reference/new_tibble.html" target="_blank" rel="noopener">&lt;code>new_tibble()&lt;/code>&lt;/a> to quickly construct a tibble from a list if you are very sure that the input is well-formed (i.e., a list of vectors of equal length).
This function also supports the construction of subclasses of tibble through the &lt;code>class&lt;/code> argument.&lt;/p>
&lt;p>In the development version of tibble, the
&lt;a href="https://tibble.tidyverse.org/dev/reference/new_tibble.html" target="_blank" rel="noopener">&lt;code>new_tibble()&lt;/code>&lt;/a> constructor is a more faithful implementation of the
&lt;a href="https://adv-r.hadley.nz/s3.html#s3-classes" target="_blank" rel="noopener">design advice for S3 classes given in Advanced R&lt;/a>.
Specifically:&lt;/p>
&lt;ul>
&lt;li>
&lt;a href="https://tibble.tidyverse.org/dev/reference/new_tibble.html" target="_blank" rel="noopener">&lt;code>new_tibble()&lt;/code>&lt;/a> is very fast and does very little checking itself.&lt;/li>
&lt;li>The new
&lt;a href="https://tibble.tidyverse.org/dev/reference/new_tibble.html" target="_blank" rel="noopener">&lt;code>validate_tibble()&lt;/code>&lt;/a> function is responsible for validating the structure of a tibble.&lt;/li>
&lt;/ul>
&lt;p>This means that the &lt;code>nrow&lt;/code> argument to
&lt;a href="https://tibble.tidyverse.org/dev/reference/new_tibble.html" target="_blank" rel="noopener">&lt;code>new_tibble()&lt;/code>&lt;/a> is now mandatory.
We are aware that this might be the single most disruptive change, but we think that any guesswork here would be detrimental to stability (especially in corner cases) and that this particular problem is very easy to fix.
The &lt;code>nrow&lt;/code> argument already existed in tibble v1.4.2, so code that uses it requires no change and should continue to work.
If you need to add &lt;code>nrow&lt;/code> arguments to
&lt;a href="https://tibble.tidyverse.org/dev/reference/new_tibble.html" target="_blank" rel="noopener">&lt;code>new_tibble()&lt;/code>&lt;/a> calls, you can do so independently of the tibble v2.0.0 release.
Please be aware that &lt;code>nrow&lt;/code> must be passed as a named argument, because it comes after the ellipsis &lt;code>...&lt;/code> in the signature. Here are common patterns for setting the &lt;code>nrow&lt;/code> argument:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">tibble&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">x&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">data.frame&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># Code that lacks `nrow` fails&lt;/span>
&lt;span class="nf">new_tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; Error: Must pass a scalar integer as `nrow` argument to `new_tibble()`.&lt;/span>
&lt;span class="c1"># Fix by specifying `nrow`&lt;/span>
&lt;span class="nf">new_tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">nrow&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">nrow&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1"># if x is a data frame&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 1 x 1&lt;/span>
&lt;span class="c1">#&amp;gt; a&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;dbl&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 1&lt;/span>
&lt;span class="n">nrow_x&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">NROW&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x[[1]]&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># if x has at least one column&lt;/span>
&lt;span class="c1"># nrow_x &amp;lt;- ... # if the number of rows is given elsewhere&lt;/span>
&lt;span class="nf">new_tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">nrow&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">nrow_x&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 1 x 1&lt;/span>
&lt;span class="c1">#&amp;gt; a&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;dbl&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 1&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;h2 id="coercion-and-name-repair">Coercion and name repair
&lt;a href="#coercion-and-name-repair">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>The tibble mentality has always been that the user is responsible for managing column names, i.e. names are not automatically munged. This remains true, but the development version of tibble is stricter about names and offers more support for name repair.&lt;/p>
&lt;p>In the development version of tibble, by default, column names must exist and be unique. Some packages use
&lt;a href="https://tibble.tidyverse.org/dev/reference/as_tibble.html" target="_blank" rel="noopener">&lt;code>as_tibble()&lt;/code>&lt;/a> internally to coerce a dysfunctionally-named object to a tibble and &lt;em>then&lt;/em> apply proper column names. Here&amp;rsquo;s a typical error and solution:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">tibble&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">(&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">cov&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">unname&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">iris[&lt;/span>&lt;span class="m">-5&lt;/span>&lt;span class="n">]&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;span class="c1">#&amp;gt; [,1] [,2] [,3] [,4]&lt;/span>
&lt;span class="c1">#&amp;gt; [1,] 0.6856935 -0.0424340 1.2743154 0.5162707&lt;/span>
&lt;span class="c1">#&amp;gt; [2,] -0.0424340 0.1899794 -0.3296564 -0.1216394&lt;/span>
&lt;span class="c1">#&amp;gt; [3,] 1.2743154 -0.3296564 3.1162779 1.2956094&lt;/span>
&lt;span class="c1">#&amp;gt; [4,] 0.5162707 -0.1216394 1.2956094 0.5810063&lt;/span>
&lt;span class="c1"># problematic approach:&lt;/span>
&lt;span class="c1"># 1. make tibble&lt;/span>
&lt;span class="c1"># 2. apply nice names&lt;/span>
&lt;span class="n">x&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">as_tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">m&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; Error: Columns 1, 2, 3, 4 must be named.&lt;/span>
&lt;span class="c1">#&amp;gt; Use .name_repair to specify repair.&lt;/span>
&lt;span class="nf">colnames&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="kc">letters&lt;/span>&lt;span class="n">[1&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="m">4&lt;/span>&lt;span class="n">]&lt;/span>
&lt;span class="c1">#&amp;gt; Error in names(x) &amp;lt;- value: &amp;#39;names&amp;#39; attribute [4] must be the same length as the vector [1]&lt;/span>
&lt;span class="c1"># better approach that works with tibble v1.4.2 AND dev tibble:&lt;/span>
&lt;span class="c1"># 1. apply nice names&lt;/span>
&lt;span class="c1"># 2. make tibble&lt;/span>
&lt;span class="nf">colnames&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">m&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="kc">letters&lt;/span>&lt;span class="n">[1&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="m">4&lt;/span>&lt;span class="n">]&lt;/span>
&lt;span class="nf">as_tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">m&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 4 x 4&lt;/span>
&lt;span class="c1">#&amp;gt; a b c d&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 0.686 -0.0424 1.27 0.516&lt;/span>
&lt;span class="c1">#&amp;gt; 2 -0.0424 0.190 -0.330 -0.122&lt;/span>
&lt;span class="c1">#&amp;gt; 3 1.27 -0.330 3.12 1.30 &lt;/span>
&lt;span class="c1">#&amp;gt; 4 0.516 -0.122 1.30 0.581&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>If possible, we recommend applying your &amp;ldquo;good&amp;rdquo; column names prior to calling
&lt;a href="https://tibble.tidyverse.org/dev/reference/as_tibble.html" target="_blank" rel="noopener">&lt;code>as_tibble()&lt;/code>&lt;/a>. This creates code that works with tibble v1.4.2 and the development version, which is very appealing. For good examples, see these pull requests to
&lt;a href="https://github.com/ropensci/drake/pull/586" target="_blank" rel="noopener">drake&lt;/a>,
&lt;a href="https://github.com/facebook/prophet/pull/739" target="_blank" rel="noopener">prophet&lt;/a>, and
&lt;a href="https://github.com/tidymodels/broom/pull/536" target="_blank" rel="noopener">broom&lt;/a>.&lt;/p>
&lt;p>It is also possible to use the new &lt;code>.name_repair&lt;/code> argument in
&lt;a href="https://tibble.tidyverse.org/dev/reference/tibble.html" target="_blank" rel="noopener">&lt;code>tibble()&lt;/code>&lt;/a> and
&lt;a href="https://tibble.tidyverse.org/dev/reference/as_tibble.html" target="_blank" rel="noopener">&lt;code>as_tibble()&lt;/code>&lt;/a> (more below) to explicitly declare your intention around column names. This code would require &lt;code>packageVersion(&amp;quot;tibble&amp;quot;) &amp;gt;= &amp;quot;2.0.0&amp;quot;&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="c1"># Alternative: use new `.name_repair` argument to permit dysfunctional names&lt;/span>
&lt;span class="n">m&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">cov&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">unname&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">iris[&lt;/span>&lt;span class="m">-5&lt;/span>&lt;span class="n">]&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="nf">as_tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">m&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">.name_repair&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;minimal&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 4 x 4&lt;/span>
&lt;span class="c1">#&amp;gt; `` `` `` ``&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 0.686 -0.0424 1.27 0.516&lt;/span>
&lt;span class="c1">#&amp;gt; 2 -0.0424 0.190 -0.330 -0.122&lt;/span>
&lt;span class="c1">#&amp;gt; 3 1.27 -0.330 3.12 1.30 &lt;/span>
&lt;span class="c1">#&amp;gt; 4 0.516 -0.122 1.30 0.581&lt;/span>
&lt;span class="c1"># Alternative: use new `.name_repair` argument to fix dysfunctional names&lt;/span>
&lt;span class="n">m&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">cov&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">unname&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">iris[&lt;/span>&lt;span class="m">-5&lt;/span>&lt;span class="n">]&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="nf">as_tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">m&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">.name_repair&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;unique&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; New names:&lt;/span>
&lt;span class="c1">#&amp;gt; * `` -&amp;gt; `..1`&lt;/span>
&lt;span class="c1">#&amp;gt; * `` -&amp;gt; `..2`&lt;/span>
&lt;span class="c1">#&amp;gt; * `` -&amp;gt; `..3`&lt;/span>
&lt;span class="c1">#&amp;gt; * `` -&amp;gt; `..4`&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 4 x 4&lt;/span>
&lt;span class="c1">#&amp;gt; ..1 ..2 ..3 ..4&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 0.686 -0.0424 1.27 0.516&lt;/span>
&lt;span class="c1">#&amp;gt; 2 -0.0424 0.190 -0.330 -0.122&lt;/span>
&lt;span class="c1">#&amp;gt; 3 1.27 -0.330 3.12 1.30 &lt;/span>
&lt;span class="c1">#&amp;gt; 4 0.516 -0.122 1.30 0.581&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>What is the motivation for this increased attention to column names? The tibble package is offering stronger encouragement for names where each column can be identified by name and, preferably, without having to resort to backticks. Column names that don&amp;rsquo;t meet these requirements are still allowed, but the user needs to permit them explicitly.&lt;/p>
&lt;p>After all, there are scenarios where problematic names should be tolerated. For example, after importing data, the user might need to inspect the data in order to determine which columns to keep. Or perhaps the column names contain data that is about to be converted to a proper variable with
&lt;a href="https://tidyr.tidyverse.org/reference/gather.html" target="_blank" rel="noopener">&lt;code>gather()&lt;/code>&lt;/a>.&lt;/p>
&lt;p>The
&lt;a href="https://tibble.tidyverse.org/dev/reference/tibble.html" target="_blank" rel="noopener">&lt;code>tibble()&lt;/code>&lt;/a> constructor and the
&lt;a href="https://tibble.tidyverse.org/dev/reference/as_tibble.html" target="_blank" rel="noopener">&lt;code>as_tibble()&lt;/code>&lt;/a> generic now support a new &lt;code>.name_repair&lt;/code> argument that covers most use cases:&lt;/p>
&lt;ul>
&lt;li>&lt;code>&amp;quot;minimal&amp;quot;&lt;/code>: No name repair or checks, beyond basic existence.&lt;/li>
&lt;li>&lt;code>&amp;quot;unique&amp;quot;&lt;/code>: Make sure names are unique and not empty.&lt;/li>
&lt;li>&lt;code>&amp;quot;check_unique&amp;quot;&lt;/code>: (default value), no name repair, but check they are &lt;code>unique&lt;/code>.&lt;/li>
&lt;li>&lt;code>&amp;quot;universal&amp;quot;&lt;/code>: Make the names &lt;code>unique&lt;/code> and syntactic.&lt;/li>
&lt;li>a function: apply custom name repair (e.g., &lt;code>.name_repair = make.names&lt;/code> or &lt;code>.name_repair = ~make.names(., unique = TRUE)&lt;/code> for names in the style of base R).&lt;/li>
&lt;/ul>
&lt;p>See
&lt;a href="https://tibble.tidyverse.org/dev/reference/name-repair.html" target="_blank" rel="noopener">&lt;code>?`name-repair`&lt;/code>&lt;/a> for more details.&lt;/p>
&lt;p>Packages that are in the business of making tibbles may even want to expose the &lt;code>.name_repair&lt;/code> argument and pass it through to
&lt;a href="https://tibble.tidyverse.org/dev/reference/tibble.html" target="_blank" rel="noopener">&lt;code>tibble()&lt;/code>&lt;/a> or
&lt;a href="https://tibble.tidyverse.org/dev/reference/as_tibble.html" target="_blank" rel="noopener">&lt;code>as_tibble()&lt;/code>&lt;/a>.
For example, this is the approach planned for
&lt;a href="https://readxl.tidyverse.org" target="_blank" rel="noopener">readxl&lt;/a>, which reads rectangular data out of Excel workbooks.&lt;/p>
Deprecation of &lt;code>validate&lt;/code> in
&lt;h2 id="deprecation-of-validate-in-as_tibblehttpstibbletidyverseorgdevreferenceas_tibblehtml">
&lt;a href="https://tibble.tidyverse.org/dev/reference/as_tibble.html" target="_blank" rel="noopener">&lt;code>as_tibble()&lt;/code>&lt;/a>
&lt;a href="#deprecation-of-validate-in-as_tibblehttpstibbletidyverseorgdevreferenceas_tibblehtml">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>In tibble v1.4.2,
&lt;a href="https://tibble.tidyverse.org/dev/reference/as_tibble.html" target="_blank" rel="noopener">&lt;code>as_tibble()&lt;/code>&lt;/a> has a &lt;code>validate&lt;/code> argument, but its default behaviour value was inconsistent across different methods and there was no equivalent argument for
&lt;a href="https://tibble.tidyverse.org/dev/reference/tibble.html" target="_blank" rel="noopener">&lt;code>tibble()&lt;/code>&lt;/a>. The &lt;code>validate&lt;/code> argument is now soft-deprecated and its use will trigger a message, once per session. The &lt;code>validate&lt;/code> argument will eventually be removed, but for now it can be used jointly with the new &lt;code>.name_repair&lt;/code> argument (without even triggering a message). This is possible, because fortunately the &lt;code>.name_repair&lt;/code> argument to
&lt;a href="https://tibble.tidyverse.org/dev/reference/as_tibble.html" target="_blank" rel="noopener">&lt;code>as_tibble()&lt;/code>&lt;/a> is ignored in tibble v1.4.2.&lt;/p>
&lt;p>Here&amp;rsquo;s what &lt;code>validate&lt;/code> does in the development version of tibble for tibbles, data frames, and matrices, along with suggested alternatives.&lt;/p>
&lt;h3 id="tibbles-and-data-frames">Tibbles and data frames
&lt;a href="#tibbles-and-data-frames">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>The default was &lt;code>validate = FALSE&lt;/code> for tibbles and &lt;code>validate = TRUE&lt;/code> for data frames.
Code that worked before for tibbles can now throw unexpected errors if the resulting tibble has problematic names.
To avoid warnings with tibble v2.0.0, use the default instead of &lt;code>validate = TRUE&lt;/code>, and &lt;code>.name_repair = &amp;quot;minimal&amp;quot;&lt;/code> in addition to &lt;code>validate = FALSE&lt;/code>.
If your code targets tibble &amp;gt;= v2.0.0 exclusively, you can remove the &lt;code>validate&lt;/code> argument.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">df&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">new_tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">list&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">6&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">nrow&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># errors, as it should, because names are duplicated ... but also messages&lt;/span>
&lt;span class="nf">as_tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">validate&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">TRUE&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; The `validate` argument to `as_tibble()` is deprecated. Please use `.name_repair` to control column names.&lt;/span>
&lt;span class="c1">#&amp;gt; Error: Column name `a` must not be duplicated.&lt;/span>
&lt;span class="c1">#&amp;gt; Use .name_repair to specify repair.&lt;/span>
&lt;span class="c1"># errors due to default .name_repair = &amp;#34;check_unique&amp;#34;&lt;/span>
&lt;span class="c1"># (but no error in tibble v1.4.2)&lt;/span>
&lt;span class="nf">as_tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; Error: Column name `a` must not be duplicated.&lt;/span>
&lt;span class="c1">#&amp;gt; Use .name_repair to specify repair.&lt;/span>
&lt;span class="c1"># ensures that the validate = TRUE default is used for tibble &amp;lt; 2.0.0&lt;/span>
&lt;span class="nf">as_tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">as.data.frame&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1">#&amp;gt; Error: Column name `a` must not be duplicated.&lt;/span>
&lt;span class="c1">#&amp;gt; Use .name_repair to specify repair.&lt;/span>
&lt;span class="c1"># no error ... but still messages&lt;/span>
&lt;span class="nf">as_tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">validate&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">FALSE&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 1 x 2&lt;/span>
&lt;span class="c1">#&amp;gt; a a&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 5 6&lt;/span>
&lt;span class="c1"># no error, quietly&lt;/span>
&lt;span class="nf">as_tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">.name_repair&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;minimal&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 1 x 2&lt;/span>
&lt;span class="c1">#&amp;gt; a a&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 5 6&lt;/span>
&lt;span class="c1"># no error, quietly, compatible with tibble &amp;lt; 2.0.0&lt;/span>
&lt;span class="nf">as_tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">validate&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">FALSE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">.name_repair&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;minimal&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 1 x 2&lt;/span>
&lt;span class="c1">#&amp;gt; a a&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 5 6&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;h3 id="matrices-and-other-objects">Matrices and other objects
&lt;a href="#matrices-and-other-objects">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>The &lt;code>validate&lt;/code> argument now triggers a message, it was silently ignored in v1.4.2.
For compatibility with v2.0.0, remove the &lt;code>validate&lt;/code> argument, or add a consistent &lt;code>.name_repair&lt;/code> argument.
If you need anything other than &lt;code>&amp;quot;minimal&amp;quot;&lt;/code> or &lt;code>&amp;quot;check_unique&amp;quot;&lt;/code> and need to keep the &lt;code>validate&lt;/code> argument, rename the columns beforehand.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">m&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">cov&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">iris[&lt;/span>&lt;span class="m">-5&lt;/span>&lt;span class="n">]&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># Assign colnames() if necessary&lt;/span>
&lt;span class="nf">as_tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">m&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 4 x 4&lt;/span>
&lt;span class="c1">#&amp;gt; Sepal.Length Sepal.Width Petal.Length Petal.Width&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 0.686 -0.0424 1.27 0.516&lt;/span>
&lt;span class="c1">#&amp;gt; 2 -0.0424 0.190 -0.330 -0.122&lt;/span>
&lt;span class="c1">#&amp;gt; 3 1.27 -0.330 3.12 1.30 &lt;/span>
&lt;span class="c1">#&amp;gt; 4 0.516 -0.122 1.30 0.581&lt;/span>
&lt;span class="nf">as_tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">m&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">validate&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">TRUE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">.name_repair&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;check_unique&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 4 x 4&lt;/span>
&lt;span class="c1">#&amp;gt; Sepal.Length Sepal.Width Petal.Length Petal.Width&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 0.686 -0.0424 1.27 0.516&lt;/span>
&lt;span class="c1">#&amp;gt; 2 -0.0424 0.190 -0.330 -0.122&lt;/span>
&lt;span class="c1">#&amp;gt; 3 1.27 -0.330 3.12 1.30 &lt;/span>
&lt;span class="c1">#&amp;gt; 4 0.516 -0.122 1.30 0.581&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;h2 id="deprecation-of-tidy_names-and-set_tidy_names">Deprecation of &lt;code>tidy_names()&lt;/code> and &lt;code>set_tidy_names()&lt;/code>
&lt;a href="#deprecation-of-tidy_names-and-set_tidy_names">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>The existing &lt;code>tidy_names()&lt;/code> and &lt;code>set_tidy_names()&lt;/code> functions are soft-deprecated, but remain available, unchanged. In the future, they could go away or take on a new meaning, i.e. implement a different algorithm for name repair. New code should use &lt;code>.name_repair&lt;/code> instead.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">df&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">new_tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">list&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">6&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">nrow&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># these functions are soft-deprecated&lt;/span>
&lt;span class="nf">tidy_names&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">names&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1">#&amp;gt; New names:&lt;/span>
&lt;span class="c1">#&amp;gt; a -&amp;gt; a..1&lt;/span>
&lt;span class="c1">#&amp;gt; a -&amp;gt; a..2&lt;/span>
&lt;span class="c1">#&amp;gt; [1] &amp;#34;a..1&amp;#34; &amp;#34;a..2&amp;#34;&lt;/span>
&lt;span class="nf">set_tidy_names&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; New names:&lt;/span>
&lt;span class="c1">#&amp;gt; a -&amp;gt; a..1&lt;/span>
&lt;span class="c1">#&amp;gt; a -&amp;gt; a..2&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 1 x 2&lt;/span>
&lt;span class="c1">#&amp;gt; a..1 a..2&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 5 6&lt;/span>
&lt;span class="c1"># achieve same via `.name_repair`&lt;/span>
&lt;span class="nf">as_tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">.name_repair&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;universal&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; New names:&lt;/span>
&lt;span class="c1">#&amp;gt; * a -&amp;gt; a..1&lt;/span>
&lt;span class="c1">#&amp;gt; * a -&amp;gt; a..2&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 1 x 2&lt;/span>
&lt;span class="c1">#&amp;gt; a..1 a..2&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 5 6&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>tibble&amp;rsquo;s name repair strategies are currently only exposed in
&lt;a href="https://tibble.tidyverse.org/dev/reference/tibble.html" target="_blank" rel="noopener">&lt;code>tibble()&lt;/code>&lt;/a> and
&lt;a href="https://tibble.tidyverse.org/dev/reference/as_tibble.html" target="_blank" rel="noopener">&lt;code>as_tibble()&lt;/code>&lt;/a>, not (yet?) as utility functions that operate on a vector of names.&lt;/p>
&lt;h2 id="other-changes">Other changes
&lt;a href="#other-changes">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Intentionally assigning invalid names to a tibble via &lt;code>names&amp;lt;-()&lt;/code> is generally a bad idea and this now warns (once per session).&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">df&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">names&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="kc">NA&lt;/span>
&lt;span class="c1">#&amp;gt; Warning: Column 1 must be named.&lt;/span>
&lt;span class="c1">#&amp;gt; Warning: Must use a character vector as names.&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Coercing a vector to a tibble is no longer supported and emits a warning once per session.
It&amp;rsquo;s not clear if the result should be a tibble with one row or one column. We plan to revisit this in a future version, with an unambiguous interface.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">x&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="m">3&lt;/span>
&lt;span class="c1"># Old:&lt;/span>
&lt;span class="nf">as_tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; Warning: Calling `as_tibble()` on a vector is discouraged, because the&lt;/span>
&lt;span class="c1">#&amp;gt; behavior is likely to change in the future. Use `enframe(name = NULL)`&lt;/span>
&lt;span class="c1">#&amp;gt; instead.&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 3 x 1&lt;/span>
&lt;span class="c1">#&amp;gt; value&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;int&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 1&lt;/span>
&lt;span class="c1">#&amp;gt; 2 2&lt;/span>
&lt;span class="c1">#&amp;gt; 3 3&lt;/span>
&lt;span class="c1"># New (&amp;gt;= 2.0.0):&lt;/span>
&lt;span class="nf">enframe&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">NULL&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 3 x 1&lt;/span>
&lt;span class="c1">#&amp;gt; value&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;int&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 1&lt;/span>
&lt;span class="c1">#&amp;gt; 2 2&lt;/span>
&lt;span class="c1">#&amp;gt; 3 3&lt;/span>
&lt;span class="c1"># New (legacy):&lt;/span>
&lt;span class="nf">tibble&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">value&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 3 x 1&lt;/span>
&lt;span class="c1">#&amp;gt; value&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;int&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 1&lt;/span>
&lt;span class="c1">#&amp;gt; 2 2&lt;/span>
&lt;span class="c1">#&amp;gt; 3 3&lt;/span>
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>ggplot2 3.1.0</title><link>https://www.tidyverse.org/blog/2018/10/ggplot2-3-1-0/</link><pubDate>Mon, 29 Oct 2018 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2018/10/ggplot2-3-1-0/</guid><description>&lt;p>We&amp;rsquo;re happy to announce the release of
&lt;a href="https://ggplot2.tidyverse.org/" target="_blank" rel="noopener">ggplot2 3.1.0&lt;/a> on CRAN. ggplot2 is a system for declaratively creating graphics, based on The Grammar of Graphics. You provide the data, tell ggplot2 how to map variables to aesthetics, what graphical primitives to use, and it takes care of the details.&lt;/p>
&lt;p>The 3.1.0 release is a minor release that fixes a number of bugs and adds a few new features. Breaking changes have been kept to a minimum and end users of ggplot2 are unlikely to encounter any issues when switching from 3.0.0 to 3.1.0. However, there are a few items that developers of ggplot2 extensions should be aware of. For a complete list of changes and issues of relevance for extension developers, please see the
&lt;a href="https://github.com/tidyverse/ggplot2/releases/tag/v3.1.0" target="_blank" rel="noopener">release notes&lt;/a>.&lt;/p>
&lt;h2 id="new-features">New features
&lt;a href="#new-features">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>&lt;code>coord_sf()&lt;/code> has much-improved customization of axis tick labels. Labels can now
be set manually, and there are two new parameters, &lt;code>label_graticule&lt;/code> and
&lt;code>label_axes&lt;/code>, that can be used to specify which graticules to label on which side
of the plot. In particular, &lt;code>label_graticule&lt;/code> labels the North, West, East, or South ends of the graticule lines, specified via a simple string argument. For example, &lt;code>label_graticule = &amp;quot;NE&amp;quot;&lt;/code> will label the North and East ends, which in a standard projection with North pointing up will result in labels on top and to the right.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sf&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">nc&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">st_read&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">system.file&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;shape/nc.shp&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">package&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;sf&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">quiet&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">TRUE&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">ggplot&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_sf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fill&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">AREA&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">nc&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">coord_sf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">label_graticule&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;NE&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">scale_y_continuous&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="n">breaks&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">34&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">34.5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">35&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">35.5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">36&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">36.5&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="n">labels&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">text&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;34 * degree * N&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;NA&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;35 * degree * N&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;NA&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;36 * degree * N&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;NA&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2018-10-ggplot2-3-1-0_files/figure-html/coord-sf-1.png" width="672" />&lt;/p>
&lt;p>Two new geoms, &lt;code>geom_sf_label()&lt;/code> and &lt;code>geom_sf_text()&lt;/code>, can draw labels and text
on sf objects.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nc[1&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="m">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">]&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_sf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fill&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">AREA&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_sf_label&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">label&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">NAME&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2018-10-ggplot2-3-1-0_files/figure-html/geom-sf-text-1.png" width="672" />&lt;/p>
&lt;p>Under the hood, a new &lt;code>stat_sf_coordinates()&lt;/code> calculates the
x and y coordinates from the coordinates of the sf geometries. You can customize
the calculation method via the &lt;code>fun.geometry&lt;/code> argument.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="c1"># default uses st_point_on_surface(), which guarantees the calculated point &lt;/span>
&lt;span class="c1"># falls inside each polygon&lt;/span>
&lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nc&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_sf&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">stat_sf_coordinates&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">geom&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;point&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">color&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;red&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2018-10-ggplot2-3-1-0_files/figure-html/stat_sf_coordinates-1.png" width="672" />&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">
&lt;span class="c1"># can use st_centroid() instead to draw centroids&lt;/span>
&lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nc&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_sf&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">stat_sf_coordinates&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="n">fun.geometry&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nf">st_centroid&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">st_zm&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">)),&lt;/span>
&lt;span class="n">geom&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;point&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">color&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;red&amp;#34;&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2018-10-ggplot2-3-1-0_files/figure-html/stat_sf_coordinates-2.png" width="672" />&lt;/p>
&lt;h2 id="minor-fixes-and-improvements">Minor fixes and improvements
&lt;a href="#minor-fixes-and-improvements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Aesthetics containing the word &amp;ldquo;color&amp;rdquo; are now always standardized internally to read &amp;ldquo;colour&amp;rdquo;. This happens transparently to the end user, so that the British and American spellings of &amp;ldquo;colour&amp;rdquo; / &amp;ldquo;color&amp;rdquo; are fully equivalent throughout the entire ggplot2 code base. Therefore, the following four examples all produce the same plot.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">p1&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">iris&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Sepal.Length&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Petal.Length&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">color&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Sepal.Length&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">fill&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Petal.Length&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_point&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">shape&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">21&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">size&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">stroke&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">scale_color_viridis_c&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="n">aesthetics&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;color&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;fill&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;Length&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">option&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;B&amp;#34;&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;span class="n">p2&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">iris&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Sepal.Length&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Petal.Length&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">colour&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Sepal.Length&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">fill&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Petal.Length&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_point&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">shape&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">21&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">size&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">stroke&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">scale_colour_viridis_c&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="n">aesthetics&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;colour&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;fill&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;Length&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">option&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;B&amp;#34;&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;span class="n">p3&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">iris&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Sepal.Length&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Petal.Length&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">colour&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Sepal.Length&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">fill&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Petal.Length&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_point&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">shape&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">21&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">size&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">stroke&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">scale_colour_viridis_c&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="n">aesthetics&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;color&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;fill&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;Length&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">option&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;B&amp;#34;&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;span class="n">p4&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">iris&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Sepal.Length&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Petal.Length&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">color&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Sepal.Length&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">fill&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Petal.Length&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_point&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">shape&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">21&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">size&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">stroke&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">scale_color_viridis_c&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="n">aesthetics&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;colour&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;fill&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;Length&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">option&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;B&amp;#34;&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;span class="n">cowplot&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="nf">plot_grid&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">p1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">p2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">p3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">p4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2018-10-ggplot2-3-1-0_files/figure-html/color-vs-colour-1.png" width="672" />&lt;/p>
&lt;p>Normalized statistics are now provided with &lt;code>stat_bin2d()&lt;/code>, &lt;code>stat_binhex()&lt;/code>, &lt;code>stat_density_2d()&lt;/code>, and &lt;code>stat_contour()&lt;/code> to plot 2d distributions normalized to a common height. This feature can be useful for faceted 2d plots, where the maximum density/count can vary greatly between panels. For example, when using &lt;code>stat_density_2d()&lt;/code> with &lt;code>contour = TRUE&lt;/code>, we can now use the calculated statistic &lt;code>nlevel&lt;/code> to color by where each contour polygon lies relative to the highest one in that facet.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">diamonds&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">depth&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">stat_density_2d&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fill&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">stat&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nlevel&lt;/span>&lt;span class="p">)),&lt;/span>
&lt;span class="n">geom&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;polygon&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">n&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">100&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">bins&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">contour&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">TRUE&lt;/span>
&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">facet_wrap&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">clarity&lt;/span>&lt;span class="o">~&lt;/span>&lt;span class="n">.)&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">scale_fill_viridis_c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">option&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;A&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2018-10-ggplot2-3-1-0_files/figure-html/stat-density-2d-1.png" width="672" />&lt;/p>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>Thank you to the &lt;strong>126&lt;/strong> people who who contributed issues, code and comments to this release:
&lt;a href="https://github.com/abeeCrombie" target="_blank" rel="noopener">@abeeCrombie&lt;/a>,
&lt;a href="https://github.com/adam-erickson" target="_blank" rel="noopener">@adam-erickson&lt;/a>,
&lt;a href="https://github.com/adrfantini" target="_blank" rel="noopener">@adrfantini&lt;/a>,
&lt;a href="https://github.com/Adri1CIRAD" target="_blank" rel="noopener">@Adri1CIRAD&lt;/a>,
&lt;a href="https://github.com/agarwal-peeush" target="_blank" rel="noopener">@agarwal-peeush&lt;/a>,
&lt;a href="https://github.com/alexhallam" target="_blank" rel="noopener">@alexhallam&lt;/a>,
&lt;a href="https://github.com/alireza08" target="_blank" rel="noopener">@alireza08&lt;/a>,
&lt;a href="https://github.com/alistaire47" target="_blank" rel="noopener">@alistaire47&lt;/a>,
&lt;a href="https://github.com/amhedberg" target="_blank" rel="noopener">@amhedberg&lt;/a>,
&lt;a href="https://github.com/amirmasoudabdol" target="_blank" rel="noopener">@amirmasoudabdol&lt;/a>,
&lt;a href="https://github.com/andrewheiss" target="_blank" rel="noopener">@andrewheiss&lt;/a>,
&lt;a href="https://github.com/andrewmarx" target="_blank" rel="noopener">@andrewmarx&lt;/a>,
&lt;a href="https://github.com/anhttdang" target="_blank" rel="noopener">@anhttdang&lt;/a>,
&lt;a href="https://github.com/aosmith16" target="_blank" rel="noopener">@aosmith16&lt;/a>,
&lt;a href="https://github.com/artidata" target="_blank" rel="noopener">@artidata&lt;/a>,
&lt;a href="https://github.com/baderstine" target="_blank" rel="noopener">@baderstine&lt;/a>,
&lt;a href="https://github.com/barana912" target="_blank" rel="noopener">@barana912&lt;/a>,
&lt;a href="https://github.com/batpigandme" target="_blank" rel="noopener">@batpigandme&lt;/a>,
&lt;a href="https://github.com/benjaminhlina" target="_blank" rel="noopener">@benjaminhlina&lt;/a>,
&lt;a href="https://github.com/billdenney" target="_blank" rel="noopener">@billdenney&lt;/a>,
&lt;a href="https://github.com/Bisaloo" target="_blank" rel="noopener">@Bisaloo&lt;/a>,
&lt;a href="https://github.com/bjreisman" target="_blank" rel="noopener">@bjreisman&lt;/a>,
&lt;a href="https://github.com/bpbraun" target="_blank" rel="noopener">@bpbraun&lt;/a>,
&lt;a href="https://github.com/brodieG" target="_blank" rel="noopener">@brodieG&lt;/a>,
&lt;a href="https://github.com/bschneidr" target="_blank" rel="noopener">@bschneidr&lt;/a>,
&lt;a href="https://github.com/carlislerainey" target="_blank" rel="noopener">@carlislerainey&lt;/a>,
&lt;a href="https://github.com/ccpsilva" target="_blank" rel="noopener">@ccpsilva&lt;/a>,
&lt;a href="https://github.com/Chrismarsh" target="_blank" rel="noopener">@Chrismarsh&lt;/a>,
&lt;a href="https://github.com/chrismp" target="_blank" rel="noopener">@chrismp&lt;/a>,
&lt;a href="https://github.com/cipi118" target="_blank" rel="noopener">@cipi118&lt;/a>,
&lt;a href="https://github.com/clauswilke" target="_blank" rel="noopener">@clauswilke&lt;/a>,
&lt;a href="https://github.com/coolbutuseless" target="_blank" rel="noopener">@coolbutuseless&lt;/a>,
&lt;a href="https://github.com/corybrunson" target="_blank" rel="noopener">@corybrunson&lt;/a>,
&lt;a href="https://github.com/DarioS" target="_blank" rel="noopener">@DarioS&lt;/a>,
&lt;a href="https://github.com/dpseidel" target="_blank" rel="noopener">@dpseidel&lt;/a>,
&lt;a href="https://github.com/dracodoc" target="_blank" rel="noopener">@dracodoc&lt;/a>,
&lt;a href="https://github.com/drammock" target="_blank" rel="noopener">@drammock&lt;/a>,
&lt;a href="https://github.com/earthcli" target="_blank" rel="noopener">@earthcli&lt;/a>,
&lt;a href="https://github.com/edmundesterbauer" target="_blank" rel="noopener">@edmundesterbauer&lt;/a>,
&lt;a href="https://github.com/elbamos" target="_blank" rel="noopener">@elbamos&lt;/a>,
&lt;a href="https://github.com/eliocamp" target="_blank" rel="noopener">@eliocamp&lt;/a>,
&lt;a href="https://github.com/Eluvias" target="_blank" rel="noopener">@Eluvias&lt;/a>,
&lt;a href="https://github.com/EmilHvitfeldt" target="_blank" rel="noopener">@EmilHvitfeldt&lt;/a>,
&lt;a href="https://github.com/EmmanuelCharpentier" target="_blank" rel="noopener">@EmmanuelCharpentier&lt;/a>,
&lt;a href="https://github.com/emrichter" target="_blank" rel="noopener">@emrichter&lt;/a>,
&lt;a href="https://github.com/espher1987" target="_blank" rel="noopener">@espher1987&lt;/a>,
&lt;a href="https://github.com/felipegerard" target="_blank" rel="noopener">@felipegerard&lt;/a>,
&lt;a href="https://github.com/ftabaro" target="_blank" rel="noopener">@ftabaro&lt;/a>,
&lt;a href="https://github.com/gregrs-uk" target="_blank" rel="noopener">@gregrs-uk&lt;/a>,
&lt;a href="https://github.com/guillaumecharbonnier" target="_blank" rel="noopener">@guillaumecharbonnier&lt;/a>,
&lt;a href="https://github.com/hadley" target="_blank" rel="noopener">@hadley&lt;/a>,
&lt;a href="https://github.com/Henrik-P" target="_blank" rel="noopener">@Henrik-P&lt;/a>,
&lt;a href="https://github.com/hisakatha" target="_blank" rel="noopener">@hisakatha&lt;/a>,
&lt;a href="https://github.com/hzarkoob" target="_blank" rel="noopener">@hzarkoob&lt;/a>,
&lt;a href="https://github.com/igordot" target="_blank" rel="noopener">@igordot&lt;/a>,
&lt;a href="https://github.com/ilarischeinin" target="_blank" rel="noopener">@ilarischeinin&lt;/a>,
&lt;a href="https://github.com/IndrajeetPatil" target="_blank" rel="noopener">@IndrajeetPatil&lt;/a>,
&lt;a href="https://github.com/itcarroll" target="_blank" rel="noopener">@itcarroll&lt;/a>,
&lt;a href="https://github.com/Janewyx" target="_blank" rel="noopener">@Janewyx&lt;/a>,
&lt;a href="https://github.com/jar1karp" target="_blank" rel="noopener">@jar1karp&lt;/a>,
&lt;a href="https://github.com/jdrum00" target="_blank" rel="noopener">@jdrum00&lt;/a>,
&lt;a href="https://github.com/JessicaGarzke" target="_blank" rel="noopener">@JessicaGarzke&lt;/a>,
&lt;a href="https://github.com/JHonaker" target="_blank" rel="noopener">@JHonaker&lt;/a>,
&lt;a href="https://github.com/jiho" target="_blank" rel="noopener">@jiho&lt;/a>,
&lt;a href="https://github.com/jimhester" target="_blank" rel="noopener">@jimhester&lt;/a>,
&lt;a href="https://github.com/JM-RG" target="_blank" rel="noopener">@JM-RG&lt;/a>,
&lt;a href="https://github.com/JohnMount" target="_blank" rel="noopener">@JohnMount&lt;/a>,
&lt;a href="https://github.com/jonocarroll" target="_blank" rel="noopener">@jonocarroll&lt;/a>,
&lt;a href="https://github.com/josesho" target="_blank" rel="noopener">@josesho&lt;/a>,
&lt;a href="https://github.com/jpasquier" target="_blank" rel="noopener">@jpasquier&lt;/a>,
&lt;a href="https://github.com/jpgoldberg" target="_blank" rel="noopener">@jpgoldberg&lt;/a>,
&lt;a href="https://github.com/jtelleria" target="_blank" rel="noopener">@jtelleria&lt;/a>,
&lt;a href="https://github.com/justinjunge" target="_blank" rel="noopener">@justinjunge&lt;/a>,
&lt;a href="https://github.com/karawoo" target="_blank" rel="noopener">@karawoo&lt;/a>,
&lt;a href="https://github.com/kendonB" target="_blank" rel="noopener">@kendonB&lt;/a>,
&lt;a href="https://github.com/kimmagnusb" target="_blank" rel="noopener">@kimmagnusb&lt;/a>,
&lt;a href="https://github.com/klmr" target="_blank" rel="noopener">@klmr&lt;/a>,
&lt;a href="https://github.com/krlmlr" target="_blank" rel="noopener">@krlmlr&lt;/a>,
&lt;a href="https://github.com/lawremi" target="_blank" rel="noopener">@lawremi&lt;/a>,
&lt;a href="https://github.com/lhunsicker" target="_blank" rel="noopener">@lhunsicker&lt;/a>,
&lt;a href="https://github.com/lionel-" target="_blank" rel="noopener">@lionel-&lt;/a>,
&lt;a href="https://github.com/lorenzwalthert" target="_blank" rel="noopener">@lorenzwalthert&lt;/a>,
&lt;a href="https://github.com/mafed" target="_blank" rel="noopener">@mafed&lt;/a>,
&lt;a href="https://github.com/makis23" target="_blank" rel="noopener">@makis23&lt;/a>,
&lt;a href="https://github.com/malcolmbarrett" target="_blank" rel="noopener">@malcolmbarrett&lt;/a>,
&lt;a href="https://github.com/MarioClueless" target="_blank" rel="noopener">@MarioClueless&lt;/a>,
&lt;a href="https://github.com/martisak" target="_blank" rel="noopener">@martisak&lt;/a>,
&lt;a href="https://github.com/mikesafar" target="_blank" rel="noopener">@mikesafar&lt;/a>,
&lt;a href="https://github.com/mikmart" target="_blank" rel="noopener">@mikmart&lt;/a>,
&lt;a href="https://github.com/MJochim" target="_blank" rel="noopener">@MJochim&lt;/a>,
&lt;a href="https://github.com/mkoohafkan" target="_blank" rel="noopener">@mkoohafkan&lt;/a>,
&lt;a href="https://github.com/mojaveazure" target="_blank" rel="noopener">@mojaveazure&lt;/a>,
&lt;a href="https://github.com/msberends" target="_blank" rel="noopener">@msberends&lt;/a>,
&lt;a href="https://github.com/neoworld77" target="_blank" rel="noopener">@neoworld77&lt;/a>,
&lt;a href="https://github.com/PabloRMira" target="_blank" rel="noopener">@PabloRMira&lt;/a>,
&lt;a href="https://github.com/paleolimbot" target="_blank" rel="noopener">@paleolimbot&lt;/a>,
&lt;a href="https://github.com/pank" target="_blank" rel="noopener">@pank&lt;/a>,
&lt;a href="https://github.com/pitakakariki" target="_blank" rel="noopener">@pitakakariki&lt;/a>,
&lt;a href="https://github.com/ptoche" target="_blank" rel="noopener">@ptoche&lt;/a>,
&lt;a href="https://github.com/rensa" target="_blank" rel="noopener">@rensa&lt;/a>,
&lt;a href="https://github.com/rharfoot" target="_blank" rel="noopener">@rharfoot&lt;/a>,
&lt;a href="https://github.com/RichardJActon" target="_blank" rel="noopener">@RichardJActon&lt;/a>,
&lt;a href="https://github.com/royfrancis" target="_blank" rel="noopener">@royfrancis&lt;/a>,
&lt;a href="https://github.com/rpruim" target="_blank" rel="noopener">@rpruim&lt;/a>,
&lt;a href="https://github.com/rsaporta" target="_blank" rel="noopener">@rsaporta&lt;/a>,
&lt;a href="https://github.com/sambweber" target="_blank" rel="noopener">@sambweber&lt;/a>,
&lt;a href="https://github.com/schloerke" target="_blank" rel="noopener">@schloerke&lt;/a>,
&lt;a href="https://github.com/slowkow" target="_blank" rel="noopener">@slowkow&lt;/a>,
&lt;a href="https://github.com/statsandthings" target="_blank" rel="noopener">@statsandthings&lt;/a>,
&lt;a href="https://github.com/stephenbfroehlich" target="_blank" rel="noopener">@stephenbfroehlich&lt;/a>,
&lt;a href="https://github.com/steveharoz" target="_blank" rel="noopener">@steveharoz&lt;/a>,
&lt;a href="https://github.com/stragu" target="_blank" rel="noopener">@stragu&lt;/a>,
&lt;a href="https://github.com/tbobin" target="_blank" rel="noopener">@tbobin&lt;/a>,
&lt;a href="https://github.com/the-Hull" target="_blank" rel="noopener">@the-Hull&lt;/a>,
&lt;a href="https://github.com/thomasp85" target="_blank" rel="noopener">@thomasp85&lt;/a>,
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>,
&lt;a href="https://github.com/tstev" target="_blank" rel="noopener">@tstev&lt;/a>,
&lt;a href="https://github.com/TylerGrantSmith" target="_blank" rel="noopener">@TylerGrantSmith&lt;/a>,
&lt;a href="https://github.com/vikram-rawat" target="_blank" rel="noopener">@vikram-rawat&lt;/a>,
&lt;a href="https://github.com/wch" target="_blank" rel="noopener">@wch&lt;/a>,
&lt;a href="https://github.com/willgearty" target="_blank" rel="noopener">@willgearty&lt;/a>,
&lt;a href="https://github.com/woodwards" target="_blank" rel="noopener">@woodwards&lt;/a>,
&lt;a href="https://github.com/YinLiLin" target="_blank" rel="noopener">@YinLiLin&lt;/a>,
&lt;a href="https://github.com/yutannihilation" target="_blank" rel="noopener">@yutannihilation&lt;/a>,
&lt;a href="https://github.com/yyffang" target="_blank" rel="noopener">@yyffang&lt;/a>,
&lt;a href="https://github.com/zeehio" target="_blank" rel="noopener">@zeehio&lt;/a>, and
&lt;a href="https://github.com/ZelinC" target="_blank" rel="noopener">@ZelinC&lt;/a>&lt;/p></description></item><item><title>ggplot2 3.0.0: community posts</title><link>https://www.tidyverse.org/blog/2018/08/ggplot2-community-posts/</link><pubDate>Thu, 09 Aug 2018 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2018/08/ggplot2-community-posts/</guid><description>&lt;p>ggplot2 3.0.0 has more changes and features than we could possibly cover in our
&lt;a href="https://www.tidyverse.org/articles/2018/07/ggplot2-3-0-0/#new-features" target="_blank" rel="noopener">release announcement&lt;/a>. So, we asked you (the community) to share &lt;em>your&lt;/em> posts with us during the month following its release.&lt;/p>
&lt;p>Spoiler alert: excellent material ahead!&lt;/p>
&lt;h3 id="english">English
&lt;a href="#english">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;ul>
&lt;li>
&lt;a href="https://yutani.rbind.io/post/2017-11-07-ggplot-add/" target="_blank" rel="noopener">An Example Usage of &lt;code>ggplot_add()&lt;/code>&lt;/a>
by
&lt;a href="https://twitter.com/yutannihilat_en" target="_blank" rel="noopener">Hiroaki Yutani&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://www.johnmackintosh.com/2018-07-04-tidily-evaluated-ggplot2/" target="_blank" rel="noopener">Tidily evaluated ggplot2&lt;/a>
by
&lt;a href="https://twitter.com/_johnmackintosh" target="_blank" rel="noopener">John MacKintosh&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://www.johnmackintosh.com/2018-07-04-more-tidy-evaluation-with-ggplot2/" target="_blank" rel="noopener">More tidy evaluation with ggplot2&lt;/a>
by
&lt;a href="https://twitter.com/_johnmackintosh" target="_blank" rel="noopener">John MacKintosh&lt;/a>&lt;/li>
&lt;li>
&lt;a href="http://www.onceupondata.com/2018/07/06/ggplot-tidyeval/" target="_blank" rel="noopener">Tidy Eval Meets ggplot2: the bang bang plots&lt;/a> by
&lt;a href="https://twitter.com/OmaymaS_" target="_blank" rel="noopener">Omayma Said&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://rtask.thinkr.fr/blog/ggplot2-welcome-viridis/" target="_blank" rel="noopener">[ggplot2] Welcome viridis !&lt;/a>
by
&lt;a href="https://twitter.com/_ColinFay" target="_blank" rel="noopener">Colin Fay&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://statnmap.com/2018-07-14-introduction-to-mapping-with-sf-and-co/" target="_blank" rel="noopener">Introduction to mapping with {sf} &amp;amp; co.&lt;/a> by
&lt;a href="https://twitter.com/statnmap" target="_blank" rel="noopener">Sébastien Rochette&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://www.mango-solutions.com/blog/visualising-italian-wine-production" target="_blank" rel="noopener">Visualising Italian wine production&lt;/a> by
&lt;a href="https://twitter.com/aimeegott_R" target="_blank" rel="noopener">Aimee Gott&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://tonyelhabr.rbind.io/posts/bubble-grid-texas-high-school/" target="_blank" rel="noopener">Visualizing Texas High School SAT Math Scores with Bubble Grids&lt;/a> by
&lt;a href="https://twitter.com/TonyElHabr" target="_blank" rel="noopener">Tony ElHabr&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://crunch.io/dev/blog/autoplot-with-tidyeval/" target="_blank" rel="noopener">Making Graphs Look Easy with ggplot2 and Tidy Evaluation&lt;/a> by
&lt;a href="https://twitter.com/gshotwell" target="_blank" rel="noopener">Gordon Shotwell&lt;/a>,
&lt;a href="https://twitter.com/jonkeane" target="_blank" rel="noopener">Jonathan Keane&lt;/a>, and
&lt;a href="https://twitter.com/enpiar" target="_blank" rel="noopener">Neal Richardson&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="french">French
&lt;a href="#french">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;ul>
&lt;li>
&lt;a href="https://thinkr.fr/quoi-de-neuf-ggplot2/" target="_blank" rel="noopener">Quoi de neuf {ggplot2} ?&lt;/a> by
&lt;a href="https://twitter.com/_ColinFay" target="_blank" rel="noopener">Colin Fay&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="japanese">Japanese
&lt;a href="#japanese">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;ul>
&lt;li>
&lt;a href="https://notchained.hatenablog.com/entry/2018/05/27/190740" target="_blank" rel="noopener">ggplot2 3.0.0を使ってみた&lt;/a> by
&lt;a href="https://twitter.com/yutannihilat_en" target="_blank" rel="noopener">Hiroaki Yutani&lt;/a>&lt;/li>
&lt;li>
&lt;a href="https://notchained.hatenablog.com/entry/2018/05/28/003910" target="_blank" rel="noopener">&lt;code>ggplot2::geom_sf()&lt;/code>を使ってみる&lt;/a> by
&lt;a href="https://twitter.com/yutannihilat_en" target="_blank" rel="noopener">Hiroaki Yutani&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Tidy evaluation in ggplot2</title><link>https://www.tidyverse.org/blog/2018/07/ggplot2-tidy-evaluation/</link><pubDate>Tue, 24 Jul 2018 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2018/07/ggplot2-tidy-evaluation/</guid><description>&lt;html>
&lt;style>
h2 code {
font-size: 1em;
&lt;p>}
&lt;/style>&lt;/p>
&lt;/html>
## Tidy evaluation
&lt;p>One of the biggest changes in
&lt;a href="https://ggplot2.tidyverse.org/" target="_blank" rel="noopener">ggplot2&lt;/a> 3.0.0 is support for
&lt;a href="https://adv-r.hadley.nz/evaluation.html#tidy-evaluation" target="_blank" rel="noopener">tidy evaluation&lt;/a>, making it more programmable, and more consistent with the rest of the tidyverse. Though this introduces some breaking changes, we believe it to be worthwhile in the interest of improving future code. Here we show a couple of examples of how you might use it. New developer facing changes are also discussed (see
&lt;a href="#developer-facing-changes">below&lt;/a>).&lt;/p>
&lt;h2 id="tidy-aesthetics-with-aes">Tidy aesthetics with &lt;code>aes()&lt;/code>
&lt;a href="#tidy-aesthetics-with-aes">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>You can now use
&lt;a href="https://adv-r.hadley.nz/quasiquotation.html" target="_blank" rel="noopener">quasiquotation&lt;/a> in
&lt;a href="https://ggplot2.tidyverse.org/reference/aes.html" target="_blank" rel="noopener">&lt;code>aes()&lt;/code>&lt;/a>,
&lt;a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" target="_blank" rel="noopener">&lt;code>facet_wrap()&lt;/code>&lt;/a>, and
&lt;a href="https://ggplot2.tidyverse.org/reference/facet_grid.html" target="_blank" rel="noopener">&lt;code>facet_grid()&lt;/code>&lt;/a>. For &lt;code>aes()&lt;/code>, quasiquotation (&lt;code>!!&lt;/code>, &lt;code>!!!&lt;/code>, &lt;code>:=&lt;/code>) replaces
&lt;a href="https://ggplot2.tidyverse.org/reference/aes_.html" target="_blank" rel="noopener">&lt;code>aes_()&lt;/code>&lt;/a> and
&lt;a href="https://ggplot2.tidyverse.org/reference/aes_.html" target="_blank" rel="noopener">&lt;code>aes_string()&lt;/code>&lt;/a> (though these functions are being soft deprecated, and will be around for a while).&lt;/p>
&lt;p>Here we&amp;rsquo;ll use quasiquotation to make a function to make a pie chart that allows the user to avoid using quotation marks when they pass their arguments to the function.&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup> The initial function, below, would require that the user know the exact specifications to pass to &lt;code>aes()&lt;/code>.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">piechart_basic&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">mapping&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">mapping&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_bar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">width&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">coord_polar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">theta&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;y&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">xlab&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">NULL&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">ylab&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">NULL&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nf">piechart_basic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mpg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">factor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">fill&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">class&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2017-07-ggplot2-tidy-evaluation_files/figure-html/piechart-basic-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;p>The key to calling a tidy evaluation function inside of another function is to quote (with &lt;code>enquo()&lt;/code>) and unquote (with &lt;code>!!&lt;/code>):&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">pie_chart&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">var&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">...&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="n">var&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">enquo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">var&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">piechart_basic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">factor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">fill&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">!!&lt;/span>&lt;span class="n">var&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nf">pie_chart&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mpg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">class&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2017-07-ggplot2-tidy-evaluation_files/figure-html/piechart-qq-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;p>We could use this same pattern to make a scatterplot:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">scatter_plot&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="n">x&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">enquo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">y&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">enquo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nf">geom_point&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">!!&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">!!&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="nf">scatter_plot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mtcars&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">disp&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">drat&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2017-07-ggplot2-tidy-evaluation_files/figure-html/scatter-by-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;h2 id="tidy-facets-with-vars">Tidy facets with &lt;code>vars()&lt;/code>
&lt;a href="#tidy-facets-with-vars">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>To support quasiquotation in facetting, we’ve added a new helper function:
&lt;a href="https://ggplot2.tidyverse.org/reference/vars.html" target="_blank" rel="noopener">&lt;code>vars()&lt;/code>&lt;/a>, short for variables. Instead of &lt;code>facet_grid(x + y ~ a + b)&lt;/code> you can now write &lt;code>facet_grid(vars(x, y), vars(a, b))&lt;/code>. The formula interface won’t go away; but the new &lt;code>vars()&lt;/code> interface supports tidy evaluation, so can be easily programmed with.&lt;/p>
&lt;p>&lt;code>vars()&lt;/code> is used to supply variables or expressions, evaluated in the context of the dataset to form facetting groups.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">p&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mpg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">displ&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">cty&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nf">geom_point&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="n">p&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nf">facet_grid&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">rows&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">vars&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">drv&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2017-07-ggplot2-tidy-evaluation_files/figure-html/facet-vars-1.png" width="218px" style="display: block; margin: auto;" />&lt;/p>
&lt;p>Compared to &lt;code>aes()&lt;/code>, &lt;code>vars()&lt;/code> takes unnamed arguments. This makes it a more
natural fit for use with &lt;code>!!!&lt;/code>, the unquote-splice operator.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">year&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="m">2018&lt;/span>
&lt;span class="n">d&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="n">mpg&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">filter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">manufacturer&lt;/span> &lt;span class="o">%in%&lt;/span> &lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;dodge&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;ford&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">ggplot&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_point&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">displ&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">cty&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="n">args&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">quos&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">year&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">manufacturer&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">d&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nf">facet_grid&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">vars&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">!!!&lt;/span>&lt;span class="n">args&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2017-07-ggplot2-tidy-evaluation_files/figure-html/vars-env-1.png" width="177px" style="display: block; margin: auto;" />&lt;/p>
&lt;p>Inside of &lt;code>vars()&lt;/code> you can easily supply names, which will add titles to the facets.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">p&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nf">facet_grid&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">vars&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Cylinder&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">cyl&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">labeller&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">label_both&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2017-07-ggplot2-tidy-evaluation_files/figure-html/labelled-grid-1.png" width="177px" style="display: block; margin: auto;" />&lt;/p>
&lt;p>&lt;code>vars()&lt;/code> makes it easier to pass variables from wrapper functions.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">p&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mtcars&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">wt&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">disp&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nf">geom_point&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="n">wrap_by&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">...&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="nf">facet_wrap&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">vars&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">...&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">labeller&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">label_both&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="n">p&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nf">wrap_by&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">vs&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">am&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2017-07-ggplot2-tidy-evaluation_files/figure-html/wrap-by-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;p>In our &lt;code>wrap_by()&lt;/code> function above, we used tidy dots (
&lt;a href="https://adv-r.hadley.nz/quasiquotation.html#dot-dot-dot-..." target="_blank" rel="noopener">&lt;code>...&lt;/code>&lt;/a>), which represent an arbitrary number of additional arguments. Alternatively, we could allow the user to provide a single named argument with
&lt;a href="http://rlang.r-lib.org/reference/quotation.html" target="_blank" rel="noopener">&lt;code>enquo()&lt;/code>&lt;/a>. To create a default name, we&amp;rsquo;ll use
&lt;a href="http://rlang.r-lib.org/reference/quo_label.html" target="_blank" rel="noopener">&lt;code>quo_name()&lt;/code>&lt;/a>, which transforms a quosure into a simple string. Then we unquote and evaluate our arguments in their proper contexts using the
&lt;a href="http://rlang.r-lib.org/reference/quasiquotation.html" target="_blank" rel="noopener">&lt;code>!!&lt;/code>&lt;/a> (read: bang bang) operator, and the &lt;code>:=&lt;/code> operator to unquote the name.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">wrap_cut&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">var&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">3&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;span class="n">var&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">enquo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">var&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">nm&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">quo_name&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">var&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">wrap_by&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">!!&lt;/span>&lt;span class="n">nm&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">cut_number&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">!!&lt;/span>&lt;span class="n">var&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">!!&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="n">p&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nf">wrap_cut&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">drat&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2017-07-ggplot2-tidy-evaluation_files/figure-html/wrap-cut-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;p>You will also need to use
&lt;a href="http://rlang.r-lib.org/" target="_blank" rel="noopener">rlang&lt;/a> tools if computing on the mapping of an existing ggplot2 object.&lt;/p>
&lt;h2 id="developer-facing-changes">Developer facing changes
&lt;a href="#developer-facing-changes">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>If you&amp;rsquo;re building an extension package on top of ggplot2, you need to be aware that the introduction of tidy evaluation fundamentally changes the data structures that &lt;code>aes()&lt;/code> uses. In brief:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">mapping&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mpg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">colour&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;smoothed&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1"># Variables are now stored as quosures&lt;/span>
&lt;span class="n">mapping&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="n">x&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;quosure&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; expr: ^mpg&lt;/span>
&lt;span class="c1">#&amp;gt; env: global&lt;/span>
&lt;span class="c1"># Constants (atomic vectors of length 1), remain&lt;/span>
&lt;span class="c1"># as is&lt;/span>
&lt;span class="n">mapping&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="n">colour&lt;/span>
&lt;span class="c1">#&amp;gt; [1] &amp;#34;smoothed&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;h2 id="getting-help">Getting help
&lt;a href="#getting-help">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>If you&amp;rsquo;re new to tidy evaluation, the best place to learn more about it is in the work-in-progress 2nd edition of
&lt;a href="https://adv-r.hadley.nz/" target="_blank" rel="noopener">Advanced R&lt;/a>, especially the
&lt;a href="https://adv-r.hadley.nz/meta.html" target="_blank" rel="noopener">Metaprogramming section&lt;/a>. You may also want to check out RStudio&amp;rsquo;s
&lt;a href="https://www.rstudio.com/resources/webinars/tidy-eval/" target="_blank" rel="noopener">tidy evaluation webinar&lt;/a> with Lionel Henry, or (if you&amp;rsquo;re short on time) Hadley&amp;rsquo;s video:
&lt;a href="https://www.youtube.com/watch?v=nERXS3ssntw" target="_blank" rel="noopener">Tidy evaluation in 5 minutes&lt;/a>.&lt;/p>
&lt;p>You can also always ask for help at
&lt;a href="https://community.rstudio.com/" target="_blank" rel="noopener">community.rstudio.com&lt;/a>.&lt;/p>
&lt;section class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1" role="doc-endnote">
&lt;p>Wickham, Hadley. 2016. “Programming with Ggplot2.” In &lt;em>Ggplot2: Elegant Graphics for Data Analysis&lt;/em>, 241–53. Cham: Springer International Publishing. doi:10.1007/978-3-319-24277-4_12. &lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/section></description></item><item><title>ggplot2 3.0.0</title><link>https://www.tidyverse.org/blog/2018/07/ggplot2-3-0-0/</link><pubDate>Thu, 05 Jul 2018 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2018/07/ggplot2-3-0-0/</guid><description>&lt;p>We&amp;rsquo;re extremely pleased to announce the release of
&lt;a href="https://ggplot2.tidyverse.org/" target="_blank" rel="noopener">ggplot2&lt;/a> 3.0.0. This is a major release: it was previously announced as ggplot2 2.3.0, but we decided to increment the version number because there are some big changes under the hood. Most importantly ggplot2 now supports tidy evaluation, which makes it easier to programmatically build plots with ggplot2 in the same way you can programmatically build data manipulation pipelines with dplyr.&lt;/p>
&lt;p>Install ggplot2 with:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">install.packages&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ggplot2&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;h2 id="breaking-changes">Breaking changes
&lt;a href="#breaking-changes">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>In stable, long-standing packages like ggplot2, we put in a lot of effort to make sure that we don&amp;rsquo;t introduce backward incompatible changes. For this release, that involved testing on five versions of R (3.1 - 3.5) writing a new visual testing package (
&lt;a href="https://github.com/lionel-/vdiffr" target="_blank" rel="noopener">vdiffr&lt;/a>), running R CMD check on downstream packages (over
&lt;a href="https://www.tidyverse.org/articles/2018/05/ggplot2-2-3-0/#our-process" target="_blank" rel="noopener">6,000 times!&lt;/a>), and
&lt;a href="https://www.tidyverse.org/articles/2018/05/ggplot2-2-3-0/" target="_blank" rel="noopener">widely advertising&lt;/a> the release to get the community&amp;rsquo;s help. However, sometimes we do decide that it&amp;rsquo;s worth breaking a small amount of existing code in the interests of improving future code.&lt;/p>
&lt;p>The changes should affect relatively little user code, but have required developers to make changes. A separate post will address developer-facing changes in further detail, however, common errors and ways to work around them can be found
in the
&lt;a href="https://github.com/tidyverse/ggplot2/blob/master/NEWS.md#breaking-changes" target="_blank" rel="noopener">Breaking changes&lt;/a> section of ggplot2&amp;rsquo;s
&lt;a href="https://github.com/tidyverse/ggplot2/blob/master/NEWS.md" target="_blank" rel="noopener">NEWS&lt;/a>. If you discover something missing, please let us know so we can add it.&lt;/p>
&lt;h2 id="tidy-evaluation">Tidy evaluation
&lt;a href="#tidy-evaluation">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>You can now use
&lt;a href="https://adv-r.hadley.nz/quasiquotation.html" target="_blank" rel="noopener">quasiquotation&lt;/a> in &lt;code>aes()&lt;/code>, &lt;code>facet_wrap()&lt;/code>, and &lt;code>facet_grid()&lt;/code>.
To support quasiquotation in facetting we&amp;rsquo;ve added a new helper that works
similarly to &lt;code>aes()&lt;/code>: &lt;code>vars()&lt;/code>, short for variables, so instead of
&lt;code>facet_grid(x + y ~ a + b)&lt;/code> you can now write &lt;code>facet_grid(vars(x, y), vars(a, b))&lt;/code>.
The formula interface won&amp;rsquo;t go away; but the new &lt;code>vars()&lt;/code> interface is
much easier to program with.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">x_var&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">quo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">wt&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">y_var&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">quo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mpg&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">group_var&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">quo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cyl&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mtcars&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">!!&lt;/span>&lt;span class="n">x_var&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">!!&lt;/span>&lt;span class="n">y_var&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_point&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">facet_wrap&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">vars&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">!!&lt;/span>&lt;span class="n">group_var&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2018-07-ggplot2-3-0-0_files/figure-html/label-both-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;h2 id="new-features">New features
&lt;a href="#new-features">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>We only touch on a few of the new features in ggplot2 — there are many many more. For a full account of these improvements, please see
&lt;a href="https://github.com/tidyverse/ggplot2/blob/master/NEWS.md" target="_blank" rel="noopener">NEWS&lt;/a>. If there&amp;rsquo;s a feature you particularly like, and you write a blog post about, please share it with us using
&lt;a href="https://goo.gl/forms/elGvrlIXgTZVtCap1" target="_blank" rel="noopener">this form&lt;/a>, and we&amp;rsquo;ll include in a round up post in a month&amp;rsquo;s time.&lt;/p>
&lt;h3 id="sf">sf
&lt;a href="#sf">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>Thanks to the help of
&lt;a href="https://github.com/edzer" target="_blank" rel="noopener">Edzer Pebesma&lt;/a> and the
&lt;a href="https://github.com/r-spatial" target="_blank" rel="noopener">r-spatial&lt;/a> team, ggplot2 now has full support for simple features through
&lt;a href="https://r-spatial.github.io/sf/" target="_blank" rel="noopener">sf&lt;/a> using &lt;code>geom_sf()&lt;/code> and &lt;code>coord_sf()&lt;/code>; it now
automatically aligns CRS across layers, sets up the correct aspect ratio, and
draws a graticule.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">nc&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="n">sf&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="nf">st_read&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">system.file&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;shape/nc.shp&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">package&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;sf&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1">#&amp;gt; Reading layer `nc&amp;#39; from data source `/Users/hadley/R/sf/shape/nc.shp&amp;#39; using driver `ESRI Shapefile&amp;#39;&lt;/span>
&lt;span class="c1">#&amp;gt; Simple feature collection with 100 features and 14 fields&lt;/span>
&lt;span class="c1">#&amp;gt; geometry type: MULTIPOLYGON&lt;/span>
&lt;span class="c1">#&amp;gt; dimension: XY&lt;/span>
&lt;span class="c1">#&amp;gt; bbox: xmin: -84.32385 ymin: 33.88199 xmax: -75.45698 ymax: 36.58965&lt;/span>
&lt;span class="c1">#&amp;gt; epsg (SRID): 4267&lt;/span>
&lt;span class="c1">#&amp;gt; proj4string: +proj=longlat +datum=NAD27 +no_defs&lt;/span>
&lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nc&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_sf&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">annotate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;point&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">-80&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">35&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">colour&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;red&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">size&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2018-07-ggplot2-3-0-0_files/figure-html/sf-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;h3 id="calculated-aesthetics">Calculated aesthetics
&lt;a href="#calculated-aesthetics">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>The new &lt;code>stat()&lt;/code> function offers a cleaner, and better-documented syntax for
calculated-aesthetic variables. This replaces the older approach of surrounding
the variable name with &lt;code>..&lt;/code>. Instead of using &lt;code>aes(y = ..count..)&lt;/code>, you can use
&lt;code>aes(y = stat(count))&lt;/code>.&lt;/p>
&lt;p>This is particularly nice for more complex calculations, as &lt;code>stat()&lt;/code> only needs
to be specified once; e.g. &lt;code>aes(y = stat(count / max(count)))&lt;/code> rather than
&lt;code>aes(y = ..count.. / max(..count..))&lt;/code>.&lt;/p>
&lt;h3 id="tag">Tag
&lt;a href="#tag">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>In addition to title, subtitle, and caption, a new tag label has been added, for identifying plots. Add a tag with &lt;code>labs(tag = &amp;quot;A&amp;quot;)&lt;/code>, style it with the &lt;code>plot.tag&lt;/code> theme element, and control position with the &lt;code>plot.tag.position&lt;/code> theme.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mtcars&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_point&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">disp&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">mpg&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">labs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">tag&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#39;A&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">title&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#39;Title of this plot&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2018-07-ggplot2-3-0-0_files/figure-html/tag-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;h3 id="layers-geoms-stats-and-position-adjustments">Layers: geoms, stats, and position adjustments
&lt;a href="#layers-geoms-stats-and-position-adjustments">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>The new
&lt;a href="https://ggplot2.tidyverse.org/reference/position_dodge.html" target="_blank" rel="noopener">&lt;code>position_dodge2()&lt;/code>&lt;/a> allows you to arrange the horizontal position of plots with variable widths (i.e. bars and rectangles, in addition to box plots). By default, &lt;code>position_dodge2()&lt;/code> preserves the width of each element. You can choose to preserve the total width by setting the &lt;code>preserve&lt;/code> argument to &lt;code>&amp;quot;total&amp;quot;&lt;/code>. Thank you to
&lt;a href="https://github.com/karawoo" target="_blank" rel="noopener">Kara Woo&lt;/a> for all of her work on this.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mtcars&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">factor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cyl&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">fill&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">factor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">vs&lt;/span>&lt;span class="p">)))&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_bar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">position&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">position_dodge2&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">preserve&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;single&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mtcars&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">factor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cyl&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">fill&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">factor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">vs&lt;/span>&lt;span class="p">)))&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_bar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">position&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">position_dodge2&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">preserve&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;total&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2018-07-ggplot2-3-0-0_files/figure-html/dodge-st-1.png" width="50%" />&lt;img src="https://www.tidyverse.org/articles/2018-07-ggplot2-3-0-0_files/figure-html/dodge-st-2.png" width="50%" />&lt;/p>
&lt;h3 id="scales-and-guides">Scales and guides
&lt;a href="#scales-and-guides">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>Several new functions have been added to make it easy to use Viridis colour
scales: &lt;code>scale_colour_viridis_c()&lt;/code> and &lt;code>scale_fill_viridis_c()&lt;/code> for continuous,
and &lt;code>scale_colour_viridis_d()&lt;/code> and &lt;code>scale_fill_viridis_d()&lt;/code> for discrete.
Viridis is also now used as the default colour and fill scale for ordered
factors.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">dsamp&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="n">diamonds&lt;/span>&lt;span class="nf">[sample&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">nrow&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">diamonds&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="m">1000&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">]&lt;/span>
&lt;span class="n">d&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dsamp&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">carat&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">price&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_point&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">colour&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">clarity&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="n">d&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nf">scale_colour_viridis_d&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2018-07-ggplot2-3-0-0_files/figure-html/viridis-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;p>&lt;code>scale_colour_continuous()&lt;/code> and &lt;code>scale_colour_gradient()&lt;/code> are now controlled by global options &lt;code>ggplot2.continuous.colour&lt;/code> and &lt;code>ggplot2.continuous.fill&lt;/code>. You can set them to &lt;code>&amp;quot;viridis&amp;quot;&lt;/code> to use the viridis colour scale by default:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">options&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="n">ggplot2.continuous.colour&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;viridis&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">ggplot2.continuous.fill&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;viridis&amp;#34;&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">v&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">faithfuld&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_tile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">waiting&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">eruptions&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">fill&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">density&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="n">v&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nf">scale_fill_continuous&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2018-07-ggplot2-3-0-0_files/figure-html/viridis-c-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;p>&lt;code>guide_colorbar()&lt;/code> is more configurable: tick marks and color bar frame can now by styled with arguments &lt;code>ticks.colour&lt;/code>, &lt;code>ticks.linewidth&lt;/code>, &lt;code>frame.colour&lt;/code>, &lt;code>frame.linewidth&lt;/code>, and &lt;code>frame.linetype&lt;/code>.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">p&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mtcars&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">wt&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">mpg&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="n">p&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nf">geom_point&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">colour&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">cyl&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">scale_colour_gradient&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="n">low&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;white&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">high&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;red&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">guide&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">guide_colorbar&lt;/span>&lt;span class="p">(&lt;/span>
&lt;span class="n">frame.colour&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;black&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="n">ticks.colour&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;black&amp;#34;&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2018-07-ggplot2-3-0-0_files/figure-html/guide-colorbar-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;h3 id="nonstandard-aesthetics">Nonstandard aesthetics
&lt;a href="#nonstandard-aesthetics">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>Thanks to
&lt;a href="https://github.com/tidyverse/ggplot2/pull/2555" target="_blank" rel="noopener">Claus Wilke&lt;/a>, there is significantly improved support for nonstandard aesthetics.&lt;/p>
&lt;p>Aesthetics can now be specified independent of the scale name.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">iris&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Sepal.Length&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">fill&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Species&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_density&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">alpha&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">0.7&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">scale_colour_brewer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;qual&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">aesthetics&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;fill&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2018-07-ggplot2-3-0-0_files/figure-html/nsa-independent-scale-1.png" width="700px" style="display: block; margin: auto;" />&lt;/p>
&lt;h2 id="acknowledgements">Acknowledgements
&lt;a href="#acknowledgements">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>This release includes a change to the ggplot2 authors, which now includes Claus Wilke (new), and Lionel Henry, Kara Woo, Thomas Lin Pedersen, and Kohske Takahashi in recognition of their past contributions.&lt;/p>
&lt;p>We&amp;rsquo;re grateful to the &lt;em>391&lt;/em> people who contributed issues, code and comments:
&lt;a href="https://github.com/achalaacharya" target="_blank" rel="noopener">@achalaacharya&lt;/a>,
&lt;a href="https://github.com/adambajguz" target="_blank" rel="noopener">@adambajguz&lt;/a>,
&lt;a href="https://github.com/AdeelH" target="_blank" rel="noopener">@AdeelH&lt;/a>,
&lt;a href="https://github.com/adrfantini" target="_blank" rel="noopener">@adrfantini&lt;/a>,
&lt;a href="https://github.com/aelwan" target="_blank" rel="noopener">@aelwan&lt;/a>,
&lt;a href="https://github.com/aetiologicCanada" target="_blank" rel="noopener">@aetiologicCanada&lt;/a>,
&lt;a href="https://github.com/ajay-d" target="_blank" rel="noopener">@ajay-d&lt;/a>,
&lt;a href="https://github.com/alberthkcheng" target="_blank" rel="noopener">@alberthkcheng&lt;/a>,
&lt;a href="https://github.com/alchenist" target="_blank" rel="noopener">@alchenist&lt;/a>,
&lt;a href="https://github.com/alexconingham" target="_blank" rel="noopener">@alexconingham&lt;/a>,
&lt;a href="https://github.com/alexgenin" target="_blank" rel="noopener">@alexgenin&lt;/a>,
&lt;a href="https://github.com/alistaire47" target="_blank" rel="noopener">@alistaire47&lt;/a>,
&lt;a href="https://github.com/andbarker" target="_blank" rel="noopener">@andbarker&lt;/a>,
&lt;a href="https://github.com/andrewdolman" target="_blank" rel="noopener">@andrewdolman&lt;/a>,
&lt;a href="https://github.com/andrewjpfeiffer" target="_blank" rel="noopener">@andrewjpfeiffer&lt;/a>,
&lt;a href="https://github.com/andzandz11" target="_blank" rel="noopener">@andzandz11&lt;/a>,
&lt;a href="https://github.com/aornugent" target="_blank" rel="noopener">@aornugent&lt;/a>,
&lt;a href="https://github.com/aosmith16" target="_blank" rel="noopener">@aosmith16&lt;/a>,
&lt;a href="https://github.com/aphalo" target="_blank" rel="noopener">@aphalo&lt;/a>,
&lt;a href="https://github.com/arthur-st" target="_blank" rel="noopener">@arthur-st&lt;/a>,
&lt;a href="https://github.com/aschersleben" target="_blank" rel="noopener">@aschersleben&lt;/a>,
&lt;a href="https://github.com/awgymer" target="_blank" rel="noopener">@awgymer&lt;/a>,
&lt;a href="https://github.com/Ax3man" target="_blank" rel="noopener">@Ax3man&lt;/a>,
&lt;a href="https://github.com/baderstine" target="_blank" rel="noopener">@baderstine&lt;/a>,
&lt;a href="https://github.com/baffelli" target="_blank" rel="noopener">@baffelli&lt;/a>,
&lt;a href="https://github.com/baptiste" target="_blank" rel="noopener">@baptiste&lt;/a>,
&lt;a href="https://github.com/BarkleyBG" target="_blank" rel="noopener">@BarkleyBG&lt;/a>,
&lt;a href="https://github.com/basille" target="_blank" rel="noopener">@basille&lt;/a>,
&lt;a href="https://github.com/batpigandme" target="_blank" rel="noopener">@batpigandme&lt;/a>,
&lt;a href="https://github.com/batuff" target="_blank" rel="noopener">@batuff&lt;/a>,
&lt;a href="https://github.com/bbolker" target="_blank" rel="noopener">@bbolker&lt;/a>,
&lt;a href="https://github.com/bbrewington" target="_blank" rel="noopener">@bbrewington&lt;/a>,
&lt;a href="https://github.com/beansprout88" target="_blank" rel="noopener">@beansprout88&lt;/a>,
&lt;a href="https://github.com/behrman" target="_blank" rel="noopener">@behrman&lt;/a>,
&lt;a href="https://github.com/ben519" target="_blank" rel="noopener">@ben519&lt;/a>,
&lt;a href="https://github.com/benediktclaus" target="_blank" rel="noopener">@benediktclaus&lt;/a>,
&lt;a href="https://github.com/berkorbay" target="_blank" rel="noopener">@berkorbay&lt;/a>,
&lt;a href="https://github.com/bfgray3" target="_blank" rel="noopener">@bfgray3&lt;/a>,
&lt;a href="https://github.com/bhaskarvk" target="_blank" rel="noopener">@bhaskarvk&lt;/a>,
&lt;a href="https://github.com/billdenney" target="_blank" rel="noopener">@billdenney&lt;/a>,
&lt;a href="https://github.com/bjreisman" target="_blank" rel="noopener">@bjreisman&lt;/a>,
&lt;a href="https://github.com/boshek" target="_blank" rel="noopener">@boshek&lt;/a>,
&lt;a href="https://github.com/botanize" target="_blank" rel="noopener">@botanize&lt;/a>,
&lt;a href="https://github.com/botaspablo" target="_blank" rel="noopener">@botaspablo&lt;/a>,
&lt;a href="https://github.com/bouch-ra" target="_blank" rel="noopener">@bouch-ra&lt;/a>,
&lt;a href="https://github.com/brianwdavis" target="_blank" rel="noopener">@brianwdavis&lt;/a>,
&lt;a href="https://github.com/briencj" target="_blank" rel="noopener">@briencj&lt;/a>,
&lt;a href="https://github.com/brodieG" target="_blank" rel="noopener">@brodieG&lt;/a>,
&lt;a href="https://github.com/bsaul" target="_blank" rel="noopener">@bsaul&lt;/a>,
&lt;a href="https://github.com/bschneidr" target="_blank" rel="noopener">@bschneidr&lt;/a>,
&lt;a href="https://github.com/burchill" target="_blank" rel="noopener">@burchill&lt;/a>,
&lt;a href="https://github.com/buyske" target="_blank" rel="noopener">@buyske&lt;/a>,
&lt;a href="https://github.com/byapparov" target="_blank" rel="noopener">@byapparov&lt;/a>,
&lt;a href="https://github.com/caijun" target="_blank" rel="noopener">@caijun&lt;/a>,
&lt;a href="https://github.com/cankutcubuk" target="_blank" rel="noopener">@cankutcubuk&lt;/a>,
&lt;a href="https://github.com/CharlesCara" target="_blank" rel="noopener">@CharlesCara&lt;/a>,
&lt;a href="https://github.com/Chavelior" target="_blank" rel="noopener">@Chavelior&lt;/a>,
&lt;a href="https://github.com/christianhomberg" target="_blank" rel="noopener">@christianhomberg&lt;/a>,
&lt;a href="https://github.com/cinkova" target="_blank" rel="noopener">@cinkova&lt;/a>,
&lt;a href="https://github.com/ckuenne" target="_blank" rel="noopener">@ckuenne&lt;/a>,
&lt;a href="https://github.com/clauswilke" target="_blank" rel="noopener">@clauswilke&lt;/a>,
&lt;a href="https://github.com/cooknl" target="_blank" rel="noopener">@cooknl&lt;/a>,
&lt;a href="https://github.com/corytu" target="_blank" rel="noopener">@corytu&lt;/a>,
&lt;a href="https://github.com/cpsievert" target="_blank" rel="noopener">@cpsievert&lt;/a>,
&lt;a href="https://github.com/cregouby" target="_blank" rel="noopener">@cregouby&lt;/a>,
&lt;a href="https://github.com/crsh" target="_blank" rel="noopener">@crsh&lt;/a>,
&lt;a href="https://github.com/cryanking" target="_blank" rel="noopener">@cryanking&lt;/a>,
&lt;a href="https://github.com/cseveren" target="_blank" rel="noopener">@cseveren&lt;/a>,
&lt;a href="https://github.com/daattali" target="_blank" rel="noopener">@daattali&lt;/a>,
&lt;a href="https://github.com/danfulop" target="_blank" rel="noopener">@danfulop&lt;/a>,
&lt;a href="https://github.com/daniel-barnett" target="_blank" rel="noopener">@daniel-barnett&lt;/a>,
&lt;a href="https://github.com/dantonnoriega" target="_blank" rel="noopener">@dantonnoriega&lt;/a>,
&lt;a href="https://github.com/DarioBoh" target="_blank" rel="noopener">@DarioBoh&lt;/a>,
&lt;a href="https://github.com/DarioS" target="_blank" rel="noopener">@DarioS&lt;/a>,
&lt;a href="https://github.com/darrkj" target="_blank" rel="noopener">@darrkj&lt;/a>,
&lt;a href="https://github.com/DarwinAwardWinner" target="_blank" rel="noopener">@DarwinAwardWinner&lt;/a>,
&lt;a href="https://github.com/DasHammett" target="_blank" rel="noopener">@DasHammett&lt;/a>,
&lt;a href="https://github.com/datalorax" target="_blank" rel="noopener">@datalorax&lt;/a>,
&lt;a href="https://github.com/davharris" target="_blank" rel="noopener">@davharris&lt;/a>,
&lt;a href="https://github.com/DavidNash1" target="_blank" rel="noopener">@DavidNash1&lt;/a>,
&lt;a href="https://github.com/DavyLandman" target="_blank" rel="noopener">@DavyLandman&lt;/a>,
&lt;a href="https://github.com/dbo99" target="_blank" rel="noopener">@dbo99&lt;/a>,
&lt;a href="https://github.com/ddiez" target="_blank" rel="noopener">@ddiez&lt;/a>,
&lt;a href="https://github.com/delferts" target="_blank" rel="noopener">@delferts&lt;/a>,
&lt;a href="https://github.com/Demetrio92" target="_blank" rel="noopener">@Demetrio92&lt;/a>,
&lt;a href="https://github.com/DesiQuintans" target="_blank" rel="noopener">@DesiQuintans&lt;/a>,
&lt;a href="https://github.com/dietrichson" target="_blank" rel="noopener">@dietrichson&lt;/a>,
&lt;a href="https://github.com/Dilini-Sewwandi-Rajapaksha" target="_blank" rel="noopener">@Dilini-Sewwandi-Rajapaksha&lt;/a>,
&lt;a href="https://github.com/dipenpatel235" target="_blank" rel="noopener">@dipenpatel235&lt;/a>,
&lt;a href="https://github.com/diplodata" target="_blank" rel="noopener">@diplodata&lt;/a>,
&lt;a href="https://github.com/dirkschumacher" target="_blank" rel="noopener">@dirkschumacher&lt;/a>,
&lt;a href="https://github.com/djrajdev" target="_blank" rel="noopener">@djrajdev&lt;/a>,
&lt;a href="https://github.com/dl7631" target="_blank" rel="noopener">@dl7631&lt;/a>,
&lt;a href="https://github.com/dmenne" target="_blank" rel="noopener">@dmenne&lt;/a>,
&lt;a href="https://github.com/DocOfi" target="_blank" rel="noopener">@DocOfi&lt;/a>,
&lt;a href="https://github.com/domiden" target="_blank" rel="noopener">@domiden&lt;/a>,
&lt;a href="https://github.com/dongzhuoer" target="_blank" rel="noopener">@dongzhuoer&lt;/a>,
&lt;a href="https://github.com/dpastoor" target="_blank" rel="noopener">@dpastoor&lt;/a>,
&lt;a href="https://github.com/dpmcsuss" target="_blank" rel="noopener">@dpmcsuss&lt;/a>,
&lt;a href="https://github.com/dpprdan" target="_blank" rel="noopener">@dpprdan&lt;/a>,
&lt;a href="https://github.com/dpseidel" target="_blank" rel="noopener">@dpseidel&lt;/a>,
&lt;a href="https://github.com/DSLituiev" target="_blank" rel="noopener">@DSLituiev&lt;/a>,
&lt;a href="https://github.com/dvcv" target="_blank" rel="noopener">@dvcv&lt;/a>,
&lt;a href="https://github.com/dylan-stark" target="_blank" rel="noopener">@dylan-stark&lt;/a>,
&lt;a href="https://github.com/eamoncaddigan" target="_blank" rel="noopener">@eamoncaddigan&lt;/a>,
&lt;a href="https://github.com/econandrew" target="_blank" rel="noopener">@econandrew&lt;/a>,
&lt;a href="https://github.com/edgararuiz" target="_blank" rel="noopener">@edgararuiz&lt;/a>,
&lt;a href="https://github.com/edmundesterbauer" target="_blank" rel="noopener">@edmundesterbauer&lt;/a>,
&lt;a href="https://github.com/EdwinTh" target="_blank" rel="noopener">@EdwinTh&lt;/a>,
&lt;a href="https://github.com/edzer" target="_blank" rel="noopener">@edzer&lt;/a>,
&lt;a href="https://github.com/eeenilsson" target="_blank" rel="noopener">@eeenilsson&lt;/a>,
&lt;a href="https://github.com/ekatko1" target="_blank" rel="noopener">@ekatko1&lt;/a>,
&lt;a href="https://github.com/elbamos" target="_blank" rel="noopener">@elbamos&lt;/a>,
&lt;a href="https://github.com/elina800" target="_blank" rel="noopener">@elina800&lt;/a>,
&lt;a href="https://github.com/elinw" target="_blank" rel="noopener">@elinw&lt;/a>,
&lt;a href="https://github.com/eliocamp" target="_blank" rel="noopener">@eliocamp&lt;/a>,
&lt;a href="https://github.com/Emaasit" target="_blank" rel="noopener">@Emaasit&lt;/a>,
&lt;a href="https://github.com/emilelatour" target="_blank" rel="noopener">@emilelatour&lt;/a>,
&lt;a href="https://github.com/Enchufa2" target="_blank" rel="noopener">@Enchufa2&lt;/a>,
&lt;a href="https://github.com/erocoar" target="_blank" rel="noopener">@erocoar&lt;/a>,
&lt;a href="https://github.com/espinielli" target="_blank" rel="noopener">@espinielli&lt;/a>,
&lt;a href="https://github.com/everydayduffy" target="_blank" rel="noopener">@everydayduffy&lt;/a>,
&lt;a href="https://github.com/ewallace" target="_blank" rel="noopener">@ewallace&lt;/a>,
&lt;a href="https://github.com/FabianRoger" target="_blank" rel="noopener">@FabianRoger&lt;/a>,
&lt;a href="https://github.com/FelixMailoa" target="_blank" rel="noopener">@FelixMailoa&lt;/a>,
&lt;a href="https://github.com/FlordeAzahar" target="_blank" rel="noopener">@FlordeAzahar&lt;/a>,
&lt;a href="https://github.com/flying-sheep" target="_blank" rel="noopener">@flying-sheep&lt;/a>,
&lt;a href="https://github.com/fmassicano" target="_blank" rel="noopener">@fmassicano&lt;/a>,
&lt;a href="https://github.com/foldager" target="_blank" rel="noopener">@foldager&lt;/a>,
&lt;a href="https://github.com/foo-bar-baz-qux" target="_blank" rel="noopener">@foo-bar-baz-qux&lt;/a>,
&lt;a href="https://github.com/francoisturcot" target="_blank" rel="noopener">@francoisturcot&lt;/a>,
&lt;a href="https://github.com/Freguglia" target="_blank" rel="noopener">@Freguglia&lt;/a>,
&lt;a href="https://github.com/frostell" target="_blank" rel="noopener">@frostell&lt;/a>,
&lt;a href="https://github.com/gfiumara" target="_blank" rel="noopener">@gfiumara&lt;/a>,
&lt;a href="https://github.com/GG786" target="_blank" rel="noopener">@GG786&lt;/a>,
&lt;a href="https://github.com/ggrothendieck" target="_blank" rel="noopener">@ggrothendieck&lt;/a>,
&lt;a href="https://github.com/ghost" target="_blank" rel="noopener">@ghost&lt;/a>,
&lt;a href="https://github.com/gilleschapron" target="_blank" rel="noopener">@gilleschapron&lt;/a>,
&lt;a href="https://github.com/GillesSanMartin" target="_blank" rel="noopener">@GillesSanMartin&lt;/a>,
&lt;a href="https://github.com/gjabel" target="_blank" rel="noopener">@gjabel&lt;/a>,
&lt;a href="https://github.com/glennstone" target="_blank" rel="noopener">@glennstone&lt;/a>,
&lt;a href="https://github.com/gmbecker" target="_blank" rel="noopener">@gmbecker&lt;/a>,
&lt;a href="https://github.com/GoodluckH" target="_blank" rel="noopener">@GoodluckH&lt;/a>,
&lt;a href="https://github.com/gordocabron" target="_blank" rel="noopener">@gordocabron&lt;/a>,
&lt;a href="https://github.com/goyalmunish" target="_blank" rel="noopener">@goyalmunish&lt;/a>,
&lt;a href="https://github.com/grantmcdermott" target="_blank" rel="noopener">@grantmcdermott&lt;/a>,
&lt;a href="https://github.com/GreenStat" target="_blank" rel="noopener">@GreenStat&lt;/a>,
&lt;a href="https://github.com/gregmacfarlane" target="_blank" rel="noopener">@gregmacfarlane&lt;/a>,
&lt;a href="https://github.com/gregrs-uk" target="_blank" rel="noopener">@gregrs-uk&lt;/a>,
&lt;a href="https://github.com/GuangchuangYu" target="_blank" rel="noopener">@GuangchuangYu&lt;/a>,
&lt;a href="https://github.com/gwarnes-mdsol" target="_blank" rel="noopener">@gwarnes-mdsol&lt;/a>,
&lt;a href="https://github.com/ha0ye" target="_blank" rel="noopener">@ha0ye&lt;/a>,
&lt;a href="https://github.com/hadley" target="_blank" rel="noopener">@hadley&lt;/a>,
&lt;a href="https://github.com/hannes101" target="_blank" rel="noopener">@hannes101&lt;/a>,
&lt;a href="https://github.com/hansvancalster" target="_blank" rel="noopener">@hansvancalster&lt;/a>,
&lt;a href="https://github.com/hardeepsjohar" target="_blank" rel="noopener">@hardeepsjohar&lt;/a>,
&lt;a href="https://github.com/has2k1" target="_blank" rel="noopener">@has2k1&lt;/a>,
&lt;a href="https://github.com/heckendorfc" target="_blank" rel="noopener">@heckendorfc&lt;/a>,
&lt;a href="https://github.com/hedjour" target="_blank" rel="noopener">@hedjour&lt;/a>,
&lt;a href="https://github.com/Henrik-P" target="_blank" rel="noopener">@Henrik-P&lt;/a>,
&lt;a href="https://github.com/henrikmidtiby" target="_blank" rel="noopener">@henrikmidtiby&lt;/a>,
&lt;a href="https://github.com/hrabel" target="_blank" rel="noopener">@hrabel&lt;/a>,
&lt;a href="https://github.com/hrbrmstr" target="_blank" rel="noopener">@hrbrmstr&lt;/a>,
&lt;a href="https://github.com/huangl07" target="_blank" rel="noopener">@huangl07&lt;/a>,
&lt;a href="https://github.com/HughParsonage" target="_blank" rel="noopener">@HughParsonage&lt;/a>,
&lt;a href="https://github.com/ibiris" target="_blank" rel="noopener">@ibiris&lt;/a>,
&lt;a href="https://github.com/idavydov" target="_blank" rel="noopener">@idavydov&lt;/a>,
&lt;a href="https://github.com/idemockle" target="_blank" rel="noopener">@idemockle&lt;/a>,
&lt;a href="https://github.com/igordot" target="_blank" rel="noopener">@igordot&lt;/a>,
&lt;a href="https://github.com/Ilia-Kosenkov" target="_blank" rel="noopener">@Ilia-Kosenkov&lt;/a>,
&lt;a href="https://github.com/IndrajeetPatil" target="_blank" rel="noopener">@IndrajeetPatil&lt;/a>,
&lt;a href="https://github.com/irudnyts" target="_blank" rel="noopener">@irudnyts&lt;/a>,
&lt;a href="https://github.com/izahn" target="_blank" rel="noopener">@izahn&lt;/a>,
&lt;a href="https://github.com/jan-glx" target="_blank" rel="noopener">@jan-glx&lt;/a>,
&lt;a href="https://github.com/janvanoeveren" target="_blank" rel="noopener">@janvanoeveren&lt;/a>,
&lt;a href="https://github.com/jarrod-dalton" target="_blank" rel="noopener">@jarrod-dalton&lt;/a>,
&lt;a href="https://github.com/jcrada" target="_blank" rel="noopener">@jcrada&lt;/a>,
&lt;a href="https://github.com/jdagilliland" target="_blank" rel="noopener">@jdagilliland&lt;/a>,
&lt;a href="https://github.com/jemus42" target="_blank" rel="noopener">@jemus42&lt;/a>,
&lt;a href="https://github.com/jenitivecase" target="_blank" rel="noopener">@jenitivecase&lt;/a>,
&lt;a href="https://github.com/jennybc" target="_blank" rel="noopener">@jennybc&lt;/a>,
&lt;a href="https://github.com/jentjr" target="_blank" rel="noopener">@jentjr&lt;/a>,
&lt;a href="https://github.com/jflycn" target="_blank" rel="noopener">@jflycn&lt;/a>,
&lt;a href="https://github.com/jgoad" target="_blank" rel="noopener">@jgoad&lt;/a>,
&lt;a href="https://github.com/jimdholland" target="_blank" rel="noopener">@jimdholland&lt;/a>,
&lt;a href="https://github.com/jimhester" target="_blank" rel="noopener">@jimhester&lt;/a>,
&lt;a href="https://github.com/jnaber" target="_blank" rel="noopener">@jnaber&lt;/a>,
&lt;a href="https://github.com/jnolis" target="_blank" rel="noopener">@jnolis&lt;/a>,
&lt;a href="https://github.com/joacorapela" target="_blank" rel="noopener">@joacorapela&lt;/a>,
&lt;a href="https://github.com/joergtrojan" target="_blank" rel="noopener">@joergtrojan&lt;/a>,
&lt;a href="https://github.com/JoFAM" target="_blank" rel="noopener">@JoFAM&lt;/a>,
&lt;a href="https://github.com/johngoldin" target="_blank" rel="noopener">@johngoldin&lt;/a>,
&lt;a href="https://github.com/JohnMount" target="_blank" rel="noopener">@JohnMount&lt;/a>,
&lt;a href="https://github.com/jonocarroll" target="_blank" rel="noopener">@jonocarroll&lt;/a>,
&lt;a href="https://github.com/joojala" target="_blank" rel="noopener">@joojala&lt;/a>,
&lt;a href="https://github.com/jorgher" target="_blank" rel="noopener">@jorgher&lt;/a>,
&lt;a href="https://github.com/josephuses" target="_blank" rel="noopener">@josephuses&lt;/a>,
&lt;a href="https://github.com/joshkehn" target="_blank" rel="noopener">@joshkehn&lt;/a>,
&lt;a href="https://github.com/jpilorget" target="_blank" rel="noopener">@jpilorget&lt;/a>,
&lt;a href="https://github.com/jrnold" target="_blank" rel="noopener">@jrnold&lt;/a>,
&lt;a href="https://github.com/jrvianna" target="_blank" rel="noopener">@jrvianna&lt;/a>,
&lt;a href="https://github.com/jsams" target="_blank" rel="noopener">@jsams&lt;/a>,
&lt;a href="https://github.com/jsta" target="_blank" rel="noopener">@jsta&lt;/a>,
&lt;a href="https://github.com/JTapper" target="_blank" rel="noopener">@JTapper&lt;/a>,
&lt;a href="https://github.com/juliasilge" target="_blank" rel="noopener">@juliasilge&lt;/a>,
&lt;a href="https://github.com/jvcasillas" target="_blank" rel="noopener">@jvcasillas&lt;/a>,
&lt;a href="https://github.com/jwdink" target="_blank" rel="noopener">@jwdink&lt;/a>,
&lt;a href="https://github.com/jwhendy" target="_blank" rel="noopener">@jwhendy&lt;/a>,
&lt;a href="https://github.com/JWilb" target="_blank" rel="noopener">@JWilb&lt;/a>,
&lt;a href="https://github.com/jzadra" target="_blank" rel="noopener">@jzadra&lt;/a>,
&lt;a href="https://github.com/kamilsi" target="_blank" rel="noopener">@kamilsi&lt;/a>,
&lt;a href="https://github.com/karawoo" target="_blank" rel="noopener">@karawoo&lt;/a>,
&lt;a href="https://github.com/karldw" target="_blank" rel="noopener">@karldw&lt;/a>,
&lt;a href="https://github.com/katrinleinweber" target="_blank" rel="noopener">@katrinleinweber&lt;/a>,
&lt;a href="https://github.com/kaybenleroll" target="_blank" rel="noopener">@kaybenleroll&lt;/a>,
&lt;a href="https://github.com/kenbeek" target="_blank" rel="noopener">@kenbeek&lt;/a>,
&lt;a href="https://github.com/kent37" target="_blank" rel="noopener">@kent37&lt;/a>,
&lt;a href="https://github.com/kevinushey" target="_blank" rel="noopener">@kevinushey&lt;/a>,
&lt;a href="https://github.com/kimchpekr" target="_blank" rel="noopener">@kimchpekr&lt;/a>,
&lt;a href="https://github.com/klmr" target="_blank" rel="noopener">@klmr&lt;/a>,
&lt;a href="https://github.com/kmace" target="_blank" rel="noopener">@kmace&lt;/a>,
&lt;a href="https://github.com/krlmlr" target="_blank" rel="noopener">@krlmlr&lt;/a>,
&lt;a href="https://github.com/kylebmetrum" target="_blank" rel="noopener">@kylebmetrum&lt;/a>,
&lt;a href="https://github.com/landesbergn" target="_blank" rel="noopener">@landesbergn&lt;/a>,
&lt;a href="https://github.com/laurareads" target="_blank" rel="noopener">@laurareads&lt;/a>,
&lt;a href="https://github.com/ldecicco-USGS" target="_blank" rel="noopener">@ldecicco-USGS&lt;/a>,
&lt;a href="https://github.com/Leoloh" target="_blank" rel="noopener">@Leoloh&lt;/a>,
&lt;a href="https://github.com/likanzhan" target="_blank" rel="noopener">@likanzhan&lt;/a>,
&lt;a href="https://github.com/lindeloev" target="_blank" rel="noopener">@lindeloev&lt;/a>,
&lt;a href="https://github.com/lionel-" target="_blank" rel="noopener">@lionel-&lt;/a>,
&lt;a href="https://github.com/liuwell" target="_blank" rel="noopener">@liuwell&lt;/a>,
&lt;a href="https://github.com/llrs" target="_blank" rel="noopener">@llrs&lt;/a>,
&lt;a href="https://github.com/LSanselme" target="_blank" rel="noopener">@LSanselme&lt;/a>,
&lt;a href="https://github.com/luisDVA" target="_blank" rel="noopener">@luisDVA&lt;/a>,
&lt;a href="https://github.com/luwei0917" target="_blank" rel="noopener">@luwei0917&lt;/a>,
&lt;a href="https://github.com/MagicForrest" target="_blank" rel="noopener">@MagicForrest&lt;/a>,
&lt;a href="https://github.com/malcolmbarrett" target="_blank" rel="noopener">@malcolmbarrett&lt;/a>,
&lt;a href="https://github.com/mallerhand" target="_blank" rel="noopener">@mallerhand&lt;/a>,
&lt;a href="https://github.com/ManuelNeumann" target="_blank" rel="noopener">@ManuelNeumann&lt;/a>,
&lt;a href="https://github.com/manuelreif" target="_blank" rel="noopener">@manuelreif&lt;/a>,
&lt;a href="https://github.com/MarauderPixie" target="_blank" rel="noopener">@MarauderPixie&lt;/a>,
&lt;a href="https://github.com/mariellep" target="_blank" rel="noopener">@mariellep&lt;/a>,
&lt;a href="https://github.com/Maschette" target="_blank" rel="noopener">@Maschette&lt;/a>,
&lt;a href="https://github.com/mattwilliamson13" target="_blank" rel="noopener">@mattwilliamson13&lt;/a>,
&lt;a href="https://github.com/mbergins" target="_blank" rel="noopener">@mbergins&lt;/a>,
&lt;a href="https://github.com/mcol" target="_blank" rel="noopener">@mcol&lt;/a>,
&lt;a href="https://github.com/mdsumner" target="_blank" rel="noopener">@mdsumner&lt;/a>,
&lt;a href="https://github.com/melohr" target="_blank" rel="noopener">@melohr&lt;/a>,
&lt;a href="https://github.com/mentalplex" target="_blank" rel="noopener">@mentalplex&lt;/a>,
&lt;a href="https://github.com/mfoos" target="_blank" rel="noopener">@mfoos&lt;/a>,
&lt;a href="https://github.com/mgacc0" target="_blank" rel="noopener">@mgacc0&lt;/a>,
&lt;a href="https://github.com/mgruebsch" target="_blank" rel="noopener">@mgruebsch&lt;/a>,
&lt;a href="https://github.com/MichaelChirico" target="_blank" rel="noopener">@MichaelChirico&lt;/a>,
&lt;a href="https://github.com/MichaelRatajczak" target="_blank" rel="noopener">@MichaelRatajczak&lt;/a>,
&lt;a href="https://github.com/mikgh" target="_blank" rel="noopener">@mikgh&lt;/a>,
&lt;a href="https://github.com/mikmart" target="_blank" rel="noopener">@mikmart&lt;/a>,
&lt;a href="https://github.com/MilesMcBain" target="_blank" rel="noopener">@MilesMcBain&lt;/a>,
&lt;a href="https://github.com/mine-cetinkaya-rundel" target="_blank" rel="noopener">@mine-cetinkaya-rundel&lt;/a>,
&lt;a href="https://github.com/mitchelloharawild" target="_blank" rel="noopener">@mitchelloharawild&lt;/a>,
&lt;a href="https://github.com/mjbock" target="_blank" rel="noopener">@mjbock&lt;/a>,
&lt;a href="https://github.com/mkoohafkan" target="_blank" rel="noopener">@mkoohafkan&lt;/a>,
&lt;a href="https://github.com/mkuhn" target="_blank" rel="noopener">@mkuhn&lt;/a>,
&lt;a href="https://github.com/monikav" target="_blank" rel="noopener">@monikav&lt;/a>,
&lt;a href="https://github.com/mpancia" target="_blank" rel="noopener">@mpancia&lt;/a>,
&lt;a href="https://github.com/mrtns" target="_blank" rel="noopener">@mrtns&lt;/a>,
&lt;a href="https://github.com/mruessler" target="_blank" rel="noopener">@mruessler&lt;/a>,
&lt;a href="https://github.com/mundl" target="_blank" rel="noopener">@mundl&lt;/a>,
&lt;a href="https://github.com/mvkorpel" target="_blank" rel="noopener">@mvkorpel&lt;/a>,
&lt;a href="https://github.com/mwaldstein" target="_blank" rel="noopener">@mwaldstein&lt;/a>,
&lt;a href="https://github.com/ndphillips" target="_blank" rel="noopener">@ndphillips&lt;/a>,
&lt;a href="https://github.com/Nekochef" target="_blank" rel="noopener">@Nekochef&lt;/a>,
&lt;a href="https://github.com/nhamilton1980" target="_blank" rel="noopener">@nhamilton1980&lt;/a>,
&lt;a href="https://github.com/nicksolomon" target="_blank" rel="noopener">@nicksolomon&lt;/a>,
&lt;a href="https://github.com/nipunbatra" target="_blank" rel="noopener">@nipunbatra&lt;/a>,
&lt;a href="https://github.com/noamross" target="_blank" rel="noopener">@noamross&lt;/a>,
&lt;a href="https://github.com/Nowosad" target="_blank" rel="noopener">@Nowosad&lt;/a>,
&lt;a href="https://github.com/nteetor" target="_blank" rel="noopener">@nteetor&lt;/a>,
&lt;a href="https://github.com/nzxwang" target="_blank" rel="noopener">@nzxwang&lt;/a>,
&lt;a href="https://github.com/oneilsh" target="_blank" rel="noopener">@oneilsh&lt;/a>,
&lt;a href="https://github.com/ozgen92" target="_blank" rel="noopener">@ozgen92&lt;/a>,
&lt;a href="https://github.com/patr1ckm" target="_blank" rel="noopener">@patr1ckm&lt;/a>,
&lt;a href="https://github.com/pbreheny" target="_blank" rel="noopener">@pbreheny&lt;/a>,
&lt;a href="https://github.com/pelotom" target="_blank" rel="noopener">@pelotom&lt;/a>,
&lt;a href="https://github.com/petersorensen" target="_blank" rel="noopener">@petersorensen&lt;/a>,
&lt;a href="https://github.com/philstraforelli" target="_blank" rel="noopener">@philstraforelli&lt;/a>,
&lt;a href="https://github.com/pkq" target="_blank" rel="noopener">@pkq&lt;/a>,
&lt;a href="https://github.com/pnolain" target="_blank" rel="noopener">@pnolain&lt;/a>,
&lt;a href="https://github.com/Pomido" target="_blank" rel="noopener">@Pomido&lt;/a>,
&lt;a href="https://github.com/powestermark" target="_blank" rel="noopener">@powestermark&lt;/a>,
&lt;a href="https://github.com/pscheid92" target="_blank" rel="noopener">@pscheid92&lt;/a>,
&lt;a href="https://github.com/pschloss" target="_blank" rel="noopener">@pschloss&lt;/a>,
&lt;a href="https://github.com/ptoche" target="_blank" rel="noopener">@ptoche&lt;/a>,
&lt;a href="https://github.com/qinzhu" target="_blank" rel="noopener">@qinzhu&lt;/a>,
&lt;a href="https://github.com/QuentinRoy" target="_blank" rel="noopener">@QuentinRoy&lt;/a>,
&lt;a href="https://github.com/R180" target="_blank" rel="noopener">@R180&lt;/a>,
&lt;a href="https://github.com/ractingmatrix" target="_blank" rel="noopener">@ractingmatrix&lt;/a>,
&lt;a href="https://github.com/RafaRafa" target="_blank" rel="noopener">@RafaRafa&lt;/a>,
&lt;a href="https://github.com/randomgambit" target="_blank" rel="noopener">@randomgambit&lt;/a>,
&lt;a href="https://github.com/raubreywhite" target="_blank" rel="noopener">@raubreywhite&lt;/a>,
&lt;a href="https://github.com/RawanRadi" target="_blank" rel="noopener">@RawanRadi&lt;/a>,
&lt;a href="https://github.com/ray-p144" target="_blank" rel="noopener">@ray-p144&lt;/a>,
&lt;a href="https://github.com/RegalPlatypus" target="_blank" rel="noopener">@RegalPlatypus&lt;/a>,
&lt;a href="https://github.com/Rekyt" target="_blank" rel="noopener">@Rekyt&lt;/a>,
&lt;a href="https://github.com/RemmyGuo" target="_blank" rel="noopener">@RemmyGuo&lt;/a>,
&lt;a href="https://github.com/ReneMalenfant" target="_blank" rel="noopener">@ReneMalenfant&lt;/a>,
&lt;a href="https://github.com/renozao" target="_blank" rel="noopener">@renozao&lt;/a>,
&lt;a href="https://github.com/restonslacker" target="_blank" rel="noopener">@restonslacker&lt;/a>,
&lt;a href="https://github.com/rlionheart92" target="_blank" rel="noopener">@rlionheart92&lt;/a>,
&lt;a href="https://github.com/rmatev" target="_blank" rel="noopener">@rmatev&lt;/a>,
&lt;a href="https://github.com/rmatkins" target="_blank" rel="noopener">@rmatkins&lt;/a>,
&lt;a href="https://github.com/rmheiberger" target="_blank" rel="noopener">@rmheiberger&lt;/a>,
&lt;a href="https://github.com/RMHogervorst" target="_blank" rel="noopener">@RMHogervorst&lt;/a>,
&lt;a href="https://github.com/Robinlovelace" target="_blank" rel="noopener">@Robinlovelace&lt;/a>,
&lt;a href="https://github.com/RoelVerbelen" target="_blank" rel="noopener">@RoelVerbelen&lt;/a>,
&lt;a href="https://github.com/rohan-shah" target="_blank" rel="noopener">@rohan-shah&lt;/a>,
&lt;a href="https://github.com/rpruim" target="_blank" rel="noopener">@rpruim&lt;/a>,
&lt;a href="https://github.com/ruaridhw" target="_blank" rel="noopener">@ruaridhw&lt;/a>,
&lt;a href="https://github.com/Ryo-N7" target="_blank" rel="noopener">@Ryo-N7&lt;/a>,
&lt;a href="https://github.com/sabinfos" target="_blank" rel="noopener">@sabinfos&lt;/a>,
&lt;a href="https://github.com/sachinbanugariya" target="_blank" rel="noopener">@sachinbanugariya&lt;/a>,
&lt;a href="https://github.com/sahirbhatnagar" target="_blank" rel="noopener">@sahirbhatnagar&lt;/a>,
&lt;a href="https://github.com/salauer" target="_blank" rel="noopener">@salauer&lt;/a>,
&lt;a href="https://github.com/sathishsrinivasank" target="_blank" rel="noopener">@sathishsrinivasank&lt;/a>,
&lt;a href="https://github.com/saudiwin" target="_blank" rel="noopener">@saudiwin&lt;/a>,
&lt;a href="https://github.com/schloerke" target="_blank" rel="noopener">@schloerke&lt;/a>,
&lt;a href="https://github.com/seancaodo" target="_blank" rel="noopener">@seancaodo&lt;/a>,
&lt;a href="https://github.com/setempler" target="_blank" rel="noopener">@setempler&lt;/a>,
&lt;a href="https://github.com/sfirke" target="_blank" rel="noopener">@sfirke&lt;/a>,
&lt;a href="https://github.com/sgoodm8" target="_blank" rel="noopener">@sgoodm8&lt;/a>,
&lt;a href="https://github.com/shippy" target="_blank" rel="noopener">@shippy&lt;/a>,
&lt;a href="https://github.com/skanskan" target="_blank" rel="noopener">@skanskan&lt;/a>,
&lt;a href="https://github.com/slowkow" target="_blank" rel="noopener">@slowkow&lt;/a>,
&lt;a href="https://github.com/smouksassi" target="_blank" rel="noopener">@smouksassi&lt;/a>,
&lt;a href="https://github.com/SomeUser999" target="_blank" rel="noopener">@SomeUser999&lt;/a>,
&lt;a href="https://github.com/space-echo" target="_blank" rel="noopener">@space-echo&lt;/a>,
&lt;a href="https://github.com/statkclee" target="_blank" rel="noopener">@statkclee&lt;/a>,
&lt;a href="https://github.com/statsandthings" target="_blank" rel="noopener">@statsandthings&lt;/a>,
&lt;a href="https://github.com/statsccpr" target="_blank" rel="noopener">@statsccpr&lt;/a>,
&lt;a href="https://github.com/sTeamTraen" target="_blank" rel="noopener">@sTeamTraen&lt;/a>,
&lt;a href="https://github.com/stefanedwards" target="_blank" rel="noopener">@stefanedwards&lt;/a>,
&lt;a href="https://github.com/stephankraut" target="_blank" rel="noopener">@stephankraut&lt;/a>,
&lt;a href="https://github.com/SteveMillard" target="_blank" rel="noopener">@SteveMillard&lt;/a>,
&lt;a href="https://github.com/stla" target="_blank" rel="noopener">@stla&lt;/a>,
&lt;a href="https://github.com/svannoy" target="_blank" rel="noopener">@svannoy&lt;/a>,
&lt;a href="https://github.com/swimmingsand" target="_blank" rel="noopener">@swimmingsand&lt;/a>,
&lt;a href="https://github.com/taraskaduk" target="_blank" rel="noopener">@taraskaduk&lt;/a>,
&lt;a href="https://github.com/tbradley1013" target="_blank" rel="noopener">@tbradley1013&lt;/a>,
&lt;a href="https://github.com/tdhock" target="_blank" rel="noopener">@tdhock&lt;/a>,
&lt;a href="https://github.com/Thieffen" target="_blank" rel="noopener">@Thieffen&lt;/a>,
&lt;a href="https://github.com/ThierryO" target="_blank" rel="noopener">@ThierryO&lt;/a>,
&lt;a href="https://github.com/thjwong" target="_blank" rel="noopener">@thjwong&lt;/a>,
&lt;a href="https://github.com/thk686" target="_blank" rel="noopener">@thk686&lt;/a>,
&lt;a href="https://github.com/thomashauner" target="_blank" rel="noopener">@thomashauner&lt;/a>,
&lt;a href="https://github.com/thomaskvalnes" target="_blank" rel="noopener">@thomaskvalnes&lt;/a>,
&lt;a href="https://github.com/thomasp85" target="_blank" rel="noopener">@thomasp85&lt;/a>,
&lt;a href="https://github.com/thvasilo" target="_blank" rel="noopener">@thvasilo&lt;/a>,
&lt;a href="https://github.com/tiernanmartin" target="_blank" rel="noopener">@tiernanmartin&lt;/a>,
&lt;a href="https://github.com/timgoodman" target="_blank" rel="noopener">@timgoodman&lt;/a>,
&lt;a href="https://github.com/timothyslau" target="_blank" rel="noopener">@timothyslau&lt;/a>,
&lt;a href="https://github.com/tingtingben" target="_blank" rel="noopener">@tingtingben&lt;/a>,
&lt;a href="https://github.com/tjmahr" target="_blank" rel="noopener">@tjmahr&lt;/a>,
&lt;a href="https://github.com/toouggy" target="_blank" rel="noopener">@toouggy&lt;/a>,
&lt;a href="https://github.com/topepo" target="_blank" rel="noopener">@topepo&lt;/a>,
&lt;a href="https://github.com/traversc" target="_blank" rel="noopener">@traversc&lt;/a>,
&lt;a href="https://github.com/truemoid" target="_blank" rel="noopener">@truemoid&lt;/a>,
&lt;a href="https://github.com/tungmilan" target="_blank" rel="noopener">@tungmilan&lt;/a>,
&lt;a href="https://github.com/Tutuchan" target="_blank" rel="noopener">@Tutuchan&lt;/a>,
&lt;a href="https://github.com/tzoltak" target="_blank" rel="noopener">@tzoltak&lt;/a>,
&lt;a href="https://github.com/ulo" target="_blank" rel="noopener">@ulo&lt;/a>,
&lt;a href="https://github.com/UweBlock" target="_blank" rel="noopener">@UweBlock&lt;/a>,
&lt;a href="https://github.com/vadimus202" target="_blank" rel="noopener">@vadimus202&lt;/a>,
&lt;a href="https://github.com/VectorPosse" target="_blank" rel="noopener">@VectorPosse&lt;/a>,
&lt;a href="https://github.com/VikrantDogra" target="_blank" rel="noopener">@VikrantDogra&lt;/a>,
&lt;a href="https://github.com/vnijs" target="_blank" rel="noopener">@vnijs&lt;/a>,
&lt;a href="https://github.com/wch" target="_blank" rel="noopener">@wch&lt;/a>,
&lt;a href="https://github.com/wdsteck" target="_blank" rel="noopener">@wdsteck&lt;/a>,
&lt;a href="https://github.com/WHMan" target="_blank" rel="noopener">@WHMan&lt;/a>,
&lt;a href="https://github.com/wibeasley" target="_blank" rel="noopener">@wibeasley&lt;/a>,
&lt;a href="https://github.com/wkristan" target="_blank" rel="noopener">@wkristan&lt;/a>,
&lt;a href="https://github.com/woodwards" target="_blank" rel="noopener">@woodwards&lt;/a>,
&lt;a href="https://github.com/wpetry" target="_blank" rel="noopener">@wpetry&lt;/a>,
&lt;a href="https://github.com/wxlu718" target="_blank" rel="noopener">@wxlu718&lt;/a>,
&lt;a href="https://github.com/xhdong-umd" target="_blank" rel="noopener">@xhdong-umd&lt;/a>,
&lt;a href="https://github.com/yeedle" target="_blank" rel="noopener">@yeedle&lt;/a>,
&lt;a href="https://github.com/yonicd" target="_blank" rel="noopener">@yonicd&lt;/a>,
&lt;a href="https://github.com/yutannihilation" target="_blank" rel="noopener">@yutannihilation&lt;/a>,
&lt;a href="https://github.com/zeehio" target="_blank" rel="noopener">@zeehio&lt;/a>,
&lt;a href="https://github.com/zhenglei-gao" target="_blank" rel="noopener">@zhenglei-gao&lt;/a>,
&lt;a href="https://github.com/zlskidmore" target="_blank" rel="noopener">@zlskidmore&lt;/a>,
&lt;a href="https://github.com/ZoidbergIII" target="_blank" rel="noopener">@ZoidbergIII&lt;/a>, and
&lt;a href="https://github.com/zz77zz" target="_blank" rel="noopener">@zz77zz&lt;/a>.&lt;/p></description></item><item><title>haven 1.1.2</title><link>https://www.tidyverse.org/blog/2018/06/haven-1-1-2/</link><pubDate>Thu, 28 Jun 2018 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2018/06/haven-1-1-2/</guid><description>
&lt;p>We are very pleased to announce the release of
&lt;a href="https://haven.tidyverse.org/">haven&lt;/a> 1.1.2. haven allows R to read and write various data formats used by other statistical packages: SAS, SPSS, and STATA. Below, we highlight a few of the updates and fixes. For a complete list of
changes, please see the &lt;a href="https://github.com/tidyverse/haven/blob/master/NEWS.md">release notes&lt;/a>.&lt;/p>
&lt;p>This version has improved handling for non-ASCII characters. haven can now
read and write non-ASCII paths in R 3.5, and &lt;code>write_dta()&lt;/code> now allows non-ASCII
variable labels for Stata versions 14 and above.&lt;/p>
&lt;p>&lt;code>read_sav()&lt;/code> now accepts &lt;code>.zsav&lt;/code> files; &lt;code>.zsav&lt;/code> files can be written with &lt;code>write_sav()&lt;/code> by setting &lt;code>compress = TRUE&lt;/code>.&lt;/p>
&lt;p>This release also incorporates updates from Evan Miller’s &lt;a href="https://github.com/WizardMac/ReadStat">ReadStat&lt;/a> C library, including the
ability to read and write Stata 15 files.&lt;/p>
&lt;div id="acknowledgements" class="section level2">
&lt;h2>Acknowledgements&lt;/h2>
&lt;p>Thank you to the 173 people who contributed issues, pull requests, and comments: &lt;a href="https://github.com/adeldaoud">@adeldaoud&lt;/a>, &lt;a href="https://github.com/afleishman">@afleishman&lt;/a>, &lt;a href="https://github.com/aftollefsen">@aftollefsen&lt;/a>, &lt;a href="https://github.com/aghaynes">@aghaynes&lt;/a>, &lt;a href="https://github.com/AHoerner">@AHoerner&lt;/a>, &lt;a href="https://github.com/ajdamico">@ajdamico&lt;/a>, &lt;a href="https://github.com/ajmazurie">@ajmazurie&lt;/a>, &lt;a href="https://github.com/akitepowell">@akitepowell&lt;/a>, &lt;a href="https://github.com/alawami">@alawami&lt;/a>, &lt;a href="https://github.com/alimanager">@alimanager&lt;/a>, &lt;a href="https://github.com/allitnils">@allitnils&lt;/a>, &lt;a href="https://github.com/AmyMikhail">@AmyMikhail&lt;/a>, &lt;a href="https://github.com/andrewheiss">@andrewheiss&lt;/a>, &lt;a href="https://github.com/anhqle">@anhqle&lt;/a>, &lt;a href="https://github.com/annennenne">@annennenne&lt;/a>, &lt;a href="https://github.com/anoopxaviour">@anoopxaviour&lt;/a>, &lt;a href="https://github.com/aszalucha">@aszalucha&lt;/a>, &lt;a href="https://github.com/austensen">@austensen&lt;/a>, &lt;a href="https://github.com/avallecam">@avallecam&lt;/a>, &lt;a href="https://github.com/awmercer">@awmercer&lt;/a>, &lt;a href="https://github.com/bamonroe">@bamonroe&lt;/a>, &lt;a href="https://github.com/batpigandme">@batpigandme&lt;/a>, &lt;a href="https://github.com/beamgau">@beamgau&lt;/a>, &lt;a href="https://github.com/beew">@beew&lt;/a>, &lt;a href="https://github.com/behrman">@behrman&lt;/a>, &lt;a href="https://github.com/BERENZ">@BERENZ&lt;/a>, &lt;a href="https://github.com/bethatkinson">@bethatkinson&lt;/a>, &lt;a href="https://github.com/billdenney">@billdenney&lt;/a>, &lt;a href="https://github.com/BobMuenchen">@BobMuenchen&lt;/a>, &lt;a href="https://github.com/BobTheScientist">@BobTheScientist&lt;/a>, &lt;a href="https://github.com/brianstamper">@brianstamper&lt;/a>, &lt;a href="https://github.com/BurninLeo">@BurninLeo&lt;/a>, &lt;a href="https://github.com/byandell">@byandell&lt;/a>, &lt;a href="https://github.com/carlganz">@carlganz&lt;/a>, &lt;a href="https://github.com/christophergandrud">@christophergandrud&lt;/a>, &lt;a href="https://github.com/cimentadaj">@cimentadaj&lt;/a>, &lt;a href="https://github.com/connorp">@connorp&lt;/a>, &lt;a href="https://github.com/crsh">@crsh&lt;/a>, &lt;a href="https://github.com/d4ff">@d4ff&lt;/a>, &lt;a href="https://github.com/dalewsteele">@dalewsteele&lt;/a>, &lt;a href="https://github.com/danhalligan">@danhalligan&lt;/a>, &lt;a href="https://github.com/davidjones-spartan">@davidjones-spartan&lt;/a>, &lt;a href="https://github.com/dbcuervo">@dbcuervo&lt;/a>, &lt;a href="https://github.com/dcava">@dcava&lt;/a>, &lt;a href="https://github.com/dchiu911">@dchiu911&lt;/a>, &lt;a href="https://github.com/Deleetdk">@Deleetdk&lt;/a>, &lt;a href="https://github.com/dennisfisher">@dennisfisher&lt;/a>, &lt;a href="https://github.com/dgromer">@dgromer&lt;/a>, &lt;a href="https://github.com/diogocp">@diogocp&lt;/a>, &lt;a href="https://github.com/DiogoFerrari">@DiogoFerrari&lt;/a>, &lt;a href="https://github.com/DominikMueller64">@DominikMueller64&lt;/a>, &lt;a href="https://github.com/donlelek">@donlelek&lt;/a>, &lt;a href="https://github.com/dramage1">@dramage1&lt;/a>, &lt;a href="https://github.com/drkamarul">@drkamarul&lt;/a>, &lt;a href="https://github.com/dsself">@dsself&lt;/a>, &lt;a href="https://github.com/dusadrian">@dusadrian&lt;/a>, &lt;a href="https://github.com/eborbath">@eborbath&lt;/a>, &lt;a href="https://github.com/ecortens">@ecortens&lt;/a>, &lt;a href="https://github.com/eddelbuettel">@eddelbuettel&lt;/a>, &lt;a href="https://github.com/ekstroem">@ekstroem&lt;/a>, &lt;a href="https://github.com/Enrico-Palazzo">@Enrico-Palazzo&lt;/a>, &lt;a href="https://github.com/evanmiller">@evanmiller&lt;/a>, &lt;a href="https://github.com/ewenharrison">@ewenharrison&lt;/a>, &lt;a href="https://github.com/eXcuvator">@eXcuvator&lt;/a>, &lt;a href="https://github.com/fhollenbach">@fhollenbach&lt;/a>, &lt;a href="https://github.com/filipwastberg">@filipwastberg&lt;/a>, &lt;a href="https://github.com/flaneuse">@flaneuse&lt;/a>, &lt;a href="https://github.com/fmerhout">@fmerhout&lt;/a>, &lt;a href="https://github.com/frankcsliu">@frankcsliu&lt;/a>, &lt;a href="https://github.com/g3o2">@g3o2&lt;/a>, &lt;a href="https://github.com/gabrakadabra">@gabrakadabra&lt;/a>, &lt;a href="https://github.com/gbiele">@gbiele&lt;/a>, &lt;a href="https://github.com/GeoBer">@GeoBer&lt;/a>, &lt;a href="https://github.com/gergness">@gergness&lt;/a>, &lt;a href="https://github.com/ghost">@ghost&lt;/a>, &lt;a href="https://github.com/gitrman">@gitrman&lt;/a>, &lt;a href="https://github.com/gorcha">@gorcha&lt;/a>, &lt;a href="https://github.com/h2appy">@h2appy&lt;/a>, &lt;a href="https://github.com/hadley">@hadley&lt;/a>, &lt;a href="https://github.com/HanjoStudy">@HanjoStudy&lt;/a>, &lt;a href="https://github.com/harrysouthworth">@harrysouthworth&lt;/a>, &lt;a href="https://github.com/huashan">@huashan&lt;/a>, &lt;a href="https://github.com/huftis">@huftis&lt;/a>, &lt;a href="https://github.com/imanuelcostigan">@imanuelcostigan&lt;/a>, &lt;a href="https://github.com/itsdalmo">@itsdalmo&lt;/a>, &lt;a href="https://github.com/izahn">@izahn&lt;/a>, &lt;a href="https://github.com/jandraor">@jandraor&lt;/a>, &lt;a href="https://github.com/JanMarvin">@JanMarvin&lt;/a>, &lt;a href="https://github.com/jaohar">@jaohar&lt;/a>, &lt;a href="https://github.com/jdjohn215">@jdjohn215&lt;/a>, &lt;a href="https://github.com/jemus42">@jemus42&lt;/a>, &lt;a href="https://github.com/jeremiahsb">@jeremiahsb&lt;/a>, &lt;a href="https://github.com/Jiang-Li">@Jiang-Li&lt;/a>, &lt;a href="https://github.com/jjchern">@jjchern&lt;/a>, &lt;a href="https://github.com/JKPeck">@JKPeck&lt;/a>, &lt;a href="https://github.com/jlegewie">@jlegewie&lt;/a>, &lt;a href="https://github.com/jllipatz">@jllipatz&lt;/a>, &lt;a href="https://github.com/jmurray1022">@jmurray1022&lt;/a>, &lt;a href="https://github.com/johngoldin">@johngoldin&lt;/a>, &lt;a href="https://github.com/jon-mellon">@jon-mellon&lt;/a>, &lt;a href="https://github.com/joshash">@joshash&lt;/a>, &lt;a href="https://github.com/jtchittenden">@jtchittenden&lt;/a>, &lt;a href="https://github.com/karldw">@karldw&lt;/a>, &lt;a href="https://github.com/kendonB">@kendonB&lt;/a>, &lt;a href="https://github.com/kkumari1">@kkumari1&lt;/a>, &lt;a href="https://github.com/krlmlr">@krlmlr&lt;/a>, &lt;a href="https://github.com/kuriwaki">@kuriwaki&lt;/a>, &lt;a href="https://github.com/kwenzig">@kwenzig&lt;/a>, &lt;a href="https://github.com/larmarange">@larmarange&lt;/a>, &lt;a href="https://github.com/leeper">@leeper&lt;/a>, &lt;a href="https://github.com/lepennec">@lepennec&lt;/a>, &lt;a href="https://github.com/lionel-">@lionel-&lt;/a>, &lt;a href="https://github.com/lucasmation">@lucasmation&lt;/a>, &lt;a href="https://github.com/m-dinardo">@m-dinardo&lt;/a>, &lt;a href="https://github.com/m-sostero">@m-sostero&lt;/a>, &lt;a href="https://github.com/marciz">@marciz&lt;/a>, &lt;a href="https://github.com/mariev">@mariev&lt;/a>, &lt;a href="https://github.com/mariusbarth">@mariusbarth&lt;/a>, &lt;a href="https://github.com/markriseley">@markriseley&lt;/a>, &lt;a href="https://github.com/mbojan">@mbojan&lt;/a>, &lt;a href="https://github.com/methodds">@methodds&lt;/a>, &lt;a href="https://github.com/mfansler">@mfansler&lt;/a>, &lt;a href="https://github.com/MichaelChirico">@MichaelChirico&lt;/a>, &lt;a href="https://github.com/michaelwhammer">@michaelwhammer&lt;/a>, &lt;a href="https://github.com/mikmart">@mikmart&lt;/a>, &lt;a href="https://github.com/mlaviolet">@mlaviolet&lt;/a>, &lt;a href="https://github.com/ncdingari">@ncdingari&lt;/a>, &lt;a href="https://github.com/nickbloom">@nickbloom&lt;/a>, &lt;a href="https://github.com/NilsEnevoldsen">@NilsEnevoldsen&lt;/a>, &lt;a href="https://github.com/njanetos">@njanetos&lt;/a>, &lt;a href="https://github.com/NoahMarconi">@NoahMarconi&lt;/a>, &lt;a href="https://github.com/nunsuch123">@nunsuch123&lt;/a>, &lt;a href="https://github.com/otoomet">@otoomet&lt;/a>, &lt;a href="https://github.com/pkq">@pkq&lt;/a>, &lt;a href="https://github.com/Plebejer">@Plebejer&lt;/a>, &lt;a href="https://github.com/prashantj">@prashantj&lt;/a>, &lt;a href="https://github.com/protogeezer">@protogeezer&lt;/a>, &lt;a href="https://github.com/rbirkelbach">@rbirkelbach&lt;/a>, &lt;a href="https://github.com/reikoch">@reikoch&lt;/a>, &lt;a href="https://github.com/rgayler">@rgayler&lt;/a>, &lt;a href="https://github.com/Rnngmk">@Rnngmk&lt;/a>, &lt;a href="https://github.com/robkar">@robkar&lt;/a>, &lt;a href="https://github.com/rogerjdeangelis">@rogerjdeangelis&lt;/a>, &lt;a href="https://github.com/rpruim">@rpruim&lt;/a>, &lt;a href="https://github.com/rubenarslan">@rubenarslan&lt;/a>, &lt;a href="https://github.com/salim-b">@salim-b&lt;/a>, &lt;a href="https://github.com/sargdavid">@sargdavid&lt;/a>, &lt;a href="https://github.com/sasutils">@sasutils&lt;/a>, &lt;a href="https://github.com/sfirke">@sfirke&lt;/a>, &lt;a href="https://github.com/sjkiss">@sjkiss&lt;/a>, &lt;a href="https://github.com/sjpierce">@sjpierce&lt;/a>, &lt;a href="https://github.com/sjPlot">@sjPlot&lt;/a>, &lt;a href="https://github.com/skanskan">@skanskan&lt;/a>, &lt;a href="https://github.com/statsccpr">@statsccpr&lt;/a>, &lt;a href="https://github.com/stefanmr">@stefanmr&lt;/a>, &lt;a href="https://github.com/steveniorfa">@steveniorfa&lt;/a>, &lt;a href="https://github.com/strengejacke">@strengejacke&lt;/a>, &lt;a href="https://github.com/stupersyn">@stupersyn&lt;/a>, &lt;a href="https://github.com/the-knife">@the-knife&lt;/a>, &lt;a href="https://github.com/thomasjwood">@thomasjwood&lt;/a>, &lt;a href="https://github.com/tidyx">@tidyx&lt;/a>, &lt;a href="https://github.com/tklebel">@tklebel&lt;/a>, &lt;a href="https://github.com/TUFFERST">@TUFFERST&lt;/a>, &lt;a href="https://github.com/tzoltak">@tzoltak&lt;/a>, &lt;a href="https://github.com/vate01">@vate01&lt;/a>, &lt;a href="https://github.com/vinhdizzo">@vinhdizzo&lt;/a>, &lt;a href="https://github.com/wbuchanan">@wbuchanan&lt;/a>, &lt;a href="https://github.com/wds15">@wds15&lt;/a>, &lt;a href="https://github.com/wepelham3">@wepelham3&lt;/a>, &lt;a href="https://github.com/withr">@withr&lt;/a>, &lt;a href="https://github.com/xinluwang">@xinluwang&lt;/a>, &lt;a href="https://github.com/yimingli">@yimingli&lt;/a>, and &lt;a href="https://github.com/yonicd">@yonicd&lt;/a>.&lt;/p>
&lt;/div></description></item><item><title>The tidyverse is for EDA, not packages</title><link>https://www.tidyverse.org/blog/2018/06/tidyverse-not-for-packages/</link><pubDate>Wed, 20 Jun 2018 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2018/06/tidyverse-not-for-packages/</guid><description>
&lt;p>A couple of months back, we sent out the following email to the maintainers of
packages on CRAN with &lt;a href="http://tidyverse.tidyverse.org/">tidyverse&lt;/a> listed in
either Depends, Imports, or Suggests:&lt;/p>
&lt;blockquote>
&lt;p>Dear &lt;code>{maintainer}&lt;/code>,&lt;/p>
&lt;p>As of &lt;code>{date}&lt;/code>, your package, &lt;code>{package_name}&lt;/code>, lists the tidyverse package in
either Depends, Imports, or Suggests on CRAN.&lt;/p>
&lt;p>Because the tidyverse is a set of packages designed for interactive data
analysis, this is, in short, a bad idea. The tidyverse package includes a
substantial number of direct and indirect dependencies (79 packages, as of this
writing), many of which are likely unnecessary for the purposes of your package.
Furthermore, the CRAN maintainers frown upon depending on it, which can cause
hassle for you down the line.&lt;/p>
&lt;p>If you could please correct this by importing functions from, suggesting,
or depending on the tidyverse component packages you require at your nearest
convenience, it would be most appreciated.&lt;/p>
&lt;p>Please let us know if you have any questions.&lt;/p>
&lt;p>Thank you,&lt;/p>
Hadley Wickham&lt;br />
c/o Mara Averick
&lt;/blockquote></description></item><item><title>dplyr 0.7.5</title><link>https://www.tidyverse.org/blog/2018/06/dplyr-0.7.5/</link><pubDate>Wed, 06 Jun 2018 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2018/06/dplyr-0.7.5/</guid><description>
&lt;p>We’re excited to announce version 0.7.5 of the &lt;em>dplyr&lt;/em> package, the grammar of data manipulation in the tidyverse. This minor release includes the move to &lt;em>tidyselect&lt;/em>, features like scoped operations on grouped data frames and support for raw vectors, and a number of bug fixes. Please see the &lt;a href="https://github.com/tidyverse/dplyr/releases/tag/v0.7.5">release notes&lt;/a> for the full list of improvements and bug fixes.&lt;/p>
&lt;p>The next planned release of &lt;em>dplyr&lt;/em>, for which work has already started, will be a feature release. Many of the features are available in the development version.&lt;/p>
&lt;div id="tidyselect" class="section level2">
&lt;h2>tidyselect&lt;/h2>
&lt;p>&lt;em>dplyr&lt;/em> always supported selecting by name, excluding columns, selecting by range, by match, or by position:&lt;/p>
&lt;pre class="r">&lt;code>tbl &amp;lt;- data.frame(a1 = 1, a2 = 2, a3 = 3, b = &amp;quot;x&amp;quot;)
tbl %&amp;gt;%
select(a1, a2)&lt;/code>&lt;/pre>
&lt;pre class="knitr r">&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> a1 a2
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> 1 1 2
&lt;/span>&lt;/pre>
&lt;pre class="r">&lt;code>tbl %&amp;gt;%
select(-b)&lt;/code>&lt;/pre>
&lt;pre class="knitr r">&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> a1 a2 a3
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> 1 1 2 3
&lt;/span>&lt;/pre>
&lt;pre class="r">&lt;code>tbl %&amp;gt;%
select(a1:a3)&lt;/code>&lt;/pre>
&lt;pre class="knitr r">&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> a1 a2 a3
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> 1 1 2 3
&lt;/span>&lt;/pre>
&lt;pre class="r">&lt;code>tbl %&amp;gt;%
select(starts_with(&amp;quot;a&amp;quot;))&lt;/code>&lt;/pre>
&lt;pre class="knitr r">&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> a1 a2 a3
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> 1 1 2 3
&lt;/span>&lt;/pre>
&lt;pre class="r">&lt;code>tbl %&amp;gt;%
select(2:4)&lt;/code>&lt;/pre>
&lt;pre class="knitr r">&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> a2 a3 b
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> 1 2 3 x
&lt;/span>&lt;/pre>
&lt;pre class="r">&lt;code>vars &amp;lt;- syms(c(&amp;quot;a2&amp;quot;, &amp;quot;b&amp;quot;))
tbl %&amp;gt;%
select(!!!vars)&lt;/code>&lt;/pre>
&lt;pre class="knitr r">&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> a2 b
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> 1 2 x
&lt;/span>&lt;/pre>
&lt;p>Last year, the core code that provides this functionality was moved out of &lt;em>dplyr&lt;/em> into the fairly new &lt;em>tidyselect&lt;/em> package. Selecting columns in a data frame (or items in a character vector, for that matter) is a common task in many other situations. The &lt;em>tidyselect&lt;/em> package offers a consistent and convenient interface with full support for quasiquotation, and is used by more than 20 packages, and now also by &lt;em>dplyr&lt;/em>. Internally, the &lt;code>select()&lt;/code> calls above are translated into the following &lt;em>tidyselect&lt;/em> operations:&lt;/p>
&lt;pre class="r">&lt;code>tbl_names &amp;lt;- names(tbl)
tbl_names %&amp;gt;%
tidyselect::vars_select(a1, a2)&lt;/code>&lt;/pre>
&lt;pre class="knitr r">&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> a1 a2
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> "a1" "a2"
&lt;/span>&lt;/pre>
&lt;pre class="r">&lt;code>tbl_names %&amp;gt;%
tidyselect::vars_select(-b)&lt;/code>&lt;/pre>
&lt;pre class="knitr r">&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> a1 a2 a3
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> "a1" "a2" "a3"
&lt;/span>&lt;/pre>
&lt;pre class="r">&lt;code>tbl_names %&amp;gt;%
tidyselect::vars_select(a1:a3)&lt;/code>&lt;/pre>
&lt;pre class="knitr r">&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> a1 a2 a3
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> "a1" "a2" "a3"
&lt;/span>&lt;/pre>
&lt;pre class="r">&lt;code>tbl_names %&amp;gt;%
tidyselect::vars_select(starts_with(&amp;quot;a&amp;quot;))&lt;/code>&lt;/pre>
&lt;pre class="knitr r">&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> a1 a2 a3
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> "a1" "a2" "a3"
&lt;/span>&lt;/pre>
&lt;pre class="r">&lt;code>tbl_names %&amp;gt;%
tidyselect::vars_select(2:4)&lt;/code>&lt;/pre>
&lt;pre class="knitr r">&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> a2 a3 b
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> "a2" "a3" "b"
&lt;/span>&lt;/pre>
&lt;pre class="r">&lt;code>vars &amp;lt;- syms(c(&amp;quot;a2&amp;quot;, &amp;quot;b&amp;quot;))
tbl_names %&amp;gt;%
tidyselect::vars_select(!!!vars)&lt;/code>&lt;/pre>
&lt;pre class="knitr r">&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> a2 b
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> "a2" "b"
&lt;/span>&lt;/pre>
&lt;p>The net effect of this change is improved consistency across the tidyverse and the other packages that use &lt;em>tidyselect&lt;/em>. The user interface is affected in two ways:&lt;/p>
&lt;ul>
&lt;li>&lt;p>The &lt;code>select_vars()&lt;/code>, &lt;code>select_var()&lt;/code> and &lt;code>rename_vars()&lt;/code> functions are soft-deprecated and will start issuing warnings in a future version. Instead, use &lt;code>tidyselect::vars_select()&lt;/code>, &lt;code>tidyselect::vars_pull()&lt;/code> and &lt;code>tidyselect::vars_rename()&lt;/code>, respectively.&lt;/p>&lt;/li>
&lt;li>&lt;p>&lt;code>select()&lt;/code> and &lt;code>rename()&lt;/code> fully support character vectors. You can now unquote variables like this:&lt;/p>
&lt;pre class="r">&lt;code>vars &amp;lt;- c(&amp;quot;a2&amp;quot;, &amp;quot;b&amp;quot;)
select(tbl, !!vars)&lt;/code>&lt;/pre>
&lt;pre class="knitr r">&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> a2 b
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> 1 2 x
&lt;/span>&lt;/pre>
&lt;pre class="r">&lt;code>select(tbl, -(!!vars))&lt;/code>&lt;/pre>
&lt;pre class="knitr r">&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> a1 a3
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> 1 1 3
&lt;/span>&lt;/pre>&lt;/li>
&lt;/ul>
&lt;/div>
&lt;div id="scoped-verbs-for-grouped-data" class="section level2">
&lt;h2>Scoped verbs for grouped data&lt;/h2>
&lt;p>Scoped verbs are useful when you want to apply the same operation on multiple columns. These functions end with &lt;code>_all&lt;/code> (affect all columns), &lt;code>_at&lt;/code> (affect selected columns), or &lt;code>_if&lt;/code> (affect columns that satisfy a predicate), and replaced the older &lt;code>_each&lt;/code> family of functions in &lt;em>dplyr&lt;/em> 0.7.0. In the most recent version of &lt;em>dplyr&lt;/em>, these functions have been extended to work on grouped data frames. Because the group columns need to stay unchanged, these operations work slightly differently on grouped data frames:&lt;/p>
&lt;ul>
&lt;li>&lt;p>In &lt;code>select_*()&lt;/code>, the group columns are always kept.&lt;/p>
&lt;pre class="r">&lt;code>grouped_iris &amp;lt;-
iris %&amp;gt;%
group_by(Species) %&amp;gt;%
slice(1:2)
grouped_iris %&amp;gt;%
select_if(funs(is.numeric))&lt;/code>&lt;/pre>
&lt;pre class="knitr r">&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;'># A tibble: 6 x 5&lt;/span>&lt;span>
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;'># Groups: Species [3]&lt;/span>&lt;span>
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>Species&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>Sepal.Length&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>Sepal.Width&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>Petal.Length&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>Petal.Width&lt;/span>&lt;span>
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;fct&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;span>
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;'>1&lt;/span>&lt;span> setosa 5.1 3.5 1.4 0.2
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;'>2&lt;/span>&lt;span> setosa 4.9 3 1.4 0.2
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;'>3&lt;/span>&lt;span> versicolor 7 3.2 4.7 1.4
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;'>4&lt;/span>&lt;span> versicolor 6.4 3.2 4.5 1.5
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;'>5&lt;/span>&lt;span> virginica 6.3 3.3 6 2.5
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;'>6&lt;/span>&lt;span> virginica 5.8 2.7 5.1 1.9
&lt;/span>&lt;/pre>&lt;/li>
&lt;li>&lt;p>In &lt;code>mutate_*()&lt;/code> and &lt;code>transmute_*()&lt;/code>, group columns are never altered:&lt;/p>
&lt;pre class="r">&lt;code>grouped_iris %&amp;gt;%
mutate_all(funs(. + 1))&lt;/code>&lt;/pre>
&lt;pre class="knitr r">&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;'># A tibble: 6 x 5&lt;/span>&lt;span>
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;'># Groups: Species [3]&lt;/span>&lt;span>
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>Sepal.Length&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>Sepal.Width&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>Petal.Length&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>Petal.Width&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>Species&lt;/span>&lt;span>
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;fct&amp;gt;&lt;/span>&lt;span>
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;'>1&lt;/span>&lt;span> 6.1 4.5 2.4 1.2 setosa
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;'>2&lt;/span>&lt;span> 5.9 4 2.4 1.2 setosa
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;'>3&lt;/span>&lt;span> 8 4.2 5.7 2.4 versicolor
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;'>4&lt;/span>&lt;span> 7.4 4.2 5.5 2.5 versicolor
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;'>5&lt;/span>&lt;span> 7.3 4.3 7 3.5 virginica
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;'>6&lt;/span>&lt;span> 6.8 3.7 6.1 2.9 virginica
&lt;/span>&lt;/pre>&lt;/li>
&lt;li>&lt;p>&lt;code>filter_...()&lt;/code> currently includes group columns:&lt;/p>
&lt;pre class="r">&lt;code>grouped_iris %&amp;gt;%
filter_if(funs(is.numeric), all_vars(. &amp;gt; 1))&lt;/code>&lt;/pre>
&lt;pre class="knitr r">&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;'># A tibble: 4 x 5&lt;/span>&lt;span>
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;'># Groups: Species [2]&lt;/span>&lt;span>
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>Sepal.Length&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>Sepal.Width&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>Petal.Length&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>Petal.Width&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>Species&lt;/span>&lt;span>
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;fct&amp;gt;&lt;/span>&lt;span>
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;'>1&lt;/span>&lt;span> 7 3.2 4.7 1.4 versicolor
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;'>2&lt;/span>&lt;span> 6.4 3.2 4.5 1.5 versicolor
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;'>3&lt;/span>&lt;span> 6.3 3.3 6 2.5 virginica
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;'>4&lt;/span>&lt;span> 5.8 2.7 5.1 1.9 virginica
&lt;/span>&lt;/pre>&lt;/li>
&lt;li>&lt;p>&lt;code>arrange_...()&lt;/code> ignores group columns:&lt;/p>
&lt;pre class="r">&lt;code>grouped_iris %&amp;gt;%
arrange_all()&lt;/code>&lt;/pre>
&lt;pre class="knitr r">&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;'># A tibble: 6 x 5&lt;/span>&lt;span>
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;'># Groups: Species [3]&lt;/span>&lt;span>
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>Sepal.Length&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>Sepal.Width&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>Petal.Length&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>Petal.Width&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>Species&lt;/span>&lt;span>
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;dbl&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;fct&amp;gt;&lt;/span>&lt;span>
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;'>1&lt;/span>&lt;span> 4.9 3 1.4 0.2 setosa
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;'>2&lt;/span>&lt;span> 5.1 3.5 1.4 0.2 setosa
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;'>3&lt;/span>&lt;span> 5.8 2.7 5.1 1.9 virginica
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;'>4&lt;/span>&lt;span> 6.3 3.3 6 2.5 virginica
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;'>5&lt;/span>&lt;span> 6.4 3.2 4.5 1.5 versicolor
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;'>6&lt;/span>&lt;span> 7 3.2 4.7 1.4 versicolor
&lt;/span>&lt;/pre>&lt;/li>
&lt;/ul>
&lt;/div>
&lt;div id="raw-vectors" class="section level2">
&lt;h2>Raw vectors&lt;/h2>
&lt;p>The &lt;code>raw&lt;/code> data type is a first-class citizen in R’s type system, but has been somewhat neglected in &lt;em>dplyr&lt;/em> so far. In this version of &lt;em>dplyr&lt;/em> you can compute on that data type:&lt;/p>
&lt;pre class="r">&lt;code>raw_tbl &amp;lt;- tibble(a = 1:3, b = as.raw(1:3))
raw_tbl %&amp;gt;%
filter(b &amp;lt; 2)&lt;/code>&lt;/pre>
&lt;pre class="knitr r">&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;'># A tibble: 1 x 2&lt;/span>&lt;span>
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>a&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>b&lt;/span>&lt;span>
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;int&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;raw&amp;gt;&lt;/span>&lt;span>
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;'>1&lt;/span>&lt;span> 1 01
&lt;/span>&lt;/pre>
&lt;pre class="r">&lt;code>raw_tbl %&amp;gt;%
arrange(desc(b))&lt;/code>&lt;/pre>
&lt;pre class="knitr r">&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;'># A tibble: 3 x 2&lt;/span>&lt;span>
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>a&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>b&lt;/span>&lt;span>
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;int&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;raw&amp;gt;&lt;/span>&lt;span>
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;'>1&lt;/span>&lt;span> 3 03
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;'>2&lt;/span>&lt;span> 2 02
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;'>3&lt;/span>&lt;span> 1 01
&lt;/span>&lt;/pre>
&lt;pre class="r">&lt;code>all_equal(raw_tbl, slice(raw_tbl, 3:1))&lt;/code>&lt;/pre>
&lt;pre class="knitr r">&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> [1] TRUE
&lt;/span>&lt;/pre>
&lt;pre class="r">&lt;code>left_join(slice(raw_tbl, 1:2), slice(raw_tbl, 2:3), by = &amp;quot;b&amp;quot;)&lt;/code>&lt;/pre>
&lt;pre class="knitr r">&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;'># A tibble: 2 x 3&lt;/span>&lt;span>
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>a.x&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>b&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>a.y&lt;/span>&lt;span>
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;int&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;raw&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;int&amp;gt;&lt;/span>&lt;span>
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;'>1&lt;/span>&lt;span> 1 01 &lt;/span>&lt;span style='color: #BB0000;'>NA&lt;/span>&lt;span>
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;'>2&lt;/span>&lt;span> 2 02 2
&lt;/span>&lt;/pre>
&lt;p>Be aware that &lt;code>raw&lt;/code> doesn’t know an &lt;code>NA&lt;/code> value, the result of a join may be surprising.&lt;/p>
&lt;pre class="r">&lt;code>left_join(slice(raw_tbl, 1:2), slice(raw_tbl, 2:3), by = &amp;quot;a&amp;quot;)&lt;/code>&lt;/pre>
&lt;pre class="knitr r">&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;'># A tibble: 2 x 3&lt;/span>&lt;span>
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>a&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>b.x&lt;/span>&lt;span> &lt;/span>&lt;span style='font-weight: bold;'>b.y&lt;/span>&lt;span>
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;int&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;raw&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;font-style: italic;'>&amp;lt;raw&amp;gt;&lt;/span>&lt;span>
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;'>1&lt;/span>&lt;span> 1 01 00
&lt;/span>&lt;span style='color: #555555;'>#&amp;gt;&lt;/span>&lt;span> &lt;/span>&lt;span style='color: #555555;'>2&lt;/span>&lt;span> 2 02 02
&lt;/span>&lt;/pre>
&lt;/div>
&lt;div id="welcome-back-romain" class="section level2">
&lt;h2>Welcome back Romain&lt;/h2>
&lt;p>Romain François, the author of the data frame backend for &lt;em>dplyr&lt;/em>, has joined the team and hit the ground running. He has implemented many of the features described in this blog post, and is now focused on features of the next release.&lt;/p>
&lt;p>The next release involves substantial refactoring of the internals to make hybrid evaluation simpler and less surprising, a new implementation of grouping that better respects levels of factors, and redesign of the grouping metadata to replace the current collection of attributes by a single tidy tibble. This is ambitious work, it is great to have Romain on board to tackle it.&lt;/p>
&lt;p>Welcome (back), Romain, looking forward to a great time!&lt;/p>
&lt;/div>
&lt;div id="acknowledgments" class="section level2">
&lt;h2>Acknowledgments&lt;/h2>
&lt;p>Thanks to all contributors to &lt;em>dplyr&lt;/em>, your feedback helps make this package better and easier to use: &lt;a href="https://github.com/2533245542">@2533245542&lt;/a>, &lt;a href="https://github.com/aammd">@aammd&lt;/a>, &lt;a href="https://github.com/ablack3">@ablack3&lt;/a>, &lt;a href="https://github.com/adder">@adder&lt;/a>, &lt;a href="https://github.com/AHoerner">@AHoerner&lt;/a>, &lt;a href="https://github.com/AjarKeen">@AjarKeen&lt;/a>, &lt;a href="https://github.com/ajay-d">@ajay-d&lt;/a>, &lt;a href="https://github.com/alexfun">@alexfun&lt;/a>, &lt;a href="https://github.com/alexhallam">@alexhallam&lt;/a>, &lt;a href="https://github.com/alexiglaser">@alexiglaser&lt;/a>, &lt;a href="https://github.com/AljazJ">@AljazJ&lt;/a>, &lt;a href="https://github.com/amjiuzi">@amjiuzi&lt;/a>, &lt;a href="https://github.com/andreaspano">@andreaspano&lt;/a>, &lt;a href="https://github.com/AndreMikulec">@AndreMikulec&lt;/a>, &lt;a href="https://github.com/andresimi">@andresimi&lt;/a>, &lt;a href="https://github.com/andrewjpfeiffer">@andrewjpfeiffer&lt;/a>, &lt;a href="https://github.com/anescalc">@anescalc&lt;/a>, &lt;a href="https://github.com/AngryR11">@AngryR11&lt;/a>, &lt;a href="https://github.com/apreshill">@apreshill&lt;/a>, &lt;a href="https://github.com/aswan89">@aswan89&lt;/a>, &lt;a href="https://github.com/Athospd">@Athospd&lt;/a>, &lt;a href="https://github.com/aurelberra">@aurelberra&lt;/a>, &lt;a href="https://github.com/austensen">@austensen&lt;/a>, &lt;a href="https://github.com/baileych">@baileych&lt;/a>, &lt;a href="https://github.com/batpigandme">@batpigandme&lt;/a>, &lt;a href="https://github.com/behrman">@behrman&lt;/a>, &lt;a href="https://github.com/benmarwick">@benmarwick&lt;/a>, &lt;a href="https://github.com/bensoltoff">@bensoltoff&lt;/a>, &lt;a href="https://github.com/bheavner">@bheavner&lt;/a>, &lt;a href="https://github.com/bigmw">@bigmw&lt;/a>, &lt;a href="https://github.com/billdenney">@billdenney&lt;/a>, &lt;a href="https://github.com/bilydr">@bilydr&lt;/a>, &lt;a href="https://github.com/BishtDinesh">@BishtDinesh&lt;/a>, &lt;a href="https://github.com/bjornerstedt">@bjornerstedt&lt;/a>, &lt;a href="https://github.com/bkkkk">@bkkkk&lt;/a>, &lt;a href="https://github.com/bobokdalibor">@bobokdalibor&lt;/a>, &lt;a href="https://github.com/brendanf">@brendanf&lt;/a>, &lt;a href="https://github.com/brianstamper">@brianstamper&lt;/a>, &lt;a href="https://github.com/briglass">@briglass&lt;/a>, &lt;a href="https://github.com/brooke-watson">@brooke-watson&lt;/a>, &lt;a href="https://github.com/capelastegui">@capelastegui&lt;/a>, &lt;a href="https://github.com/cderv">@cderv&lt;/a>, &lt;a href="https://github.com/CerebralMastication">@CerebralMastication&lt;/a>, &lt;a href="https://github.com/ChadEfaw">@ChadEfaw&lt;/a>, &lt;a href="https://github.com/ChiWPak">@ChiWPak&lt;/a>, &lt;a href="https://github.com/chrnin">@chrnin&lt;/a>, &lt;a href="https://github.com/chunjiw">@chunjiw&lt;/a>, &lt;a href="https://github.com/cipherz">@cipherz&lt;/a>, &lt;a href="https://github.com/cjyetman">@cjyetman&lt;/a>, &lt;a href="https://github.com/ckarras">@ckarras&lt;/a>, &lt;a href="https://github.com/cmhh">@cmhh&lt;/a>, &lt;a href="https://github.com/cnjr2">@cnjr2&lt;/a>, &lt;a href="https://github.com/colearendt">@colearendt&lt;/a>, &lt;a href="https://github.com/ColinFay">@ColinFay&lt;/a>, &lt;a href="https://github.com/coloneltriq">@coloneltriq&lt;/a>, &lt;a href="https://github.com/congdanh8391">@congdanh8391&lt;/a>, &lt;a href="https://github.com/coolbutuseless">@coolbutuseless&lt;/a>, &lt;a href="https://github.com/copernican">@copernican&lt;/a>, &lt;a href="https://github.com/courtiol">@courtiol&lt;/a>, &lt;a href="https://github.com/cperk">@cperk&lt;/a>, &lt;a href="https://github.com/cturbelin">@cturbelin&lt;/a>, &lt;a href="https://github.com/cuttlefish44">@cuttlefish44&lt;/a>, &lt;a href="https://github.com/daattali">@daattali&lt;/a>, &lt;a href="https://github.com/dadwalrajiv">@dadwalrajiv&lt;/a>, &lt;a href="https://github.com/dan87134">@dan87134&lt;/a>, &lt;a href="https://github.com/danielcanueto">@danielcanueto&lt;/a>, &lt;a href="https://github.com/danielmcauley">@danielmcauley&lt;/a>, &lt;a href="https://github.com/danielsjf">@danielsjf&lt;/a>, &lt;a href="https://github.com/danishahmadamu">@danishahmadamu&lt;/a>, &lt;a href="https://github.com/dantonnoriega">@dantonnoriega&lt;/a>, &lt;a href="https://github.com/darrkj">@darrkj&lt;/a>, &lt;a href="https://github.com/DasHammett">@DasHammett&lt;/a>, &lt;a href="https://github.com/DataStrategist">@DataStrategist&lt;/a>, &lt;a href="https://github.com/DataWookie">@DataWookie&lt;/a>, &lt;a href="https://github.com/davharris">@davharris&lt;/a>, &lt;a href="https://github.com/davidkane9">@davidkane9&lt;/a>, &lt;a href="https://github.com/DavisVaughan">@DavisVaughan&lt;/a>, &lt;a href="https://github.com/deeenes">@deeenes&lt;/a>, &lt;a href="https://github.com/deymos314">@deymos314&lt;/a>, &lt;a href="https://github.com/dgromer">@dgromer&lt;/a>, &lt;a href="https://github.com/dhicks">@dhicks&lt;/a>, &lt;a href="https://github.com/djbirke">@djbirke&lt;/a>, &lt;a href="https://github.com/dkincaid">@dkincaid&lt;/a>, &lt;a href="https://github.com/donaldmusgrove">@donaldmusgrove&lt;/a>, &lt;a href="https://github.com/dpeterson71">@dpeterson71&lt;/a>, &lt;a href="https://github.com/dpolychr">@dpolychr&lt;/a>, &lt;a href="https://github.com/dpprdan">@dpprdan&lt;/a>, &lt;a href="https://github.com/drf5n">@drf5n&lt;/a>, &lt;a href="https://github.com/dustindall">@dustindall&lt;/a>, &lt;a href="https://github.com/eamoncaddigan">@eamoncaddigan&lt;/a>, &lt;a href="https://github.com/earthcli">@earthcli&lt;/a>, &lt;a href="https://github.com/echasnovski">@echasnovski&lt;/a>, &lt;a href="https://github.com/econandrew">@econandrew&lt;/a>, &lt;a href="https://github.com/EconomiCurtis">@EconomiCurtis&lt;/a>, &lt;a href="https://github.com/edgararuiz">@edgararuiz&lt;/a>, &lt;a href="https://github.com/eduardgrebe">@eduardgrebe&lt;/a>, &lt;a href="https://github.com/edublancas">@edublancas&lt;/a>, &lt;a href="https://github.com/EdwardJRoss">@EdwardJRoss&lt;/a>, &lt;a href="https://github.com/edwindj">@edwindj&lt;/a>, &lt;a href="https://github.com/EdwinTh">@EdwinTh&lt;/a>, &lt;a href="https://github.com/edzer">@edzer&lt;/a>, &lt;a href="https://github.com/elben10">@elben10&lt;/a>, &lt;a href="https://github.com/EmilRehnberg">@EmilRehnberg&lt;/a>, &lt;a href="https://github.com/emilyriederer">@emilyriederer&lt;/a>, &lt;a href="https://github.com/enesn">@enesn&lt;/a>, &lt;a href="https://github.com/erikerhardt">@erikerhardt&lt;/a>, &lt;a href="https://github.com/etiennebr">@etiennebr&lt;/a>, &lt;a href="https://github.com/evanbiederstedt">@evanbiederstedt&lt;/a>, &lt;a href="https://github.com/filipefilardi">@filipefilardi&lt;/a>, &lt;a href="https://github.com/flying-sheep">@flying-sheep&lt;/a>, &lt;a href="https://github.com/fmichonneau">@fmichonneau&lt;/a>, &lt;a href="https://github.com/fnamugera">@fnamugera&lt;/a>, &lt;a href="https://github.com/foo-bar-baz-qux">@foo-bar-baz-qux&lt;/a>, &lt;a href="https://github.com/foundinblank">@foundinblank&lt;/a>, &lt;a href="https://github.com/fpmcardoso">@fpmcardoso&lt;/a>, &lt;a href="https://github.com/Fredo-XVII">@Fredo-XVII&lt;/a>, &lt;a href="https://github.com/gadenbuie">@gadenbuie&lt;/a>, &lt;a href="https://github.com/ganong123">@ganong123&lt;/a>, &lt;a href="https://github.com/garrettgman">@garrettgman&lt;/a>, &lt;a href="https://github.com/GeorgeRJacobs">@GeorgeRJacobs&lt;/a>, &lt;a href="https://github.com/ggrothendieck">@ggrothendieck&lt;/a>, &lt;a href="https://github.com/ghaarsma">@ghaarsma&lt;/a>, &lt;a href="https://github.com/gireeshkbogu">@gireeshkbogu&lt;/a>, &lt;a href="https://github.com/greg-botwin">@greg-botwin&lt;/a>, &lt;a href="https://github.com/gtumuluri">@gtumuluri&lt;/a>, &lt;a href="https://github.com/GuillaumePressiat">@GuillaumePressiat&lt;/a>, &lt;a href="https://github.com/halpo">@halpo&lt;/a>, &lt;a href="https://github.com/hameddashti">@hameddashti&lt;/a>, &lt;a href="https://github.com/hannesmuehleisen">@hannesmuehleisen&lt;/a>, &lt;a href="https://github.com/happyfishyqy">@happyfishyqy&lt;/a>, &lt;a href="https://github.com/happyshows">@happyshows&lt;/a>, &lt;a href="https://github.com/harryzyming">@harryzyming&lt;/a>, &lt;a href="https://github.com/hdelrio">@hdelrio&lt;/a>, &lt;a href="https://github.com/heavywatal">@heavywatal&lt;/a>, &lt;a href="https://github.com/Henrik-P">@Henrik-P&lt;/a>, &lt;a href="https://github.com/homerhanumat">@homerhanumat&lt;/a>, &lt;a href="https://github.com/Hong-Revo">@Hong-Revo&lt;/a>, &lt;a href="https://github.com/HuangRicky">@HuangRicky&lt;/a>, &lt;a href="https://github.com/huftis">@huftis&lt;/a>, &lt;a href="https://github.com/hughjonesd">@hughjonesd&lt;/a>, &lt;a href="https://github.com/iangow">@iangow&lt;/a>, &lt;a href="https://github.com/ijlyttle">@ijlyttle&lt;/a>, &lt;a href="https://github.com/ilyaminati">@ilyaminati&lt;/a>, &lt;a href="https://github.com/iron0012">@iron0012&lt;/a>, &lt;a href="https://github.com/itcarroll">@itcarroll&lt;/a>, &lt;a href="https://github.com/jabranham">@jabranham&lt;/a>, &lt;a href="https://github.com/Jafet">@Jafet&lt;/a>, &lt;a href="https://github.com/jakefrost">@jakefrost&lt;/a>, &lt;a href="https://github.com/jalsalam">@jalsalam&lt;/a>, &lt;a href="https://github.com/jamesthurgood34">@jamesthurgood34&lt;/a>, &lt;a href="https://github.com/jarauh">@jarauh&lt;/a>, &lt;a href="https://github.com/jarekj71">@jarekj71&lt;/a>, &lt;a href="https://github.com/jarodmeng">@jarodmeng&lt;/a>, &lt;a href="https://github.com/JasonAizkalns">@JasonAizkalns&lt;/a>, &lt;a href="https://github.com/jasperDD">@jasperDD&lt;/a>, &lt;a href="https://github.com/javierluraschi">@javierluraschi&lt;/a>, &lt;a href="https://github.com/jbao">@jbao&lt;/a>, &lt;a href="https://github.com/jcfisher">@jcfisher&lt;/a>, &lt;a href="https://github.com/jcheng5">@jcheng5&lt;/a>, &lt;a href="https://github.com/jennybc">@jennybc&lt;/a>, &lt;a href="https://github.com/jerryfuyu0104">@jerryfuyu0104&lt;/a>, &lt;a href="https://github.com/jerryzhujian9">@jerryzhujian9&lt;/a>, &lt;a href="https://github.com/jessekps">@jessekps&lt;/a>, &lt;a href="https://github.com/jfcharney">@jfcharney&lt;/a>, &lt;a href="https://github.com/jgellar">@jgellar&lt;/a>, &lt;a href="https://github.com/jhofman">@jhofman&lt;/a>, &lt;a href="https://github.com/jianboli">@jianboli&lt;/a>, &lt;a href="https://github.com/jimvine">@jimvine&lt;/a>, &lt;a href="https://github.com/jjacks12">@jjacks12&lt;/a>, &lt;a href="https://github.com/jjchern">@jjchern&lt;/a>, &lt;a href="https://github.com/JLYJabc">@JLYJabc&lt;/a>, &lt;a href="https://github.com/jnolis">@jnolis&lt;/a>, &lt;a href="https://github.com/joelgombin">@joelgombin&lt;/a>, &lt;a href="https://github.com/JohnMount">@JohnMount&lt;/a>, &lt;a href="https://github.com/jonocarroll">@jonocarroll&lt;/a>, &lt;a href="https://github.com/josnarog">@josnarog&lt;/a>, &lt;a href="https://github.com/jrosen48">@jrosen48&lt;/a>, &lt;a href="https://github.com/jrubinstein">@jrubinstein&lt;/a>, &lt;a href="https://github.com/jschelbert">@jschelbert&lt;/a>, &lt;a href="https://github.com/jtelleriar">@jtelleriar&lt;/a>, &lt;a href="https://github.com/jthurner">@jthurner&lt;/a>, &lt;a href="https://github.com/jtrecenti">@jtrecenti&lt;/a>, &lt;a href="https://github.com/juliangkr">@juliangkr&lt;/a>, &lt;a href="https://github.com/jwhendy">@jwhendy&lt;/a>, &lt;a href="https://github.com/jwnorman">@jwnorman&lt;/a>, &lt;a href="https://github.com/karldw">@karldw&lt;/a>, &lt;a href="https://github.com/KasperSkytte">@KasperSkytte&lt;/a>, &lt;a href="https://github.com/kdaily">@kdaily&lt;/a>, &lt;a href="https://github.com/kerry-ja">@kerry-ja&lt;/a>, &lt;a href="https://github.com/ketansahils">@ketansahils&lt;/a>, &lt;a href="https://github.com/kevinykuo">@kevinykuo&lt;/a>, &lt;a href="https://github.com/kforner">@kforner&lt;/a>, &lt;a href="https://github.com/klmr">@klmr&lt;/a>, &lt;a href="https://github.com/knbknb">@knbknb&lt;/a>, &lt;a href="https://github.com/knokknok">@knokknok&lt;/a>, &lt;a href="https://github.com/Koantig">@Koantig&lt;/a>, &lt;a href="https://github.com/komalsrathi">@komalsrathi&lt;/a>, &lt;a href="https://github.com/konny0201">@konny0201&lt;/a>, &lt;a href="https://github.com/kravhowe">@kravhowe&lt;/a>, &lt;a href="https://github.com/kylebarron">@kylebarron&lt;/a>, &lt;a href="https://github.com/kylelundstedt">@kylelundstedt&lt;/a>, &lt;a href="https://github.com/larmarange">@larmarange&lt;/a>, &lt;a href="https://github.com/lawremi">@lawremi&lt;/a>, &lt;a href="https://github.com/lbakerIsazi">@lbakerIsazi&lt;/a>, &lt;a href="https://github.com/lepennec">@lepennec&lt;/a>, &lt;a href="https://github.com/leungi">@leungi&lt;/a>, &lt;a href="https://github.com/lgautier">@lgautier&lt;/a>, &lt;a href="https://github.com/lhunsicker">@lhunsicker&lt;/a>, &lt;a href="https://github.com/lindesaysh">@lindesaysh&lt;/a>, &lt;a href="https://github.com/lionel-">@lionel-&lt;/a>, &lt;a href="https://github.com/lmullen">@lmullen&lt;/a>, &lt;a href="https://github.com/Lopa2016">@Lopa2016&lt;/a>, &lt;a href="https://github.com/lorenzwalthert">@lorenzwalthert&lt;/a>, &lt;a href="https://github.com/lukeholman">@lukeholman&lt;/a>, &lt;a href="https://github.com/MargaretJones">@MargaretJones&lt;/a>, &lt;a href="https://github.com/markvanderloo">@markvanderloo&lt;/a>, &lt;a href="https://github.com/Marlein">@Marlein&lt;/a>, &lt;a href="https://github.com/mathematiguy">@mathematiguy&lt;/a>, &lt;a href="https://github.com/matsuobasho">@matsuobasho&lt;/a>, &lt;a href="https://github.com/mattbaggott">@mattbaggott&lt;/a>, &lt;a href="https://github.com/matthieugomez">@matthieugomez&lt;/a>, &lt;a href="https://github.com/MatthieuStigler">@MatthieuStigler&lt;/a>, &lt;a href="https://github.com/md0u80c9">@md0u80c9&lt;/a>, &lt;a href="https://github.com/mdancho84">@mdancho84&lt;/a>, &lt;a href="https://github.com/mdlincoln">@mdlincoln&lt;/a>, &lt;a href="https://github.com/metanoid">@metanoid&lt;/a>, &lt;a href="https://github.com/mgirlich">@mgirlich&lt;/a>, &lt;a href="https://github.com/michaellevy">@michaellevy&lt;/a>, &lt;a href="https://github.com/mienkoja">@mienkoja&lt;/a>, &lt;a href="https://github.com/mikldk">@mikldk&lt;/a>, &lt;a href="https://github.com/mine-cetinkaya-rundel">@mine-cetinkaya-rundel&lt;/a>, &lt;a href="https://github.com/mkirzon">@mkirzon&lt;/a>, &lt;a href="https://github.com/mkwiecinski">@mkwiecinski&lt;/a>, &lt;a href="https://github.com/mlell">@mlell&lt;/a>, &lt;a href="https://github.com/moodymudskipper">@moodymudskipper&lt;/a>, &lt;a href="https://github.com/mr-majkel">@mr-majkel&lt;/a>, &lt;a href="https://github.com/mredaelli">@mredaelli&lt;/a>, &lt;a href="https://github.com/mrkowalski">@mrkowalski&lt;/a>, &lt;a href="https://github.com/msberends">@msberends&lt;/a>, &lt;a href="https://github.com/msgoussi">@msgoussi&lt;/a>, &lt;a href="https://github.com/mtmorgan">@mtmorgan&lt;/a>, &lt;a href="https://github.com/mungojam">@mungojam&lt;/a>, &lt;a href="https://github.com/mwillumz">@mwillumz&lt;/a>, &lt;a href="https://github.com/my-katie">@my-katie&lt;/a>, &lt;a href="https://github.com/MZLABS">@MZLABS&lt;/a>, &lt;a href="https://github.com/nachocab">@nachocab&lt;/a>, &lt;a href="https://github.com/nc6">@nc6&lt;/a>, &lt;a href="https://github.com/neelrakholia">@neelrakholia&lt;/a>, &lt;a href="https://github.com/Nick-Rivera">@Nick-Rivera&lt;/a>, &lt;a href="https://github.com/nickbond">@nickbond&lt;/a>, &lt;a href="https://github.com/nilescbn">@nilescbn&lt;/a>, &lt;a href="https://github.com/OssiLehtinen">@OssiLehtinen&lt;/a>, &lt;a href="https://github.com/otoomet">@otoomet&lt;/a>, &lt;a href="https://github.com/otsaw">@otsaw&lt;/a>, &lt;a href="https://github.com/pachamaltese">@pachamaltese&lt;/a>, &lt;a href="https://github.com/paulponcet">@paulponcet&lt;/a>, &lt;a href="https://github.com/petehobo">@petehobo&lt;/a>, &lt;a href="https://github.com/PeterBolo">@PeterBolo&lt;/a>, &lt;a href="https://github.com/pgensler">@pgensler&lt;/a>, &lt;a href="https://github.com/phirsch">@phirsch&lt;/a>, &lt;a href="https://github.com/piccolbo">@piccolbo&lt;/a>, &lt;a href="https://github.com/pierucci">@pierucci&lt;/a>, &lt;a href="https://github.com/potterzot">@potterzot&lt;/a>, &lt;a href="https://github.com/profdave">@profdave&lt;/a>, &lt;a href="https://github.com/Prometheus77">@Prometheus77&lt;/a>, &lt;a href="https://github.com/pssguy">@pssguy&lt;/a>, &lt;a href="https://github.com/QuentinRoy">@QuentinRoy&lt;/a>, &lt;a href="https://github.com/ramongallego">@ramongallego&lt;/a>, &lt;a href="https://github.com/rappster">@rappster&lt;/a>, &lt;a href="https://github.com/rasmusrhl">@rasmusrhl&lt;/a>, &lt;a href="https://github.com/rebeccaferrell">@rebeccaferrell&lt;/a>, &lt;a href="https://github.com/renlund">@renlund&lt;/a>, &lt;a href="https://github.com/rgknight">@rgknight&lt;/a>, &lt;a href="https://github.com/RickPack">@RickPack&lt;/a>, &lt;a href="https://github.com/ringprince">@ringprince&lt;/a>, &lt;a href="https://github.com/rkrug">@rkrug&lt;/a>, &lt;a href="https://github.com/rtaph">@rtaph&lt;/a>, &lt;a href="https://github.com/rundel">@rundel&lt;/a>, &lt;a href="https://github.com/russellpierce">@russellpierce&lt;/a>, &lt;a href="https://github.com/s-geissler">@s-geissler&lt;/a>, &lt;a href="https://github.com/saberbouabid">@saberbouabid&lt;/a>, &lt;a href="https://github.com/salim-b">@salim-b&lt;/a>, &lt;a href="https://github.com/sammcq">@sammcq&lt;/a>, &lt;a href="https://github.com/sandan">@sandan&lt;/a>, &lt;a href="https://github.com/saurfang">@saurfang&lt;/a>, &lt;a href="https://github.com/SeabassWells">@SeabassWells&lt;/a>, &lt;a href="https://github.com/sfirke">@sfirke&lt;/a>, &lt;a href="https://github.com/shizidushu">@shizidushu&lt;/a>, &lt;a href="https://github.com/shntnu">@shntnu&lt;/a>, &lt;a href="https://github.com/sibojan">@sibojan&lt;/a>, &lt;a href="https://github.com/Sidt1">@Sidt1&lt;/a>, &lt;a href="https://github.com/simonthelwall">@simonthelwall&lt;/a>, &lt;a href="https://github.com/skranz">@skranz&lt;/a>, &lt;a href="https://github.com/sollano">@sollano&lt;/a>, &lt;a href="https://github.com/spedygiorgio">@spedygiorgio&lt;/a>, &lt;a href="https://github.com/srlivingstone">@srlivingstone&lt;/a>, &lt;a href="https://github.com/stephlocke">@stephlocke&lt;/a>, &lt;a href="https://github.com/steromano">@steromano&lt;/a>, &lt;a href="https://github.com/stevenfazzio">@stevenfazzio&lt;/a>, &lt;a href="https://github.com/strengejacke">@strengejacke&lt;/a>, &lt;a href="https://github.com/stufield">@stufield&lt;/a>, &lt;a href="https://github.com/SulevR">@SulevR&lt;/a>, &lt;a href="https://github.com/sz-cgt">@sz-cgt&lt;/a>, &lt;a href="https://github.com/t-kalinowski">@t-kalinowski&lt;/a>, &lt;a href="https://github.com/takahisah">@takahisah&lt;/a>, &lt;a href="https://github.com/thomascwells">@thomascwells&lt;/a>, &lt;a href="https://github.com/thomasp85">@thomasp85&lt;/a>, &lt;a href="https://github.com/timothyslau">@timothyslau&lt;/a>, &lt;a href="https://github.com/tobiasgerstenberg">@tobiasgerstenberg&lt;/a>, &lt;a href="https://github.com/topepo">@topepo&lt;/a>, &lt;a href="https://github.com/tslumley">@tslumley&lt;/a>, &lt;a href="https://github.com/tvedebrink">@tvedebrink&lt;/a>, &lt;a href="https://github.com/twolodzko">@twolodzko&lt;/a>, &lt;a href="https://github.com/tzoltak">@tzoltak&lt;/a>, &lt;a href="https://github.com/VikrantDogra">@VikrantDogra&lt;/a>, &lt;a href="https://github.com/VincentGuyader">@VincentGuyader&lt;/a>, &lt;a href="https://github.com/vitallish">@vitallish&lt;/a>, &lt;a href="https://github.com/vjcitn">@vjcitn&lt;/a>, &lt;a href="https://github.com/vnijs">@vnijs&lt;/a>, &lt;a href="https://github.com/vpanfilov">@vpanfilov&lt;/a>, &lt;a href="https://github.com/vspinu">@vspinu&lt;/a>, &lt;a href="https://github.com/washcycle">@washcycle&lt;/a>, &lt;a href="https://github.com/WaterworthD">@WaterworthD&lt;/a>, &lt;a href="https://github.com/wch">@wch&lt;/a>, &lt;a href="https://github.com/wenbostar">@wenbostar&lt;/a>, &lt;a href="https://github.com/wodsworth">@wodsworth&lt;/a>, &lt;a href="https://github.com/xuefliang">@xuefliang&lt;/a>, &lt;a href="https://github.com/youcc">@youcc&lt;/a>, &lt;a href="https://github.com/yutannihilation">@yutannihilation&lt;/a>, &lt;a href="https://github.com/zeehio">@zeehio&lt;/a>, &lt;a href="https://github.com/zenggyu">@zenggyu&lt;/a>, &lt;a href="https://github.com/zhangchuck">@zhangchuck&lt;/a>, and &lt;a href="https://github.com/zx8754">@zx8754&lt;/a>&lt;/p>
&lt;/div></description></item><item><title>ggplot2 2.3.0 — upcoming release</title><link>https://www.tidyverse.org/blog/2018/05/ggplot2-2-3-0/</link><pubDate>Mon, 21 May 2018 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2018/05/ggplot2-2-3-0/</guid><description>&lt;p>A new release of ggplot2 (2.3.0) is on the horizon, and we&amp;rsquo;d love to have people
try it out, give us feedback, and
&lt;a href="https://github.com/tidyverse/ggplot2/issues" target="_blank" rel="noopener">report issues&lt;/a>
before we submit it to CRAN. This version is the culmination of over a year and
a half of development, not all of which will be captured here. So, please see
&lt;a href="https://github.com/tidyverse/ggplot2/blob/master/NEWS.md" target="_blank" rel="noopener">NEWS&lt;/a> for a fuller
account of updates and changes.&lt;/p>
&lt;p>In addition to highlighting a few features and improvements, we also want to
share a bit about our release-preparation process for ggplot2, which has over
2,000 reverse dependencies.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="c1"># install.packages(&amp;#34;devtools&amp;#34;)&lt;/span>
&lt;span class="n">devtools&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="nf">install_github&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;tidyverse/ggplot2&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>If needed, you can restore the release version by installing from CRAN:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">install.packages&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ggplot2&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;h2 id="breaking-changes">Breaking changes
&lt;a href="#breaking-changes">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>
&lt;h3 id="our-process">Our process
&lt;a href="#our-process">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>Regression testing, visual and otherwise, allows us to keep track of changes
throughout the development process. Before submitting an update to CRAN,
we need to ensure that the packages that depend on ours still pass &lt;code>R CMD check&lt;/code>, and inform reverse-dependency maintainers in the event that they do not.&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>
We use
&lt;a href="https://github.com/r-lib/revdepcheck" target="_blank" rel="noopener">revdepcheck&lt;/a> to help automate this
process, and distinguish between &amp;ldquo;false positives&amp;rdquo; (pre-existing failures), and
issues introduced in the development version of your package.&lt;/p>
&lt;p>At this point, we begin to manually examine the failures. &amp;ldquo;Newly broken&amp;rdquo; issues
are extracted from the problems report and put into a Google sheet where (with
the great help of Thomas Lin Pedersen, Claus Wilke, and Kara Woo) we identified
clusters of errors to tackle. For example, 97 packages returned a warning due
to a namespace clash between &lt;code>dplyr::vars()&lt;/code> and &lt;code>ggplot2::vars()&lt;/code>. That’s
something we clearly need to fix, so we open an
&lt;a href="https://github.com/tidyverse/ggplot2/issues/2585" target="_blank" rel="noopener">issue&lt;/a> to track progress.&lt;/p>
&lt;p>Where reverse-dependency errors result from a deliberate design change, we
collect &amp;ldquo;symptomatic&amp;rdquo; error messages, and (hopefully) fixes to offer the
maintainers of affected packages. These go in the &amp;ldquo;Breaking changes&amp;rdquo; section of
the NEWS file, so that if you encounter a new error you can easily search for
the error message and find the resolution. Because ggplot2 is an old and much
used package, we try to keep breaking changes to a minimum. However, sometimes
we deem it important to make a change that break existing code. Typically this
is for one of two reasons:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>We discover that code that previously appeared to work was actually hiding a
potential error. For example, in this version of ggplot2 we ensure that input
data frames don’t have duplicate column names. Previously ggplot2 just took the
first column with a name, which might have concealed a bug.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>We decided that it’s worth breaking a small amount of existing code in the
interests of improving future code. For example, this version of ggplot2 adds
support for
&lt;a href="https://github.com/tidyverse/ggplot2/blob/master/NEWS.md#tidy-evaluation" target="_blank" rel="noopener">tidy evaluation&lt;/a>
making ggplot2 more compatible with the rest of the tidyverse. This breaks a
small number of packages that use ggplot2 but should affect very little data
analysis code, so we decided that it was worth it.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="what-to-do-if-you-run-into-a-breaking-change">What to do if you run into a breaking change
&lt;a href="#what-to-do-if-you-run-into-a-breaking-change">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>If you run into an error when running code that works with ggplot2
2.2.1 (the version on CRAN as of this writing), you should look for it in the
&lt;a href="https://github.com/tidyverse/ggplot2/blob/master/NEWS.md#breaking-changes" target="_blank" rel="noopener">&amp;ldquo;Breaking changes&amp;rdquo;&lt;/a>
section of news. If you &lt;em>can&amp;rsquo;t&lt;/em> find it in the news, please file an issue -
either it&amp;rsquo;s an inadvertent change, or we need to describe it better in the news
(or make it easier to find when searching for keywords). As per usual, please
do a search of
&lt;a href="https://github.com/tidyverse/ggplot2/issues" target="_blank" rel="noopener">existing issues&lt;/a>
before filing a new one to avoid duplication.&lt;/p>
&lt;p>You can also ask for help in
&lt;a href="https://community.rstudio.com/" target="_blank" rel="noopener">community.rstudio.com&lt;/a>.&lt;/p>
&lt;h2 id="new-features">New features
&lt;a href="#new-features">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>
&lt;h3 id="tidy-evaluation">Tidy evaluation
&lt;a href="#tidy-evaluation">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>You can now use quasiquotation in &lt;code>aes()&lt;/code>, &lt;code>facet_wrap()&lt;/code>, and &lt;code>facet_grid()&lt;/code>.
To support quasiquotation in facetting we&amp;rsquo;ve added a new helper that works
similarly to &lt;code>aes()&lt;/code>: &lt;code>vars()&lt;/code>, short for variables, and instead of
&lt;code>facet_grid(x + y ~ a + b)&lt;/code> you can now write &lt;code>facet_grid(vars(x, y), vars(a, b))&lt;/code>.
The formula interface won&amp;rsquo;t go away; but the new &lt;code>vars()&lt;/code> interface should be
much easier to program with.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">x_var&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">quo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">wt&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">y_var&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">quo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mpg&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="n">group_var&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">quo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cyl&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mtcars&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nf">aes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">!!&lt;/span>&lt;span class="n">x_var&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">!!&lt;/span>&lt;span class="n">y_var&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_point&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">facet_wrap&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">vars&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">!!&lt;/span>&lt;span class="n">group_var&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2018-05-ggplot2-2-3-0_files/figure-html/label-both-1.png" width="2100" />&lt;/p>
&lt;h3 id="sf">sf
&lt;a href="#sf">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>ggplot2 now has full support for simple features through
&lt;a href="https://r-spatial.github.io/sf/" target="_blank" rel="noopener">sf&lt;/a> using &lt;code>geom_sf()&lt;/code> and &lt;code>coord_sf()&lt;/code>; it now
automatically aligns CRS across layers, sets up the correct aspect ratio, and
draws a graticule.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">nc&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="n">sf&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="nf">st_read&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">system.file&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;shape/nc.shp&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">package&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;sf&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1">#&amp;gt; Reading layer `nc&amp;#39; from data source `/Library/Frameworks/R.framework/Versions/3.4/Resources/library/sf/shape/nc.shp&amp;#39; using driver `ESRI Shapefile&amp;#39;&lt;/span>
&lt;span class="c1">#&amp;gt; Simple feature collection with 100 features and 14 fields&lt;/span>
&lt;span class="c1">#&amp;gt; geometry type: MULTIPOLYGON&lt;/span>
&lt;span class="c1">#&amp;gt; dimension: XY&lt;/span>
&lt;span class="c1">#&amp;gt; bbox: xmin: -84.32385 ymin: 33.88199 xmax: -75.45698 ymax: 36.58965&lt;/span>
&lt;span class="c1">#&amp;gt; epsg (SRID): 4267&lt;/span>
&lt;span class="c1">#&amp;gt; proj4string: +proj=longlat +datum=NAD27 +no_defs&lt;/span>
&lt;span class="nf">ggplot&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nc&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">geom_sf&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">+&lt;/span>
&lt;span class="nf">annotate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;point&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">-80&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">35&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">colour&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;red&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">size&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.tidyverse.org/articles/2018-05-ggplot2-2-3-0_files/figure-html/sf-1.png" width="2100" />&lt;/p>
&lt;h3 id="calculated-aesthetics">Calculated aesthetics
&lt;a href="#calculated-aesthetics">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>The new &lt;code>stat()&lt;/code> function offers a cleaner, and better-documented syntax for
calculated-aesthetic variables. This replaces the older approach of surrounding
the variable name with &lt;code>...&lt;/code>. Instead of using &lt;code>aes(y = ..count..)&lt;/code>, you can use
&lt;code>aes(y = stat(count))&lt;/code>.&lt;/p>
&lt;p>This is particularly nice for more complex calculations, as &lt;code>stat()&lt;/code> only needs
to be specified once; e.g. &lt;code>aes(y = stat(count / max(count)))&lt;/code> rather than
&lt;code>aes(y = ..count.. / max(..count..))&lt;/code>.&lt;/p>
&lt;h3 id="viridis">Viridis
&lt;a href="#viridis">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h3>&lt;p>Several new functions have been added to make it easy to use Viridis colour
scales: &lt;code>scale_colour_viridis_c()&lt;/code> and &lt;code>scale_fill_viridis_c()&lt;/code> for continuous,
and &lt;code>scale_colour_viridis_d()&lt;/code> and &lt;code>scale_fill_viridis_d()&lt;/code> for discrete.
Viridis is also now used as the default colour and fill scale for ordered
factors.&lt;/p>
&lt;h2 id="and-more">And more&amp;hellip;
&lt;a href="#and-more">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>There are several other improvements, which will be described in further detail
once the ggplot 2.3.0 is released on CRAN (currently targeted for June 25th).
For now, please kick the tires and let us know what you think!&lt;/p>
&lt;section class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1" role="doc-endnote">
&lt;p>
&lt;a href="https://cran.r-project.org/web/packages/policies.html" target="_blank" rel="noopener">CRAN Repository Policy&lt;/a>, Version $Revision: 3874. CRAN Repository Maintainers. &lt;a href="https://cran.r-project.org/web/packages/policies.html">https://cran.r-project.org/web/packages/policies.html&lt;/a> &lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/section></description></item><item><title>readxl 1.1.0</title><link>https://www.tidyverse.org/blog/2018/04/readxl-1-1-0/</link><pubDate>Mon, 23 Apr 2018 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2018/04/readxl-1-1-0/</guid><description>
&lt;link rel="stylesheet" href="https://www.tidyverse.org/css/article-image.css" type="text/css" />
&lt;p>We are pleased to announce that &lt;a href="http://readxl.tidyverse.org">readxl&lt;/a> 1.1.0 is now available on CRAN. Learn more about readxl at &lt;a href="http://readxl.tidyverse.org" class="uri">http://readxl.tidyverse.org&lt;/a>.&lt;/p>
&lt;p>The readxl package makes it easy to get tabular data out of Excel files and into R with code, not mouse clicks. It supports both the legacy &lt;code>.xls&lt;/code> format and the modern XML-based &lt;code>.xlsx&lt;/code> format. readxl is expressly designed to be easy to install and use on all operating systems. Therefore it has no external dependencies, such as Java or Perl, which have historically been a source of aggravation with some R packages that read Excel files.&lt;/p>
&lt;p>The easiest way to install the latest version from CRAN is to install the whole tidyverse.&lt;/p>
&lt;pre class="r">&lt;code>install.packages(&amp;quot;tidyverse&amp;quot;)&lt;/code>&lt;/pre>
&lt;p>Alternatively, install just readxl from CRAN:&lt;/p>
&lt;pre class="r">&lt;code>install.packages(&amp;quot;readxl&amp;quot;)&lt;/code>&lt;/pre>
&lt;p>Regardless, you will still need to load readxl explicitly via &lt;code>library(readxl)&lt;/code>, because it is not a core tidyverse package loaded via &lt;code>library(tidyverse)&lt;/code>. Do this like so in your scripts:&lt;/p>
&lt;pre class="r">&lt;code>library(readxl)&lt;/code>&lt;/pre>
&lt;p>readxl was last released almost exactly one year ago, in April 2017, at version 1.0.0. The associated &lt;a href="http://readxl.tidyverse.org/articles/releases/readxl-1.0.0.html">blog post&lt;/a> summarizes many nifty new features in version 1.0.0. In contrast, version 1.1.0 is considerably less exciting for most users, but includes two important improvements:&lt;/p>
&lt;ul>
&lt;li>Security patches in the embedded libxls library&lt;/li>
&lt;li>Better support for detecting the format of files, i.e. whether to read as xls or xlsx&lt;/li>
&lt;/ul>
&lt;p>Version 1.1.0 also includes several other small features and bug fixes. For full details on all versions, see the &lt;a href="http://readxl.tidyverse.org/news/index.html">changelog&lt;/a>.&lt;/p>
&lt;p>Read (or skip!) &lt;a href="#readxl-in-the-real-world">to the end for a story&lt;/a> about how readxl was used in a recent Los Angeles Times piece about homeless arrests. Or, rather, was not used.&lt;/p>
&lt;div id="security-fixes-for-libxls" class="section level2">
&lt;h2>Security fixes for libxls&lt;/h2>
&lt;p>readxl embeds the library &lt;a href="https://github.com/evanmiller/libxls">libxls&lt;/a> in order to read xls files. Three security vulnerabilities have been identified in libxls and were shown to affect readxl (&lt;a href="https://en.wikipedia.org/wiki/Common_Vulnerabilities_and_Exposures">CVE = Common Vulnerabilities and Exposures&lt;/a>):&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.talosintelligence.com/vulnerability_reports/TALOS-2017-0462">CVE-2017-12110&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.talosintelligence.com/vulnerability_reports/TALOS-2017-0403">CVE-2017-2896&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.talosintelligence.com/vulnerability_reports/TALOS-2017-0404">CVE-2017-2897&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>Those have now been addressed upstream and version 1.1.0 of readxl embeds a version of libxls that includes those fixes.&lt;/p>
&lt;p>Two other CVEs mention readxl, but actually concern parts of libxls unused by readxl or problems that were identified and fixed before readxl existed. &lt;a href="https://www.talosintelligence.com/vulnerability_reports/TALOS-2017-0463">CVE-2017-12111&lt;/a>, &lt;a href="https://www.talosintelligence.com/vulnerability_reports/TALOS-2017-0426">CVE-2017-2919&lt;/a>&lt;/p>
&lt;p>The recent maintenance of libxls by Evan Miller (&lt;a href="https://github.com/evanmiller">@evanmiller&lt;/a>) is a very positive development and has allowed us to close many readxl issues related to crashes or other unsavory behaviour seen when reading specific xls files.&lt;/p>
&lt;/div>
&lt;div id="is-it-xls-or-xlsx" class="section level2">
&lt;h2>Is it xls or xlsx?&lt;/h2>
&lt;p>readxl has 3 main functions for reading Excel files:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="http://readxl.tidyverse.org/reference/read_excel.html">&lt;code>read_xlsx()&lt;/code>&lt;/a> reads input as xlsx&lt;/li>
&lt;li>&lt;a href="http://readxl.tidyverse.org/reference/read_excel.html">&lt;code>read_xls()&lt;/code>&lt;/a> reads input as xls&lt;/li>
&lt;li>&lt;a href="http://readxl.tidyverse.org/reference/read_excel.html">&lt;code>read_excel()&lt;/code>&lt;/a> determines whether the input is xls or xlsx, then calls one of the functions above&lt;/li>
&lt;/ul>
&lt;p>&lt;code>read_excel()&lt;/code> has gotten better at inferring the file format and this functionality is now exposed, in case others need access. This is implemented in &lt;a href="http://readxl.tidyverse.org/reference/excel_format.html">&lt;code>excel_format()&lt;/code>&lt;/a>, which first calls &lt;a href="http://readxl.tidyverse.org/reference/excel_format.html">&lt;code>format_from_ext()&lt;/code>&lt;/a> to consult the extension and may then fall back to &lt;a href="http://readxl.tidyverse.org/reference/excel_format.html">&lt;code>format_from_signature()&lt;/code>&lt;/a> to consult the &lt;a href="https://en.wikipedia.org/wiki/List_of_file_signatures">file’s signature&lt;/a>, a.k.a. its “magic number”.&lt;/p>
&lt;p>&lt;code>format_from_ext()&lt;/code> and, therefore, &lt;code>excel_format()&lt;/code>, now recognize more file extensions in the xlsx family, namely &lt;code>.xlsm&lt;/code>, &lt;code>.xltx&lt;/code>, and &lt;code>.xltm&lt;/code>, in addition to &lt;code>.xlsx&lt;/code>.&lt;/p>
&lt;pre class="r">&lt;code>library(readxl)
library(tibble)
tibble(
excel_paths = c(&amp;quot;a.xlsx&amp;quot;, &amp;quot;b.xls&amp;quot;, &amp;quot;c.xlsm&amp;quot;, &amp;quot;d.xltx&amp;quot;, &amp;quot;e.jpg&amp;quot;, &amp;quot;f.csv&amp;quot;, &amp;quot;g&amp;quot;),
format = excel_format(excel_paths, guess = FALSE) # consult extension **only**
)
#&amp;gt; # A tibble: 7 x 2
#&amp;gt; excel_paths format
#&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt;
#&amp;gt; 1 a.xlsx xlsx
#&amp;gt; 2 b.xls xls
#&amp;gt; 3 c.xlsm xlsx
#&amp;gt; 4 d.xltx xlsx
#&amp;gt; 5 e.jpg &amp;lt;NA&amp;gt;
#&amp;gt; 6 f.csv &amp;lt;NA&amp;gt;
#&amp;gt; 7 g &amp;lt;NA&amp;gt;&lt;/code>&lt;/pre>
&lt;p>&lt;code>format_from_signature()&lt;/code> and, therefore, &lt;code>excel_format()&lt;/code> can determine the format of extensionless Excel files.&lt;/p>
&lt;pre class="r">&lt;code>guess_my_format &amp;lt;- c(
readxl_example(&amp;quot;clippy.xls&amp;quot;),
readxl_example(&amp;quot;datasets.xlsx&amp;quot;),
file.path(R.home(&amp;quot;doc&amp;quot;), &amp;quot;html&amp;quot;, &amp;quot;logo.jpg&amp;quot;)
)
## copy and strip the extension
filename &amp;lt;- tools::file_path_sans_ext(basename(guess_my_format))
tmpdir &amp;lt;- tempdir()
file.copy(from = guess_my_format, to = file.path(tmpdir, filename))
#&amp;gt; [1] TRUE TRUE TRUE
tibble(
filename = filename,
format = excel_format(file.path(tmpdir, filename))
)
#&amp;gt; # A tibble: 3 x 2
#&amp;gt; filename format
#&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt;
#&amp;gt; 1 clippy xls
#&amp;gt; 2 datasets xlsx
#&amp;gt; 3 logo &amp;lt;NA&amp;gt;&lt;/code>&lt;/pre>
&lt;/div>
&lt;div id="readxl-in-the-real-world" class="section level2">
&lt;h2>readxl in the real world&lt;/h2>
&lt;p>According to &lt;a href="https://cranlogs.r-pkg.org">METACRAN&lt;/a>, readxl has over 2.7 million cumulative downloads and is typically in the top 50 CRAN packages in terms of monthly downloads. readxl has relatively few reverse dependencies (only about 70), so I believe the vast majority of usage occurs in users’ R scripts. And these users throw an incredibly diverse set of Excel files at readxl, mostly with quiet success.&lt;/p>
&lt;p>A recent failure, however, inspired an &lt;a href="https://github.com/tidyverse/readxl/commit/eeeebf8171540a7cd14b373d20b08efbac7e3cd2">upgrade of readxl’s parsing of xlsx files&lt;/a>. &lt;a href="https://twitter.com/christinezhang">Christine Zhang&lt;/a> (&lt;a href="https://github.com/underthecurve">@underthecurve&lt;/a>) did the data work behind a &lt;a href="http://www.latimes.com/local/politics/la-me-homeless-arrests-20180204-story.html">front-page Los Angeles Times story about homeless arrests&lt;/a>. The Los Angeles Police Department provides daily arrest logs in the form of xlsx files, written by an unknown third-party tool. These files are a literal implementation of the “minimal conformant SpreadsheetML package” and we had never seen such a specimen before. Both R/tidyverse/readxl and Python/pandas/xlrd refused to read these files. Undeterred, Christine took advantage of the fact that xlsx is “just” a bunch of XML files and took matters into her own hands. But I &lt;a href="https://github.com/tidyverse/readxl/pull/437">got busy&lt;/a>, making sure that readxl would be ready the next time.&lt;/p>
&lt;p>Read the full backstory behind the LA Times story here: &lt;a href="https://source.opennews.org/articles/how-we-found-new-patterns-la-homeless-arrest/">How We Found New Patterns in LA’s Homeless Arrest Data&lt;/a>. In the end, Christine got her job done and readxl is a more capable package as a result of this challenge.&lt;/p>
&lt;/div>
&lt;div id="future-outlook" class="section level2">
&lt;h2>Future outlook&lt;/h2>
&lt;p>I predict the next user-visible changes in readxl will be improvements around column type specification, cell coercion, and reading from more general forms of input, e.g., from a URL. You can see other improvements and bug fixes that are on the radar in &lt;a href="https://github.com/tidyverse/readxl/issues">readxl’s GitHub issues&lt;/a>.&lt;/p>
&lt;p>The next release will also have a breaking-ish change around name repair. readxl will switch to &lt;a href="http://tibble.tidyverse.org/reference/tidy_names.html">&lt;code>tibble::set_tidy_names()&lt;/code>&lt;/a>, which remediates missing and duplicate variable names. I will make this change soon in the dev version, so that interested users can begin to adjust.&lt;/p>
&lt;/div>
&lt;div id="acknowledgements" class="section level2">
&lt;h2>Acknowledgements&lt;/h2>
&lt;p>I am very thankful to the maintainers of the embedded libraries, especially the recent work on libxls by David Hoerl (&lt;a href="https://github.com/dhoerl">@dhoerl&lt;/a>) and Evan Miller (&lt;a href="https://github.com/evanmiller">@evanmiller&lt;/a>). readxl includes a great deal of compiled code, from disparate sources, and Jim Hester (&lt;a href="https://github.com/jimhester">@jimhester&lt;/a>) is a fantastic troubleshooter. David Hood (&lt;a href="https://github.com/thoughtfulbloke">@thoughtfulbloke&lt;/a>) delivered some delightful Clippy photos (featured here), in response to an &lt;a href="https://twitter.com/JennyBryan/status/987415546596503552">absurd Twitter request&lt;/a>.&lt;/p>
&lt;p>A big thanks goes out to the 86 users who contributed issues and pull requests since the previous readxl release: &lt;a href="https://github.com/aaa34169">@aaa34169&lt;/a>, &lt;a href="https://github.com/afdta">@afdta&lt;/a>, &lt;a href="https://github.com/alexeyknorre">@alexeyknorre&lt;/a>, &lt;a href="https://github.com/alexhallam">@alexhallam&lt;/a>, &lt;a href="https://github.com/anjurad">@anjurad&lt;/a>, &lt;a href="https://github.com/arnyeinstein">@arnyeinstein&lt;/a>, &lt;a href="https://github.com/batpigandme">@batpigandme&lt;/a>, &lt;a href="https://github.com/bbrewington">@bbrewington&lt;/a>, &lt;a href="https://github.com/bellafeng">@bellafeng&lt;/a>, &lt;a href="https://github.com/burchill">@burchill&lt;/a>, &lt;a href="https://github.com/chrisholbrook">@chrisholbrook&lt;/a>, &lt;a href="https://github.com/Courvoisier13">@Courvoisier13&lt;/a>, &lt;a href="https://github.com/danielsjf">@danielsjf&lt;/a>, &lt;a href="https://github.com/DavisVaughan">@DavisVaughan&lt;/a>, &lt;a href="https://github.com/dchiu911">@dchiu911&lt;/a>, &lt;a href="https://github.com/Deepu298">@Deepu298&lt;/a>, &lt;a href="https://github.com/dpprdan">@dpprdan&lt;/a>, &lt;a href="https://github.com/ea-guerette">@ea-guerette&lt;/a>, &lt;a href="https://github.com/espinielli">@espinielli&lt;/a>, &lt;a href="https://github.com/gergness">@gergness&lt;/a>, &lt;a href="https://github.com/gp2x">@gp2x&lt;/a>, &lt;a href="https://github.com/heseber">@heseber&lt;/a>, &lt;a href="https://github.com/hlynurhallgrims">@hlynurhallgrims&lt;/a>, &lt;a href="https://github.com/hrecht">@hrecht&lt;/a>, &lt;a href="https://github.com/huftis">@huftis&lt;/a>, &lt;a href="https://github.com/hughmarera">@hughmarera&lt;/a>, &lt;a href="https://github.com/iiLaurens">@iiLaurens&lt;/a>, &lt;a href="https://github.com/ilpepe">@ilpepe&lt;/a>, &lt;a href="https://github.com/Ironholds">@Ironholds&lt;/a>, &lt;a href="https://github.com/jameshowison">@jameshowison&lt;/a>, &lt;a href="https://github.com/jamesLSI">@jamesLSI&lt;/a>, &lt;a href="https://github.com/jcolomb">@jcolomb&lt;/a>, &lt;a href="https://github.com/jebyrnes">@jebyrnes&lt;/a>, &lt;a href="https://github.com/jekriske-lilly">@jekriske-lilly&lt;/a>, &lt;a href="https://github.com/jennybc">@jennybc&lt;/a>, &lt;a href="https://github.com/jeroen">@jeroen&lt;/a>, &lt;a href="https://github.com/jimhester">@jimhester&lt;/a>, &lt;a href="https://github.com/jjcad">@jjcad&lt;/a>, &lt;a href="https://github.com/Jmarks199">@Jmarks199&lt;/a>, &lt;a href="https://github.com/KKPMW">@KKPMW&lt;/a>, &lt;a href="https://github.com/krlmlr">@krlmlr&lt;/a>, &lt;a href="https://github.com/kwstat">@kwstat&lt;/a>, &lt;a href="https://github.com/KyleHaynes">@KyleHaynes&lt;/a>, &lt;a href="https://github.com/Lu2017">@Lu2017&lt;/a>, &lt;a href="https://github.com/lz1nwm">@lz1nwm&lt;/a>, &lt;a href="https://github.com/m-macaskill">@m-macaskill&lt;/a>, &lt;a href="https://github.com/mbeer">@mbeer&lt;/a>, &lt;a href="https://github.com/mdbauer">@mdbauer&lt;/a>, &lt;a href="https://github.com/melikovk">@melikovk&lt;/a>, &lt;a href="https://github.com/MichaelChirico">@MichaelChirico&lt;/a>, &lt;a href="https://github.com/MidhunT">@MidhunT&lt;/a>, &lt;a href="https://github.com/MikhailLagutin">@MikhailLagutin&lt;/a>, &lt;a href="https://github.com/mplatzer">@mplatzer&lt;/a>, &lt;a href="https://github.com/msgoussi">@msgoussi&lt;/a>, &lt;a href="https://github.com/nacnudus">@nacnudus&lt;/a>, &lt;a href="https://github.com/nealrichardson">@nealrichardson&lt;/a>, &lt;a href="https://github.com/nick-ulle">@nick-ulle&lt;/a>, &lt;a href="https://github.com/nortonle">@nortonle&lt;/a>, &lt;a href="https://github.com/oozdmr">@oozdmr&lt;/a>, &lt;a href="https://github.com/PMassicotte">@PMassicotte&lt;/a>, &lt;a href="https://github.com/ramanan82">@ramanan82&lt;/a>, &lt;a href="https://github.com/reinderien">@reinderien&lt;/a>, &lt;a href="https://github.com/reinierv4">@reinierv4&lt;/a>, &lt;a href="https://github.com/robbriers">@robbriers&lt;/a>, &lt;a href="https://github.com/RobertMyles">@RobertMyles&lt;/a>, &lt;a href="https://github.com/rsbivand">@rsbivand&lt;/a>, &lt;a href="https://github.com/rstub">@rstub&lt;/a>, &lt;a href="https://github.com/ruaridhw">@ruaridhw&lt;/a>, &lt;a href="https://github.com/sebastianschweer">@sebastianschweer&lt;/a>, &lt;a href="https://github.com/shoebodh">@shoebodh&lt;/a>, &lt;a href="https://github.com/simonthelwall">@simonthelwall&lt;/a>, &lt;a href="https://github.com/slfan2013">@slfan2013&lt;/a>, &lt;a href="https://github.com/smasuda">@smasuda&lt;/a>, &lt;a href="https://github.com/sncr-github">@sncr-github&lt;/a>, &lt;a href="https://github.com/stephlocke">@stephlocke&lt;/a>, &lt;a href="https://github.com/steve4444">@steve4444&lt;/a>, &lt;a href="https://github.com/sz-cgt">@sz-cgt&lt;/a>, &lt;a href="https://github.com/t-kalinowski">@t-kalinowski&lt;/a>, &lt;a href="https://github.com/tarunparmar">@tarunparmar&lt;/a>, &lt;a href="https://github.com/tbeu">@tbeu&lt;/a>, &lt;a href="https://github.com/thothal">@thothal&lt;/a>, &lt;a href="https://github.com/tomsing1">@tomsing1&lt;/a>, &lt;a href="https://github.com/tres-pitt">@tres-pitt&lt;/a>, &lt;a href="https://github.com/vkapartzianis">@vkapartzianis&lt;/a>, &lt;a href="https://github.com/willtudorevans">@willtudorevans&lt;/a>, and &lt;a href="https://github.com/zauster">@zauster&lt;/a>.&lt;/p>
&lt;/div></description></item><item><title>stringr 1.3.0</title><link>https://www.tidyverse.org/blog/2018/02/stringr-1-3-0/</link><pubDate>Thu, 22 Feb 2018 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2018/02/stringr-1-3-0/</guid><description>
&lt;p>We are happy to announce that &lt;a href="http://stringr.tidyverse.org/">stringr&lt;/a> 1.3.0
is now on CRAN. stringr provides a cohesive set of functions designed to make
working with strings as easy as possible. For a complete list of changes, please
see the &lt;a href="https://github.com/tidyverse/stringr/releases/tag/v1.3.0">release notes&lt;/a>.&lt;/p>
&lt;div id="whats-new" class="section level2">
&lt;h2>What’s new?&lt;/h2>
&lt;ul>
&lt;li>&lt;p>Two new wrappers from the &lt;a href="http://glue.tidyverse.org/">glue&lt;/a>
package: &lt;code>str_glue()&lt;/code> and &lt;code>str_glue_data()&lt;/code>. If you haven’t heard of glue, you’re in for a treat! Glue lets you easily interpolate data into strings.&lt;/p>
&lt;pre class="r">&lt;code>name &amp;lt;- &amp;quot;Chet Manley&amp;quot;
str_glue(&amp;quot;My name is {name}.&amp;quot;)
#&amp;gt; My name is Chet Manley.&lt;/code>&lt;/pre>
&lt;p>Since stringr is loaded with tidyverse, this means that you can now access glue’s functionality without loading another package.&lt;/p>&lt;/li>
&lt;li>&lt;p>&lt;code>str_flatten()&lt;/code>, a wrapper for the &lt;code>stri_flatten()&lt;/code> function, which
flattens a character vector into a single string. This is equivalent to &lt;code>paste(x, collapse = &amp;quot;-&amp;quot;)&lt;/code> but it is a bit more explicit in your code – &lt;code>str_flatten()&lt;/code> always returns a single string.&lt;/p>&lt;/li>
&lt;li>&lt;p>&lt;code>str_remove()&lt;/code> and &lt;code>str_remove_all()&lt;/code>, which wrap &lt;code>str_replace()&lt;/code> and &lt;code>str_replace_all()&lt;/code> for removing patterns from strings.&lt;/p>&lt;/li>
&lt;li>&lt;p>&lt;code>str_squish()&lt;/code>, which removes whitespace from the left and right sides of strings, and converts multiple spaces or space-like characters from the middle of strings into a single space.&lt;/p>
&lt;pre class="r">&lt;code>str_squish(&amp;quot;\n\nString \t\nwith all \tthis \rspace in it.\n\n&amp;quot;)
#&amp;gt; [1] &amp;quot;String with all this space in it.&amp;quot;&lt;/code>&lt;/pre>&lt;/li>
&lt;/ul>
&lt;/div>
&lt;div id="api-changes" class="section level2">
&lt;h2>API changes&lt;/h2>
&lt;p>The long deprecated &lt;code>str_join()&lt;/code>, &lt;code>ignore.case()&lt;/code>, and &lt;code>perl()&lt;/code> functions
have been removed. You may see &lt;code>Error : object ‘ignore.case’ is not exported by 'namespace:stringr'&lt;/code> during package build.&lt;/p>
&lt;/div>
&lt;div id="contributors" class="section level2">
&lt;h2>Contributors&lt;/h2>
&lt;p>Thanks to all of the community members who helped with this release by contributing code and filing issues: &lt;a href="https://github.com/alanault">@alanault&lt;/a>, &lt;a href="https://github.com/AlunHewinson">@AlunHewinson&lt;/a>, &lt;a href="https://github.com/amhrasmussen">@amhrasmussen&lt;/a>, &lt;a href="https://github.com/andreypanchenko">@andreypanchenko&lt;/a>, &lt;a href="https://github.com/austin3dickey">@austin3dickey&lt;/a>, &lt;a href="https://github.com/bachlaw">@bachlaw&lt;/a>, &lt;a href="https://github.com/bpasanek">@bpasanek&lt;/a>, &lt;a href="https://github.com/cderv">@cderv&lt;/a>, &lt;a href="https://github.com/ClaytonJY">@ClaytonJY&lt;/a>, &lt;a href="https://github.com/cwickham">@cwickham&lt;/a>, &lt;a href="https://github.com/danielsjf">@danielsjf&lt;/a>, &lt;a href="https://github.com/dchiu911">@dchiu911&lt;/a>, &lt;a href="https://github.com/dhicks">@dhicks&lt;/a>, &lt;a href="https://github.com/dhodge">@dhodge&lt;/a>, &lt;a href="https://github.com/djrobust">@djrobust&lt;/a>, &lt;a href="https://github.com/dracodoc">@dracodoc&lt;/a>, &lt;a href="https://github.com/duarteguilherme">@duarteguilherme&lt;/a>, &lt;a href="https://github.com/etienne-s">@etienne-s&lt;/a>, &lt;a href="https://github.com/ewallace">@ewallace&lt;/a>, &lt;a href="https://github.com/florisvdh">@florisvdh&lt;/a>, &lt;a href="https://github.com/frootor">@frootor&lt;/a>, &lt;a href="https://github.com/geotheory">@geotheory&lt;/a>, &lt;a href="https://github.com/gonulate">@gonulate&lt;/a>, &lt;a href="https://github.com/guiastrennec">@guiastrennec&lt;/a>, &lt;a href="https://github.com/hongshaoyang">@hongshaoyang&lt;/a>, &lt;a href="https://github.com/IndrajeetPatil">@IndrajeetPatil&lt;/a>, &lt;a href="https://github.com/IngaPa">@IngaPa&lt;/a>, &lt;a href="https://github.com/jameshowison">@jameshowison&lt;/a>, &lt;a href="https://github.com/jennybc">@jennybc&lt;/a>, &lt;a href="https://github.com/jerryfuyu0104">@jerryfuyu0104&lt;/a>, &lt;a href="https://github.com/jimvine">@jimvine&lt;/a>, &lt;a href="https://github.com/jonmcalder">@jonmcalder&lt;/a>, &lt;a href="https://github.com/jonocarroll">@jonocarroll&lt;/a>, &lt;a href="https://github.com/landroni">@landroni&lt;/a>, &lt;a href="https://github.com/lozalojo">@lozalojo&lt;/a>, &lt;a href="https://github.com/m0nhawk">@m0nhawk&lt;/a>, &lt;a href="https://github.com/mgirlich">@mgirlich&lt;/a>, &lt;a href="https://github.com/mplourde">@mplourde&lt;/a>, &lt;a href="https://github.com/msgoussi">@msgoussi&lt;/a>, &lt;a href="https://github.com/nokome">@nokome&lt;/a>, &lt;a href="https://github.com/novakowd">@novakowd&lt;/a>, &lt;a href="https://github.com/nthun">@nthun&lt;/a>, &lt;a href="https://github.com/pgensler">@pgensler&lt;/a>, &lt;a href="https://github.com/richierocks">@richierocks&lt;/a>, &lt;a href="https://github.com/shapiromatron">@shapiromatron&lt;/a>, &lt;a href="https://github.com/Shians">@Shians&lt;/a>, &lt;a href="https://github.com/sibojan">@sibojan&lt;/a>, &lt;a href="https://github.com/sieste">@sieste&lt;/a>, &lt;a href="https://github.com/simonthelwall">@simonthelwall&lt;/a>, &lt;a href="https://github.com/skanskan">@skanskan&lt;/a>, &lt;a href="https://github.com/stephlocke">@stephlocke&lt;/a>, &lt;a href="https://github.com/swvanderlaan">@swvanderlaan&lt;/a>, &lt;a href="https://github.com/thorvall">@thorvall&lt;/a>, &lt;a href="https://github.com/tjmahr">@tjmahr&lt;/a>, &lt;a href="https://github.com/tomwwagstaff">@tomwwagstaff&lt;/a>, &lt;a href="https://github.com/yeedle">@yeedle&lt;/a>, &lt;a href="https://github.com/yutannihilation">@yutannihilation&lt;/a>, &lt;a href="https://github.com/zapashcanon">@zapashcanon&lt;/a>, and &lt;a href="https://github.com/zhaoy">@zhaoy&lt;/a>.&lt;/p>
&lt;/div></description></item><item><title>forcats 0.3.0</title><link>https://www.tidyverse.org/blog/2018/02/forcats-0-3-0/</link><pubDate>Wed, 21 Feb 2018 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2018/02/forcats-0-3-0/</guid><description>
&lt;p>We are pleased to announce that &lt;a href="http://forcats.tidyverse.org/">forcats 0.3.0&lt;/a> is now on CRAN.&lt;/p>
&lt;p>The forcats package provides a suite of useful tools that solve common problems with factors in R. This version includes updates that resolve several of the “most popular” GitHub issues (as measured by reactions), some of which are highlighted below. For a complete set of changes, please see the &lt;a href="https://github.com/tidyverse/forcats/releases/tag/v0.3.0">release notes&lt;/a>.&lt;/p>
&lt;p>You can install the latest version with:&lt;/p>
&lt;pre class="r">&lt;code>install.packages(&amp;quot;forcats&amp;quot;)&lt;/code>&lt;/pre>
&lt;div id="improvements-to-na-handling" class="section level3">
&lt;h3>Improvements to NA handling&lt;/h3>
&lt;p>Closing out one of the most up-voted &lt;a href="https://github.com/tidyverse/forcats/issues/89">issues&lt;/a> in the tidyverse, &lt;code>as_factor()&lt;/code> and &lt;code>fct_inorder()&lt;/code> can accept NA levels.&lt;/p>
&lt;p>&lt;code>fct_inorder()&lt;/code> allows you to reorder factor levels by their first appearance. In this latest release, NAs are properly ignored.&lt;/p>
&lt;pre class="r">&lt;code># forcats 0.3.0
f &amp;lt;- factor(c(&amp;quot;b&amp;quot;, &amp;quot;b&amp;quot;, NA, &amp;quot;a&amp;quot;, &amp;quot;c&amp;quot;, &amp;quot;c&amp;quot;, &amp;quot;c&amp;quot;, NA))
f
#&amp;gt; [1] b b &amp;lt;NA&amp;gt; a c c c &amp;lt;NA&amp;gt;
#&amp;gt; Levels: a b c
fct_inorder(f)
#&amp;gt; [1] b b &amp;lt;NA&amp;gt; a c c c &amp;lt;NA&amp;gt;
#&amp;gt; Levels: b a c&lt;/code>&lt;/pre>
&lt;p>&lt;code>fct_lump()&lt;/code> now correctly accounts for NA in input. &lt;code>lvls_revalue()&lt;/code> preserves NA levels. Missing values, including NAs, can be given an explicit factor level using &lt;code>fct_explicit_na()&lt;/code>, which ensures that missing values will appear in summaries and plots.&lt;/p>
&lt;/div>
&lt;div id="new-features" class="section level3">
&lt;h3>New features&lt;/h3>
&lt;p>Consistent with other tidyverse packages, all functions that take &lt;code>...&lt;/code> now use tidy dots. This means that you can use &lt;code>!!!&lt;/code> to splice in a list of values, and trailing empty arguments are automatically removed. For example:&lt;/p>
&lt;pre class="r">&lt;code>fa &amp;lt;- factor(&amp;quot;a&amp;quot;)
fb &amp;lt;- factor(&amp;quot;b&amp;quot;)
fab &amp;lt;- factor(c(&amp;quot;a&amp;quot;, &amp;quot;b&amp;quot;))
# You can pass a list of factors with !!!
fs &amp;lt;- list(fa, fb, fab)
fct_c(!!!fs)
#&amp;gt; [1] a b a b
#&amp;gt; Levels: a b&lt;/code>&lt;/pre>
&lt;p>All other arguments to functions that take &lt;code>...&lt;/code> gain a &lt;code>.&lt;/code> prefix in order to avoid unhelpful matching of named arguments.&lt;/p>
&lt;p>&lt;code>fct_lump()&lt;/code> has a new argument, &lt;code>w&lt;/code>, for weighing value frequencies before lumping them together. This is useful if you have pre-summarised data.&lt;/p>
&lt;/div>
&lt;div id="api-changes" class="section level3">
&lt;h3>API changes&lt;/h3>
&lt;p>We needed to make two backward incompatible changes in order to increase consistency across the tidyverse:&lt;/p>
&lt;ul>
&lt;li>&lt;p>&lt;code>fct_c()&lt;/code> now requires explicit splicing with &lt;code>!!!&lt;/code> if you have a list of factors that you want to combine. See example, above.&lt;/p>&lt;/li>
&lt;li>&lt;p>&lt;code>fct_reorder()&lt;/code> and &lt;code>fct_reorder2()&lt;/code> have renamed &lt;code>fun&lt;/code> to &lt;code>.fun&lt;/code> to avoid spurious matching of named arguments.&lt;/p>&lt;/li>
&lt;/ul>
&lt;/div>
&lt;div id="contributors" class="section level3">
&lt;h3>Contributors&lt;/h3>
&lt;p>A big thanks goes to the 30-plus people who made this release possible by opening issues and contributing code: &lt;a href="https://github.com/alistaire47">@alistaire47&lt;/a>, &lt;a href="https://github.com/antaldaniel">@antaldaniel&lt;/a>, &lt;a href="https://github.com/arhot">@arhot&lt;/a>, &lt;a href="https://github.com/BarkleyBG">@BarkleyBG&lt;/a>, &lt;a href="https://github.com/camdenhu">@camdenhu&lt;/a>, &lt;a href="https://github.com/ColinFay">@ColinFay&lt;/a>, &lt;a href="https://github.com/dannyparsons">@dannyparsons&lt;/a>, &lt;a href="https://github.com/davechilders">@davechilders&lt;/a>, &lt;a href="https://github.com/dpavlic">@dpavlic&lt;/a>, &lt;a href="https://github.com/eclarke">@eclarke&lt;/a>, &lt;a href="https://github.com/econandrew">@econandrew&lt;/a>, &lt;a href="https://github.com/felipegerard">@felipegerard&lt;/a>, &lt;a href="https://github.com/geneanalyst">@geneanalyst&lt;/a>, &lt;a href="https://github.com/GlynisHumphrey">@GlynisHumphrey&lt;/a>, &lt;a href="https://github.com/gregrs-uk">@gregrs-uk&lt;/a>, &lt;a href="https://github.com/huftis">@huftis&lt;/a>, &lt;a href="https://github.com/instantkaffee">@instantkaffee&lt;/a>, &lt;a href="https://github.com/jmpsteen">@jmpsteen&lt;/a>, &lt;a href="https://github.com/jtr13">@jtr13&lt;/a>, &lt;a href="https://github.com/krlmlr">@krlmlr&lt;/a>, &lt;a href="https://github.com/michaellevy">@michaellevy&lt;/a>, &lt;a href="https://github.com/NBRAYKO">@NBRAYKO&lt;/a>, &lt;a href="https://github.com/pbiecek">@pbiecek&lt;/a>, &lt;a href="https://github.com/philstraforelli">@philstraforelli&lt;/a>, &lt;a href="https://github.com/robinsones">@robinsones&lt;/a>, &lt;a href="https://github.com/rtaph">@rtaph&lt;/a>, &lt;a href="https://github.com/s-fleck">@s-fleck&lt;/a>, &lt;a href="https://github.com/Tazinho">@Tazinho&lt;/a>, &lt;a href="https://github.com/thercast">@thercast&lt;/a>, &lt;a href="https://github.com/vspinu">@vspinu&lt;/a>, &lt;a href="https://github.com/whatevergeek">@whatevergeek&lt;/a>, &lt;a href="https://github.com/wilkox">@wilkox&lt;/a>, and &lt;a href="https://github.com/wkostelecki">@wkostelecki&lt;/a>.&lt;/p>
&lt;/div></description></item><item><title>tidyr 0.8.0</title><link>https://www.tidyverse.org/blog/2018/02/tidyr-0-8-0/</link><pubDate>Tue, 13 Feb 2018 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2018/02/tidyr-0-8-0/</guid><description>
&lt;p>We are pleased to announce that tidyr 0.8.0 is now available on CRAN. tidyr makes it easy to “tidy” your data, storing it in a consistent form so that it’s easy to manipulate, visualise and model. Tidy data has a simple convention: put variables in the columns and observations in the rows. You can learn more about it in the &lt;a href="http://tidyr.tidyverse.org/articles/tidy-data.html">tidy data vignette&lt;/a>. Install it with:&lt;/p>
&lt;pre class="r">&lt;code>install.packages(&amp;quot;tidyr&amp;quot;)&lt;/code>&lt;/pre>
&lt;p>This release mainly contains a bumper crop of small bug fixes and minor improvements, and a considerable increase in test coverage (84% to 99%). For the full details, see the &lt;a href="https://github.com/tidyverse/tidyr/releases/tag/v0.8.0">release notes&lt;/a>. Here we’ll highlight an important bug fix that might change existing code, and one new feature to try out.&lt;/p>
&lt;div id="api-changes" class="section level2">
&lt;h2>API changes&lt;/h2>
&lt;p>There was a bug in &lt;code>separate()&lt;/code> where negative values had an off-by-one error. Now -1 correctly refers to the first position between characters counting from the right hand side.&lt;/p>
&lt;pre class="r">&lt;code>df &amp;lt;- tibble(x = c(&amp;quot;male1&amp;quot;, &amp;quot;female2&amp;quot;, &amp;quot;male2&amp;quot;))
df %&amp;gt;% separate(x, c(&amp;quot;gender&amp;quot;, &amp;quot;number&amp;quot;), -1)
#&amp;gt; # A tibble: 3 x 2
#&amp;gt; gender number
#&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt;
#&amp;gt; 1 male 1
#&amp;gt; 2 female 2
#&amp;gt; 3 male 2&lt;/code>&lt;/pre>
&lt;/div>
&lt;div id="new-features" class="section level2">
&lt;h2>New features&lt;/h2>
&lt;p>Thanks to the suggestion of &lt;a href="https://andrewpbray.github.io">Andrew Bray&lt;/a>, tidyr can now “uncount” a data frame, duplicating aggregate rows:&lt;/p>
&lt;pre class="r">&lt;code>df &amp;lt;- tibble(x = c(&amp;quot;a&amp;quot;, &amp;quot;b&amp;quot;, &amp;quot;c&amp;quot;), n = c(2, 3, 1))
df %&amp;gt;% uncount(n)
#&amp;gt; # A tibble: 6 x 1
#&amp;gt; x
#&amp;gt; &amp;lt;chr&amp;gt;
#&amp;gt; 1 a
#&amp;gt; 2 a
#&amp;gt; 3 b
#&amp;gt; 4 b
#&amp;gt; 5 b
#&amp;gt; 6 c&lt;/code>&lt;/pre>
&lt;p>If you want a unique identifier for each row, use the &lt;code>.id&lt;/code> argument:&lt;/p>
&lt;pre class="r">&lt;code>df %&amp;gt;% uncount(n, .id = &amp;quot;id&amp;quot;)
#&amp;gt; # A tibble: 6 x 2
#&amp;gt; x id
#&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;int&amp;gt;
#&amp;gt; 1 a 1
#&amp;gt; 2 a 2
#&amp;gt; 3 b 1
#&amp;gt; 4 b 2
#&amp;gt; 5 b 3
#&amp;gt; 6 c 1&lt;/code>&lt;/pre>
&lt;/div>
&lt;div id="acknowledgements" class="section level2">
&lt;h2>Acknowledgements&lt;/h2>
&lt;p>A big thanks goes out to all 90 users who contributed issues, pull requests, and comments since the last release: &lt;a href="https://github.com/aaronwolen">@aaronwolen&lt;/a>, &lt;a href="https://github.com/adeldaoud">@adeldaoud&lt;/a>, &lt;a href="https://github.com/amarchin">@amarchin&lt;/a>, &lt;a href="https://github.com/AndreMikulec">@AndreMikulec&lt;/a>, &lt;a href="https://github.com/andrewhn">@andrewhn&lt;/a>, &lt;a href="https://github.com/andrewpbray">@andrewpbray&lt;/a>, &lt;a href="https://github.com/antoine-sachet">@antoine-sachet&lt;/a>, &lt;a href="https://github.com/aosmith16">@aosmith16&lt;/a>, &lt;a href="https://github.com/Ax3man">@Ax3man&lt;/a>, &lt;a href="https://github.com/batpigandme">@batpigandme&lt;/a>, &lt;a href="https://github.com/bheavner">@bheavner&lt;/a>, &lt;a href="https://github.com/billdenney">@billdenney&lt;/a>, &lt;a href="https://github.com/burchill">@burchill&lt;/a>, &lt;a href="https://github.com/carlganz">@carlganz&lt;/a>, &lt;a href="https://github.com/casras111">@casras111&lt;/a>, &lt;a href="https://github.com/cb4ds">@cb4ds&lt;/a>, &lt;a href="https://github.com/chris-park">@chris-park&lt;/a>, &lt;a href="https://github.com/colearendt">@colearendt&lt;/a>, &lt;a href="https://github.com/cpsievert">@cpsievert&lt;/a>, &lt;a href="https://github.com/cswarth">@cswarth&lt;/a>, &lt;a href="https://github.com/cviner">@cviner&lt;/a>, &lt;a href="https://github.com/dscarlat">@dscarlat&lt;/a>, &lt;a href="https://github.com/echasnovski">@echasnovski&lt;/a>, &lt;a href="https://github.com/eibanez">@eibanez&lt;/a>, &lt;a href="https://github.com/feuerbach">@feuerbach&lt;/a>, &lt;a href="https://github.com/flying-sheep">@flying-sheep&lt;/a>, &lt;a href="https://github.com/GegznaV">@GegznaV&lt;/a>, &lt;a href="https://github.com/geotheory">@geotheory&lt;/a>, &lt;a href="https://github.com/ggrothendieck">@ggrothendieck&lt;/a>, &lt;a href="https://github.com/gireeshkbogu">@gireeshkbogu&lt;/a>, &lt;a href="https://github.com/gregmacfarlane">@gregmacfarlane&lt;/a>, &lt;a href="https://github.com/hadley">@hadley&lt;/a>, &lt;a href="https://github.com/halpo">@halpo&lt;/a>, &lt;a href="https://github.com/holgerbrandl">@holgerbrandl&lt;/a>, &lt;a href="https://github.com/huftis">@huftis&lt;/a>, &lt;a href="https://github.com/Hydr0Ge0Dude">@Hydr0Ge0Dude&lt;/a>, &lt;a href="https://github.com/instantkaffee">@instantkaffee&lt;/a>, &lt;a href="https://github.com/jarodmeng">@jarodmeng&lt;/a>, &lt;a href="https://github.com/jebyrnes">@jebyrnes&lt;/a>, &lt;a href="https://github.com/jennybc">@jennybc&lt;/a>, &lt;a href="https://github.com/jerryfuyu0104">@jerryfuyu0104&lt;/a>, &lt;a href="https://github.com/JerryWho">@JerryWho&lt;/a>, &lt;a href="https://github.com/jgellar">@jgellar&lt;/a>, &lt;a href="https://github.com/JoFrhwld">@JoFrhwld&lt;/a>, &lt;a href="https://github.com/jstitlow">@jstitlow&lt;/a>, &lt;a href="https://github.com/junoslukan">@junoslukan&lt;/a>, &lt;a href="https://github.com/jzadra">@jzadra&lt;/a>, &lt;a href="https://github.com/karldw">@karldw&lt;/a>, &lt;a href="https://github.com/kendonB">@kendonB&lt;/a>, &lt;a href="https://github.com/krlmlr">@krlmlr&lt;/a>, &lt;a href="https://github.com/l-d-s">@l-d-s&lt;/a>, &lt;a href="https://github.com/leungi">@leungi&lt;/a>, &lt;a href="https://github.com/lorenzwalthert">@lorenzwalthert&lt;/a>, &lt;a href="https://github.com/luke-a">@luke-a&lt;/a>, &lt;a href="https://github.com/MarcusWalz">@MarcusWalz&lt;/a>, &lt;a href="https://github.com/markdly">@markdly&lt;/a>, &lt;a href="https://github.com/mattmills49">@mattmills49&lt;/a>, &lt;a href="https://github.com/maurolepore">@maurolepore&lt;/a>, &lt;a href="https://github.com/MaximeWack">@MaximeWack&lt;/a>, &lt;a href="https://github.com/meow9th">@meow9th&lt;/a>, &lt;a href="https://github.com/mgirlich">@mgirlich&lt;/a>, &lt;a href="https://github.com/mmuurr">@mmuurr&lt;/a>, &lt;a href="https://github.com/Monduiz">@Monduiz&lt;/a>, &lt;a href="https://github.com/naveennjs">@naveennjs&lt;/a>, &lt;a href="https://github.com/ngr-t">@ngr-t&lt;/a>, &lt;a href="https://github.com/njtierney">@njtierney&lt;/a>, &lt;a href="https://github.com/npjc">@npjc&lt;/a>, &lt;a href="https://github.com/paulponcet">@paulponcet&lt;/a>, &lt;a href="https://github.com/petereckley">@petereckley&lt;/a>, &lt;a href="https://github.com/pgensler">@pgensler&lt;/a>, &lt;a href="https://github.com/pietermarsman">@pietermarsman&lt;/a>, &lt;a href="https://github.com/PMassicotte">@PMassicotte&lt;/a>, &lt;a href="https://github.com/ripkrizbi">@ripkrizbi&lt;/a>, &lt;a href="https://github.com/sfirke">@sfirke&lt;/a>, &lt;a href="https://github.com/slygent">@slygent&lt;/a>, &lt;a href="https://github.com/stefvanbuuren">@stefvanbuuren&lt;/a>, &lt;a href="https://github.com/t-kalinowski">@t-kalinowski&lt;/a>, &lt;a href="https://github.com/tbradley1013">@tbradley1013&lt;/a>, &lt;a href="https://github.com/tcovert">@tcovert&lt;/a>, &lt;a href="https://github.com/tentacles-from-outer-space">@tentacles-from-outer-space&lt;/a>, &lt;a href="https://github.com/thays42">@thays42&lt;/a>, &lt;a href="https://github.com/tiagowright">@tiagowright&lt;/a>, &lt;a href="https://github.com/tiernanmartin">@tiernanmartin&lt;/a>, &lt;a href="https://github.com/tshynik">@tshynik&lt;/a>, &lt;a href="https://github.com/urskalbitzer">@urskalbitzer&lt;/a>, &lt;a href="https://github.com/voxnonecho">@voxnonecho&lt;/a>, &lt;a href="https://github.com/wibeasley">@wibeasley&lt;/a>, &lt;a href="https://github.com/yutannihilation">@yutannihilation&lt;/a>, &lt;a href="https://github.com/zelite">@zelite&lt;/a>, and &lt;a href="https://github.com/zhukunism">@zhukunism&lt;/a>.&lt;/p>
&lt;/div></description></item><item><title>tibble 1.4.2</title><link>https://www.tidyverse.org/blog/2018/01/tibble-1-4-2/</link><pubDate>Wed, 24 Jan 2018 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2018/01/tibble-1-4-2/</guid><description>
&lt;p>We’re excited to announce version 1.4.2 of the &lt;em>tibble&lt;/em> package, a minor update focusing mostly on display and performance. This is a small release designed to address the biggest issues introduced in &lt;a href="tibble-1-4-1">version 1.4.1&lt;/a>. We’ve introduced a number of option to give you greater control over the appearance, and tweaked the default to work better for more people. (The option names start with &lt;code>pillar&lt;/code>, because that’s the package that is actually responsible for printing; the new options are available with &lt;em>pillar&lt;/em> 1.1.0 which will be installed automatically when you install or upgrade &lt;em>tibble&lt;/em>.) In addition, tibbles are now displayed faster, even very wide ones. The subsetting performance has also improved.&lt;/p>
&lt;p>There are some other small improvements and bug fixes: please see the &lt;a href="https://github.com/tidyverse/tibble/releases/tag/v1.4.2">release notes&lt;/a> for a complete list. Use the &lt;a href="https://github.com/tidyverse/tibble/issues">issue tracker&lt;/a> to submit bugs or suggest ideas, your contributions are always welcome.&lt;/p>
&lt;div id="new-options" class="section level2">
&lt;h2>New options&lt;/h2>
&lt;p>This article shows the effect of each new option based on the following simple tibble.&lt;/p>
&lt;div class="figure">
&lt;img src="https://www.tidyverse.org/images/tibble-1-4-2/default.png" />
&lt;/div>
&lt;p>The following options were added:&lt;/p>
&lt;ul>
&lt;li>&lt;p>&lt;code>pillar.bold&lt;/code>: Use bold font, e.g. for column headers? This currently defaults to &lt;code>FALSE&lt;/code>, because many terminal fonts have poor support for bold fonts. If the bold-faced column names in tibble 1.4.1 worked for you, add &lt;code>options(pillar.bold = TRUE)&lt;/code> to your &lt;code>.Rprofile&lt;/code>.&lt;/p>
&lt;div class="figure">
&lt;img src="https://www.tidyverse.org/images/tibble-1-4-2/bold.png" />
&lt;/div>&lt;/li>
&lt;li>&lt;p>&lt;code>pillar.subtle&lt;/code>: Use subtle style, e.g. for insignificant digits? Default: &lt;code>TRUE&lt;/code>, see below for the effects of &lt;code>options(pillar.subtle = FALSE)&lt;/code>.&lt;/p>
&lt;div class="figure">
&lt;img src="https://www.tidyverse.org/images/tibble-1-4-2/subtle.png" />
&lt;/div>&lt;/li>
&lt;li>&lt;p>&lt;code>pillar.neg&lt;/code>: Highlight negative numbers? Default: &lt;code>TRUE&lt;/code>, the output for &lt;code>options(pillar.neg = FALSE)&lt;/code> is shown below.&lt;/p>
&lt;div class="figure">
&lt;img src="https://www.tidyverse.org/images/tibble-1-4-2/neg.png" />
&lt;/div>&lt;/li>
&lt;li>&lt;p>&lt;code>pillar.sigfig&lt;/code>: The number of significant digits that will be printed and highlighted, default: 3. (Set the &lt;code>pillar.subtle&lt;/code> option to &lt;code>FALSE&lt;/code> to turn off highlighting of significant digits.) See below for an example with &lt;code>options(pillar.sigfig = 5)&lt;/code>:&lt;/p>
&lt;div class="figure">
&lt;img src="https://www.tidyverse.org/images/tibble-1-4-2/sigfig-5.png" />
&lt;/div>&lt;/li>
&lt;li>&lt;p>&lt;code>pillar.min_title_chars&lt;/code>: The minimum number of characters for the column title, default: &lt;code>15&lt;/code>. Column titles may be truncated up to that width to save horizontal space. Set to &lt;code>Inf&lt;/code> to turn off truncation of column titles. In our example, a column hidden previously is shown when reducing &lt;code>pillar.min_title_chars&lt;/code> to 10:&lt;/p>
&lt;div class="figure">
&lt;img src="https://www.tidyverse.org/images/tibble-1-4-2/min-title-chars-10.png" />
&lt;/div>&lt;/li>
&lt;/ul>
&lt;/div>
&lt;div id="acknowledgments" class="section level2">
&lt;h2>Acknowledgments&lt;/h2>
&lt;p>Thanks to &lt;a href="https://github.com/anhqle">Anh Le&lt;/a> for adding support for trailing commas in &lt;code>tribble()&lt;/code>, to &lt;a href="https://github.com/mundl">Tobias Gauster&lt;/a> for fixing a confusing error message, and to all other contributors. We received issues, pull requests, and comments from 33 people since tibble 1.4.1. Thanks to everyone, your feedback is very valuable to us: &lt;a href="https://github.com/anhqle">@anhqle&lt;/a>, &lt;a href="https://github.com/batpigandme">@batpigandme&lt;/a>, &lt;a href="https://github.com/bgreenwell">@bgreenwell&lt;/a>, &lt;a href="https://github.com/blueprint-ade">@blueprint-ade&lt;/a>, &lt;a href="https://github.com/BruceZhaoR">@BruceZhaoR&lt;/a>, &lt;a href="https://github.com/chasemc">@chasemc&lt;/a>, &lt;a href="https://github.com/digital-dharma">@digital-dharma&lt;/a>, &lt;a href="https://github.com/drewgendreau">@drewgendreau&lt;/a>, &lt;a href="https://github.com/EdwardJRoss">@EdwardJRoss&lt;/a>, &lt;a href="https://github.com/hplieninger">@hplieninger&lt;/a>, &lt;a href="https://github.com/javierluraschi">@javierluraschi&lt;/a>, &lt;a href="https://github.com/jcpetkovich">@jcpetkovich&lt;/a>, &lt;a href="https://github.com/kevinushey">@kevinushey&lt;/a>, &lt;a href="https://github.com/kevinykuo">@kevinykuo&lt;/a>, &lt;a href="https://github.com/khughitt">@khughitt&lt;/a>, &lt;a href="https://github.com/kovla">@kovla&lt;/a>, &lt;a href="https://github.com/lorenzwalthert">@lorenzwalthert&lt;/a>, &lt;a href="https://github.com/lpmarco">@lpmarco&lt;/a>, &lt;a href="https://github.com/mmuurr">@mmuurr&lt;/a>, &lt;a href="https://github.com/mundl">@mundl&lt;/a>, &lt;a href="https://github.com/NathanCDay">@NathanCDay&lt;/a>, &lt;a href="https://github.com/p0bs">@p0bs&lt;/a>, &lt;a href="https://github.com/patperry">@patperry&lt;/a>, &lt;a href="https://github.com/slonik-az">@slonik-az&lt;/a>, &lt;a href="https://github.com/Tazinho">@Tazinho&lt;/a>, &lt;a href="https://github.com/tjmahr">@tjmahr&lt;/a>, &lt;a href="https://github.com/trinker">@trinker&lt;/a>, &lt;a href="https://github.com/vnijs">@vnijs&lt;/a>, &lt;a href="https://github.com/vspinu">@vspinu&lt;/a>, &lt;a href="https://github.com/WB-Student">@WB-Student&lt;/a>, &lt;a href="https://github.com/wch">@wch&lt;/a>, &lt;a href="https://github.com/yutannihilation">@yutannihilation&lt;/a>, and &lt;a href="https://github.com/Zedseayou">@Zedseayou&lt;/a>.&lt;/p>
&lt;/div></description></item><item><title>dbplyr 1.2.0</title><link>https://www.tidyverse.org/blog/2018/01/dbplyr-1-2/</link><pubDate>Mon, 08 Jan 2018 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2018/01/dbplyr-1-2/</guid><description>
&lt;p>We are very excited to announce that &lt;a href="http://dbplyr.tidyverse.org/">dbplyr 1.2.0&lt;/a> is now available on CRAN! &lt;strong>dbplyr&lt;/strong> is the database backend for dplyr. It interacts with databases directly by translating dplyr code into SQL queries. dbplyr is part of an expanding ecosystem of packages meant to help analysts access and analyze data in databases. To learn more, visit our website dedicated to &lt;em>all things R and databases&lt;/em>: &lt;a href="http://db.rstudio.com/" class="uri">http://db.rstudio.com/&lt;/a>&lt;/p>
&lt;p>Install the latest version of dbplyr with:&lt;/p>
&lt;pre class="r">&lt;code>install.packages(&amp;quot;dbplyr&amp;quot;)&lt;/code>&lt;/pre>
&lt;div id="whats-new" class="section level2">
&lt;h2>What’s new?&lt;/h2>
&lt;p>Here are some highlights of new features and fixes found in this release. To see the full details please refer to the &lt;a href="https://github.com/tidyverse/dbplyr/blob/master/NEWS.md#dbplyr-120">release notes&lt;/a>:&lt;/p>
&lt;ul>
&lt;li>&lt;p>New custom translation for &lt;strong>Microsoft Access&lt;/strong> and &lt;a href="http://db.rstudio.com/databases/teradata/">Teradata&lt;/a>&lt;/p>&lt;/li>
&lt;li>&lt;p>&lt;a href="http://db.rstudio.com/databases/redshift/">Amazon Redshift&lt;/a> connections now point to the PostgreSQL translation.&lt;/p>&lt;/li>
&lt;li>Adds support for &lt;strong>two new database R packages&lt;/strong>. These new packages are fully &lt;a href="http://db.rstudio.com/dbi/">DBI&lt;/a>-compliant and tested with &lt;a href="https://cran.r-project.org/web/packages/DBItest/index.html">DBItest&lt;/a>. We recommend to use these instead of older packages:
&lt;ol style="list-style-type: decimal">
&lt;li>&lt;a href="https://cran.r-project.org/web/packages/RMariaDB/index.html">RMariaDB&lt;/a>, use in favor of RMySQL&lt;/li>
&lt;li>&lt;a href="https://cran.r-project.org/web/packages/RPostgres/index.html">RPostgres&lt;/a>, use in favor of RPostgreSQL&lt;/li>
&lt;/ol>&lt;/li>
&lt;li>&lt;a href="https://cran.r-project.org/web/packages/ROracle/index.html">ROracle&lt;/a> connections now point to the &lt;a href="http://db.rstudio.com/databases/oracle/">Oracle&lt;/a> translation.&lt;/li>
&lt;li>&lt;p>Cache query results using &lt;code>copy_to&lt;/code>. This feature is very useful because after cached, the results of a long running query can be iteratively analyzed without having to wait for the same base query to run over and over.&lt;/p>&lt;/li>
&lt;li>&lt;p>stringr functions: &lt;code>str_length()&lt;/code>, &lt;code>str_to_upper()&lt;/code>, &lt;code>str_to_lower()&lt;/code>, &lt;code>str_replace_all()&lt;/code>, &lt;code>str_detect()&lt;/code>, and &lt;code>str_trim()&lt;/code> are now supported.&lt;/p>&lt;/li>
&lt;li>&lt;p>&lt;code>in_schema()&lt;/code> should now work in more places, particularly in &lt;code>copy_to()&lt;/code>&lt;/p>&lt;/li>
&lt;li>&lt;p>For those who need to extract the resulting SQL query from dplyr code, there is now a new function called &lt;code>remote_query()&lt;/code>. Unlike &lt;code>show_query()&lt;/code>, &lt;code>remote_query()&lt;/code> returns a character object, and unlike &lt;code>sql_render()&lt;/code>, the new function automatically detects the type of database attached to the given dplyr code and translates accordingly. There are four additional functions that provide a standard API to get metadata about a remote &lt;code>tbl&lt;/code>, these are: &lt;code>remote_name()&lt;/code>, &lt;code>remote_con()&lt;/code>, &lt;code>remote_src()&lt;/code>, and &lt;code>remote_query_plan()&lt;/code>.&lt;/p>&lt;/li>
&lt;li>&lt;p>Adds support for temporary tables in Microsoft SQL Server. Additionally, the issue of certain operators working only in &lt;code>mutate()&lt;/code> or only in &lt;code>filter()&lt;/code> has been resolved.&lt;/p>&lt;/li>
&lt;li>&lt;p>Two new functions for developers: &lt;code>sql_aggregate()&lt;/code> and &lt;code>win_aggregate()&lt;/code>. They are for generating SQL and windowed SQL functions for aggregates.&lt;/p>&lt;/li>
&lt;/ul>
&lt;/div>
&lt;div id="caching-results" class="section level2">
&lt;h2>Caching results&lt;/h2>
&lt;p>The &lt;code>copy_to()&lt;/code> function is now able to &lt;strong>cache the results of a set of dplyr database transformations&lt;/strong>. An additional advantage is that &lt;code>copy_to()&lt;/code> uses the database to run and cache the data, so there is no data being transmitted back to R. For this feature to work, the user needs sufficient rights to create temporary tables in the database.&lt;/p>
&lt;pre class="r">&lt;code>con &amp;lt;- DBI::dbConnect(RSQLite::SQLite(), &amp;quot;:memory:&amp;quot;)
mtcars_db &amp;lt;- copy_to(con, rownames_to_column(mtcars), &amp;quot;mtcars&amp;quot;)
only_auto &amp;lt;- mtcars_db %&amp;gt;%
filter(am == 1) %&amp;gt;%
select(mpg, cyl, am)
auto &amp;lt;- copy_to(con, only_auto, &amp;quot;auto&amp;quot;) # New in dbplyr 1.2.0
head(auto)
#&amp;gt; # Source: lazy query [?? x 3]
#&amp;gt; # Database: sqlite 3.19.3 [:memory:]
#&amp;gt; mpg cyl am
#&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;
#&amp;gt; 1 21.0 6.00 1.00
#&amp;gt; 2 21.0 6.00 1.00
#&amp;gt; 3 22.8 4.00 1.00
#&amp;gt; 4 32.4 4.00 1.00
#&amp;gt; 5 30.4 4.00 1.00
#&amp;gt; 6 33.9 4.00 1.00&lt;/code>&lt;/pre>
&lt;p>If the set of dplyr transformations need to be cached to a &lt;strong>different database&lt;/strong>, &lt;code>copy_to()&lt;/code> is smart enough to download the data into memory in R, and then uploads the data to the target database.&lt;/p>
&lt;pre class="r">&lt;code>second_con &amp;lt;- DBI::dbConnect(RSQLite::SQLite(), &amp;quot;:memory:&amp;quot;)
second_auto &amp;lt;- copy_to(second_con, only_auto, &amp;quot;auto&amp;quot;) # New in dbplyr 1.2.0
head(second_auto)
#&amp;gt; # Source: lazy query [?? x 3]
#&amp;gt; # Database: sqlite 3.19.3 [:memory:]
#&amp;gt; mpg cyl am
#&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;
#&amp;gt; 1 21.0 6.00 1.00
#&amp;gt; 2 21.0 6.00 1.00
#&amp;gt; 3 22.8 4.00 1.00
#&amp;gt; 4 32.4 4.00 1.00
#&amp;gt; 5 30.4 4.00 1.00
#&amp;gt; 6 33.9 4.00 1.00&lt;/code>&lt;/pre>
&lt;/div>
&lt;div id="stringr-functions" class="section level2">
&lt;h2>stringr functions&lt;/h2>
&lt;p>Six stringr functions are now supported. Regular expression support varies from database to database, but most simple regular expressions should be ok. The functions are:&lt;/p>
&lt;ol style="list-style-type: decimal">
&lt;li>&lt;code>str_length()&lt;/code>&lt;/li>
&lt;li>&lt;code>str_to_upper()&lt;/code>&lt;/li>
&lt;li>&lt;code>str_to_lower()&lt;/code>&lt;/li>
&lt;li>&lt;code>str_replace_all()&lt;/code>&lt;/li>
&lt;li>&lt;code>str_detect()&lt;/code>&lt;/li>
&lt;li>&lt;code>str_trim()&lt;/code>&lt;/li>
&lt;/ol>
&lt;pre class="r">&lt;code>tbl(con, &amp;quot;mtcars&amp;quot;) %&amp;gt;%
head() %&amp;gt;%
select(rowname) %&amp;gt;%
mutate(
s1 = str_length(rowname), # New in dbplyr 1.2.0
s2 = str_to_upper(rowname), # New in dbplyr 1.2.0
s3 = str_to_lower(rowname), # New in dbplyr 1.2.0
s4 = str_replace_all(rowname, &amp;quot;M&amp;quot;, &amp;quot;X&amp;quot;), # New in dbplyr 1.2.0
s5 = str_detect(rowname, &amp;quot;M&amp;quot;), # New in dbplyr 1.2.0
s6 = str_trim(rowname) # New in dbplyr 1.2.0
)
#&amp;gt; # Source: lazy query [?? x 7]
#&amp;gt; # Database: sqlite 3.19.3 [:memory:]
#&amp;gt; rowname s1 s2 s3 s4 s5 s6
#&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;int&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;int&amp;gt; &amp;lt;chr&amp;gt;
#&amp;gt; 1 Mazda RX4 9 MAZDA RX4 mazda r~ Xazda ~ 0 Mazda ~
#&amp;gt; 2 Mazda RX4 Wag 13 MAZDA RX4 WAG mazda r~ Xazda ~ 0 Mazda ~
#&amp;gt; 3 Datsun 710 10 DATSUN 710 datsun ~ Datsun~ 0 Datsun~
#&amp;gt; 4 Hornet 4 Drive 14 HORNET 4 DRIVE hornet ~ Hornet~ 0 Hornet~
#&amp;gt; 5 Hornet Sportabout 17 HORNET SPORTABOUT hornet ~ Hornet~ 0 Hornet~
#&amp;gt; 6 Valiant 7 VALIANT valiant Valiant 0 Valiant&lt;/code>&lt;/pre>
&lt;/div>
&lt;div id="contributors" class="section level2">
&lt;h2>Contributors&lt;/h2>
&lt;p>A big thanks goes to those who made this release possible by contributing code or documentation: &lt;a href="https://github.com/DavisVaughan">@DavisVaughan&lt;/a>, &lt;a href="https://github.com/baileych">@baileych&lt;/a>, &lt;a href="https://github.com/Hong-Revo">@Hong-Revo&lt;/a>, &lt;a href="https://github.com/cwarden">@cwarden&lt;/a>, &lt;a href="https://github.com/zozlak">@zozlak&lt;/a>, &lt;a href="https://github.com/denismaciel">@denismaciel&lt;/a>, &lt;a href="https://github.com/jonassundman">@jonassundman&lt;/a>, &lt;a href="https://github.com/wibeasley">@wibeasley&lt;/a>, &lt;a href="https://github.com/mungojam">@mungojam&lt;/a>, &lt;a href="https://github.com/hoxo-m">@hoxo-m&lt;/a>, &lt;a href="https://github.com/dpprdan">@dpprdan&lt;/a>,&lt;a href="https://github.com/jimhester">@jimhester&lt;/a>, &lt;a href="https://github.com/krlmlr">@krlmlr&lt;/a>, and &lt;a href="https://github.com/javierluraschi">@javierluraschi&lt;/a>. Also, a thank you to those who helped up improve this package by suggesting features and reporting issues: &lt;a href="https://github.com/drf5n">@drf5n&lt;/a>, &lt;a href="https://github.com/larspijnappel">@larspijnappel&lt;/a>, &lt;a href="https://github.com/lbakerIsazi">@lbakerIsazi&lt;/a>, &lt;a href="https://github.com/mtmorgan">@mtmorgan&lt;/a>, &lt;a href="https://github.com/refik">@refik&lt;/a>, &lt;a href="https://github.com/sicarul">@sicarul&lt;/a>, and &lt;a href="https://github.com/vitallish">@vitallish&lt;/a>&lt;/p>
&lt;/div></description></item><item><title>tibble 1.4.1</title><link>https://www.tidyverse.org/blog/2018/01/tibble-1-4-1/</link><pubDate>Wed, 03 Jan 2018 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2018/01/tibble-1-4-1/</guid><description>
&lt;p>We’re excited to announce version 1.4.1 of the &lt;em>tibble&lt;/em> package. Tibbles are a modern reimagining of the data frame, keeping what time has shown to be effective, and throwing out what is not, with nicer default output too! Grab the latest version with:&lt;/p>
&lt;pre class="r">&lt;code>install.packages(&amp;quot;tibble&amp;quot;)&lt;/code>&lt;/pre>
&lt;p>This release contains the following major changes:&lt;/p>
&lt;ul>
&lt;li>Colored terminal output&lt;/li>
&lt;li>Compatibility fixes for code that expects data frames&lt;/li>
&lt;li>Improved &lt;code>add_column()&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>There are many other small improvements and bug fixes: please see the &lt;a href="https://github.com/tidyverse/tibble/releases/tag/v1.4.1">release notes&lt;/a> for a complete list.&lt;/p>
&lt;p>Thanks to &lt;a href="https://github.com/LaDilettante">Anh Le&lt;/a> for the &lt;code>add_cases()&lt;/code> alias, to &lt;a href="https://github.com/DavisVaughan">Davis Vaughan&lt;/a> for improving &lt;code>add_column()&lt;/code>, to &lt;a href="https://github.com/patperry">Patrick O. Perry&lt;/a> for converting C++ code to C, and to all the other contributors. Use the &lt;a href="https://github.com/tidyverse/tibble/issues">issue tracker&lt;/a> to submit bugs or suggest ideas, your contributions are always welcome.&lt;/p>
&lt;div id="colored-terminal-output" class="section level2">
&lt;h2>Colored terminal output&lt;/h2>
&lt;p>The most important change of this release is the use of color and other markup for the output in the terminal:&lt;/p>
&lt;div class="figure">
&lt;img src="https://www.tidyverse.org/images/tibble-1-4-1/screenshot.png" />
&lt;/div>
&lt;ul>
&lt;li>&lt;p>Numeric columns have two displays. If there is room, the full number is displayed, making it easy to compare order of magnitude. Digits after the first three are dimmed to emphasise the important components. Negative numbers are shown in red. The display switches to scientific format if there is not enough room.&lt;/p>&lt;/li>
&lt;li>&lt;p>Missing values get a yellow background. This makes it easier to distinguish the string &lt;code>&amp;quot;NA&amp;quot;&lt;/code> from a missing value.&lt;/p>&lt;/li>
&lt;li>&lt;p>Long character values and factors are abbreviated in order to fit more columns on screen.&lt;/p>&lt;/li>
&lt;/ul>
&lt;p>The highlighting is implemented by the new &lt;em>pillar&lt;/em> package, which also offers extension points for packages such as &lt;em>hms&lt;/em> that provide custom data types. See the &lt;a href="https://cran.r-project.org/web/packages/tibble/vignettes/extending.html">Extending tibble&lt;/a> vignette for details. We’re still figuring out how to use colour most effectively, so expect this to change in minor ways in the in future. If you have feedback, please let us know by &lt;a href="https://github.com/r-lib/pillar/issues">filing an issue&lt;/a> in the &lt;em>pillar&lt;/em> package.&lt;/p>
&lt;/div>
&lt;div id="compatibility-fixes" class="section level2">
&lt;h2>Compatibility fixes&lt;/h2>
&lt;p>Subsetting with logical or character indexes is now supported, just like with regular data frames:&lt;/p>
&lt;pre class="r">&lt;code>tbl &amp;lt;- tibble(a = 1:3, b = letters[1:3])
tbl
#&amp;gt; # A tibble: 3 x 2
#&amp;gt; a b
#&amp;gt; &amp;lt;int&amp;gt; &amp;lt;chr&amp;gt;
#&amp;gt; 1 1 a
#&amp;gt; 2 2 b
#&amp;gt; 3 3 c
tbl[c(TRUE, FALSE, TRUE), ]
#&amp;gt; # A tibble: 2 x 2
#&amp;gt; a b
#&amp;gt; &amp;lt;int&amp;gt; &amp;lt;chr&amp;gt;
#&amp;gt; 1 1 a
#&amp;gt; 2 3 c
tbl[c(&amp;quot;2&amp;quot;, &amp;quot;odd-row-name&amp;quot;), ]
#&amp;gt; # A tibble: 2 x 2
#&amp;gt; a b
#&amp;gt; &amp;lt;int&amp;gt; &amp;lt;chr&amp;gt;
#&amp;gt; 1 2 b
#&amp;gt; 2 NA &amp;lt;NA&amp;gt;&lt;/code>&lt;/pre>
&lt;p>Passing &lt;code>drop = TRUE&lt;/code> is now supported and gives the same result as for regular data frames:&lt;/p>
&lt;pre class="r">&lt;code>tbl[1, 2, drop = TRUE]
#&amp;gt; [1] &amp;quot;a&amp;quot;
tbl[1, drop = TRUE]
#&amp;gt; Warning: drop ignored
#&amp;gt; # A tibble: 3 x 1
#&amp;gt; a
#&amp;gt; &amp;lt;int&amp;gt;
#&amp;gt; 1 1
#&amp;gt; 2 2
#&amp;gt; 3 3&lt;/code>&lt;/pre>
&lt;p>Both changes make it easier to use tibbles with code that is designed to work with data frames.&lt;/p>
&lt;/div>
&lt;div id="improved-addition-of-columns" class="section level2">
&lt;h2>Improved addition of columns&lt;/h2>
&lt;p>The &lt;code>add_column()&lt;/code> functions now keeps all attributes of the original tibble, this is important for packages that extend tibbles such as &lt;a href="https://r-spatial.github.io/sf/">sf&lt;/a> or &lt;a href="https://business-science.github.io/tibbletime/">tibbletime&lt;/a>.&lt;/p>
&lt;pre class="r">&lt;code>library(tibbletime)
#&amp;gt;
#&amp;gt; Attaching package: &amp;#39;tibbletime&amp;#39;
#&amp;gt; The following object is masked from &amp;#39;package:stats&amp;#39;:
#&amp;gt;
#&amp;gt; filter
tbl_with_date &amp;lt;-
tibble(a = 1:3, date = Sys.Date() + a) %&amp;gt;%
tbl_time(date)
add_column(tbl_with_date, b = letters[1:3])
#&amp;gt; # A time tibble: 3 x 3
#&amp;gt; # Index: date
#&amp;gt; a date b
#&amp;gt; * &amp;lt;int&amp;gt; &amp;lt;date&amp;gt; &amp;lt;chr&amp;gt;
#&amp;gt; 1 1 2018-01-04 a
#&amp;gt; 2 2 2018-01-05 b
#&amp;gt; 3 3 2018-01-06 c&lt;/code>&lt;/pre>
&lt;/div>
&lt;div id="trailing-comma" class="section level2">
&lt;h2>Trailing comma&lt;/h2>
&lt;p>You can now add a trailing comma in function calls with an &lt;code>...&lt;/code> argument:&lt;/p>
&lt;pre class="r">&lt;code>tibble(
a = 1:3,
b = letters[1:3],
)
#&amp;gt; # A tibble: 3 x 2
#&amp;gt; a b
#&amp;gt; &amp;lt;int&amp;gt; &amp;lt;chr&amp;gt;
#&amp;gt; 1 1 a
#&amp;gt; 2 2 b
#&amp;gt; 3 3 c
add_column(
tbl,
c = LETTERS[1:3],
)
#&amp;gt; # A tibble: 3 x 3
#&amp;gt; a b c
#&amp;gt; &amp;lt;int&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt;
#&amp;gt; 1 1 a A
#&amp;gt; 2 2 b B
#&amp;gt; 3 3 c C&lt;/code>&lt;/pre>
&lt;p>This simplifies extending or adapting the code later, because you don’t need to remember to add or remove the trailing comma of the last function argument. (This functionality is available for all packages that support tidy evaluation, &lt;em>rlang&lt;/em> &amp;gt;= 0.1.6 is required.)&lt;/p>
&lt;/div>
&lt;div id="acknowledgments" class="section level2">
&lt;h2>Acknowledgments&lt;/h2>
&lt;p>We received issues, pull requests, and comments from 109 people since tibble 1.2.0. Thanks to everyone: &lt;a href="https://github.com/aalexandersson">@aalexandersson&lt;/a>, &lt;a href="https://github.com/adnbps">@adnbps&lt;/a>, &lt;a href="https://github.com/AkhilNairAmey">@AkhilNairAmey&lt;/a>, &lt;a href="https://github.com/alexhallam">@alexhallam&lt;/a>, &lt;a href="https://github.com/alibat">@alibat&lt;/a>, &lt;a href="https://github.com/amjiuzi">@amjiuzi&lt;/a>, &lt;a href="https://github.com/AndreMikulec">@AndreMikulec&lt;/a>, &lt;a href="https://github.com/andrewjpfeiffer">@andrewjpfeiffer&lt;/a>, &lt;a href="https://github.com/ashiklom">@ashiklom&lt;/a>, &lt;a href="https://github.com/atribe">@atribe&lt;/a>, &lt;a href="https://github.com/bapfeld">@bapfeld&lt;/a>, &lt;a href="https://github.com/barnettjacob">@barnettjacob&lt;/a>, &lt;a href="https://github.com/behrman">@behrman&lt;/a>, &lt;a href="https://github.com/BillDunlap">@BillDunlap&lt;/a>, &lt;a href="https://github.com/BruceZhaoR">@BruceZhaoR&lt;/a>, &lt;a href="https://github.com/cassiusoat">@cassiusoat&lt;/a>, &lt;a href="https://github.com/cboettig">@cboettig&lt;/a>, &lt;a href="https://github.com/cderv">@cderv&lt;/a>, &lt;a href="https://github.com/ckluss">@ckluss&lt;/a>, &lt;a href="https://github.com/ClaytonJY">@ClaytonJY&lt;/a>, &lt;a href="https://github.com/colearendt">@colearendt&lt;/a>, &lt;a href="https://github.com/csgillespie">@csgillespie&lt;/a>, &lt;a href="https://github.com/dalejbarr">@dalejbarr&lt;/a>, &lt;a href="https://github.com/dan87134">@dan87134&lt;/a>, &lt;a href="https://github.com/DavisVaughan">@DavisVaughan&lt;/a>, &lt;a href="https://github.com/ddiez">@ddiez&lt;/a>, &lt;a href="https://github.com/dhicks">@dhicks&lt;/a>, &lt;a href="https://github.com/dlpd">@dlpd&lt;/a>, &lt;a href="https://github.com/drewgendreau">@drewgendreau&lt;/a>, &lt;a href="https://github.com/drolejoel">@drolejoel&lt;/a>, &lt;a href="https://github.com/echasnovski">@echasnovski&lt;/a>, &lt;a href="https://github.com/edzer">@edzer&lt;/a>, &lt;a href="https://github.com/ElsLommelen">@ElsLommelen&lt;/a>, &lt;a href="https://github.com/etiennebr">@etiennebr&lt;/a>, &lt;a href="https://github.com/FabianRoger">@FabianRoger&lt;/a>, &lt;a href="https://github.com/garrettgman">@garrettgman&lt;/a>, &lt;a href="https://github.com/gavinsimpson">@gavinsimpson&lt;/a>, &lt;a href="https://github.com/geotheory">@geotheory&lt;/a>, &lt;a href="https://github.com/ginolhac">@ginolhac&lt;/a>, &lt;a href="https://github.com/hadley">@hadley&lt;/a>, &lt;a href="https://github.com/happyshows">@happyshows&lt;/a>, &lt;a href="https://github.com/heavywatal">@heavywatal&lt;/a>, &lt;a href="https://github.com/helix123">@helix123&lt;/a>, &lt;a href="https://github.com/holstius">@holstius&lt;/a>, &lt;a href="https://github.com/huftis">@huftis&lt;/a>, &lt;a href="https://github.com/ianmcook">@ianmcook&lt;/a>, &lt;a href="https://github.com/imanuelcostigan">@imanuelcostigan&lt;/a>, &lt;a href="https://github.com/janschulz">@janschulz&lt;/a>, &lt;a href="https://github.com/javierluraschi">@javierluraschi&lt;/a>, &lt;a href="https://github.com/jennybc">@jennybc&lt;/a>, &lt;a href="https://github.com/jimhester">@jimhester&lt;/a>, &lt;a href="https://github.com/joelgombin">@joelgombin&lt;/a>, &lt;a href="https://github.com/jonathan-g">@jonathan-g&lt;/a>, &lt;a href="https://github.com/kendonB">@kendonB&lt;/a>, &lt;a href="https://github.com/kevinushey">@kevinushey&lt;/a>, &lt;a href="https://github.com/khughitt">@khughitt&lt;/a>, &lt;a href="https://github.com/kismsu">@kismsu&lt;/a>, &lt;a href="https://github.com/krlmlr">@krlmlr&lt;/a>, &lt;a href="https://github.com/kwstat">@kwstat&lt;/a>, &lt;a href="https://github.com/LaDilettante">@LaDilettante&lt;/a>, &lt;a href="https://github.com/lcolladotor">@lcolladotor&lt;/a>, &lt;a href="https://github.com/lionel-">@lionel-&lt;/a>, &lt;a href="https://github.com/lpmarco">@lpmarco&lt;/a>, &lt;a href="https://github.com/m-sostero">@m-sostero&lt;/a>, &lt;a href="https://github.com/MarcusWalz">@MarcusWalz&lt;/a>, &lt;a href="https://github.com/matteodefelice">@matteodefelice&lt;/a>, &lt;a href="https://github.com/mattfidler">@mattfidler&lt;/a>, &lt;a href="https://github.com/mgirlich">@mgirlich&lt;/a>, &lt;a href="https://github.com/michaellevy">@michaellevy&lt;/a>, &lt;a href="https://github.com/MikeBadescu">@MikeBadescu&lt;/a>, &lt;a href="https://github.com/mkearney">@mkearney&lt;/a>, &lt;a href="https://github.com/mmuurr">@mmuurr&lt;/a>, &lt;a href="https://github.com/Monduiz">@Monduiz&lt;/a>, &lt;a href="https://github.com/mubeenarasack">@mubeenarasack&lt;/a>, &lt;a href="https://github.com/mundl">@mundl&lt;/a>, &lt;a href="https://github.com/nbenn">@nbenn&lt;/a>, &lt;a href="https://github.com/ncarchedi">@ncarchedi&lt;/a>, &lt;a href="https://github.com/NikNakk">@NikNakk&lt;/a>, &lt;a href="https://github.com/noamross">@noamross&lt;/a>, &lt;a href="https://github.com/ntguardian">@ntguardian&lt;/a>, &lt;a href="https://github.com/p0bs">@p0bs&lt;/a>, &lt;a href="https://github.com/patperry">@patperry&lt;/a>, &lt;a href="https://github.com/pgensler">@pgensler&lt;/a>, &lt;a href="https://github.com/phalexo">@phalexo&lt;/a>, &lt;a href="https://github.com/pssguy">@pssguy&lt;/a>, &lt;a href="https://github.com/r2evans">@r2evans&lt;/a>, &lt;a href="https://github.com/rentrop">@rentrop&lt;/a>, &lt;a href="https://github.com/richierocks">@richierocks&lt;/a>, &lt;a href="https://github.com/Rongpeng">@Rongpeng&lt;/a>, &lt;a href="https://github.com/s-fleck">@s-fleck&lt;/a>, &lt;a href="https://github.com/sainathadapa">@sainathadapa&lt;/a>, &lt;a href="https://github.com/sebschub">@sebschub&lt;/a>, &lt;a href="https://github.com/sibojan">@sibojan&lt;/a>, &lt;a href="https://github.com/slonik-az">@slonik-az&lt;/a>, &lt;a href="https://github.com/sskim47">@sskim47&lt;/a>, &lt;a href="https://github.com/t-kalinowski">@t-kalinowski&lt;/a>, &lt;a href="https://github.com/thercast">@thercast&lt;/a>, &lt;a href="https://github.com/thornend">@thornend&lt;/a>, &lt;a href="https://github.com/tjmahr">@tjmahr&lt;/a>, &lt;a href="https://github.com/trinker">@trinker&lt;/a>, &lt;a href="https://github.com/vnijs">@vnijs&lt;/a>, &lt;a href="https://github.com/vspinu">@vspinu&lt;/a>, &lt;a href="https://github.com/vvrably">@vvrably&lt;/a>, &lt;a href="https://github.com/wibom">@wibom&lt;/a>, &lt;a href="https://github.com/wpetry">@wpetry&lt;/a>, &lt;a href="https://github.com/yeedle">@yeedle&lt;/a>, &lt;a href="https://github.com/yihui">@yihui&lt;/a>, &lt;a href="https://github.com/yutannihilation">@yutannihilation&lt;/a>, and &lt;a href="https://github.com/Zedseayou">@Zedseayou&lt;/a>.&lt;/p>
&lt;/div></description></item><item><title>November/December in the tidyverse</title><link>https://www.tidyverse.org/blog/2017/12/nov-updates-2017/</link><pubDate>Fri, 29 Dec 2017 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2017/12/nov-updates-2017/</guid><description>
&lt;link href="https://www.tidyverse.org/rmarkdown-libs/font-awesome/css/font-awesome.min.css" rel="stylesheet" />
&lt;p>In an effort to keep the community up to date with the evolution of the tidyverse, we’ll be doing regular roundups cataloging the latest developments.&lt;/p>
&lt;section id="tidyverse-package-updates" class="level2">
&lt;h2>tidyverse package updates&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://www.tidyverse.org/articles/2017/11/tidyverse_1.2.0/">tidyverse 1.2.0 &lt;i class="fa fa-file ">&lt;/i>&lt;/a> (&lt;a href="https://github.com/tidyverse/tidyverse/releases/">release notes&lt;/a>)
&lt;ul>
&lt;li>membership changes, with &lt;a href="http://stringr.tidyverse.org">stringr&lt;/a> and &lt;a href="http://forcats.tidyverse.org">forcats&lt;/a> moving to the core, and the addition of the &lt;a href="http://reprex.tidyverse.org/">reprex&lt;/a> package&lt;/li>
&lt;/ul>&lt;/li>
&lt;li>&lt;p>&lt;a href="https://www.tidyverse.org/articles/2017/11/lubridate-1.7.0/">lubridate 1.7.0 &lt;i class="fa fa-file ">&lt;/i>&lt;/a> (&lt;a href="https://github.com/tidyverse/lubridate/releases">release notes&lt;/a>)&lt;/p>&lt;/li>
&lt;li>&lt;p>rlang 0.1.4 (&lt;a href="https://github.com/tidyverse/rlang/releases">release notes&lt;/a>)&lt;/p>&lt;/li>
&lt;li>&lt;p>tidyselect 0.2.3 (&lt;a href="https://github.com/tidyverse/tidyselect/releases">release notes&lt;/a>)&lt;/p>&lt;/li>
&lt;/ul>
&lt;section id="tidyselect" class="level3">
&lt;h3>tidyselect&lt;/h3>
&lt;p>tidyselect provides a common back-end for &lt;code>dplyr::select()&lt;/code>, &lt;code>tidyr::gather()&lt;/code>, as well as for modelling packages. It is also the source of selection helpers, such as &lt;code>everything()&lt;/code>, and &lt;code>starts_with()&lt;/code>. tidyselect allows you to create selecting verbs that are consistent across tidyverse packages.&lt;/p>
&lt;/section>
&lt;section id="tidy-models" class="level3">
&lt;h3>tidy models&lt;/h3>
&lt;p>&lt;a href="https://topepo.github.io/yardstick/">yardstick&lt;/a> allows you to easily create tidy performance estimates. Using a syntax similar to dplyr’s you can compute common performance metrics, such as precision, and recall (for classification), or numeric metric outcomes for regression, and have them returned in a tidy data frame.&lt;/p>
&lt;p>&lt;a href="https://topepo.github.io/recipes/">recipes&lt;/a> is an extensible framework for feature selection and the creation of preprocess design matrices, which can then be applied to statistical and machine learning models. The updated version of recipes includes a tidy method for many of the step functions. The tidy method returns relevant information about the step. This could include estimated parameters or which variables were affected by the step. &lt;a href="https://topepo.github.io/recipes/news/index.html">NEWS&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://topepo.github.io/rsample/">rsample&lt;/a>’s major upgrade from caret is that it allows for &lt;em>nested&lt;/em> resampling. The goal is to have a modular, extensible set of methods that can be used across R packages for traditional resampling techniques, and estimating model performance. rsample can be used to create objects containing resamples of the original data, allowing you to create a model and optimization parameters with placeholders for features to be defined later. The &lt;a href="https://topepo.github.io/rsample/">package website&lt;/a> has examples for resampling time series, survival models, and neural networks using &lt;code>tensorflow&lt;/code>. &lt;a href="https://topepo.github.io/rsample/news/index.html">NEWS&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://topepo.github.io/tidyposterior/">tidyposterior&lt;/a> is used to conduct Bayesian &lt;em>post hoc&lt;/em> analyses of resampling results generated by models. It can be considered an upgraded version of &lt;code>caret::resample&lt;/code>. Though it works natively with rsample, it can be used with any data frame of results.&lt;/p>
&lt;/section>
&lt;/section>
&lt;section id="r-lib" class="level2">
&lt;h2>r-lib&lt;/h2>
&lt;p>While the tidyverse consists of highly-opinionated tools for data science; r-lib contains mostly-unopinionated infrastructure tools with fewer dependencies.&lt;/p>
&lt;section id="package-updates" class="level3">
&lt;h3>package updates&lt;/h3>
&lt;ul>
&lt;li>&lt;p>&lt;a href="https://www.tidyverse.org/articles/2017/11/withr-2.1.0/">withr 2.1.0 &lt;i class="fa fa-file ">&lt;/i>&lt;/a> (&lt;a href="https://github.com/r-lib/withr/releases">release notes&lt;/a>)&lt;/p>&lt;/li>
&lt;li>&lt;p>&lt;a href="https://www.tidyverse.org/articles/2017/11/usethis-1.0.0/">usethis 1.0.0 (and 1.1.0) &lt;i class="fa fa-file ">&lt;/i>&lt;/a> (&lt;a href="https://github.com/r-lib/usethis/releases/tag/v1.1.0">release notes&lt;/a>)&lt;/p>&lt;/li>
&lt;li>&lt;p>cli 1.0.0 now on &lt;a href="https://cran.r-project.org/web/packages/cli/">CRAN&lt;/a>&lt;/p>&lt;/li>
&lt;li>&lt;p>roxygen2md 0.4.0 (&lt;a href="https://github.com/r-lib/roxygen2md/releases/tag/v0.0-4">release notes&lt;/a>)&lt;/p>&lt;/li>
&lt;/ul>
&lt;/section>
&lt;/section></description></item><item><title>tidyverse 1.2.0</title><link>https://www.tidyverse.org/blog/2017/11/tidyverse_1.2.0/</link><pubDate>Wed, 15 Nov 2017 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2017/11/tidyverse_1.2.0/</guid><description>
&lt;p>We are pleased to announce the release of &lt;a href="https://github.com/tidyverse/tidyverse/releases">tidyverse 1.2.0&lt;/a> on CRAN (now 1.2.1, following some minor fixes) includes updates in tidyverse package membership, as well as to tidyverse functions themselves.&lt;/p>
&lt;p>The latest version of tidyverse can be installed with:&lt;/p>
&lt;pre class="r">&lt;code>install.packages(&amp;quot;tidyverse&amp;quot;)&lt;/code>&lt;/pre>
&lt;section id="changes-in-tidyverse-membership" class="level2">
&lt;h2>Changes in tidyverse membership&lt;/h2>
&lt;section id="addition-of-the-reprex-package" class="level3">
&lt;h3>Addition of the reprex package&lt;/h3>
&lt;p>Though it’s been a mainstay of the tidyverse &lt;a href="https://www.tidyverse.org/help/">help section&lt;/a>, 1.2.0 marks the official addition of &lt;a href="http://reprex.tidyverse.org/">reprex&lt;/a> (short for &lt;strong>repr&lt;/strong>oducible &lt;strong>ex&lt;/strong>ample) to the tidyverse.&lt;/p>
&lt;p>This means that you can now access the handy reprex &lt;strong>addins&lt;/strong> from the RStudio drop-down menu.&lt;/p>
&lt;p>&lt;img src = "/images/tidyverse_1.2.0/reprex_addin.png" />&lt;/p>
&lt;/section>
&lt;section id="updates-to-tidyverse-core" class="level3">
&lt;h3>Updates to tidyverse core&lt;/h3>
&lt;p>The &lt;a href="http://stringr.tidyverse.org/">stringr&lt;/a> and &lt;a href="http://forcats.tidyverse.org/">forcats&lt;/a> packages (for string, and categorical variable manipulation, respectively) have joined &lt;a href="http://ggplot2.tidyverse.org/">ggplot2&lt;/a>, &lt;a href="http://dplyr.tidyverse.org/">dplyr&lt;/a>, &lt;a href="http://tidyr.tidyverse.org/">tidyr&lt;/a>, &lt;a href="http://readr.tidyverse.org/">readr&lt;/a>, &lt;a href="http://purrr.tidyverse.org/">purrr&lt;/a>, and &lt;a href="http://tibble.tidyverse.org/">tibble&lt;/a> to make up the core tidyverse.&lt;/p>
&lt;p>Running &lt;code>library(tidyverse)&lt;/code> attaches these core packages in the current R session. On attach, tidyverse now makes better use of horizontal space, printing packages and versions in two columns (see below). Additionally, packages that have already been attached are not be printed, and development versions are highlighted in red. You can suppress this message using &lt;code>suppressPackageStartupMessages()&lt;/code> or by setting &lt;code>options(tidyverse.quiet = TRUE)&lt;/code>.&lt;/p>
&lt;p>&lt;img src = "/images/tidyverse_1.2.0/tidyverse_1-2-0_pkg_load.gif" />&lt;/p>
&lt;/section>
&lt;/section>
&lt;section id="other-improvements" class="level2">
&lt;h2>Other improvements&lt;/h2>
&lt;p>While a comprehensive list of changes can be found in the &lt;a href="https://github.com/tidyverse/tidyverse/releases">release notes&lt;/a>, other highlights include:&lt;/p>
&lt;ul>
&lt;li>&lt;p>&lt;code>tidyverse_conflicts()&lt;/code> now prints all conflicts involving at least one tidyverse package (including intra-tidyverse conflicts, omitted in previous versions)&lt;/p>&lt;/li>
&lt;li>&lt;p>Addition of a &lt;code>tidyverse_logo()&lt;/code> function.&lt;/p>&lt;/li>
&lt;/ul>
&lt;p>&lt;img src = "/images/tidyverse_1.2.0/tidyverse_logo_function.gif" />&lt;/p>
&lt;section id="acknowledgements" class="level3">
&lt;h3>Acknowledgements&lt;/h3>
&lt;p>A big thanks to all of the community members who contributed code and opened issues since the last release: &lt;a href="https://github.com/dchiu911">Derek Chiu&lt;/a>, &lt;a href="https://github.com/mdlincoln">Matthew Lincoln&lt;/a>, &lt;a href="https://github.com/michaeltoth">Michael Toth&lt;/a> and &lt;a href="https://github.com/serhatcevikel">Serhat Cevikel&lt;/a>.&lt;/p>
&lt;/section>
&lt;/section></description></item><item><title>lubridate 1.7.0</title><link>https://www.tidyverse.org/blog/2017/11/lubridate-1.7.0/</link><pubDate>Wed, 01 Nov 2017 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2017/11/lubridate-1.7.0/</guid><description>
&lt;p>We are pleased to announce that &lt;a href="https://cran.r-project.org/web/packages/lubridate/index.html">lubridate 1.7.0&lt;/a> is now on CRAN! For a complete set of changes please see the release &lt;a href="https://github.com/tidyverse/lubridate/releases/tag/v1.7.0">NEWS&lt;/a>.&lt;/p>
&lt;p>Lubridate is a package that makes working with date-time and time-span objects easier. It provides fast and user friendly parsing of date-time strings, extraction and updating of components of a date-time objects (years, months, days etc.) and algebraic manipulation on date-time and time-span objects.&lt;/p>
&lt;p>Here is a brief walk-through of the prominent new features in 1.7.0.&lt;/p>
&lt;div id="built-in-cctz-and-much-faster-update-and-force_tz" class="section level2">
&lt;h2>Built-in CCTZ and much faster &lt;code>update&lt;/code> and &lt;code>force_tz&lt;/code>&lt;/h2>
&lt;p>From this version lubridate relies on google’s &lt;a href="https://github.com/google/cctz">CCTZ&lt;/a> library for the date-time updates and time-zone manipulation. This means that &lt;code>force_tz&lt;/code>, &lt;code>update&lt;/code>, &lt;code>round&lt;/code>ing and a range of arithmetic operations on timespans are now considerably faster.&lt;/p>
&lt;/div>
&lt;div id="vectorized-time-zone-manipulation" class="section level2">
&lt;h2>Vectorized time-zone manipulation&lt;/h2>
&lt;p>Often date-time data comes with heterogeneous time-zones. For example, you might have a character vector of date-times and a separate vector of time-zones. In such cases you can parse your date-time vector in one time zone (&lt;code>UTC&lt;/code>) and then “enforce” the heterogeneous time-zones with &lt;code>force_tzs&lt;/code>.&lt;/p>
&lt;pre class="r">&lt;code>x &amp;lt;- ymd_hms(c(&amp;quot;2009-08-01 00:00:00&amp;quot;, &amp;quot;2009-08-01 00:00:00&amp;quot;))
tzs &amp;lt;- c(&amp;quot;America/New_York&amp;quot;, &amp;quot;Europe/Amsterdam&amp;quot;)
force_tzs(x, tzones = tzs)
##=&amp;gt; [1] &amp;quot;2009-08-01 04:00:00 UTC&amp;quot; &amp;quot;2009-07-31 22:00:00 UTC&amp;quot;
force_tzs(x, tzones = tzs, tzone_out = &amp;quot;America/New_York&amp;quot;)
##=&amp;gt; [1] &amp;quot;2009-08-01 00:00:00 EDT&amp;quot; &amp;quot;2009-07-31 18:00:00 EDT&amp;quot;&lt;/code>&lt;/pre>
&lt;p>Note that first &lt;code>force_tzs&lt;/code> call produced a vector of instants in UTC time-zone, for the second call we specified the desired time-zone of the output vector with the &lt;code>tzone_out&lt;/code> argument. This is needed as R’s date-time vectors cannot represent heterogeneous time-zones. For the same reason, the counterpart of &lt;code>with_tz&lt;/code>, &lt;code>with_tzs&lt;/code>, does not exist. Instead, &lt;code>local_time&lt;/code> should cover the &lt;code>with_tzs&lt;/code> use case in most situations.&lt;/p>
&lt;p>New &lt;code>local_time&lt;/code> function retrieves day clock time of the input vector in the specified time zones. It returns a &lt;code>difftime&lt;/code> object and it is vectorized over both date-time and time-zone arguments:&lt;/p>
&lt;pre class="r">&lt;code>x &amp;lt;- ymd_hms(c(&amp;quot;2009-08-01 01:02:03&amp;quot;, &amp;quot;2009-08-01 10:20:30&amp;quot;))
local_time(x, units = &amp;quot;hours&amp;quot;)
##=&amp;gt; Time differences in hours
##=&amp;gt; [1] 1.034167 10.341667
x &amp;lt;- ymd_hms(c(&amp;quot;2009-08-01 00:00:00&amp;quot;, &amp;quot;2009-08-01 00:00:00&amp;quot;))
tzs &amp;lt;- c(&amp;quot;America/New_York&amp;quot;, &amp;quot;Europe/Amsterdam&amp;quot;)
local_time(x, tzs, units = &amp;quot;hours&amp;quot;)
##=&amp;gt; Time differences in hours
##=&amp;gt; [1] 20 2&lt;/code>&lt;/pre>
&lt;/div>
&lt;div id="new-cutoff_2000-parameter-in-parsing-functions" class="section level2">
&lt;h2>New &lt;code>cutoff_2000&lt;/code> parameter in parsing functions&lt;/h2>
&lt;p>Lower level lubridate parser functions (&lt;code>parse_datetime2&lt;/code>,&lt;code>fast_strptime&lt;/code>) now accept &lt;code>cutoff_2000&lt;/code> parameter to determine when the parsing of &lt;code>yy&lt;/code> format should output 19th or 20th century.&lt;/p>
&lt;pre class="r">&lt;code>x &amp;lt;- c(&amp;quot;50-01-01&amp;quot;, &amp;quot;70-01-01&amp;quot;)
parse_date_time2(x, &amp;quot;ymd&amp;quot;)
##=&amp;gt; [1] &amp;quot;2050-01-01 UTC&amp;quot; &amp;quot;1970-01-01 UTC&amp;quot;
parse_date_time2(x, &amp;quot;ymd&amp;quot;, cutoff_2000 = 30)
##=&amp;gt; [1] &amp;quot;1950-01-01 UTC&amp;quot; &amp;quot;1970-01-01 UTC&amp;quot;&lt;/code>&lt;/pre>
&lt;p>By default &lt;code>cutoff_2000&lt;/code> is 68 to comply with R’s &lt;code>strptime&lt;/code> function.&lt;/p>
&lt;p>This feature was not propagated to higher level parsing function because base &lt;code>strptime&lt;/code>, on which those occasionally rely, doesn’t support this option.&lt;/p>
&lt;/div>
&lt;div id="functions-wday-and-month-are-now-localized" class="section level2">
&lt;h2>Functions &lt;code>wday&lt;/code> and &lt;code>month&lt;/code> are now localized&lt;/h2>
&lt;p>When &lt;code>label=TRUE&lt;/code> &lt;code>wday&lt;/code> and &lt;code>month&lt;/code> extractors return localized strings:&lt;/p>
&lt;pre class="r">&lt;code>Sys.setlocale(locale = &amp;quot;zh_CN.utf8&amp;quot;)
##=&amp;gt; [1] &amp;quot;LC_CTYPE=zh_CN.utf8;LC_NUMERIC=C;LC_TIME=zh_CN.utf8;LC_COLLATE=zh_CN.utf8;LC_MONETARY=zh_CN.utf8;LC_MESSAGES=C;LC_PAPER=en_GB.UTF-8;LC_NAME=C;LC_ADDRESS=C;LC_TELEPHONE=C;LC_MEASUREMENT=en_GB.UTF-8;LC_IDENTIFICATION=C&amp;quot;
wday(now(), label = TRUE)
##=&amp;gt; [1] 三
##=&amp;gt; Levels: 日 &amp;lt; 一 &amp;lt; 二 &amp;lt; 三 &amp;lt; 四 &amp;lt; 五 &amp;lt; 六
month(now(), label = TRUE)
##=&amp;gt; [1] 11月
##=&amp;gt; 12 Levels: 1月 &amp;lt; 2月 &amp;lt; 3月 &amp;lt; 4月 &amp;lt; 5月 &amp;lt; 6月 &amp;lt; 7月 &amp;lt; 8月 &amp;lt; ... &amp;lt; 12月&lt;/code>&lt;/pre>
&lt;p>Please note that for this reason using labels for comparison is not recommended. You should use numeric output instead. Otherwise your code might not work on other computers.&lt;/p>
&lt;/div>
&lt;div id="several-functions-gained-the-week_start-parameter" class="section level2">
&lt;h2>Several functions gained the &lt;code>week_start&lt;/code> parameter&lt;/h2>
&lt;p>Functions for which depend on the week-start conventions (&lt;code>wday&lt;/code>, &lt;code>wday&amp;lt;-&lt;/code>, &lt;code>floor_date&lt;/code>, &lt;code>ceiling_date&lt;/code> and &lt;code>round_date&lt;/code>) now accept &lt;code>week_start&lt;/code> argument which defaults to &lt;code>getOption(&amp;quot;lubridate.week.start&amp;quot;, 7)&lt;/code>.&lt;/p>
&lt;pre class="r">&lt;code>x &amp;lt;- today()
wday(x, label = TRUE, abbr = FALSE)
##=&amp;gt; [1] 星期三
##=&amp;gt; 7 Levels: 星期日 &amp;lt; 星期一 &amp;lt; 星期二 &amp;lt; 星期三 &amp;lt; 星期四 &amp;lt; ... &amp;lt; 星期六
wday(x)
##=&amp;gt; [1] 4
wday(x, week_start = 2)
##=&amp;gt; [1] 2&lt;/code>&lt;/pre>
&lt;/div>
&lt;div id="rounding-to-fraction-of-a-second" class="section level2">
&lt;h2>Rounding to fraction of a second&lt;/h2>
&lt;p>R’s date-time format (POSIXct) is accurate up to microseconds, thus it makes sense to round to fractions of a second. Unfortunately R currently prints fractional seconds incorrectly which can lead to confusion:&lt;/p>
&lt;pre class="r">&lt;code>## print fractional seconds
options(digits.secs=6, digits = 13)
x &amp;lt;- ymd_hms(&amp;quot;2009-08-03 12:01:59.031&amp;quot;)
rx &amp;lt;- round_date(x, &amp;quot;.01sec&amp;quot;)
cx &amp;lt;- ceiling_date(x, &amp;quot;.01sec&amp;quot;)
c(rx, cx)
##=&amp;gt; [1] &amp;quot;2009-08-03 14:01:59.02 CEST&amp;quot; &amp;quot;2009-08-03 14:01:59.03 CEST&amp;quot;
as.double(c(rx, cx))
##=&amp;gt; [1] 1249300919.03 1249300919.04&lt;/code>&lt;/pre>
&lt;p>So, fractional rounding and ceiling work, but don’t be taken aback by incorrect printing;)&lt;/p>
&lt;/div>
&lt;div id="new-epiweek-and-epiyear-functions" class="section level2">
&lt;h2>New &lt;code>epiweek&lt;/code> and &lt;code>epiyear&lt;/code> functions&lt;/h2>
&lt;p>New functions &lt;code>epiyear&lt;/code> and &lt;code>epiweek&lt;/code> are the US CDC version of epidemiological weeks and years. They follow same rules as &lt;code>isoweek&lt;/code> and &lt;code>isoyear&lt;/code> but with the week starting on Sunday. In other parts of the world the convention is to start epidemiological weeks on Monday, which is then the same as for &lt;code>isoweek&lt;/code> and &lt;code>isoyear&lt;/code>.&lt;/p>
&lt;/div></description></item><item><title>glue 1.2.0</title><link>https://www.tidyverse.org/blog/2017/10/glue-1.2.0/</link><pubDate>Tue, 31 Oct 2017 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2017/10/glue-1.2.0/</guid><description>
&lt;p>&lt;a href="http://glue.tidyverse.org">glue 1.2.0&lt;/a> is now available on CRAN! &lt;a href="http://glue.tidyverse.org">glue&lt;/a> is designed to make it easy to interpolate (“glue”) your data into strings. Compared to equivalents like &lt;code>paste()&lt;/code> and &lt;code>sprintf()&lt;/code> it is easier to write and less time consuming to maintain. It also has no non-base dependencies so is easy to include in packages.&lt;/p>
&lt;p>Install the latest version with:&lt;/p>
&lt;pre class="r">&lt;code>install.packages(&amp;quot;glue&amp;quot;)&lt;/code>&lt;/pre>
&lt;p>glue has three primary functions, &lt;code>glue()&lt;/code>, &lt;code>glue_data()&lt;/code> and &lt;code>collapse()&lt;/code>. &lt;code>glue()&lt;/code> works in a similar way to double quotes &lt;code>&amp;quot;&lt;/code> in a shell or python’s &lt;a href="https://www.python.org/dev/peps/pep-0498/">String Interpolation&lt;/a>. You surround the code you want evaluated by &lt;code>{}&lt;/code> and the value of the expression is inserted into the string.&lt;/p>
&lt;pre class="r">&lt;code>name &amp;lt;- &amp;quot;Fred&amp;quot;
age &amp;lt;- 50
anniversary &amp;lt;- as.Date(&amp;quot;1991-10-12&amp;quot;)
glue(&amp;#39;
My name is {name}
my age next year is {age + 1}
my anniversary is {format(anniversary, &amp;quot;%A, %B %d, %Y&amp;quot;)}
&amp;#39;)
#&amp;gt; My name is Fred
#&amp;gt; my age next year is 51
#&amp;gt; my anniversary is Saturday, October 12, 1991&lt;/code>&lt;/pre>
&lt;p>glue is also vectorized over its inputs.&lt;/p>
&lt;pre class="r">&lt;code>glue(&amp;#39;
{month.abb} is short for {month.name}
&amp;#39;)
#&amp;gt; Jan is short for January
#&amp;gt; Feb is short for February
#&amp;gt; Mar is short for March
#&amp;gt; Apr is short for April
#&amp;gt; May is short for May
#&amp;gt; Jun is short for June
#&amp;gt; Jul is short for July
#&amp;gt; Aug is short for August
#&amp;gt; Sep is short for September
#&amp;gt; Oct is short for October
#&amp;gt; Nov is short for November
#&amp;gt; Dec is short for December&lt;/code>&lt;/pre>
&lt;p>&lt;code>glue_data()&lt;/code> works like &lt;code>glue()&lt;/code>, but instead of looking up its variables from the calling environment it looks them up from the first argument (usually a data frame or tibble). This makes &lt;code>glue_data()&lt;/code> very useful within pipe chains.&lt;/p>
&lt;pre class="r">&lt;code>library(magrittr)
mtcars$model &amp;lt;- rownames(mtcars)
mtcars %&amp;gt;%
head %&amp;gt;%
glue_data(&amp;quot;The {model} has {gear} gears, {cyl} cylinders, and {hp} horsepower.&amp;quot;)
#&amp;gt; The Mazda RX4 has 4 gears, 6 cylinders, and 110 horsepower.
#&amp;gt; The Mazda RX4 Wag has 4 gears, 6 cylinders, and 110 horsepower.
#&amp;gt; The Datsun 710 has 4 gears, 4 cylinders, and 93 horsepower.
#&amp;gt; The Hornet 4 Drive has 3 gears, 6 cylinders, and 110 horsepower.
#&amp;gt; The Hornet Sportabout has 3 gears, 8 cylinders, and 175 horsepower.
#&amp;gt; The Valiant has 3 gears, 6 cylinders, and 105 horsepower.&lt;/code>&lt;/pre>
&lt;p>&lt;code>collapse()&lt;/code> is used to combine multiple values into one. The &lt;code>last&lt;/code> argument is used to change the separator for the last value.&lt;/p>
&lt;pre class="r">&lt;code>collapse(1:5, &amp;quot;, &amp;quot;, last = &amp;quot;, and &amp;quot;)
#&amp;gt; 1, 2, 3, 4, and 5&lt;/code>&lt;/pre>
&lt;div id="glue-transformers" class="section level2">
&lt;h2>glue transformers&lt;/h2>
&lt;p>New to glue 1.2.0 are transformer functions, which allow you to define custom behavior for glue functions. For example a &lt;code>collapse_transformer()&lt;/code> which automatically collapses any blocks which end with &lt;code>*&lt;/code>.&lt;/p>
&lt;pre class="r">&lt;code>collapse_transformer &amp;lt;- function(regex = &amp;quot;[*]$&amp;quot;, ...) {
function(code, envir) {
if (grepl(regex, code)) {
code &amp;lt;- sub(regex, &amp;quot;&amp;quot;, code)
}
res &amp;lt;- evaluate(code, envir)
collapse(res, ...)
}
}
glue(&amp;quot;
{1:5*}
{letters[1:5]*}&amp;quot;,
.transformer = collapse_transformer(sep = &amp;quot;, &amp;quot;, last = &amp;quot;, and &amp;quot;))
#&amp;gt; 1, 2, 3, 4, and 5
#&amp;gt; a, b, c, d, and e&lt;/code>&lt;/pre>
&lt;p>Or an sprintf transformer which lets you use sprintf style numeric formatting with glue.&lt;/p>
&lt;pre class="r">&lt;code>sprintf_transformer &amp;lt;- function(code, envir) {
m &amp;lt;- regexpr(&amp;quot;%.+$&amp;quot;, code)
if (m != -1) {
format &amp;lt;- regmatches(code, m)
regmatches(code, m) &amp;lt;- &amp;quot;&amp;quot;
res &amp;lt;- evaluate(code, envir)
do.call(sprintf, list(format, res))
} else {
evaluate(code, envir)
}
}
glue_fmt &amp;lt;- function(..., .envir = parent.frame()) {
glue(..., .transformer = sprintf_transformer, .envir = .envir)
}
glue_fmt(&amp;quot;π = {pi%.5f}&amp;quot;)
#&amp;gt; π = 3.14159&lt;/code>&lt;/pre>
&lt;/div>
&lt;div id="glue_sql" class="section level2">
&lt;h2>glue_sql()&lt;/h2>
&lt;p>Also new to glue 1.2.0 is &lt;code>glue_sql()&lt;/code> and &lt;code>glue_sql_data()&lt;/code>, which are helper functions defined with glue transformers to make it easy and safe to construct SQL statements.&lt;/p>
&lt;p>Using &lt;code>glue_sql()&lt;/code> values are automatically quoted appropriately and variables can be quoted with backticks.&lt;/p>
&lt;pre class="r">&lt;code>con &amp;lt;- DBI::dbConnect(RSQLite::SQLite(), &amp;quot;:memory:&amp;quot;)
colnames(iris) &amp;lt;- gsub(&amp;quot;[.]&amp;quot;, &amp;quot;_&amp;quot;, tolower(colnames(iris)))
DBI::dbWriteTable(con, &amp;quot;iris&amp;quot;, iris)
var &amp;lt;- &amp;quot;sepal_width&amp;quot;
tbl &amp;lt;- &amp;quot;iris&amp;quot;
num &amp;lt;- 2
val &amp;lt;- &amp;quot;setosa&amp;quot;
glue_sql(&amp;quot;
SELECT {`var`}
FROM {`tbl`}
WHERE {`tbl`}.sepal_length &amp;gt; {num}
AND {`tbl`}.species = {val}
&amp;quot;, .con = con)
#&amp;gt; &amp;lt;SQL&amp;gt; SELECT `sepal_width`
#&amp;gt; FROM `iris`
#&amp;gt; WHERE `iris`.sepal_length &amp;gt; 2
#&amp;gt; AND `iris`.species = &amp;#39;setosa&amp;#39;&lt;/code>&lt;/pre>
&lt;/div>
&lt;div id="other-changes" class="section level2">
&lt;h2>Other changes&lt;/h2>
&lt;p>There are many other bug fixes and other minor improvements. You can see a complete list in the &lt;a href="https://github.com/tidyverse/glue/releases/tag/v1.2.0">release notes&lt;/a>.&lt;/p>
&lt;p>A big thanks goes to all the community members who contributed code and opened issues since the last release! (&lt;a href="https://github.com/artemklevtsov">@artemklevtsov&lt;/a>, &lt;a href="https://github.com/daroczig">@daroczig&lt;/a>, &lt;a href="https://github.com/DarwinAwardWinner">@DarwinAwardWinner&lt;/a>, &lt;a href="https://github.com/edarague">@edarague&lt;/a>, &lt;a href="https://github.com/hadley">@hadley&lt;/a>, &lt;a href="https://github.com/hughjonesd">@hughjonesd&lt;/a>, &lt;a href="https://github.com/jennybc">@jennybc&lt;/a>, &lt;a href="https://github.com/jimhester">@jimhester&lt;/a>, &lt;a href="https://github.com/jjchern">@jjchern&lt;/a>, &lt;a href="https://github.com/klmr">@klmr&lt;/a>, &lt;a href="https://github.com/krlmlr">@krlmlr&lt;/a>, &lt;a href="https://github.com/lionel-">@lionel-&lt;/a>, &lt;a href="https://github.com/mgirlich">@mgirlich&lt;/a>, &lt;a href="https://github.com/mmuurr">@mmuurr&lt;/a>, &lt;a href="https://github.com/npjc">@npjc&lt;/a>, &lt;a href="https://github.com/pssguy">@pssguy&lt;/a>, and &lt;a href="https://github.com/robinsones">@robinsones&lt;/a>)&lt;/p>
&lt;/div></description></item><item><title>Erratum tidyr 0.7.0</title><link>https://www.tidyverse.org/blog/2017/09/erratum-tidyr-0.7.0/</link><pubDate>Mon, 04 Sep 2017 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2017/09/erratum-tidyr-0.7.0/</guid><description>
&lt;p>In &lt;a href="http://www.tidyverse.org/articles/2017/08/tidyr-0.7.0/">tidyr 0.7.0&lt;/a>, we introduced a stronger distinction between data expressions and context expressions for selection verbs like &lt;code>gather()&lt;/code>. However that change caused a lot of trouble and confusion and we have updated &lt;code>tidyselect&lt;/code> (the backend for selection functions) to revert that behaviour. In that article, we provide a few comments on these changes as well as some notes on good practices for writing functions with tidyverse tools. Finally we introduce two new selection features that help write safer code: improved support for strings and character vectors and a new selection helper &lt;code>last_col()&lt;/code>.&lt;/p>
&lt;p>You can install the new version of tidyselect from CRAN:&lt;/p>
&lt;pre class="r">&lt;code>install.packages(&amp;quot;tidyselect&amp;quot;)&lt;/code>&lt;/pre>
&lt;div id="updated-selection-rules" class="section level3">
&lt;h3>Updated selection rules&lt;/h3>
&lt;p>Since tidyr 0.7.0, selecting functions like &lt;code>gather()&lt;/code> use the tidyselect package as backend. Tidyselect was extracted from dplyr and provides the mechanism for helpers like &lt;code>starts_with()&lt;/code> or &lt;code>everything()&lt;/code>. However, tidyselect had one big change compared to dplyr: data expressions could no longer refer to contextual variables. A &lt;strong>data&lt;/strong> expression is defined as either a bare symbol like &lt;code>var&lt;/code>, or a call like &lt;code>var1:var2&lt;/code> or &lt;code>c(var1, var2)&lt;/code>. Any other expressions is a &lt;strong>context&lt;/strong> expression. The semantic change meant that it was no longer legal to refer to a contextual variable in a data expression:&lt;/p>
&lt;pre class="r">&lt;code>var &amp;lt;- 5
mtcars %&amp;gt;% gather(&amp;quot;key&amp;quot;, &amp;quot;value&amp;quot;, 1:var)&lt;/code>&lt;/pre>
&lt;p>We thought this was a relatively uncommon occurrence in practice. However that broke a lot of code that had this form:&lt;/p>
&lt;pre class="r">&lt;code>df %&amp;gt;% gather(&amp;quot;key&amp;quot;, &amp;quot;value&amp;quot;, 1:ncol(df))&lt;/code>&lt;/pre>
&lt;p>Although the change was well-intentioned, it proved to be too disruptive and we have reverted it.&lt;/p>
&lt;p>Note that we still maintain a distinction between data and context expressions. The notion of context expression (anything that’s not a symbol or a call to &lt;code>:&lt;/code> or &lt;code>c()&lt;/code>) was introduced in dplyr 0.7.0. Since that version, context expressions cannot refer to the data. This makes it safer to refer to other objects.&lt;/p>
&lt;/div>
&lt;div id="safety-versus-convenience" class="section level3">
&lt;h3>Safety versus convenience&lt;/h3>
&lt;p>Most datawise functions in R obey the same set rules regarding the visibility of objects. Visibility is hierarchical: data frame objects override those found in the context. This is convenient for interactive use and scripts, but can also cause issues. In the following example, should &lt;code>gather()&lt;/code> select the first three columns (using the &lt;code>x&lt;/code> defined in the global environment), or should it select the first two columns (using the column named &lt;code>x&lt;/code>)?&lt;/p>
&lt;pre class="r">&lt;code>x &amp;lt;- 3
df &amp;lt;- tibble(w = 1, x = 2, y = 3)
df %&amp;gt;% gather(&amp;quot;key&amp;quot;, &amp;quot;value&amp;quot;, 1:x)
#&amp;gt; # A tibble: 2 x 3
#&amp;gt; y key value
#&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;dbl&amp;gt;
#&amp;gt; 1 3 w 1
#&amp;gt; 2 3 x 2&lt;/code>&lt;/pre>
&lt;p>The answer is that it selects the first two variables because &lt;code>x&lt;/code> is first found in the data.&lt;/p>
&lt;p>In practice, the hierarchical ambiguity is not a big problem when you use these tools interactively or in scripts. However it becomes worrying when you’re writing reusable functions because you don’t know in advance the variables in the input data frame. For those cases where ambiguity matters, the tidy eval feature of quasiquotation allows you to explicitly pick a variable from the context:&lt;/p>
&lt;pre class="r">&lt;code>df %&amp;gt;% gather(&amp;quot;key&amp;quot;, &amp;quot;value&amp;quot;, 1:(!! x))
#&amp;gt; # A tibble: 3 x 2
#&amp;gt; key value
#&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;dbl&amp;gt;
#&amp;gt; 1 w 1
#&amp;gt; 2 x 2
#&amp;gt; 3 y 3&lt;/code>&lt;/pre>
&lt;/div>
&lt;div id="the-special-semantics-of-selection-functions" class="section level3">
&lt;h3>The special semantics of selection functions&lt;/h3>
&lt;p>Selection functions have always been a bit special in the tidyverse. They don’t behave exactly like regular quoting functions. In almost all quoting functions in R, variables represent a data frame &lt;em>column&lt;/em>. That’s why expressions like this are natural:&lt;/p>
&lt;pre class="r">&lt;code>lm(mass ~ scale(height), data = starwars)&lt;/code>&lt;/pre>
&lt;p>Since variables represent actual columns, you can include them in expressions as if they were actual objects. For instance &lt;code>scale(height)&lt;/code> is equivalent to &lt;code>scale(starwars$height)&lt;/code>. The same is true for most tidyverse tools, e.g. &lt;code>dplyr::mutate()&lt;/code>:&lt;/p>
&lt;pre class="r">&lt;code>starwars %&amp;gt;% mutate(height = scale(height))&lt;/code>&lt;/pre>
&lt;p>However in selection functions, variables do not represent columns but &lt;em>column positions&lt;/em>. That is a subtle but important distinction. When you type &lt;code>height&lt;/code>, tidyselect actually sees the integer &lt;code>2&lt;/code>. This makes sense for several reasons:&lt;/p>
&lt;ul>
&lt;li>&lt;p>Expressions such as &lt;code>name:mass&lt;/code> evaluate to &lt;code>1:3&lt;/code> in a natural way.&lt;/p>&lt;/li>
&lt;li>&lt;p>You can select the same column multiple times. For example if you supply a selection for the dataset &lt;code>starwars&lt;/code> with &lt;code>starts_with(&amp;quot;s&amp;quot;)&lt;/code> and &lt;code>ends_with(&amp;quot;s&amp;quot;)&lt;/code>, the variables &lt;code>species&lt;/code> and &lt;code>starships&lt;/code> would be matched twice. It is easy for tidyselect to take the intersection of the two sets of column positions. If the sets contained vectors instead, it could not determine whether there were two different but identical vectors rather than the same vector selected twice.&lt;/p>&lt;/li>
&lt;li>&lt;p>Finally and most importantly, if the variables evaluated to the column vectors, we would have no information about their names or positions, which we need to reconstitute the data frame.&lt;/p>&lt;/li>
&lt;/ul>
&lt;p>Since the variables represent positions, expressions such as &lt;code>select(sqrt(hair_color):mass^2)&lt;/code> are valid but won’t do what you might think at first. In the selection context, that expression translates to &lt;code>2:9&lt;/code> because &lt;code>hair_color&lt;/code> and &lt;code>mass&lt;/code> are the fourth and third column of the data frame.&lt;/p>
&lt;/div>
&lt;div id="safety-in-selection-functions" class="section level3">
&lt;h3>Safety in selection functions&lt;/h3>
&lt;p>Given the special semantics of selection functions, we had more freedom to solve the hierarchical ambiguity of quoting functions. Indeed, apart from &lt;code>:&lt;/code>, &lt;code>c()&lt;/code> or &lt;code>-&lt;/code>, there rarely is any need for referring to column positions in helpers like &lt;code>starts_with()&lt;/code> or &lt;code>contains()&lt;/code>. For this reason, dplyr 0.7.0 introduced the notion of context expressions. Data frame columns are no longer in scope in these calls in order to solve the hierarchical ambiguity. This has the downside that context expressions in selection functions behave a bit differently from the rest of the tidyverse, but we gain safety in exchange.&lt;/p>
&lt;p>Given these special semantics, it seemed to make sense to give data expressions the opposite behaviour and only allow references to the data. This would solve the ambiguity in the opposite direction. As explained above, this broke too much code. We had to change it back and the issue of hierarchical ambiguity along with it.&lt;/p>
&lt;p>Luckily tidyselect 0.2.0 also introduces a few features that help writing safer code for data expressions. First, the support for strings and character vectors has been improved. All data expressions fully support strings. It is now valid to supply strings to &lt;code>-&lt;/code> and &lt;code>:&lt;/code>:&lt;/p>
&lt;pre class="r">&lt;code>starwars %&amp;gt;% gather(&amp;quot;key&amp;quot;, &amp;quot;value&amp;quot;, &amp;quot;name&amp;quot; : &amp;quot;films&amp;quot;)
#&amp;gt; # A tibble: 957 x 4
#&amp;gt; vehicles starships key value
#&amp;gt; &amp;lt;list&amp;gt; &amp;lt;list&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;list&amp;gt;
#&amp;gt; 1 &amp;lt;chr [2]&amp;gt; &amp;lt;chr [2]&amp;gt; name &amp;lt;chr [1]&amp;gt;
#&amp;gt; 2 &amp;lt;chr [0]&amp;gt; &amp;lt;chr [0]&amp;gt; name &amp;lt;chr [1]&amp;gt;
#&amp;gt; 3 &amp;lt;chr [0]&amp;gt; &amp;lt;chr [0]&amp;gt; name &amp;lt;chr [1]&amp;gt;
#&amp;gt; 4 &amp;lt;chr [0]&amp;gt; &amp;lt;chr [1]&amp;gt; name &amp;lt;chr [1]&amp;gt;
#&amp;gt; 5 &amp;lt;chr [1]&amp;gt; &amp;lt;chr [0]&amp;gt; name &amp;lt;chr [1]&amp;gt;
#&amp;gt; 6 &amp;lt;chr [0]&amp;gt; &amp;lt;chr [0]&amp;gt; name &amp;lt;chr [1]&amp;gt;
#&amp;gt; 7 &amp;lt;chr [0]&amp;gt; &amp;lt;chr [0]&amp;gt; name &amp;lt;chr [1]&amp;gt;
#&amp;gt; 8 &amp;lt;chr [0]&amp;gt; &amp;lt;chr [0]&amp;gt; name &amp;lt;chr [1]&amp;gt;
#&amp;gt; 9 &amp;lt;chr [0]&amp;gt; &amp;lt;chr [1]&amp;gt; name &amp;lt;chr [1]&amp;gt;
#&amp;gt; 10 &amp;lt;chr [1]&amp;gt; &amp;lt;chr [5]&amp;gt; name &amp;lt;chr [1]&amp;gt;
#&amp;gt; # ... with 947 more rows
starwars %&amp;gt;% gather(&amp;quot;key&amp;quot;, &amp;quot;value&amp;quot;, -&amp;quot;height&amp;quot;)
#&amp;gt; # A tibble: 1,044 x 3
#&amp;gt; height key value
#&amp;gt; &amp;lt;int&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;list&amp;gt;
#&amp;gt; 1 172 name &amp;lt;chr [1]&amp;gt;
#&amp;gt; 2 167 name &amp;lt;chr [1]&amp;gt;
#&amp;gt; 3 96 name &amp;lt;chr [1]&amp;gt;
#&amp;gt; 4 202 name &amp;lt;chr [1]&amp;gt;
#&amp;gt; 5 150 name &amp;lt;chr [1]&amp;gt;
#&amp;gt; 6 178 name &amp;lt;chr [1]&amp;gt;
#&amp;gt; 7 165 name &amp;lt;chr [1]&amp;gt;
#&amp;gt; 8 97 name &amp;lt;chr [1]&amp;gt;
#&amp;gt; 9 183 name &amp;lt;chr [1]&amp;gt;
#&amp;gt; 10 182 name &amp;lt;chr [1]&amp;gt;
#&amp;gt; # ... with 1,034 more rows&lt;/code>&lt;/pre>
&lt;p>Note that this only applies to &lt;code>c()&lt;/code>, &lt;code>-&lt;/code> or &lt;code>:&lt;/code> because it would not make sense to write &lt;code>seq(&amp;quot;name&amp;quot;, &amp;quot;mass&amp;quot;)&lt;/code>. Also, it only makes sense to support strings in this way because of the special nature of selection functions. This wouldn’t work with &lt;code>mutate()&lt;/code> or &lt;code>lm()&lt;/code> since they wouldn’t be able to differentiate between a column name or an actual column (by recycling the string to column length if the data frame has more than one row).&lt;/p>
&lt;p>The purpose of supporting strings in selection function is to make it easier to unquote column names. Excluding columns with quasiquotation is now as simple as this:&lt;/p>
&lt;pre class="r">&lt;code>x &amp;lt;- &amp;quot;height&amp;quot;
starwars %&amp;gt;% gather(&amp;quot;key&amp;quot;, &amp;quot;value&amp;quot;, -(!! x))
#&amp;gt; # A tibble: 1,044 x 3
#&amp;gt; height key value
#&amp;gt; &amp;lt;int&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;list&amp;gt;
#&amp;gt; 1 172 name &amp;lt;chr [1]&amp;gt;
#&amp;gt; 2 167 name &amp;lt;chr [1]&amp;gt;
#&amp;gt; 3 96 name &amp;lt;chr [1]&amp;gt;
#&amp;gt; 4 202 name &amp;lt;chr [1]&amp;gt;
#&amp;gt; 5 150 name &amp;lt;chr [1]&amp;gt;
#&amp;gt; 6 178 name &amp;lt;chr [1]&amp;gt;
#&amp;gt; 7 165 name &amp;lt;chr [1]&amp;gt;
#&amp;gt; 8 97 name &amp;lt;chr [1]&amp;gt;
#&amp;gt; 9 183 name &amp;lt;chr [1]&amp;gt;
#&amp;gt; 10 182 name &amp;lt;chr [1]&amp;gt;
#&amp;gt; # ... with 1,034 more rows&lt;/code>&lt;/pre>
&lt;p>The second feature introduced in tidyselect 0.2.0 is the &lt;code>last_col()&lt;/code> helper. We noticed in bug reports that many people use variants of:&lt;/p>
&lt;pre class="r">&lt;code>x &amp;lt;- starwars
x %&amp;gt;% gather(&amp;quot;key&amp;quot;, &amp;quot;value&amp;quot;, 3 : ncol(x))
#&amp;gt; # A tibble: 957 x 4
#&amp;gt; name height key value
#&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;int&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;list&amp;gt;
#&amp;gt; 1 Luke Skywalker 172 mass &amp;lt;dbl [1]&amp;gt;
#&amp;gt; 2 C-3PO 167 mass &amp;lt;dbl [1]&amp;gt;
#&amp;gt; 3 R2-D2 96 mass &amp;lt;dbl [1]&amp;gt;
#&amp;gt; 4 Darth Vader 202 mass &amp;lt;dbl [1]&amp;gt;
#&amp;gt; 5 Leia Organa 150 mass &amp;lt;dbl [1]&amp;gt;
#&amp;gt; 6 Owen Lars 178 mass &amp;lt;dbl [1]&amp;gt;
#&amp;gt; 7 Beru Whitesun lars 165 mass &amp;lt;dbl [1]&amp;gt;
#&amp;gt; 8 R5-D4 97 mass &amp;lt;dbl [1]&amp;gt;
#&amp;gt; 9 Biggs Darklighter 183 mass &amp;lt;dbl [1]&amp;gt;
#&amp;gt; 10 Obi-Wan Kenobi 182 mass &amp;lt;dbl [1]&amp;gt;
#&amp;gt; # ... with 947 more rows&lt;/code>&lt;/pre>
&lt;p>That is potentially unsafe in functions since the data frame might contain a column named &lt;code>x&lt;/code>. You can now use &lt;code>last_col()&lt;/code> instead:&lt;/p>
&lt;pre class="r">&lt;code># Importing last_col() because it&amp;#39;s not exported in dplyr yet
last_col &amp;lt;- tidyselect::last_col
x %&amp;gt;% gather(&amp;quot;key&amp;quot;, &amp;quot;value&amp;quot;, 3 : last_col())
#&amp;gt; # A tibble: 957 x 4
#&amp;gt; name height key value
#&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;int&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;list&amp;gt;
#&amp;gt; 1 Luke Skywalker 172 mass &amp;lt;dbl [1]&amp;gt;
#&amp;gt; 2 C-3PO 167 mass &amp;lt;dbl [1]&amp;gt;
#&amp;gt; 3 R2-D2 96 mass &amp;lt;dbl [1]&amp;gt;
#&amp;gt; 4 Darth Vader 202 mass &amp;lt;dbl [1]&amp;gt;
#&amp;gt; 5 Leia Organa 150 mass &amp;lt;dbl [1]&amp;gt;
#&amp;gt; 6 Owen Lars 178 mass &amp;lt;dbl [1]&amp;gt;
#&amp;gt; 7 Beru Whitesun lars 165 mass &amp;lt;dbl [1]&amp;gt;
#&amp;gt; 8 R5-D4 97 mass &amp;lt;dbl [1]&amp;gt;
#&amp;gt; 9 Biggs Darklighter 183 mass &amp;lt;dbl [1]&amp;gt;
#&amp;gt; 10 Obi-Wan Kenobi 182 mass &amp;lt;dbl [1]&amp;gt;
#&amp;gt; # ... with 947 more rows&lt;/code>&lt;/pre>
&lt;/div></description></item><item><title>googledrive initial release</title><link>https://www.tidyverse.org/blog/2017/08/googledrive-initial-release/</link><pubDate>Tue, 29 Aug 2017 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2017/08/googledrive-initial-release/</guid><description>&lt;p>We are tickled pink to announce the initial CRAN release of the
&lt;a href="http://googledrive.tidyverse.org" target="_blank" rel="noopener">googledrive package&lt;/a>. This is a collaboration between Jenny Bryan and tidyverse intern,
&lt;a href="http://lucymcgowan.com/" target="_blank" rel="noopener">Lucy D&amp;rsquo;Agostino McGowan&lt;/a> (blog post on that coming soon!).&lt;/p>
&lt;p>googledrive wraps the
&lt;a href="https://developers.google.com/drive/v3/web/about-sdk" target="_blank" rel="noopener">Drive REST API v3&lt;/a>. The most common file operations are implemented in high-level functions designed for ease of use. You can find, list, create, trash, delete, rename, move, copy, browse, download, share and publish Drive files, including those on Team Drives.&lt;/p>
&lt;p>Install googledrive with:&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">install.packages&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;googledrive&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>The auth flow should &amp;ldquo;just work&amp;rdquo; for most people, especially for early and interactive use. For more advanced usage, functions are available that give the user much more control, i.e. to support non-interactive and remote usage. A low-level interface, used internally, is also exposed for those who wish to program around the Drive API.&lt;/p>
&lt;h2 id="first-use">First use
&lt;a href="#first-use">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>You can see and filter your files, similar to the experience at &lt;a href="https://drive.google.com/">https://drive.google.com/&lt;/a>, with &lt;code>drive_find()&lt;/code>. Expect to be taken to the browser here, in order to authorize googledrive to act on your behalf. We limit &lt;code>drive_find()&lt;/code> to 10 files and just a few file types for brevity.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">googledrive&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">drive_find&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">n_max&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">10&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nf">c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;spreadsheet&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;jpg&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;pdf&amp;#34;&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;span class="c1">#&amp;gt; Auto-refreshing stale OAuth token.&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 10 x 3&lt;/span>
&lt;span class="c1">#&amp;gt; name&lt;/span>
&lt;span class="c1">#&amp;gt; * &amp;lt;chr&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 chicken.jpg&lt;/span>
&lt;span class="c1">#&amp;gt; 2 README-mirrors.csv&lt;/span>
&lt;span class="c1">#&amp;gt; 3 README-mirrors.csv&lt;/span>
&lt;span class="c1">#&amp;gt; 4 logo.jpg&lt;/span>
&lt;span class="c1">#&amp;gt; 5 sheet-xyz&lt;/span>
&lt;span class="c1">#&amp;gt; 6 logo.jpg&lt;/span>
&lt;span class="c1">#&amp;gt; 7 test2&lt;/span>
&lt;span class="c1">#&amp;gt; 8 foo_pdf-TEST-drive-publish&lt;/span>
&lt;span class="c1">#&amp;gt; 9 foo_sheet-TEST-drive-publish&lt;/span>
&lt;span class="c1">#&amp;gt; 10 export-mime-type-defaults.csv&lt;/span>
&lt;span class="c1">#&amp;gt; # ... with 2 more variables: id &amp;lt;chr&amp;gt;, drive_resource &amp;lt;list&amp;gt;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>googledrive holds Drive file info in a
&lt;a href="http://googledrive.tidyverse.org/reference/dribble.html" target="_blank" rel="noopener">dribble&lt;/a>, a &amp;ldquo;Drive tibble&amp;rdquo;. This allows us to provide human-readable file names, packaged with API-friendly file ids and other useful metadata in the &lt;code>drive_resource&lt;/code> list-column. Each row represents a Drive file.&lt;/p>
&lt;p>&lt;code>drive_reveal()&lt;/code> adds extra information to the dribble by excavating interesting metadata out of &lt;code>drive_resource&lt;/code> or by making additional API calls.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="n">x&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">drive_reveal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;permissions&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">drive_reveal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;mime_type&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 10 x 6&lt;/span>
&lt;span class="c1">#&amp;gt; name mime_type&lt;/span>
&lt;span class="c1">#&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 chicken.jpg image/jpeg&lt;/span>
&lt;span class="c1">#&amp;gt; 2 README-mirrors.csv application/vnd.google-apps.spreadsheet&lt;/span>
&lt;span class="c1">#&amp;gt; 3 README-mirrors.csv application/vnd.google-apps.spreadsheet&lt;/span>
&lt;span class="c1">#&amp;gt; 4 logo.jpg image/jpeg&lt;/span>
&lt;span class="c1">#&amp;gt; 5 sheet-xyz application/vnd.google-apps.spreadsheet&lt;/span>
&lt;span class="c1">#&amp;gt; 6 logo.jpg image/jpeg&lt;/span>
&lt;span class="c1">#&amp;gt; 7 test2 application/vnd.google-apps.spreadsheet&lt;/span>
&lt;span class="c1">#&amp;gt; 8 foo_pdf-TEST-drive-publish application/pdf&lt;/span>
&lt;span class="c1">#&amp;gt; 9 foo_sheet-TEST-drive-publish application/vnd.google-apps.spreadsheet&lt;/span>
&lt;span class="c1">#&amp;gt; 10 export-mime-type-defaults.csv application/vnd.google-apps.spreadsheet&lt;/span>
&lt;span class="c1">#&amp;gt; # ... with 4 more variables: shared &amp;lt;lgl&amp;gt;, id &amp;lt;chr&amp;gt;,&lt;/span>
&lt;span class="c1">#&amp;gt; # drive_resource &amp;lt;list&amp;gt;, permissions_resource &amp;lt;list&amp;gt;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Since files are stored in a specialized tibble, you can use your usual tidyverse workflows to manipulate this data frame.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">x&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">filter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mime_type&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s">&amp;#34;image/jpeg&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">select&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">drive_resource&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 3 x 3&lt;/span>
&lt;span class="c1">#&amp;gt; name id drive_resource&lt;/span>
&lt;span class="c1">#&amp;gt; * &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;list&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 chicken.jpg 0B0Gh-SuuA2nTbEhtYnIzcFNfX3M &amp;lt;list [39]&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 2 logo.jpg 0B0Gh-SuuA2nTLVE0VGZQVU40Z0U &amp;lt;list [38]&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 3 logo.jpg 0B0Gh-SuuA2nTZjlpQmlVTm9BcVU &amp;lt;list [38]&amp;gt;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>
&lt;h2 id="test-drive-and-cleanup">Test drive and cleanup
&lt;a href="#test-drive-and-cleanup">
&lt;svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M0 0h24v24H0z" fill="currentColor">&lt;/path>
&lt;path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z">&lt;/path>
&lt;/svg>
&lt;/a>
&lt;/h2>&lt;p>We&amp;rsquo;ll quickly show off a few basic file operations and then clean up. This example also demonstrates the file conversion features available when importing into and exporting out of native Google file types.&lt;/p>
&lt;p>First, we make a new folder. Then we make a new Drive file (a Google Sheet) by uploading a local file (csv). A few example files ship with googledrive and &lt;code>drive_example()&lt;/code> is just a convenience function to get the local path on any system.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">folder&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">drive_mkdir&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;blog-folder&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; Folder created:&lt;/span>
&lt;span class="c1">#&amp;gt; * blog-folder&lt;/span>
&lt;span class="n">chicken_sheet&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="nf">drive_example&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;chicken.csv&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">drive_upload&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;blog-folder/blog-chicken-sheet&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;spreadsheet&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; Local file:&lt;/span>
&lt;span class="c1">#&amp;gt; * /Users/jenny/resources/R/library/googledrive/extdata/chicken.csv&lt;/span>
&lt;span class="c1">#&amp;gt; uploaded into Drive file:&lt;/span>
&lt;span class="c1">#&amp;gt; * blog-chicken-sheet: 1qGE2yLpe4qN-wZCMCl1t5ml-0acGW-xEPZ2l6PMHd7o&lt;/span>
&lt;span class="c1">#&amp;gt; with MIME type:&lt;/span>
&lt;span class="c1">#&amp;gt; * application/vnd.google-apps.spreadsheet&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Let&amp;rsquo;s list the contents of the folder and reveal file path to confirm the new file exists and has been placed in the target folder.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">drive_ls&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">folder&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">drive_reveal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;path&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; # A tibble: 1 x 4&lt;/span>
&lt;span class="c1">#&amp;gt; name path&lt;/span>
&lt;span class="c1">#&amp;gt; * &amp;lt;chr&amp;gt; &amp;lt;chr&amp;gt;&lt;/span>
&lt;span class="c1">#&amp;gt; 1 blog-chicken-sheet ~/blog-folder/blog-chicken-sheet&lt;/span>
&lt;span class="c1">#&amp;gt; # ... with 2 more variables: id &amp;lt;chr&amp;gt;, drive_resource &amp;lt;list&amp;gt;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Here we rename the file and download it to a local file. Since we are downloading from a Google Sheet, we must convert to a more conventional file type, such as csv or, the default, an Excel workbook.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="n">chicken_sheet&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">drive_rename&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;blog-famous-chickens&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&amp;gt;%&lt;/span>
&lt;span class="nf">drive_download&lt;/span>&lt;span class="p">()&lt;/span>
&lt;span class="c1">#&amp;gt; File renamed:&lt;/span>
&lt;span class="c1">#&amp;gt; * blog-chicken-sheet -&amp;gt; blog-famous-chickens&lt;/span>
&lt;span class="c1">#&amp;gt; File downloaded:&lt;/span>
&lt;span class="c1">#&amp;gt; * blog-famous-chickens&lt;/span>
&lt;span class="c1">#&amp;gt; Saved locally as:&lt;/span>
&lt;span class="c1">#&amp;gt; * blog-famous-chickens.xlsx&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Finally, we clean up by deleting the local spreadsheet, as well as the folder we created on Drive.&lt;/p>
&lt;div class="highlight">&lt;pre class="chroma">&lt;code class="language-r" data-lang="r">&lt;span class="nf">file.remove&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;blog-famous-chickens.xlsx&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; [1] TRUE&lt;/span>
&lt;span class="nf">drive_rm&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">folder&lt;/span>&lt;span class="p">)&lt;/span>
&lt;span class="c1">#&amp;gt; Files deleted:&lt;/span>
&lt;span class="c1">#&amp;gt; * blog-folder: 0B0Gh-SuuA2nTMTl0cjIwZThQRzg&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>We look forward to hearing how this package is useful to you. Feel free to chime in on
&lt;a href="https://github.com/tidyverse/googledrive/issues" target="_blank" rel="noopener">GitHub issues&lt;/a> to discuss how googledrive can best support your workflows.&lt;/p>
&lt;p>Learn more about googledrive at:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="http://googledrive.tidyverse.org">http://googledrive.tidyverse.org&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>tidyr 0.7.0</title><link>https://www.tidyverse.org/blog/2017/08/tidyr-0.7.0/</link><pubDate>Thu, 17 Aug 2017 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2017/08/tidyr-0.7.0/</guid><description>
&lt;p>We are happy to announce that tidyr 0.7.0 is now available on CRAN. There are two big changes:&lt;/p>
&lt;ul>
&lt;li>&lt;p>tidyr now supports tidy evaluation (or tidy eval for short). You can find an introduction to tidy eval in the &lt;a href="http://dplyr.tidyverse.org/articles/programming.html">programming with dplyr&lt;/a> vignette.&lt;/p>&lt;/li>
&lt;li>&lt;p>tidyr uses the new tidyselect package as selection backend.&lt;/p>&lt;/li>
&lt;/ul>
&lt;p>This will probably only affect your code in minor ways but helps improve consistency across the tidyverse. You can read about the complete set of changes at &lt;a href="https://github.com/tidyverse/tidyr/releases/tag/v0.7.0" class="uri">https://github.com/tidyverse/tidyr/releases/tag/v0.7.0&lt;/a>.&lt;/p>
&lt;p>Install the latest version of tidyr with:&lt;/p>
&lt;pre class="r">&lt;code>install.packages(&amp;quot;tidyr&amp;quot;)&lt;/code>&lt;/pre>
&lt;div id="new-selection-rules" class="section level3">
&lt;h3>New selection rules&lt;/h3>
&lt;p>&lt;strong>Erratum:&lt;/strong> The change in selection rules described in that article was reverted as it proved too disruptive. Please see the &lt;a href="http://www.tidyverse.org/articles/2017/09/erratum-tidyr-0.7.0/">erratum article&lt;/a> for more information on this.&lt;/p>
&lt;p>Following the switch to tidyselect, selecting functions are now stricter in their arguments to avoid ambiguous cases. For example, take &lt;code>gather()&lt;/code> and its &lt;code>...&lt;/code> argument. Consider the following code:&lt;/p>
&lt;pre class="r">&lt;code>x &amp;lt;- 3
df &amp;lt;- tibble(w = 1, x = 2, y = 3)
gather(df, &amp;quot;variable&amp;quot;, &amp;quot;value&amp;quot;, 1:x)
#&amp;gt; # A tibble: 2 x 3
#&amp;gt; y variable value
#&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;dbl&amp;gt;
#&amp;gt; 1 3 w 1
#&amp;gt; 2 3 x 2&lt;/code>&lt;/pre>
&lt;p>Should it select the first three columns (using the &lt;code>x&lt;/code> defined in the global environment), or should it select the first two columns (using the column named &lt;code>x&lt;/code>)?&lt;/p>
&lt;p>To solve this ambiguity, we now make a strict distinction between data and context expressions. A &lt;strong>data expression&lt;/strong> is either a bare name or an expression of the form &lt;code>x:y&lt;/code> or &lt;code>c(x, y)&lt;/code>. In a data expression, you can only refer to columns from the data frame. Everything else is a &lt;strong>context expression&lt;/strong> in which you can only refer to objects that you have defined by assigning with &lt;code>&amp;lt;-&lt;/code>.&lt;/p>
&lt;p>In practice this means that you can no longer refer to contextual objects like this:&lt;/p>
&lt;pre class="r">&lt;code>mtcars %&amp;gt;% gather(var, value, 1:ncol(mtcars))
x &amp;lt;- 3
mtcars %&amp;gt;% gather(var, value, 1:x)
mtcars %&amp;gt;% gather(var, value, -(1:x))&lt;/code>&lt;/pre>
&lt;p>You now have to be explicit about where to find objects. One way of being explicit is to use the quasiquotation operator &lt;code>!!&lt;/code> which will evaluate its argument early and inline the result:&lt;/p>
&lt;pre class="r">&lt;code>mtcars %&amp;gt;% gather(var, value, !! 1:ncol(mtcars))
mtcars %&amp;gt;% gather(var, value, !! 1:x)
mtcars %&amp;gt;% gather(var, value, !! -(1:x))&lt;/code>&lt;/pre>
&lt;p>Read more about quasiquotation in the tidy eval section.&lt;/p>
&lt;/div>
&lt;div id="tidy-evaluation" class="section level3">
&lt;h3>Tidy evaluation&lt;/h3>
&lt;p>Tidy evaluation is a principled set of tools that allow programming with quoting functions (also called NSE functions) in a principled way. It was first introduced in dplyr 0.7.0 and you can learn more about it in the &lt;a href="http://dplyr.tidyverse.org/articles/programming.html">programming with dplyr&lt;/a> vignette. At its core, tidy evaluation is the combination of two features: quasiquotation and quosures.&lt;/p>
&lt;p>The tidy eval tools live in rlang and many of them are reexported in dplyr. This includes &lt;code>quo()&lt;/code>, &lt;code>enquo()&lt;/code> and &lt;code>quos()&lt;/code>. In addition, &lt;code>rlang::expr()&lt;/code>, &lt;code>rlang::sym()&lt;/code> and &lt;code>rlang::syms()&lt;/code> may be useful as well and will be exported in the next version of dplyr.&lt;/p>
&lt;pre class="r">&lt;code># Let&amp;#39;s import some tidy eval tools that we&amp;#39;ll use in examples below
library(&amp;quot;dplyr&amp;quot;)
sym &amp;lt;- rlang::sym&lt;/code>&lt;/pre>
&lt;p>&lt;strong>Quasiquotation&lt;/strong> is essential to program with quoting functions. It refers to the ability of unquoting part of a quoted expression, and makes it possible to program with the quoting grammars of dplyr and tidyr. With quasiquotation, you can change what a function “sees”. You’ll typically want to unquote a symbol representing a data frame column with the &lt;code>!!&lt;/code> operator.&lt;/p>
&lt;p>Here, &lt;code>expand()&lt;/code> sees &lt;code>vs&lt;/code> and &lt;code>cyl&lt;/code>:&lt;/p>
&lt;pre class="r">&lt;code>expand(mtcars, vs, cyl)
#&amp;gt; # A tibble: 6 x 2
#&amp;gt; vs cyl
#&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;
#&amp;gt; 1 0 4
#&amp;gt; 2 0 6
#&amp;gt; 3 0 8
#&amp;gt; 4 1 4
#&amp;gt; 5 1 6
#&amp;gt; 6 1 8&lt;/code>&lt;/pre>
&lt;p>Thanks to quasiquotation, we can change what &lt;code>expand()&lt;/code> sees by unquoting the &lt;code>am&lt;/code> symbol:&lt;/p>
&lt;pre class="r">&lt;code>x &amp;lt;- sym(&amp;quot;am&amp;quot;)
expand(mtcars, vs, !! x)
#&amp;gt; # A tibble: 4 x 2
#&amp;gt; vs am
#&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;
#&amp;gt; 1 0 0
#&amp;gt; 2 0 1
#&amp;gt; 3 1 0
#&amp;gt; 4 1 1&lt;/code>&lt;/pre>
&lt;p>The second tidy eval feature are &lt;strong>quosures&lt;/strong>. A quosure is a special kind of expression that evaluates in both the data context (so you can refer to data frame columns) and the original context of the expression (e.g. a function context, so you can refer to local variables created there).&lt;/p>
&lt;pre class="r">&lt;code># For nicer printing
iris &amp;lt;- tibble::as_tibble(iris)
# Let&amp;#39;s create a quosure within a local context
quo &amp;lt;- local({
prefix &amp;lt;- &amp;quot;Sepal&amp;quot;
quo(starts_with(prefix))
})&lt;/code>&lt;/pre>
&lt;p>&lt;code>prefix&lt;/code> only exist in the local context but the quosure can safely refer to it&lt;/p>
&lt;pre class="r">&lt;code>quo
#&amp;gt; &amp;lt;quosure: local&amp;gt;
#&amp;gt; ~starts_with(prefix)&lt;/code>&lt;/pre>
&lt;p>In tidyr 0.7.0, all functions now support quosures:&lt;/p>
&lt;pre class="r">&lt;code>gather(iris, key, value, !! quo)
#&amp;gt; # A tibble: 300 x 5
#&amp;gt; Petal.Length Petal.Width Species key value
#&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;fctr&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;dbl&amp;gt;
#&amp;gt; 1 1.4 0.2 setosa Sepal.Length 5.1
#&amp;gt; 2 1.4 0.2 setosa Sepal.Length 4.9
#&amp;gt; 3 1.3 0.2 setosa Sepal.Length 4.7
#&amp;gt; 4 1.5 0.2 setosa Sepal.Length 4.6
#&amp;gt; 5 1.4 0.2 setosa Sepal.Length 5.0
#&amp;gt; 6 1.7 0.4 setosa Sepal.Length 5.4
#&amp;gt; 7 1.4 0.3 setosa Sepal.Length 4.6
#&amp;gt; 8 1.5 0.2 setosa Sepal.Length 5.0
#&amp;gt; 9 1.4 0.2 setosa Sepal.Length 4.4
#&amp;gt; 10 1.5 0.1 setosa Sepal.Length 4.9
#&amp;gt; # ... with 290 more rows&lt;/code>&lt;/pre>
&lt;p>Typically you’ll use quosures to create wrappers around tidyr functions. To this end you’ll need &lt;code>enquo()&lt;/code> which does two things: it transforms your function to a dplyr-like quoting function; and it returns the quoted expression as a quosure. Creating a wrapper function is often a simple matter of enquosing and unquoting:&lt;/p>
&lt;pre class="r">&lt;code>my_gather &amp;lt;- function(df, expr) {
quo &amp;lt;- enquo(expr)
tidyr::gather(df, key, value, !! quo)
}&lt;/code>&lt;/pre>
&lt;p>Thanks to the enquosing, you can safely call your wrapper in local contexts (e.g. within a function) and refer to variables defined there:&lt;/p>
&lt;pre class="r">&lt;code>local({
prefix &amp;lt;- &amp;quot;Sepal&amp;quot;
my_gather(iris, starts_with(prefix))
})
#&amp;gt; # A tibble: 300 x 5
#&amp;gt; Petal.Length Petal.Width Species key value
#&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;fctr&amp;gt; &amp;lt;chr&amp;gt; &amp;lt;dbl&amp;gt;
#&amp;gt; 1 1.4 0.2 setosa Sepal.Length 5.1
#&amp;gt; 2 1.4 0.2 setosa Sepal.Length 4.9
#&amp;gt; 3 1.3 0.2 setosa Sepal.Length 4.7
#&amp;gt; 4 1.5 0.2 setosa Sepal.Length 4.6
#&amp;gt; 5 1.4 0.2 setosa Sepal.Length 5.0
#&amp;gt; 6 1.7 0.4 setosa Sepal.Length 5.4
#&amp;gt; 7 1.4 0.3 setosa Sepal.Length 4.6
#&amp;gt; 8 1.5 0.2 setosa Sepal.Length 5.0
#&amp;gt; 9 1.4 0.2 setosa Sepal.Length 4.4
#&amp;gt; 10 1.5 0.1 setosa Sepal.Length 4.9
#&amp;gt; # ... with 290 more rows&lt;/code>&lt;/pre>
&lt;/div>
&lt;div id="special-tidy-evaluation-rules" class="section level3">
&lt;h3>Special tidy evaluation rules&lt;/h3>
&lt;p>The tidy evaluation implementation of tidyr is a bit special. While the philosophy of tidy evaluation is that R code should refer to real objects (from the data frame or from the context), we had to make some exceptions to this rule for tidyr. The reason is that several functions accept bare symbols to specify the names of &lt;em>new&lt;/em> columns to create (&lt;code>gather()&lt;/code> being a prime example). This is not tidy because the symbol do not represent any actual object.&lt;/p>
&lt;p>Our workaround is to capture these arguments using &lt;code>rlang::quo_name()&lt;/code> (so they still support quasiquotation and you can unquote symbols or strings). This workaround is only provided for backward compatibility as this UI is not consistent with other tidyr functions that require strings (e.g. the &lt;code>into&lt;/code> argument of &lt;code>separate()&lt;/code>). More generally this type of NSE it is now discouraged in the tidyverse. We now prefer strings to refer to variables that don’t yet exist.&lt;/p>
&lt;/div>
&lt;div id="breaking-changes" class="section level3">
&lt;h3>Breaking changes&lt;/h3>
&lt;ul>
&lt;li>&lt;p>The underscored SE variants are softly deprecated.&lt;/p>&lt;/li>
&lt;li>&lt;p>Selecting functions now make a distinction between data expressions and context expressions. The latter can refer only to contextual objects while the former can refer only to data variables. See above for more information.&lt;/p>&lt;/li>
&lt;/ul>
&lt;/div></description></item><item><title>purrr 0.2.3</title><link>https://www.tidyverse.org/blog/2017/08/purrr-0.2.3/</link><pubDate>Tue, 15 Aug 2017 00:00:00 +0000</pubDate><guid>https://www.tidyverse.org/blog/2017/08/purrr-0.2.3/</guid><description>
&lt;p>We are pleased to announce that purrr 0.2.3 is now on CRAN! Despite the small increment in the version number (our mistake, it should have been 0.3.0), this is a rather major release that includes many new features and bug fixes.&lt;/p>
&lt;p>Install the latest version of purrr with:&lt;/p>
&lt;pre class="r">&lt;code>install.packages(&amp;quot;purrr&amp;quot;)&lt;/code>&lt;/pre>
&lt;p>You can read about the complete set of changes at &lt;a href="https://github.com/tidyverse/purrr/releases/tag/v0.2.3" class="uri">https://github.com/tidyverse/purrr/releases/tag/v0.2.3&lt;/a>. In this blog post, I will present the highlights of this version which are a family of generic mappers, a new &lt;code>pluck()&lt;/code> function for accessing deep elements in a readable way, and a few nifty features and improvements.&lt;/p>
&lt;div id="generic-mapping" class="section level3">
&lt;h3>Generic mapping&lt;/h3>
&lt;p>The new &lt;code>modify&lt;/code> family of functions introduces genericity to mapping. This means it is now easier to map functions over vector-like S3 objects. The reason is twofold:&lt;/p>
&lt;ul>
&lt;li>&lt;p>&lt;code>map()&lt;/code> and friends apply functions on the elements of the underlying data structure but that is not always appropriate. An object sometimes contains metadata. A user of such a class probably wants to map over the &lt;em>elements&lt;/em> of the data of interest rather than over the metadata fields.&lt;/p>&lt;/li>
&lt;li>&lt;p>&lt;code>map()&lt;/code> is type-stable and always returns a list. If you’re mapping over an object, chances are you want a similar object back.&lt;/p>&lt;/li>
&lt;/ul>
&lt;p>&lt;code>modify()&lt;/code> and its variants solve both these problems via S3 dispatch. For instance, let’s try a conditional map over a data frame. Since &lt;code>map_if()&lt;/code> is type-stable, it returns a list and we lose the data frame information:&lt;/p>
&lt;pre class="r">&lt;code>iris %&amp;gt;% map_if(is.factor, as.character) %&amp;gt;% str()
#&amp;gt; List of 5
#&amp;gt; $ Sepal.Length: num [1:150] 5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...
#&amp;gt; $ Sepal.Width : num [1:150] 3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ...
#&amp;gt; $ Petal.Length: num [1:150] 1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...
#&amp;gt; $ Petal.Width : num [1:150] 0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...
#&amp;gt; $ Species : chr [1:150] &amp;quot;setosa&amp;quot; &amp;quot;setosa&amp;quot; &amp;quot;setosa&amp;quot; &amp;quot;setosa&amp;quot; ...&lt;/code>&lt;/pre>
&lt;p>On the other hand, &lt;code>modify_if()&lt;/code> is generic and returns a data frame:&lt;/p>
&lt;pre class="r">&lt;code>iris %&amp;gt;% modify_if(is.factor, as.character) %&amp;gt;% str()
#&amp;gt; &amp;#39;data.frame&amp;#39;: 150 obs. of 5 variables:
#&amp;gt; $ Sepal.Length: num 5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...
#&amp;gt; $ Sepal.Width : num 3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ...
#&amp;gt; $ Petal.Length: num 1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...
#&amp;gt; $ Petal.Width : num 0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...
#&amp;gt; $ Species : chr &amp;quot;setosa&amp;quot; &amp;quot;setosa&amp;quot; &amp;quot;setosa&amp;quot; &amp;quot;setosa&amp;quot; ...&lt;/code>&lt;/pre>
&lt;p>The flip side of genericity is that the vectors returned by the mapped function should obey the constraints of the container type. For instance, data frames require vectors of equal size and it wouldn’t be appropriate to use &lt;code>modify()&lt;/code> on a function that returns vectors of variable sizes. In this case you should use &lt;code>map()&lt;/code>:&lt;/p>
&lt;pre class="r">&lt;code>map(mtcars, unique) %&amp;gt;% str()
#&amp;gt; List of 11
#&amp;gt; $ mpg : num [1:25] 21 22.8 21.4 18.7 18.1 14.3 24.4 19.2 17.8 16.4 ...
#&amp;gt; $ cyl : num [1:3] 6 4 8
#&amp;gt; $ disp: num [1:27] 160 108 258 360 225 ...
#&amp;gt; $ hp : num [1:22] 110 93 175 105 245 62 95 123 180 205 ...
#&amp;gt; $ drat: num [1:22] 3.9 3.85 3.08 3.15 2.76 3.21 3.69 3.92 3.07 2.93 ...
#&amp;gt; $ wt : num [1:29] 2.62 2.88 2.32 3.21 3.44 ...
#&amp;gt; $ qsec: num [1:30] 16.5 17 18.6 19.4 20.2 ...
#&amp;gt; $ vs : num [1:2] 0 1
#&amp;gt; $ am : num [1:2] 1 0
#&amp;gt; $ gear: num [1:3] 4 3 5
#&amp;gt; $ carb: num [1:6] 4 1 2 3 6 8&lt;/code>&lt;/pre>
&lt;p>As a developer there are two ways to make your class compatible with &lt;code>modify()&lt;/code> . The easiest is to implement a method for the subset-assign operator &lt;code>[&amp;lt;-&lt;/code> which should be sufficient in most cases. Alternatively you can implement methods for the &lt;code>modify&lt;/code> functions themselves as they are all generics.&lt;/p>
&lt;/div>
&lt;div id="pluck-for-deep-subsetting" class="section level3">
&lt;h3>pluck() for deep subsetting&lt;/h3>
&lt;p>The plucking mechanism used for indexing into data structures with &lt;code>map()&lt;/code> has been extracted into the function &lt;code>pluck()&lt;/code>. Plucking is often more readable when extracting an element buried in a deep data structure. Compare this base R code which reads non-linearly:&lt;/p>
&lt;pre class="r">&lt;code>accessor(x[[1]])$foo&lt;/code>&lt;/pre>
&lt;p>To the equivalent pluck:&lt;/p>
&lt;pre class="r">&lt;code>x %&amp;gt;% pluck(1, accessor, &amp;quot;foo&amp;quot;)&lt;/code>&lt;/pre>
&lt;p>The new function &lt;code>attr_getter()&lt;/code> generates attribute accessors that can be used in &lt;code>pluck()&lt;/code>:&lt;/p>
&lt;pre class="r">&lt;code>dfs &amp;lt;- list(iris, mtcars)
dfs %&amp;gt;% pluck(2, attr_getter(&amp;quot;row.names&amp;quot;))
#&amp;gt; [1] &amp;quot;Mazda RX4&amp;quot; &amp;quot;Mazda RX4 Wag&amp;quot; &amp;quot;Datsun 710&amp;quot;
#&amp;gt; [4] &amp;quot;Hornet 4 Drive&amp;quot; &amp;quot;Hornet Sportabout&amp;quot; &amp;quot;Valiant&amp;quot;
#&amp;gt; [7] &amp;quot;Duster 360&amp;quot; &amp;quot;Merc 240D&amp;quot; &amp;quot;Merc 230&amp;quot;
#&amp;gt; [10] &amp;quot;Merc 280&amp;quot; &amp;quot;Merc 280C&amp;quot; &amp;quot;Merc 450SE&amp;quot;
#&amp;gt; [13] &amp;quot;Merc 450SL&amp;quot; &amp;quot;Merc 450SLC&amp;quot; &amp;quot;Cadillac Fleetwood&amp;quot;
#&amp;gt; [16] &amp;quot;Lincoln Continental&amp;quot; &amp;quot;Chrysler Imperial&amp;quot; &amp;quot;Fiat 128&amp;quot;
#&amp;gt; [19] &amp;quot;Honda Civic&amp;quot; &amp;quot;Toyota Corolla&amp;quot; &amp;quot;Toyota Corona&amp;quot;
#&amp;gt; [22] &amp;quot;Dodge Challenger&amp;quot; &amp;quot;AMC Javelin&amp;quot; &amp;quot;Camaro Z28&amp;quot;
#&amp;gt; [25] &amp;quot;Pontiac Firebird&amp;quot; &amp;quot;Fiat X1-9&amp;quot; &amp;quot;Porsche 914-2&amp;quot;
#&amp;gt; [28] &amp;quot;Lotus Europa&amp;quot; &amp;quot;Ford Pantera L&amp;quot; &amp;quot;Ferrari Dino&amp;quot;
#&amp;gt; [31] &amp;quot;Maserati Bora&amp;quot; &amp;quot;Volvo 142E&amp;quot;&lt;/code>&lt;/pre>
&lt;p>Or in mapped indexing:&lt;/p>
&lt;pre class="r">&lt;code>x &amp;lt;- list(
list(vec = letters, df = mtcars),
list(vec = LETTERS, df = iris)
)
x %&amp;gt;% map(list(&amp;quot;df&amp;quot;, attr_getter(&amp;quot;row.names&amp;quot;)))
#&amp;gt; [[1]]
#&amp;gt; [1] &amp;quot;Mazda RX4&amp;quot; &amp;quot;Mazda RX4 Wag&amp;quot; &amp;quot;Datsun 710&amp;quot;
#&amp;gt; [4] &amp;quot;Hornet 4 Drive&amp;quot; &amp;quot;Hornet Sportabout&amp;quot; &amp;quot;Valiant&amp;quot;
#&amp;gt; [7] &amp;quot;Duster 360&amp;quot; &amp;quot;Merc 240D&amp;quot; &amp;quot;Merc 230&amp;quot;
#&amp;gt; [10] &amp;quot;Merc 280&amp;quot; &amp;quot;Merc 280C&amp;quot; &amp;quot;Merc 450SE&amp;quot;
#&amp;gt; [13] &amp;quot;Merc 450SL&amp;quot; &amp;quot;Merc 450SLC&amp;quot; &amp;quot;Cadillac Fleetwood&amp;quot;
#&amp;gt; [16] &amp;quot;Lincoln Continental&amp;quot; &amp;quot;Chrysler Imperial&amp;quot; &amp;quot;Fiat 128&amp;quot;
#&amp;gt; [19] &amp;quot;Honda Civic&amp;quot; &amp;quot;Toyota Corolla&amp;quot; &amp;quot;Toyota Corona&amp;quot;
#&amp;gt; [22] &amp;quot;Dodge Challenger&amp;quot; &amp;quot;AMC Javelin&amp;quot; &amp;quot;Camaro Z28&amp;quot;
#&amp;gt; [25] &amp;quot;Pontiac Firebird&amp;quot; &amp;quot;Fiat X1-9&amp;quot; &amp;quot;Porsche 914-2&amp;quot;
#&amp;gt; [28] &amp;quot;Lotus Europa&amp;quot; &amp;quot;Ford Pantera L&amp;quot; &amp;quot;Ferrari Dino&amp;quot;
#&amp;gt; [31] &amp;quot;Maserati Bora&amp;quot; &amp;quot;Volvo 142E&amp;quot;
#&amp;gt;
#&amp;gt; [[2]]
#&amp;gt; [1] 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17
#&amp;gt; [18] 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34
#&amp;gt; [35] 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51
#&amp;gt; [52] 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68
#&amp;gt; [69] 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85
#&amp;gt; [86] 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102
#&amp;gt; [103] 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119
#&amp;gt; [120] 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136
#&amp;gt; [137] 137 138 139 140 141 142 143 144 145 146 147 148 149 150&lt;/code>&lt;/pre>
&lt;/div>
&lt;div id="set_names-is-much-more-flexible" class="section level3">
&lt;h3>set_names() is much more flexible&lt;/h3>
&lt;p>&lt;code>set_names()&lt;/code> (now reexported from the rlang package) has become much more flexible. It now takes &lt;code>...&lt;/code> arguments and concatenates them into one vector of names. This saves a bit of typing as you don’t have to concatenate explicitly with &lt;code>c()&lt;/code>. The code also looks a bit leaner:&lt;/p>
&lt;pre class="r">&lt;code>x &amp;lt;- letters[1:3] %&amp;gt;% set_names(&amp;quot;foo&amp;quot;, &amp;quot;bar&amp;quot;, &amp;quot;baz&amp;quot;)
x
#&amp;gt; foo bar baz
#&amp;gt; &amp;quot;a&amp;quot; &amp;quot;b&amp;quot; &amp;quot;c&amp;quot;&lt;/code>&lt;/pre>
&lt;p>In addition &lt;code>set_names()&lt;/code> now accepts functions as its first argument. The function is applied to existing names. Let’s transform the names of our new vector to uppercase with &lt;code>base::toupper()&lt;/code>:&lt;/p>
&lt;pre class="r">&lt;code>x %&amp;gt;% set_names(toupper)
#&amp;gt; FOO BAR BAZ
#&amp;gt; &amp;quot;a&amp;quot; &amp;quot;b&amp;quot; &amp;quot;c&amp;quot;&lt;/code>&lt;/pre>
&lt;p>When you supply a function, the &lt;code>...&lt;/code> arguments are forwarded to the function which is often handy. Here we might want to pass further arguments to &lt;code>base::paste()&lt;/code>:&lt;/p>
&lt;pre class="r">&lt;code>x %&amp;gt;% set_names(paste, &amp;quot;suffix&amp;quot;, sep = &amp;quot;_&amp;quot;)
#&amp;gt; foo_suffix bar_suffix baz_suffix
#&amp;gt; &amp;quot;a&amp;quot; &amp;quot;b&amp;quot; &amp;quot;c&amp;quot;&lt;/code>&lt;/pre>
&lt;/div>
&lt;div id="reducing-with-a-three-argument-function" class="section level3">
&lt;h3>Reducing with a three-argument function&lt;/h3>
&lt;p>&lt;code>reduce2()&lt;/code> makes it possible to reduce with a three-argument reducing function. &lt;code>reduce2()&lt;/code> takes two vectors &lt;code>.x&lt;/code> and &lt;code>.y&lt;/code>, the first of which is reduced in the usual manner. The accumulated value is passed to the reducing function as first argument while the next value is passed as second argument. &lt;code>.y&lt;/code> on the other hand is mapped, not reduced. At each reducing round, the next value of &lt;code>.y&lt;/code> is passed to the reducing function as third argument.&lt;/p>
&lt;p>In the following example we have a binary paster that takes &lt;code>sep&lt;/code> as third argument. With the ordinary &lt;code>reduce()&lt;/code> we are stuck with a single separator during the whole reduction:&lt;/p>
&lt;pre class="r">&lt;code>paste2 &amp;lt;- function(x, y, sep) paste(x, y, sep = sep)
x &amp;lt;- letters[1:4]
reduce(x, paste2, sep = &amp;quot;.&amp;quot;)
#&amp;gt; [1] &amp;quot;a.b.c.d&amp;quot;&lt;/code>&lt;/pre>
&lt;p>If we want to vary the separator for each value of the input vector, &lt;code>reduce2()&lt;/code> allows us to pass a second vector containing specific separators. This auxiliary vector should have one fewer elements than the reduced vector:&lt;/p>
&lt;pre class="r">&lt;code>seps &amp;lt;- c(&amp;quot;-&amp;quot;, &amp;quot;.&amp;quot;, &amp;quot;_&amp;quot;)
reduce2(x, seps, paste2)
#&amp;gt; [1] &amp;quot;a-b.c_d&amp;quot;&lt;/code>&lt;/pre>
&lt;/div>
&lt;div id="variadic-lambda-formulas" class="section level3">
&lt;h3>Variadic lambda-formulas&lt;/h3>
&lt;p>You can now refer to arguments by position in lambda-formulas. The &lt;code>..1&lt;/code> symbol refers to the first argument, &lt;code>..2&lt;/code> to the second and so on. This makes it easier to use functions like &lt;code>pmap()&lt;/code> with the formula shortcut:&lt;/p>
&lt;pre class="r">&lt;code>pmap_chr(mtcars, ~paste(..2, ..4, sep = &amp;quot; - &amp;quot;))
#&amp;gt; [1] &amp;quot;6 - 110&amp;quot; &amp;quot;6 - 110&amp;quot; &amp;quot;4 - 93&amp;quot; &amp;quot;6 - 110&amp;quot; &amp;quot;8 - 175&amp;quot; &amp;quot;6 - 105&amp;quot; &amp;quot;8 - 245&amp;quot;
#&amp;gt; [8] &amp;quot;4 - 62&amp;quot; &amp;quot;4 - 95&amp;quot; &amp;quot;6 - 123&amp;quot; &amp;quot;6 - 123&amp;quot; &amp;quot;8 - 180&amp;quot; &amp;quot;8 - 180&amp;quot; &amp;quot;8 - 180&amp;quot;
#&amp;gt; [15] &amp;quot;8 - 205&amp;quot; &amp;quot;8 - 215&amp;quot; &amp;quot;8 - 230&amp;quot; &amp;quot;4 - 66&amp;quot; &amp;quot;4 - 52&amp;quot; &amp;quot;4 - 65&amp;quot; &amp;quot;4 - 97&amp;quot;
#&amp;gt; [22] &amp;quot;8 - 150&amp;quot; &amp;quot;8 - 150&amp;quot; &amp;quot;8 - 245&amp;quot; &amp;quot;8 - 175&amp;quot; &amp;quot;4 - 66&amp;quot; &amp;quot;4 - 91&amp;quot; &amp;quot;4 - 113&amp;quot;
#&amp;gt; [29] &amp;quot;8 - 264&amp;quot; &amp;quot;6 - 175&amp;quot; &amp;quot;8 - 335&amp;quot; &amp;quot;4 - 109&amp;quot;&lt;/code>&lt;/pre>
&lt;/div>
&lt;div id="api-changes" class="section level3">
&lt;h3>API changes&lt;/h3>
&lt;p>purrr no longer depends on lazyeval or Rcpp (or dplyr, as of the previous version). This makes the dependency graph of the tidyverse simpler, and makes purrr more suitable as a dependency of lower-level packages.&lt;/p>
&lt;p>A number of functions have been renamed or deprecated:&lt;/p>
&lt;ul>
&lt;li>&lt;p>&lt;code>is_numeric()&lt;/code> and &lt;code>is_scalar_numeric()&lt;/code> are deprecated because they don’t test for what you might expect at first sight.&lt;/p>&lt;/li>
&lt;li>&lt;p>&lt;code>as_function()&lt;/code> is now &lt;code>as_mapper()&lt;/code> because it is a tranformation that makes sense primarily for mapping functions, not in general. The rlang package has an &lt;code>as_function()&lt;/code> coercer that is smaller in scope.&lt;/p>&lt;/li>
&lt;li>&lt;p>The data frame suffix &lt;code>_df&lt;/code> has been (soft) deprecated in favour of &lt;code>_dfr&lt;/code> to more clearly indicate that it’s a row-bind. All variants now also have a &lt;code>_dfc&lt;/code> for column binding. They currently don’t handle functions returning vectors because of a bug, but they will in the next minor version of purrr.&lt;/p>&lt;/li>
&lt;li>&lt;p>&lt;code>cross_n()&lt;/code> has been renamed to &lt;code>cross()&lt;/code>. The &lt;code>_n&lt;/code> suffix was removed for consistency with &lt;code>pmap()&lt;/code> (originally called &lt;code>map_n()&lt;/code> at the start of the project) and &lt;code>transpose()&lt;/code> (originally called &lt;code>zip_n()&lt;/code>). Similarly, &lt;code>cross_d()&lt;/code> has been renamed to &lt;code>cross_df()&lt;/code> for consistency with &lt;code>map_df()&lt;/code>.&lt;/p>&lt;/li>
&lt;li>&lt;p>&lt;code>contains()&lt;/code> has been renamed to &lt;code>has_element()&lt;/code> to avoid conflicts with dplyr.&lt;/p>&lt;/li>
&lt;li>&lt;p>&lt;code>at_depth()&lt;/code> has been renamed to &lt;code>modify_depth()&lt;/code>.&lt;/p>&lt;/li>
&lt;/ul>
&lt;p>Finally, these functions have been removed from the package:&lt;/p>
&lt;ul>
&lt;li>&lt;p>The previously deprecated functions &lt;code>flatmap()&lt;/code>, &lt;code>map3()&lt;/code>, &lt;code>map_n()&lt;/code>, &lt;code>walk3()&lt;/code>, &lt;code>walk_n()&lt;/code>, &lt;code>zip2()&lt;/code>, &lt;code>zip3()&lt;/code>, &lt;code>zip_n()&lt;/code> have been removed.&lt;/p>&lt;/li>
&lt;li>&lt;p>&lt;code>order_by()&lt;/code>, &lt;code>sort_by()&lt;/code> and &lt;code>split_by()&lt;/code> have been removed. &lt;code>order_by()&lt;/code> conflicted with &lt;code>dplyr::order_by()&lt;/code> and the complete family doesn’t feel that useful. Use tibbles instead.&lt;/p>&lt;/li>
&lt;/ul>
&lt;/div></description></item></channel></rss>