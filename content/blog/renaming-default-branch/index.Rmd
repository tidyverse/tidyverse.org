---
output: hugodown::hugo_document

slug: renaming-default-branch
title: Renaming the default branch
date: 2021-09-10
author: Jenny Bryan
description: >
    We are renaming the default branch of many Git(Hub) repositories and this
    post explains how contributors can adapt, using new functionality in
    usethis.

photo:
  url: https://unsplash.com/photos/jA264x_MkCI
  author: Natalie Chaney

# one of: "deep-dive", "learn", "package", "programming", or "other"
categories: [learn] 
tags: [usethis, devtools]
---

Technically, Git has no official concept of the default branch.
But in practice, most Git repos have an *effective default branch*.
If there's only one branch, this is it!
It is the branch that most bug fixes and features get merged in to.
It is the branch you see when you first visit a repo on a site such as GitHub.
On a Git remote, it is the branch that `HEAD` points to.
The default branch may not be precisely defined in Git itself, but most of us know it when we see it.

Historically, `master` has been the most common name for the default branch,
but `main` is an increasingly popular choice.
There is coordinated change across the Git ecosystem that is making it easier for users to make this switch, for example:

* [Regarding Git and Branch Naming](https://sfconservancy.org/news/2020/jun/23/gitbranchname/), statement from the Git project and the Software Freedom Conservancy regarding the new `init.defaultBranch` configuration option
* [Renaming the default branch from` master`](https://github.com/github/renaming#readme), GitHub's roadmap for supporting the shift away from `master`
* [The new Git default branch name](https://about.gitlab.com/blog/2021/03/10/new-git-default-branch-name/), same but for GitLab

Folks at RStudio maintain hundreds of public repositories on GitHub, spread out over various organizations and user accounts.
Some individual repos had already moved away from `master` in the past year, but many of us had not made the change, just due to inertia.
We've decided it tackle this switch proactively and in bulk, for any interested individual or team, hopefully reducing the pain for everyone.

The purpose of this blog post is to:

* Give our community a heads-up about this change.
* Explain how this affects people who have cloned or forked our repositories.
* Explain how you can make the `master` to `main` switch in your own Git life.
* Advertise new functions in the usethis package that help with the above.

## Which repositories are affected?

The transition from `master` to `main` is happening organization-wide for specific GitHub organizations (e.g. [tidyverse](https://github.com/tidyverse), [r-lib](https://github.com/r-lib), [tidymodels](https://github.com/tidymodels), and [sol-eng](https://github.com/sol-eng)).
However, several teams maintain repos across multiple organizations and several organizations host repos for multiple teams and purposes.
The organization-driven approach is a poor fit, in these cases.
Therefore, several hundred additional "one-off" repos are also part of this effort.

All told, we're coordinating the `master` to `main` switch for FILL IN THIS NUMBER repositories.

In each case, we opened a GitHub issue announcing the coming change, several weeks in advance.
These issues all look something like this: <https://github.com/tidyverse/dplyr/issues/6006>.

## When are things changing?

"Around now."

Ideally, we would publish this post at the very same moment we rename our branches.
But that's not possible for a variety of reasons, chiefly because no single person has the necessary permissions for all of the affected repos.

Coordinated change is going to work best for repos that are part of an organization-wide effort, because each organization has at least one person with the necessary superpowers.
But things are more complicated for the one-off repos.
If there's a repo you care about, that has an open issue about branch renaming, and yet the change doesn't seem to be happening?
Feel free to give us a gentle nudge by commenting in the issue thread.

## Nothing below here is written yet

You can install the newest version of usethis from CRAN with:

```{r, eval = FALSE}
install.packages("usethis")
```

```{r setup}
library(usethis)
```

## Acknowledgements

