<!doctype html><html><head><!doctype html><html lang=en-us><link rel=stylesheet href=/css/fonts.css><link rel=stylesheet href=/css/main-site.css><link rel=stylesheet href=/css/fa5-all.css><style type=text/css>body{background-color:#fff;color:#1a1917}a{color:#38577f}a:hover{color:#42709b}a:focus{outline-color:#42709b}.column25-left .sectionTitle a:hover:not(.current),.column16-left .sectionTitle a:hover:not(.current){color:#1a1917}.icon-attribution,.icon-attribution a{color:#1a1917;opacity:75%}#homeContent .band.first{background-color:#fff}#homeContent .band.second{background-color:#fdeba4}#homeContent .band.third{background-color:#fff}#rStudioHeader{background-color:#1a162d;color:#fff}#rStudioHeader .productName{color:#fff}#rStudioHeader .productName:hover,#rStudioHeader .productName:focus{color:#fdeba4}#rStudioHeader #menu .menuItem.a{background-color:#75aadb;color:#fff}#rStudioHeader #menu .menuItem:hover{background-color:#484557;color:#fff}#rStudioHeader #menu .menuItem.current{background-color:#fff;color:#1a162d;text-decoration:none}#rStudioFooter.band{background-color:#767381}#rStudioFooter .bandContent #copyright{color:#e3eef8}table tbody tr:nth-child(even){background-color:#f7faff}table tbody tr:nth-child(odd){background-color:#fff}.latest{border-top:.5em solid <no value>}.event{-moz-box-shadow:0 0 0 0 rgba(0,0,0,.1);-webkit-box-shadow:0 0 0 0 rgba(0,0,0,.1);box-shadow:0 0 0 0 rgba(0,0,0,.1)}.section .event{background-color:#eab0c41a}.section .event{border-top:7pt solid #a19ea936}.section .event a{color:#1a162d}.section .event{color:#404040}</style><link rel=stylesheet href=/css/tidyverse.css><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Hugo 0.71.1"><title>ggplot2 3.5.0</title><meta property="og:title" content="ggplot2 3.5.0"><meta property="og:description" content="ggplot2 3.5.0 is now on CRAN. Discover what is new in this release."><meta property="og:type" content="article"><meta property="og:url" content="https://www.tidyverse.org/blog/2024/02/ggplot2-3-5-0/"><meta property="twitter:card" content="summary_large_image"><meta property="og:title" content="ggplot2 3.5.0 - Tidyverse"><meta property="description" content="ggplot2 3.5.0 is now on CRAN. Discover what is new in this release."><meta property="og:description" content="ggplot2 3.5.0 is now on CRAN. Discover what is new in this release."><meta property="og:image" content="https://www.tidyverse.org/blog/2024/02/ggplot2-3-5-0/thumbnail-sq.jpg"><meta name=twitter:image content="https://www.tidyverse.org/blog/2024/02/ggplot2-3-5-0/thumbnail-wd.jpg"><link rel=apple-touch-icon sizes=180x180 href=/images/favicons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/images/favicons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/images/favicons/favicon-16x16.png><link rel=manifest href=/images/favicons/site.webmanifest><link rel=mask-icon href=/images/favicons/safari-pinned-tab.svg><link rel="shortcut icon" href=/images/favicons/favicon.ico><meta name=msapplication-TileColor content="#da532c"><meta name=msapplication-config href=/images/favicons/browserconfig.xml><script type=text/javascript src=/js/jquery-3.5.1.min.js></script><script type=text/javascript src=/js/site.js></script><link rel=icon href=/images/favicon.ico><script type=text/javascript src=/js/clipboard.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin=anonymous></script><script defer data-domain=tidyverse.org,all.tidyverse.org src=https://plausible.io/js/plausible.js></script></head><body><div id=appTidyverseSite class="shrinkHeader alwaysShrinkHeader"><div id=main><div id=rStudioHeader><nav class=band><div class="innards bandContent"><div><a class=productName href=/%20/>Tidyverse</a></div><div id=menu><div id=menuToggler></div><div id=menuItems><a class=menuItem href=/packages/>Packages</a>
<a class="menuItem current" href=/blog/>Blog</a>
<a class=menuItem href=/learn/>Learn</a>
<a class=menuItem href=/help/>Help</a>
<a class=menuItem href=/contribute/>Contribute</a></div></div></div></nav></div><main><div class="band padForHeader pushFooter"><div class=bandContent><div class="full splitColumns withMobileMargins"><div class=column75><h1 class=article-title>ggplot2 3.5.0</h1><div class=article-header aria-hidden=true><div class=photo><img src=/blog/2024/02/ggplot2-3-5-0/thumbnail-wd.jpg></div><div class=photoCredit>Photo by <a href=https://unsplash.com/photos/assorted-color-and-pattern-blanket-lot-dl-Lb5TMxF0>Megan Bucknall</a></div></div><span class=article-date><i class="fas fa-calendar-day fa-fw"></i>&nbsp;&nbsp;2024/02/23</span><p style=margin-bottom:.5em;margin-top:.85em><i class="fas fa-tags"></i>&nbsp;
<a href=/tags/ggplot2/>ggplot2</a>,
<a href=/tags/ggplot2-3-5-0/>ggplot2-3-5-0</a></p><p style=margin-top:.5em><i class="fas fa-user-circle fa-fw"></i>&nbsp;
Teun van den Brand</p><div class=article-content><p>We&rsquo;re tickled pink to announce the release of
<a href=https://ggplot2.tidyverse.org target=_blank rel=noopener>ggplot2</a> 3.5.0. ggplot2 is a system for declaratively creating graphics, based on The Grammar of Graphics. You provide the data, tell ggplot2 how to map variables to aesthetics, what graphical primitives to use, and it takes care of the details.</p><p>You can install it from CRAN with:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nf><a href=https://rdrr.io/r/utils/install.packages.html>install.packages</a></span><span class=o>(</span><span class=s>"ggplot2"</span><span class=o>)</span></span></code></pre></div><p>This blog post will cover a bunch of new features included in the latest release. In addition to rewriting the guide system, we made progress supporting newer R graphics capabilities, re-purposed the use of
<a href=https://rdrr.io/r/base/AsIs.html target=_blank rel=noopener><code>I()</code></a>, and introduce an improved polar coordinate system, along with other improvements. As the release is quite large, we are making a
<a href=https://www.tidyverse.org/tags/ggplot2-3-5-0/ target=_blank rel=noopener>series of blog posts</a> covering the major changes.</p><p>You can see a full list of changes in the
<a href=https://ggplot2.tidyverse.org/news/index.html target=_blank rel=noopener>release notes</a></p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=kr><a href=https://rdrr.io/r/base/library.html>library</a></span><span class=o>(</span><span class=nv><a href=https://ggplot2.tidyverse.org>ggplot2</a></span><span class=o>)</span></span>
<span><span class=kr><a href=https://rdrr.io/r/base/library.html>library</a></span><span class=o>(</span><span class=nv><a href=https://patchwork.data-imaginist.com>patchwork</a></span><span class=o>)</span></span>
<span><span class=kr><a href=https://rdrr.io/r/base/library.html>library</a></span><span class=o>(</span><span class=nv>grid</span><span class=o>)</span></span></code></pre></div><h2 id=guide-rewrite>Guide rewrite
<a href=#guide-rewrite><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>Axes and legends, collectively called guides, are an important component to plots, as they allow the translation of visual information back to data qualities. The extension mechanism of ggplot2 allows others to develop their own layers, facets, coords and scales through the ggproto object-oriented system. Finally, after years of being the only major system in ggplot2 still clinging to the S3 system, guides have been rewritten to use ggproto. With this rewrite, guides officially become an extension point that let developers implement their own guides. We have added a section to the
<a href=https://ggplot2.tidyverse.org/articles/extending-ggplot2.html#creating-new-guides target=_blank rel=noopener>Extending ggplot2</a> vignette on how to develop a new guide.</p><p>Alongside the rewrite, we made a slew of improvements to guides along the way. As these are somewhat meaty and focused topics, we are going to cover them in separate blog posts about axes and legends.</p><h2 id=patterns-and-gradients>Patterns and gradients
<a href=#patterns-and-gradients><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>Patterns and gradients are provided by the grid package, which ggplot2 builds on top of. They were first introduced in R 4.1.0 and were refined in R 4.2.0 to support multiple patterns and gradients. If your graphics device supported it, theme elements could already be set to patterns or gradients, even before this release.</p><blockquote><p>Note: On Windows machines, the default device in RStudio and in the knitr package is
<a href=https://rdrr.io/r/grDevices/png.html target=_blank rel=noopener><code>png()</code></a>, which does not support patterns. In RStudio, you can go to &lsquo;Tools > Global Options > General > Graphics&rsquo; and choose the &lsquo;ragg&rsquo; or &lsquo;Cairo PNG&rsquo; device from the dropdown menu to display patterns.</p></blockquote><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nv>gray_gradient</span> <span class=o>&lt;-</span> <span class=nf><a href=https://rdrr.io/r/grid/patterns.html>linearGradient</a></span><span class=o>(</span><span class=nf>scales</span><span class=nf>::</span><span class=nf><a href=https://scales.r-lib.org/reference/pal_grey.html>pal_grey</a></span><span class=o>(</span><span class=o>)</span><span class=o>(</span><span class=m>10</span><span class=o>)</span><span class=o>)</span></span>
<span></span>
<span><span class=nf><a href=https://ggplot2.tidyverse.org/reference/ggplot.html>ggplot</a></span><span class=o>(</span><span class=nv>mpg</span>, <span class=nf><a href=https://ggplot2.tidyverse.org/reference/aes.html>aes</a></span><span class=o>(</span><span class=nv>displ</span>, <span class=nv>hwy</span><span class=o>)</span><span class=o>)</span> <span class=o>+</span></span>
<span>  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/geom_point.html>geom_point</a></span><span class=o>(</span><span class=o>)</span> <span class=o>+</span></span>
<span>  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/theme.html>theme</a></span><span class=o>(</span>panel.background <span class=o>=</span> <span class=nf><a href=https://ggplot2.tidyverse.org/reference/element.html>element_rect</a></span><span class=o>(</span>fill <span class=o>=</span> <span class=nv>gray_gradient</span><span class=o>)</span><span class=o>)</span></span>
</code></pre><p><img src=figs/theme_gradient-1.png alt="Scatterplot of engine displacement versus highway miles per gallon. The panel background is a colour gradient starting from dark grey in the bottom-left corner ending at light grey in the upper-right corner." width=700px style=display:block;margin:auto></p></div><p>We are pleased to report that as of this release, patterns can be used as the <code>fill</code> aesthetic in most layers. To use a pattern, first build a gradient using {grid}&lsquo;s
<a href=https://rdrr.io/r/grid/patterns.html target=_blank rel=noopener><code>linearGradient()</code></a>,
<a href=https://rdrr.io/r/grid/patterns.html target=_blank rel=noopener><code>radialGradient()</code></a> functions, or a pattern using the
<a href=https://rdrr.io/r/grid/patterns.html target=_blank rel=noopener><code>pattern()</code></a> function. Because handling patterns and gradients is very similar, we will treat gradients as if they were patterns: when we say &lsquo;pattern&rsquo; in the text below, please mind that we mean patterns and gradients alike. These patterns can be passed to a layer as the <code>fill</code> aesthetic. Below, you can see two behaviours of the
<a href=https://rdrr.io/r/grid/patterns.html target=_blank rel=noopener><code>linearGradient()</code></a> pattern, depending on its <code>group</code> argument. The pattern with <code>group = FALSE</code> will display the gradient in every rectangle and <code>group = TRUE</code> will apply the gradient to all rectangles together.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nv>colours</span> <span class=o>&lt;-</span> <span class=nf>scales</span><span class=nf>::</span><span class=nf><a href=https://scales.r-lib.org/reference/pal_viridis.html>viridis_pal</a></span><span class=o>(</span><span class=o>)</span><span class=o>(</span><span class=m>10</span><span class=o>)</span></span>
<span><span class=nv>grad_ungroup</span> <span class=o>&lt;-</span> <span class=nf><a href=https://rdrr.io/r/grid/patterns.html>linearGradient</a></span><span class=o>(</span><span class=nv>colours</span>, group <span class=o>=</span> <span class=kc>FALSE</span><span class=o>)</span></span>
<span><span class=nv>grad_grouped</span> <span class=o>&lt;-</span> <span class=nf><a href=https://rdrr.io/r/grid/patterns.html>linearGradient</a></span><span class=o>(</span><span class=nv>colours</span>, group <span class=o>=</span> <span class=kc>TRUE</span><span class=o>)</span></span>
<span></span>
<span><span class=nv>ungroup</span> <span class=o>&lt;-</span> <span class=nf><a href=https://ggplot2.tidyverse.org/reference/ggplot.html>ggplot</a></span><span class=o>(</span><span class=nv>mpg</span>, <span class=nf><a href=https://ggplot2.tidyverse.org/reference/aes.html>aes</a></span><span class=o>(</span><span class=nf><a href=https://rdrr.io/r/base/factor.html>factor</a></span><span class=o>(</span><span class=nv>cyl</span><span class=o>)</span><span class=o>)</span><span class=o>)</span> <span class=o>+</span></span>
<span>  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/geom_bar.html>geom_bar</a></span><span class=o>(</span>fill <span class=o>=</span> <span class=nv>grad_ungroup</span><span class=o>)</span> <span class=o>+</span></span>
<span>  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/labs.html>labs</a></span><span class=o>(</span>title <span class=o>=</span> <span class=s>"Ungrouped gradient"</span><span class=o>)</span></span>
<span></span>
<span><span class=nv>grouped</span> <span class=o>&lt;-</span> <span class=nf><a href=https://ggplot2.tidyverse.org/reference/ggplot.html>ggplot</a></span><span class=o>(</span><span class=nv>mpg</span>, <span class=nf><a href=https://ggplot2.tidyverse.org/reference/aes.html>aes</a></span><span class=o>(</span><span class=nf><a href=https://rdrr.io/r/base/factor.html>factor</a></span><span class=o>(</span><span class=nv>cyl</span><span class=o>)</span><span class=o>)</span><span class=o>)</span> <span class=o>+</span></span>
<span>  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/geom_bar.html>geom_bar</a></span><span class=o>(</span>fill <span class=o>=</span> <span class=nv>grad_grouped</span><span class=o>)</span> <span class=o>+</span></span>
<span>  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/labs.html>labs</a></span><span class=o>(</span>title <span class=o>=</span> <span class=s>"Grouped gradient"</span><span class=o>)</span></span>
<span></span>
<span><span class=nv>ungroup</span> <span class=o>|</span> <span class=nv>grouped</span></span>
</code></pre><p><img src=figs/grouping_gradient-1.png alt="Two barplots showing the counts of number of cylinders. The first plot is titled 'Ungrouped gradient' and shows individual gradients in the bars. The second is titled 'Grouped gradient' and shows a single gradient along all bars." width=700px style=display:block;margin:auto></p></div><p>Besides passing a static pattern as the <code>fill</code> aesthetic, it is also possible to map values to patterns using
<a href=https://ggplot2.tidyverse.org/reference/scale_manual.html target=_blank rel=noopener><code>scale_fill_manual()</code></a>. To map values to patterns, pass a list of patterns to the <code>values</code> argument of the scale. When providing patterns as a list, the list can be a mix of patterns and plain colours, like <code>"limegreen"</code> in the plot below. We are excited that people may come up with nice pattern palettes that can be used in similar fashion.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nv>patterns</span> <span class=o>&lt;-</span> <span class=nf><a href=https://rdrr.io/r/base/list.html>list</a></span><span class=o>(</span></span>
<span>  <span class=nf><a href=https://rdrr.io/r/grid/patterns.html>linearGradient</a></span><span class=o>(</span><span class=nv>colours</span>, group <span class=o>=</span> <span class=kc>FALSE</span><span class=o>)</span>,</span>
<span>  <span class=s>"limegreen"</span>,</span>
<span>  <span class=nf><a href=https://rdrr.io/r/grid/patterns.html>radialGradient</a></span><span class=o>(</span><span class=nv>colours</span>, group <span class=o>=</span> <span class=kc>FALSE</span><span class=o>)</span>,</span>
<span>  <span class=nf><a href=https://rdrr.io/r/grid/patterns.html>pattern</a></span><span class=o>(</span></span>
<span>    <span class=nf><a href=https://rdrr.io/r/grid/grid.rect.html>rectGrob</a></span><span class=o>(</span>x <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/c.html>c</a></span><span class=o>(</span><span class=m>0.25</span>, <span class=m>0.75</span><span class=o>)</span>, y <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/c.html>c</a></span><span class=o>(</span><span class=m>0.25</span>, <span class=m>0.75</span><span class=o>)</span>, width <span class=o>=</span> <span class=m>0.5</span>, height <span class=o>=</span> <span class=m>0.5</span><span class=o>)</span>,</span>
<span>    width <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/grid/unit.html>unit</a></span><span class=o>(</span><span class=m>5</span>, <span class=s>"mm"</span><span class=o>)</span>, height <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/grid/unit.html>unit</a></span><span class=o>(</span><span class=m>5</span>, <span class=s>"mm"</span><span class=o>)</span>, extend <span class=o>=</span> <span class=s>"repeat"</span>,</span>
<span>    gp <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/grid/gpar.html>gpar</a></span><span class=o>(</span>fill <span class=o>=</span> <span class=s>"limegreen"</span><span class=o>)</span></span>
<span>  <span class=o>)</span></span>
<span><span class=o>)</span></span>
<span></span>
<span><span class=nf><a href=https://ggplot2.tidyverse.org/reference/ggplot.html>ggplot</a></span><span class=o>(</span><span class=nv>mpg</span>, <span class=nf><a href=https://ggplot2.tidyverse.org/reference/aes.html>aes</a></span><span class=o>(</span><span class=nf><a href=https://rdrr.io/r/base/factor.html>factor</a></span><span class=o>(</span><span class=nv>cyl</span><span class=o>)</span>, fill <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/factor.html>factor</a></span><span class=o>(</span><span class=nv>cyl</span><span class=o>)</span><span class=o>)</span><span class=o>)</span> <span class=o>+</span></span>
<span>  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/geom_bar.html>geom_bar</a></span><span class=o>(</span><span class=o>)</span> <span class=o>+</span></span>
<span>  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/scale_manual.html>scale_fill_manual</a></span><span class=o>(</span>values <span class=o>=</span> <span class=nv>patterns</span><span class=o>)</span></span>
</code></pre><p><img src=figs/pattern_scale-1.png alt="Barplot showing counts of number of cylinders with the bars filled by a linear gradient, a plain green colour, a radial gradient and a green checkerboard pattern." width=700px style=display:block;margin:auto></p></div><p>The largest obstacle we had to overcome to support gradients in ggplot2 was to apply the <code>alpha</code> aesthetic consistently to the patterns. The regular
<a href=https://scales.r-lib.org/reference/alpha.html target=_blank rel=noopener><code>scales::alpha()</code></a> function does not work with patterns, so we implemented a new
<a href=https://ggplot2.tidyverse.org/reference/fill_alpha.html target=_blank rel=noopener><code>fill_alpha()</code></a> function that applies the <code>alpha</code> aesthetic to the patterns. By switching out <code>fill = alpha(fill, alpha)</code> with <code>fill = fill_alpha(fill, alpha)</code> in the
<a href=https://rdrr.io/r/grid/gpar.html target=_blank rel=noopener><code>grid::gpar()</code></a> function, extension developers can enable pattern fills in their own layer extensions.</p><p>The
<a href=https://ggplot2.tidyverse.org/reference/fill_alpha.html target=_blank rel=noopener><code>fill_alpha()</code></a> function checks if the active device supports patterns and spits out a friendlier warning or error on demand. For extension developers that want to use newer graphics features, you can reuse the
<a href=https://ggplot2.tidyverse.org/reference/check_device.html target=_blank rel=noopener><code>check_device()</code></a> function to check feature availability or throw messages in a similar fashion.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=c># The currently active device is the ragg::agg_png() device</span></span>
<span><span class=nf><a href=https://ggplot2.tidyverse.org/reference/check_device.html>check_device</a></span><span class=o>(</span>feature <span class=o>=</span> <span class=s>"patterns"</span>, action <span class=o>=</span> <span class=s>"test"</span><span class=o>)</span></span>
<span><span class=c>#&gt; [1] TRUE</span></span>
<span></span><span><span class=nf><a href=https://ggplot2.tidyverse.org/reference/check_device.html>check_device</a></span><span class=o>(</span>feature <span class=o>=</span> <span class=s>"glyphs"</span>, action <span class=o>=</span> <span class=s>"abort"</span><span class=o>)</span></span>
<span><span class=c>#&gt; <span style=color:#bb0;font-weight:700>Error</span><span style=font-weight:700>:</span></span></span>
<span><span class=c>#&gt; <span style=color:#bb0>!</span> The <span style=color:#0b0>agg_png</span> device does not support <span style=font-style:italic>typeset glyphs</span>.</span></span>
<span></span></code></pre></div><h2 id=ignoring-scales>Ignoring scales
<a href=#ignoring-scales><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>In this release, ggplot2 has changed how the plots interact with variables created with
<a href=https://rdrr.io/r/base/AsIs.html target=_blank rel=noopener><code>I()</code></a> (&lsquo;AsIs&rsquo; variables). The change is somewhat subtle, so it takes a bit of explaining.</p><p>It <em>used to be</em> the case that &lsquo;AsIs&rsquo; variables automatically added an identity scale to the plot. Identity scales in ggplot2 preserve the original input, without mapping or transforming them. For example, iif you give literal colour names as the <code>colour</code> aesthetic, the plot will use these exact colours.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nf><a href=https://rdrr.io/r/base/Random.html>set.seed</a></span><span class=o>(</span><span class=m>42</span><span class=o>)</span></span>
<span><span class=nv>my_colours</span> <span class=o>&lt;-</span> <span class=nf><a href=https://rdrr.io/r/base/sample.html>sample</a></span><span class=o>(</span><span class=nf><a href=https://rdrr.io/r/base/c.html>c</a></span><span class=o>(</span><span class=s>"red"</span>, <span class=s>"green"</span>, <span class=s>"blue"</span><span class=o>)</span>, <span class=nf><a href=https://rdrr.io/r/base/nrow.html>nrow</a></span><span class=o>(</span><span class=nv>mpg</span><span class=o>)</span>, replace <span class=o>=</span> <span class=kc>TRUE</span><span class=o>)</span></span>
<span></span>
<span><span class=nf><a href=https://ggplot2.tidyverse.org/reference/ggplot.html>ggplot</a></span><span class=o>(</span><span class=nv>mpg</span>, <span class=nf><a href=https://ggplot2.tidyverse.org/reference/aes.html>aes</a></span><span class=o>(</span><span class=nv>displ</span>, <span class=nv>hwy</span><span class=o>)</span><span class=o>)</span> <span class=o>+</span></span>
<span>  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/geom_point.html>geom_point</a></span><span class=o>(</span><span class=nf><a href=https://ggplot2.tidyverse.org/reference/aes.html>aes</a></span><span class=o>(</span>colour <span class=o>=</span> <span class=nv>my_colours</span><span class=o>)</span><span class=o>)</span> <span class=o>+</span></span>
<span>  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/scale_identity.html>scale_colour_identity</a></span><span class=o>(</span><span class=o>)</span></span>
</code></pre><p><img src=figs/literal_colours-1.png alt="Scatterplot of engine displacement versus highway miles per gallon with points in red, green and blue." width=700px style=display:block;margin:auto></p></div><p>However, because identity scales <em>are</em> true scales, you cannot combine literal colours in one layer with mapped colours in the next. Trying to do so, will confront you with the &lsquo;unknown colour name&rsquo; error.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nf><a href=https://ggplot2.tidyverse.org/reference/ggplot.html>ggplot</a></span><span class=o>(</span><span class=nv>mpg</span>, <span class=nf><a href=https://ggplot2.tidyverse.org/reference/aes.html>aes</a></span><span class=o>(</span><span class=nv>displ</span>, <span class=nv>hwy</span><span class=o>)</span><span class=o>)</span> <span class=o>+</span></span>
<span>  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/geom_point.html>geom_point</a></span><span class=o>(</span><span class=nf><a href=https://ggplot2.tidyverse.org/reference/aes.html>aes</a></span><span class=o>(</span>colour <span class=o>=</span> <span class=nv>drv</span><span class=o>)</span>, shape <span class=o>=</span> <span class=m>1</span>, size <span class=o>=</span> <span class=m>5</span><span class=o>)</span> <span class=o>+</span></span>
<span>  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/geom_point.html>geom_point</a></span><span class=o>(</span><span class=nf><a href=https://ggplot2.tidyverse.org/reference/aes.html>aes</a></span><span class=o>(</span>colour <span class=o>=</span> <span class=nv>my_colours</span><span class=o>)</span><span class=o>)</span> <span class=o>+</span></span>
<span>  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/scale_identity.html>scale_colour_identity</a></span><span class=o>(</span><span class=o>)</span></span>
<span><span class=c>#&gt; <span style=color:#bb0;font-weight:700>Error</span><span style=font-weight:700> in `geom_point()`:</span></span></span>
<span><span class=c>#&gt; <span style=color:#bb0>!</span> Problem while converting geom to grob.</span></span>
<span><span class=c>#&gt; <span style=color:#0bb>ℹ</span> Error occurred in the 1st layer.</span></span>
<span><span class=c>#&gt; <span style=font-weight:700>Caused by error:</span></span></span>
<span><span class=c>#&gt; <span style=color:#bb0>!</span> Unknown colour name: f</span></span>
<span></span></code></pre></div><p>In order to prevent such clashes between identity scales that map nothing and regular scales, we have changed how &lsquo;AsIs&rsquo; variables interact with scales. Instead of adding an identity scale, &lsquo;AsIs&rsquo; variables are now altogether <em>ignored</em> by the scale systems. On the surface, the new behaviour is very similar to the old one, in that for example literal colours are used. However, with &lsquo;AsIs&rsquo; variables ignored, you can now freely combine layers with &lsquo;AsIs&rsquo; input with layers that map input. If you need a legend for the literal variable, we recommend to use the identity scale mechanism instead.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nf><a href=https://ggplot2.tidyverse.org/reference/ggplot.html>ggplot</a></span><span class=o>(</span><span class=nv>mpg</span>, <span class=nf><a href=https://ggplot2.tidyverse.org/reference/aes.html>aes</a></span><span class=o>(</span><span class=nv>displ</span>, <span class=nv>hwy</span><span class=o>)</span><span class=o>)</span> <span class=o>+</span></span>
<span>  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/geom_point.html>geom_point</a></span><span class=o>(</span><span class=nf><a href=https://ggplot2.tidyverse.org/reference/aes.html>aes</a></span><span class=o>(</span>colour <span class=o>=</span> <span class=nv>drv</span><span class=o>)</span>, shape <span class=o>=</span> <span class=m>1</span>, size <span class=o>=</span> <span class=m>5</span><span class=o>)</span> <span class=o>+</span></span>
<span>  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/geom_point.html>geom_point</a></span><span class=o>(</span><span class=nf><a href=https://ggplot2.tidyverse.org/reference/aes.html>aes</a></span><span class=o>(</span>colour <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/AsIs.html>I</a></span><span class=o>(</span><span class=nv>my_colours</span><span class=o>)</span><span class=o>)</span>, show.legend <span class=o>=</span> <span class=kc>FALSE</span><span class=o>)</span></span>
</code></pre><p><img src=figs/asis_aesthetic-1.png alt="Scatterplot of engine displacement versus highway miles per gallon. Every point has two circles: a smaller one in red, green or blue and a larger one mapped to the 'drv' variable." width=700px style=display:block;margin:auto></p></div><p>Perhaps more salient than avoid scale clashes, is that the same applies to the <code>x</code> and <code>y</code> position aesthetics. There has never been a <code>scale_x_identity()</code> or <code>scale_y_identity()</code> function, so what this means may be unexpected. Internally, scales transform every continuous variable to the 0-1 range before drawing the graphics. So too do &lsquo;AsIs&rsquo; position aesthetics work: you can use numbers between 0 and 1 to set the position. These positions are relative to the plot&rsquo;s panel and this mechanism opens up a great way to add plot annotations that are independent of the data.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nv>t</span> <span class=o>&lt;-</span> <span class=nf><a href=https://rdrr.io/r/base/seq.html>seq</a></span><span class=o>(</span><span class=m>0</span>, <span class=m>2</span> <span class=o>*</span> <span class=nv>pi</span>, length.out <span class=o>=</span> <span class=m>100</span><span class=o>)</span></span>
<span></span>
<span><span class=nf><a href=https://ggplot2.tidyverse.org/reference/ggplot.html>ggplot</a></span><span class=o>(</span><span class=nv>mpg</span>, <span class=nf><a href=https://ggplot2.tidyverse.org/reference/aes.html>aes</a></span><span class=o>(</span><span class=nv>displ</span>, <span class=nv>hwy</span><span class=o>)</span><span class=o>)</span> <span class=o>+</span></span>
<span>  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/geom_point.html>geom_point</a></span><span class=o>(</span>colour <span class=o>=</span> <span class=s>"grey50"</span><span class=o>)</span> <span class=o>+</span></span>
<span>  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/annotate.html>annotate</a></span><span class=o>(</span></span>
<span>    <span class=s>"rect"</span>, </span>
<span>    xmin <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/AsIs.html>I</a></span><span class=o>(</span><span class=m>0.05</span><span class=o>)</span>, xmax <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/AsIs.html>I</a></span><span class=o>(</span><span class=m>0.95</span><span class=o>)</span>,</span>
<span>    ymin <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/AsIs.html>I</a></span><span class=o>(</span><span class=m>0.05</span><span class=o>)</span>, ymax <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/AsIs.html>I</a></span><span class=o>(</span><span class=m>0.95</span><span class=o>)</span>,</span>
<span>    fill <span class=o>=</span> <span class=kc>NA</span>, colour <span class=o>=</span> <span class=s>"red"</span></span>
<span>  <span class=o>)</span> <span class=o>+</span></span>
<span>  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/annotate.html>annotate</a></span><span class=o>(</span></span>
<span>    <span class=s>"path"</span>,</span>
<span>    x <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/AsIs.html>I</a></span><span class=o>(</span><span class=nf><a href=https://rdrr.io/r/base/Trig.html>cos</a></span><span class=o>(</span><span class=nv>t</span><span class=o>)</span> <span class=o>/</span> <span class=m>2</span> <span class=o>+</span> <span class=m>0.5</span><span class=o>)</span>, y <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/AsIs.html>I</a></span><span class=o>(</span><span class=nf><a href=https://rdrr.io/r/base/Trig.html>sin</a></span><span class=o>(</span><span class=nv>t</span><span class=o>)</span> <span class=o>/</span> <span class=m>2</span> <span class=o>+</span> <span class=m>0.5</span><span class=o>)</span>,</span>
<span>    colour <span class=o>=</span> <span class=s>"blue"</span></span>
<span>  <span class=o>)</span> <span class=o>+</span></span>
<span>  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/annotate.html>annotate</a></span><span class=o>(</span></span>
<span>    <span class=s>"text"</span>, </span>
<span>    label <span class=o>=</span> <span class=s>"Text in the middle"</span>,</span>
<span>    x <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/AsIs.html>I</a></span><span class=o>(</span><span class=m>0.5</span><span class=o>)</span>, y <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/AsIs.html>I</a></span><span class=o>(</span><span class=m>0.5</span><span class=o>)</span>,</span>
<span>    size <span class=o>=</span> <span class=m>8</span></span>
<span>  <span class=o>)</span></span>
</code></pre><p><img src=figs/asis_annotation-1.png alt="Scatterplot of engine displacement versus highway miles per gallon. The plot has a red rectangle slightly smaller than the panel, a blue circle touching the panel edges and text in the middle that reads: 'text in the middle'." width=700px style=display:block;margin:auto></p></div><p>Please take note that discrete variables as &lsquo;AsIs&rsquo; position aesthetic have no interpretation and will likely result in errors.</p><h2 id=other-improvements>Other improvements
<a href=#other-improvements><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>Coordinating text sizes between the theme and
<a href=https://ggplot2.tidyverse.org/reference/geom_text.html target=_blank rel=noopener><code>geom_text()</code></a>/
<a href=https://ggplot2.tidyverse.org/reference/geom_text.html target=_blank rel=noopener><code>geom_label()</code></a> has been a hassle, since the theme uses text sizes in points (pt) and geoms use text size in millimetres. Now, one can control what the <code>size</code> aesthetic means for text, by setting the <code>size.unit</code> argument.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nv>p</span> <span class=o>&lt;-</span> <span class=nf><a href=https://ggplot2.tidyverse.org/reference/ggplot.html>ggplot</a></span><span class=o>(</span><span class=nv>mtcars</span>, <span class=nf><a href=https://ggplot2.tidyverse.org/reference/aes.html>aes</a></span><span class=o>(</span><span class=nv>wt</span>, <span class=nv>mpg</span>, label <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/colnames.html>rownames</a></span><span class=o>(</span><span class=nv>mtcars</span><span class=o>)</span><span class=o>)</span><span class=o>)</span></span>
<span><span class=nv>p</span> <span class=o>+</span></span>
<span>  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/geom_text.html>geom_text</a></span><span class=o>(</span>size <span class=o>=</span> <span class=m>10</span>, size.unit <span class=o>=</span> <span class=s>"pt"</span><span class=o>)</span> <span class=o>+</span></span>
<span>  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/theme.html>theme</a></span><span class=o>(</span>axis.text <span class=o>=</span> <span class=nf><a href=https://ggplot2.tidyverse.org/reference/element.html>element_text</a></span><span class=o>(</span>size <span class=o>=</span> <span class=m>10</span><span class=o>)</span><span class=o>)</span></span>
</code></pre><p><img src=figs/size_unit_arg-1.png alt="A plot showing weight versus miles per gallon with individual cars labelled by text. The text in the plot has the same size as the text labelling the axes." width=700px style=display:block;margin:auto></p></div><p>Two improvements have been made to
<a href=https://ggplot2.tidyverse.org/reference/geom_text.html target=_blank rel=noopener><code>geom_label()</code></a>. The first is that it now obeys an <code>angle</code> aesthetic.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nv>p</span> <span class=o>+</span> <span class=nf><a href=https://ggplot2.tidyverse.org/reference/geom_text.html>geom_label</a></span><span class=o>(</span><span class=nf><a href=https://ggplot2.tidyverse.org/reference/aes.html>aes</a></span><span class=o>(</span>angle <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/stats/Uniform.html>runif</a></span><span class=o>(</span><span class=nf><a href=https://rdrr.io/r/base/nrow.html>nrow</a></span><span class=o>(</span><span class=nv>mtcars</span><span class=o>)</span>, <span class=o>-</span><span class=m>45</span>, <span class=m>45</span><span class=o>)</span><span class=o>)</span><span class=o>)</span></span>
</code></pre><p><img src=figs/label_angle-1.png alt="A plot showing weight versus miles per gallon with individual cars labelled by textboxes. The textboxes are displayed in different angles." width=700px style=display:block;margin:auto></p></div><p>In addition,
<a href=https://ggplot2.tidyverse.org/reference/geom_text.html target=_blank rel=noopener><code>geom_label()</code></a>&lsquo;s <code>label.padding</code> argument can be controlled individually for every side of the text by using the
<a href=https://ggplot2.tidyverse.org/reference/element.html target=_blank rel=noopener><code>margin()</code></a> function. The legend keys for labels has also changed to reflect the geom more accurately.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nv>p</span> <span class=o>+</span> <span class=nf><a href=https://ggplot2.tidyverse.org/reference/geom_text.html>geom_label</a></span><span class=o>(</span></span>
<span>  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/aes.html>aes</a></span><span class=o>(</span>colour <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/factor.html>factor</a></span><span class=o>(</span><span class=nv>cyl</span><span class=o>)</span><span class=o>)</span>, </span>
<span>  label.padding <span class=o>=</span> <span class=nf><a href=https://ggplot2.tidyverse.org/reference/element.html>margin</a></span><span class=o>(</span>t <span class=o>=</span> <span class=m>2</span>, r <span class=o>=</span> <span class=m>20</span>, b <span class=o>=</span> <span class=m>1</span>, l <span class=o>=</span> <span class=m>0</span><span class=o>)</span></span>
<span><span class=o>)</span></span>
</code></pre><p><img src=figs/label_padding-1.png alt="A plot showing weight versus miles per gallon with individual cars labelled by textboxes. The textboxes have a large margin on the right." width=700px style=display:block;margin:auto></p></div><p>Like
<a href=https://ggplot2.tidyverse.org/reference/geom_density.html target=_blank rel=noopener><code>geom_density()</code></a> before it,
<a href=https://ggplot2.tidyverse.org/reference/geom_violin.html target=_blank rel=noopener><code>geom_violin()</code></a> now gains a <code>bounds</code> argument to restrict the range wherein density is estimated.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nv>df</span> <span class=o>&lt;-</span> <span class=nf><a href=https://rdrr.io/r/base/data.frame.html>data.frame</a></span><span class=o>(</span></span>
<span>  x <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/c.html>c</a></span><span class=o>(</span><span class=nf><a href=https://rdrr.io/r/stats/Beta.html>rbeta</a></span><span class=o>(</span><span class=m>100</span>, <span class=m>0.5</span>, <span class=m>0.5</span><span class=o>)</span>, <span class=nf><a href=https://rdrr.io/r/stats/Beta.html>rbeta</a></span><span class=o>(</span><span class=m>100</span>, <span class=m>1</span>, <span class=m>1</span><span class=o>)</span>, <span class=nf><a href=https://rdrr.io/r/stats/Beta.html>rbeta</a></span><span class=o>(</span><span class=m>100</span>, <span class=m>2</span>, <span class=m>2</span><span class=o>)</span><span class=o>)</span>,</span>
<span>  group <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/rep.html>rep</a></span><span class=o>(</span><span class=nf><a href=https://rdrr.io/r/base/c.html>c</a></span><span class=o>(</span><span class=s>"A"</span>, <span class=s>"B"</span>, <span class=s>"C"</span><span class=o>)</span>, each <span class=o>=</span> <span class=m>100</span><span class=o>)</span></span>
<span><span class=o>)</span></span>
<span></span>
<span><span class=nf><a href=https://ggplot2.tidyverse.org/reference/ggplot.html>ggplot</a></span><span class=o>(</span><span class=nv>df</span>, <span class=nf><a href=https://ggplot2.tidyverse.org/reference/aes.html>aes</a></span><span class=o>(</span><span class=nv>group</span>, <span class=nv>x</span><span class=o>)</span><span class=o>)</span> <span class=o>+</span></span>
<span>  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/geom_violin.html>geom_violin</a></span><span class=o>(</span>bounds <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/c.html>c</a></span><span class=o>(</span><span class=m>0</span>, <span class=m>1</span><span class=o>)</span><span class=o>)</span></span>
</code></pre><p><img src=figs/violin_bounds-1.png alt="Violin plot showing random numbers drawn from beta distributions with different parameters. The ends of the first two violins are flat at the top and bottom." width=700px style=display:block;margin:auto></p></div><p>The
<a href=https://ggplot2.tidyverse.org/reference/geom_boxplot.html target=_blank rel=noopener><code>geom_boxplot()</code></a> has acquired an option to remove (rather than hide) outliers. Setting <code>outliers = FALSE</code> removes outliers so that the plot limits do not take these into account. For hiding (and not removing) outliers, you can still set <code>outlier.shape = NA</code>. Also, it has gained a <code>staplewidth</code> argument that can be used to draw staples: horizontal lines at the end of the boxplot whiskers. The default, <code>staplewidth = 0</code>, will suppress the staples so your current box plots continue to look the same.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nf><a href=https://ggplot2.tidyverse.org/reference/ggplot.html>ggplot</a></span><span class=o>(</span><span class=nv>diamonds</span>, <span class=nf><a href=https://ggplot2.tidyverse.org/reference/aes.html>aes</a></span><span class=o>(</span><span class=nv>cut</span>, <span class=nv>price</span><span class=o>)</span><span class=o>)</span> <span class=o>+</span></span>
<span>  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/geom_boxplot.html>geom_boxplot</a></span><span class=o>(</span>outliers <span class=o>=</span> <span class=kc>FALSE</span>, staplewidth <span class=o>=</span> <span class=m>0.5</span><span class=o>)</span></span>
</code></pre><p><img src=figs/boxplot_outliers_staples-1.png alt="Boxplot showing the price of diamonds per cut. The y-axis does not go much beyond the whiskers, and whiskers are decorated with a staple." width=700px style=display:block;margin:auto></p></div><p>The scales functions now do a better job at reporting <em>which</em> scale has encountered an error.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nf><a href=https://ggplot2.tidyverse.org/reference/scale_brewer.html>scale_colour_brewer</a></span><span class=o>(</span>breaks <span class=o>=</span> <span class=m>1</span><span class=o>:</span><span class=m>5</span>, labels <span class=o>=</span> <span class=m>1</span><span class=o>:</span><span class=m>4</span><span class=o>)</span></span>
<span><span class=c>#&gt; <span style=color:#bb0;font-weight:700>Error</span><span style=font-weight:700> in `scale_colour_brewer()`:</span></span></span>
<span><span class=c>#&gt; <span style=color:#bb0>!</span> `breaks` and `labels` must have the same length.</span></span>
<span></span><span></span>
<span><span class=nf><a href=https://ggplot2.tidyverse.org/reference/ggplot.html>ggplot</a></span><span class=o>(</span><span class=nv>mpg</span>, <span class=nf><a href=https://ggplot2.tidyverse.org/reference/aes.html>aes</a></span><span class=o>(</span><span class=nv>class</span>, <span class=nv>displ</span><span class=o>)</span><span class=o>)</span> <span class=o>+</span></span>
<span>  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/geom_boxplot.html>geom_boxplot</a></span><span class=o>(</span><span class=o>)</span> <span class=o>+</span></span>
<span>  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/scale_continuous.html>scale_x_continuous</a></span><span class=o>(</span><span class=o>)</span></span>
<span><span class=c>#&gt; <span style=color:#bb0;font-weight:700>Error</span><span style=font-weight:700> in `scale_x_continuous()`:</span></span></span>
<span><span class=c>#&gt; <span style=color:#bb0>!</span> Discrete values supplied to continuous scale.</span></span>
<span><span class=c>#&gt; <span style=color:#0bb>ℹ</span> Example values: <span style=color:#00b>"compact"</span>, <span style=color:#00b>"compact"</span>, <span style=color:#00b>"compact"</span>, <span style=color:#00b>"compact"</span>, and <span style=color:#00b>"compact"</span></span></span>
<span></span><span></span>
<span><span class=nf><a href=https://ggplot2.tidyverse.org/reference/ggplot.html>ggplot</a></span><span class=o>(</span><span class=nv>msleep</span>, <span class=nf><a href=https://ggplot2.tidyverse.org/reference/aes.html>aes</a></span><span class=o>(</span><span class=nv>bodywt</span> <span class=o>-</span> <span class=m>1</span>, <span class=nv>brainwt</span><span class=o>)</span><span class=o>)</span> <span class=o>+</span></span>
<span>  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/geom_point.html>geom_point</a></span><span class=o>(</span>na.rm <span class=o>=</span> <span class=kc>TRUE</span><span class=o>)</span> <span class=o>+</span></span>
<span>  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/scale_continuous.html>scale_x_log10</a></span><span class=o>(</span><span class=o>)</span></span>
<span><span class=c>#&gt; Warning in transformation$transform(x): NaNs produced</span></span>
<span></span><span><span class=c>#&gt; Warning in scale_x_log10(): <span style=color:#0b0>log-10</span> transformation introduced infinite values.</span></span>
<span></span></code></pre><p><img src=figs/scale_messages-1.png alt="Scatterplot showing body weight minus one versus brain weight of mammals. The x-axis is log-transformed." width=700px style=display:block;margin:auto></p></div><h2 id=acknowledgements>Acknowledgements
<a href=#acknowledgements><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>Thank you to all people who have contributed issues, code and comments to this release:</p><p><a href=https://github.com/92amartins target=_blank rel=noopener>@92amartins</a>,
<a href=https://github.com/a-torgovitsky target=_blank rel=noopener>@a-torgovitsky</a>,
<a href=https://github.com/aarongraybill target=_blank rel=noopener>@aarongraybill</a>,
<a href=https://github.com/aavogt target=_blank rel=noopener>@aavogt</a>,
<a href=https://github.com/agila5 target=_blank rel=noopener>@agila5</a>,
<a href=https://github.com/ahcyip target=_blank rel=noopener>@ahcyip</a>,
<a href=https://github.com/AlexanderCasper target=_blank rel=noopener>@AlexanderCasper</a>,
<a href=https://github.com/alexkrohn target=_blank rel=noopener>@alexkrohn</a>,
<a href=https://github.com/alofting target=_blank rel=noopener>@alofting</a>,
<a href=https://github.com/andrewgustar target=_blank rel=noopener>@andrewgustar</a>,
<a href=https://github.com/antagomir target=_blank rel=noopener>@antagomir</a>,
<a href=https://github.com/aphalo target=_blank rel=noopener>@aphalo</a>,
<a href=https://github.com/Ari04T target=_blank rel=noopener>@Ari04T</a>,
<a href=https://github.com/AroneyS target=_blank rel=noopener>@AroneyS</a>,
<a href=https://github.com/Asa12138 target=_blank rel=noopener>@Asa12138</a>,
<a href=https://github.com/ashgreat target=_blank rel=noopener>@ashgreat</a>,
<a href=https://github.com/averissimo target=_blank rel=noopener>@averissimo</a>,
<a href=https://github.com/bakerwm target=_blank rel=noopener>@bakerwm</a>,
<a href=https://github.com/balling-dev target=_blank rel=noopener>@balling-dev</a>,
<a href=https://github.com/banbh target=_blank rel=noopener>@banbh</a>,
<a href=https://github.com/barracuda156 target=_blank rel=noopener>@barracuda156</a>,
<a href=https://github.com/BartJanvanRossum target=_blank rel=noopener>@BartJanvanRossum</a>,
<a href=https://github.com/beansrowning target=_blank rel=noopener>@beansrowning</a>,
<a href=https://github.com/benimwolfspelz target=_blank rel=noopener>@benimwolfspelz</a>,
<a href=https://github.com/bfordAIMS target=_blank rel=noopener>@bfordAIMS</a>,
<a href=https://github.com/bguiastr target=_blank rel=noopener>@bguiastr</a>,
<a href=https://github.com/bnicenboim target=_blank rel=noopener>@bnicenboim</a>,
<a href=https://github.com/BrianDiggs target=_blank rel=noopener>@BrianDiggs</a>,
<a href=https://github.com/bsgerber target=_blank rel=noopener>@bsgerber</a>,
<a href=https://github.com/burrapreeti target=_blank rel=noopener>@burrapreeti</a>,
<a href=https://github.com/bwiernik target=_blank rel=noopener>@bwiernik</a>,
<a href=https://github.com/ccsarapas target=_blank rel=noopener>@ccsarapas</a>,
<a href=https://github.com/CGlemser target=_blank rel=noopener>@CGlemser</a>,
<a href=https://github.com/chiajungTung target=_blank rel=noopener>@chiajungTung</a>,
<a href=https://github.com/chipsin87 target=_blank rel=noopener>@chipsin87</a>,
<a href=https://github.com/cjvanlissa target=_blank rel=noopener>@cjvanlissa</a>,
<a href=https://github.com/CorradoLanera target=_blank rel=noopener>@CorradoLanera</a>,
<a href=https://github.com/danielneilson target=_blank rel=noopener>@danielneilson</a>,
<a href=https://github.com/danli349 target=_blank rel=noopener>@danli349</a>,
<a href=https://github.com/DasHammett target=_blank rel=noopener>@DasHammett</a>,
<a href=https://github.com/davidhodge931 target=_blank rel=noopener>@davidhodge931</a>,
<a href=https://github.com/DavisVaughan target=_blank rel=noopener>@DavisVaughan</a>,
<a href=https://github.com/dieghernan target=_blank rel=noopener>@dieghernan</a>,
<a href=https://github.com/Ductmonkey target=_blank rel=noopener>@Ductmonkey</a>,
<a href=https://github.com/edent target=_blank rel=noopener>@edent</a>,
<a href=https://github.com/Elham-adabi target=_blank rel=noopener>@Elham-adabi</a>,
<a href=https://github.com/ELICHOS target=_blank rel=noopener>@ELICHOS</a>,
<a href=https://github.com/eliocamp target=_blank rel=noopener>@eliocamp</a>,
<a href=https://github.com/ellisp target=_blank rel=noopener>@ellisp</a>,
<a href=https://github.com/emuise target=_blank rel=noopener>@emuise</a>,
<a href=https://github.com/erikdeluca target=_blank rel=noopener>@erikdeluca</a>,
<a href=https://github.com/f2il-kieranmace target=_blank rel=noopener>@f2il-kieranmace</a>,
<a href=https://github.com/FDylanT target=_blank rel=noopener>@FDylanT</a>,
<a href=https://github.com/fkohrt target=_blank rel=noopener>@fkohrt</a>,
<a href=https://github.com/francisbarton target=_blank rel=noopener>@francisbarton</a>,
<a href=https://github.com/fredcallaway target=_blank rel=noopener>@fredcallaway</a>,
<a href=https://github.com/frezza-metabolomics target=_blank rel=noopener>@frezza-metabolomics</a>,
<a href=https://github.com/GabrielHoffman target=_blank rel=noopener>@GabrielHoffman</a>,
<a href=https://github.com/gaospecial target=_blank rel=noopener>@gaospecial</a>,
<a href=https://github.com/garyzhubc target=_blank rel=noopener>@garyzhubc</a>,
<a href=https://github.com/gavinsimpson target=_blank rel=noopener>@gavinsimpson</a>,
<a href=https://github.com/Generalized target=_blank rel=noopener>@Generalized</a>,
<a href=https://github.com/ghost target=_blank rel=noopener>@ghost</a>,
<a href=https://github.com/giadasp target=_blank rel=noopener>@giadasp</a>,
<a href=https://github.com/GMSL1 target=_blank rel=noopener>@GMSL1</a>,
<a href=https://github.com/grantmcdermott target=_blank rel=noopener>@grantmcdermott</a>,
<a href=https://github.com/hadley target=_blank rel=noopener>@hadley</a>,
<a href=https://github.com/hlynurhallgrims target=_blank rel=noopener>@hlynurhallgrims</a>,
<a href=https://github.com/holgerbrandl target=_blank rel=noopener>@holgerbrandl</a>,
<a href=https://github.com/hpages target=_blank rel=noopener>@hpages</a>,
<a href=https://github.com/HRodenhizer target=_blank rel=noopener>@HRodenhizer</a>,
<a href=https://github.com/hub-shale target=_blank rel=noopener>@hub-shale</a>,
<a href=https://github.com/hughjonesd target=_blank rel=noopener>@hughjonesd</a>,
<a href=https://github.com/ibuiltthis target=_blank rel=noopener>@ibuiltthis</a>,
<a href=https://github.com/ingewortel target=_blank rel=noopener>@ingewortel</a>,
<a href=https://github.com/isaacvock target=_blank rel=noopener>@isaacvock</a>,
<a href=https://github.com/Istalan target=_blank rel=noopener>@Istalan</a>,
<a href=https://github.com/istvankleijn target=_blank rel=noopener>@istvankleijn</a>,
<a href=https://github.com/jacobkasper target=_blank rel=noopener>@jacobkasper</a>,
<a href=https://github.com/jammainen target=_blank rel=noopener>@jammainen</a>,
<a href=https://github.com/jan-glx target=_blank rel=noopener>@jan-glx</a>,
<a href=https://github.com/JaredAllen2 target=_blank rel=noopener>@JaredAllen2</a>,
<a href=https://github.com/jashapiro target=_blank rel=noopener>@jashapiro</a>,
<a href=https://github.com/jimjam-slam target=_blank rel=noopener>@jimjam-slam</a>,
<a href=https://github.com/jmuhlenkamp target=_blank rel=noopener>@jmuhlenkamp</a>,
<a href=https://github.com/jonspring target=_blank rel=noopener>@jonspring</a>,
<a href=https://github.com/JorisChau target=_blank rel=noopener>@JorisChau</a>,
<a href=https://github.com/joshhwuu target=_blank rel=noopener>@joshhwuu</a>,
<a href=https://github.com/jpeasari target=_blank rel=noopener>@jpeasari</a>,
<a href=https://github.com/jromanowska target=_blank rel=noopener>@jromanowska</a>,
<a href=https://github.com/jsacerot target=_blank rel=noopener>@jsacerot</a>,
<a href=https://github.com/jtlandis target=_blank rel=noopener>@jtlandis</a>,
<a href=https://github.com/jtr13 target=_blank rel=noopener>@jtr13</a>,
<a href=https://github.com/jttoivon target=_blank rel=noopener>@jttoivon</a>,
<a href=https://github.com/karchern target=_blank rel=noopener>@karchern</a>,
<a href=https://github.com/klin333 target=_blank rel=noopener>@klin333</a>,
<a href=https://github.com/kmavrommatis target=_blank rel=noopener>@kmavrommatis</a>,
<a href=https://github.com/kramerrs target=_blank rel=noopener>@kramerrs</a>,
<a href=https://github.com/krlmlr target=_blank rel=noopener>@krlmlr</a>,
<a href=https://github.com/kylebutts target=_blank rel=noopener>@kylebutts</a>,
<a href=https://github.com/larmarange target=_blank rel=noopener>@larmarange</a>,
<a href=https://github.com/latot target=_blank rel=noopener>@latot</a>,
<a href=https://github.com/lhami target=_blank rel=noopener>@lhami</a>,
<a href=https://github.com/liang09255 target=_blank rel=noopener>@liang09255</a>,
<a href=https://github.com/linzi-sg target=_blank rel=noopener>@linzi-sg</a>,
<a href=https://github.com/lionel- target=_blank rel=noopener>@lionel-</a>,
<a href=https://github.com/lnarwhale target=_blank rel=noopener>@lnarwhale</a>,
<a href=https://github.com/manjumc1975 target=_blank rel=noopener>@manjumc1975</a>,
<a href=https://github.com/mariadelmarq target=_blank rel=noopener>@mariadelmarq</a>,
<a href=https://github.com/matanhakim target=_blank rel=noopener>@matanhakim</a>,
<a href=https://github.com/math-mcshane target=_blank rel=noopener>@math-mcshane</a>,
<a href=https://github.com/mattgalbraith target=_blank rel=noopener>@mattgalbraith</a>,
<a href=https://github.com/matthewjnield target=_blank rel=noopener>@matthewjnield</a>,
<a href=https://github.com/mcwayrm target=_blank rel=noopener>@mcwayrm</a>,
<a href=https://github.com/melissagwolf target=_blank rel=noopener>@melissagwolf</a>,
<a href=https://github.com/MichaelChirico target=_blank rel=noopener>@MichaelChirico</a>,
<a href=https://github.com/MikkoVihtakari target=_blank rel=noopener>@MikkoVihtakari</a>,
<a href=https://github.com/MjelleLab target=_blank rel=noopener>@MjelleLab</a>,
<a href=https://github.com/mjskay target=_blank rel=noopener>@mjskay</a>,
<a href=https://github.com/mkoohafkan target=_blank rel=noopener>@mkoohafkan</a>,
<a href=https://github.com/mmokrejs target=_blank rel=noopener>@mmokrejs</a>,
<a href=https://github.com/modmost target=_blank rel=noopener>@modmost</a>,
<a href=https://github.com/moodymudskipper target=_blank rel=noopener>@moodymudskipper</a>,
<a href=https://github.com/morrisseyj target=_blank rel=noopener>@morrisseyj</a>,
<a href=https://github.com/mps9506 target=_blank rel=noopener>@mps9506</a>,
<a href=https://github.com/Nh-code target=_blank rel=noopener>@Nh-code</a>,
<a href=https://github.com/njtierney target=_blank rel=noopener>@njtierney</a>,
<a href=https://github.com/oliviercailloux target=_blank rel=noopener>@oliviercailloux</a>,
<a href=https://github.com/olivroy target=_blank rel=noopener>@olivroy</a>,
<a href=https://github.com/otaviolovison target=_blank rel=noopener>@otaviolovison</a>,
<a href=https://github.com/pablobernabeu target=_blank rel=noopener>@pablobernabeu</a>,
<a href=https://github.com/paulatn240 target=_blank rel=noopener>@paulatn240</a>,
<a href=https://github.com/phauchamps target=_blank rel=noopener>@phauchamps</a>,
<a href=https://github.com/quantixed target=_blank rel=noopener>@quantixed</a>,
<a href=https://github.com/ralmond target=_blank rel=noopener>@ralmond</a>,
<a href=https://github.com/ramiromagno target=_blank rel=noopener>@ramiromagno</a>,
<a href=https://github.com/reallzg target=_blank rel=noopener>@reallzg</a>,
<a href=https://github.com/retodomax target=_blank rel=noopener>@retodomax</a>,
<a href=https://github.com/robbiebatley target=_blank rel=noopener>@robbiebatley</a>,
<a href=https://github.com/Rong-Zh target=_blank rel=noopener>@Rong-Zh</a>,
<a href=https://github.com/rossellhayes target=_blank rel=noopener>@rossellhayes</a>,
<a href=https://github.com/RoyalTS target=_blank rel=noopener>@RoyalTS</a>,
<a href=https://github.com/rvalieris target=_blank rel=noopener>@rvalieris</a>,
<a href=https://github.com/s-andrews target=_blank rel=noopener>@s-andrews</a>,
<a href=https://github.com/s-elsheikh target=_blank rel=noopener>@s-elsheikh</a>,
<a href=https://github.com/schloerke target=_blank rel=noopener>@schloerke</a>,
<a href=https://github.com/Sckende target=_blank rel=noopener>@Sckende</a>,
<a href=https://github.com/sdmason target=_blank rel=noopener>@sdmason</a>,
<a href=https://github.com/sirallen target=_blank rel=noopener>@sirallen</a>,
<a href=https://github.com/slowkow target=_blank rel=noopener>@slowkow</a>,
<a href=https://github.com/spaette target=_blank rel=noopener>@spaette</a>,
<a href=https://github.com/steveharoz target=_blank rel=noopener>@steveharoz</a>,
<a href=https://github.com/sunroofgod target=_blank rel=noopener>@sunroofgod</a>,
<a href=https://github.com/szimmer target=_blank rel=noopener>@szimmer</a>,
<a href=https://github.com/tbates target=_blank rel=noopener>@tbates</a>,
<a href=https://github.com/teunbrand target=_blank rel=noopener>@teunbrand</a>,
<a href=https://github.com/tfjaeger target=_blank rel=noopener>@tfjaeger</a>,
<a href=https://github.com/thomasp85 target=_blank rel=noopener>@thomasp85</a>,
<a href=https://github.com/TimBMK target=_blank rel=noopener>@TimBMK</a>,
<a href=https://github.com/TimTaylor target=_blank rel=noopener>@TimTaylor</a>,
<a href=https://github.com/tjebo target=_blank rel=noopener>@tjebo</a>,
<a href=https://github.com/trekonom target=_blank rel=noopener>@trekonom</a>,
<a href=https://github.com/tungttnguyen target=_blank rel=noopener>@tungttnguyen</a>,
<a href=https://github.com/twest820 target=_blank rel=noopener>@twest820</a>,
<a href=https://github.com/UliSchopp target=_blank rel=noopener>@UliSchopp</a>,
<a href=https://github.com/vnijs target=_blank rel=noopener>@vnijs</a>,
<a href=https://github.com/warnes target=_blank rel=noopener>@warnes</a>,
<a href=https://github.com/wbvguo target=_blank rel=noopener>@wbvguo</a>,
<a href=https://github.com/willgearty target=_blank rel=noopener>@willgearty</a>,
<a href=https://github.com/Yann-C-INN target=_blank rel=noopener>@Yann-C-INN</a>,
<a href=https://github.com/yannk-lm target=_blank rel=noopener>@yannk-lm</a>,
<a href=https://github.com/Yunuuuu target=_blank rel=noopener>@Yunuuuu</a>,
<a href=https://github.com/yutannihilation target=_blank rel=noopener>@yutannihilation</a>,
<a href=https://github.com/yuw444 target=_blank rel=noopener>@yuw444</a>,
<a href=https://github.com/zekiakyol target=_blank rel=noopener>@zekiakyol</a>, and
<a href=https://github.com/zhenglukai target=_blank rel=noopener>@zhenglukai</a>.</p></div></div><div class=column25><div class="section hideOnMobile"><div class=sectionTitle>Contents</div><nav id=TableOfContents><ul><li><a href=#guide-rewrite>Guide rewrite</a></li><li><a href=#patterns-and-gradients>Patterns and gradients</a></li><li><a href=#ignoring-scales>Ignoring scales</a></li><li><a href=#other-improvements>Other improvements</a></li><li><a href=#acknowledgements>Acknowledgements</a></li></ul></nav></div><div class=section></div></div></div></div></div><div id=rStudioFooter class=band><div class=bandContent><div id=copyright>The tidyverse is proudly supported by <a class=rstudioLogo href=https://posit.co/ aria-label="Posit Homepage"></a></div><div id=logos><a href=https://www.tidyverse.org/google_privacy_policy>Privacy policy</a>
<a href=https://github.com/tidyverse class="footerLogo gitHub" aria-label="Tidyverse GitHub organization"></a><a href=https://twitter.com/hashtag/rstats class="footerLogo twitter" aria-label="rstats hashtag on twitter.com"></a></div></div></div></div></div><script src=/js/math-code.js></script><script type=text/x-mathjax-config>
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    processEscapes: true
  }
});
</script><script async src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script type=application/javascript>var dnt=(navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack);var doNotTrack=(dnt=="1"||dnt=="yes");if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');if(window.sessionStorage){var GA_SESSION_STORAGE_KEY='ga:clientId';ga('create','UA-115082821-1',{'storage':'none','clientId':sessionStorage.getItem(GA_SESSION_STORAGE_KEY)});ga(function(tracker){sessionStorage.setItem(GA_SESSION_STORAGE_KEY,tracker.get('clientId'));});}
ga('set','anonymizeIp',true);ga('send','pageview');}</script></body></html></div></div></body></html>