<!doctype html><html><head><!doctype html><html lang=en-us><link rel=stylesheet href=/css/fonts.css><link rel=stylesheet href=/css/main-site.css><link rel=stylesheet href=/css/fa5-all.css><style type=text/css>body{background-color:#fff;color:#1a1917}a{color:#38577f}a:hover{color:#42709b}a:focus{outline-color:#42709b}.column25-left .sectionTitle a:hover:not(.current),.column16-left .sectionTitle a:hover:not(.current){color:#1a1917}.icon-attribution,.icon-attribution a{color:#1a1917;opacity:75%}#homeContent .band.first{background-color:#fff}#homeContent .band.second{background-color:#fdeba4}#homeContent .band.third{background-color:#fff}#rStudioHeader{background-color:#1a162d;color:#fff}#rStudioHeader .productName{color:#fff}#rStudioHeader .productName:hover,#rStudioHeader .productName:focus{color:#fdeba4}#rStudioHeader #menu .menuItem.a{background-color:#75aadb;color:#fff}#rStudioHeader #menu .menuItem:hover{background-color:#484557;color:#fff}#rStudioHeader #menu .menuItem.current{background-color:#fff;color:#1a162d;text-decoration:none}#rStudioFooter.band{background-color:#767381}#rStudioFooter .bandContent #copyright{color:#e3eef8}table tbody tr:nth-child(even){background-color:#f7faff}table tbody tr:nth-child(odd){background-color:#fff}.latest{border-top:.5em solid <no value>}.event{-moz-box-shadow:0 0 0 0 rgba(0,0,0,.1);-webkit-box-shadow:0 0 0 0 rgba(0,0,0,.1);box-shadow:0 0 0 0 rgba(0,0,0,.1)}.section .event{background-color:#eab0c41a}.section .event{border-top:7pt solid #a19ea936}.section .event a{color:#1a162d}.section .event{color:#404040}</style><link rel=stylesheet href=/css/tidyverse.css><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Hugo 0.71.1"><title>ragg 0.1.0</title><meta property="og:title" content="ragg 0.1.0"><meta property="og:description" content="A set of new graphic devices just landed on CRAN. Read more about the ragg package here."><meta property="og:type" content="article"><meta property="og:url" content="https://www.tidyverse.org/blog/2019/07/ragg-0-1-0/"><meta property="twitter:card" content="summary_large_image"><meta property="og:title" content="ragg 0.1.0 - Tidyverse"><meta property="description" content="A set of new graphic devices just landed on CRAN. Read more about the ragg package here."><meta property="og:description" content="A set of new graphic devices just landed on CRAN. Read more about the ragg package here."><meta property="og:image" content="https://www.tidyverse.org/blog/2019/07/ragg-0-1-0/ragg-0-1-0-sq.jpg"><meta name=twitter:image content="https://www.tidyverse.org/blog/2019/07/ragg-0-1-0/ragg-0-1-0-wd.jpg"><link rel=apple-touch-icon sizes=180x180 href=/images/favicons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/images/favicons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/images/favicons/favicon-16x16.png><link rel=manifest href=/images/favicons/site.webmanifest><link rel=mask-icon href=/images/favicons/safari-pinned-tab.svg><link rel="shortcut icon" href=/images/favicons/favicon.ico><meta name=msapplication-TileColor content="#da532c"><meta name=msapplication-config href=/images/favicons/browserconfig.xml><script type=text/javascript src=/js/jquery-3.5.1.min.js></script><script type=text/javascript src=/js/site.js></script><link rel=icon href=/images/favicon.ico><script type=text/javascript src=/js/clipboard.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin=anonymous></script><script defer data-domain=tidyverse.org,all.tidyverse.org src=https://plausible.io/js/plausible.js></script></head><body><div id=appTidyverseSite class="shrinkHeader alwaysShrinkHeader"><div id=main><div id=rStudioHeader><nav class=band><div class="innards bandContent"><div><a class=productName href=/>Tidyverse</a></div><div id=menu><div id=menuToggler></div><div id=menuItems><a class=menuItem href=/packages/>Packages</a>
<a class="menuItem current" href=/blog/>Blog</a>
<a class=menuItem href=/learn/>Learn</a>
<a class=menuItem href=/help/>Help</a>
<a class=menuItem href=/contribute/>Contribute</a></div></div></div></nav></div><main><div class="band padForHeader pushFooter"><div class=bandContent><div class="full splitColumns withMobileMargins"><div class=column75><h1 class=article-title>ragg 0.1.0</h1><div class=article-header aria-hidden=true><div class=photo><img src=/blog/2019/07/ragg-0-1-0/ragg-0-1-0-wd.jpg></div><div class=photoCredit>Photo by <a href=https://unsplash.com/photos/sBkK2VWV8Kw>Gordon Williams</a></div></div><span class=article-date><i class="fas fa-calendar-day fa-fw"></i>&nbsp;&nbsp;2019/07/15</span><p style=margin-bottom:.5em;margin-top:.85em><i class="fas fa-tags"></i>&nbsp;
<a href=/tags/r-lib/>r-lib</a>,
<a href=/tags/ragg/>ragg</a></p><p style=margin-top:.5em><i class="fas fa-user-circle fa-fw"></i>&nbsp;
Thomas Lin Pedersen</p><div class=article-content><p>We&rsquo;re stoked to announce the release of
<a href=https://ragg.r-lib.org target=_blank rel=noopener>ragg 0.1.0</a> on CRAN. ragg provides a set of high quality and high performance raster devices, capable of producing png, tiff, or ppm files, or a matrix of raw color values directly within R.</p><p>ragg is part of our broader effort to improve graphics performance and quality in R at all levels of the stack, so that you&rsquo;ll benefit no matter what plotting framework you choose to use. Other parts of this efforts have been:</p><ul><li>Developing the
<a href=https://github.com/r-lib/devoid target=_blank rel=noopener>devoid</a> package to allow more precise benchmarking of plotting code.</li><li>Multiple improvements to rendering speed in grid in the latest R release (3.6.0).</li><li>Performance improvements in
<a href=https://ggplot2.tidyverse.org target=_blank rel=noopener>ggplot2</a> 3.2.0 both broadly and for sf plotting specifically.</li><li>Performance improvements in
<a href=https://gtable.r-lib.com target=_blank rel=noopener>gtable</a> 0.3.0.</li></ul><h2 id=the-devices>The devices
<a href=#the-devices><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>An R graphic device is an object that receives instructions from the graphic engine in R and translates that into some meaningful format for viewing. The graphic engine in R is the layer that sits between the graphic generating code in R and the devices, and is responsible for allowing the plethora of different output options from the same plot code. The output from a graphic device can either be a file, on screen, or in some other form. ragg provides a set of raster devices, that is, devices that rasterize the instructions and write it to some sort of raster output (e.g. a png file). This is opposed to vector devices such as <code>pdf()</code> and <code>svg()</code> that do not perform rasterization but write the instructions directly into a vector graphics format.</p><p>ragg provides three different file outputs (png, tiff, and ppm), though it is important to note that everything, except for the serialization of the data into the file format, is equivalent. A case could be made for also including jpeg output, but this format is generally not useful for graphics as it introduces noticeable artifacts with line graphics.</p><p>Apart from the three file-based devices, ragg also provides a device that gives direct access to the raster buffer from R. This means that you can plot directly into a matrix of color values which you can then further process in R, should you wish.</p><h2 id=features>Features
<a href=#features><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>There are 5 main areas where ragg sets itself apart from the graphic devices already available:</p><ul><li><strong>Performance:</strong> ragg is faster than cairo, the standard anti-aliased device in R. Tests show that it is about twice as fast to render a moderately complex ggplot. See the
<a href=https://ragg.r-lib.org/articles/ragg_performance.html target=_blank rel=noopener>Performance</a> vignette for more in-depth benchmarking.</li><li><strong>Anti-aliasing:</strong> ragg is fully anti-aliased, as opposed to the cairo devices that only apply anti-aliasing to strokes and text (not fill). For a comparison, see the
<a href=https://ragg.r-lib.org/articles/ragg_quality.html#shape-rendering target=_blank rel=noopener>shape rendering</a> section of the Quality vignette.</li><li><strong>Text rendering:</strong> ragg provides high-quality rendering of rotated text, something that other raster devices struggle with. See the
<a href=https://ragg.r-lib.org/articles/ragg_quality.html#text target=_blank rel=noopener>text</a> section of the Quality vignette for examples.</li><li><strong>Font access:</strong> ragg has direct access to all your system fonts, without you having to do anything. All installed fonts on your system should be ready to use.</li><li><strong>System independence:</strong> The rendering code in ragg is system independent and should be identical whether it has been rendered on Windows, macOS, or Linux. The only difference is the available fonts on the different systems.</li></ul><h2 id=example>Example
<a href=#example><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>The ragg devices are used just like any other device, by starting them, running your plotting code, and turning them off (code below add some complexity in order to embed the created file in the page):</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nf>library</span><span class=p>(</span><span class=n>ragg</span><span class=p>)</span>
<span class=nf>library</span><span class=p>(</span><span class=n>ggplot2</span><span class=p>)</span>

<span class=n>file</span> <span class=o>&lt;-</span> <span class=n>knitr</span><span class=o>::</span><span class=nf>fig_path</span><span class=p>(</span><span class=s>&#39;.png&#39;</span><span class=p>)</span>

<span class=nf>agg_png</span><span class=p>(</span><span class=n>file</span><span class=p>,</span> <span class=n>width</span> <span class=o>=</span> <span class=m>700</span><span class=p>,</span> <span class=n>height</span> <span class=o>=</span> <span class=m>500</span><span class=p>,</span> <span class=n>units</span> <span class=o>=</span> <span class=s>&#39;px&#39;</span><span class=p>)</span>
<span class=nf>ggplot</span><span class=p>(</span><span class=n>diamonds</span><span class=p>)</span> <span class=o>+</span> 
  <span class=nf>geom_bar</span><span class=p>(</span><span class=nf>aes</span><span class=p>(</span><span class=n>color</span><span class=p>,</span> <span class=n>fill</span> <span class=o>=</span> <span class=n>color</span><span class=p>))</span> <span class=o>+</span> 
  <span class=nf>ggtitle</span><span class=p>(</span><span class=s>&#34;A fancy font&#34;</span><span class=p>)</span> <span class=o>+</span> 
  <span class=nf>theme</span><span class=p>(</span><span class=n>text</span> <span class=o>=</span> <span class=nf>element_text</span><span class=p>(</span><span class=n>family</span> <span class=o>=</span> <span class=s>&#34;Daubmark&#34;</span><span class=p>,</span> <span class=n>size</span> <span class=o>=</span> <span class=m>50</span><span class=p>))</span>
<span class=nf>invisible</span><span class=p>(</span><span class=nf>dev.off</span><span class=p>())</span>

<span class=n>knitr</span><span class=o>::</span><span class=nf>include_graphics</span><span class=p>(</span><span class=n>file</span><span class=p>)</span>
</code></pre></div><p><img src=/articles/2019-06-26-ragg-0-1-0_files/figure-html/unnamed-chunk-1-1.png width=700px style=display:block;margin:auto></p><p>ragg can also be used with <code>ggsave()</code> by passing the device in as an argument:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=n>file</span> <span class=o>&lt;-</span> <span class=n>knitr</span><span class=o>::</span><span class=nf>fig_path</span><span class=p>(</span><span class=s>&#39;.png&#39;</span><span class=p>)</span>
<span class=n>p</span> <span class=o>&lt;-</span> <span class=nf>ggplot</span><span class=p>(</span><span class=n>mpg</span><span class=p>,</span> <span class=nf>aes</span><span class=p>(</span><span class=n>displ</span><span class=p>,</span> <span class=n>hwy</span><span class=p>))</span> <span class=o>+</span> 
  <span class=nf>geom_point</span><span class=p>()</span>

<span class=nf>ggsave</span><span class=p>(</span><span class=n>file</span><span class=p>,</span> <span class=n>p</span><span class=p>,</span> <span class=n>device</span> <span class=o>=</span> <span class=n>agg_png</span><span class=p>,</span> <span class=n>res</span> <span class=o>=</span> <span class=m>300</span><span class=p>)</span>
<span class=c1>#&gt; Saving 7 x 4.33 in image</span>

<span class=n>knitr</span><span class=o>::</span><span class=nf>include_graphics</span><span class=p>(</span><span class=n>file</span><span class=p>)</span>
</code></pre></div><p><img src=/articles/2019-06-26-ragg-0-1-0_files/figure-html/unnamed-chunk-2-1.png width=700px style=display:block;margin:auto></p><h2 id=life-cycle>Life cycle
<a href=#life-cycle><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>ragg is currently to be considered
<a href=https://www.tidyverse.org/lifecycle/#experimental target=_blank rel=noopener>experimental</a>. That is not to indicate that any API changes are to be expected, or that using it is not a safe long-term strategy. But we are continuing to invest and improve upon the graphic stack in R, and we cannot say whether ragg will be part of our final solution, or if it is just an interesting experiment. The experience gained in the graphic stack from building ragg will definitely be put to good use though, and you can expect more improvements in the future.</p><h2 id=acknowledgements>Acknowledgements
<a href=#acknowledgements><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>Thanks to
<a href=https://github.com/jeroen target=_blank rel=noopener>@jeroen</a> for much assistance in getting ragg to compile on all systems!</p></div></div><div class=column25><div class="section hideOnMobile"><div class=sectionTitle>Contents</div><nav id=TableOfContents><ul><li><a href=#the-devices>The devices</a></li><li><a href=#features>Features</a></li><li><a href=#example>Example</a></li><li><a href=#life-cycle>Life cycle</a></li><li><a href=#acknowledgements>Acknowledgements</a></li></ul></nav></div><div class=section></div></div></div></div></div><div id=rStudioFooter class=band><div class=bandContent><div id=copyright>The tidyverse is proudly supported by <a class=rstudioLogo href=https://posit.co/ aria-label="Posit Homepage"></a></div><div id=logos><a href=https://www.tidyverse.org/google_privacy_policy>Privacy policy</a>
<a href=https://github.com/tidyverse class="footerLogo gitHub" aria-label="Tidyverse GitHub organization"></a><a href=https://twitter.com/hashtag/rstats class="footerLogo twitter" aria-label="rstats hashtag on twitter.com"></a></div></div></div></div></div><script type=application/javascript>var dnt=(navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack);var doNotTrack=(dnt=="1"||dnt=="yes");if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');if(window.sessionStorage){var GA_SESSION_STORAGE_KEY='ga:clientId';ga('create','UA-115082821-1',{'storage':'none','clientId':sessionStorage.getItem(GA_SESSION_STORAGE_KEY)});ga(function(tracker){sessionStorage.setItem(GA_SESSION_STORAGE_KEY,tracker.get('clientId'));});}
ga('set','anonymizeIp',true);ga('send','pageview');}</script></body></html></div></div></body></html>