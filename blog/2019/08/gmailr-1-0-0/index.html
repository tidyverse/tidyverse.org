<!doctype html><html><head><!doctype html><html lang=en-us><link rel=stylesheet href=/css/fonts.css><link rel=stylesheet href=/css/main-site.css><link rel=stylesheet href=/css/fa5-all.css><style type=text/css>body{background-color:#fff;color:#1a1917}a{color:#38577f}a:hover{color:#42709b}a:focus{outline-color:#42709b}.column25-left .sectionTitle a:hover:not(.current),.column16-left .sectionTitle a:hover:not(.current){color:#1a1917}.icon-attribution,.icon-attribution a{color:#1a1917;opacity:75%}#homeContent .band.first{background-color:#fff}#homeContent .band.second{background-color:#fdeba4}#homeContent .band.third{background-color:#fff}#rStudioHeader{background-color:#1a162d;color:#fff}#rStudioHeader .productName{color:#fff}#rStudioHeader .productName:hover,#rStudioHeader .productName:focus{color:#fdeba4}#rStudioHeader #menu .menuItem.a{background-color:#75aadb;color:#fff}#rStudioHeader #menu .menuItem:hover{background-color:#484557;color:#fff}#rStudioHeader #menu .menuItem.current{background-color:#fff;color:#1a162d;text-decoration:none}#rStudioFooter.band{background-color:#767381}#rStudioFooter .bandContent #copyright{color:#e3eef8}table tbody tr:nth-child(even){background-color:#f7faff}table tbody tr:nth-child(odd){background-color:#fff}.latest{border-top:.5em solid <no value>}.event{-moz-box-shadow:0 0 0 0 rgba(0,0,0,.1);-webkit-box-shadow:0 0 0 0 rgba(0,0,0,.1);box-shadow:0 0 0 0 rgba(0,0,0,.1)}.section .event{background-color:#eab0c41a}.section .event{border-top:7pt solid #a19ea936}.section .event a{color:#1a162d}.section .event{color:#404040}</style><link rel=stylesheet href=/css/tidyverse.css><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Hugo 0.71.1"><title>gmailr v1.0.0</title><meta property="og:title" content="gmailr v1.0.0"><meta property="og:description" content="gmailr v1.0.0 is on CRAN."><meta property="og:type" content="article"><meta property="og:url" content="https://www.tidyverse.org/blog/2019/08/gmailr-1-0-0/"><meta property="twitter:card" content="summary_large_image"><meta property="og:title" content="gmailr v1.0.0 - Tidyverse"><meta property="description" content="gmailr v1.0.0 is on CRAN."><meta property="og:description" content="gmailr v1.0.0 is on CRAN."><meta property="og:image" content="https://www.tidyverse.org/blog/2019/08/gmailr-1-0-0/gmailr-1-0-0-sq.jpg"><meta name=twitter:image content="https://www.tidyverse.org/blog/2019/08/gmailr-1-0-0/gmailr-1-0-0-wd.jpg"><link rel=apple-touch-icon sizes=180x180 href=/images/favicons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/images/favicons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/images/favicons/favicon-16x16.png><link rel=manifest href=/images/favicons/site.webmanifest><link rel=mask-icon href=/images/favicons/safari-pinned-tab.svg><link rel="shortcut icon" href=/images/favicons/favicon.ico><meta name=msapplication-TileColor content="#da532c"><meta name=msapplication-config href=/images/favicons/browserconfig.xml><script type=text/javascript src=/js/jquery-3.5.1.min.js></script><script type=text/javascript src=/js/site.js></script><link rel=icon href=/images/favicon.ico><script type=text/javascript src=/js/clipboard.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin=anonymous></script><script defer data-domain=tidyverse.org,all.tidyverse.org src=https://plausible.io/js/plausible.js></script></head><body><div id=appTidyverseSite class="shrinkHeader alwaysShrinkHeader"><div id=main><div id=rStudioHeader><nav class=band><div class="innards bandContent"><div><a class=productName href=/%20/>Tidyverse</a></div><div id=menu><div id=menuToggler></div><div id=menuItems><a class=menuItem href=/packages/>Packages</a>
<a class="menuItem current" href=/blog/>Blog</a>
<a class=menuItem href=/learn/>Learn</a>
<a class=menuItem href=/help/>Help</a>
<a class=menuItem href=/contribute/>Contribute</a></div></div></div></nav></div><main><div class="band padForHeader pushFooter"><div class=bandContent><div class="full splitColumns withMobileMargins"><div class=column75><h1 class=article-title>gmailr v1.0.0</h1><div class=article-header aria-hidden=true><div class=photo><img src=/blog/2019/08/gmailr-1-0-0/gmailr-1-0-0-wd.jpg></div><div class=photoCredit>Photo by <a href=https://unsplash.com/photos/fb7yNPbT0l8>Mathyas Kurmann</a></div></div><span class=article-date><i class="fas fa-calendar-day fa-fw"></i>&nbsp;&nbsp;2019/08/26</span><p style=margin-bottom:.5em;margin-top:.85em><i class="fas fa-tags"></i>&nbsp;
<a href=/tags/r-lib/>r-lib</a>,
<a href=/tags/gmailr/>gmailr</a></p><p style=margin-top:.5em><i class="fas fa-user-circle fa-fw"></i>&nbsp;
Jim Hester</p><div class=article-content><h2 id=introduction>Introduction
<a href=#introduction><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>gmailr v1.0.0 (<a href=https://gmailr.r-lib.org>https://gmailr.r-lib.org</a>) is now on CRAN!</p><p>gmailr wraps the
<a href=https://developers.google.com/gmail/ target=_blank rel=noopener>Gmail REST API v3</a>. It provides a variety of funcitons to query your mailbox and create and send new email messages. You can retrieve, create and send emails and drafts, manage email labels, trash and untrash emails, and delete messages, drafts and threads.</p><p>The tidyverse team uses gmailr most often to send emails to the maintainers of packages which depend on our packages, to inform them when a new package release is imminent or if any of our changes require action on their part.</p><p>Install gmailr with:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nf>install.packages</span><span class=p>(</span><span class=s>&#34;gmailr&#34;</span><span class=p>)</span>
</code></pre></div><p>The release of version 1.0.0 marks three events:</p><ul><li>There are changes in the auth interface that are not backwards compatible.</li><li>The built-in application has been removed.</li><li>The functions have all been prefixed with <code>gm_()</code>, to avoid name conflicts with functions in other packages (including the base package).</li></ul><p>There is also new functionality that make writing emails with non-ASCII characters more robust, and improved documentation. See the
<a href=http://gmailr.r-lib.org/news/index.html#gmailr-1-0-0 target=_blank rel=noopener>changelog</a> for the full details on this release.</p><h2 id=auth-from-gargle>Auth from gargle
<a href=#auth-from-gargle><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>gmailr&rsquo;s auth functionality now comes from the
<a href=https://gargle.r-lib.org target=_blank rel=noopener>gargle package</a>, which provides R infrastructure to work with Google APIs, in general. We&rsquo;ve just
<a href=https://www.tidyverse.org/articles/2019/08/gargle-hello-world/ target=_blank rel=noopener>blogged about gargle&rsquo;s initial release</a>, so check out that post for more details.</p><p>We&rsquo;re adopting gargle for auth in several other packages, such as
<a href=https://bigrquery.r-dbi.org target=_blank rel=noopener>bigrquery</a> (>= v1.2.0),
<a href=https://googledrive.r-lib.org target=_blank rel=noopener>googledrive</a> (>= v1.0.0), and
<a href=https://googlesheets4.tidyverse.org target=_blank rel=noopener>googlesheets4</a> (currently GitHub-only, successor of googlesheets). This makes new token flows available in these packages, such as
<a href=https://www.jhanley.com/google-cloud-application-default-credentials/ target=_blank rel=noopener>Application Default Credentials</a>, and makes auth less idiosyncratic.</p><h3 id=auth-changes-the-typical-user-will-notice>Auth changes the typical user will notice
<a href=#auth-changes-the-typical-user-will-notice><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><p>The functions used for authentication have changed. Use <code>gm_auth_configure()</code> to configure your application and then <code>gm_auth()</code> to actually authenticate your user with the application.</p><blockquote><p>OAuth2 tokens are now cached at the user level, by default, instead of in <code>.httr-oauth</code> in the current project. We will ask if it&rsquo;s OK to create a new folder to hold your OAuth tokens. We recommend that you delete any vestigial <code>.httr-oauth</code> files lying around your gmailr projects and re-authorize gmailr, i.e. get a new token, stored in the new way.</p></blockquote><p>The new strategy makes it harder to accidentally push your tokens to the cloud, easier to use multiple Google identities, and easier to share tokens across projects and packages.</p><p>Overall, gmailr has gotten more careful about getting your permission to use a cached token. See the gargle vignette
<a href=https://gargle.r-lib.org/articles/non-interactive-auth.html target=_blank rel=noopener>Non-interactive auth</a> to learn how to prevent attempts to interact with you, especially the section
<a href=https://gargle.r-lib.org/articles/non-interactive-auth.html#arrange-for-an-oauth-token-to-be-re-discovered target=_blank rel=noopener>&ldquo;Arrange for an oauth token to be re-discovered&rdquo;</a>.</p><p>gmailr also removes the built-in OAuth &ldquo;app&rdquo;. This was nessesary to comply with
<a href=https://developers.google.com/terms/api-services-user-data-policy#additional-requirements-for-specific-api-scopes target=_blank rel=noopener>stricter rules and enforcement</a> by google for Gmail API applications. It was not possible to comply with these rules and continue to have a default application embedded in gmailr. See the
<a href=http://gmailr.r-lib.org/#setup target=_blank rel=noopener>setup</a> section of the readme for how to create a new project and authenticate it with only a few steps. gmailr operates under the same
<a href=https://www.tidyverse.org/google_privacy_policy/ target=_blank rel=noopener>Privacy Policy</a> as other tidyverse API packages, the most relevant bit for users is &lsquo;The packages only communicate with Google APIs. No user data is shared with the owners of the Tidyverse API Packages, RStudio, or any other servers.&rsquo;</p><h2 id=preventing-name-conflicts>Preventing name conflicts
<a href=#preventing-name-conflicts><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>Historically functions in gmailr did not attempt to avoid conflicts, including common functions in the base package like <code>body()</code> and <code>message()</code>. It was assumed users would use namespaced calls, e.g. <code>gmailr::body()</code> if there were issues. However this inadvertantly causes confusing errors for users. All of the functions are now prefixed with <code>gm_()</code> to solve this conflict. This also increases function discoverability via auto-complete.</p><p>The un-exported function <code>gmailr:::gm_convert_file()</code> converts existing scripts to use the new functions. Use <code>gmailr:::gm_convert_file(list.files(pattern = "[.]R$", recursive = TRUE))</code> to convert all of your R scripts in the current directory and below. (Be sure to inspect the changes manually!)</p><h2 id=shared-workflows>Shared workflows
<a href=#shared-workflows><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>The shared use of gargle allows us to create centralized articles for several workflows that can be tricky for users:</p><ul><li><a href=https://gargle.r-lib.org/articles/non-interactive-auth.html target=_blank rel=noopener>Non-interactive auth</a></li><li><a href=https://gargle.r-lib.org/articles/auth-from-web.html target=_blank rel=noopener>Auth when using R in the browser</a></li><li><a href=https://gargle.r-lib.org/articles/articles/managing-tokens-securely.html target=_blank rel=noopener>Managing tokens securely</a></li><li><a href=https://gargle.r-lib.org/articles/get-api-credentials.html target=_blank rel=noopener>How to get your own API credentials</a></li></ul><h2 id=thanks>Thanks!
<a href=#thanks><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>Thanks to the 58 people who contributed issues, code, and comments to this release!</p><p><a href=https://github.com/abhishek1608 target=_blank rel=noopener>@abhishek1608</a>,
<a href=https://github.com/alansz target=_blank rel=noopener>@alansz</a>,
<a href=https://github.com/alkashef target=_blank rel=noopener>@alkashef</a>,
<a href=https://github.com/ascheinwald target=_blank rel=noopener>@ascheinwald</a>,
<a href=https://github.com/batpigandme target=_blank rel=noopener>@batpigandme</a>,
<a href=https://github.com/Btibert3 target=_blank rel=noopener>@Btibert3</a>,
<a href=https://github.com/choisy target=_blank rel=noopener>@choisy</a>,
<a href=https://github.com/coatless target=_blank rel=noopener>@coatless</a>,
<a href=https://github.com/csalgads target=_blank rel=noopener>@csalgads</a>,
<a href=https://github.com/ctbrown target=_blank rel=noopener>@ctbrown</a>,
<a href=https://github.com/eluerken target=_blank rel=noopener>@eluerken</a>,
<a href=https://github.com/EricGoldsmith target=_blank rel=noopener>@EricGoldsmith</a>,
<a href=https://github.com/fiol92 target=_blank rel=noopener>@fiol92</a>,
<a href=https://github.com/grepinsight target=_blank rel=noopener>@grepinsight</a>,
<a href=https://github.com/hadley target=_blank rel=noopener>@hadley</a>,
<a href=https://github.com/Hellengeremias target=_blank rel=noopener>@Hellengeremias</a>,
<a href=https://github.com/hopeful-coder target=_blank rel=noopener>@hopeful-coder</a>,
<a href=https://github.com/howard-gu target=_blank rel=noopener>@howard-gu</a>,
<a href=https://github.com/jamespmcguire target=_blank rel=noopener>@jamespmcguire</a>,
<a href=https://github.com/jennybc target=_blank rel=noopener>@jennybc</a>,
<a href=https://github.com/jim0wheel target=_blank rel=noopener>@jim0wheel</a>,
<a href=https://github.com/jimhester target=_blank rel=noopener>@jimhester</a>,
<a href=https://github.com/jlegewie target=_blank rel=noopener>@jlegewie</a>,
<a href=https://github.com/jnolis target=_blank rel=noopener>@jnolis</a>,
<a href=https://github.com/josibake target=_blank rel=noopener>@josibake</a>,
<a href=https://github.com/kazuya030 target=_blank rel=noopener>@kazuya030</a>,
<a href=https://github.com/kevin-dyrland target=_blank rel=noopener>@kevin-dyrland</a>,
<a href=https://github.com/krlmlr target=_blank rel=noopener>@krlmlr</a>,
<a href=https://github.com/lawremi target=_blank rel=noopener>@lawremi</a>,
<a href=https://github.com/lmmx target=_blank rel=noopener>@lmmx</a>,
<a href=https://github.com/lwasser target=_blank rel=noopener>@lwasser</a>,
<a href=https://github.com/maaraaj target=_blank rel=noopener>@maaraaj</a>,
<a href=https://github.com/marco-vene target=_blank rel=noopener>@marco-vene</a>,
<a href=https://github.com/martijnvv target=_blank rel=noopener>@martijnvv</a>,
<a href=https://github.com/matt-negrin target=_blank rel=noopener>@matt-negrin</a>,
<a href=https://github.com/mattbaggott target=_blank rel=noopener>@mattbaggott</a>,
<a href=https://github.com/msgoussi target=_blank rel=noopener>@msgoussi</a>,
<a href=https://github.com/msrodrigues target=_blank rel=noopener>@msrodrigues</a>,
<a href=https://github.com/MST2803 target=_blank rel=noopener>@MST2803</a>,
<a href=https://github.com/nicocriscuolo target=_blank rel=noopener>@nicocriscuolo</a>,
<a href=https://github.com/obarisk target=_blank rel=noopener>@obarisk</a>,
<a href=https://github.com/paddytobias target=_blank rel=noopener>@paddytobias</a>,
<a href=https://github.com/prithajnath target=_blank rel=noopener>@prithajnath</a>,
<a href=https://github.com/RockScience target=_blank rel=noopener>@RockScience</a>,
<a href=https://github.com/RozennGZ target=_blank rel=noopener>@RozennGZ</a>,
<a href=https://github.com/rpietro target=_blank rel=noopener>@rpietro</a>,
<a href=https://github.com/scottgrimes target=_blank rel=noopener>@scottgrimes</a>,
<a href=https://github.com/SimonCoulombe target=_blank rel=noopener>@SimonCoulombe</a>,
<a href=https://github.com/slomanl1 target=_blank rel=noopener>@slomanl1</a>,
<a href=https://github.com/songyurita target=_blank rel=noopener>@songyurita</a>,
<a href=https://github.com/sumxf target=_blank rel=noopener>@sumxf</a>,
<a href=https://github.com/TheKashe target=_blank rel=noopener>@TheKashe</a>,
<a href=https://github.com/tingmar target=_blank rel=noopener>@tingmar</a>,
<a href=https://github.com/tmamiya target=_blank rel=noopener>@tmamiya</a>,
<a href=https://github.com/Vestaxis target=_blank rel=noopener>@Vestaxis</a>,
<a href=https://github.com/vikram-rawat target=_blank rel=noopener>@vikram-rawat</a>,
<a href=https://github.com/williamgunn target=_blank rel=noopener>@williamgunn</a>, and
<a href=https://github.com/xhudik target=_blank rel=noopener>@xhudik</a></p></div></div><div class=column25><div class="section hideOnMobile"><div class=sectionTitle>Contents</div><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a></li><li><a href=#auth-from-gargle>Auth from gargle</a></li><li><a href=#preventing-name-conflicts>Preventing name conflicts</a></li><li><a href=#shared-workflows>Shared workflows</a></li><li><a href=#thanks>Thanks!</a></li></ul></nav></div><div class=section></div></div></div></div></div><div id=rStudioFooter class=band><div class=bandContent><div id=copyright>The tidyverse is proudly supported by <a class=rstudioLogo href=https://posit.co/ aria-label="Posit Homepage"></a></div><div id=logos><a href=https://www.tidyverse.org/google_privacy_policy>Privacy policy</a>
<a href=https://github.com/tidyverse class="footerLogo gitHub" aria-label="Tidyverse GitHub organization"></a><a href=https://twitter.com/hashtag/rstats class="footerLogo twitter" aria-label="rstats hashtag on twitter.com"></a></div></div></div></div></div><script src=/js/math-code.js></script><script type=text/x-mathjax-config>
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    processEscapes: true
  }
});
</script><script async src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script type=application/javascript>var dnt=(navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack);var doNotTrack=(dnt=="1"||dnt=="yes");if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');if(window.sessionStorage){var GA_SESSION_STORAGE_KEY='ga:clientId';ga('create','UA-115082821-1',{'storage':'none','clientId':sessionStorage.getItem(GA_SESSION_STORAGE_KEY)});ga(function(tracker){sessionStorage.setItem(GA_SESSION_STORAGE_KEY,tracker.get('clientId'));});}
ga('set','anonymizeIp',true);ga('send','pageview');}</script></body></html></div></div></body></html>