<!doctype html><html><head><!doctype html><html lang=en-us><link rel=stylesheet href=/css/fonts.css><link rel=stylesheet href=/css/main-site.css><link rel=stylesheet href=/css/fa5-all.css><style type=text/css>body{background-color:#fff;color:#1a1917}a{color:#38577f}a:hover{color:#42709b}a:focus{outline-color:#42709b}.column25-left .sectionTitle a:hover:not(.current),.column16-left .sectionTitle a:hover:not(.current){color:#1a1917}.icon-attribution,.icon-attribution a{color:#1a1917;opacity:75%}#homeContent .band.first{background-color:#fff}#homeContent .band.second{background-color:#fdeba4}#homeContent .band.third{background-color:#fff}#rStudioHeader{background-color:#1a162d;color:#fff}#rStudioHeader .productName{color:#fff}#rStudioHeader .productName:hover,#rStudioHeader .productName:focus{color:#fdeba4}#rStudioHeader #menu .menuItem.a{background-color:#75aadb;color:#fff}#rStudioHeader #menu .menuItem:hover{background-color:#484557;color:#fff}#rStudioHeader #menu .menuItem.current{background-color:#fff;color:#1a162d;text-decoration:none}#rStudioFooter.band{background-color:#767381}#rStudioFooter .bandContent #copyright{color:#e3eef8}table tbody tr:nth-child(even){background-color:#f7faff}table tbody tr:nth-child(odd){background-color:#fff}.latest{border-top:.5em solid <no value>}.event{-moz-box-shadow:0 0 0 0 rgba(0,0,0,.1);-webkit-box-shadow:0 0 0 0 rgba(0,0,0,.1);box-shadow:0 0 0 0 rgba(0,0,0,.1)}.section .event{background-color:#eab0c41a}.section .event{border-top:7pt solid #a19ea936}.section .event a{color:#1a162d}.section .event{color:#404040}</style><link rel=stylesheet href=/css/tidyverse.css><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Hugo 0.71.1"><title>ragnar 0.2</title><meta property="og:title" content="ragnar 0.2"><meta property="og:description" content="ragnar 0.2 introduces a tidy, transparent toolkit for building Retrieval-Augmented Generation (RAG) pipelines in R."><meta property="og:type" content="article"><meta property="og:url" content="https://www.tidyverse.org/blog/2025/08/ragnar-0-2/"><meta property="twitter:card" content="summary_large_image"><meta property="og:title" content="ragnar 0.2 - Tidyverse"><meta property="description" content="ragnar 0.2 introduces a tidy, transparent toolkit for building Retrieval-Augmented Generation (RAG) pipelines in R."><meta property="og:description" content="ragnar 0.2 introduces a tidy, transparent toolkit for building Retrieval-Augmented Generation (RAG) pipelines in R."><meta property="og:image" content="https://www.tidyverse.org/blog/2025/08/ragnar-0-2/thumbnail-sq.jpg"><meta name=twitter:image content="https://www.tidyverse.org/blog/2025/08/ragnar-0-2/thumbnail-wd.jpg"><link rel=apple-touch-icon sizes=180x180 href=/images/favicons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/images/favicons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/images/favicons/favicon-16x16.png><link rel=manifest href=/images/favicons/site.webmanifest><link rel=mask-icon href=/images/favicons/safari-pinned-tab.svg><link rel="shortcut icon" href=/images/favicons/favicon.ico><meta name=msapplication-TileColor content="#da532c"><meta name=msapplication-config href=/images/favicons/browserconfig.xml><script type=text/javascript src=/js/jquery-3.5.1.min.js></script><script type=text/javascript src=/js/site.js></script><link rel=icon href=/images/favicon.ico><script type=text/javascript src=/js/clipboard.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin=anonymous></script><script defer data-domain=tidyverse.org,all.tidyverse.org src=https://plausible.io/js/plausible.js></script></head><body><div id=appTidyverseSite class="shrinkHeader alwaysShrinkHeader"><div id=main><div id=rStudioHeader><nav class=band><div class="innards bandContent"><div><a class=productName href=/>Tidyverse</a></div><div id=menu><div id=menuToggler></div><div id=menuItems><a class=menuItem href=/packages/>Packages</a>
<a class="menuItem current" href=/blog/>Blog</a>
<a class=menuItem href=/learn/>Learn</a>
<a class=menuItem href=/help/>Help</a>
<a class=menuItem href=/contribute/>Contribute</a></div></div></div></nav></div><main><div class="band padForHeader pushFooter"><div class=bandContent><div class="full splitColumns withMobileMargins"><div class=column75><h1 class=article-title>ragnar 0.2</h1><div class=article-header aria-hidden=true><div class=photo><img src=/blog/2025/08/ragnar-0-2/thumbnail-wd.jpg></div><div class=photoCredit>Photo by <a href=https://unsplash.com/photos/person-holding-silver-and-black-scissors-rNsRAHLhrHc>Tekton</a></div></div><span class=article-date><i class="fas fa-calendar-day fa-fw"></i>&nbsp;&nbsp;2025/08/20</span><p style=margin-bottom:.5em;margin-top:.85em><i class="fas fa-tags"></i>&nbsp;
<a href=/tags/ai/>ai</a>,
<a href=/tags/ragnar/>ragnar</a></p><p style=margin-top:.5em><i class="fas fa-user-circle fa-fw"></i>&nbsp;
Tomasz Kalinowski</p><div class=article-content><h1 id=ragnar-02>ragnar 0.2
<a href=#ragnar-02><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h1><p>We&rsquo;re happy to announce the release of
<a href=ragnar.tidyverse.org>ragnar</a> 0.2, a new R package for building trustworthy Retrieval-Augmented Generation (RAG) workflows.</p><p>You can install it from CRAN with:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nf>install.packages</span><span class=p>(</span><span class=s>&#34;ragnar&#34;</span><span class=p>)</span>
</code></pre></div><h2 id=whats-retrieval-augmented-generation-rag>What&rsquo;s retrieval-augmented generation (RAG)?
<a href=#whats-retrieval-augmented-generation-rag><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>Large language models (LLMs) tend to generate fluent confident text completely detached from facts and reality. We politely call untrue statements from an LLM <em>hallucinations</em>. RAG reduces the risk of hallucinations by grounding LLMs in your factual, trusted documents.</p><p>With RAG, instead of asking an LLM to respond from its own memory, we:</p><ol><li>Retrieve relevant passages from trusted sources.</li><li>Ask the model to answer using those passages.</li></ol><p>RAG shifts the LLMs job from open ended generation towards summarizing and paraphrasing, an easier task where LLMs make substantially fewer fabrications.</p><h2 id=meet-ragnar>Meet <strong>ragnar</strong>
<a href=#meet-ragnar><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>ragnar is a tidy interface for building a RAG pipeline. Use ragnar to:</p><ul><li><em>Convert</em> documents from the web or local filesystem into Markdown.</li><li><em>Chunk</em> documents using meaningful semantic boundaries.</li><li><em>Augment</em> chunks with a short context string that situates each chunk.</li><li><em>Embed</em> chunks with commercial or open-source models.</li><li><em>Store</em> embeddings in DuckDB for fast, local queries.</li><li><em>Retrieve</em> relevant chunks using both vector and text search.</li></ul><h2 id=quick-start-collect-convert-chunk-embed-and-store-your-documents>Quick start: collect, convert, chunk, embed, and store your documents
<a href=#quick-start-collect-convert-chunk-embed-and-store-your-documents><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>Here is how to build a RAG knowledge store from the Quarto docs.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=kr><a href=https://rdrr.io/r/base/library.html>library</a></span><span class=o>(</span><span class=nv><a href=https://ragnar.tidyverse.org/>ragnar</a></span><span class=o>)</span></span></code></pre></div><ol><li><p>Create a knowledge store.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nv>store</span> <span class=o>&lt;-</span> <span class=nf><a href=https://ragnar.tidyverse.org/reference/ragnar_store_create.html>ragnar_store_create</a></span><span class=o>(</span></span>
<span>  <span class=s>"./quarto.ragnar.duckdb"</span>,</span>
<span>  embed <span class=o>=</span> \<span class=o>(</span><span class=nv>x</span><span class=o>)</span> <span class=nf>ragnar</span><span class=nf>::</span><span class=nf><a href=https://ragnar.tidyverse.org/reference/embed_ollama.html>embed_openai</a></span><span class=o>(</span><span class=nv>x</span>, model <span class=o>=</span> <span class=s>"text-embedding-3-small"</span><span class=o>)</span>,</span>
<span>  name <span class=o>=</span> <span class=s>"quarto_docs"</span></span>
<span><span class=o>)</span></span></code></pre></div></li><li><p>Generate a list of relevant web page URLs from quarto.org. We can consult the sitemap, or, if a sitemap wasn&rsquo;t available, we could also crawl the site.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nv>pages</span> <span class=o>&lt;-</span> <span class=nf><a href=https://ragnar.tidyverse.org/reference/ragnar_find_links.html>ragnar_find_links</a></span><span class=o>(</span><span class=s>"https://quarto.org/sitemap.xml"</span><span class=o>)</span></span></code></pre></div></li><li><p>Convert, chunk, augment, embed, and store each page.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=kr>for</span> <span class=o>(</span><span class=nv>page</span> <span class=kr>in</span> <span class=nv>pages</span><span class=o>)</span> <span class=o>&#123;</span></span>
<span>  <span class=nv>chunks</span> <span class=o>&lt;-</span> <span class=nv>page</span> <span class=o>|&gt;</span></span>
<span></span>
<span>    <span class=c># Convert to markdown</span></span>
<span>    <span class=nf><a href=https://ragnar.tidyverse.org/reference/read_as_markdown.html>read_as_markdown</a></span><span class=o>(</span><span class=o>)</span> <span class=o>|&gt;</span></span>
<span></span>
<span>    <span class=c># Split document into chunks and generate 'context' for each chunk.</span></span>
<span>    <span class=nf><a href=https://ragnar.tidyverse.org/reference/markdown_chunk.html>markdown_chunk</a></span><span class=o>(</span><span class=o>)</span></span>
<span></span>
<span>  <span class=c># Embed and store chunks with context and metadata</span></span>
<span>  <span class=nf><a href=https://ragnar.tidyverse.org/reference/ragnar_store_insert.html>ragnar_store_insert</a></span><span class=o>(</span><span class=nv>store</span>, <span class=nv>chunks</span><span class=o>)</span></span>
<span><span class=o>&#125;</span></span></code></pre></div></li><li><p>Build the retrieval index.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nf><a href=https://ragnar.tidyverse.org/reference/ragnar_store_build_index.html>ragnar_store_build_index</a></span><span class=o>(</span><span class=nv>store</span><span class=o>)</span></span></code></pre></div></li></ol><p>Once the store is built, you can access it for fast retrieval.</p><h2 id=retrieve-relevant-chunks>Retrieve relevant chunks
<a href=#retrieve-relevant-chunks><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>Pass a query string to
<a href=https://ragnar.tidyverse.org/reference/ragnar_retrieve.html target=_blank rel=noopener><code>ragnar_retrieve()</code></a> to perform both semantic search using vector embeddings and conventional text search to retrieve the most relevant chunks.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nv>store</span> <span class=o>&lt;-</span> <span class=nf><a href=https://ragnar.tidyverse.org/reference/ragnar_store_create.html>ragnar_store_connect</a></span><span class=o>(</span><span class=s>"./quarto.ragnar.duckdb"</span>, read_only <span class=o>=</span> <span class=kc>TRUE</span><span class=o>)</span></span>
<span><span class=nv>query</span> <span class=o>&lt;-</span> <span class=s>"&#123;.python&#125; or &#123;python&#125; code chunk header"</span></span>
<span></span>
<span><span class=nf><a href=https://ragnar.tidyverse.org/reference/ragnar_retrieve.html>ragnar_retrieve</a></span><span class=o>(</span><span class=nv>store</span>, <span class=nv>query</span>, top_k <span class=o>=</span> <span class=m>5</span><span class=o>)</span></span>
<span><span class=c>#&gt; <span style=color:#555># A tibble: 9 × 9</span></span></span>
<span><span class=c>#&gt;   origin         doc_id chunk_id start   end cosine_distance bm25  context text </span></span>
<span><span class=c>#&gt;   <span style=color:#555;font-style:italic>&lt;chr&gt;</span>          <span style=color:#555;font-style:italic>&lt;list&gt;</span> <span style=color:#555;font-style:italic>&lt;list&gt;</span>   <span style=color:#555;font-style:italic>&lt;int&gt;</span> <span style=color:#555;font-style:italic>&lt;int&gt;</span> <span style=color:#555;font-style:italic>&lt;list&gt;</span>          <span style=color:#555;font-style:italic>&lt;lis&gt;</span> <span style=color:#555;font-style:italic>&lt;chr&gt;</span>   <span style=color:#555;font-style:italic>&lt;chr&gt;</span></span></span>
<span><span class=c>#&gt; <span style=color:#555>1</span> https://quart… <span style=color:#555>&lt;int&gt;</span>  <span style=color:#555>&lt;int&gt;</span>    <span style=text-decoration:underline>14</span>318 <span style=text-decoration:underline>16</span>132 <span style=color:#555>&lt;dbl [1]&gt;</span>       <span style=color:#555>&lt;dbl&gt;</span> <span style=color:#555>"</span># Dia… <span style=color:#555>"</span>###…</span></span>
<span><span class=c>#&gt; <span style=color:#555>2</span> https://quart… <span style=color:#555>&lt;int&gt;</span>  <span style=color:#555>&lt;int&gt;</span>      869  <span style=text-decoration:underline>2</span>386 <span style=color:#555>&lt;dbl [1]&gt;</span>       <span style=color:#555>&lt;dbl&gt;</span> <span style=color:#555>"</span># ASA… <span style=color:#555>"</span>Hom…</span></span>
<span><span class=c>#&gt; <span style=color:#555>3</span> https://quart… <span style=color:#555>&lt;int&gt;</span>  <span style=color:#555>&lt;int&gt;</span>        1  <span style=text-decoration:underline>2</span>497 <span style=color:#555>&lt;dbl [2]&gt;</span>       <span style=color:#555>&lt;dbl&gt;</span> <span style=color:#555>""</span>      <span style=color:#555>"</span># U…</span></span>
<span><span class=c>#&gt; <span style=color:#555>4</span> https://quart… <span style=color:#555>&lt;int&gt;</span>  <span style=color:#555>&lt;int&gt;</span>     <span style=text-decoration:underline>3</span>156  <span style=text-decoration:underline>4</span>928 <span style=color:#555>&lt;dbl [1]&gt;</span>       <span style=color:#555>&lt;dbl&gt;</span> <span style=color:#555>"</span># v1.… <span style=color:#555>"</span>## …</span></span>
<span><span class=c>#&gt; <span style=color:#555>5</span> https://quart… <span style=color:#555>&lt;int&gt;</span>  <span style=color:#555>&lt;int&gt;</span>     <span style=text-decoration:underline>5</span>365  <span style=text-decoration:underline>7</span>389 <span style=color:#555>&lt;dbl [1]&gt;</span>       <span style=color:#555>&lt;dbl&gt;</span> <span style=color:#555>"</span># Cre… <span style=color:#555>"</span>## …</span></span>
<span><span class=c>#&gt; <span style=color:#555>6</span> https://quart… <span style=color:#555>&lt;int&gt;</span>  <span style=color:#555>&lt;int&gt;</span>     <span style=text-decoration:underline>7</span>319  <span style=text-decoration:underline>8</span>804 <span style=color:#555>&lt;dbl [1]&gt;</span>       <span style=color:#555>&lt;dbl&gt;</span> <span style=color:#555>"</span># HTM… <span style=color:#555>"</span>## …</span></span>
<span><span class=c>#&gt; <span style=color:#555>7</span> https://quart… <span style=color:#555>&lt;int&gt;</span>  <span style=color:#555>&lt;int&gt;</span>    <span style=text-decoration:underline>11</span>096 <span style=text-decoration:underline>12</span>763 <span style=color:#555>&lt;dbl [1]&gt;</span>       <span style=color:#555>&lt;dbl&gt;</span> <span style=color:#555>"</span># HTM… <span style=color:#555>"</span>## …</span></span>
<span><span class=c>#&gt; <span style=color:#555>8</span> https://quart… <span style=color:#555>&lt;int&gt;</span>  <span style=color:#555>&lt;int&gt;</span>     <span style=text-decoration:underline>9</span>426 <span style=text-decoration:underline>11</span>250 <span style=color:#555>&lt;dbl [1]&gt;</span>       <span style=color:#555>&lt;dbl&gt;</span> <span style=color:#555>"</span># Rev… <span style=color:#555>"</span>###…</span></span>
<span><span class=c>#&gt; <span style=color:#555>9</span> https://quart… <span style=color:#555>&lt;int&gt;</span>  <span style=color:#555>&lt;int&gt;</span>     <span style=text-decoration:underline>5</span>236  <span style=text-decoration:underline>6</span>904 <span style=color:#555>&lt;dbl [1]&gt;</span>       <span style=color:#555>&lt;dbl&gt;</span> <span style=color:#555>"</span># Hel… <span style=color:#555>"</span>###…</span></span>
<span></span></code></pre></div><h2 id=equip-an-llm-chat-with-your-store>Equip an LLM chat with your store
<a href=#equip-an-llm-chat-with-your-store><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>You can equip an ellmer chat with a tool that lets the LLM search your knowledge store automatically.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=kr><a href=https://rdrr.io/r/base/library.html>library</a></span><span class=o>(</span><span class=nv><a href=https://ellmer.tidyverse.org>ellmer</a></span><span class=o>)</span></span>
<span></span>
<span><span class=nv>chat</span> <span class=o>&lt;-</span> <span class=nf><a href=https://ellmer.tidyverse.org/reference/chat_openai.html>chat_openai</a></span><span class=o>(</span></span>
<span>  system_prompt <span class=o>=</span> <span class=nf>glue</span><span class=nf>::</span><span class=nf><a href=https://glue.tidyverse.org/reference/trim.html>trim</a></span><span class=o>(</span><span class=s>"</span></span>
<span><span class=s>    You are a Quarto documentation search agent and summarizer.</span></span>
<span><span class=s>    You are concise.</span></span>
<span><span class=s>    For every user question, perform between one and three searches.</span></span>
<span><span class=s>    Include links to the source documents in your response.</span></span>
<span><span class=s>    "</span><span class=o>)</span></span>
<span>  <span class=o>)</span> <span class=o>|&gt;</span></span>
<span>  <span class=nf><a href=https://ragnar.tidyverse.org/reference/ragnar_register_tool_retrieve.html>ragnar_register_tool_retrieve</a></span><span class=o>(</span><span class=nv>store</span>, top_k <span class=o>=</span> <span class=m>10</span><span class=o>)</span></span>
<span><span class=c>#&gt; Using <span style=color:#0b0>model</span> = <span style=color:#00b>"gpt-4.1"</span>.</span></span>
<span></span></code></pre></div><p>The model can now search the store on demand. It has the ability to rewrite the search query and do repeated searches. The model&rsquo;s responses will also cite and link back to your source documents, so users can easily follow links to learn more.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nv>chat</span><span class=o>$</span><span class=nf>chat</span><span class=o>(</span></span>
<span>  <span class=s>"What's the difference between &#123;.python&#125; and &#123;python&#125;</span></span>
<span><span class=s>  in a code chunk header?"</span></span>
<span><span class=o>)</span></span>
<span><span class=c>#&gt; <span style=color:#00b>◯</span> [<span style=color:#00b>tool call</span>] rag_retrieve_from_store_001(text = "difference between &#123;.python&#125;</span></span>
<span><span class=c>#&gt; and &#123;python&#125; in a code chunk header")</span></span>
<span></span><span><span class=c>#&gt; <span style=color:#0b0>●</span> #&gt; <span style=font-style:italic>[&#123;"origin":"https://quarto.org/docs/authoring/diagrams.html","doc_id"…</span></span></span>
<span></span><span><span class=c>#&gt; <span style=color:#00b>◯</span> [<span style=color:#00b>tool call</span>] rag_retrieve_from_store_001(text = "chunk header options quarto</span></span>
<span><span class=c>#&gt; curly braces dot notation")</span></span>
<span></span><span><span class=c>#&gt; <span style=color:#0b0>●</span> #&gt; <span style=font-style:italic>[&#123;"origin":"https://quarto.org/docs/authoring/lipsum.html","doc_id":2…</span></span></span>
<span></span><span><span class=c>#&gt; The difference between `&#123;.python&#125;` and `&#123;python&#125;` in a code chunk header is:</span></span>
<span><span class=c>#&gt; </span></span>
<span><span class=c>#&gt; - `&#123;python&#125;`: This syntax is used for executable code blocks. Quarto will run </span></span>
<span><span class=c>#&gt; the Python code inside the block and include its output in the rendered </span></span>
<span><span class=c>#&gt; document.  </span></span>
<span><span class=c>#&gt;   ```markdown</span></span>
<span><span class=c>#&gt;   ```&#123;python&#125;</span></span>
<span><span class=c>#&gt;   print(1 + 1)</span></span>
<span><span class=c>#&gt;   ```</span></span>
<span><span class=c>#&gt;   ```</span></span>
<span><span class=c>#&gt;   This is for running code, capturing output, figures, etc.</span></span>
<span><span class=c>#&gt; </span></span>
<span><span class=c>#&gt; - `&#123;.python&#125;`: This syntax (note the leading dot) is used for a code block that</span></span>
<span><span class=c>#&gt; is purely for display (not executed), with `.python` indicating the code should</span></span>
<span><span class=c>#&gt; be syntax-highlighted as Python. This is the Pandoc Markdown convention for </span></span>
<span><span class=c>#&gt; indicating the language for syntax highlighting only:</span></span>
<span><span class=c>#&gt;   ```markdown</span></span>
<span><span class=c>#&gt;   ```&#123;.python&#125;</span></span>
<span><span class=c>#&gt;   # This code is just displayed, not executed by Quarto</span></span>
<span><span class=c>#&gt;   print(1 + 1)</span></span>
<span><span class=c>#&gt;   ```</span></span>
<span><span class=c>#&gt;   ```</span></span>
<span><span class=c>#&gt;   Or equivalently, you can use triple backticks followed by the language name:</span></span>
<span><span class=c>#&gt;   ```</span></span>
<span><span class=c>#&gt;   ```python</span></span>
<span><span class=c>#&gt;   print(1 + 1)</span></span>
<span><span class=c>#&gt;   ```</span></span>
<span><span class=c>#&gt;   ```</span></span>
<span><span class=c>#&gt;   In both forms, the code is not executed.</span></span>
<span><span class=c>#&gt; </span></span>
<span><span class=c>#&gt; To summarize:</span></span>
<span><span class=c>#&gt; - `&#123;python&#125;` → Executed code block.</span></span>
<span><span class=c>#&gt; - `&#123;.python&#125;` or ```python → Non-executed code block with syntax highlighting </span></span>
<span><span class=c>#&gt; only.</span></span>
<span><span class=c>#&gt; </span></span>
<span><span class=c>#&gt; Sources:</span></span>
<span><span class=c>#&gt; - [Quarto documentation: Using </span></span>
<span><span class=c>#&gt; Python](https://quarto.org/docs/computations/python.html)</span></span>
<span><span class=c>#&gt; - [Quarto documentation: HTML Code </span></span>
<span><span class=c>#&gt; Blocks](https://quarto.org/docs/output-formats/html-code.html)</span></span>
<span></span></code></pre></div><h3 id=inspect-and-iterate>Inspect and iterate
<a href=#inspect-and-iterate><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><p>Use
<a href=https://ragnar.tidyverse.org/reference/ragnar_store_inspect.html target=_blank rel=noopener><code>ragnar_store_inspect()</code></a> to interactively preview which text chunks are retrieved for different search queries. This helps identify issues like poor document conversion, chunking, or context augmentation, so you can refine your store creation pipeline. By making retrieval results easy to explore, <code>ragnar</code> lets you iterate and tune your knowledge store before connecting it to an LLM.</p><p>You can also launch the store inspector with just a single chunked document using
<a href=https://ragnar.tidyverse.org/reference/ragnar_chunks_view.html target=_blank rel=noopener><code>ragnar_chunks_view()</code></a>. This is particularly useful when deciding what chunking approach is most appropriate for your content.</p><figure><img src=ragnar-store-inspector-screenshot.png alt="Store Inspector UI screenshot"><figcaption aria-hidden=true>Store Inspector UI screenshot</figcaption></figure><h2 id=additional-features>Additional features
<a href=#additional-features><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><ul><li><strong>Works with many document types</strong>:
<a href=https://ragnar.tidyverse.org/reference/read_as_markdown.html target=_blank rel=noopener><code>read_as_markdown()</code></a> uses
<a href=https://github.com/microsoft/markitdown target=_blank rel=noopener>MarkItDown</a>, which means it can ingest an extremely wide variety of files: HTML, PDF, docx, pptx, epubs, compressed archives, and more.</li><li><strong>Flexible embeddings</strong>: Use embedding models from providers like OpenAI, Google Vertex or Gemini, Bedrock, Databricks, Ollama or LM Studio, or easily supply your own embedding function.</li><li><strong>DuckDB native</strong>: Extremely fast local indexing and retrieval. Native support for MotherDuck if you need to serve the store.</li><li><strong>Customizable chunk augmentation</strong>: Customize how chunks are augmented with context (headings, links, titles), and easily attach additional metadata to chunks.</li><li><strong>Not a black box</strong>: Easily inspect the store contents and retrieval results.</li></ul><h2 id=get-started>Get started
<a href=#get-started><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><ul><li><strong>Install:</strong> <code>install.packages("ragnar")</code></li><li><strong>Read the vignette:</strong>
<a href=https://ragnar.tidyverse.org/articles/ragnar.html target=_blank rel=noopener>Getting Started</a></li><li><strong>Explore more examples:</strong>
<a href=https://github.com/tidyverse/ragnar target=_blank rel=noopener>ragnar GitHub repository</a></li></ul><h2 id=acknowledgements>Acknowledgements
<a href=#acknowledgements><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>A big thanks to all contributors who helped out with ragnar development through thoughtful discussions, bug reports, and pull requests.</p><p><a href=https://github.com/app2let target=_blank rel=noopener>@app2let</a>,
<a href=https://github.com/arnavchauhan7 target=_blank rel=noopener>@arnavchauhan7</a>,
<a href=https://github.com/atheriel target=_blank rel=noopener>@atheriel</a>,
<a href=https://github.com/bowerth target=_blank rel=noopener>@bowerth</a>,
<a href=https://github.com/cboettig target=_blank rel=noopener>@cboettig</a>,
<a href=https://github.com/Christophe-Regouby target=_blank rel=noopener>@Christophe-Regouby</a>,
<a href=https://github.com/dfalbel target=_blank rel=noopener>@dfalbel</a>,
<a href=https://github.com/dingying85 target=_blank rel=noopener>@dingying85</a>,
<a href=https://github.com/gadenbuie target=_blank rel=noopener>@gadenbuie</a>,
<a href=https://github.com/hadley target=_blank rel=noopener>@hadley</a>,
<a href=https://github.com/JCfly3000 target=_blank rel=noopener>@JCfly3000</a>,
<a href=https://github.com/jrosell target=_blank rel=noopener>@jrosell</a>,
<a href=https://github.com/kaipingyang target=_blank rel=noopener>@kaipingyang</a>,
<a href=https://github.com/mattwarkentin target=_blank rel=noopener>@mattwarkentin</a>,
<a href=https://github.com/PauloSantana2019 target=_blank rel=noopener>@PauloSantana2019</a>,
<a href=https://github.com/pedrobtz target=_blank rel=noopener>@pedrobtz</a>,
<a href=https://github.com/RichardHooijmaijers target=_blank rel=noopener>@RichardHooijmaijers</a>,
<a href=https://github.com/schochastics target=_blank rel=noopener>@schochastics</a>,
<a href=https://github.com/sikiru-atanda target=_blank rel=noopener>@sikiru-atanda</a>,
<a href=https://github.com/SimonEdscer target=_blank rel=noopener>@SimonEdscer</a>,
<a href=https://github.com/smach target=_blank rel=noopener>@smach</a>,
<a href=https://github.com/t-kalinowski target=_blank rel=noopener>@t-kalinowski</a>, and
<a href=https://github.com/topepo target=_blank rel=noopener>@topepo</a>.</p></div></div><div class=column25><div class="section hideOnMobile"><div class=sectionTitle>Contents</div><nav id=TableOfContents><ul><li><a href=#whats-retrieval-augmented-generation-rag>What&rsquo;s retrieval-augmented generation (RAG)?</a></li><li><a href=#meet-ragnar>Meet <strong>ragnar</strong></a></li><li><a href=#quick-start-collect-convert-chunk-embed-and-store-your-documents>Quick start: collect, convert, chunk, embed, and store your documents</a></li><li><a href=#retrieve-relevant-chunks>Retrieve relevant chunks</a></li><li><a href=#equip-an-llm-chat-with-your-store>Equip an LLM chat with your store</a></li><li><a href=#additional-features>Additional features</a></li><li><a href=#get-started>Get started</a></li><li><a href=#acknowledgements>Acknowledgements</a></li></ul></nav></div><div class=section></div></div></div></div></div><div id=rStudioFooter class=band><div class=bandContent><div id=copyright>The tidyverse is proudly supported by <a class=rstudioLogo href=https://posit.co/ aria-label="Posit Homepage"></a></div><div id=logos><a href=https://www.tidyverse.org/google_privacy_policy>Privacy policy</a>
<a href=https://github.com/tidyverse class="footerLogo gitHub" aria-label="Tidyverse GitHub organization"></a><a href=https://twitter.com/hashtag/rstats class="footerLogo twitter" aria-label="rstats hashtag on twitter.com"></a></div></div></div></div></div><script src=/js/math-code.js></script><script type=text/x-mathjax-config>
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    processEscapes: true
  }
});
</script><script async src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script type=application/javascript>var dnt=(navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack);var doNotTrack=(dnt=="1"||dnt=="yes");if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');if(window.sessionStorage){var GA_SESSION_STORAGE_KEY='ga:clientId';ga('create','UA-115082821-1',{'storage':'none','clientId':sessionStorage.getItem(GA_SESSION_STORAGE_KEY)});ga(function(tracker){sessionStorage.setItem(GA_SESSION_STORAGE_KEY,tracker.get('clientId'));});}
ga('set','anonymizeIp',true);ga('send','pageview');}</script></body></html></div></div></body></html>