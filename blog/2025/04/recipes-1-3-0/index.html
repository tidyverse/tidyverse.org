<!doctype html><html><head><!doctype html><html lang=en-us><link rel=stylesheet href=/css/fonts.css><link rel=stylesheet href=/css/main-site.css><link rel=stylesheet href=/css/fa5-all.css><style type=text/css>body{background-color:#fff;color:#1a1917}a{color:#38577f}a:hover{color:#42709b}a:focus{outline-color:#42709b}.column25-left .sectionTitle a:hover:not(.current),.column16-left .sectionTitle a:hover:not(.current){color:#1a1917}.icon-attribution,.icon-attribution a{color:#1a1917;opacity:75%}#homeContent .band.first{background-color:#fff}#homeContent .band.second{background-color:#fdeba4}#homeContent .band.third{background-color:#fff}#rStudioHeader{background-color:#1a162d;color:#fff}#rStudioHeader .productName{color:#fff}#rStudioHeader .productName:hover,#rStudioHeader .productName:focus{color:#fdeba4}#rStudioHeader #menu .menuItem.a{background-color:#75aadb;color:#fff}#rStudioHeader #menu .menuItem:hover{background-color:#484557;color:#fff}#rStudioHeader #menu .menuItem.current{background-color:#fff;color:#1a162d;text-decoration:none}#rStudioFooter.band{background-color:#767381}#rStudioFooter .bandContent #copyright{color:#e3eef8}table tbody tr:nth-child(even){background-color:#f7faff}table tbody tr:nth-child(odd){background-color:#fff}.latest{border-top:.5em solid <no value>}.event{-moz-box-shadow:0 0 0 0 rgba(0,0,0,.1);-webkit-box-shadow:0 0 0 0 rgba(0,0,0,.1);box-shadow:0 0 0 0 rgba(0,0,0,.1)}.section .event{background-color:#eab0c41a}.section .event{border-top:7pt solid #a19ea936}.section .event a{color:#1a162d}.section .event{color:#404040}</style><link rel=stylesheet href=/css/tidyverse.css><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Hugo 0.71.1"><title>recipes 1.3.0</title><meta property="og:title" content="recipes 1.3.0"><meta property="og:description" content="This release brings changes for strings_as_factors, step_select(), step_dummy(), and step_impute_bag()."><meta property="og:type" content="article"><meta property="og:url" content="https://www.tidyverse.org/blog/2025/04/recipes-1-3-0/"><meta property="twitter:card" content="summary_large_image"><meta property="og:title" content="recipes 1.3.0 - Tidyverse"><meta property="description" content="This release brings changes for strings_as_factors, step_select(), step_dummy(), and step_impute_bag()."><meta property="og:description" content="This release brings changes for strings_as_factors, step_select(), step_dummy(), and step_impute_bag()."><meta property="og:image" content="https://www.tidyverse.org/blog/2025/04/recipes-1-3-0/thumbnail-sq.jpg"><meta name=twitter:image content="https://www.tidyverse.org/blog/2025/04/recipes-1-3-0/thumbnail-wd.jpg"><link rel=apple-touch-icon sizes=180x180 href=/images/favicons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/images/favicons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/images/favicons/favicon-16x16.png><link rel=manifest href=/images/favicons/site.webmanifest><link rel=mask-icon href=/images/favicons/safari-pinned-tab.svg><link rel="shortcut icon" href=/images/favicons/favicon.ico><meta name=msapplication-TileColor content="#da532c"><meta name=msapplication-config href=/images/favicons/browserconfig.xml><script type=text/javascript src=/js/jquery-3.5.1.min.js></script><script type=text/javascript src=/js/site.js></script><link rel=icon href=/images/favicon.ico><script type=text/javascript src=/js/clipboard.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin=anonymous></script><script defer data-domain=tidyverse.org,all.tidyverse.org src=https://plausible.io/js/plausible.js></script></head><body><div id=appTidyverseSite class="shrinkHeader alwaysShrinkHeader"><div id=main><div id=rStudioHeader><nav class=band><div class="innards bandContent"><div><a class=productName href=/%20/>Tidyverse</a></div><div id=menu><div id=menuToggler></div><div id=menuItems><a class=menuItem href=/packages/>Packages</a>
<a class="menuItem current" href=/blog/>Blog</a>
<a class=menuItem href=/learn/>Learn</a>
<a class=menuItem href=/help/>Help</a>
<a class=menuItem href=/contribute/>Contribute</a></div></div></div></nav></div><main><div class="band padForHeader pushFooter"><div class=bandContent><div class="full splitColumns withMobileMargins"><div class=column75><h1 class=article-title>recipes 1.3.0</h1><div class=article-header aria-hidden=true><div class=photo><img src=/blog/2025/04/recipes-1-3-0/thumbnail-wd.jpg></div><div class=photoCredit>Photo by <a href=https://unsplash.com/photos/background-pattern-3b7sos3CD2c>James Trenda</a></div></div><span class=article-date><i class="fas fa-calendar-day fa-fw"></i>&nbsp;&nbsp;2025/04/28</span><p style=margin-bottom:.5em;margin-top:.85em><i class="fas fa-tags"></i>&nbsp;
<a href=/tags/recipes/>recipes</a>,
<a href=/tags/tidymodels/>tidymodels</a></p><p style=margin-top:.5em><i class="fas fa-user-circle fa-fw"></i>&nbsp;
Emil Hvitfeldt</p><div class=article-content><p>We&rsquo;re thrilled to announce the release of
<a href=https://recipes.tidymodels.org/ target=_blank rel=noopener>recipes</a> 1.3.0. recipes lets you create a pipeable sequence of feature engineering steps.</p><p>You can install it from CRAN with:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nf><a href=https://rdrr.io/r/utils/install.packages.html>install.packages</a></span><span class=o>(</span><span class=s>"recipes"</span><span class=o>)</span></span></code></pre></div><p>This blog post will walk through some of the highlights of this release, which includes changes to how <code>strings_as_factors</code> are specified, deprecation of
<a href=https://recipes.tidymodels.org/reference/step_select.html target=_blank rel=noopener><code>step_select()</code></a>, new <code>contrasts</code> argument for
<a href=https://recipes.tidymodels.org/reference/step_dummy.html target=_blank rel=noopener><code>step_dummy()</code></a>, and improvements for
<a href=https://recipes.tidymodels.org/reference/step_impute_bag.html target=_blank rel=noopener><code>step_impute_bag()</code></a>.</p><p>You can see a full list of changes in the
<a href=https://recipes.tidymodels.org/news/index.html#recipes-130 target=_blank rel=noopener>release notes</a>.</p><p>Let&rsquo;s first load the package:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=kr><a href=https://rdrr.io/r/base/library.html>library</a></span><span class=o>(</span><span class=nv><a href=https://github.com/tidymodels/recipes>recipes</a></span><span class=o>)</span></span></code></pre></div><h2 id=strings_as_factors><code>strings_as_factors</code>
<a href=#strings_as_factors><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>Recipes by default convert predictor strings to factors, and the option for that is located in
<a href=https://recipes.tidymodels.org/reference/prep.html target=_blank rel=noopener><code>prep()</code></a>. This caused an issue when you wanted to set <code>strings_as_factors = FALSE</code> for a recipe that is used somewhere else like in a workflow.</p><p>This is no longer an issue as we have moved the argument to
<a href=https://recipes.tidymodels.org/reference/recipe.html target=_blank rel=noopener><code>recipe()</code></a> itself. We are at the same time deprecating the use of <code>strings_as_factors</code> when used in
<a href=https://recipes.tidymodels.org/reference/prep.html target=_blank rel=noopener><code>prep()</code></a>. Here is an example:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=kr><a href=https://rdrr.io/r/base/library.html>library</a></span><span class=o>(</span><span class=nv><a href=https://modeldata.tidymodels.org>modeldata</a></span><span class=o>)</span></span>
<span><span class=nv>tate_text</span></span>
<span><span class=c>#&gt; <span style=color:#555># A tibble: 4,284 × 5</span></span></span>
<span><span class=c>#&gt;        id artist             title                                  medium  year</span></span>
<span><span class=c>#&gt;     <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;fct&gt;</span>              <span style=color:#555;font-style:italic>&lt;chr&gt;</span>                                  <span style=color:#555;font-style:italic>&lt;fct&gt;</span>  <span style=color:#555;font-style:italic>&lt;dbl&gt;</span></span></span>
<span><span class=c>#&gt; <span style=color:#555> 1</span>  <span style=text-decoration:underline>21</span>926 Absalon            Proposals for a Habitat                Video…  <span style=text-decoration:underline>1</span>990</span></span>
<span><span class=c>#&gt; <span style=color:#555> 2</span>  <span style=text-decoration:underline>20</span>472 Auerbach, Frank    Michael                                Etchi…  <span style=text-decoration:underline>1</span>990</span></span>
<span><span class=c>#&gt; <span style=color:#555> 3</span>  <span style=text-decoration:underline>20</span>474 Auerbach, Frank    Geoffrey                               Etchi…  <span style=text-decoration:underline>1</span>990</span></span>
<span><span class=c>#&gt; <span style=color:#555> 4</span>  <span style=text-decoration:underline>20</span>473 Auerbach, Frank    Jake                                   Etchi…  <span style=text-decoration:underline>1</span>990</span></span>
<span><span class=c>#&gt; <span style=color:#555> 5</span>  <span style=text-decoration:underline>20</span>513 Auerbach, Frank    To the Studios                         Oil p…  <span style=text-decoration:underline>1</span>990</span></span>
<span><span class=c>#&gt; <span style=color:#555> 6</span>  <span style=text-decoration:underline>21</span>389 Ayres, OBE Gillian Phaëthon                               Oil p…  <span style=text-decoration:underline>1</span>990</span></span>
<span><span class=c>#&gt; <span style=color:#555> 7</span> <span style=text-decoration:underline>121</span>187 Barlow, Phyllida   Untitled                               Acryl…  <span style=text-decoration:underline>1</span>990</span></span>
<span><span class=c>#&gt; <span style=color:#555> 8</span>  <span style=text-decoration:underline>19</span>455 Baselitz, Georg    Green VIII                             Woodc…  <span style=text-decoration:underline>1</span>990</span></span>
<span><span class=c>#&gt; <span style=color:#555> 9</span>  <span style=text-decoration:underline>20</span>938 Beattie, Basil     Present Bound                          Oil p…  <span style=text-decoration:underline>1</span>990</span></span>
<span><span class=c>#&gt; <span style=color:#555>10</span> <span style=text-decoration:underline>105</span>941 Beuys, Joseph      Joseph Beuys: A Private Collection. A… Print…  <span style=text-decoration:underline>1</span>990</span></span>
<span><span class=c>#&gt; <span style=color:#555># ℹ 4,274 more rows</span></span></span>
<span></span></code></pre></div><p>We are loading the modeldata package to get <code>tate_text</code> which has a character column <code>title</code>. If we don&rsquo;t do anything then it turns into a factor.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nf><a href=https://recipes.tidymodels.org/reference/recipe.html>recipe</a></span><span class=o>(</span><span class=o>~</span><span class=nv>.</span>, data <span class=o>=</span> <span class=nv>tate_text</span><span class=o>)</span> <span class=o>|&gt;</span></span>
<span>  <span class=nf><a href=https://recipes.tidymodels.org/reference/prep.html>prep</a></span><span class=o>(</span><span class=o>)</span> <span class=o>|&gt;</span></span>
<span>  <span class=nf><a href=https://recipes.tidymodels.org/reference/bake.html>bake</a></span><span class=o>(</span><span class=nv>tate_text</span><span class=o>)</span></span>
<span><span class=c>#&gt; <span style=color:#555># A tibble: 4,284 × 5</span></span></span>
<span><span class=c>#&gt;        id artist             title                                  medium  year</span></span>
<span><span class=c>#&gt;     <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;fct&gt;</span>              <span style=color:#555;font-style:italic>&lt;fct&gt;</span>                                  <span style=color:#555;font-style:italic>&lt;fct&gt;</span>  <span style=color:#555;font-style:italic>&lt;dbl&gt;</span></span></span>
<span><span class=c>#&gt; <span style=color:#555> 1</span>  <span style=text-decoration:underline>21</span>926 Absalon            Proposals for a Habitat                Video…  <span style=text-decoration:underline>1</span>990</span></span>
<span><span class=c>#&gt; <span style=color:#555> 2</span>  <span style=text-decoration:underline>20</span>472 Auerbach, Frank    Michael                                Etchi…  <span style=text-decoration:underline>1</span>990</span></span>
<span><span class=c>#&gt; <span style=color:#555> 3</span>  <span style=text-decoration:underline>20</span>474 Auerbach, Frank    Geoffrey                               Etchi…  <span style=text-decoration:underline>1</span>990</span></span>
<span><span class=c>#&gt; <span style=color:#555> 4</span>  <span style=text-decoration:underline>20</span>473 Auerbach, Frank    Jake                                   Etchi…  <span style=text-decoration:underline>1</span>990</span></span>
<span><span class=c>#&gt; <span style=color:#555> 5</span>  <span style=text-decoration:underline>20</span>513 Auerbach, Frank    To the Studios                         Oil p…  <span style=text-decoration:underline>1</span>990</span></span>
<span><span class=c>#&gt; <span style=color:#555> 6</span>  <span style=text-decoration:underline>21</span>389 Ayres, OBE Gillian Phaëthon                               Oil p…  <span style=text-decoration:underline>1</span>990</span></span>
<span><span class=c>#&gt; <span style=color:#555> 7</span> <span style=text-decoration:underline>121</span>187 Barlow, Phyllida   Untitled                               Acryl…  <span style=text-decoration:underline>1</span>990</span></span>
<span><span class=c>#&gt; <span style=color:#555> 8</span>  <span style=text-decoration:underline>19</span>455 Baselitz, Georg    Green VIII                             Woodc…  <span style=text-decoration:underline>1</span>990</span></span>
<span><span class=c>#&gt; <span style=color:#555> 9</span>  <span style=text-decoration:underline>20</span>938 Beattie, Basil     Present Bound                          Oil p…  <span style=text-decoration:underline>1</span>990</span></span>
<span><span class=c>#&gt; <span style=color:#555>10</span> <span style=text-decoration:underline>105</span>941 Beuys, Joseph      Joseph Beuys: A Private Collection. A… Print…  <span style=text-decoration:underline>1</span>990</span></span>
<span><span class=c>#&gt; <span style=color:#555># ℹ 4,274 more rows</span></span></span>
<span></span></code></pre></div><p>But we can set <code>strings_as_factors = FALSE</code> in
<a href=https://recipes.tidymodels.org/reference/recipe.html target=_blank rel=noopener><code>recipe()</code></a> and it won&rsquo;t anymore.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nf><a href=https://recipes.tidymodels.org/reference/recipe.html>recipe</a></span><span class=o>(</span><span class=o>~</span><span class=nv>.</span>, data <span class=o>=</span> <span class=nv>tate_text</span>, strings_as_factors <span class=o>=</span> <span class=kc>FALSE</span><span class=o>)</span> <span class=o>|&gt;</span></span>
<span>  <span class=nf><a href=https://recipes.tidymodels.org/reference/prep.html>prep</a></span><span class=o>(</span><span class=o>)</span> <span class=o>|&gt;</span></span>
<span>  <span class=nf><a href=https://recipes.tidymodels.org/reference/bake.html>bake</a></span><span class=o>(</span><span class=nv>tate_text</span><span class=o>)</span></span>
<span><span class=c>#&gt; <span style=color:#555># A tibble: 4,284 × 5</span></span></span>
<span><span class=c>#&gt;        id artist             title                                  medium  year</span></span>
<span><span class=c>#&gt;     <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;fct&gt;</span>              <span style=color:#555;font-style:italic>&lt;chr&gt;</span>                                  <span style=color:#555;font-style:italic>&lt;fct&gt;</span>  <span style=color:#555;font-style:italic>&lt;dbl&gt;</span></span></span>
<span><span class=c>#&gt; <span style=color:#555> 1</span>  <span style=text-decoration:underline>21</span>926 Absalon            Proposals for a Habitat                Video…  <span style=text-decoration:underline>1</span>990</span></span>
<span><span class=c>#&gt; <span style=color:#555> 2</span>  <span style=text-decoration:underline>20</span>472 Auerbach, Frank    Michael                                Etchi…  <span style=text-decoration:underline>1</span>990</span></span>
<span><span class=c>#&gt; <span style=color:#555> 3</span>  <span style=text-decoration:underline>20</span>474 Auerbach, Frank    Geoffrey                               Etchi…  <span style=text-decoration:underline>1</span>990</span></span>
<span><span class=c>#&gt; <span style=color:#555> 4</span>  <span style=text-decoration:underline>20</span>473 Auerbach, Frank    Jake                                   Etchi…  <span style=text-decoration:underline>1</span>990</span></span>
<span><span class=c>#&gt; <span style=color:#555> 5</span>  <span style=text-decoration:underline>20</span>513 Auerbach, Frank    To the Studios                         Oil p…  <span style=text-decoration:underline>1</span>990</span></span>
<span><span class=c>#&gt; <span style=color:#555> 6</span>  <span style=text-decoration:underline>21</span>389 Ayres, OBE Gillian Phaëthon                               Oil p…  <span style=text-decoration:underline>1</span>990</span></span>
<span><span class=c>#&gt; <span style=color:#555> 7</span> <span style=text-decoration:underline>121</span>187 Barlow, Phyllida   Untitled                               Acryl…  <span style=text-decoration:underline>1</span>990</span></span>
<span><span class=c>#&gt; <span style=color:#555> 8</span>  <span style=text-decoration:underline>19</span>455 Baselitz, Georg    Green VIII                             Woodc…  <span style=text-decoration:underline>1</span>990</span></span>
<span><span class=c>#&gt; <span style=color:#555> 9</span>  <span style=text-decoration:underline>20</span>938 Beattie, Basil     Present Bound                          Oil p…  <span style=text-decoration:underline>1</span>990</span></span>
<span><span class=c>#&gt; <span style=color:#555>10</span> <span style=text-decoration:underline>105</span>941 Beuys, Joseph      Joseph Beuys: A Private Collection. A… Print…  <span style=text-decoration:underline>1</span>990</span></span>
<span><span class=c>#&gt; <span style=color:#555># ℹ 4,274 more rows</span></span></span>
<span></span></code></pre></div><p>This change should also make pragmatic sense as whether you want to turn strings into factors is something that should encoded into the recipe itself.</p><h2 id=deprecating-step_select>Deprecating <code>step_select()</code>
<a href=#deprecating-step_select><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>We have started the process of deprecating
<a href=https://recipes.tidymodels.org/reference/step_select.html target=_blank rel=noopener><code>step_select()</code></a>. Given the number of issues people are having with the step and the fact that it doesn&rsquo;t play well with workflows we think this is the right call.</p><p>There are two main use cases where
<a href=https://recipes.tidymodels.org/reference/step_select.html target=_blank rel=noopener><code>step_select()</code></a> was used: removing variables, and selecting variables. Removing variables when done with <code>-</code> in
<a href=https://recipes.tidymodels.org/reference/step_select.html target=_blank rel=noopener><code>step_select()</code></a></p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nf><a href=https://recipes.tidymodels.org/reference/recipe.html>recipe</a></span><span class=o>(</span><span class=nv>mpg</span> <span class=o>~</span> <span class=nv>.</span>, <span class=nv>mtcars</span><span class=o>)</span> <span class=o>|&gt;</span></span>
<span>  <span class=nf><a href=https://recipes.tidymodels.org/reference/step_select.html>step_select</a></span><span class=o>(</span><span class=o>-</span><span class=nf><a href=https://tidyselect.r-lib.org/reference/starts_with.html>starts_with</a></span><span class=o>(</span><span class=s>"d"</span><span class=o>)</span><span class=o>)</span> <span class=o>|&gt;</span></span>
<span>  <span class=nf><a href=https://recipes.tidymodels.org/reference/prep.html>prep</a></span><span class=o>(</span><span class=o>)</span> <span class=o>|&gt;</span></span>
<span>  <span class=nf><a href=https://recipes.tidymodels.org/reference/bake.html>bake</a></span><span class=o>(</span>new_data <span class=o>=</span> <span class=kc>NULL</span><span class=o>)</span></span>
<span><span class=c>#&gt; <span style=color:#555># A tibble: 32 × 9</span></span></span>
<span><span class=c>#&gt;      cyl    hp    wt  qsec    vs    am  gear  carb   mpg</span></span>
<span><span class=c>#&gt;    <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span></span></span>
<span><span class=c>#&gt; <span style=color:#555> 1</span>     6   110  2.62  16.5     0     1     4     4  21  </span></span>
<span><span class=c>#&gt; <span style=color:#555> 2</span>     6   110  2.88  17.0     0     1     4     4  21  </span></span>
<span><span class=c>#&gt; <span style=color:#555> 3</span>     4    93  2.32  18.6     1     1     4     1  22.8</span></span>
<span><span class=c>#&gt; <span style=color:#555> 4</span>     6   110  3.22  19.4     1     0     3     1  21.4</span></span>
<span><span class=c>#&gt; <span style=color:#555> 5</span>     8   175  3.44  17.0     0     0     3     2  18.7</span></span>
<span><span class=c>#&gt; <span style=color:#555> 6</span>     6   105  3.46  20.2     1     0     3     1  18.1</span></span>
<span><span class=c>#&gt; <span style=color:#555> 7</span>     8   245  3.57  15.8     0     0     3     4  14.3</span></span>
<span><span class=c>#&gt; <span style=color:#555> 8</span>     4    62  3.19  20       1     0     4     2  24.4</span></span>
<span><span class=c>#&gt; <span style=color:#555> 9</span>     4    95  3.15  22.9     1     0     4     2  22.8</span></span>
<span><span class=c>#&gt; <span style=color:#555>10</span>     6   123  3.44  18.3     1     0     4     4  19.2</span></span>
<span><span class=c>#&gt; <span style=color:#555># ℹ 22 more rows</span></span></span>
<span></span></code></pre></div><p>These use cases can seamlessly be converted to use
<a href=https://recipes.tidymodels.org/reference/step_rm.html target=_blank rel=noopener><code>step_rm()</code></a> without the <code>-</code> for the same result.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nf><a href=https://recipes.tidymodels.org/reference/recipe.html>recipe</a></span><span class=o>(</span><span class=nv>mpg</span> <span class=o>~</span> <span class=nv>.</span>, <span class=nv>mtcars</span><span class=o>)</span> <span class=o>|&gt;</span></span>
<span>  <span class=nf><a href=https://recipes.tidymodels.org/reference/step_rm.html>step_rm</a></span><span class=o>(</span><span class=nf><a href=https://tidyselect.r-lib.org/reference/starts_with.html>starts_with</a></span><span class=o>(</span><span class=s>"d"</span><span class=o>)</span><span class=o>)</span> <span class=o>|&gt;</span></span>
<span>  <span class=nf><a href=https://recipes.tidymodels.org/reference/prep.html>prep</a></span><span class=o>(</span><span class=o>)</span> <span class=o>|&gt;</span></span>
<span>  <span class=nf><a href=https://recipes.tidymodels.org/reference/bake.html>bake</a></span><span class=o>(</span>new_data <span class=o>=</span> <span class=kc>NULL</span><span class=o>)</span></span>
<span><span class=c>#&gt; <span style=color:#555># A tibble: 32 × 9</span></span></span>
<span><span class=c>#&gt;      cyl    hp    wt  qsec    vs    am  gear  carb   mpg</span></span>
<span><span class=c>#&gt;    <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span></span></span>
<span><span class=c>#&gt; <span style=color:#555> 1</span>     6   110  2.62  16.5     0     1     4     4  21  </span></span>
<span><span class=c>#&gt; <span style=color:#555> 2</span>     6   110  2.88  17.0     0     1     4     4  21  </span></span>
<span><span class=c>#&gt; <span style=color:#555> 3</span>     4    93  2.32  18.6     1     1     4     1  22.8</span></span>
<span><span class=c>#&gt; <span style=color:#555> 4</span>     6   110  3.22  19.4     1     0     3     1  21.4</span></span>
<span><span class=c>#&gt; <span style=color:#555> 5</span>     8   175  3.44  17.0     0     0     3     2  18.7</span></span>
<span><span class=c>#&gt; <span style=color:#555> 6</span>     6   105  3.46  20.2     1     0     3     1  18.1</span></span>
<span><span class=c>#&gt; <span style=color:#555> 7</span>     8   245  3.57  15.8     0     0     3     4  14.3</span></span>
<span><span class=c>#&gt; <span style=color:#555> 8</span>     4    62  3.19  20       1     0     4     2  24.4</span></span>
<span><span class=c>#&gt; <span style=color:#555> 9</span>     4    95  3.15  22.9     1     0     4     2  22.8</span></span>
<span><span class=c>#&gt; <span style=color:#555>10</span>     6   123  3.44  18.3     1     0     4     4  19.2</span></span>
<span><span class=c>#&gt; <span style=color:#555># ℹ 22 more rows</span></span></span>
<span></span></code></pre></div><p>For selecting variables there are two cases. The first is as a tool to select which variables to use in our model. We recommend that you use
<a href=https://dplyr.tidyverse.org/reference/select.html target=_blank rel=noopener><code>select()</code></a> to do that before passing the data into the
<a href=https://recipes.tidymodels.org/reference/recipe.html target=_blank rel=noopener><code>recipe()</code></a>. This is especially helpful since
<a href=https://www.tidyverse.org/blog/2024/07/recipes-1-1-0/#column-type-checking target=_blank rel=noopener>recipes are tighter with respect to their input types</a>, so only passing the data you need to use is helpful.</p><p>If you need to do the selection after another step takes effect you should still be able to do so, by using
<a href=https://recipes.tidymodels.org/reference/step_rm.html target=_blank rel=noopener><code>step_rm()</code></a> in the following manner.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nf>step_rm</span><span class=p>(</span><span class=n>recipe</span><span class=p>,</span> <span class=nf>all_predictors</span><span class=p>(),</span> <span class=o>-</span><span class=nf>all_of</span><span class=p>(</span><span class=o>&lt;</span><span class=n>variables</span> <span class=n>that</span> <span class=n>you</span> <span class=n>want</span> <span class=n>to</span> <span class=n>keep</span><span class=o>&gt;</span><span class=p>))</span>
</code></pre></div><h2 id=step_dummy-contrasts-argument><code>step_dummy()</code> contrasts argument
<a href=#step_dummy-contrasts-argument><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>Contrasts such as
<a href=https://rdrr.io/r/stats/contrast.html target=_blank rel=noopener><code>contr.treatment()</code></a> and
<a href=https://rdrr.io/r/stats/contrast.html target=_blank rel=noopener><code>contr.poly()</code></a> are used in
<a href=https://recipes.tidymodels.org/reference/step_dummy.html target=_blank rel=noopener><code>step_dummy()</code></a> to determine how the steps should translate categorical values into one or more numeric columns. Traditionally the contrasts were set using
<a href=https://rdrr.io/r/base/options.html target=_blank rel=noopener><code>options()</code></a> like so:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nf><a href=https://rdrr.io/r/base/options.html>options</a></span><span class=o>(</span>contrasts <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/c.html>c</a></span><span class=o>(</span>unordered <span class=o>=</span> <span class=s>"contr.poly"</span>, ordered <span class=o>=</span> <span class=s>"contr.poly"</span><span class=o>)</span><span class=o>)</span></span></code></pre></div><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nf><a href=https://recipes.tidymodels.org/reference/recipe.html>recipe</a></span><span class=o>(</span><span class=o>~</span><span class=nv>species</span> <span class=o>+</span> <span class=nv>island</span>, <span class=nv>penguins</span><span class=o>)</span> <span class=o>|&gt;</span></span>
<span>  <span class=nf><a href=https://recipes.tidymodels.org/reference/step_dummy.html>step_dummy</a></span><span class=o>(</span><span class=nf><a href=https://recipes.tidymodels.org/reference/has_role.html>all_nominal_predictors</a></span><span class=o>(</span><span class=o>)</span><span class=o>)</span> <span class=o>|&gt;</span></span>
<span>  <span class=nf><a href=https://recipes.tidymodels.org/reference/prep.html>prep</a></span><span class=o>(</span><span class=o>)</span> <span class=o>|&gt;</span></span>
<span>  <span class=nf><a href=https://recipes.tidymodels.org/reference/bake.html>bake</a></span><span class=o>(</span>new_data <span class=o>=</span> <span class=nv>penguins</span><span class=o>)</span></span>
<span><span class=c>#&gt; <span style=color:#555># A tibble: 344 × 4</span></span></span>
<span><span class=c>#&gt;    species_Chinstrap species_Gentoo island_Dream island_Torgersen</span></span>
<span><span class=c>#&gt;                <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>          <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>        <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>            <span style=color:#555;font-style:italic>&lt;dbl&gt;</span></span></span>
<span><span class=c>#&gt; <span style=color:#555> 1</span>            -<span style=color:#b00>0.707</span>          0.408        0.707            0.408</span></span>
<span><span class=c>#&gt; <span style=color:#555> 2</span>            -<span style=color:#b00>0.707</span>          0.408        0.707            0.408</span></span>
<span><span class=c>#&gt; <span style=color:#555> 3</span>            -<span style=color:#b00>0.707</span>          0.408        0.707            0.408</span></span>
<span><span class=c>#&gt; <span style=color:#555> 4</span>            -<span style=color:#b00>0.707</span>          0.408        0.707            0.408</span></span>
<span><span class=c>#&gt; <span style=color:#555> 5</span>            -<span style=color:#b00>0.707</span>          0.408        0.707            0.408</span></span>
<span><span class=c>#&gt; <span style=color:#555> 6</span>            -<span style=color:#b00>0.707</span>          0.408        0.707            0.408</span></span>
<span><span class=c>#&gt; <span style=color:#555> 7</span>            -<span style=color:#b00>0.707</span>          0.408        0.707            0.408</span></span>
<span><span class=c>#&gt; <span style=color:#555> 8</span>            -<span style=color:#b00>0.707</span>          0.408        0.707            0.408</span></span>
<span><span class=c>#&gt; <span style=color:#555> 9</span>            -<span style=color:#b00>0.707</span>          0.408        0.707            0.408</span></span>
<span><span class=c>#&gt; <span style=color:#555>10</span>            -<span style=color:#b00>0.707</span>          0.408        0.707            0.408</span></span>
<span><span class=c>#&gt; <span style=color:#555># ℹ 334 more rows</span></span></span>
<span></span></code></pre></div><p>The issue with this approach is that it pulls from
<a href=https://rdrr.io/r/base/options.html target=_blank rel=noopener><code>options()</code></a> when it needs it instead of storing the information. This means that if you put this recipe in production you will need to set the option in the production environment to match that of the training environment.</p><div class=highlight></div><p>To fix this issue we have given
<a href=https://recipes.tidymodels.org/reference/step_dummy.html target=_blank rel=noopener><code>step_dummy()</code></a> an argument <code>contrasts</code> that work in much the same way. You simply specify the contrast you want and it will be stored in the object for easy deployment.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nf><a href=https://recipes.tidymodels.org/reference/recipe.html>recipe</a></span><span class=o>(</span><span class=o>~</span><span class=nv>species</span> <span class=o>+</span> <span class=nv>island</span>, <span class=nv>penguins</span><span class=o>)</span> <span class=o>|&gt;</span></span>
<span>  <span class=nf><a href=https://recipes.tidymodels.org/reference/step_dummy.html>step_dummy</a></span><span class=o>(</span></span>
<span>    <span class=nf><a href=https://recipes.tidymodels.org/reference/has_role.html>all_nominal_predictors</a></span><span class=o>(</span><span class=o>)</span>, contrasts <span class=o>=</span> <span class=s>"contr.poly"</span><span class=o>)</span> <span class=o>|&gt;</span></span>
<span>  <span class=nf><a href=https://recipes.tidymodels.org/reference/prep.html>prep</a></span><span class=o>(</span><span class=o>)</span> <span class=o>|&gt;</span></span>
<span>  <span class=nf><a href=https://recipes.tidymodels.org/reference/bake.html>bake</a></span><span class=o>(</span>new_data <span class=o>=</span> <span class=nv>penguins</span><span class=o>)</span></span>
<span><span class=c>#&gt; <span style=color:#555># A tibble: 344 × 4</span></span></span>
<span><span class=c>#&gt;    species_Chinstrap species_Gentoo island_Dream island_Torgersen</span></span>
<span><span class=c>#&gt;                <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>          <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>        <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>            <span style=color:#555;font-style:italic>&lt;dbl&gt;</span></span></span>
<span><span class=c>#&gt; <span style=color:#555> 1</span>            -<span style=color:#b00>0.707</span>          0.408        0.707            0.408</span></span>
<span><span class=c>#&gt; <span style=color:#555> 2</span>            -<span style=color:#b00>0.707</span>          0.408        0.707            0.408</span></span>
<span><span class=c>#&gt; <span style=color:#555> 3</span>            -<span style=color:#b00>0.707</span>          0.408        0.707            0.408</span></span>
<span><span class=c>#&gt; <span style=color:#555> 4</span>            -<span style=color:#b00>0.707</span>          0.408        0.707            0.408</span></span>
<span><span class=c>#&gt; <span style=color:#555> 5</span>            -<span style=color:#b00>0.707</span>          0.408        0.707            0.408</span></span>
<span><span class=c>#&gt; <span style=color:#555> 6</span>            -<span style=color:#b00>0.707</span>          0.408        0.707            0.408</span></span>
<span><span class=c>#&gt; <span style=color:#555> 7</span>            -<span style=color:#b00>0.707</span>          0.408        0.707            0.408</span></span>
<span><span class=c>#&gt; <span style=color:#555> 8</span>            -<span style=color:#b00>0.707</span>          0.408        0.707            0.408</span></span>
<span><span class=c>#&gt; <span style=color:#555> 9</span>            -<span style=color:#b00>0.707</span>          0.408        0.707            0.408</span></span>
<span><span class=c>#&gt; <span style=color:#555>10</span>            -<span style=color:#b00>0.707</span>          0.408        0.707            0.408</span></span>
<span><span class=c>#&gt; <span style=color:#555># ℹ 334 more rows</span></span></span>
<span></span></code></pre></div><p>If you are using a contrasts from an external package such as
<a href=https://hardhat.tidymodels.org/reference/contr_one_hot.html target=_blank rel=noopener><code>hardhat::contr_one_hot()</code></a> you will need to have the package loaded in the environments you are working in with
<a href=https://github.com/tidymodels/hardhat target=_blank rel=noopener><code>library(hardhat)</code></a> and setting <code>contrasts = "contr_one_hot"</code>. You will also need to call
<a href=https://github.com/tidymodels/hardhat target=_blank rel=noopener><code>library(hardhat)</code></a> in any production environments you are using this recipe.</p><h2 id=tidyselect-can-be-used-everywhere>tidyselect can be used everywhere
<a href=#tidyselect-can-be-used-everywhere><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>Several steps such as
<a href=https://recipes.tidymodels.org/reference/step_pls.html target=_blank rel=noopener><code>step_pls()</code></a> and
<a href=https://recipes.tidymodels.org/reference/step_impute_bag.html target=_blank rel=noopener><code>step_impute_bag()</code></a> require the selection of more than just the affected columns.
<a href=https://recipes.tidymodels.org/reference/step_pls.html target=_blank rel=noopener><code>step_pls()</code></a> needs you to select an <code>outcome</code> variable and
<a href=https://recipes.tidymodels.org/reference/step_impute_bag.html target=_blank rel=noopener><code>step_impute_bag()</code></a> needs you to select which variables to impute with, <code>impute_with</code>, if you don&rsquo;t want to use all predictors. Previously these needed to be strings or use special selectors like
<a href=https://recipes.tidymodels.org/reference/step_impute_bag.html target=_blank rel=noopener><code>imp_vars()</code></a>. You don&rsquo;t have to do that anymore. You can now use tidyselect in these arguments too.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nf><a href=https://recipes.tidymodels.org/reference/recipe.html>recipe</a></span><span class=o>(</span><span class=nv>mpg</span> <span class=o>~</span> <span class=nv>.</span>, <span class=nv>mtcars</span><span class=o>)</span> <span class=o>|&gt;</span></span>
<span>  <span class=nf><a href=https://recipes.tidymodels.org/reference/step_pls.html>step_pls</a></span><span class=o>(</span><span class=nf><a href=https://recipes.tidymodels.org/reference/has_role.html>all_predictors</a></span><span class=o>(</span><span class=o>)</span>, outcome <span class=o>=</span> <span class=nv>mpg</span><span class=o>)</span> <span class=o>|&gt;</span></span>
<span>  <span class=nf><a href=https://recipes.tidymodels.org/reference/prep.html>prep</a></span><span class=o>(</span><span class=o>)</span> <span class=o>|&gt;</span></span>
<span>  <span class=nf><a href=https://recipes.tidymodels.org/reference/bake.html>bake</a></span><span class=o>(</span>new_data <span class=o>=</span> <span class=nv>mtcars</span><span class=o>)</span></span>
<span><span class=c>#&gt; <span style=color:#555># A tibble: 32 × 3</span></span></span>
<span><span class=c>#&gt;      mpg   PLS1   PLS2</span></span>
<span><span class=c>#&gt;    <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>  <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>  <span style=color:#555;font-style:italic>&lt;dbl&gt;</span></span></span>
<span><span class=c>#&gt; <span style=color:#555> 1</span>  21    0.693  0.895</span></span>
<span><span class=c>#&gt; <span style=color:#555> 2</span>  21    0.650  0.654</span></span>
<span><span class=c>#&gt; <span style=color:#555> 3</span>  22.8  2.78   0.378</span></span>
<span><span class=c>#&gt; <span style=color:#555> 4</span>  21.4  0.210 -<span style=color:#b00>0.368</span></span></span>
<span><span class=c>#&gt; <span style=color:#555> 5</span>  18.7 -<span style=color:#b00>1.95</span>   0.845</span></span>
<span><span class=c>#&gt; <span style=color:#555> 6</span>  18.1  0.137 -<span style=color:#b00>0.624</span></span></span>
<span><span class=c>#&gt; <span style=color:#555> 7</span>  14.3 -<span style=color:#b00>2.77</span>   0.364</span></span>
<span><span class=c>#&gt; <span style=color:#555> 8</span>  24.4  1.81  -<span style=color:#b00>1.30</span> </span></span>
<span><span class=c>#&gt; <span style=color:#555> 9</span>  22.8  2.12  -<span style=color:#b00>1.95</span> </span></span>
<span><span class=c>#&gt; <span style=color:#555>10</span>  19.2  0.531 -<span style=color:#b00>1.51</span> </span></span>
<span><span class=c>#&gt; <span style=color:#555># ℹ 22 more rows</span></span></span>
<span></span></code></pre></div><p>For arguments that allow for multiple selections now work with recipes selectors like
<a href=https://recipes.tidymodels.org/reference/has_role.html target=_blank rel=noopener><code>all_numeric_predictors()</code></a> and
<a href=https://recipes.tidymodels.org/reference/has_role.html target=_blank rel=noopener><code>has_role()</code></a>.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nf><a href=https://recipes.tidymodels.org/reference/recipe.html>recipe</a></span><span class=o>(</span><span class=nv>mpg</span> <span class=o>~</span> <span class=nv>.</span>, <span class=nv>mtcars</span><span class=o>)</span> <span class=o>|&gt;</span></span>
<span>  <span class=nf><a href=https://recipes.tidymodels.org/reference/step_impute_bag.html>step_impute_bag</a></span><span class=o>(</span><span class=nf><a href=https://recipes.tidymodels.org/reference/has_role.html>all_predictors</a></span><span class=o>(</span><span class=o>)</span>, impute_with <span class=o>=</span> <span class=nf><a href=https://recipes.tidymodels.org/reference/has_role.html>has_role</a></span><span class=o>(</span><span class=s>"predictor"</span><span class=o>)</span><span class=o>)</span> <span class=o>|&gt;</span></span>
<span>  <span class=nf><a href=https://recipes.tidymodels.org/reference/prep.html>prep</a></span><span class=o>(</span><span class=o>)</span> <span class=o>|&gt;</span></span>
<span>  <span class=nf><a href=https://recipes.tidymodels.org/reference/bake.html>bake</a></span><span class=o>(</span>new_data <span class=o>=</span> <span class=nv>mtcars</span><span class=o>)</span></span>
<span><span class=c>#&gt; <span style=color:#555># A tibble: 32 × 11</span></span></span>
<span><span class=c>#&gt;      cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb   mpg</span></span>
<span><span class=c>#&gt;    <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span></span></span>
<span><span class=c>#&gt; <span style=color:#555> 1</span>     6  160    110  3.9   2.62  16.5     0     1     4     4  21  </span></span>
<span><span class=c>#&gt; <span style=color:#555> 2</span>     6  160    110  3.9   2.88  17.0     0     1     4     4  21  </span></span>
<span><span class=c>#&gt; <span style=color:#555> 3</span>     4  108     93  3.85  2.32  18.6     1     1     4     1  22.8</span></span>
<span><span class=c>#&gt; <span style=color:#555> 4</span>     6  258    110  3.08  3.22  19.4     1     0     3     1  21.4</span></span>
<span><span class=c>#&gt; <span style=color:#555> 5</span>     8  360    175  3.15  3.44  17.0     0     0     3     2  18.7</span></span>
<span><span class=c>#&gt; <span style=color:#555> 6</span>     6  225    105  2.76  3.46  20.2     1     0     3     1  18.1</span></span>
<span><span class=c>#&gt; <span style=color:#555> 7</span>     8  360    245  3.21  3.57  15.8     0     0     3     4  14.3</span></span>
<span><span class=c>#&gt; <span style=color:#555> 8</span>     4  147.    62  3.69  3.19  20       1     0     4     2  24.4</span></span>
<span><span class=c>#&gt; <span style=color:#555> 9</span>     4  141.    95  3.92  3.15  22.9     1     0     4     2  22.8</span></span>
<span><span class=c>#&gt; <span style=color:#555>10</span>     6  168.   123  3.92  3.44  18.3     1     0     4     4  19.2</span></span>
<span><span class=c>#&gt; <span style=color:#555># ℹ 22 more rows</span></span></span>
<span></span></code></pre></div><p>These changes are backwards compatible meaning that the old ways still work with minimal warnings.</p><h2 id=step_impute_bag-now-takes-up-less-memory><code>step_impute_bag()</code> now takes up less memory
<a href=#step_impute_bag-now-takes-up-less-memory><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>We have another benefit for users of
<a href=https://recipes.tidymodels.org/reference/step_impute_bag.html target=_blank rel=noopener><code>step_impute_bag()</code></a>. For each variable it imputes on, it fits a bagged tree model, which is then used to predict with for imputation. It was noticed that these models had a larger memory footprint than was needed. This has been remedied, so now there should be a noticeable decrease in size for recipes with
<a href=https://recipes.tidymodels.org/reference/step_impute_bag.html target=_blank rel=noopener><code>step_impute_bag()</code></a>.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nv>rec</span> <span class=o>&lt;-</span> <span class=nf><a href=https://recipes.tidymodels.org/reference/recipe.html>recipe</a></span><span class=o>(</span><span class=nv>Sale_Price</span> <span class=o>~</span> <span class=nv>.</span>, data <span class=o>=</span> <span class=nv>ames</span><span class=o>)</span> <span class=o>|&gt;</span></span>
<span>  <span class=nf><a href=https://recipes.tidymodels.org/reference/step_impute_bag.html>step_impute_bag</a></span><span class=o>(</span><span class=nf><a href=https://tidyselect.r-lib.org/reference/starts_with.html>starts_with</a></span><span class=o>(</span><span class=s>"Lot_"</span><span class=o>)</span>, impute_with <span class=o>=</span> <span class=nf><a href=https://recipes.tidymodels.org/reference/has_role.html>all_numeric_predictors</a></span><span class=o>(</span><span class=o>)</span><span class=o>)</span> <span class=o>|&gt;</span></span>
<span>  <span class=nf><a href=https://recipes.tidymodels.org/reference/prep.html>prep</a></span><span class=o>(</span><span class=o>)</span></span>
<span></span>
<span><span class=nf>lobstr</span><span class=nf>::</span><span class=nf><a href=https://lobstr.r-lib.org/reference/obj_size.html>obj_size</a></span><span class=o>(</span><span class=nv>rec</span><span class=o>)</span></span>
<span><span class=c>#&gt; 20.23 MB</span></span>
<span></span></code></pre></div><p>This recipe took up over <code>75 MB</code> and now takes up <code>20 MB</code>.</p><h2 id=acknowledgements>Acknowledgements
<a href=#acknowledgements><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>Many thanks to all the people who contributed to recipes since the last release!</p><p><a href=https://github.com/chillerb target=_blank rel=noopener>@chillerb</a>,
<a href=https://github.com/dshemetov target=_blank rel=noopener>@dshemetov</a>,
<a href=https://github.com/EmilHvitfeldt target=_blank rel=noopener>@EmilHvitfeldt</a>,
<a href=https://github.com/kevbaer target=_blank rel=noopener>@kevbaer</a>,
<a href=https://github.com/nhward target=_blank rel=noopener>@nhward</a>,
<a href=https://github.com/regisely target=_blank rel=noopener>@regisely</a>, and
<a href=https://github.com/topepo target=_blank rel=noopener>@topepo</a>.</p></div></div><div class=column25><div class="section hideOnMobile"><div class=sectionTitle>Contents</div><nav id=TableOfContents><ul><li><a href=#strings_as_factors><code>strings_as_factors</code></a></li><li><a href=#deprecating-step_select>Deprecating <code>step_select()</code></a></li><li><a href=#step_dummy-contrasts-argument><code>step_dummy()</code> contrasts argument</a></li><li><a href=#tidyselect-can-be-used-everywhere>tidyselect can be used everywhere</a></li><li><a href=#step_impute_bag-now-takes-up-less-memory><code>step_impute_bag()</code> now takes up less memory</a></li><li><a href=#acknowledgements>Acknowledgements</a></li></ul></nav></div><div class=section></div></div></div></div></div><div id=rStudioFooter class=band><div class=bandContent><div id=copyright>The tidyverse is proudly supported by <a class=rstudioLogo href=https://posit.co/ aria-label="Posit Homepage"></a></div><div id=logos><a href=https://www.tidyverse.org/google_privacy_policy>Privacy policy</a>
<a href=https://github.com/tidyverse class="footerLogo gitHub" aria-label="Tidyverse GitHub organization"></a><a href=https://twitter.com/hashtag/rstats class="footerLogo twitter" aria-label="rstats hashtag on twitter.com"></a></div></div></div></div></div><script type=application/javascript>var dnt=(navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack);var doNotTrack=(dnt=="1"||dnt=="yes");if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');if(window.sessionStorage){var GA_SESSION_STORAGE_KEY='ga:clientId';ga('create','UA-115082821-1',{'storage':'none','clientId':sessionStorage.getItem(GA_SESSION_STORAGE_KEY)});ga(function(tracker){sessionStorage.setItem(GA_SESSION_STORAGE_KEY,tracker.get('clientId'));});}
ga('set','anonymizeIp',true);ga('send','pageview');}</script></body></html></div></div></body></html>