<!doctype html><html><head><!doctype html><html lang=en-us><link rel=stylesheet href=/css/fonts.css><link rel=stylesheet href=/css/main-site.css><link rel=stylesheet href=/css/fa5-all.css><style type=text/css>body{background-color:#fff;color:#1a1917}a{color:#38577f}a:hover{color:#42709b}a:focus{outline-color:#42709b}.column25-left .sectionTitle a:hover:not(.current),.column16-left .sectionTitle a:hover:not(.current){color:#1a1917}.icon-attribution,.icon-attribution a{color:#1a1917;opacity:75%}#homeContent .band.first{background-color:#fff}#homeContent .band.second{background-color:#fdeba4}#homeContent .band.third{background-color:#fff}#rStudioHeader{background-color:#1a162d;color:#fff}#rStudioHeader .productName{color:#fff}#rStudioHeader .productName:hover,#rStudioHeader .productName:focus{color:#fdeba4}#rStudioHeader #menu .menuItem.a{background-color:#75aadb;color:#fff}#rStudioHeader #menu .menuItem:hover{background-color:#484557;color:#fff}#rStudioHeader #menu .menuItem.current{background-color:#fff;color:#1a162d;text-decoration:none}#rStudioFooter.band{background-color:#767381}#rStudioFooter .bandContent #copyright{color:#e3eef8}table tbody tr:nth-child(even){background-color:#f7faff}table tbody tr:nth-child(odd){background-color:#fff}.latest{border-top:.5em solid <no value>}.event{-moz-box-shadow:0 0 0 0 rgba(0,0,0,.1);-webkit-box-shadow:0 0 0 0 rgba(0,0,0,.1);box-shadow:0 0 0 0 rgba(0,0,0,.1)}.section .event{background-color:#eab0c41a}.section .event{border-top:7pt solid #a19ea936}.section .event a{color:#1a162d}.section .event{color:#404040}</style><link rel=stylesheet href=/css/tidyverse.css><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Hugo 0.71.1"><title>duckplyr fully joins the tidyverse!</title><meta property="og:title" content="duckplyr fully joins the tidyverse!"><meta property="og:description" content="duckplyr 1.1.0 is on CRAN! A drop-in replacement for dplyr, powered by DuckDB for speed. It is the most dplyr-like of dplyr backends."><meta property="og:type" content="article"><meta property="og:url" content="https://www.tidyverse.org/blog/2025/06/duckplyr-1-1-0/"><meta property="twitter:card" content="summary_large_image"><meta property="og:title" content="duckplyr fully joins the tidyverse! - Tidyverse"><meta property="description" content="duckplyr 1.1.0 is on CRAN! A drop-in replacement for dplyr, powered by DuckDB for speed. It is the most dplyr-like of dplyr backends."><meta property="og:description" content="duckplyr 1.1.0 is on CRAN! A drop-in replacement for dplyr, powered by DuckDB for speed. It is the most dplyr-like of dplyr backends."><meta property="og:image" content="https://www.tidyverse.org/blog/2025/06/duckplyr-1-1-0/thumbnail-sq.jpg"><meta name=twitter:image content="https://www.tidyverse.org/blog/2025/06/duckplyr-1-1-0/thumbnail-wd.jpg"><link rel=apple-touch-icon sizes=180x180 href=/images/favicons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/images/favicons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/images/favicons/favicon-16x16.png><link rel=manifest href=/images/favicons/site.webmanifest><link rel=mask-icon href=/images/favicons/safari-pinned-tab.svg><link rel="shortcut icon" href=/images/favicons/favicon.ico><meta name=msapplication-TileColor content="#da532c"><meta name=msapplication-config href=/images/favicons/browserconfig.xml><script type=text/javascript src=/js/jquery-3.5.1.min.js></script><script type=text/javascript src=/js/site.js></script><link rel=icon href=/images/favicon.ico><script type=text/javascript src=/js/clipboard.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin=anonymous></script><script defer data-domain=tidyverse.org,all.tidyverse.org src=https://plausible.io/js/plausible.js></script></head><body><div id=appTidyverseSite class="shrinkHeader alwaysShrinkHeader"><div id=main><div id=rStudioHeader><nav class=band><div class="innards bandContent"><div><a class=productName href=/>Tidyverse</a></div><div id=menu><div id=menuToggler></div><div id=menuItems><a class=menuItem href=/packages/>Packages</a>
<a class="menuItem current" href=/blog/>Blog</a>
<a class=menuItem href=/learn/>Learn</a>
<a class=menuItem href=/help/>Help</a>
<a class=menuItem href=/contribute/>Contribute</a></div></div></div></nav></div><main><div class="band padForHeader pushFooter"><div class=bandContent><div class="full splitColumns withMobileMargins"><div class=column75><h1 class=article-title>duckplyr fully joins the tidyverse!</h1><div class=article-header aria-hidden=true><div class=photo><img src=/blog/2025/06/duckplyr-1-1-0/thumbnail-wd.jpg></div><div class=photoCredit>Photo by <a href=https://www.pexels.com/photo/a-mallard-duck-on-water-6918877/>Kiril Gruev</a></div></div><span class=article-date><i class="fas fa-calendar-day fa-fw"></i>&nbsp;&nbsp;2025/06/19</span><p style=margin-bottom:.5em;margin-top:.85em><i class="fas fa-tags"></i>&nbsp;
<a href=/tags/dplyr/>dplyr</a>,
<a href=/tags/duckplyr/>duckplyr</a>,
<a href=/tags/tidyverse/>tidyverse</a></p><p style=margin-top:.5em><i class="fas fa-user-circle fa-fw"></i>&nbsp;
Kirill Müller and Maëlle Salmon</p><div class=article-content><p>We&rsquo;re well chuffed to announce the release of
<a href=https://duckplyr.tidyverse.org target=_blank rel=noopener>duckplyr</a> 1.1.0. This is a dplyr backend powered by
<a href=https://duckdb.org/ target=_blank rel=noopener>DuckDB</a>, a fast in-memory analytical database system<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>. duckplyr uses the power of DuckDB for impressive performance where it can, and seemlessly falls back to R where it can&rsquo;t. You can install it from CRAN with:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nf><a href=https://rdrr.io/r/utils/install.packages.html>install.packages</a></span><span class=o>(</span><span class=s>"duckplyr"</span><span class=o>)</span></span></code></pre></div><p>This article shows how duckplyr can be used instead of dplyr, explain how you can help improve the package, and share a selection of further resources.</p><h2 id=a-drop-in-replacement-for-dplyr>A drop-in replacement for dplyr
<a href=#a-drop-in-replacement-for-dplyr><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>Imagine you have to wrangle a huge dataset, like this one from the
<a href=https://duckdb.org/2024/04/02/duckplyr.html#benchmark-tpc-h-q1 target=_blank rel=noopener>TPC-H benchmark</a>, a famous database benchmarking dataset.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nv>lineitem_tbl</span> <span class=o>&lt;-</span> <span class=nf>duckdb</span><span class=nf>:::</span><span class=nf>sql</span><span class=o>(</span><span class=s>"INSTALL tpch; LOAD tpch; CALL dbgen(sf=1); FROM lineitem;"</span><span class=o>)</span></span>
<span><span class=nv>lineitem_tbl</span> <span class=o>&lt;-</span> <span class=nf>tibble</span><span class=nf>::</span><span class=nf><a href=https://tibble.tidyverse.org/reference/as_tibble.html>as_tibble</a></span><span class=o>(</span><span class=nv>lineitem_tbl</span><span class=o>)</span></span>
<span><span class=nf>dplyr</span><span class=nf>::</span><span class=nf><a href=https://pillar.r-lib.org/reference/glimpse.html>glimpse</a></span><span class=o>(</span><span class=nv>lineitem_tbl</span><span class=o>)</span></span>
<span><span class=c>#&gt; Rows: 6,001,215</span></span>
<span><span class=c>#&gt; Columns: 16</span></span>
<span><span class=c>#&gt; $ <span style=font-weight:700>l_orderkey     </span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> 1<span style=color:#555>, </span>1<span style=color:#555>, </span>1<span style=color:#555>, </span>1<span style=color:#555>, </span>1<span style=color:#555>, </span>1<span style=color:#555>, </span>2<span style=color:#555>, </span>3<span style=color:#555>, </span>3<span style=color:#555>, </span>3<span style=color:#555>, </span>3<span style=color:#555>, </span>3<span style=color:#555>, </span>3<span style=color:#555>, </span>4<span style=color:#555>, </span>5<span style=color:#555>, </span>5<span style=color:#555>, </span>5<span style=color:#555>, </span>6<span style=color:#555>, </span>…</span></span>
<span><span class=c>#&gt; $ <span style=font-weight:700>l_partkey      </span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> 155190<span style=color:#555>, </span>67310<span style=color:#555>, </span>63700<span style=color:#555>, </span>2132<span style=color:#555>, </span>24027<span style=color:#555>, </span>15635<span style=color:#555>, </span>106170<span style=color:#555>, </span>4297…</span></span>
<span><span class=c>#&gt; $ <span style=font-weight:700>l_suppkey      </span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> 7706<span style=color:#555>, </span>7311<span style=color:#555>, </span>3701<span style=color:#555>, </span>4633<span style=color:#555>, </span>1534<span style=color:#555>, </span>638<span style=color:#555>, </span>1191<span style=color:#555>, </span>1798<span style=color:#555>, </span>6540<span style=color:#555>, </span>3…</span></span>
<span><span class=c>#&gt; $ <span style=font-weight:700>l_linenumber   </span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> 1<span style=color:#555>, </span>2<span style=color:#555>, </span>3<span style=color:#555>, </span>4<span style=color:#555>, </span>5<span style=color:#555>, </span>6<span style=color:#555>, </span>1<span style=color:#555>, </span>1<span style=color:#555>, </span>2<span style=color:#555>, </span>3<span style=color:#555>, </span>4<span style=color:#555>, </span>5<span style=color:#555>, </span>6<span style=color:#555>, </span>1<span style=color:#555>, </span>1<span style=color:#555>, </span>2<span style=color:#555>, </span>3<span style=color:#555>, </span>1<span style=color:#555>, </span>…</span></span>
<span><span class=c>#&gt; $ <span style=font-weight:700>l_quantity     </span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> 17<span style=color:#555>, </span>36<span style=color:#555>, </span>8<span style=color:#555>, </span>28<span style=color:#555>, </span>24<span style=color:#555>, </span>32<span style=color:#555>, </span>38<span style=color:#555>, </span>45<span style=color:#555>, </span>49<span style=color:#555>, </span>27<span style=color:#555>, </span>2<span style=color:#555>, </span>28<span style=color:#555>, </span>26<span style=color:#555>, </span>30<span style=color:#555>, </span>…</span></span>
<span><span class=c>#&gt; $ <span style=font-weight:700>l_extendedprice</span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> 21168.23<span style=color:#555>, </span>45983.16<span style=color:#555>, </span>13309.60<span style=color:#555>, </span>28955.64<span style=color:#555>, </span>22824.48<span style=color:#555>, </span>4962…</span></span>
<span><span class=c>#&gt; $ <span style=font-weight:700>l_discount     </span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> 0.04<span style=color:#555>, </span>0.09<span style=color:#555>, </span>0.10<span style=color:#555>, </span>0.09<span style=color:#555>, </span>0.10<span style=color:#555>, </span>0.07<span style=color:#555>, </span>0.00<span style=color:#555>, </span>0.06<span style=color:#555>, </span>0.10<span style=color:#555>, </span>…</span></span>
<span><span class=c>#&gt; $ <span style=font-weight:700>l_tax          </span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> 0.02<span style=color:#555>, </span>0.06<span style=color:#555>, </span>0.02<span style=color:#555>, </span>0.06<span style=color:#555>, </span>0.04<span style=color:#555>, </span>0.02<span style=color:#555>, </span>0.05<span style=color:#555>, </span>0.00<span style=color:#555>, </span>0.00<span style=color:#555>, </span>…</span></span>
<span><span class=c>#&gt; $ <span style=font-weight:700>l_returnflag   </span> <span style=color:#555;font-style:italic>&lt;chr&gt;</span> "N"<span style=color:#555>, </span>"N"<span style=color:#555>, </span>"N"<span style=color:#555>, </span>"N"<span style=color:#555>, </span>"N"<span style=color:#555>, </span>"N"<span style=color:#555>, </span>"N"<span style=color:#555>, </span>"R"<span style=color:#555>, </span>"R"<span style=color:#555>, </span>"A"<span style=color:#555>, </span>"A"<span style=color:#555>,</span>…</span></span>
<span><span class=c>#&gt; $ <span style=font-weight:700>l_linestatus   </span> <span style=color:#555;font-style:italic>&lt;chr&gt;</span> "O"<span style=color:#555>, </span>"O"<span style=color:#555>, </span>"O"<span style=color:#555>, </span>"O"<span style=color:#555>, </span>"O"<span style=color:#555>, </span>"O"<span style=color:#555>, </span>"O"<span style=color:#555>, </span>"F"<span style=color:#555>, </span>"F"<span style=color:#555>, </span>"F"<span style=color:#555>, </span>"F"<span style=color:#555>,</span>…</span></span>
<span><span class=c>#&gt; $ <span style=font-weight:700>l_shipdate     </span> <span style=color:#555;font-style:italic>&lt;date&gt;</span> 1996-03-13<span style=color:#555>, </span>1996-04-12<span style=color:#555>, </span>1996-01-29<span style=color:#555>, </span>1996-04-21<span style=color:#555>, </span>1996-…</span></span>
<span><span class=c>#&gt; $ <span style=font-weight:700>l_commitdate   </span> <span style=color:#555;font-style:italic>&lt;date&gt;</span> 1996-02-12<span style=color:#555>, </span>1996-02-28<span style=color:#555>, </span>1996-03-05<span style=color:#555>, </span>1996-03-30<span style=color:#555>, </span>1996-…</span></span>
<span><span class=c>#&gt; $ <span style=font-weight:700>l_receiptdate  </span> <span style=color:#555;font-style:italic>&lt;date&gt;</span> 1996-03-22<span style=color:#555>, </span>1996-04-20<span style=color:#555>, </span>1996-01-31<span style=color:#555>, </span>1996-05-16<span style=color:#555>, </span>1996-…</span></span>
<span><span class=c>#&gt; $ <span style=font-weight:700>l_shipinstruct </span> <span style=color:#555;font-style:italic>&lt;chr&gt;</span> "DELIVER IN PERSON"<span style=color:#555>, </span>"TAKE BACK RETURN"<span style=color:#555>, </span>"TAKE BACK RE…</span></span>
<span><span class=c>#&gt; $ <span style=font-weight:700>l_shipmode     </span> <span style=color:#555;font-style:italic>&lt;chr&gt;</span> "TRUCK"<span style=color:#555>, </span>"MAIL"<span style=color:#555>, </span>"REG AIR"<span style=color:#555>, </span>"AIR"<span style=color:#555>, </span>"FOB"<span style=color:#555>, </span>"MAIL"<span style=color:#555>, </span>"RAI…</span></span>
<span><span class=c>#&gt; $ <span style=font-weight:700>l_comment      </span> <span style=color:#555;font-style:italic>&lt;chr&gt;</span> "to beans x-ray carefull"<span style=color:#555>, </span>" according to the final fo…</span></span>
<span></span></code></pre></div><p>To work with this in duckplyr instead of dplyr, all you need to do is load duckplyr:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=kr><a href=https://rdrr.io/r/base/library.html>library</a></span><span class=o>(</span><span class=nv><a href=https://duckplyr.tidyverse.org>duckplyr</a></span><span class=o>)</span></span>
<span><span class=c>#&gt; Loading required package: dplyr</span></span>
<span></span><span><span class=c>#&gt; The <span style=color:#00b>duckplyr</span> package is configured to fall back to <span style=color:#00b>dplyr</span> when it encounters an incompatibility.</span></span>
<span><span class=c>#&gt; Fallback events can be collected and uploaded for analysis to guide future development. By</span></span>
<span><span class=c>#&gt; default, data will be collected but no data will be uploaded.</span></span>
<span><span class=c>#&gt; <span style=color:#0bb>ℹ</span> Automatic fallback uploading is not controlled and therefore disabled, see</span></span>
<span><span class=c>#&gt;   `?duckplyr::fallback()`.</span></span>
<span><span class=c>#&gt; <span style=color:#0b0>✔</span> Number of reports ready for upload: <span style=font-weight:700>4</span>.</span></span>
<span><span class=c>#&gt; → Review with `duckplyr::fallback_review()`, upload with `duckplyr::fallback_upload()`.</span></span>
<span><span class=c>#&gt; <span style=color:#0bb>ℹ</span> <span style=color:#555>Configure automatic uploading with `duckplyr::fallback_config()`.</span></span></span>
<span></span><span><span class=c>#&gt; <span style=color:#0b0>✔</span> Overwriting <span style=color:#00b>dplyr</span> methods with <span style=color:#00b>duckplyr</span> methods.</span></span>
<span><span class=c>#&gt; <span style=color:#0bb>ℹ</span> Turn off with `duckplyr::methods_restore()`.</span></span>
<span></span></code></pre></div><p>Now we can express the well-known (at least in the database community!) &ldquo;TPC-H benchmark query 1&rdquo; in dplyr syntax and execute it in DuckDB via duckplyr.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nv>tpch_dplyr</span> <span class=o>&lt;-</span> <span class=kr>function</span><span class=o>(</span><span class=nv>lineitem</span><span class=o>)</span> <span class=o>&#123;</span></span>
<span>  <span class=nv>lineitem</span> <span class=o>|&gt;</span></span>
<span>    <span class=nf><a href=https://dplyr.tidyverse.org/reference/filter.html>filter</a></span><span class=o>(</span><span class=nv>l_shipdate</span> <span class=o>&lt;=</span> <span class=o>!</span><span class=o>!</span><span class=nf><a href=https://rdrr.io/r/base/as.Date.html>as.Date</a></span><span class=o>(</span><span class=s>"1998-09-02"</span><span class=o>)</span><span class=o>)</span> <span class=o>|&gt;</span></span>
<span>    <span class=nf><a href=https://dplyr.tidyverse.org/reference/summarise.html>summarise</a></span><span class=o>(</span></span>
<span>      sum_qty <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/sum.html>sum</a></span><span class=o>(</span><span class=nv>l_quantity</span><span class=o>)</span>,</span>
<span>      sum_base_price <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/sum.html>sum</a></span><span class=o>(</span><span class=nv>l_extendedprice</span><span class=o>)</span>,</span>
<span>      sum_disc_price <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/sum.html>sum</a></span><span class=o>(</span><span class=nv>l_extendedprice</span> <span class=o>*</span> <span class=o>(</span><span class=m>1</span> <span class=o>-</span> <span class=nv>l_discount</span><span class=o>)</span><span class=o>)</span>,</span>
<span>      sum_charge <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/sum.html>sum</a></span><span class=o>(</span><span class=nv>l_extendedprice</span> <span class=o>*</span> <span class=o>(</span><span class=m>1</span> <span class=o>-</span> <span class=nv>l_discount</span><span class=o>)</span> <span class=o>*</span> <span class=o>(</span><span class=m>1</span> <span class=o>+</span> <span class=nv>l_tax</span><span class=o>)</span><span class=o>)</span>,</span>
<span>      avg_qty <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/mean.html>mean</a></span><span class=o>(</span><span class=nv>l_quantity</span><span class=o>)</span>,</span>
<span>      avg_price <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/mean.html>mean</a></span><span class=o>(</span><span class=nv>l_extendedprice</span><span class=o>)</span>,</span>
<span>      avg_disc <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/mean.html>mean</a></span><span class=o>(</span><span class=nv>l_discount</span><span class=o>)</span>,</span>
<span>      count_order <span class=o>=</span> <span class=nf><a href=https://dplyr.tidyverse.org/reference/context.html>n</a></span><span class=o>(</span><span class=o>)</span>,</span>
<span>      .by <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/c.html>c</a></span><span class=o>(</span><span class=nv>l_returnflag</span>, <span class=nv>l_linestatus</span><span class=o>)</span></span>
<span>    <span class=o>)</span> <span class=o>|&gt;</span></span>
<span>    <span class=nf><a href=https://dplyr.tidyverse.org/reference/arrange.html>arrange</a></span><span class=o>(</span><span class=nv>l_returnflag</span>, <span class=nv>l_linestatus</span><span class=o>)</span></span>
<span><span class=o>&#125;</span></span>
<span></span>
<span><span class=nf>tpch_dplyr</span><span class=o>(</span><span class=nv>lineitem_tbl</span><span class=o>)</span></span>
<span><span class=c>#&gt; <span style=color:#555># A tibble: 4 × 10</span></span></span>
<span><span class=c>#&gt;   <span style=font-weight:700>l_returnflag</span> <span style=font-weight:700>l_linestatus</span>  <span style=font-weight:700>sum_qty</span> <span style=font-weight:700>sum_base_price</span> <span style=font-weight:700>sum_disc_price</span>    <span style=font-weight:700>sum_charge</span></span></span>
<span><span class=c>#&gt;   <span style=color:#555;font-style:italic>&lt;chr&gt;</span>        <span style=color:#555;font-style:italic>&lt;chr&gt;</span>           <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>          <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>          <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>         <span style=color:#555;font-style:italic>&lt;dbl&gt;</span></span></span>
<span><span class=c>#&gt; <span style=color:#555>1</span> A            F            37<span style=text-decoration:underline>734</span>107   <span style=text-decoration:underline>56</span>586<span style=text-decoration:underline>554</span>401.   <span style=text-decoration:underline>53</span>758<span style=text-decoration:underline>257</span>135.  <span style=text-decoration:underline>55</span>909<span style=text-decoration:underline>065</span>223.</span></span>
<span><span class=c>#&gt; <span style=color:#555>2</span> N            F              <span style=text-decoration:underline>991</span>417    <span style=text-decoration:underline>1</span>487<span style=text-decoration:underline>504</span>710.    <span style=text-decoration:underline>1</span>413<span style=text-decoration:underline>082</span>168.   <span style=text-decoration:underline>1</span>469<span style=text-decoration:underline>649</span>223.</span></span>
<span><span class=c>#&gt; <span style=color:#555>3</span> N            O            74<span style=text-decoration:underline>476</span>040  <span style=text-decoration:underline>111</span>701<span style=text-decoration:underline>729</span>698.  <span style=text-decoration:underline>106</span>118<span style=text-decoration:underline>230</span>308. <span style=text-decoration:underline>110</span>367<span style=text-decoration:underline>043</span>872.</span></span>
<span><span class=c>#&gt; <span style=color:#555>4</span> R            F            37<span style=text-decoration:underline>719</span>753   <span style=text-decoration:underline>56</span>568<span style=text-decoration:underline>041</span>381.   <span style=text-decoration:underline>53</span>741<span style=text-decoration:underline>292</span>685.  <span style=text-decoration:underline>55</span>889<span style=text-decoration:underline>619</span>120.</span></span>
<span><span class=c>#&gt; <span style=color:#555># ℹ 4 more variables: </span><span style=color:#555;font-weight:700>avg_qty</span><span style=color:#555> &lt;dbl&gt;, </span><span style=color:#555;font-weight:700>avg_price</span><span style=color:#555> &lt;dbl&gt;, </span><span style=color:#555;font-weight:700>avg_disc</span><span style=color:#555> &lt;dbl&gt;,</span></span></span>
<span><span class=c>#&gt; <span style=color:#555>#   </span><span style=color:#555;font-weight:700>count_order</span><span style=color:#555> &lt;int&gt;</span></span></span>
<span></span></code></pre></div><p>Like other dplyr backends such as dtplyr and dbplyr, duckplyr gives you higher performance without learning a different syntax. Unlike other dplyr backends, duckplyr does not require you to change existing code or learn specific idiosyncrasies. Not only is the syntax the same, the semantics are too! If an operation cannot be carried out with DuckDB, it is automatically outsourced to dplyr. Over time, we expect fewer and fewer fallbacks to dplyr to be needed.</p><h2 id=how-to-use-duckplyr>How to use duckplyr
<a href=#how-to-use-duckplyr><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>There are two ways to use duckplyr:</p><ul><li><p>As above, you can
<a href=https://duckplyr.tidyverse.org target=_blank rel=noopener><code>library(duckplyr)</code></a>, and replace all existing dplyr methods. This is safe because duckplyr is guaranteed to give the exactly same the results as dplyr, unlike other backends.</p></li><li><p>Create individual &ldquo;duck frames&rdquo; using <em>conversion functions</em> like <code>duckdplyr::duckdb_tibble()</code> or <code>duckdplyr::as_duckdb_tibble()</code>, or <em>ingestion functions</em> like <code>duckdplyr::read_csv_duckdb()</code>.</p></li></ul><p>Here&rsquo;s an example of the second form:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nv>out</span> <span class=o>&lt;-</span> <span class=nv>lineitem_tbl</span> <span class=o>|&gt;</span></span>
<span>  <span class=nf>duckplyr</span><span class=nf>::</span><span class=nf><a href=https://duckplyr.tidyverse.org/reference/duckdb_tibble.html>as_duckdb_tibble</a></span><span class=o>(</span><span class=o>)</span> <span class=o>|&gt;</span></span>
<span>  <span class=nf>tpch_dplyr</span><span class=o>(</span><span class=o>)</span></span>
<span></span>
<span><span class=nv>out</span></span>
<span><span class=c>#&gt; <span style=color:#555># A duckplyr data frame: 10 variables</span></span></span>
<span><span class=c>#&gt;   <span style=font-weight:700>l_returnflag</span> <span style=font-weight:700>l_linestatus</span>  <span style=font-weight:700>sum_qty</span> <span style=font-weight:700>sum_base_price</span> <span style=font-weight:700>sum_disc_price</span>    <span style=font-weight:700>sum_charge</span></span></span>
<span><span class=c>#&gt;   <span style=color:#555;font-style:italic>&lt;chr&gt;</span>        <span style=color:#555;font-style:italic>&lt;chr&gt;</span>           <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>          <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>          <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>         <span style=color:#555;font-style:italic>&lt;dbl&gt;</span></span></span>
<span><span class=c>#&gt; <span style=color:#555>1</span> A            F            37<span style=text-decoration:underline>734</span>107   <span style=text-decoration:underline>56</span>586<span style=text-decoration:underline>554</span>401.   <span style=text-decoration:underline>53</span>758<span style=text-decoration:underline>257</span>135.  <span style=text-decoration:underline>55</span>909<span style=text-decoration:underline>065</span>223.</span></span>
<span><span class=c>#&gt; <span style=color:#555>2</span> N            F              <span style=text-decoration:underline>991</span>417    <span style=text-decoration:underline>1</span>487<span style=text-decoration:underline>504</span>710.    <span style=text-decoration:underline>1</span>413<span style=text-decoration:underline>082</span>168.   <span style=text-decoration:underline>1</span>469<span style=text-decoration:underline>649</span>223.</span></span>
<span><span class=c>#&gt; <span style=color:#555>3</span> N            O            74<span style=text-decoration:underline>476</span>040  <span style=text-decoration:underline>111</span>701<span style=text-decoration:underline>729</span>698.  <span style=text-decoration:underline>106</span>118<span style=text-decoration:underline>230</span>308. <span style=text-decoration:underline>110</span>367<span style=text-decoration:underline>043</span>872.</span></span>
<span><span class=c>#&gt; <span style=color:#555>4</span> R            F            37<span style=text-decoration:underline>719</span>753   <span style=text-decoration:underline>56</span>568<span style=text-decoration:underline>041</span>381.   <span style=text-decoration:underline>53</span>741<span style=text-decoration:underline>292</span>685.  <span style=text-decoration:underline>55</span>889<span style=text-decoration:underline>619</span>120.</span></span>
<span><span class=c>#&gt; <span style=color:#555># ℹ 4 more variables: </span><span style=color:#555;font-weight:700>avg_qty</span><span style=color:#555> &lt;dbl&gt;, </span><span style=color:#555;font-weight:700>avg_price</span><span style=color:#555> &lt;dbl&gt;, </span><span style=color:#555;font-weight:700>avg_disc</span><span style=color:#555> &lt;dbl&gt;,</span></span></span>
<span><span class=c>#&gt; <span style=color:#555>#   </span><span style=color:#555;font-weight:700>count_order</span><span style=color:#555> &lt;int&gt;</span></span></span>
<span></span></code></pre></div><p>Note that the resulting object is indistinguishable from a regular tibble, except for the additional class.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nf><a href=https://rdrr.io/r/base/typeof.html>typeof</a></span><span class=o>(</span><span class=nv>out</span><span class=o>)</span></span>
<span><span class=c>#&gt; [1] "list"</span></span>
<span></span><span><span class=nf><a href=https://rdrr.io/r/base/class.html>class</a></span><span class=o>(</span><span class=nv>out</span><span class=o>)</span></span>
<span><span class=c>#&gt; [1] "duckplyr_df" "tbl_df"      "tbl"         "data.frame"</span></span>
<span></span><span><span class=nv>out</span><span class=o>$</span><span class=nv>count_order</span></span>
<span><span class=c>#&gt; [1] 1478493   38854 2920374 1478870</span></span>
<span></span></code></pre></div><p>Operations not yet supported by duckplyr are automatically outsourced to dplyr. For instance, filtering on grouped data is not supported, but it still works thanks to the fallback mechanism. By default, the fallback is silent, but you can make it visible by setting an environment variable. This is useful if you want to better understanding what&rsquo;s making your code slow.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nf><a href=https://rdrr.io/r/base/Sys.setenv.html>Sys.setenv</a></span><span class=o>(</span>DUCKPLYR_FALLBACK_INFO <span class=o>=</span> <span class=kc>TRUE</span><span class=o>)</span></span>
<span></span>
<span><span class=nv>lineitem_tbl</span> <span class=o>|&gt;</span></span>
<span>  <span class=nf>duckplyr</span><span class=nf>::</span><span class=nf><a href=https://duckplyr.tidyverse.org/reference/duckdb_tibble.html>as_duckdb_tibble</a></span><span class=o>(</span><span class=o>)</span> <span class=o>|&gt;</span></span>
<span>  <span class=nf><a href=https://dplyr.tidyverse.org/reference/filter.html>filter</a></span><span class=o>(</span><span class=nv>l_quantity</span> <span class=o>==</span> <span class=nf><a href=https://rdrr.io/r/base/Extremes.html>max</a></span><span class=o>(</span><span class=nv>l_quantity</span><span class=o>)</span>, .by <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/c.html>c</a></span><span class=o>(</span><span class=nv>l_returnflag</span>, <span class=nv>l_linestatus</span><span class=o>)</span><span class=o>)</span></span>
<span><span class=c>#&gt; Cannot process duckplyr query with DuckDB, falling back to dplyr.</span></span>
<span><span class=c>#&gt; <span style=color:#00b>ℹ</span> `filter(.by = ...)` not implemented, try `mutate(.by = ...)` followed by a simple `filter()`.</span></span>
<span></span><span><span class=c>#&gt; <span style=color:#555># A duckplyr data frame: 16 variables</span></span></span>
<span><span class=c>#&gt;    <span style=font-weight:700>l_orderkey</span> <span style=font-weight:700>l_partkey</span> <span style=font-weight:700>l_suppkey</span> <span style=font-weight:700>l_linenumber</span> <span style=font-weight:700>l_quantity</span> <span style=font-weight:700>l_extendedprice</span></span></span>
<span><span class=c>#&gt;         <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>     <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>     <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>        <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>      <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>           <span style=color:#555;font-style:italic>&lt;dbl&gt;</span></span></span>
<span><span class=c>#&gt; <span style=color:#555> 1</span>          5     <span style=text-decoration:underline>37</span>531        35            3         50          <span style=text-decoration:underline>73</span>426.</span></span>
<span><span class=c>#&gt; <span style=color:#555> 2</span>        131     <span style=text-decoration:underline>44</span>255      <span style=text-decoration:underline>9</span>264            2         50          <span style=text-decoration:underline>59</span>962.</span></span>
<span><span class=c>#&gt; <span style=color:#555> 3</span>        199    <span style=text-decoration:underline>132</span>072      <span style=text-decoration:underline>9</span>612            1         50          <span style=text-decoration:underline>55</span>204.</span></span>
<span><span class=c>#&gt; <span style=color:#555> 4</span>        231    <span style=text-decoration:underline>198</span>124       644            3         50          <span style=text-decoration:underline>61</span>106 </span></span>
<span><span class=c>#&gt; <span style=color:#555> 5</span>        260    <span style=text-decoration:underline>155</span>887      <span style=text-decoration:underline>5</span>888            1         50          <span style=text-decoration:underline>97</span>144 </span></span>
<span><span class=c>#&gt; <span style=color:#555> 6</span>        263    <span style=text-decoration:underline>142</span>891       434            3         50          <span style=text-decoration:underline>96</span>694.</span></span>
<span><span class=c>#&gt; <span style=color:#555> 7</span>        323    <span style=text-decoration:underline>163</span>628      <span style=text-decoration:underline>1</span>177            1         50          <span style=text-decoration:underline>84</span>581 </span></span>
<span><span class=c>#&gt; <span style=color:#555> 8</span>        354     <span style=text-decoration:underline>58</span>125      <span style=text-decoration:underline>8</span>126            3         50          <span style=text-decoration:underline>54</span>156 </span></span>
<span><span class=c>#&gt; <span style=color:#555> 9</span>        484    <span style=text-decoration:underline>183</span>351      <span style=text-decoration:underline>5</span>870            3         50          <span style=text-decoration:underline>71</span>718.</span></span>
<span><span class=c>#&gt; <span style=color:#555>10</span>        485    <span style=text-decoration:underline>149</span>523      <span style=text-decoration:underline>9</span>524            1         50          <span style=text-decoration:underline>78</span>626 </span></span>
<span><span class=c>#&gt; <span style=color:#555># ℹ more rows</span></span></span>
<span><span class=c>#&gt; <span style=color:#555># ℹ 10 more variables: </span><span style=color:#555;font-weight:700>l_discount</span><span style=color:#555> &lt;dbl&gt;, </span><span style=color:#555;font-weight:700>l_tax</span><span style=color:#555> &lt;dbl&gt;, </span><span style=color:#555;font-weight:700>l_returnflag</span><span style=color:#555> &lt;chr&gt;,</span></span></span>
<span><span class=c>#&gt; <span style=color:#555>#   </span><span style=color:#555;font-weight:700>l_linestatus</span><span style=color:#555> &lt;chr&gt;, </span><span style=color:#555;font-weight:700>l_shipdate</span><span style=color:#555> &lt;date&gt;, </span><span style=color:#555;font-weight:700>l_commitdate</span><span style=color:#555> &lt;date&gt;,</span></span></span>
<span><span class=c>#&gt; <span style=color:#555>#   </span><span style=color:#555;font-weight:700>l_receiptdate</span><span style=color:#555> &lt;date&gt;, </span><span style=color:#555;font-weight:700>l_shipinstruct</span><span style=color:#555> &lt;chr&gt;, </span><span style=color:#555;font-weight:700>l_shipmode</span><span style=color:#555> &lt;chr&gt;,</span></span></span>
<span><span class=c>#&gt; <span style=color:#555>#   </span><span style=color:#555;font-weight:700>l_comment</span><span style=color:#555> &lt;chr&gt;</span></span></span>
<span></span></code></pre></div><p>You can also directly use DuckDB functions with the <code>dd$</code> qualifier. Functions with this prefix will not be translated at all and passed through directly to DuckDB. For example, the following code uses DuckDB&rsquo;s internal implementation of
<a href=https://duckdb.org/docs/stable/sql/functions/text.html#editdist3s1-s2 target=_blank rel=noopener>Levenstein distance</a>:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nf><a href=https://tibble.tidyverse.org/reference/tibble.html>tibble</a></span><span class=o>(</span>a <span class=o>=</span> <span class=s>"dbplyr"</span>, b <span class=o>=</span> <span class=s>"duckplyr"</span><span class=o>)</span> <span class=o><a href=https://magrittr.tidyverse.org/reference/pipe.html>%&gt;%</a></span></span>
<span>  <span class=nf><a href=https://dplyr.tidyverse.org/reference/mutate.html>mutate</a></span><span class=o>(</span>c <span class=o>=</span> <span class=nv>dd</span><span class=o>$</span><span class=nf>levenshtein</span><span class=o>(</span><span class=nv>a</span>, <span class=nv>b</span><span class=o>)</span><span class=o>)</span></span>
<span><span class=c>#&gt; <span style=color:#555># A tibble: 1 × 3</span></span></span>
<span><span class=c>#&gt;   <span style=font-weight:700>a</span>      <span style=font-weight:700>b</span>            <span style=font-weight:700>c</span></span></span>
<span><span class=c>#&gt;   <span style=color:#555;font-style:italic>&lt;chr&gt;</span>  <span style=color:#555;font-style:italic>&lt;chr&gt;</span>    <span style=color:#555;font-style:italic>&lt;dbl&gt;</span></span></span>
<span><span class=c>#&gt; <span style=color:#555>1</span> dbplyr duckplyr     3</span></span>
<span></span></code></pre></div><p>See
<a href=https://duckplyr.tidyverse.org/articles/duckdb.html target=_blank rel=noopener><code>vignette("duckdb")</code></a> for more information on these features.</p><p>If you&rsquo;re working with dbplyr too, you can use
<a href=https://duckplyr.tidyverse.org/reference/as_tbl.html target=_blank rel=noopener><code>as_tbl()</code></a> you to convert a duckplyr tibble to a dbplyr lazy table. This allows you to seamlessly interact with existing code that might use inline SQL or other dbplyr functionality. With
<a href=https://duckplyr.tidyverse.org/reference/duckdb_tibble.html target=_blank rel=noopener><code>as_duckdb_tibble()</code></a>, you can convert a dbplyr lazy table to a duckplyr tibble. Both operations work without intermediate materialization.</p><h2 id=benchmark>Benchmark
<a href=#benchmark><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>duckplyr is often much faster than dplyr. The comparison below is done in a fresh R session where dplyr is attached but duckplyr is not.</p><p>We use <code>tpch_dplyr()</code> as defined above to run the query with dplyr. The function that runs it with duckplyr only wraps the input data in a duck frame and forwards it to the dplyr function. The
<a href=https://dplyr.tidyverse.org/reference/compute.html target=_blank rel=noopener><code>collect()</code></a> at the end is required only for this benchmark to ensure fairness.<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup></p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nv>tpch_duckplyr</span> <span class=o>&lt;-</span> <span class=kr>function</span><span class=o>(</span><span class=nv>lineitem</span><span class=o>)</span> <span class=o>&#123;</span></span>
<span>  <span class=nv>lineitem</span> <span class=o>|&gt;</span></span>
<span>    <span class=nf>duckplyr</span><span class=nf>::</span><span class=nf><a href=https://duckplyr.tidyverse.org/reference/duckdb_tibble.html>as_duckdb_tibble</a></span><span class=o>(</span><span class=o>)</span> <span class=o>|&gt;</span></span>
<span>    <span class=nf>tpch_dplyr</span><span class=o>(</span><span class=o>)</span> <span class=o>|&gt;</span></span>
<span>    <span class=nf><a href=https://dplyr.tidyverse.org/reference/compute.html>collect</a></span><span class=o>(</span><span class=o>)</span></span>
<span><span class=o>&#125;</span></span></code></pre></div><p>And now we compare the two:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nf>bench</span><span class=nf>::</span><span class=nf><a href=https://bench.r-lib.org/reference/mark.html>mark</a></span><span class=o>(</span></span>
<span>  <span class=nf>tpch_dplyr</span><span class=o>(</span><span class=nv>lineitem_tbl</span><span class=o>)</span>,</span>
<span>  <span class=nf>tpch_duckplyr</span><span class=o>(</span><span class=nv>lineitem_tbl</span><span class=o>)</span>,</span>
<span>  check <span class=o>=</span> <span class=o>~</span> <span class=nf><a href=https://rdrr.io/r/base/all.equal.html>all.equal</a></span><span class=o>(</span><span class=nv>.x</span>, <span class=nv>.y</span>, tolerance <span class=o>=</span> <span class=m>1e-10</span><span class=o>)</span></span>
<span><span class=o>)</span></span>
<span><span class=c>#&gt; Warning: Some expressions had a GC in every iteration; so filtering is disabled.</span></span>
<span></span><span><span class=c>#&gt; <span style=color:#555># A tibble: 2 × 6</span></span></span>
<span><span class=c>#&gt;   <span style=font-weight:700>expression</span>                       <span style=font-weight:700>min</span>   <span style=font-weight:700>median</span> <span style=font-weight:700>`itr/sec`</span> <span style=font-weight:700>mem_alloc</span> <span style=font-weight:700>`gc/sec`</span></span></span>
<span><span class=c>#&gt;   <span style=color:#555;font-style:italic>&lt;bch:expr&gt;</span>                  <span style=color:#555;font-style:italic>&lt;bch:tm&gt;</span> <span style=color:#555;font-style:italic>&lt;bch:tm&gt;</span>     <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;bch:byt&gt;</span>    <span style=color:#555;font-style:italic>&lt;dbl&gt;</span></span></span>
<span><span class=c>#&gt; <span style=color:#555>1</span> tpch_dplyr(lineitem_tbl)     611.6ms  611.6ms      1.64    1.25GB     1.64</span></span>
<span><span class=c>#&gt; <span style=color:#555>2</span> tpch_duckplyr(lineitem_tbl)   71.4ms   72.3ms     13.8   314.38KB     0</span></span>
<span></span></code></pre></div><p>In this example, duckplyr is a lot faster than dplyr. It also appears to use much less memory, but this is misleading: DuckDB manages the memory, not R, so the memory usage is not visible to
<a href=https://bench.r-lib.org/reference/mark.html target=_blank rel=noopener><code>bench::mark()</code></a>.</p><h2 id=out-of-memory-data>Out-of-memory data
<a href=#out-of-memory-data><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>As well as improved speed with in-memory datasets, duckplyr makes it easy to work with datasets that are too big to fit in memory. In this case, you want:</p><ol><li>To work with data stored in modern formats designed for large data (e.g. Parquet).</li><li>To be able to store large intermediate results on disk, keeping them out of memory.</li><li>Fast computation!</li></ol><p>duckdplyr provides each of these features:</p><ol><li>You can read data from disk with functions like
<a href=https://duckplyr.tidyverse.org/reference/read_parquet_duckdb.html target=_blank rel=noopener><code>read_parquet_duckdb()</code></a>.</li><li>You can save intermediate results to disk with
<a href=https://duckplyr.tidyverse.org/reference/compute_parquet.html target=_blank rel=noopener><code>compute_parquet()</code></a> and
<a href=https://duckplyr.tidyverse.org/reference/compute_csv.html target=_blank rel=noopener><code>compute_csv()</code></a>.</li><li>duckdplyr takes advantage of DuckDB&rsquo;s query planner which considers your entire pipeline holistically to figure out the most efficient way to get the data you need.</li></ol><p>See
<a href=https://duckplyr.tidyverse.org/articles/large.html target=_blank rel=noopener><code>vignette("large")</code></a> for a walkthrough and more details.</p><h2 id=help-us-improve-duckplyr>Help us improve duckplyr!
<a href=#help-us-improve-duckplyr><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>Our goals for future development of duckplyr include:</p><ul><li>Enabling users to provide
<a href=https://github.com/tidyverse/duckplyr/issues/158 target=_blank rel=noopener>custom translations</a> of dplyr functionality;</li><li>Making it easier to contribute code to duckplyr;</li><li>Supporting more dplyr and tidyr functionality natively in DuckDB.</li></ul><p>You can help!</p><ul><li>Please report any issues, especially regarding unknown incompabilities. See
<a href=https://duckplyr.tidyverse.org/articles/limits.html target=_blank rel=noopener><code>vignette("limits")</code></a>.</li><li>Contribute to the codebase after reading duckplyr&rsquo;s
<a href=https://duckplyr.tidyverse.org/CONTRIBUTING.html target=_blank rel=noopener>contributing guide</a>.</li><li>Turn on telemetry to help us hear about the most frequent fallbacks so we can prioritize working on the corresponding missing dplyr translation. See
<a href=https://duckplyr.tidyverse.org/articles/telemetry.html target=_blank rel=noopener><code>vignette("telemetry")</code></a> and
<a href=https://duckplyr.tidyverse.org/reference/fallback.html target=_blank rel=noopener><code>duckplyr::fallback_sitrep()</code></a>.</li></ul><h2 id=additional-resources>Additional resources
<a href=#additional-resources><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>Eager to learn more about duckplyr &ndash; beside by trying it out yourself? The duckplyr website features several
<a href=https://duckplyr.tidyverse.org/articles/ target=_blank rel=noopener>articles</a>. Furthermore, the blog post
<a href=https://duckdb.org/2024/04/02/duckplyr.html target=_blank rel=noopener>&ldquo;duckplyr: dplyr Powered by DuckDB&rdquo;</a> by Hannes Mühleisen provides some context on duckplyr including its inner workings, as also seen in a
<a href=https://blog.r-hub.io/2025/02/13/lazy-meanings/#duckplyr-lazy-evaluation-and-prudence target=_blank rel=noopener>section</a> of the R-hub blog post
<a href=https://blog.r-hub.io/2025/02/13/lazy-meanings/ target=_blank rel=noopener>&ldquo;Lazy introduction to laziness in R&rdquo;</a> by Maëlle Salmon, Athanasia Mo Mowinckel and Hannah Frick.</p><h2 id=acknowledgements>Acknowledgements
<a href=#acknowledgements><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>A big thanks to all folks who filed issues, created PRs and generally helped to improve duckplyr and its workhorse
<a href=https://r.duckdb.org/ target=_blank rel=noopener>duckdb</a>!</p><p><a href=https://github.com/adamschwing target=_blank rel=noopener>@adamschwing</a>,
<a href=https://github.com/alejandrohagan target=_blank rel=noopener>@alejandrohagan</a>,
<a href=https://github.com/andreranza target=_blank rel=noopener>@andreranza</a>,
<a href=https://github.com/apalacio9502 target=_blank rel=noopener>@apalacio9502</a>,
<a href=https://github.com/apsteinmetz target=_blank rel=noopener>@apsteinmetz</a>,
<a href=https://github.com/barracuda156 target=_blank rel=noopener>@barracuda156</a>,
<a href=https://github.com/beniaminogreen target=_blank rel=noopener>@beniaminogreen</a>,
<a href=https://github.com/bob-rietveld target=_blank rel=noopener>@bob-rietveld</a>,
<a href=https://github.com/brichards920 target=_blank rel=noopener>@brichards920</a>,
<a href=https://github.com/cboettig target=_blank rel=noopener>@cboettig</a>,
<a href=https://github.com/davidjayjackson target=_blank rel=noopener>@davidjayjackson</a>,
<a href=https://github.com/DavisVaughan target=_blank rel=noopener>@DavisVaughan</a>,
<a href=https://github.com/Ed2uiz target=_blank rel=noopener>@Ed2uiz</a>,
<a href=https://github.com/eitsupi target=_blank rel=noopener>@eitsupi</a>,
<a href=https://github.com/era127 target=_blank rel=noopener>@era127</a>,
<a href=https://github.com/etiennebacher target=_blank rel=noopener>@etiennebacher</a>,
<a href=https://github.com/eutwt target=_blank rel=noopener>@eutwt</a>,
<a href=https://github.com/fmichonneau target=_blank rel=noopener>@fmichonneau</a>,
<a href=https://github.com/hadley target=_blank rel=noopener>@hadley</a>,
<a href=https://github.com/hannes target=_blank rel=noopener>@hannes</a>,
<a href=https://github.com/hawkfish target=_blank rel=noopener>@hawkfish</a>,
<a href=https://github.com/IndrajeetPatil target=_blank rel=noopener>@IndrajeetPatil</a>,
<a href=https://github.com/JanSulavik target=_blank rel=noopener>@JanSulavik</a>,
<a href=https://github.com/JavOrraca target=_blank rel=noopener>@JavOrraca</a>,
<a href=https://github.com/jeroen target=_blank rel=noopener>@jeroen</a>,
<a href=https://github.com/jhk0530 target=_blank rel=noopener>@jhk0530</a>,
<a href=https://github.com/joakimlinde target=_blank rel=noopener>@joakimlinde</a>,
<a href=https://github.com/JosiahParry target=_blank rel=noopener>@JosiahParry</a>,
<a href=https://github.com/kevbaer target=_blank rel=noopener>@kevbaer</a>,
<a href=https://github.com/larry77 target=_blank rel=noopener>@larry77</a>,
<a href=https://github.com/lnkuiper target=_blank rel=noopener>@lnkuiper</a>,
<a href=https://github.com/lorenzwalthert target=_blank rel=noopener>@lorenzwalthert</a>,
<a href=https://github.com/lschneiderbauer target=_blank rel=noopener>@lschneiderbauer</a>,
<a href=https://github.com/luisDVA target=_blank rel=noopener>@luisDVA</a>,
<a href=https://github.com/math-mcshane target=_blank rel=noopener>@math-mcshane</a>,
<a href=https://github.com/meersel target=_blank rel=noopener>@meersel</a>,
<a href=https://github.com/multimeric target=_blank rel=noopener>@multimeric</a>,
<a href=https://github.com/mytarmail target=_blank rel=noopener>@mytarmail</a>,
<a href=https://github.com/nicki-dese target=_blank rel=noopener>@nicki-dese</a>,
<a href=https://github.com/PMassicotte target=_blank rel=noopener>@PMassicotte</a>,
<a href=https://github.com/prasundutta87 target=_blank rel=noopener>@prasundutta87</a>,
<a href=https://github.com/rafapereirabr target=_blank rel=noopener>@rafapereirabr</a>,
<a href=https://github.com/Robinlovelace target=_blank rel=noopener>@Robinlovelace</a>,
<a href=https://github.com/romainfrancois target=_blank rel=noopener>@romainfrancois</a>,
<a href=https://github.com/sparrow925 target=_blank rel=noopener>@sparrow925</a>,
<a href=https://github.com/stefanlinner target=_blank rel=noopener>@stefanlinner</a>,
<a href=https://github.com/szarnyasg target=_blank rel=noopener>@szarnyasg</a>,
<a href=https://github.com/thomasp85 target=_blank rel=noopener>@thomasp85</a>,
<a href=https://github.com/TimTaylor target=_blank rel=noopener>@TimTaylor</a>,
<a href=https://github.com/Tmonster target=_blank rel=noopener>@Tmonster</a>,
<a href=https://github.com/toppyy target=_blank rel=noopener>@toppyy</a>,
<a href=https://github.com/wibeasley target=_blank rel=noopener>@wibeasley</a>,
<a href=https://github.com/yjunechoe target=_blank rel=noopener>@yjunechoe</a>,
<a href=https://github.com/ywhcuhk target=_blank rel=noopener>@ywhcuhk</a>,
<a href=https://github.com/zhjx19 target=_blank rel=noopener>@zhjx19</a>,
<a href=https://github.com/ablack3 target=_blank rel=noopener>@ablack3</a>,
<a href=https://github.com/actuarial-lonewolf target=_blank rel=noopener>@actuarial-lonewolf</a>,
<a href=https://github.com/ajdamico target=_blank rel=noopener>@ajdamico</a>,
<a href=https://github.com/amirmazmi target=_blank rel=noopener>@amirmazmi</a>,
<a href=https://github.com/anderson461123 target=_blank rel=noopener>@anderson461123</a>,
<a href=https://github.com/andrewGhazi target=_blank rel=noopener>@andrewGhazi</a>,
<a href=https://github.com/Antonov548 target=_blank rel=noopener>@Antonov548</a>,
<a href=https://github.com/appiehappie999 target=_blank rel=noopener>@appiehappie999</a>,
<a href=https://github.com/ArthurAndrews target=_blank rel=noopener>@ArthurAndrews</a>,
<a href=https://github.com/arthurgailes target=_blank rel=noopener>@arthurgailes</a>,
<a href=https://github.com/babaknaimi target=_blank rel=noopener>@babaknaimi</a>,
<a href=https://github.com/bcaradima target=_blank rel=noopener>@bcaradima</a>,
<a href=https://github.com/bdforbes target=_blank rel=noopener>@bdforbes</a>,
<a href=https://github.com/bergest target=_blank rel=noopener>@bergest</a>,
<a href=https://github.com/bill-ash target=_blank rel=noopener>@bill-ash</a>,
<a href=https://github.com/BorgeJorge target=_blank rel=noopener>@BorgeJorge</a>,
<a href=https://github.com/brianmsm target=_blank rel=noopener>@brianmsm</a>,
<a href=https://github.com/chainsawriot target=_blank rel=noopener>@chainsawriot</a>,
<a href=https://github.com/ckarnes target=_blank rel=noopener>@ckarnes</a>,
<a href=https://github.com/clementlefevre target=_blank rel=noopener>@clementlefevre</a>,
<a href=https://github.com/cregouby target=_blank rel=noopener>@cregouby</a>,
<a href=https://github.com/cy-james-lee target=_blank rel=noopener>@cy-james-lee</a>,
<a href=https://github.com/daranzolin target=_blank rel=noopener>@daranzolin</a>,
<a href=https://github.com/david-cortes target=_blank rel=noopener>@david-cortes</a>,
<a href=https://github.com/DavZim target=_blank rel=noopener>@DavZim</a>,
<a href=https://github.com/denis-or target=_blank rel=noopener>@denis-or</a>,
<a href=https://github.com/developertest1234 target=_blank rel=noopener>@developertest1234</a>,
<a href=https://github.com/dicorynia target=_blank rel=noopener>@dicorynia</a>,
<a href=https://github.com/dsolito target=_blank rel=noopener>@dsolito</a>,
<a href=https://github.com/e-kotov target=_blank rel=noopener>@e-kotov</a>,
<a href=https://github.com/EAVWing target=_blank rel=noopener>@EAVWing</a>,
<a href=https://github.com/eddelbuettel target=_blank rel=noopener>@eddelbuettel</a>,
<a href=https://github.com/edward-burn target=_blank rel=noopener>@edward-burn</a>,
<a href=https://github.com/elefeint target=_blank rel=noopener>@elefeint</a>,
<a href=https://github.com/eli-daniels target=_blank rel=noopener>@eli-daniels</a>,
<a href=https://github.com/elysabethpc target=_blank rel=noopener>@elysabethpc</a>,
<a href=https://github.com/erikvona target=_blank rel=noopener>@erikvona</a>,
<a href=https://github.com/florisvdh target=_blank rel=noopener>@florisvdh</a>,
<a href=https://github.com/gaborcsardi target=_blank rel=noopener>@gaborcsardi</a>,
<a href=https://github.com/ggrothendieck target=_blank rel=noopener>@ggrothendieck</a>,
<a href=https://github.com/hdmm3 target=_blank rel=noopener>@hdmm3</a>,
<a href=https://github.com/hope-data-science target=_blank rel=noopener>@hope-data-science</a>,
<a href=https://github.com/IoannaNika target=_blank rel=noopener>@IoannaNika</a>,
<a href=https://github.com/jabrown-aepenergy target=_blank rel=noopener>@jabrown-aepenergy</a>,
<a href=https://github.com/JamesLMacAulay target=_blank rel=noopener>@JamesLMacAulay</a>,
<a href=https://github.com/jangorecki target=_blank rel=noopener>@jangorecki</a>,
<a href=https://github.com/javierlenzi target=_blank rel=noopener>@javierlenzi</a>,
<a href=https://github.com/Joe-Heffer-Shef target=_blank rel=noopener>@Joe-Heffer-Shef</a>,
<a href=https://github.com/kalibera target=_blank rel=noopener>@kalibera</a>,
<a href=https://github.com/lboller-pwbm target=_blank rel=noopener>@lboller-pwbm</a>,
<a href=https://github.com/lgaborini target=_blank rel=noopener>@lgaborini</a>,
<a href=https://github.com/m-muecke target=_blank rel=noopener>@m-muecke</a>,
<a href=https://github.com/meztez target=_blank rel=noopener>@meztez</a>,
<a href=https://github.com/mgirlich target=_blank rel=noopener>@mgirlich</a>,
<a href=https://github.com/mtmorgan target=_blank rel=noopener>@mtmorgan</a>,
<a href=https://github.com/nassuphis target=_blank rel=noopener>@nassuphis</a>,
<a href=https://github.com/nbc target=_blank rel=noopener>@nbc</a>,
<a href=https://github.com/olivroy target=_blank rel=noopener>@olivroy</a>,
<a href=https://github.com/pdet target=_blank rel=noopener>@pdet</a>,
<a href=https://github.com/phdjsep target=_blank rel=noopener>@phdjsep</a>,
<a href=https://github.com/pierre-lamarche target=_blank rel=noopener>@pierre-lamarche</a>,
<a href=https://github.com/r2evans target=_blank rel=noopener>@r2evans</a>,
<a href=https://github.com/ran-codes target=_blank rel=noopener>@ran-codes</a>,
<a href=https://github.com/rplsmn target=_blank rel=noopener>@rplsmn</a>,
<a href=https://github.com/Saarialho target=_blank rel=noopener>@Saarialho</a>,
<a href=https://github.com/SimonCoulombe target=_blank rel=noopener>@SimonCoulombe</a>,
<a href=https://github.com/tau31 target=_blank rel=noopener>@tau31</a>,
<a href=https://github.com/thohan88 target=_blank rel=noopener>@thohan88</a>,
<a href=https://github.com/ThomasSoeiro target=_blank rel=noopener>@ThomasSoeiro</a>,
<a href=https://github.com/timothygmitchell target=_blank rel=noopener>@timothygmitchell</a>,
<a href=https://github.com/vincentarelbundock target=_blank rel=noopener>@vincentarelbundock</a>,
<a href=https://github.com/VincentGuyader target=_blank rel=noopener>@VincentGuyader</a>,
<a href=https://github.com/wlangera target=_blank rel=noopener>@wlangera</a>,
<a href=https://github.com/xbasics target=_blank rel=noopener>@xbasics</a>,
<a href=https://github.com/xiaodaigh target=_blank rel=noopener>@xiaodaigh</a>,
<a href=https://github.com/xtimbeau target=_blank rel=noopener>@xtimbeau</a>,
<a href=https://github.com/yng-me target=_blank rel=noopener>@yng-me</a>,
<a href=https://github.com/Yousuf28 target=_blank rel=noopener>@Yousuf28</a>,
<a href=https://github.com/yutannihilation target=_blank rel=noopener>@yutannihilation</a>, and
<a href=https://github.com/zcatav target=_blank rel=noopener>@zcatav</a></p><p>Special thanks to Joe Thorley (
<a href=https://github.com/joethorley target=_blank rel=noopener>@joethorley</a>) for help with choosing the right words.</p><section class=footnotes role=doc-endnotes><hr><ol><li id=fn:1 role=doc-endnote><p>If you haven&rsquo;t heard of it yet, watch
<a href="https://www.youtube.com/watch?v=GELhdezYmP0&feature=youtu.be" target=_blank rel=noopener>Hannes Mühleisen&rsquo;s keynote at posit::conf(2024)</a>. <a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2 role=doc-endnote><p>If omitted, the results would be unchanged but the measurements would be wrong. The computation would then be triggered by the check. See
<a href=https://duckplyr.tidyverse.org/articles/prudence.html target=_blank rel=noopener><code>vignette("prudence")</code></a> for details. <a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></section></div></div><div class=column25><div class="section hideOnMobile"><div class=sectionTitle>Contents</div><nav id=TableOfContents><ul><li><a href=#a-drop-in-replacement-for-dplyr>A drop-in replacement for dplyr</a></li><li><a href=#how-to-use-duckplyr>How to use duckplyr</a></li><li><a href=#benchmark>Benchmark</a></li><li><a href=#out-of-memory-data>Out-of-memory data</a></li><li><a href=#help-us-improve-duckplyr>Help us improve duckplyr!</a></li><li><a href=#additional-resources>Additional resources</a></li><li><a href=#acknowledgements>Acknowledgements</a></li></ul></nav></div><div class=section></div></div></div></div></div><div id=rStudioFooter class=band><div class=bandContent><div id=copyright>The tidyverse is proudly supported by <a class=rstudioLogo href=https://posit.co/ aria-label="Posit Homepage"></a></div><div id=logos><a href=https://www.tidyverse.org/google_privacy_policy>Privacy policy</a>
<a href=https://github.com/tidyverse class="footerLogo gitHub" aria-label="Tidyverse GitHub organization"></a><a href=https://twitter.com/hashtag/rstats class="footerLogo twitter" aria-label="rstats hashtag on twitter.com"></a></div></div></div></div></div><script src=/js/math-code.js></script><script type=text/x-mathjax-config>
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    processEscapes: true
  }
});
</script><script async src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script type=application/javascript>var dnt=(navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack);var doNotTrack=(dnt=="1"||dnt=="yes");if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');if(window.sessionStorage){var GA_SESSION_STORAGE_KEY='ga:clientId';ga('create','UA-115082821-1',{'storage':'none','clientId':sessionStorage.getItem(GA_SESSION_STORAGE_KEY)});ga(function(tracker){sessionStorage.setItem(GA_SESSION_STORAGE_KEY,tracker.get('clientId'));});}
ga('set','anonymizeIp',true);ga('send','pageview');}</script></body></html></div></div></body></html>