<!doctype html><html><head><!doctype html><html lang=en-us><link rel=stylesheet href=/css/fonts.css><link rel=stylesheet href=/css/main-site.css><link rel=stylesheet href=/css/fa5-all.css><style type=text/css>body{background-color:#fff;color:#1a1917}a{color:#38577f}a:hover{color:#42709b}a:focus{outline-color:#42709b}.column25-left .sectionTitle a:hover:not(.current),.column16-left .sectionTitle a:hover:not(.current){color:#1a1917}.icon-attribution,.icon-attribution a{color:#1a1917;opacity:75%}#homeContent .band.first{background-color:#fff}#homeContent .band.second{background-color:#fdeba4}#homeContent .band.third{background-color:#fff}#rStudioHeader{background-color:#1a162d;color:#fff}#rStudioHeader .productName{color:#fff}#rStudioHeader .productName:hover,#rStudioHeader .productName:focus{color:#fdeba4}#rStudioHeader #menu .menuItem.a{background-color:#75aadb;color:#fff}#rStudioHeader #menu .menuItem:hover{background-color:#484557;color:#fff}#rStudioHeader #menu .menuItem.current{background-color:#fff;color:#1a162d;text-decoration:none}#rStudioFooter.band{background-color:#767381}#rStudioFooter .bandContent #copyright{color:#e3eef8}table tbody tr:nth-child(even){background-color:#f7faff}table tbody tr:nth-child(odd){background-color:#fff}.latest{border-top:.5em solid <no value>}.event{-moz-box-shadow:0 0 0 0 rgba(0,0,0,.1);-webkit-box-shadow:0 0 0 0 rgba(0,0,0,.1);box-shadow:0 0 0 0 rgba(0,0,0,.1)}.section .event{background-color:#eab0c41a}.section .event{border-top:7pt solid #a19ea936}.section .event a{color:#1a162d}.section .event{color:#404040}</style><link rel=stylesheet href=/css/tidyverse.css><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Hugo 0.71.1"><title>tidypredict 1.0.0</title><meta property="og:title" content="tidypredict 1.0.0"><meta property="og:description" content="tidypredict 1.0.0 brings faster computations for tree-based models, more efficient tree representations, glmnet model support, and a change in how random forests are handled."><meta property="og:type" content="article"><meta property="og:url" content="https://www.tidyverse.org/blog/2025/12/tidypredict-1-0-0/"><meta property="twitter:card" content="summary_large_image"><meta property="og:title" content="tidypredict 1.0.0 - Tidyverse"><meta property="description" content="tidypredict 1.0.0 brings faster computations for tree-based models, more efficient tree representations, glmnet model support, and a change in how random forests are handled."><meta property="og:description" content="tidypredict 1.0.0 brings faster computations for tree-based models, more efficient tree representations, glmnet model support, and a change in how random forests are handled."><meta property="og:image" content="https://www.tidyverse.org/blog/2025/12/tidypredict-1-0-0/thumbnail-sq.jpg"><meta name=twitter:image content="https://www.tidyverse.org/blog/2025/12/tidypredict-1-0-0/thumbnail-wd.jpg"><link rel=apple-touch-icon sizes=180x180 href=/images/favicons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/images/favicons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/images/favicons/favicon-16x16.png><link rel=manifest href=/images/favicons/site.webmanifest><link rel=mask-icon href=/images/favicons/safari-pinned-tab.svg><link rel="shortcut icon" href=/images/favicons/favicon.ico><meta name=msapplication-TileColor content="#da532c"><meta name=msapplication-config href=/images/favicons/browserconfig.xml><script type=text/javascript src=/js/jquery-3.5.1.min.js></script><script type=text/javascript src=/js/site.js></script><link rel=icon href=/images/favicon.ico><script type=text/javascript src=/js/clipboard.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin=anonymous></script><script defer data-domain=tidyverse.org,all.tidyverse.org src=https://plausible.io/js/plausible.js></script></head><body><div id=appTidyverseSite class="shrinkHeader alwaysShrinkHeader"><div id=main><div id=rStudioHeader><nav class=band><div class="innards bandContent"><div><a class=productName href=/>Tidyverse</a></div><div id=menu><div id=menuToggler></div><div id=menuItems><a class=menuItem href=/packages/>Packages</a>
<a class="menuItem current" href=/blog/>Blog</a>
<a class=menuItem href=/learn/>Learn</a>
<a class=menuItem href=/help/>Help</a>
<a class=menuItem href=/contribute/>Contribute</a></div></div></div></nav></div><main><div class="band padForHeader pushFooter"><div class=bandContent><div class="full splitColumns withMobileMargins"><div class=column75><h1 class=article-title>tidypredict 1.0.0</h1><div class=article-header aria-hidden=true><div class=photo><img src=/blog/2025/12/tidypredict-1-0-0/thumbnail-wd.jpg></div><div class=photoCredit>Photo by <a href=https://unsplash.com/photos/brown-leaves-covered-in-snow-on-a-branch-9XKkkeUwBhY>Monique Caraballo</a></div></div><span class=article-date><i class="fas fa-calendar-day fa-fw"></i>&nbsp;&nbsp;2025/12/10</span><p style=margin-bottom:.5em;margin-top:.85em><i class="fas fa-tags"></i>&nbsp;
<a href=/tags/orbital/>orbital</a>,
<a href=/tags/tidymodels/>tidymodels</a>,
<a href=/tags/tidypredict/>tidypredict</a></p><p style=margin-top:.5em><i class="fas fa-user-circle fa-fw"></i>&nbsp;
Emil Hvitfeldt</p><div class=article-content><p>We&rsquo;re tickled pink to announce the release of version 1.0.0 of
<a href=https://tidypredict.tidymodels.org/ target=_blank rel=noopener>tidypredict</a>. The main goal of tidypredict is to enable running predictions inside databases. It reads the model, extracts the components needed to calculate the prediction, and then creates an R formula that can be translated into SQL.</p><p>You can install them from CRAN with:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nf><a href=https://rdrr.io/r/utils/install.packages.html>install.packages</a></span><span class=o>(</span><span class=s>"tidypredict"</span><span class=o>)</span></span></code></pre></div><p>This blog post highlights the most important changes in this release, including faster computations for tree-based models, more efficient tree representations, glmnet model support, and a change in how random forests are handled. You can see a full list of changes in the
<a href=https://tidypredict.tidymodels.org/news/index.html#tidypredict-100 target=_blank rel=noopener>release notes</a>.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=kr><a href=https://rdrr.io/r/base/library.html>library</a></span><span class=o>(</span><span class=nv><a href=https://tidypredict.tidymodels.org>tidypredict</a></span><span class=o>)</span></span></code></pre></div><h2 id=improved-output-for-random-forest-models>Improved output for random forest models
<a href=#improved-output-for-random-forest-models><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>The previous version of tidypredict
<a href=https://tidypredict.tidymodels.org/reference/tidypredict_fit.html target=_blank rel=noopener><code>tidypredict_fit()</code></a> would return a list of expressions, one for each tree, when applied to random forest models. This didn&rsquo;t align with what is returned by other types of models. In version 1.0.0, this has been changed to produce a single, combined expression that reflects how predictions should be made.</p><p>This is technically a breaking change, but one we believe is worthwhile, as it provides a more consistent output for
<a href=https://tidypredict.tidymodels.org/reference/tidypredict_fit.html target=_blank rel=noopener><code>tidypredict_fit()</code></a> and hides the technical details about how to combine trees from different packages.</p><h2 id=faster-parsing-of-trees>Faster parsing of trees
<a href=#faster-parsing-of-trees><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>The parsing of xgboost, partykit, and ranger models should now be substantially faster than before. Examples have been shown to be 10 to 200 times faster. Please note that larger models, more trees, and deeper trees still take some time to parse.</p><h2 id=more-efficient-tree-expressions>More efficient tree expressions
<a href=#more-efficient-tree-expressions><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>All trees, whether they are a single tree or part of a collection of trees, such as in boosted trees or random forests, are encoded as <code>case_when()</code> statements by tidypredict. This means that the following tree.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nv>model</span> <span class=o>&lt;-</span> <span class=nf>partykit</span><span class=nf>::</span><span class=nf><a href=https://rdrr.io/pkg/partykit/man/ctree.html>ctree</a></span><span class=o>(</span><span class=nv>mpg</span> <span class=o>~</span> <span class=nv>am</span> <span class=o>+</span> <span class=nv>cyl</span>, data <span class=o>=</span> <span class=nv>mtcars</span><span class=o>)</span></span>
<span><span class=nv>model</span></span>
<span><span class=c>#&gt; </span></span>
<span><span class=c>#&gt; Model formula:</span></span>
<span><span class=c>#&gt; mpg ~ am + cyl</span></span>
<span><span class=c>#&gt; </span></span>
<span><span class=c>#&gt; Fitted party:</span></span>
<span><span class=c>#&gt; [1] root</span></span>
<span><span class=c>#&gt; |   [2] cyl &lt;= 4: 26.664 (n = 11, err = 203.4)</span></span>
<span><span class=c>#&gt; |   [3] cyl &gt; 4</span></span>
<span><span class=c>#&gt; |   |   [4] cyl &lt;= 6: 19.743 (n = 7, err = 12.7)</span></span>
<span><span class=c>#&gt; |   |   [5] cyl &gt; 6: 15.100 (n = 14, err = 85.2)</span></span>
<span><span class=c>#&gt; </span></span>
<span><span class=c>#&gt; Number of inner nodes:    2</span></span>
<span><span class=c>#&gt; Number of terminal nodes: 3</span></span>
<span></span></code></pre></div><p>Would be turned into the following <code>case_when()</code> statement.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nf>case_when</span><span class=p>(</span>
 <span class=n>cyl</span> <span class=o>&lt;=</span> <span class=m>4</span> <span class=o>~</span> <span class=m>26.6636363636364</span><span class=p>,</span>
 <span class=n>cyl</span> <span class=o>&lt;=</span> <span class=m>6</span> <span class=o>&amp;</span> <span class=n>cyl</span> <span class=o>&gt;</span> <span class=m>4</span> <span class=o>~</span> <span class=m>19.7428571428571</span><span class=p>,</span> 
 <span class=n>cyl</span> <span class=o>&gt;</span> <span class=m>6</span> <span class=o>&amp;</span> <span class=n>cyl</span> <span class=o>&gt;</span> <span class=m>4</span> <span class=o>~=</span> <span class=m>15.1</span>
<span class=p>)</span>
</code></pre></div><p>With this new update, we have taken advantage of the <code>.default</code> argument whenever possible, which should lead to faster predictions, as we no longer need to calculate redundant conditionals.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nf><a href=https://tidypredict.tidymodels.org/reference/tidypredict_fit.html>tidypredict_fit</a></span><span class=o>(</span><span class=nv>model</span><span class=o>)</span></span>
<span><span class=c>#&gt; case_when(cyl &lt;= 4 ~ 26.6636363636364, cyl &lt;= 6 &amp; cyl &gt; 4 ~ 19.7428571428571, </span></span>
<span><span class=c>#&gt;     .default = 15.1)</span></span>
<span></span></code></pre></div><h2 id=glmnet-support>Glmnet support
<a href=#glmnet-support><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>We now support the glmnet package. This package provides generalized linear models with lasso or elasticnet regularization.</p><p>The primary restriction when using a glmnet model with <code>tidypredict()</code> is that the model must have been fitted with the <code>lambda</code> argument set to a single value.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nv>model</span> <span class=o>&lt;-</span> <span class=nf>glmnet</span><span class=nf>::</span><span class=nf><a href=https://glmnet.stanford.edu/reference/glmnet.html>glmnet</a></span><span class=o>(</span><span class=nv>mtcars</span><span class=o>[</span>, <span class=o>-</span><span class=m>1</span><span class=o>]</span>, <span class=nv>mtcars</span><span class=o>$</span><span class=nv>mpg</span>, lambda <span class=o>=</span> <span class=m>0.01</span><span class=o>)</span></span>
<span></span>
<span><span class=nf><a href=https://tidypredict.tidymodels.org/reference/tidypredict_fit.html>tidypredict_fit</a></span><span class=o>(</span><span class=nv>model</span><span class=o>)</span></span>
<span><span class=c>#&gt; 13.0081464696679 + (cyl * -0.0773532164346008) + (disp * 0.00969507138358544) + </span></span>
<span><span class=c>#&gt;     (hp * -0.0192462098902709) + (drat * 0.816753237688302) + </span></span>
<span><span class=c>#&gt;     (wt * -3.41564341709663) + (qsec * 0.758580151032383) + (vs * </span></span>
<span><span class=c>#&gt;     0.277874296242861) + (am * 2.47356523820533) + (gear * 0.645144527527598) + </span></span>
<span><span class=c>#&gt;     (carb * -0.300886812079305)</span></span>
<span></span></code></pre></div><p><code>glmnet()</code> computes a collection of models using many sets of penalty values. This can be very efficient, but for tidypredict, we need to predict with a single penalty. Note how, as we increase the penalty, the extracted expression correctly removes terms with coefficients of <code>0</code> instead of leaving them as <code>(disp * 0)</code>.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nv>model</span> <span class=o>&lt;-</span> <span class=nf>glmnet</span><span class=nf>::</span><span class=nf><a href=https://glmnet.stanford.edu/reference/glmnet.html>glmnet</a></span><span class=o>(</span><span class=nv>mtcars</span><span class=o>[</span>, <span class=o>-</span><span class=m>1</span><span class=o>]</span>, <span class=nv>mtcars</span><span class=o>$</span><span class=nv>mpg</span>, lambda <span class=o>=</span> <span class=m>1</span><span class=o>)</span></span>
<span></span>
<span><span class=nf><a href=https://tidypredict.tidymodels.org/reference/tidypredict_fit.html>tidypredict_fit</a></span><span class=o>(</span><span class=nv>model</span><span class=o>)</span></span>
<span><span class=c>#&gt; 35.3137765116027 + (cyl * -0.871451193824228) + (hp * -0.0101173960249783) + </span></span>
<span><span class=c>#&gt;     (wt * -2.59443677687505)</span></span>
<span></span></code></pre></div><p>tidypredict is used as the primary parser for models employed by the
<a href=https://orbital.tidymodels.org/ target=_blank rel=noopener>orbital</a> package. This means that all the changes seen in this post also take effect when using orbital with tidymodels workflows. Such as using
<a href=https://parsnip.tidymodels.org/reference/linear_reg.html target=_blank rel=noopener><code>parsnip::linear_reg()</code></a> with <code>engine = "glmnet"</code>.</p><h2 id=acknowledgements>Acknowledgements
<a href=#acknowledgements><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>A big thank you to all the folks who helped make this release happen:
<a href=https://github.com/EmilHvitfeldt target=_blank rel=noopener>@EmilHvitfeldt</a>, and
<a href=https://github.com/jeroenjanssens target=_blank rel=noopener>@jeroenjanssens</a>.</p></div></div><div class=column25><div class="section hideOnMobile"><div class=sectionTitle>Contents</div><nav id=TableOfContents><ul><li><a href=#improved-output-for-random-forest-models>Improved output for random forest models</a></li><li><a href=#faster-parsing-of-trees>Faster parsing of trees</a></li><li><a href=#more-efficient-tree-expressions>More efficient tree expressions</a></li><li><a href=#glmnet-support>Glmnet support</a></li><li><a href=#acknowledgements>Acknowledgements</a></li></ul></nav></div><div class=section></div></div></div></div></div><div id=rStudioFooter class=band><div class=bandContent><div id=copyright>The tidyverse is proudly supported by <a class=rstudioLogo href=https://posit.co/ aria-label="Posit Homepage"></a></div><div id=logos><a href=https://www.tidyverse.org/google_privacy_policy>Privacy policy</a>
<a href=https://github.com/tidyverse class="footerLogo gitHub" aria-label="Tidyverse GitHub organization"></a><a href=https://twitter.com/hashtag/rstats class="footerLogo twitter" aria-label="rstats hashtag on twitter.com"></a></div></div></div></div></div><script src=/js/math-code.js></script><script type=text/x-mathjax-config>
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    processEscapes: true
  }
});
</script><script async src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script type=application/javascript>var dnt=(navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack);var doNotTrack=(dnt=="1"||dnt=="yes");if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');if(window.sessionStorage){var GA_SESSION_STORAGE_KEY='ga:clientId';ga('create','UA-115082821-1',{'storage':'none','clientId':sessionStorage.getItem(GA_SESSION_STORAGE_KEY)});ga(function(tracker){sessionStorage.setItem(GA_SESSION_STORAGE_KEY,tracker.get('clientId'));});}
ga('set','anonymizeIp',true);ga('send','pageview');}</script></body></html></div></div></body></html>