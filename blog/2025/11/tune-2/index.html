<!doctype html><html><head><!doctype html><html lang=en-us><link rel=stylesheet href=/css/fonts.css><link rel=stylesheet href=/css/main-site.css><link rel=stylesheet href=/css/fa5-all.css><style type=text/css>body{background-color:#fff;color:#1a1917}a{color:#38577f}a:hover{color:#42709b}a:focus{outline-color:#42709b}.column25-left .sectionTitle a:hover:not(.current),.column16-left .sectionTitle a:hover:not(.current){color:#1a1917}.icon-attribution,.icon-attribution a{color:#1a1917;opacity:75%}#homeContent .band.first{background-color:#fff}#homeContent .band.second{background-color:#fdeba4}#homeContent .band.third{background-color:#fff}#rStudioHeader{background-color:#1a162d;color:#fff}#rStudioHeader .productName{color:#fff}#rStudioHeader .productName:hover,#rStudioHeader .productName:focus{color:#fdeba4}#rStudioHeader #menu .menuItem.a{background-color:#75aadb;color:#fff}#rStudioHeader #menu .menuItem:hover{background-color:#484557;color:#fff}#rStudioHeader #menu .menuItem.current{background-color:#fff;color:#1a162d;text-decoration:none}#rStudioFooter.band{background-color:#767381}#rStudioFooter .bandContent #copyright{color:#e3eef8}table tbody tr:nth-child(even){background-color:#f7faff}table tbody tr:nth-child(odd){background-color:#fff}.latest{border-top:.5em solid <no value>}.event{-moz-box-shadow:0 0 0 0 rgba(0,0,0,.1);-webkit-box-shadow:0 0 0 0 rgba(0,0,0,.1);box-shadow:0 0 0 0 rgba(0,0,0,.1)}.section .event{background-color:#eab0c41a}.section .event{border-top:7pt solid #a19ea936}.section .event a{color:#1a162d}.section .event{color:#404040}</style><link rel=stylesheet href=/css/tidyverse.css><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Hugo 0.71.1"><title>tune version 2.0.0</title><meta property="og:title" content="tune version 2.0.0"><meta property="og:description" content="A new version of tune brings significant updates for model tuning and  parallel processing."><meta property="og:type" content="article"><meta property="og:url" content="https://www.tidyverse.org/blog/2025/11/tune-2/"><meta property="twitter:card" content="summary_large_image"><meta property="og:title" content="tune version 2.0.0 - Tidyverse"><meta property="description" content="A new version of tune brings significant updates for model tuning and  parallel processing."><meta property="og:description" content="A new version of tune brings significant updates for model tuning and  parallel processing."><meta property="og:image" content="https://www.tidyverse.org/blog/2025/11/tune-2/thumbnail-sq.jpg"><meta name=twitter:image content="https://www.tidyverse.org/blog/2025/11/tune-2/thumbnail-wd.jpg"><link rel=apple-touch-icon sizes=180x180 href=/images/favicons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/images/favicons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/images/favicons/favicon-16x16.png><link rel=manifest href=/images/favicons/site.webmanifest><link rel=mask-icon href=/images/favicons/safari-pinned-tab.svg><link rel="shortcut icon" href=/images/favicons/favicon.ico><meta name=msapplication-TileColor content="#da532c"><meta name=msapplication-config href=/images/favicons/browserconfig.xml><script type=text/javascript src=/js/jquery-3.5.1.min.js></script><script type=text/javascript src=/js/site.js></script><link rel=icon href=/images/favicon.ico><script type=text/javascript src=/js/clipboard.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin=anonymous></script><script defer data-domain=tidyverse.org,all.tidyverse.org src=https://plausible.io/js/plausible.js></script></head><body><div id=appTidyverseSite class="shrinkHeader alwaysShrinkHeader"><div id=main><div id=rStudioHeader><nav class=band><div class="innards bandContent"><div><a class=productName href=/>Tidyverse</a></div><div id=menu><div id=menuToggler></div><div id=menuItems><a class=menuItem href=/packages/>Packages</a>
<a class="menuItem current" href=/blog/>Blog</a>
<a class=menuItem href=/learn/>Learn</a>
<a class=menuItem href=/help/>Help</a>
<a class=menuItem href=/contribute/>Contribute</a></div></div></div></nav></div><main><div class="band padForHeader pushFooter"><div class=bandContent><div class="full splitColumns withMobileMargins"><div class=column75><h1 class=article-title>tune version 2.0.0</h1><div class=article-header aria-hidden=true><div class=photo><img src=/blog/2025/11/tune-2/thumbnail-wd.jpg></div><div class=photoCredit>Photo by <a href=https://unsplash.com/photos/black-car-stereo-turned-on-at-7-qHbg3DKB1Y0>Stephen Andrews</a></div></div><span class=article-date><i class="fas fa-calendar-day fa-fw"></i>&nbsp;&nbsp;2025/11/05</span><p style=margin-bottom:.5em;margin-top:.85em><i class="fas fa-tags"></i>&nbsp;
<a href=/tags/parallel-processing/>parallel processing</a>,
<a href=/tags/postprocessing/>postprocessing</a>,
<a href=/tags/tidymodels/>tidymodels</a></p><p style=margin-top:.5em><i class="fas fa-user-circle fa-fw"></i>&nbsp;
Max Kuhn, Simon Couch, Emil Hvitfeldt, Hannah Frick</p><div class=article-content><p>We&rsquo;re very chuffed to announce the release of
<a href=https://tune.tidymodels.org target=_blank rel=noopener>tune</a> <strong>2.0.0</strong>. tune is a package that can be used to resample models and/or optimize their tuning parameters</p><p>You can install it from CRAN with:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nf>install.packages</span><span class=p>(</span><span class=s>&#34;tune&#34;</span><span class=p>)</span>
</code></pre></div><p>This blog post will describe the two major updates to the package. You can see a full list of changes in the
<a href=https://tune.tidymodels.org/news/index.html#tune-200 target=_blank rel=noopener>release notes</a>.</p><p>Those two big improvements to the package: new parallel processing features and postprocessing.</p><h2 id=using-future-or-mirai-for-parallel-processing>Using future or mirai for parallel processing
<a href=#using-future-or-mirai-for-parallel-processing><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p><a href=https://www.tidyverse.org/blog/2024/04/tune-1-2-0/#modernized-support-for-parallel-processing target=_blank rel=noopener>Historically</a>, we&rsquo;ve used the foreach package to run calculations in parallel. Sadly, that package is no longer under active development. We&rsquo;ve been
<a href=https://tidyverse.org/blog/2024/04/tune-1-2-0/#modernized-support-for-parallel-processing target=_blank rel=noopener>progressively moving away</a> from it, and as of this version, it is deprecated. In its place, we&rsquo;ve added functionality for the
<a href=https://future.futureverse.org/ target=_blank rel=noopener>future</a> and
<a href=https://mirai.r-lib.org/ target=_blank rel=noopener>mirai</a> packages.</p><p>Previously, you would load a foreach parallel backend package, such as doParallel, doMC, or doFuture, and then register it. For example:</p><pre><code>library(doParallel)
cl &lt;- makePSOCKcluster()
registerDoParallel(cl)
</code></pre><p>Instead, you can use the future package via:</p><pre><code>library(future)
plan(&quot;multisession&quot;)
</code></pre><p>or the mirai package by using</p><pre><code>library(mirai)
daemons(num_cores)
</code></pre><p>Each of these is configurable to run in various ways, such as on remote servers.</p><p><a href=https://tune.tidymodels.org/articles/extras/optimizations.html#foreach-legacy target=_blank rel=noopener>tidymodels.org</a> and the tune
<a href=https://tune.tidymodels.org/reference/parallelism.html target=_blank rel=noopener>pkgdown site</a> have more information to help users switch away from foreach.</p><h2 id=tuning-your-postprocessor>Tuning your postprocessor
<a href=#tuning-your-postprocessor><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>A postprocessor is an operation that modifies model predictions. For example, if your classifier can separate classes but its probability estimates are not accurate enough, you can add a <em>calibrator</em> operation that can attempt to adjust those probability estimates. Another good example is for binary classifiers, where the default threshold for classifying a prediction as an event can be adjusted based on its corresponding probability estimate.</p><p>Currently, we&rsquo;ve enabled postprocessing using the
<a href=https://www.tidyverse.org/blog/2024/10/postprocessing-preview/ target=_blank rel=noopener>tailor package</a>. The operations that are currently available:</p><ul><li><code>adjust_numeric_calibration()</code>: Estimate and apply a calibration model for regression problems.</li><li><code>adjust_numeric_range()</code>: Truncate the range of predictions.</li><li><code>adjust_probability_calibration()</code>: Estimate and apply a calibration model for classification problems.</li><li><code>adjust_probability_threshold()</code>: Covert binary class probabilities to hard class predictions using different thresholds.</li><li><code>adjust_equivocal_zone()</code>: <em>Decline</em> to predict a sample if its strongest class probability is low.</li><li><code>adjust_predictions_custom()</code>: A general <code>mutate()</code>-like adjustment.</li></ul><p>If the operations have arguments, these can be tuned in the same way as the preprocessors (e.g., a recipe) or the supervised model. For example, let&rsquo;s tune the probability threshold for a random forest classifier.</p><p>We&rsquo;ll simulate some data with a class imbalance:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nf>library</span><span class=p>(</span><span class=n>tidymodels</span><span class=p>)</span>

<span class=nf>set.seed</span><span class=p>(</span><span class=m>296</span><span class=p>)</span>
<span class=n>sim_data</span> <span class=o>&lt;-</span> <span class=nf>sim_classification</span><span class=p>(</span><span class=m>2000</span><span class=p>,</span> <span class=n>intercept</span> <span class=o>=</span> <span class=m>-12</span><span class=p>)</span>
<span class=n>sim_data</span> <span class=o>|&gt;</span> <span class=nf>count</span><span class=p>(</span><span class=n>class</span><span class=p>)</span>
</code></pre></div><pre><code>## # A tibble: 2 × 2
##   class       n
##   &lt;fct&gt;   &lt;int&gt;
## 1 class_1   234
## 2 class_2  1766
</code></pre><p>We&rsquo;ll resampling them via 10-fold cross-validation:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=n>sim_rs</span> <span class=o>&lt;-</span> <span class=nf>vfold_cv</span><span class=p>(</span><span class=n>sim_data</span><span class=p>,</span> <span class=n>strata</span> <span class=o>=</span> <span class=n>class</span><span class=p>)</span>
</code></pre></div><p>We define a tailor object that tags the class probability threshold for optimization:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=n>tlr_spec</span> <span class=o>&lt;-</span> 
  <span class=nf>tailor</span><span class=p>()</span> <span class=o>|&gt;</span> 
  <span class=nf>adjust_probability_threshold</span><span class=p>(</span><span class=n>threshold</span> <span class=o>=</span> <span class=nf>tune</span><span class=p>())</span>
</code></pre></div><p>We also specify a random forest that uses its default tuning parameters:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=n>rf_spec</span> <span class=o>&lt;-</span> <span class=nf>rand_forest</span><span class=p>(</span><span class=n>mode</span> <span class=o>=</span> <span class=s>&#34;classification&#34;</span><span class=p>)</span>
<span class=n>rf_thrsh_wflow</span> <span class=o>&lt;-</span> <span class=nf>workflow</span><span class=p>(</span><span class=n>class</span> <span class=o>~</span> <span class=n>.,</span> <span class=n>rf_spec</span><span class=p>,</span> <span class=n>tlr_spec</span><span class=p>)</span>
<span class=n>rf_thrsh_wflow</span>
</code></pre></div><pre><code>## ══ Workflow ════════════════════════════════════════════════════════════
## Preprocessor: Formula
## Model: rand_forest()
## Postprocessor: tailor
## 
## ── Preprocessor ────────────────────────────────────────────────────────
## class ~ .
## 
## ── Model ───────────────────────────────────────────────────────────────
## Random Forest Model Specification (classification)
## 
## Computational engine: ranger 
## 
## 
## ── Postprocessor ───────────────────────────────────────────────────────
</code></pre><pre><code>## 
</code></pre><pre><code>## ── tailor ──────────────────────────────────────────────────────────────
</code></pre><pre><code>## A binary postprocessor with 1 adjustment:
</code></pre><pre><code>## 
</code></pre><pre><code>## • Adjust probability threshold to optimized value.
</code></pre><pre><code>## NA
## NA
## NA
</code></pre><p>With a class imbalance, the default 50% threshold yields high specificity but low sensitivity. When we alter the threshold, those numbers will change, and we can select the best trade-off for our application. Let&rsquo;s tune the workflow:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=n>cls_mtr</span> <span class=o>&lt;-</span> <span class=nf>metric_set</span><span class=p>(</span><span class=n>roc_auc</span><span class=p>,</span> <span class=n>sensitivity</span><span class=p>,</span> <span class=n>specificity</span><span class=p>)</span>

<span class=c1># To run all resamples in parallel:</span>
<span class=n>mirai</span><span class=o>::</span><span class=nf>daemons</span><span class=p>(</span><span class=m>10</span><span class=p>)</span>

<span class=nf>set.seed</span><span class=p>(</span><span class=m>985</span><span class=p>)</span>
<span class=n>rf_thrsh_res</span> <span class=o>&lt;-</span> 
  <span class=n>rf_thrsh_wflow</span> <span class=o>|&gt;</span> 
  <span class=nf>tune_grid</span><span class=p>(</span>
    <span class=n>resamples</span> <span class=o>=</span> <span class=n>sim_rs</span><span class=p>,</span>
    <span class=n>grid</span> <span class=o>=</span> <span class=nf>tibble</span><span class=p>(</span><span class=n>threshold</span> <span class=o>=</span> <span class=nf>seq</span><span class=p>(</span><span class=m>0</span><span class=p>,</span> <span class=m>0.6</span><span class=p>,</span> <span class=n>by</span> <span class=o>=</span> <span class=m>0.01</span><span class=p>)),</span>
    <span class=n>metrics</span> <span class=o>=</span> <span class=n>cls_mtr</span>
  <span class=p>)</span>
</code></pre></div><p>Let&rsquo;s visualize the results:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nf>autoplot</span><span class=p>(</span><span class=n>rf_thrsh_res</span><span class=p>)</span> <span class=o>+</span> <span class=nf>lims</span><span class=p>(</span><span class=n>y</span> <span class=o>=</span> <span class=m>0</span><span class=o>:</span><span class=m>1</span><span class=p>)</span>
</code></pre></div><p><img src=figure/autoplot-1.png alt="plot of chunk autoplot"></p><p>We can see that we can improve sensitivity by <em>reducing</em> the threshold. The rate of decay in specificity is slow compared to the gain in sensitivity until thresholds less than 10% are used. The Brier score is constant over the threshold since it only uses the estimated class probabilities, which are unaffected by the threshold.</p><p>We&rsquo;ve taken great pains to avoid redundant calculations. In this example, for each resample, a single random forest model is trained, and then the postprocessing grid is evaluated. This <em>conditional execution</em> strategy is used to fit the fewest possible preprocessors, models, and postprocessors.</p><p>For this classification example, recent updates to the
<a href=https://desirability2.tidymodels.org/#using-with-the-tune-package target=_blank rel=noopener>desirability2</a> package can enable you to jointly find the best sensitivity/specificity trade-off using the threshold parameter <em>and</em> model calibration/separation using other parameters.</p><p>We&rsquo;ll add more examples and tutorials to tidymodels.org to showcase what we can do with postprocessing.</p><h2 id=whats-next>What&rsquo;s next
<a href=#whats-next><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>This had been a race towards posit::conf(2025). Our focus had to be on the two big features for this release (since we taught workshops that use them). There are a few other relatively minor issues to address as the year closes.</p><p>One is to swap the package that we currently use for Gaussian Processes in Bayesian optimization from the GPfit package to the
<a href=https://github.com/CollinErickson/GauPro target=_blank rel=noopener>GauPro</a> package. The former is not actively supported, and the latter has a few features that we&rsquo;d love to have. Specifically, better kernel methods for non-numeric tuning parameters (e.g., the type of activation function used in neural networks). Hopefully, we&rsquo;ll have another planned release before the end of the year.</p><p>Another near-future development goal is to have comprehensive integration for quantile regression models. We&rsquo;ve added a few parsnip engines already and will expand the support in yardstick and tune.</p><h2 id=acknowledgements>Acknowledgements
<a href=#acknowledgements><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>We&rsquo;d like to thanks everyone who contributed since the previous version:
<a href=https://github.com/3styleJam target=_blank rel=noopener>@3styleJam</a>,
<a href=https://github.com/Diyar0D target=_blank rel=noopener>@Diyar0D</a>,
<a href=https://github.com/EmilHvitfeldt target=_blank rel=noopener>@EmilHvitfeldt</a>,
<a href=https://github.com/hfrick target=_blank rel=noopener>@hfrick</a>,
<a href=https://github.com/MatthieuStigler target=_blank rel=noopener>@MatthieuStigler</a>,
<a href=https://github.com/MattJEM target=_blank rel=noopener>@MattJEM</a>,
<a href=https://github.com/mthulin target=_blank rel=noopener>@mthulin</a>,
<a href=https://github.com/tjburch target=_blank rel=noopener>@tjburch</a>, and
<a href=https://github.com/topepo target=_blank rel=noopener>@topepo</a>.</p></div></div><div class=column25><div class="section hideOnMobile"><div class=sectionTitle>Contents</div><nav id=TableOfContents><ul><li><a href=#using-future-or-mirai-for-parallel-processing>Using future or mirai for parallel processing</a></li><li><a href=#tuning-your-postprocessor>Tuning your postprocessor</a></li><li><a href=#whats-next>What&rsquo;s next</a></li><li><a href=#acknowledgements>Acknowledgements</a></li></ul></nav></div><div class=section></div></div></div></div></div><div id=rStudioFooter class=band><div class=bandContent><div id=copyright>The tidyverse is proudly supported by <a class=rstudioLogo href=https://posit.co/ aria-label="Posit Homepage"></a></div><div id=logos><a href=https://www.tidyverse.org/google_privacy_policy>Privacy policy</a>
<a href=https://github.com/tidyverse class="footerLogo gitHub" aria-label="Tidyverse GitHub organization"></a><a href=https://twitter.com/hashtag/rstats class="footerLogo twitter" aria-label="rstats hashtag on twitter.com"></a></div></div></div></div></div><script type=application/javascript>var dnt=(navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack);var doNotTrack=(dnt=="1"||dnt=="yes");if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');if(window.sessionStorage){var GA_SESSION_STORAGE_KEY='ga:clientId';ga('create','UA-115082821-1',{'storage':'none','clientId':sessionStorage.getItem(GA_SESSION_STORAGE_KEY)});ga(function(tracker){sessionStorage.setItem(GA_SESSION_STORAGE_KEY,tracker.get('clientId'));});}
ga('set','anonymizeIp',true);ga('send','pageview');}</script></body></html></div></div></body></html>