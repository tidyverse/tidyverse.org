<!doctype html><html><head><!doctype html><html lang=en-us><link rel=stylesheet href=/css/fonts.css><link rel=stylesheet href=/css/main-site.css><link rel=stylesheet href=/css/fa5-all.css><style type=text/css>body{background-color:#fff;color:#1a1917}a{color:#38577f}a:hover{color:#42709b}a:focus{outline-color:#42709b}.column25-left .sectionTitle a:hover:not(.current),.column16-left .sectionTitle a:hover:not(.current){color:#1a1917}.icon-attribution,.icon-attribution a{color:#1a1917;opacity:75%}#homeContent .band.first{background-color:#fff}#homeContent .band.second{background-color:#fdeba4}#homeContent .band.third{background-color:#fff}#rStudioHeader{background-color:#1a162d;color:#fff}#rStudioHeader .productName{color:#fff}#rStudioHeader .productName:hover,#rStudioHeader .productName:focus{color:#fdeba4}#rStudioHeader #menu .menuItem.a{background-color:#75aadb;color:#fff}#rStudioHeader #menu .menuItem:hover{background-color:#484557;color:#fff}#rStudioHeader #menu .menuItem.current{background-color:#fff;color:#1a162d;text-decoration:none}#rStudioFooter.band{background-color:#767381}#rStudioFooter .bandContent #copyright{color:#e3eef8}table tbody tr:nth-child(even){background-color:#f7faff}table tbody tr:nth-child(odd){background-color:#fff}.latest{border-top:.5em solid <no value>}.event{-moz-box-shadow:0 0 0 0 rgba(0,0,0,.1);-webkit-box-shadow:0 0 0 0 rgba(0,0,0,.1);box-shadow:0 0 0 0 rgba(0,0,0,.1)}.section .event{background-color:#eab0c41a}.section .event{border-top:7pt solid #a19ea936}.section .event a{color:#1a162d}.section .event{color:#404040}</style><link rel=stylesheet href=/css/tidyverse.css><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Hugo 0.71.1"><title>Air, an extremely fast R formatter</title><meta property="og:title" content="Air, an extremely fast R formatter"><meta property="og:description" content="We are thrilled to announce Air, a new R formatter."><meta property="og:type" content="article"><meta property="og:url" content="https://www.tidyverse.org/blog/2025/02/air/"><meta property="twitter:card" content="summary_large_image"><meta property="og:title" content="Air, an extremely fast R formatter - Tidyverse"><meta property="description" content="We are thrilled to announce Air, a new R formatter."><meta property="og:description" content="We are thrilled to announce Air, a new R formatter."><meta property="og:image" content="https://www.tidyverse.org/blog/2025/02/air/thumbnail-sq.jpg"><meta name=twitter:image content="https://www.tidyverse.org/blog/2025/02/air/thumbnail-wd.jpg"><link rel=apple-touch-icon sizes=180x180 href=/images/favicons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/images/favicons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/images/favicons/favicon-16x16.png><link rel=manifest href=/images/favicons/site.webmanifest><link rel=mask-icon href=/images/favicons/safari-pinned-tab.svg><link rel="shortcut icon" href=/images/favicons/favicon.ico><meta name=msapplication-TileColor content="#da532c"><meta name=msapplication-config href=/images/favicons/browserconfig.xml><script type=text/javascript src=/js/jquery-3.5.1.min.js></script><script type=text/javascript src=/js/site.js></script><link rel=icon href=/images/favicon.ico><script type=text/javascript src=/js/clipboard.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin=anonymous></script><script defer data-domain=tidyverse.org,all.tidyverse.org src=https://plausible.io/js/plausible.js></script></head><body><div id=appTidyverseSite class="shrinkHeader alwaysShrinkHeader"><div id=main><div id=rStudioHeader><nav class=band><div class="innards bandContent"><div><a class=productName href=/>Tidyverse</a></div><div id=menu><div id=menuToggler></div><div id=menuItems><a class=menuItem href=/packages/>Packages</a>
<a class="menuItem current" href=/blog/>Blog</a>
<a class=menuItem href=/learn/>Learn</a>
<a class=menuItem href=/help/>Help</a>
<a class=menuItem href=/contribute/>Contribute</a></div></div></div></nav></div><main><div class="band padForHeader pushFooter"><div class=bandContent><div class="full splitColumns withMobileMargins"><div class=column75><h1 class=article-title>Air, an extremely fast R formatter</h1><div class=article-header aria-hidden=true><div class=photo><img src=/blog/2025/02/air/thumbnail-wd.jpg></div><div class=photoCredit>Photo by <a href=https://unsplash.com/photos/above-cloud-photo-of-blue-skies-yQorCngxzwI>Taylor Van Riper</a></div></div><span class=article-date><i class="fas fa-calendar-day fa-fw"></i>&nbsp;&nbsp;2025/02/21</span></p><p style=margin-top:.5em><i class="fas fa-user-circle fa-fw"></i>&nbsp;
Davis Vaughan and Lionel Henry</p><div class=article-content><p>We&rsquo;re thrilled to announce
<a href=https://posit-dev.github.io/air/ target=_blank rel=noopener>Air</a>, an extremely fast R formatter. Formatters are used to automatically style code, but I find that it&rsquo;s much easier to show what Air can do rather than tell, so we&rsquo;ll start with a few examples. In the video below, we&rsquo;re inside
<a href=https://positron.posit.co/ target=_blank rel=noopener>Positron</a> and we&rsquo;re looking at some unformatted code. Saving the file (yep, that&rsquo;s it!) invokes Air, which automatically and instantaneously formats the code.</p><video controls autoplay loop muted width=100% src=video/case-when.mov style="border:2px solid #ccc"></video><p>Next, let&rsquo;s go over to
<a href=https://posit.co/products/open-source/rstudio/ target=_blank rel=noopener>RStudio</a>. Here we&rsquo;ve got a pipe chain that could use a little formatting. Like in Positron, just save the file:</p><video controls autoplay loop muted width=100% src=video/ggplot.mov style="border:2px solid #ccc"></video><p>Lastly, we&rsquo;ll jump back into Positron. Rather than formatting a single file on save, you might want to instead format an entire project (particularly when first adopting Air). To do so, just run <code>air format .</code> in a terminal from the project root, and Air will recursively format any R files it finds along the way (smartly excluding known generated files, like <code>cpp11.R</code>). Here we&rsquo;ll run Air on dplyr for the first time ever, analyzing and reformatting over 150 files instantly:</p><video controls autoplay loop muted width=100% src=video/project.mov style="border:2px solid #ccc"></video><p>Within the tidyverse, we&rsquo;re already using Air in some of our largest packages, like
<a href=https://github.com/tidyverse/dplyr/pull/7662 target=_blank rel=noopener>dplyr</a>,
<a href=https://github.com/tidyverse/tidyr/pull/1591 target=_blank rel=noopener>tidyr</a>, and
<a href=https://github.com/tidymodels/recipes/pull/1425 target=_blank rel=noopener>recipes</a>.</p><p>Throughout the rest of this post you&rsquo;ll learn what a formatter is, why you&rsquo;d want to use one, and you&rsquo;ll learn a little about how Air decides to format your R code.</p><p>Note that Air is still in beta, so there may be some breaking changes over the next few releases. We also encourage you to use it in combination with a version control system, like git, so that you can clearly see the changes Air makes. That said, we still feel very confident in the current state of Air, and can&rsquo;t wait for you to try it!</p><h2 id=installing-air>Installing Air
<a href=#installing-air><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>If you already know how formatters work and want to jump straight in, follow one of the guides below:</p><ul><li><p>For Positron, Air is
<a href=https://open-vsx.org/extension/posit/air-vscode target=_blank rel=noopener>available</a> on OpenVSX as an Extension. Install it from the Extensions pane within Positron, then read our
<a href=https://posit-dev.github.io/air/editor-vscode.html target=_blank rel=noopener>Positron guide</a>.</p></li><li><p>For VS Code, Air is
<a href="https://marketplace.visualstudio.com/items?itemName=Posit.air-vscode" target=_blank rel=noopener>available</a> on the VS Code Marketplace as an Extension. Install it from the Extensions pane within VS Code, then read our
<a href=https://posit-dev.github.io/air/editor-vscode.html target=_blank rel=noopener>VS Code guide</a>.</p></li><li><p>For RStudio, Air can be set as an external formatter, but you&rsquo;ll need to install the command line tool for Air first. Read our
<a href=https://posit-dev.github.io/air/editor-rstudio.html target=_blank rel=noopener>RStudio guide</a> to get started. Note that this is an experimental feature on the RStudio side, so the exact setup may change a little until it is fully stabilized.</p></li><li><p>For command line users, Air binaries can be installed using our
<a href=https://posit-dev.github.io/air/cli.html target=_blank rel=noopener>standalone installer scripts</a>.</p></li></ul><p>For both Positron and VS Code, the most important thing to enable after installing the extension is format on save for R. You can do that by adding these lines to your <code>settings.json</code> file:</p><div class=highlight><pre class=chroma><code class=language-json data-lang=json><span class=p>{</span>
    <span class=nt>&#34;[r]&#34;</span><span class=p>:</span> <span class=p>{</span>
        <span class=nt>&#34;editor.formatOnSave&#34;</span><span class=p>:</span> <span class=kc>true</span>
    <span class=p>}</span>
<span class=p>}</span>
</code></pre></div><p>To open your <code>settings.json</code> file, run one of the following from the Command Palette:</p><ul><li><p>Run <code>Preferences: Open User Settings (JSON)</code> to modify global user settings.</p></li><li><p>Run <code>Preferences: Open Workspace Settings (JSON)</code> to modify project specific settings. You may want to use this instead of setting the user level setting if you drop in on multiple projects, but not all of them use Air. If you work on a project with collaborators, we recommend that you check in these project specific settings to your repository to ensure that every collaborator is using the same formatting settings.</p></li></ul><p>If your preferred editor isn&rsquo;t listed here, but does support the
<a href=https://microsoft.github.io/language-server-protocol/ target=_blank rel=noopener>Language Server Protocol</a>, then it is likely that we can add support for Air there as well.</p><p>If you have any questions or run into issues installing or using Air, feel free to open an
<a href=https://github.com/posit-dev/air/issues target=_blank rel=noopener>issue</a>!</p><h2 id=whats-a-formatter>What&rsquo;s a formatter?
<a href=#whats-a-formatter><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>A formatter is in charge of the <em>layout</em> of your R code. Formatters do not change the meaning of code; instead they ensure that whitespace, newlines, and other punctuation conform to a set of rules and standards, such as:</p><ul><li><p>Making sure your code is <strong>indented</strong> with the appropriate amount of leading whitespace. By default, Air uses 2 spaces for indentation. You will see this indentation in pipelines:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=n>data</span> <span class=o>|&gt;</span>
  <span class=nf>ggplot</span><span class=p>(</span><span class=nf>aes</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>))</span> <span class=o>+</span>
  <span class=nf>geom_point</span><span class=p>()</span>
</code></pre></div><p>As well as in function calls:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nf>list</span><span class=p>(</span>
  <span class=n>foo</span> <span class=o>=</span> <span class=m>1</span><span class=p>,</span>
  <span class=n>bar</span> <span class=o>=</span> <span class=m>2</span>
<span class=p>)</span>
</code></pre></div></li><li><p>Preventing your code from overflowing a given <strong>line width</strong>. By default, Air uses a line width of 80 characters. It enforces this by splitting long lines of code over multiple lines. For instance, notice how long these expressions are, they would &ldquo;overflow&rdquo; past 80 characters:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=n>band_members</span> <span class=o>|&gt;</span> <span class=nf>select</span><span class=p>(</span><span class=n>name</span><span class=p>)</span> <span class=o>|&gt;</span> <span class=nf>full_join</span><span class=p>(</span><span class=n>band_instruments2</span><span class=p>,</span> <span class=n>by</span> <span class=o>=</span> <span class=nf>join_by</span><span class=p>(</span><span class=n>name</span> <span class=o>==</span> <span class=n>artist</span><span class=p>))</span>

<span class=n>left_join</span> <span class=o>&lt;-</span> <span class=nf>function</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>,</span> <span class=n>by</span> <span class=o>=</span> <span class=kc>NULL</span><span class=p>,</span> <span class=n>copy</span> <span class=o>=</span> <span class=kc>FALSE</span><span class=p>,</span> <span class=n>suffix</span> <span class=o>=</span> <span class=nf>c</span><span class=p>(</span><span class=s>&#34;.x&#34;</span><span class=p>,</span> <span class=s>&#34;.y&#34;</span><span class=p>),</span> <span class=kc>...</span><span class=p>,</span> <span class=n>keep</span> <span class=o>=</span> <span class=kc>NULL</span><span class=p>)</span> <span class=p>{</span>
  <span class=nf>UseMethod</span><span class=p>(</span><span class=s>&#34;left_join&#34;</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></div><p>Air reformats these expressions by switching them from a horizontal layout (called &ldquo;flat&rdquo;) to a vertical one (called &ldquo;expanded&rdquo;):</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=n>band_members</span> <span class=o>|&gt;</span> 
  <span class=nf>select</span><span class=p>(</span><span class=n>name</span><span class=p>)</span> <span class=o>|&gt;</span> 
  <span class=nf>full_join</span><span class=p>(</span><span class=n>band_instruments2</span><span class=p>,</span> <span class=n>by</span> <span class=o>=</span> <span class=nf>join_by</span><span class=p>(</span><span class=n>name</span> <span class=o>==</span> <span class=n>artist</span><span class=p>))</span>

<span class=n>left_join</span> <span class=o>&lt;-</span> <span class=nf>function</span><span class=p>(</span>
  <span class=n>x</span><span class=p>,</span>
  <span class=n>y</span><span class=p>,</span>
  <span class=n>by</span> <span class=o>=</span> <span class=kc>NULL</span><span class=p>,</span>
  <span class=n>copy</span> <span class=o>=</span> <span class=kc>FALSE</span><span class=p>,</span>
  <span class=n>suffix</span> <span class=o>=</span> <span class=nf>c</span><span class=p>(</span><span class=s>&#34;.x&#34;</span><span class=p>,</span> <span class=s>&#34;.y&#34;</span><span class=p>),</span>
  <span class=kc>...</span><span class=p>,</span>
  <span class=n>keep</span> <span class=o>=</span> <span class=kc>NULL</span>
<span class=p>)</span> <span class=p>{</span>
  <span class=nf>UseMethod</span><span class=p>(</span><span class=s>&#34;left_join&#34;</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></div></li><li><p>Standardizing the whitespace around code elements. Have you ever had difficulties deciphering very dense code?</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=m>1+2</span><span class=o>:</span><span class=m>3</span><span class=o>*</span><span class=p>(</span><span class=m>4</span><span class=o>/</span><span class=m>5</span><span class=p>)</span>
</code></pre></div><p>Air reformats this expression to:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=m>1</span> <span class=o>+</span> <span class=m>2</span><span class=o>:</span><span class=m>3</span> <span class=o>*</span> <span class=p>(</span><span class=m>4</span> <span class=o>/</span> <span class=m>5</span><span class=p>)</span>
</code></pre></div></li></ul><h2 id=how-does-a-formatter-improve-your-workflow>How does a formatter improve your workflow?
<a href=#how-does-a-formatter-improve-your-workflow><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>By using a formatter it might seem like you&rsquo;re giving up control over the layout of your code. And indeed you are! However, putting Air in charge of styling your code has substantial advantages.</p><p>First, it automatically forces you to write legible code that is neither too wide nor too narrow, with proper breathing room around syntactic elements. Having a formatter as a companion significantly improves the process of writing code as you no longer have to think about style - the formatter does that for you!</p><p>Second, it reduces friction when working in a team. By agreeing to use a formatter in a project, collaborators no longer have to discuss styling and layout issues. Code sent to you by a colleague will adhere to the standards that you&rsquo;re used to. Code review no longer has to be about style nitpicks and can focus on the substance of the changes instead.</p><h2 id=how-does-air-decide-how-to-format-your-code>How does Air decide how to format your code?
<a href=#how-does-air-decide-how-to-format-your-code><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>Air tries to strike a balance between enforcing rigid rules and allowing authors some control over the layout. Our main source of styling rules is the
<a href=https://style.tidyverse.org target=_blank rel=noopener>Tidyverse style guide</a>, but we occasionally deviate from these.</p><p>There is a trend among modern formatters of being <em>opinionated</em>. Air certainly fits this trend and provides very few
<a href=https://posit-dev.github.io/air/configuration.html target=_blank rel=noopener>configuration options</a>, mostly: the indent style (spaces versus tabs), the indent width, and the line width. However, Air also puts code authors in charge of certain aspects of the layout through the notion of <strong>persistent line breaks</strong>.</p><p>In general, Air is in control of deciding where to put vertical space (line breaks) in your code. For instance if you write:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=n>dictionary</span> <span class=o>&lt;-</span> <span class=nf>list</span><span class=p>(</span><span class=n>bob</span> <span class=o>=</span> <span class=s>&#34;apple&#34;</span><span class=p>,</span>
  <span class=n>jill</span> <span class=o>=</span> <span class=s>&#34;juice&#34;</span><span class=p>)</span>
</code></pre></div><p>Air will figure out that this expression fits on a single line without exceeding the line width. It will discard the line break and reformat to:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=n>dictionary</span> <span class=o>&lt;-</span> <span class=nf>list</span><span class=p>(</span><span class=n>bob</span> <span class=o>=</span> <span class=s>&#34;apple&#34;</span><span class=p>,</span> <span class=n>jill</span> <span class=o>=</span> <span class=s>&#34;juice&#34;</span><span class=p>)</span>
</code></pre></div><p>However there are very specific places at which you can insert a line break that Air perceives as persistent:</p><ul><li><p>Before the very first argument in a function call. This:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=c1># Persistent line break after `(` and before `bob`</span>
<span class=n>dictionary</span> <span class=o>&lt;-</span> <span class=nf>list</span><span class=p>(</span>
  <span class=n>bob</span> <span class=o>=</span> <span class=s>&#34;apple&#34;</span><span class=p>,</span> <span class=n>jill</span> <span class=o>=</span> <span class=s>&#34;juice&#34;</span><span class=p>)</span>
</code></pre></div><p>gets formatted as:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=n>dictionary</span> <span class=o>&lt;-</span> <span class=nf>list</span><span class=p>(</span>
  <span class=n>bob</span> <span class=o>=</span> <span class=s>&#34;apple&#34;</span><span class=p>,</span> 
  <span class=n>jill</span> <span class=o>=</span> <span class=s>&#34;juice&#34;</span>
<span class=p>)</span>
</code></pre></div></li><li><p>Before the very first right-hand side expression in a pipeline. This:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=c1># Persistent line break after `|&gt;` and before `select`</span>
<span class=n>data</span> <span class=o>|&gt;</span>
  <span class=nf>select</span><span class=p>(</span><span class=n>foo</span><span class=p>)</span> <span class=o>|&gt;</span> <span class=nf>filter</span><span class=p>(</span><span class=o>!</span><span class=n>bar</span><span class=p>)</span>
</code></pre></div><p>gets formatted as:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=n>data</span> <span class=o>|&gt;</span>
  <span class=nf>select</span><span class=p>(</span><span class=n>foo</span><span class=p>)</span> <span class=o>|&gt;</span>
  <span class=nf>filter</span><span class=p>(</span><span class=o>!</span><span class=n>bar</span><span class=p>)</span>
</code></pre></div></li></ul><p>A persistent line break will never be removed by Air. But you can remove it manually. Taking the last example, if you join the first lines like this:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=c1># Removed persistent line break after `(`</span>
<span class=n>dictionary</span> <span class=o>&lt;-</span> <span class=nf>list</span><span class=p>(</span><span class=n>bob</span> <span class=o>=</span> <span class=s>&#34;apple&#34;</span><span class=p>,</span> 
  <span class=n>jill</span> <span class=o>=</span> <span class=s>&#34;juice&#34;</span>
<span class=p>)</span>

<span class=c1># Removed persistent line break after `|&gt;`</span>
<span class=n>data</span> <span class=o>|&gt;</span> <span class=nf>select</span><span class=p>(</span><span class=n>foo</span><span class=p>)</span> <span class=o>|&gt;</span>
  <span class=nf>filter</span><span class=p>(</span><span class=o>!</span><span class=n>bar</span><span class=p>)</span>
</code></pre></div><p>Air will recognize that you&rsquo;ve removed the persistent line break, and reformat as:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=n>dictionary</span> <span class=o>&lt;-</span> <span class=nf>list</span><span class=p>(</span><span class=n>bob</span> <span class=o>=</span> <span class=s>&#34;apple&#34;</span><span class=p>,</span> <span class=n>jill</span> <span class=o>=</span> <span class=s>&#34;juice&#34;</span><span class=p>)</span>

<span class=n>data</span> <span class=o>|&gt;</span> <span class=nf>select</span><span class=p>(</span><span class=n>foo</span><span class=p>)</span> <span class=o>|&gt;</span> <span class=nf>filter</span><span class=p>(</span><span class=o>!</span><span class=n>bar</span><span class=p>)</span>
</code></pre></div><p>The goal of this feature is to strike a balance between being opinionated and recognizing that users often know when taking up more vertical space results in more readable output.</p><h2 id=how-can-i-disable-formatting>How can I disable formatting?
<a href=#how-can-i-disable-formatting><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>If you need to disable formatting for a single expression, you can use a <code># fmt: skip</code> comment. This is particularly useful for manual alignment.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=c1># This skips formatting for `list()` and its arguments, retaining the manual alignment</span>
<span class=c1># fmt: skip</span>
<span class=nf>list</span><span class=p>(</span>
  <span class=n>dollar</span> <span class=o>=</span> <span class=s>&#34;USA&#34;</span><span class=p>,</span>
  <span class=n>yen</span>    <span class=o>=</span> <span class=s>&#34;Japan&#34;</span><span class=p>,</span>
  <span class=n>yuan</span>   <span class=o>=</span> <span class=s>&#34;China&#34;</span>
<span class=p>)</span>

<span class=c1># This skips formatting for `tribble()` and its arguments</span>
<span class=c1># fmt: skip</span>
<span class=nf>tribble</span><span class=p>(</span>
  <span class=o>~</span><span class=n>x</span><span class=p>,</span> <span class=o>~</span><span class=n>y</span><span class=p>,</span>
   <span class=m>1</span><span class=p>,</span>  <span class=m>2</span><span class=p>,</span>
<span class=p>)</span>
</code></pre></div><p>If there is a file that Air should skip altogether, you can use a <code># fmt: skip file</code> comment at the very top of the file.</p><p>To learn more about these features, see the
<a href=https://posit-dev.github.io/air/formatter.html#disabling-formatting target=_blank rel=noopener>documentation</a>.</p><h2 id=how-can-i-use-air>How can I use Air?
<a href=#how-can-i-use-air><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>As we&rsquo;ve touched on above, Air can be integrated into your IDE to format code on every save. We expect that this will be the most common way to invoke Air, but there are a few other ways to use Air that we think are pretty cool:</p><ul><li><p>In IDEs:</p><ul><li><p>Format on save</p></li><li><p>Format selection</p></li></ul></li><li><p>At the command line:</p><ul><li><p>Format entire projects with <code>air format .</code></p></li><li><p>Set up a git precommit hook to invoke Air before committing</p></li></ul></li><li><p>In CI:</p><ul><li><p>Use a GitHub Action to check that each PR conforms to formatting standards with <code>air format . --check</code><sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup></p></li><li><p>Use a GitHub Action to automatically format each PR by pushing the results of <code>air format</code> as a commit</p></li></ul></li></ul><p>We don&rsquo;t have guides for all of these use cases yet, but the best place to stay up to date is the
<a href=https://posit-dev.github.io/air/ target=_blank rel=noopener>Air website</a>.</p><h2 id=how-is-this-different-from-styler>How is this different from styler?
<a href=#how-is-this-different-from-styler><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>Air would not exist without the preexisting work and dedication poured into
<a href=https://github.com/r-lib/styler target=_blank rel=noopener>styler</a>. Created by
<a href=https://github.com/lorenzwalthert target=_blank rel=noopener>Lorenz Walthert</a> and
<a href=https://github.com/krlmlr target=_blank rel=noopener>Kirill MÃ¼ller</a>, styler proved that the R community does care about how their code is formatted, and has been the primary implementation of the
<a href=https://style.tidyverse.org/ target=_blank rel=noopener>tidyverse style guide</a> for many years. We&rsquo;ve spoken to Lorenz about Air, and we are all very excited about what Air can do for the future of formatting in R.</p><p>Air is different from styler in a few key ways:</p><ul><li><p>Air is much faster. So much so that it enables new ways of using a formatter that were somewhat painful before, like formatting on every save, or formatting entire projects on every pull request.</p></li><li><p>Air is less configurable. As mentioned above, Air provides very few
<a href=https://posit-dev.github.io/air/configuration.html target=_blank rel=noopener>configuration options</a>.</p></li><li><p>Air respects a line width, with a default of 80 characters.</p></li><li><p>Air does not require R to run. Unlike styler, which is an R package, Air is written in Rust and is distributed as a pre-compiled binary for many platforms. This makes Air easy to use across IDEs or on CI with very little setup required.</p></li></ul><h2 id=how-fast-is-extremely-fast>How fast is &ldquo;extremely fast&rdquo;?
<a href=#how-fast-is-extremely-fast><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>Air is written in Rust using the formatting infrastructure provided by
<a href=https://github.com/biomejs/biome target=_blank rel=noopener>Biome</a><sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>. This is also the same infrastructure that
<a href=https://github.com/astral-sh/ruff target=_blank rel=noopener>Ruff</a>, the fast Python formatter, originally forked from. Both of those projects are admired for their performance, and Air is no exception.</p><p>One goal for Air is for &ldquo;format on save&rdquo; to be imperceptibly fast, encouraging you to keep it on at all times. Benchmarking formatters is a bit hand wavy due to some having built in caching, so bear with me, but one way to proxy this performance is by formatting a large single file, for example the 800+ line
<a href=https://github.com/tidyverse/dplyr/blob/main/R/join.R target=_blank rel=noopener>join.R</a> in dplyr. Formatting this takes<sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup>:</p><ul><li><p>0.01 seconds with Air</p></li><li><p>1 second with styler (no cache)</p></li></ul><p>So, ~100x faster for Air! If you make a few changes in the file after the first round of formatting and run the formatter again, then you get something like:</p><ul><li><p>0.01 seconds with Air</p></li><li><p>0.5 seconds with styler (with cache)</p></li></ul><p>Half a second for styler might not sound that bad (and indeed, for a formatter written in R it&rsquo;s pretty good), but it&rsquo;s slow enough that you&rsquo;ll &ldquo;feel&rdquo; it if you try and invoke styler on every save. But 0.01 seconds? You&rsquo;ll never even know its running!</p><p>The differences get even more drastic if you format entire projects. Formatting the ~150 R files in dplyr takes<sup id=fnref:4><a href=#fn:4 class=footnote-ref role=doc-noteref>4</a></sup>:</p><ul><li><p>0.3 seconds with Air</p></li><li><p>100 seconds with styler</p></li></ul><p>Over 300x faster!</p><p>Out of curiosity, we also ran Air over all ~900 R files in base R and it finished in under 2 seconds.</p><h2 id=wrapping-up>Wrapping up
<a href=#wrapping-up><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>By contributing this formatter to the R community, our objective is threefold:</p><ul><li><p>Vastly improve your enjoyment of writing well-styled R code by removing the chore of editing whitespace.</p></li><li><p>Reduce friction in collaborative projects by establishing a consistent style once and for all.</p></li><li><p>Improve the overall readability of R code for the community.</p></li></ul><p>We hope that Air will prove to be a valuable companion in your daily workflow!</p><section class=footnotes role=doc-endnotes><hr><ol><li id=fn:1 role=doc-endnote><p>The Shiny team already has a
<a href=https://github.com/rstudio/shiny-workflows/tree/main/format-r-code target=_blank rel=noopener>GitHub Action</a> to help with this. We will likely work on refining this and incorporating it more officially into an Air or r-lib repository. <a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2 role=doc-endnote><p>Biome is an open source project maintained by community members, please consider
<a href=https://github.com/sponsors/biomejs#sponsors target=_blank rel=noopener>sponsoring them</a>! <a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3 role=doc-endnote><p>These benchmarks were run with <code>air format R/join.R</code> and <code>styler::style_file("R/join.R")</code>. <a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:4 role=doc-endnote><p>With <code>air format .</code> and
<a href=https://styler.r-lib.org/reference/style_pkg.html target=_blank rel=noopener><code>styler::style_pkg()</code></a> <a href=#fnref:4 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></section></div></div><div class=column25><div class="section hideOnMobile"><div class=sectionTitle>Contents</div><nav id=TableOfContents><ul><li><a href=#installing-air>Installing Air</a></li><li><a href=#whats-a-formatter>What&rsquo;s a formatter?</a></li><li><a href=#how-does-a-formatter-improve-your-workflow>How does a formatter improve your workflow?</a></li><li><a href=#how-does-air-decide-how-to-format-your-code>How does Air decide how to format your code?</a></li><li><a href=#how-can-i-disable-formatting>How can I disable formatting?</a></li><li><a href=#how-can-i-use-air>How can I use Air?</a></li><li><a href=#how-is-this-different-from-styler>How is this different from styler?</a></li><li><a href=#how-fast-is-extremely-fast>How fast is &ldquo;extremely fast&rdquo;?</a></li><li><a href=#wrapping-up>Wrapping up</a></li></ul></nav></div><div class=section></div></div></div></div></div><div id=rStudioFooter class=band><div class=bandContent><div id=copyright>The tidyverse is proudly supported by <a class=rstudioLogo href=https://posit.co/ aria-label="Posit Homepage"></a></div><div id=logos><a href=https://www.tidyverse.org/google_privacy_policy>Privacy policy</a>
<a href=https://github.com/tidyverse class="footerLogo gitHub" aria-label="Tidyverse GitHub organization"></a><a href=https://twitter.com/hashtag/rstats class="footerLogo twitter" aria-label="rstats hashtag on twitter.com"></a></div></div></div></div></div><script type=application/javascript>var dnt=(navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack);var doNotTrack=(dnt=="1"||dnt=="yes");if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');if(window.sessionStorage){var GA_SESSION_STORAGE_KEY='ga:clientId';ga('create','UA-115082821-1',{'storage':'none','clientId':sessionStorage.getItem(GA_SESSION_STORAGE_KEY)});ga(function(tracker){sessionStorage.setItem(GA_SESSION_STORAGE_KEY,tracker.get('clientId'));});}
ga('set','anonymizeIp',true);ga('send','pageview');}</script></body></html></div></div></body></html>