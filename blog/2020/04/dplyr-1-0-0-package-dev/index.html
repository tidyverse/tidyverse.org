<!doctype html><html><head><!doctype html><html lang=en-us><link rel=stylesheet href=/css/fonts.css><link rel=stylesheet href=/css/main-site.css><link rel=stylesheet href=/css/fa5-all.css><style type=text/css>body{background-color:#fff;color:#1a1917}a{color:#38577f}a:hover{color:#42709b}a:focus{outline-color:#42709b}.column25-left .sectionTitle a:hover:not(.current),.column16-left .sectionTitle a:hover:not(.current){color:#1a1917}.icon-attribution,.icon-attribution a{color:#1a1917;opacity:75%}#homeContent .band.first{background-color:#fff}#homeContent .band.second{background-color:#fdeba4}#homeContent .band.third{background-color:#fff}#rStudioHeader{background-color:#1a162d;color:#fff}#rStudioHeader .productName{color:#fff}#rStudioHeader .productName:hover,#rStudioHeader .productName:focus{color:#fdeba4}#rStudioHeader #menu .menuItem.a{background-color:#75aadb;color:#fff}#rStudioHeader #menu .menuItem:hover{background-color:#484557;color:#fff}#rStudioHeader #menu .menuItem.current{background-color:#fff;color:#1a162d;text-decoration:none}#rStudioFooter.band{background-color:#767381}#rStudioFooter .bandContent #copyright{color:#e3eef8}table tbody tr:nth-child(even){background-color:#f7faff}table tbody tr:nth-child(odd){background-color:#fff}.latest{border-top:.5em solid <no value>}.event{-moz-box-shadow:0 0 0 0 rgba(0,0,0,.1);-webkit-box-shadow:0 0 0 0 rgba(0,0,0,.1);box-shadow:0 0 0 0 rgba(0,0,0,.1)}.section .event{background-color:#eab0c41a}.section .event{border-top:7pt solid #a19ea936}.section .event a{color:#1a162d}.section .event{color:#404040}</style><link rel=stylesheet href=/css/tidyverse.css><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Hugo 0.71.1"><title>dplyr 1.0.0 for package developers</title><meta property="og:title" content="dplyr 1.0.0 for package developers"><meta property="og:description" content="dplyr 1.0.0 is scheduled for release on May 15. This blog post talks about what package maintainers can do to prepare."><meta property="og:type" content="article"><meta property="og:url" content="https://www.tidyverse.org/blog/2020/04/dplyr-1-0-0-package-dev/"><meta property="twitter:card" content="summary_large_image"><meta property="og:title" content="dplyr 1.0.0 for package developers - Tidyverse"><meta property="description" content="dplyr 1.0.0 is scheduled for release on May 15. This blog post talks about what package maintainers can do to prepare."><meta property="og:description" content="dplyr 1.0.0 is scheduled for release on May 15. This blog post talks about what package maintainers can do to prepare."><meta property="og:image" content="https://www.tidyverse.org/blog/2020/04/dplyr-1-0-0-package-dev/thumbnail-sq.jpg"><meta name=twitter:image content="https://www.tidyverse.org/blog/2020/04/dplyr-1-0-0-package-dev/thumbnail-wd.jpg"><link rel=apple-touch-icon sizes=180x180 href=/images/favicons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/images/favicons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/images/favicons/favicon-16x16.png><link rel=manifest href=/images/favicons/site.webmanifest><link rel=mask-icon href=/images/favicons/safari-pinned-tab.svg><link rel="shortcut icon" href=/images/favicons/favicon.ico><meta name=msapplication-TileColor content="#da532c"><meta name=msapplication-config href=/images/favicons/browserconfig.xml><script type=text/javascript src=/js/jquery-3.5.1.min.js></script><script type=text/javascript src=/js/site.js></script><link rel=icon href=/images/favicon.ico><script type=text/javascript src=/js/clipboard.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin=anonymous></script><script defer data-domain=tidyverse.org,all.tidyverse.org src=https://plausible.io/js/plausible.js></script></head><body><div id=appTidyverseSite class="shrinkHeader alwaysShrinkHeader"><div id=main><div id=rStudioHeader><nav class=band><div class="innards bandContent"><div><a class=productName href=/%20/>Tidyverse</a></div><div id=menu><div id=menuToggler></div><div id=menuItems><a class=menuItem href=/packages/>Packages</a>
<a class="menuItem current" href=/blog/>Blog</a>
<a class=menuItem href=/learn/>Learn</a>
<a class=menuItem href=/help/>Help</a>
<a class=menuItem href=/contribute/>Contribute</a></div></div></div></nav></div><main><div class="band padForHeader pushFooter"><div class=bandContent><div class="full splitColumns withMobileMargins"><div class=column75><h1 class=article-title>dplyr 1.0.0 for package developers</h1><div class=article-header aria-hidden=true><div class=photo><img src=/blog/2020/04/dplyr-1-0-0-package-dev/thumbnail-wd.jpg></div><div class=photoCredit>Photo by <a href=https://unsplash.com/photos/LtphNTXHQAc>Tekton</a></div></div><span class=article-date><i class="fas fa-calendar-day fa-fw"></i>&nbsp;&nbsp;2020/04/29</span><p style=margin-bottom:.5em;margin-top:.85em><i class="fas fa-tags"></i>&nbsp;
<a href=/tags/dplyr/>dplyr</a>,
<a href=/tags/dplyr-1-0-0/>dplyr-1-0-0</a></p><p style=margin-top:.5em><i class="fas fa-user-circle fa-fw"></i>&nbsp;
Hadley Wickham</p><div class=article-content><p>As you&rsquo;re hopefully aware,
<a href=https://www.tidyverse.org/blog/2020/03/dplyr-1-0-0-is-coming-soon/ target=_blank rel=noopener>dplyr 1.0.0 is coming soon</a>, and we&rsquo;ve been writing a
<a href=https://www.tidyverse.org/tags/dplyr/ target=_blank rel=noopener>series of blog posts</a> about the user-facing changes that you, as a data scientist have to look forward to. Today, I wanted to change tack a little and talk about the changes from the perspective of the package developer.</p><hr><p><strong>Update</strong>: as of June 1, dplyr 1.0.0 is now available on CRAN! Read
<a href=/blog/2020/06/dplyr-1-0-0/>all about it</a> or install it now with <code>install.packages("dplyr")</code>.</p><hr><p>But first, an update on the release process: in the process of preparing for this release, we discovered some subtle problems that arise when combining different types of data frames (including
<a href=http://r-datatable.com target=_blank rel=noopener>data.table</a>s and tibbles). It took us a little while to figure out what we (and package developers need to do), so we&rsquo;ve decided to push back the dplyr release: we&rsquo;re now planning on releasing dplyr 1.0.0 to CRAN on May 15. We&rsquo;re sorry that its going to longer than expected, but this gives package authors who use dplyr more time to handle changes.</p><p>In this post, I want to address how dplyr changes might break package code, then discuss some of the major pain points a package developer might experience, and how to get help if you need it.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nf>library</span><span class=p>(</span><span class=n>dplyr</span><span class=p>,</span> <span class=n>warn.conflicts</span> <span class=o>=</span> <span class=kc>FALSE</span><span class=p>)</span>
</code></pre></div><h2 id=breaking-changes>Breaking changes
<a href=#breaking-changes><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>There are three main ways an update to a package might break your existing code:</p><ul><li><p>We&rsquo;ve introduced a bug. Obviously, we do our best to make sure this doesn&rsquo;t happen (by using software development best practices like unit testing and code review) but it&rsquo;s impossible to eliminate all bugs.</p></li><li><p>We&rsquo;ve fixed a bug or otherwise made change we think is harmless. Sometimes your code accidentally depends on a behaviour that we think is incorrect and we change it. The change will be an improvement for most people, but unfortunately it
<a href=https://xkcd.com/1172/ target=_blank rel=noopener>breaks your code</a>.</p></li><li><p>We&rsquo;ve deliberately made a backward incompatible interface change. We try to make these as rarely as possible, and only to significantly improve usability or consistency. Unless the package or function is experimental, we do our best to make such changes gradually, so that there&rsquo;s a deprecation period before the behaviour goes away altogether.</p></li></ul><p>dplyr 1.0.0 contains very few backward incompatible changes, but it does make a large number of changes that we believe are mostly harmless or minor improvements. The vast majority of these will not affect data analysis code, but some can affect packages, particularly through their unit tests. To give you a flavour for what I mean here, dplyr now preserves the names of atomic vectors:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=n>df</span> <span class=o>&lt;-</span> <span class=nf>tibble</span><span class=p>(</span><span class=n>x</span> <span class=o>=</span> <span class=nf>c</span><span class=p>(</span><span class=n>a</span> <span class=o>=</span> <span class=m>1</span><span class=p>,</span> <span class=n>b</span> <span class=o>=</span> <span class=m>2</span><span class=p>))</span>
<span class=n>df</span> <span class=o>%&gt;%</span> <span class=nf>filter</span><span class=p>(</span><span class=n>x</span> <span class=o>==</span> <span class=m>1</span><span class=p>)</span> <span class=o>%&gt;%</span> <span class=n>.$x</span> <span class=o>%&gt;%</span> <span class=nf>str</span><span class=p>()</span>
<span class=c1>#&gt;  Named num 1</span>
<span class=c1>#&gt;  - attr(*, &#34;names&#34;)= chr &#34;a&#34;</span>
</code></pre></div><p>(With dplyr 0.8.5, this returns an unnamed vector.)</p><p>We made this change to increase internal consistency, as some verbs already did preserve names, and all verbs preserved the names of list-columns. We expect that this will have minimal impact on data-analysis code, but it does affect some packages because now there are names where there weren&rsquo;t before. If this problem affects your code, typically the best strategy is to use <code>unname()</code> to strip the names off.</p><h2 id=our-release-process>Our release process
<a href=#our-release-process><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>To make sure all package maintainers know about potential problems, we run <code>R CMD check</code> on all 1,986 packages that use dplyr. (You can see the results on
<a href=https://github.com/tidyverse/dplyr/tree/master/revdep#revdeps target=_blank rel=noopener>github</a>). If you maintain a package that uses dplyr, and your package has problems, we have already emailed you several times throughout the release process.</p><p>We&rsquo;re also slowly working through the list of packages with problems and preparing pull requests where we can figure out a fix. Unfortunately, we don&rsquo;t have the resources to fix every package, but we&rsquo;re happy to help out if you get stuck (more on that below).</p><h2 id=allequal><code>all.equal()</code>
<a href=#allequal><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>One of the subtlest, but furthest reaching changes for package authors is that we removed the <code>all.equal.tbl_df</code> method. This small change has big consequence because <code>testthat::expect_equal()</code> calls <code>all.equal()</code>, which calls <code>all.equal.tbl_df()</code> when the first argument is a tibble. Unfortunately <code>all.equal.tbl_df</code> had a couple of major problems:</p><ul><li><p>It ignores the difference between data frames and tibbles so this code would pass:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nf>expect_equal</span><span class=p>(</span><span class=nf>tibble</span><span class=p>(</span><span class=n>x</span> <span class=o>=</span> <span class=m>1</span><span class=p>),</span> <span class=nf>data.frame</span><span class=p>(</span><span class=n>x</span> <span class=o>=</span> <span class=m>1</span><span class=p>))</span>
</code></pre></div></li><li><p>By default, it ignores column and row order so the following tests would pass:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nf>expect_equal</span><span class=p>(</span><span class=nf>tibble</span><span class=p>(</span><span class=n>x</span> <span class=o>=</span> <span class=m>1</span><span class=o>:</span><span class=m>2</span><span class=p>),</span> <span class=nf>tibble</span><span class=p>(</span><span class=n>x</span> <span class=o>=</span> <span class=m>2</span><span class=o>:</span><span class=m>1</span><span class=p>))</span>
<span class=nf>expect_equal</span><span class=p>(</span><span class=nf>tibble</span><span class=p>(</span><span class=n>x</span> <span class=o>=</span> <span class=m>1</span><span class=p>,</span> <span class=n>y</span> <span class=o>=</span> <span class=m>2</span><span class=p>),</span> <span class=nf>tibble</span><span class=p>(</span><span class=n>y</span> <span class=o>=</span> <span class=m>2</span><span class=p>,</span> <span class=n>x</span> <span class=o>=</span> <span class=m>1</span><span class=p>))</span>
</code></pre></div></li></ul><p>The first issue was a genuine bug; the second one was something that I must&rsquo;ve thought was a good idea at the time, but looking back at it was clearly a mistake. We&rsquo;ve been aware of this problem for a while, but knew that fixing it would cause a large number of CRAN packages to fail to pass <code>R CMD check</code>. We decided that the 1.0.0 release was a good time to rip the band-aid off.</p><p>Unfortunately if this change affects your code, you won&rsquo;t get a terribly informative error message, so for now you&rsquo;ll just need to pattern match on the errors below:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nf>library</span><span class=p>(</span><span class=n>testthat</span><span class=p>)</span>

<span class=c1># Class mismatch</span>
<span class=nf>expect_equal</span><span class=p>(</span><span class=nf>tibble</span><span class=p>(</span><span class=n>x</span> <span class=o>=</span> <span class=m>1</span><span class=p>),</span> <span class=nf>data.frame</span><span class=p>(</span><span class=n>x</span> <span class=o>=</span> <span class=m>1</span><span class=p>))</span>
<span class=c1>#&gt; Error: `actual` (tibble(x = 1)) not equal to `expected` (data.frame(x = 1)).</span>
<span class=c1>#&gt; </span>
<span class=c1>#&gt; `class(actual)`:   &#34;tbl_df&#34; &#34;tbl&#34; &#34;data.frame&#34;</span>
<span class=c1>#&gt; `class(expected)`:                &#34;data.frame&#34;</span>

<span class=c1># Row order is different</span>
<span class=nf>expect_equal</span><span class=p>(</span><span class=nf>tibble</span><span class=p>(</span><span class=n>x</span> <span class=o>=</span> <span class=m>1</span><span class=o>:</span><span class=m>2</span><span class=p>),</span> <span class=nf>tibble</span><span class=p>(</span><span class=n>x</span> <span class=o>=</span> <span class=m>2</span><span class=o>:</span><span class=m>1</span><span class=p>))</span>
<span class=c1>#&gt; Error: `actual` (tibble(x = 1:2)) not equal to `expected` (tibble(x = 2:1)).</span>
<span class=c1>#&gt; </span>
<span class=c1>#&gt;   `actual$x`: 1 2  </span>
<span class=c1>#&gt; `expected$x`:   2 1</span>

<span class=c1># Column order is different</span>
<span class=nf>expect_equal</span><span class=p>(</span><span class=nf>tibble</span><span class=p>(</span><span class=n>x</span> <span class=o>=</span> <span class=m>1</span><span class=p>,</span> <span class=n>y</span> <span class=o>=</span> <span class=m>2</span><span class=p>),</span> <span class=nf>tibble</span><span class=p>(</span><span class=n>y</span> <span class=o>=</span> <span class=m>2</span><span class=p>,</span> <span class=n>x</span> <span class=o>=</span> <span class=m>1</span><span class=p>))</span>
<span class=c1>#&gt; Error: `actual` (tibble(x = 1, y = 2)) not equal to `expected` (tibble(y = 2, x = 1)).</span>
<span class=c1>#&gt; </span>
<span class=c1>#&gt; `names(actual)`:   &#34;x&#34; &#34;y&#34;    </span>
<span class=c1>#&gt; `names(expected)`:     &#34;y&#34; &#34;x&#34;</span>
</code></pre></div><p>Fixing these failures will typically involve updating the expected value.</p><p>(The problem of uninformative failures prompted me to start work on the
<a href=https://waldo.r-lib.org target=_blank rel=noopener>waldo package</a> that attempts to do better. You can try it out by installing the dev version of testthat, <code>devtools::install_github("r-lib/testthat")</code>, but note that it&rsquo;s still experimental so it&rsquo;s only recommended for the adventurous.)</p><h2 id=increased-strictness-from-vctrs>Increased strictness from vctrs
<a href=#increased-strictness-from-vctrs><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>As we
<a href=https://www.tidyverse.org/blog/2020/04/dplyr-1-0-0-and-vctrs/ target=_blank rel=noopener>discussed recently</a>, dplyr now uses the
<a href=https://vctrs.r-lib.org target=_blank rel=noopener>vctrs package</a> under the hood. This increased strictness affects a few edge cases. For example, in dplyr 0.8.5, the following code returned <code>tibble(x = character())</code> (what we&rsquo;d now consider to be a bug):</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=n>df1</span> <span class=o>&lt;-</span> <span class=nf>tibble</span><span class=p>(</span><span class=n>x</span> <span class=o>=</span> <span class=nf>integer</span><span class=p>())</span>
<span class=n>df2</span> <span class=o>&lt;-</span> <span class=nf>tibble</span><span class=p>(</span><span class=n>x</span> <span class=o>=</span> <span class=nf>character</span><span class=p>())</span>
<span class=nf>bind_rows</span><span class=p>(</span><span class=n>df1</span><span class=p>,</span> <span class=n>df2</span><span class=p>)</span>
<span class=c1>#&gt; Error: Can&#39;t combine `..1$x` &lt;integer&gt; and `..2$x` &lt;character&gt;.</span>
</code></pre></div><p>If this affects your package, you&rsquo;ll typically need to think about what the type of each column should be, and then ensure that&rsquo;s the case everywhere in your code.</p><h2 id=need-help>Need help?
<a href=#need-help><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>If you just can&rsquo;t figure out how to fix your package, please let us know! The fastest way to get help is to
<a href=https://github.com/tidyverse/dplyr target=_blank rel=noopener>file an issue</a> containing a
<a href=http://reprex.tidyverse.org/ target=_blank rel=noopener>reprex</a> that illustrates the precise problem. But if you&rsquo;re struggling to make a reprex, you can give us a link to your repo, and we&rsquo;ll take a look.</p></div></div><div class=column25><div class="section hideOnMobile"><div class=sectionTitle>Contents</div><nav id=TableOfContents><ul><li><a href=#breaking-changes>Breaking changes</a></li><li><a href=#our-release-process>Our release process</a></li><li><a href=#allequal><code>all.equal()</code></a></li><li><a href=#increased-strictness-from-vctrs>Increased strictness from vctrs</a></li><li><a href=#need-help>Need help?</a></li></ul></nav></div><div class=section></div></div></div></div></div><div id=rStudioFooter class=band><div class=bandContent><div id=copyright>The tidyverse is proudly supported by <a class=rstudioLogo href=https://posit.co/ aria-label="Posit Homepage"></a></div><div id=logos><a href=https://www.tidyverse.org/google_privacy_policy>Privacy policy</a>
<a href=https://github.com/tidyverse class="footerLogo gitHub" aria-label="Tidyverse GitHub organization"></a><a href=https://twitter.com/hashtag/rstats class="footerLogo twitter" aria-label="rstats hashtag on twitter.com"></a></div></div></div></div></div><script src=/js/math-code.js></script><script type=text/x-mathjax-config>
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    processEscapes: true
  }
});
</script><script async src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script type=application/javascript>var dnt=(navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack);var doNotTrack=(dnt=="1"||dnt=="yes");if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');if(window.sessionStorage){var GA_SESSION_STORAGE_KEY='ga:clientId';ga('create','UA-115082821-1',{'storage':'none','clientId':sessionStorage.getItem(GA_SESSION_STORAGE_KEY)});ga(function(tracker){sessionStorage.setItem(GA_SESSION_STORAGE_KEY,tracker.get('clientId'));});}
ga('set','anonymizeIp',true);ga('send','pageview');}</script></body></html></div></div></body></html>