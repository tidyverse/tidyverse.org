<!doctype html><html><head><!doctype html><html lang=en-us><link rel=stylesheet href=/css/fonts.css><link rel=stylesheet href=/css/main-site.css><link rel=stylesheet href=/css/fa5-all.css><style type=text/css>body{background-color:#fff;color:#1a1917}a{color:#38577f}a:hover{color:#42709b}a:focus{outline-color:#42709b}.column25-left .sectionTitle a:hover:not(.current),.column16-left .sectionTitle a:hover:not(.current){color:#1a1917}.icon-attribution,.icon-attribution a{color:#1a1917;opacity:75%}#homeContent .band.first{background-color:#fff}#homeContent .band.second{background-color:#fdeba4}#homeContent .band.third{background-color:#fff}#rStudioHeader{background-color:#1a162d;color:#fff}#rStudioHeader .productName{color:#fff}#rStudioHeader .productName:hover,#rStudioHeader .productName:focus{color:#fdeba4}#rStudioHeader #menu .menuItem.a{background-color:#75aadb;color:#fff}#rStudioHeader #menu .menuItem:hover{background-color:#484557;color:#fff}#rStudioHeader #menu .menuItem.current{background-color:#fff;color:#1a162d;text-decoration:none}#rStudioFooter.band{background-color:#767381}#rStudioFooter .bandContent #copyright{color:#e3eef8}table tbody tr:nth-child(even){background-color:#f7faff}table tbody tr:nth-child(odd){background-color:#fff}.latest{border-top:.5em solid <no value>}.event{-moz-box-shadow:0 0 0 0 rgba(0,0,0,.1);-webkit-box-shadow:0 0 0 0 rgba(0,0,0,.1);box-shadow:0 0 0 0 rgba(0,0,0,.1)}.section .event{background-color:#eab0c41a}.section .event{border-top:7pt solid #a19ea936}.section .event a{color:#1a162d}.section .event{color:#404040}</style><link rel=stylesheet href=/css/tidyverse.css><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Hugo 0.71.1"><title>nanonext 1.8.0</title><meta property="og:title" content="nanonext 1.8.0"><meta property="og:description" content="nanonext 1.8.0 adds a low-level streaming HTTP/WebSocket server to R's web infrastructure, with TLS support, new async primitives, and redesigned documentation."><meta property="og:type" content="article"><meta property="og:url" content="https://www.tidyverse.org/blog/2026/02/nanonext-1-8-0/"><meta property="twitter:card" content="summary_large_image"><meta property="og:title" content="nanonext 1.8.0 - Tidyverse"><meta property="description" content="nanonext 1.8.0 adds a low-level streaming HTTP/WebSocket server to R's web infrastructure, with TLS support, new async primitives, and redesigned documentation."><meta property="og:description" content="nanonext 1.8.0 adds a low-level streaming HTTP/WebSocket server to R's web infrastructure, with TLS support, new async primitives, and redesigned documentation."><meta property="og:image" content="https://www.tidyverse.org/blog/2026/02/nanonext-1-8-0/thumbnail-sq.jpg"><meta name=twitter:image content="https://www.tidyverse.org/blog/2026/02/nanonext-1-8-0/thumbnail-wd.jpg"><link rel=apple-touch-icon sizes=180x180 href=/images/favicons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/images/favicons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/images/favicons/favicon-16x16.png><link rel=manifest href=/images/favicons/site.webmanifest><link rel=mask-icon href=/images/favicons/safari-pinned-tab.svg><link rel="shortcut icon" href=/images/favicons/favicon.ico><meta name=msapplication-TileColor content="#da532c"><meta name=msapplication-config href=/images/favicons/browserconfig.xml><script type=text/javascript src=/js/jquery-3.5.1.min.js></script><script type=text/javascript src=/js/site.js></script><link rel=icon href=/images/favicon.ico><script type=text/javascript src=/js/clipboard.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin=anonymous></script><script defer data-domain=tidyverse.org,all.tidyverse.org src=https://plausible.io/js/plausible.js></script></head><body><div id=appTidyverseSite class="shrinkHeader alwaysShrinkHeader"><div id=main><div id=rStudioHeader><nav class=band><div class="innards bandContent"><div><a class=productName href=/>Tidyverse</a></div><div id=menu><div id=menuToggler></div><div id=menuItems><a class=menuItem href=/packages/>Packages</a>
<a class="menuItem current" href=/blog/>Blog</a>
<a class=menuItem href=/learn/>Learn</a>
<a class=menuItem href=/help/>Help</a>
<a class=menuItem href=/contribute/>Contribute</a></div></div></div></nav></div><main><div class="band padForHeader pushFooter"><div class=bandContent><div class="full splitColumns withMobileMargins"><div class=column75><h1 class=article-title>nanonext 1.8.0</h1><div class=article-header aria-hidden=true><div class=photo><img src=/blog/2026/02/nanonext-1-8-0/thumbnail-wd.jpg></div><div class=photoCredit>Photo by <a href=https://unsplash.com/photos/yhJVLxcquEY>Albert Stoynov</a></div></div><span class=article-date><i class="fas fa-calendar-day fa-fw"></i>&nbsp;&nbsp;2026/02/09</span><p style=margin-bottom:.5em;margin-top:.85em><i class="fas fa-tags"></i>&nbsp;
<a href=/tags/r-lib/>r-lib</a>,
<a href=/tags/nanonext/>nanonext</a></p><p style=margin-top:.5em><i class="fas fa-user-circle fa-fw"></i>&nbsp;
Charlie Gao</p><div class=article-content><p>When we
<a href=/blog/2025/09/nanonext-1-7-0/>introduced nanonext</a> last year, we showed how it connects R directly to Python, Go, Rust, and other languages through NNG&rsquo;s messaging protocols. We hinted at its web capabilities &ndash; but that was just the beginning.</p><p>R already has excellent web infrastructure.
<a href=https://shiny.posit.co/ target=_blank rel=noopener>Shiny</a> and
<a href=https://plumber2.posit.co/ target=_blank rel=noopener>plumber2</a> are the go-to tools for building interactive applications and REST APIs in R. They are both powered by
<a href=https://rstudio.github.io/httpuv/ target=_blank rel=noopener>httpuv</a>.
<a href=https://nanonext.r-lib.org target=_blank rel=noopener>nanonext</a> adds a complementary option at the httpuv level of the stack &ndash; a low-level streaming HTTP and WebSocket server built on NNG, giving developers fine-grained control over connections, streaming, and static file serving over TLS. nanonext is for when you need lower-level control &ndash; custom protocols, infrastructure endpoints, or embedding a server alongside an existing Shiny or plumber2 application.</p><p>You can install it from CRAN with:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nf>install.packages</span><span class=p>(</span><span class=s>&#34;nanonext&#34;</span><span class=p>)</span>
</code></pre></div><p>You can see a full list of changes in the
<a href=https://nanonext.r-lib.org/news/#nanonext-180 target=_blank rel=noopener>release notes</a>.</p><h2 id=streaming-httpwebsocket-server>Streaming HTTP/WebSocket server
<a href=#streaming-httpwebsocket-server><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>The flagship feature of this release is
<a href=https://nanonext.r-lib.org/reference/http_server.html target=_blank rel=noopener><code>http_server()</code></a>, a streaming HTTP and WebSocket server with full TLS support. Built on NNG&rsquo;s HTTP server architecture, it brings the same performance that powers nanonext&rsquo;s messaging layer to web serving.</p><p>One server, one port &ndash; HTTP endpoints, WebSocket connections, and streaming all coexist. Static files bypass R entirely, served natively by NNG. WebSocket and streaming connections run callbacks on R&rsquo;s main thread via the later package. Mbed TLS is built in for HTTPS/WSS, and there&rsquo;s no need to run separate processes or bind additional ports.</p><p>Because it shares the same event loop that Shiny uses,
<a href=https://nanonext.r-lib.org/reference/http_server.html target=_blank rel=noopener><code>http_server()</code></a> can run alongside a Shiny app in the same R process. You could spin up a nanonext server to handle health checks, serve static assets, or stream real-time events &ndash; while Shiny or plumber2 handles the application logic. They&rsquo;re designed to work together.</p><p>As part of our investment in expanding what&rsquo;s possible with R, we&rsquo;re already using nanonext at Posit to explore new real-time capabilities, and we&rsquo;re excited to see what the community builds with it.</p><h3 id=basic-http-server>Basic HTTP server
<a href=#basic-http-server><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><p>Where frameworks like plumber2 give you a full-featured API layer with routing, serialization, and documentation out of the box,
<a href=https://nanonext.r-lib.org/reference/http_server.html target=_blank rel=noopener><code>http_server()</code></a> gives you direct control over requests and responses &ndash; the kind of direct access you&rsquo;d reach for when building custom infrastructure or embedding a server inside a larger system.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nf>library</span><span class=p>(</span><span class=n>nanonext</span><span class=p>)</span>

<span class=n>server</span> <span class=o>&lt;-</span> <span class=nf>http_server</span><span class=p>(</span>
  <span class=n>url</span> <span class=o>=</span> <span class=s>&#34;http://127.0.0.1:8080&#34;</span><span class=p>,</span>
  <span class=n>handlers</span> <span class=o>=</span> <span class=nf>list</span><span class=p>(</span>
    <span class=nf>handler</span><span class=p>(</span><span class=s>&#34;/&#34;</span><span class=p>,</span> <span class=nf>function</span><span class=p>(</span><span class=n>req</span><span class=p>)</span> <span class=p>{</span>
      <span class=nf>list</span><span class=p>(</span><span class=n>status</span> <span class=o>=</span> <span class=m>200L</span><span class=p>,</span> <span class=n>body</span> <span class=o>=</span> <span class=s>&#34;Hello from nanonext!&#34;</span><span class=p>)</span>
    <span class=p>}),</span>
    <span class=nf>handler</span><span class=p>(</span><span class=s>&#34;/api/data&#34;</span><span class=p>,</span> <span class=nf>function</span><span class=p>(</span><span class=n>req</span><span class=p>)</span> <span class=p>{</span>
      <span class=nf>list</span><span class=p>(</span>
        <span class=n>status</span> <span class=o>=</span> <span class=m>200L</span><span class=p>,</span>
        <span class=n>headers</span> <span class=o>=</span> <span class=nf>c</span><span class=p>(</span><span class=s>&#34;Content-Type&#34;</span> <span class=o>=</span> <span class=s>&#34;application/json&#34;</span><span class=p>),</span>
        <span class=n>body</span> <span class=o>=</span> <span class=s>&#39;{&#34;value&#34;: 42}&#39;</span>
      <span class=p>)</span>
    <span class=p>},</span> <span class=n>method</span> <span class=o>=</span> <span class=s>&#34;GET&#34;</span><span class=p>)</span>
  <span class=p>)</span>
<span class=p>)</span>
<span class=n>server</span><span class=o>$</span><span class=nf>start</span><span class=p>()</span>
</code></pre></div><p>Handlers receive a request and return a response list. You can freely mix handler types in a single server:</p><table><thead><tr><th align=left>Handler</th><th align=left>Purpose</th></tr></thead><tbody><tr><td align=left><a href=https://nanonext.r-lib.org/reference/handler.html target=_blank rel=noopener><code>handler()</code></a></td><td align=left>HTTP request/response with R callback</td></tr><tr><td align=left><a href=https://nanonext.r-lib.org/reference/handler_ws.html target=_blank rel=noopener><code>handler_ws()</code></a></td><td align=left>WebSocket with <code>on_message</code>, <code>on_open</code>, <code>on_close</code> callbacks</td></tr><tr><td align=left><a href=https://nanonext.r-lib.org/reference/handler_stream.html target=_blank rel=noopener><code>handler_stream()</code></a></td><td align=left>Chunked HTTP streaming (SSE, NDJSON, custom)</td></tr><tr><td align=left><a href=https://nanonext.r-lib.org/reference/handler_file.html target=_blank rel=noopener><code>handler_file()</code></a></td><td align=left>Serve a single static file</td></tr><tr><td align=left><a href=https://nanonext.r-lib.org/reference/handler_directory.html target=_blank rel=noopener><code>handler_directory()</code></a></td><td align=left>Serve a directory tree with automatic MIME types</td></tr><tr><td align=left><a href=https://nanonext.r-lib.org/reference/handler_inline.html target=_blank rel=noopener><code>handler_inline()</code></a></td><td align=left>Serve in-memory content</td></tr><tr><td align=left><a href=https://nanonext.r-lib.org/reference/handler_redirect.html target=_blank rel=noopener><code>handler_redirect()</code></a></td><td align=left>HTTP redirect</td></tr></tbody></table><p>Specifying port <code>0</code> in the URL lets the operating system assign an available port. The actual port is reflected in <code>server$url</code> after <code>$start()</code>, so you can set up test servers without worrying about port conflicts.</p><h3 id=static-file-serving>Static file serving
<a href=#static-file-serving><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><p>Static handlers bypass R entirely &ndash; NNG serves content directly and efficiently:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nf>handler_directory</span><span class=p>(</span><span class=s>&#34;/static&#34;</span><span class=p>,</span> <span class=s>&#34;www/assets&#34;</span><span class=p>)</span>  <span class=c1># serve a folder</span>
<span class=nf>handler_file</span><span class=p>(</span><span class=s>&#34;/favicon.ico&#34;</span><span class=p>,</span> <span class=s>&#34;favicon.ico&#34;</span><span class=p>)</span> <span class=c1># serve a single file</span>
<span class=nf>handler_inline</span><span class=p>(</span>
  <span class=s>&#34;/robots.txt&#34;</span><span class=p>,</span>
  <span class=s>&#34;User-agent: *\nDisallow:&#34;</span><span class=p>,</span>
  <span class=n>content_type</span> <span class=o>=</span> <span class=s>&#34;text/plain&#34;</span>
<span class=p>)</span> <span class=c1># serve in-memory content</span>
</code></pre></div><p>For example, you can serve a rendered Quarto website with a single handler:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=n>server</span> <span class=o>&lt;-</span> <span class=nf>http_server</span><span class=p>(</span>
  <span class=n>url</span> <span class=o>=</span> <span class=s>&#34;http://127.0.0.1:0&#34;</span><span class=p>,</span>
  <span class=n>handlers</span> <span class=o>=</span> <span class=nf>handler_directory</span><span class=p>(</span><span class=s>&#34;/&#34;</span><span class=p>,</span> <span class=s>&#34;_site&#34;</span><span class=p>)</span>
<span class=p>)</span>
<span class=n>server</span><span class=o>$</span><span class=nf>start</span><span class=p>()</span>
<span class=n>server</span><span class=o>$</span><span class=n>url</span>
<span class=c1># Browse to the URL to see your Quarto site</span>
</code></pre></div><h3 id=websocket-server>WebSocket server
<a href=#websocket-server><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><p>WebSockets provide full bidirectional communication &ndash; the server can push messages to the client, and the client can send messages back. WebSocket and HTTP handlers share the same server and port, so a browser can load a page over HTTP and open a WebSocket to the same origin &ndash; no cross-origin configuration needed:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=n>server</span> <span class=o>&lt;-</span> <span class=nf>http_server</span><span class=p>(</span>
  <span class=n>url</span> <span class=o>=</span> <span class=s>&#34;http://127.0.0.1:8080&#34;</span><span class=p>,</span>
  <span class=n>handlers</span> <span class=o>=</span> <span class=nf>list</span><span class=p>(</span>
    <span class=nf>handler</span><span class=p>(</span><span class=s>&#34;/&#34;</span><span class=p>,</span> <span class=nf>function</span><span class=p>(</span><span class=n>req</span><span class=p>)</span> <span class=nf>list</span><span class=p>(</span><span class=n>status</span> <span class=o>=</span> <span class=m>200L</span><span class=p>,</span> <span class=n>body</span> <span class=o>=</span> <span class=s>&#34;&lt;html&gt;...&lt;/html&gt;&#34;</span><span class=p>)),</span>
    <span class=nf>handler_ws</span><span class=p>(</span><span class=s>&#34;/ws&#34;</span><span class=p>,</span>
      <span class=n>on_message</span> <span class=o>=</span> <span class=nf>function</span><span class=p>(</span><span class=n>ws</span><span class=p>,</span> <span class=n>data</span><span class=p>)</span> <span class=n>ws</span><span class=o>$</span><span class=nf>send</span><span class=p>(</span><span class=n>data</span><span class=p>),</span>
      <span class=n>on_open</span> <span class=o>=</span> <span class=nf>function</span><span class=p>(</span><span class=n>ws</span><span class=p>)</span> <span class=nf>cat</span><span class=p>(</span><span class=s>&#34;connected:&#34;</span><span class=p>,</span> <span class=n>ws</span><span class=o>$</span><span class=n>id</span><span class=p>,</span> <span class=s>&#34;\n&#34;</span><span class=p>),</span>
      <span class=n>on_close</span> <span class=o>=</span> <span class=nf>function</span><span class=p>(</span><span class=n>ws</span><span class=p>)</span> <span class=nf>cat</span><span class=p>(</span><span class=s>&#34;disconnected:&#34;</span><span class=p>,</span> <span class=n>ws</span><span class=o>$</span><span class=n>id</span><span class=p>,</span> <span class=s>&#34;\n&#34;</span><span class=p>)</span>
    <span class=p>)</span>
  <span class=p>)</span>
<span class=p>)</span>
</code></pre></div><p>This makes it easy to build lightweight real-time services &ndash; monitoring endpoints or live-updating feeds that push results to the browser as they arrive.</p><h3 id=http-streaming-and-server-sent-events>HTTP streaming and Server-Sent Events
<a href=#http-streaming-and-server-sent-events><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><p>When you only need to push data in one direction &ndash; server to client &ndash; streaming is a lighter-weight alternative to WebSockets. It works over plain HTTP, so any client that speaks HTTP can consume the stream without needing a WebSocket library.
<a href=https://nanonext.r-lib.org/reference/handler_stream.html target=_blank rel=noopener><code>handler_stream()</code></a> enables chunked transfer encoding for streaming responses:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=n>conns</span> <span class=o>&lt;-</span> <span class=nf>list</span><span class=p>()</span>

<span class=nf>handler_stream</span><span class=p>(</span><span class=s>&#34;/events&#34;</span><span class=p>,</span>
  <span class=n>on_request</span> <span class=o>=</span> <span class=nf>function</span><span class=p>(</span><span class=n>conn</span><span class=p>,</span> <span class=n>req</span><span class=p>)</span> <span class=p>{</span>
    <span class=n>conn</span><span class=o>$</span><span class=nf>set_header</span><span class=p>(</span><span class=s>&#34;Content-Type&#34;</span><span class=p>,</span> <span class=s>&#34;text/event-stream&#34;</span><span class=p>)</span>
    <span class=n>conn</span><span class=o>$</span><span class=nf>set_header</span><span class=p>(</span><span class=s>&#34;Cache-Control&#34;</span><span class=p>,</span> <span class=s>&#34;no-cache&#34;</span><span class=p>)</span>
    <span class=n>conns[</span><span class=nf>[as.character</span><span class=p>(</span><span class=n>conn</span><span class=o>$</span><span class=n>id</span><span class=p>)</span><span class=n>]]</span> <span class=o>&lt;&lt;-</span> <span class=n>conn</span>
    <span class=n>conn</span><span class=o>$</span><span class=nf>send</span><span class=p>(</span><span class=nf>format_sse</span><span class=p>(</span><span class=n>data</span> <span class=o>=</span> <span class=s>&#34;connected&#34;</span><span class=p>,</span> <span class=n>id</span> <span class=o>=</span> <span class=s>&#34;1&#34;</span><span class=p>))</span>
  <span class=p>},</span>
  <span class=n>on_close</span> <span class=o>=</span> <span class=nf>function</span><span class=p>(</span><span class=n>conn</span><span class=p>)</span> <span class=p>{</span>
    <span class=n>conns[</span><span class=nf>[as.character</span><span class=p>(</span><span class=n>conn</span><span class=o>$</span><span class=n>id</span><span class=p>)</span><span class=n>]]</span> <span class=o>&lt;&lt;-</span> <span class=kc>NULL</span>
  <span class=p>}</span>
<span class=p>)</span>
</code></pre></div><p>The
<a href=https://nanonext.r-lib.org/reference/format_sse.html target=_blank rel=noopener><code>format_sse()</code></a> helper formats messages per the SSE specification. On the browser side, updates arrive automatically as they happen &ndash; no page refreshes or repeated requests needed. Streaming also supports NDJSON and custom formats &ndash; useful for streaming model training progress, sensor readings, monitoring endpoints, or pipeline notifications.</p><h3 id=tlsssl-support>TLS/SSL support
<a href=#tlsssl-support><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><p>For HTTPS, pass a TLS configuration. nanonext bundles Mbed TLS, so there&rsquo;s nothing extra to install:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=n>cert</span> <span class=o>&lt;-</span> <span class=nf>write_cert</span><span class=p>(</span><span class=n>cn</span> <span class=o>=</span> <span class=s>&#34;127.0.0.1&#34;</span><span class=p>)</span>
<span class=n>server</span> <span class=o>&lt;-</span> <span class=nf>http_server</span><span class=p>(</span>
  <span class=n>url</span> <span class=o>=</span> <span class=s>&#34;https://127.0.0.1:0&#34;</span><span class=p>,</span>
  <span class=n>handlers</span> <span class=o>=</span> <span class=nf>handler</span><span class=p>(</span><span class=s>&#34;/&#34;</span><span class=p>,</span> <span class=nf>function</span><span class=p>(</span><span class=n>req</span><span class=p>)</span> <span class=nf>list</span><span class=p>(</span><span class=n>status</span> <span class=o>=</span> <span class=m>200L</span><span class=p>,</span> <span class=n>body</span> <span class=o>=</span> <span class=s>&#34;Secure!&#34;</span><span class=p>)),</span>
  <span class=n>tls</span> <span class=o>=</span> <span class=nf>tls_config</span><span class=p>(</span><span class=n>server</span> <span class=o>=</span> <span class=n>cert</span><span class=o>$</span><span class=n>server</span><span class=p>)</span>
<span class=p>)</span>
</code></pre></div><h2 id=full-response-headers-for-http-client>Full response headers for HTTP client
<a href=#full-response-headers-for-http-client><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p><a href=https://nanonext.r-lib.org/reference/ncurl.html target=_blank rel=noopener><code>ncurl()</code></a> now accepts <code>response = TRUE</code> to return all response headers:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nv>resp</span> <span class=o>&lt;-</span> <span class=nf><a href=https://nanonext.r-lib.org/reference/ncurl.html>ncurl</a></span><span class=o>(</span><span class=s>"https://postman-echo.com/get"</span>, response <span class=o>=</span> <span class=kc>TRUE</span><span class=o>)</span></span>
<span><span class=nv>resp</span><span class=o>$</span><span class=nv>headers</span> <span class=o>|&gt;</span> <span class=nf><a href=https://rdrr.io/r/base/names.html>names</a></span><span class=o>(</span><span class=o>)</span></span>
<span><span class=c>#&gt;  [1] "Date"                          "Content-Type"                 </span></span>
<span><span class=c>#&gt;  [3] "Content-Length"                "Connection"                   </span></span>
<span><span class=c>#&gt;  [5] "CF-RAY"                        "etag"                         </span></span>
<span><span class=c>#&gt;  [7] "vary"                          "Set-Cookie"                   </span></span>
<span><span class=c>#&gt;  [9] "x-envoy-upstream-service-time" "cf-cache-status"              </span></span>
<span><span class=c>#&gt; [11] "Server"</span></span>
<span></span></code></pre></div><p>Previously you could only request specific headers by name. Now you can retrieve the complete set &ndash; useful for inspecting rate limits, caching directives, and other metadata from REST APIs.</p><h2 id=async-http-with-shiny>Async HTTP with Shiny
<a href=#async-http-with-shiny><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>If your Shiny app calls a REST API, a slow or unresponsive endpoint will block the R process and freeze the app for <em>all</em> users, not just the one who triggered the request.
<a href=https://nanonext.r-lib.org/reference/ncurl_aio.html target=_blank rel=noopener><code>ncurl_aio()</code></a> avoids this &ndash; it performs the HTTP call on a background thread and returns a promise, so the R process stays free to serve other sessions. It works anywhere that accepts a promise, including Shiny&rsquo;s ExtendedTask:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nf>library</span><span class=p>(</span><span class=n>shiny</span><span class=p>)</span>
<span class=nf>library</span><span class=p>(</span><span class=n>bslib</span><span class=p>)</span>
<span class=nf>library</span><span class=p>(</span><span class=n>nanonext</span><span class=p>)</span>

<span class=n>ui</span> <span class=o>&lt;-</span> <span class=nf>page_fluid</span><span class=p>(</span>
  <span class=nf>p</span><span class=p>(</span><span class=s>&#34;The time is &#34;</span><span class=p>,</span> <span class=nf>textOutput</span><span class=p>(</span><span class=s>&#34;current_time&#34;</span><span class=p>,</span> <span class=n>inline</span> <span class=o>=</span> <span class=kc>TRUE</span><span class=p>)),</span>
  <span class=nf>hr</span><span class=p>(),</span>
  <span class=nf>input_task_button</span><span class=p>(</span><span class=s>&#34;btn&#34;</span><span class=p>,</span> <span class=s>&#34;Fetch data&#34;</span><span class=p>),</span>
  <span class=nf>verbatimTextOutput</span><span class=p>(</span><span class=s>&#34;result&#34;</span><span class=p>)</span>
<span class=p>)</span>

<span class=n>server</span> <span class=o>&lt;-</span> <span class=nf>function</span><span class=p>(</span><span class=n>input</span><span class=p>,</span> <span class=n>output</span><span class=p>,</span> <span class=n>session</span><span class=p>)</span> <span class=p>{</span>
  <span class=n>output</span><span class=o>$</span><span class=n>current_time</span> <span class=o>&lt;-</span> <span class=nf>renderText</span><span class=p>({</span>
    <span class=nf>invalidateLater</span><span class=p>(</span><span class=m>1000</span><span class=p>)</span>
    <span class=nf>format</span><span class=p>(</span><span class=nf>Sys.time</span><span class=p>(),</span> <span class=s>&#34;%H:%M:%S %p&#34;</span><span class=p>)</span>
  <span class=p>})</span>

  <span class=n>task</span> <span class=o>&lt;-</span> <span class=n>ExtendedTask</span><span class=o>$</span><span class=nf>new</span><span class=p>(</span>
    <span class=nf>function</span><span class=p>()</span> <span class=nf>ncurl_aio</span><span class=p>(</span><span class=s>&#34;https://postman-echo.com/get&#34;</span><span class=p>,</span> <span class=n>response</span> <span class=o>=</span> <span class=kc>TRUE</span><span class=p>)</span>
  <span class=p>)</span> <span class=o>|&gt;</span> <span class=nf>bind_task_button</span><span class=p>(</span><span class=s>&#34;btn&#34;</span><span class=p>)</span>

  <span class=nf>observeEvent</span><span class=p>(</span><span class=n>input</span><span class=o>$</span><span class=n>btn</span><span class=p>,</span> <span class=n>task</span><span class=o>$</span><span class=nf>invoke</span><span class=p>())</span>
  <span class=n>output</span><span class=o>$</span><span class=n>result</span> <span class=o>&lt;-</span> <span class=nf>renderPrint</span><span class=p>(</span><span class=n>task</span><span class=o>$</span><span class=nf>result</span><span class=p>()</span><span class=o>$</span><span class=n>headers</span><span class=p>)</span>
<span class=p>}</span>

<span class=nf>shinyApp</span><span class=p>(</span><span class=n>ui</span><span class=p>,</span> <span class=n>server</span><span class=p>)</span>
</code></pre></div><h2 id=new-documentation>New documentation
<a href=#new-documentation><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>The package documentation has been reorganized into focused, self-contained guides:</p><table><thead><tr><th align=left>Guide</th><th align=left>Topics</th></tr></thead><tbody><tr><td align=left><a href=https://nanonext.r-lib.org/articles/nanonext.html target=_blank rel=noopener>Quick Reference</a></td><td align=left>At-a-glance API overview</td></tr><tr><td align=left><a href=https://nanonext.r-lib.org/articles/v01-messaging.html target=_blank rel=noopener>Messaging</a></td><td align=left>Cross-language exchange, async I/O, synchronization</td></tr><tr><td align=left><a href=https://nanonext.r-lib.org/articles/v02-protocols.html target=_blank rel=noopener>Protocols</a></td><td align=left>req/rep, pub/sub, surveyor/respondent</td></tr><tr><td align=left><a href=https://nanonext.r-lib.org/articles/v03-configuration.html target=_blank rel=noopener>Configuration</a></td><td align=left>TLS, options, serialization</td></tr><tr><td align=left><a href=https://nanonext.r-lib.org/articles/v04-web.html target=_blank rel=noopener>Web Toolkit</a></td><td align=left>HTTP client/server, WebSocket, streaming</td></tr></tbody></table><p>Whether you need a quick API cheatsheet or a deep dive into WebSocket chat servers, the new vignettes are designed to get you up and running fast.</p><h2 id=bug-fixes-and-improvements>Bug fixes and improvements
<a href=#bug-fixes-and-improvements><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>A new
<a href=https://nanonext.r-lib.org/reference/race_aio.html target=_blank rel=noopener><code>race_aio()</code></a> function returns the index of the first resolved async operation in a list &ndash; useful when waiting on multiple concurrent operations and you want to act on whichever completes first.</p><p>This release also fixes two critical issues &ndash; one affecting TLS operations in fresh sessions with newer system versions of Mbed TLS, another when custom serialization hooks threw errors. Error handling is now more graceful throughout, with closed streams returning error values instead of throwing. Under the hood, serialization, streaming, and async sends are all faster, and the bundled Mbed TLS is updated to 3.6.5 LTS. Building from source no longer requires <code>xz</code>.</p><h2 id=looking-ahead>Looking ahead
<a href=#looking-ahead><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>nanonext gives R a new building block for web infrastructure &ndash; one that complements httpuv. We see it as part of a broader investment in making R a first-class platform for real-time, connected applications. If you want to dig deeper, visit the
<a href=https://nanonext.r-lib.org target=_blank rel=noopener>package website</a> or explore the source on
<a href=https://github.com/r-lib/nanonext target=_blank rel=noopener>GitHub</a>.</p><h2 id=acknowledgements>Acknowledgements
<a href=#acknowledgements><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>A big thank you to everyone who contributed to this release:</p><p><a href=https://github.com/jeroenjanssens target=_blank rel=noopener>@jeroenjanssens</a> and
<a href=https://github.com/shikokuchuo target=_blank rel=noopener>@shikokuchuo</a>.</p></div></div><div class=column25><div class="section hideOnMobile"><div class=sectionTitle>Contents</div><nav id=TableOfContents><ul><li><a href=#streaming-httpwebsocket-server>Streaming HTTP/WebSocket server</a></li><li><a href=#full-response-headers-for-http-client>Full response headers for HTTP client</a></li><li><a href=#async-http-with-shiny>Async HTTP with Shiny</a></li><li><a href=#new-documentation>New documentation</a></li><li><a href=#bug-fixes-and-improvements>Bug fixes and improvements</a></li><li><a href=#looking-ahead>Looking ahead</a></li><li><a href=#acknowledgements>Acknowledgements</a></li></ul></nav></div><div class=section></div></div></div></div></div><div id=rStudioFooter class=band><div class=bandContent><div id=copyright>The tidyverse is proudly supported by <a class=rstudioLogo href=https://posit.co/ aria-label="Posit Homepage"></a></div><div id=logos><a href=https://www.tidyverse.org/google_privacy_policy>Privacy policy</a>
<a href=https://github.com/tidyverse class="footerLogo gitHub" aria-label="Tidyverse GitHub organization"></a><a href=https://twitter.com/hashtag/rstats class="footerLogo twitter" aria-label="rstats hashtag on twitter.com"></a></div></div></div></div></div><script src=/js/math-code.js></script><script type=text/x-mathjax-config>
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    processEscapes: true
  }
});
</script><script async src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script type=application/javascript>var dnt=(navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack);var doNotTrack=(dnt=="1"||dnt=="yes");if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');if(window.sessionStorage){var GA_SESSION_STORAGE_KEY='ga:clientId';ga('create','UA-115082821-1',{'storage':'none','clientId':sessionStorage.getItem(GA_SESSION_STORAGE_KEY)});ga(function(tracker){sessionStorage.setItem(GA_SESSION_STORAGE_KEY,tracker.get('clientId'));});}
ga('set','anonymizeIp',true);ga('send','pageview');}</script></body></html></div></div></body></html>