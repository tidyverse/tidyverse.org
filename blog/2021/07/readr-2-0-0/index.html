<!doctype html><html><head><!doctype html><html lang=en-us><link rel=stylesheet href=/css/fonts.css><link rel=stylesheet href=/css/main-site.css><link rel=stylesheet href=/css/fa5-all.css><style type=text/css>body{background-color:#fff;color:#1a1917}a{color:#38577f}a:hover{color:#42709b}a:focus{outline-color:#42709b}.column25-left .sectionTitle a:hover:not(.current),.column16-left .sectionTitle a:hover:not(.current){color:#1a1917}.icon-attribution,.icon-attribution a{color:#1a1917;opacity:75%}#homeContent .band.first{background-color:#fff}#homeContent .band.second{background-color:#fdeba4}#homeContent .band.third{background-color:#fff}#rStudioHeader{background-color:#1a162d;color:#fff}#rStudioHeader .productName{color:#fff}#rStudioHeader .productName:hover,#rStudioHeader .productName:focus{color:#fdeba4}#rStudioHeader #menu .menuItem.a{background-color:#75aadb;color:#fff}#rStudioHeader #menu .menuItem:hover{background-color:#484557;color:#fff}#rStudioHeader #menu .menuItem.current{background-color:#fff;color:#1a162d;text-decoration:none}#rStudioFooter.band{background-color:#767381}#rStudioFooter .bandContent #copyright{color:#e3eef8}table tbody tr:nth-child(even){background-color:#f7faff}table tbody tr:nth-child(odd){background-color:#fff}.latest{border-top:.5em solid <no value>}.event{-moz-box-shadow:0 0 0 0 rgba(0,0,0,.1);-webkit-box-shadow:0 0 0 0 rgba(0,0,0,.1);box-shadow:0 0 0 0 rgba(0,0,0,.1)}.section .event{background-color:#eab0c41a}.section .event{border-top:7pt solid #a19ea936}.section .event a{color:#1a162d}.section .event{color:#404040}</style><link rel=stylesheet href=/css/tidyverse.css><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Hugo 0.71.1"><title>readr 2.0.0</title><meta property="og:title" content="readr 2.0.0"><meta property="og:description" content="This major release of readr includes a new multi-threaded parsing engine powered by vroom and a 
number of user interface improvements."><meta property="og:type" content="article"><meta property="og:url" content="https://www.tidyverse.org/blog/2021/07/readr-2-0-0/"><meta property="twitter:card" content="summary_large_image"><meta property="og:title" content="readr 2.0.0 - Tidyverse"><meta property="description" content="This major release of readr includes a new multi-threaded parsing engine powered by vroom and a 
number of user interface improvements."><meta property="og:description" content="This major release of readr includes a new multi-threaded parsing engine powered by vroom and a 
number of user interface improvements."><meta property="og:image" content="https://www.tidyverse.org/blog/2021/07/readr-2-0-0/thumbnail-sq.jpg"><meta name=twitter:image content="https://www.tidyverse.org/blog/2021/07/readr-2-0-0/thumbnail-wd.jpg"><link rel=apple-touch-icon sizes=180x180 href=/images/favicons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/images/favicons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/images/favicons/favicon-16x16.png><link rel=manifest href=/images/favicons/site.webmanifest><link rel=mask-icon href=/images/favicons/safari-pinned-tab.svg><link rel="shortcut icon" href=/images/favicons/favicon.ico><meta name=msapplication-TileColor content="#da532c"><meta name=msapplication-config href=/images/favicons/browserconfig.xml><script type=text/javascript src=/js/jquery-3.5.1.min.js></script><script type=text/javascript src=/js/site.js></script><link rel=icon href=/images/favicon.ico><script type=text/javascript src=/js/clipboard.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin=anonymous></script><script defer data-domain=tidyverse.org,all.tidyverse.org src=https://plausible.io/js/plausible.js></script></head><body><div id=appTidyverseSite class="shrinkHeader alwaysShrinkHeader"><div id=main><div id=rStudioHeader><nav class=band><div class="innards bandContent"><div><a class=productName href=/%20/>Tidyverse</a></div><div id=menu><div id=menuToggler></div><div id=menuItems><a class=menuItem href=/packages/>Packages</a>
<a class="menuItem current" href=/blog/>Blog</a>
<a class=menuItem href=/learn/>Learn</a>
<a class=menuItem href=/help/>Help</a>
<a class=menuItem href=/contribute/>Contribute</a></div></div></div></nav></div><main><div class="band padForHeader pushFooter"><div class=bandContent><div class="full splitColumns withMobileMargins"><div class=column75><h1 class=article-title>readr 2.0.0</h1><div class=article-header aria-hidden=true><div class=photo><img src=/blog/2021/07/readr-2-0-0/thumbnail-wd.jpg></div><div class=photoCredit>Photo by <a href=https://unsplash.com/photos/XOW1WqrWNKg>Anastasia Zhenina</a></div></div><span class=article-date><i class="fas fa-calendar-day fa-fw"></i>&nbsp;&nbsp;2021/07/20</span></p><p style=margin-top:.5em><i class="fas fa-user-circle fa-fw"></i>&nbsp;
Jim Hester</p><div class=article-content><p>We&rsquo;re thrilled to announce the release of
<a href=https://readr.tidyverse.org/ target=_blank rel=noopener>readr</a> 2.0.0!</p><p>The readr package makes it easy to get rectangular data out of comma separated (csv), tab separated (tsv) or fixed width files (fwf) and into R. It is designed to flexibly parse many types of data found in the wild, while still cleanly failing when data unexpectedly changes.</p><p>The easiest way to install the latest version from CRAN is to install the whole tidyverse.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nf><a href=https://rdrr.io/r/utils/install.packages.html>install.packages</a></span><span class=o>(</span><span class=s>"tidyverse"</span><span class=o>)</span></code></pre></div><p>Alternatively, install just readr from CRAN:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nf><a href=https://rdrr.io/r/utils/install.packages.html>install.packages</a></span><span class=o>(</span><span class=s>"readr"</span><span class=o>)</span></code></pre></div><p>This blog post will show off the most important changes to the package. These include built-in support for reading multiple files at once, lazy reading and automatic guessing of delimiters among other changes.</p><p>You can see a full list of changes in the
<a href=https://github.com/r-lib/readr/releases target=_blank rel=noopener>readr release notes</a> and
<a href=https://github.com/r-lib/vroom/releases target=_blank rel=noopener>vroom release notes</a>.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=kr><a href=https://rdrr.io/r/base/library.html>library</a></span><span class=o>(</span><span class=nv><a href=https://readr.tidyverse.org>readr</a></span><span class=o>)</span></code></pre></div><h2 id=readr-2nd-edition>readr 2nd edition
<a href=#readr-2nd-edition><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>readr 2.0.0 is a major release of readr and introduces a new 2nd edition parsing and writing engine implemented via the
<a href=https://vroom.r-lib.org/ target=_blank rel=noopener>vroom</a> package. This engine takes advantage of lazy reading, multi-threading and performance characteristics of modern SSD drives to significantly improve the performance of reading and writing compared to the 1st edition engine.</p><p>We have done our best to ensure that the two editions parse csv files as similarly as possible, but in case there are differences that affect your code, you can use the
<a href=https://readr.tidyverse.org/reference/with_edition.html target=_blank rel=noopener><code>with_edition()</code></a> or
<a href=https://readr.tidyverse.org/reference/with_edition.html target=_blank rel=noopener><code>local_edition()</code></a> functions to temporarily change the edition of readr for a section of code:</p><ul><li><p><a href=https://readr.tidyverse.org/reference/with_edition.html target=_blank rel=noopener><code>with_edition(1, read_csv("my_file.csv"))</code></a> will read <code>my_file.csv</code> with the 1st edition of readr.</p></li><li><p><a href=https://readr.tidyverse.org/reference/with_edition.html target=_blank rel=noopener><code>readr::local_edition(1)</code></a> placed at the top of your function or script will use the 1st edition for the rest of the function or script.</p></li></ul><p>We will continue to support the 1st edition for a number of releases, but our goal is to ensure that the 2nd edition is uniformly better than the 1st edition so we plan to eventually deprecate and then remove the 1st edition code.</p><h2 id=reading-multiple-files-at-once>Reading multiple files at once
<a href=#reading-multiple-files-at-once><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>The 2nd edition has built-in support for reading sets of files with the same columns into one output table in a single command. Just pass the filenames to be read in the same vector to the reading function.</p><p>First we generate some files to read by splitting the nycflights dataset by airline.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=kr><a href=https://rdrr.io/r/base/library.html>library</a></span><span class=o>(</span><span class=nv><a href=https://github.com/hadley/nycflights13>nycflights13</a></span><span class=o>)</span>
<span class=nf>purrr</span><span class=nf>::</span><span class=nf><a href=https://purrr.tidyverse.org/reference/imap.html>iwalk</a></span><span class=o>(</span>
  <span class=nf><a href=https://rdrr.io/r/base/split.html>split</a></span><span class=o>(</span><span class=nv>flights</span>, <span class=nv>flights</span><span class=o>$</span><span class=nv>carrier</span><span class=o>)</span>,
  <span class=o>~</span> <span class=o>&#123;</span> <span class=nv>.x</span><span class=o>$</span><span class=nv>carrier</span><span class=o>[[</span><span class=m>1</span><span class=o>]</span><span class=o>]</span>; <span class=nf>vroom</span><span class=nf>::</span><span class=nf><a href=https://vroom.r-lib.org/reference/vroom_write.html>vroom_write</a></span><span class=o>(</span><span class=nv>.x</span>, <span class=nf>glue</span><span class=nf>::</span><span class=nf><a href=https://glue.tidyverse.org/reference/glue.html>glue</a></span><span class=o>(</span><span class=s>"/tmp/flights_&#123;.y&#125;.tsv"</span><span class=o>)</span>, delim <span class=o>=</span> <span class=s>"\t"</span><span class=o>)</span> <span class=o>&#125;</span>
<span class=o>)</span></code></pre></div><p>Then we can efficiently read them into one tibble by passing the filenames directly to readr.</p><p>If the filenames contain data, such as the date when the sample was collected, use <code>id</code> argument to include the paths as a column in the data. You will likely have to post-process the paths to keep only the relevant portion for your use case.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=kr><a href=https://rdrr.io/r/base/library.html>library</a></span><span class=o>(</span><span class=nv><a href=https://dplyr.tidyverse.org>dplyr</a></span><span class=o>)</span>
<span class=nv>files</span> <span class=o>&lt;-</span> <span class=nf>fs</span><span class=nf>::</span><span class=nf><a href=http://fs.r-lib.org/reference/dir_ls.html>dir_ls</a></span><span class=o>(</span>path <span class=o>=</span> <span class=s>"/tmp"</span>, glob <span class=o>=</span> <span class=s>"*flights*tsv"</span><span class=o>)</span>
<span class=nv>files</span>
<span class=c>#&gt; /tmp/flights_9E.tsv /tmp/flights_AA.tsv /tmp/flights_AS.tsv </span>
<span class=c>#&gt; /tmp/flights_B6.tsv /tmp/flights_DL.tsv /tmp/flights_EV.tsv </span>
<span class=c>#&gt; /tmp/flights_F9.tsv /tmp/flights_FL.tsv /tmp/flights_HA.tsv </span>
<span class=c>#&gt; /tmp/flights_MQ.tsv /tmp/flights_OO.tsv /tmp/flights_UA.tsv </span>
<span class=c>#&gt; /tmp/flights_US.tsv /tmp/flights_VX.tsv /tmp/flights_WN.tsv </span>
<span class=c>#&gt; /tmp/flights_YV.tsv</span>
<span class=nf>readr</span><span class=nf>::</span><span class=nf><a href=https://readr.tidyverse.org/reference/read_delim.html>read_tsv</a></span><span class=o>(</span><span class=nv>files</span>, id <span class=o>=</span> <span class=s>"path"</span><span class=o>)</span>
<span class=c>#&gt; <span style=font-weight:700>Rows: </span><span style=color:#00b>336776</span> <span style=font-weight:700>Columns: </span><span style=color:#00b>20</span></span>
<span class=c>#&gt; <span style=color:#0bb>──</span> <span style=font-weight:700>Column specification</span> <span style=color:#0bb>───────────────────────────────────────────────────</span></span>
<span class=c>#&gt; <span style=font-weight:700>Delimiter:</span> "\t"</span>
<span class=c>#&gt; <span style=color:#b00>chr</span>   (4): carrier, tailnum, origin, dest</span>
<span class=c>#&gt; <span style=color:#0b0>dbl</span>  (14): year, month, day, dep_time, sched_dep_time, dep_delay, arr_t...</span>
<span class=c>#&gt; <span style=color:#00b>dttm</span>  (1): time_hour</span>
<span class=c>#&gt; </span>
<span class=c>#&gt; <span style=color:#0bb>ℹ</span> Use <span style=color:#000;background-color:#bbb>`spec()`</span> to retrieve the full column specification for this data.</span>
<span class=c>#&gt; <span style=color:#0bb>ℹ</span> Specify the column types or set <span style=color:#000;background-color:#bbb>`show_col_types = FALSE`</span> to quiet this message.</span>
<span class=c>#&gt; <span style=color:#555># A tibble: 336,776 x 20</span></span>
<span class=c>#&gt;    path         year month   day dep_time sched_dep_time dep_delay arr_time</span>
<span class=c>#&gt;    <span style=color:#555;font-style:italic>&lt;chr&gt;</span>       <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>    <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>          <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>     <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>    <span style=color:#555;font-style:italic>&lt;dbl&gt;</span></span>
<span class=c>#&gt; <span style=color:#555> 1</span> /tmp/fligh…  <span style=text-decoration:underline>2</span>013     1     1      810            810         0     <span style=text-decoration:underline>1</span>048</span>
<span class=c>#&gt; <span style=color:#555> 2</span> /tmp/fligh…  <span style=text-decoration:underline>2</span>013     1     1     <span style=text-decoration:underline>1</span>451           <span style=text-decoration:underline>1</span>500        -<span style=color:#b00>9</span>     <span style=text-decoration:underline>1</span>634</span>
<span class=c>#&gt; <span style=color:#555> 3</span> /tmp/fligh…  <span style=text-decoration:underline>2</span>013     1     1     <span style=text-decoration:underline>1</span>452           <span style=text-decoration:underline>1</span>455        -<span style=color:#b00>3</span>     <span style=text-decoration:underline>1</span>637</span>
<span class=c>#&gt; <span style=color:#555> 4</span> /tmp/fligh…  <span style=text-decoration:underline>2</span>013     1     1     <span style=text-decoration:underline>1</span>454           <span style=text-decoration:underline>1</span>500        -<span style=color:#b00>6</span>     <span style=text-decoration:underline>1</span>635</span>
<span class=c>#&gt; <span style=color:#555> 5</span> /tmp/fligh…  <span style=text-decoration:underline>2</span>013     1     1     <span style=text-decoration:underline>1</span>507           <span style=text-decoration:underline>1</span>515        -<span style=color:#b00>8</span>     <span style=text-decoration:underline>1</span>651</span>
<span class=c>#&gt; <span style=color:#555> 6</span> /tmp/fligh…  <span style=text-decoration:underline>2</span>013     1     1     <span style=text-decoration:underline>1</span>530           <span style=text-decoration:underline>1</span>530         0     <span style=text-decoration:underline>1</span>650</span>
<span class=c>#&gt; <span style=color:#555> 7</span> /tmp/fligh…  <span style=text-decoration:underline>2</span>013     1     1     <span style=text-decoration:underline>1</span>546           <span style=text-decoration:underline>1</span>540         6     <span style=text-decoration:underline>1</span>753</span>
<span class=c>#&gt; <span style=color:#555> 8</span> /tmp/fligh…  <span style=text-decoration:underline>2</span>013     1     1     <span style=text-decoration:underline>1</span>550           <span style=text-decoration:underline>1</span>550         0     <span style=text-decoration:underline>1</span>844</span>
<span class=c>#&gt; <span style=color:#555> 9</span> /tmp/fligh…  <span style=text-decoration:underline>2</span>013     1     1     <span style=text-decoration:underline>1</span>552           <span style=text-decoration:underline>1</span>600        -<span style=color:#b00>8</span>     <span style=text-decoration:underline>1</span>749</span>
<span class=c>#&gt; <span style=color:#555>10</span> /tmp/fligh…  <span style=text-decoration:underline>2</span>013     1     1     <span style=text-decoration:underline>1</span>554           <span style=text-decoration:underline>1</span>600        -<span style=color:#b00>6</span>     <span style=text-decoration:underline>1</span>701</span>
<span class=c>#&gt; <span style=color:#555># … with 336,766 more rows, and 12 more variables: sched_arr_time &lt;dbl&gt;,</span></span>
<span class=c>#&gt; <span style=color:#555>#   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;dbl&gt;, tailnum &lt;chr&gt;,</span></span>
<span class=c>#&gt; <span style=color:#555>#   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,</span></span>
<span class=c>#&gt; <span style=color:#555>#   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</span></span></code></pre></div><h2 id=lazy-reading>Lazy reading
<a href=#lazy-reading><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>Like vroom, the 2nd edition uses lazy reading by default. This means when you first call a <code>read_*()</code> function the delimiters and newlines throughout the entire file are found, but the data is not actually read until it is used in your program. This can provide substantial speed improvements for reading character data. It is particularly useful during interactive exploration of only a subset of a full dataset.</p><p>However this also means that problematic values are not necessarily seen immediately, only when they are actually read. Because of this a warning will be issued the first time a problem is encountered, which may happen after initial reading.</p><p>Run
<a href=https://readr.tidyverse.org/reference/problems.html target=_blank rel=noopener><code>problems()</code></a> on your dataset to read the entire dataset and return all of the problems found. Run
<a href=https://readr.tidyverse.org/reference/problems.html target=_blank rel=noopener><code>problems(lazy = TRUE)</code></a> if you only want to retrieve the problems found so far.</p><p>Deleting files after reading is also impacted by laziness. On Windows open files cannot be deleted as long as a process has the file open. Because readr keeps a file open when reading lazily this means you cannot read, then immediately delete the file. readr will in most cases close the file once it has been completely read. However, if you know you want to be able to delete the file after reading it is best to pass <code>lazy = FALSE</code> when reading the file.</p><h2 id=delimiter-guessing>Delimiter guessing
<a href=#delimiter-guessing><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>The 2nd edition supports automatic guessing of delimiters. This feature is inspired by the automatic guessing in
<a href=https://rdatatable.gitlab.io/data.table/reference/fread.html target=_blank rel=noopener>data.table::fread()</a>, though the precise method used to perform the guessing differs. Because of this you can now use
<a href=https://readr.tidyverse.org/reference/read_delim.html target=_blank rel=noopener><code>read_delim()</code></a> without specifying a <code>delim</code> argument in many cases.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nv>x</span> <span class=o>&lt;-</span> <span class=nf><a href=https://readr.tidyverse.org/reference/read_delim.html>read_delim</a></span><span class=o>(</span><span class=nf><a href=https://readr.tidyverse.org/reference/readr_example.html>readr_example</a></span><span class=o>(</span><span class=s>"mtcars.csv"</span><span class=o>)</span><span class=o>)</span>
<span class=c>#&gt; <span style=font-weight:700>Rows: </span><span style=color:#00b>32</span> <span style=font-weight:700>Columns: </span><span style=color:#00b>11</span></span>
<span class=c>#&gt; <span style=color:#0bb>──</span> <span style=font-weight:700>Column specification</span> <span style=color:#0bb>───────────────────────────────────────────────────</span></span>
<span class=c>#&gt; <span style=font-weight:700>Delimiter:</span> ","</span>
<span class=c>#&gt; <span style=color:#0b0>dbl</span> (11): mpg, cyl, disp, hp, drat, wt, qsec, vs, am, gear, carb</span>
<span class=c>#&gt; </span>
<span class=c>#&gt; <span style=color:#0bb>ℹ</span> Use <span style=color:#000;background-color:#bbb>`spec()`</span> to retrieve the full column specification for this data.</span>
<span class=c>#&gt; <span style=color:#0bb>ℹ</span> Specify the column types or set <span style=color:#000;background-color:#bbb>`show_col_types = FALSE`</span> to quiet this message.</span></code></pre></div><h2 id=new-column-specification-output>New column specification output
<a href=#new-column-specification-output><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>On February 11, 2021 we conducted a
<a href=https://twitter.com/jimhester_/status/1359969288501739528 target=_blank rel=noopener>survey on twitter</a> asking for the community&rsquo;s opinion on the column specification output in readr. We received over <strong>750</strong> 😲 responses to the survey and it revealed a lot of useful information</p><ul><li>3/4 of respondents found printing the column specifications helpful. 👍</li><li>2/3 of respondents preferred the 2nd edition output vs 1st edition output. 💅</li><li>Only 1/5 of respondents correctly knew how to suppress printing of the column specifications. 🤯</li></ul><p>Based on these results we have added two new ways to more easily suppress the column specification printing.</p><ul><li>Use
<a href=https://readr.tidyverse.org/reference/read_delim.html target=_blank rel=noopener><code>read_csv(show_col_types = FALSE)</code></a> to disable printing for a single function call.</li><li>Use
<a href=https://rdrr.io/r/base/options.html target=_blank rel=noopener><code>options(readr.show_types = FALSE)</code></a> to disable printing for the entire session.</li></ul><p>We will also continue to print the column specifications and use the new style output.</p><p>Note you can still obtain the old output style by printing the column specification object directly.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nf><a href=https://readr.tidyverse.org/reference/spec.html>spec</a></span><span class=o>(</span><span class=nv>x</span><span class=o>)</span>
<span class=c>#&gt; cols(</span>
<span class=c>#&gt;   mpg = <span style=color:#0b0>col_double()</span>,</span>
<span class=c>#&gt;   cyl = <span style=color:#0b0>col_double()</span>,</span>
<span class=c>#&gt;   disp = <span style=color:#0b0>col_double()</span>,</span>
<span class=c>#&gt;   hp = <span style=color:#0b0>col_double()</span>,</span>
<span class=c>#&gt;   drat = <span style=color:#0b0>col_double()</span>,</span>
<span class=c>#&gt;   wt = <span style=color:#0b0>col_double()</span>,</span>
<span class=c>#&gt;   qsec = <span style=color:#0b0>col_double()</span>,</span>
<span class=c>#&gt;   vs = <span style=color:#0b0>col_double()</span>,</span>
<span class=c>#&gt;   am = <span style=color:#0b0>col_double()</span>,</span>
<span class=c>#&gt;   gear = <span style=color:#0b0>col_double()</span>,</span>
<span class=c>#&gt;   carb = <span style=color:#0b0>col_double()</span></span>
<span class=c>#&gt; )</span></code></pre></div><p>Or show the new style by calling
<a href=https://rdrr.io/r/base/summary.html target=_blank rel=noopener><code>summary()</code></a> on the specification object.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nf><a href=https://rdrr.io/r/base/summary.html>summary</a></span><span class=o>(</span><span class=nf><a href=https://readr.tidyverse.org/reference/spec.html>spec</a></span><span class=o>(</span><span class=nv>x</span><span class=o>)</span><span class=o>)</span>
<span class=c>#&gt; <span style=color:#0bb>──</span> <span style=font-weight:700>Column specification</span> <span style=color:#0bb>───────────────────────────────────────────────────</span></span>
<span class=c>#&gt; <span style=font-weight:700>Delimiter:</span> ","</span>
<span class=c>#&gt; <span style=color:#0b0>dbl</span> (11): mpg, cyl, disp, hp, drat, wt, qsec, vs, am, gear, carb</span></code></pre></div><h2 id=column-selection>Column selection
<a href=#column-selection><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>The 2nd edition introduces a new argument, <code>col_select</code>, which makes selecting columns to keep (or omit) more straightforward than before. <code>col_select</code> uses the same interface as
<a href=https://dplyr.tidyverse.org/reference/select.html target=_blank rel=noopener><code>dplyr::select()</code></a>, so you can perform very flexible selection operations.</p><ul><li><p>Select with the column names directly.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nv>data</span> <span class=o>&lt;-</span> <span class=nf><a href=https://readr.tidyverse.org/reference/read_delim.html>read_tsv</a></span><span class=o>(</span><span class=s>"/tmp/flights_AA.tsv"</span>, col_select <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/c.html>c</a></span><span class=o>(</span><span class=nv>year</span>, <span class=nv>flight</span>, <span class=nv>tailnum</span><span class=o>)</span><span class=o>)</span>
<span class=c>#&gt; <span style=font-weight:700>Rows: </span><span style=color:#00b>32729</span> <span style=font-weight:700>Columns: </span><span style=color:#00b>3</span></span>
<span class=c>#&gt; <span style=color:#0bb>──</span> <span style=font-weight:700>Column specification</span> <span style=color:#0bb>───────────────────────────────────────────────────</span></span>
<span class=c>#&gt; <span style=font-weight:700>Delimiter:</span> "\t"</span>
<span class=c>#&gt; <span style=color:#b00>chr</span> (1): tailnum</span>
<span class=c>#&gt; <span style=color:#0b0>dbl</span> (2): year, flight</span>
<span class=c>#&gt; </span>
<span class=c>#&gt; <span style=color:#0bb>ℹ</span> Use <span style=color:#000;background-color:#bbb>`spec()`</span> to retrieve the full column specification for this data.</span>
<span class=c>#&gt; <span style=color:#0bb>ℹ</span> Specify the column types or set <span style=color:#000;background-color:#bbb>`show_col_types = FALSE`</span> to quiet this message.</span></code></pre></div></li><li><p>Or by numeric column.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nv>data</span> <span class=o>&lt;-</span> <span class=nf><a href=https://readr.tidyverse.org/reference/read_delim.html>read_tsv</a></span><span class=o>(</span><span class=s>"/tmp/flights_AA.tsv"</span>, col_select <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/c.html>c</a></span><span class=o>(</span><span class=m>1</span>, <span class=m>2</span><span class=o>)</span><span class=o>)</span>
<span class=c>#&gt; <span style=font-weight:700>Rows: </span><span style=color:#00b>32729</span> <span style=font-weight:700>Columns: </span><span style=color:#00b>2</span></span>
<span class=c>#&gt; <span style=color:#0bb>──</span> <span style=font-weight:700>Column specification</span> <span style=color:#0bb>───────────────────────────────────────────────────</span></span>
<span class=c>#&gt; <span style=font-weight:700>Delimiter:</span> "\t"</span>
<span class=c>#&gt; <span style=color:#0b0>dbl</span> (2): year, month</span>
<span class=c>#&gt; </span>
<span class=c>#&gt; <span style=color:#0bb>ℹ</span> Use <span style=color:#000;background-color:#bbb>`spec()`</span> to retrieve the full column specification for this data.</span>
<span class=c>#&gt; <span style=color:#0bb>ℹ</span> Specify the column types or set <span style=color:#000;background-color:#bbb>`show_col_types = FALSE`</span> to quiet this message.</span></code></pre></div></li><li><p>Drop columns by name by prefixing them with
<a href=https://rdrr.io/r/base/Arithmetic.html target=_blank rel=noopener><code>-</code></a>.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nv>data</span> <span class=o>&lt;-</span> <span class=nf><a href=https://readr.tidyverse.org/reference/read_delim.html>read_tsv</a></span><span class=o>(</span><span class=s>"/tmp/flights_AA.tsv"</span>,
  col_select <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/c.html>c</a></span><span class=o>(</span><span class=o>-</span><span class=nv>dep_time</span>, <span class=o>-</span><span class=o>(</span><span class=nv>air_time</span><span class=o>:</span><span class=nv>time_hour</span><span class=o>)</span><span class=o>)</span><span class=o>)</span>
<span class=c>#&gt; <span style=font-weight:700>Rows: </span><span style=color:#00b>32729</span> <span style=font-weight:700>Columns: </span><span style=color:#00b>13</span></span>
<span class=c>#&gt; <span style=color:#0bb>──</span> <span style=font-weight:700>Column specification</span> <span style=color:#0bb>───────────────────────────────────────────────────</span></span>
<span class=c>#&gt; <span style=font-weight:700>Delimiter:</span> "\t"</span>
<span class=c>#&gt; <span style=color:#b00>chr</span> (4): carrier, tailnum, origin, dest</span>
<span class=c>#&gt; <span style=color:#0b0>dbl</span> (9): year, month, day, sched_dep_time, dep_delay, arr_time, sched_a...</span>
<span class=c>#&gt; </span>
<span class=c>#&gt; <span style=color:#0bb>ℹ</span> Use <span style=color:#000;background-color:#bbb>`spec()`</span> to retrieve the full column specification for this data.</span>
<span class=c>#&gt; <span style=color:#0bb>ℹ</span> Specify the column types or set <span style=color:#000;background-color:#bbb>`show_col_types = FALSE`</span> to quiet this message.</span></code></pre></div></li><li><p>Use the selection helpers such as
<a href=https://tidyselect.r-lib.org/reference/starts_with.html target=_blank rel=noopener><code>ends_with()</code></a>.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nv>data</span> <span class=o>&lt;-</span> <span class=nf><a href=https://readr.tidyverse.org/reference/read_delim.html>read_tsv</a></span><span class=o>(</span><span class=s>"/tmp/flights_AA.tsv"</span>, col_select <span class=o>=</span> <span class=nf><a href=https://tidyselect.r-lib.org/reference/starts_with.html>ends_with</a></span><span class=o>(</span><span class=s>"time"</span><span class=o>)</span><span class=o>)</span>
<span class=c>#&gt; <span style=font-weight:700>Rows: </span><span style=color:#00b>32729</span> <span style=font-weight:700>Columns: </span><span style=color:#00b>5</span></span>
<span class=c>#&gt; <span style=color:#0bb>──</span> <span style=font-weight:700>Column specification</span> <span style=color:#0bb>───────────────────────────────────────────────────</span></span>
<span class=c>#&gt; <span style=font-weight:700>Delimiter:</span> "\t"</span>
<span class=c>#&gt; <span style=color:#0b0>dbl</span> (5): dep_time, sched_dep_time, arr_time, sched_arr_time, air_time</span>
<span class=c>#&gt; </span>
<span class=c>#&gt; <span style=color:#0bb>ℹ</span> Use <span style=color:#000;background-color:#bbb>`spec()`</span> to retrieve the full column specification for this data.</span>
<span class=c>#&gt; <span style=color:#0bb>ℹ</span> Specify the column types or set <span style=color:#000;background-color:#bbb>`show_col_types = FALSE`</span> to quiet this message.</span></code></pre></div></li><li><p>Or even rename columns by using a named list.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nv>data</span> <span class=o>&lt;-</span> <span class=nf><a href=https://readr.tidyverse.org/reference/read_delim.html>read_tsv</a></span><span class=o>(</span><span class=s>"/tmp/flights_AA.tsv"</span>, col_select <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/list.html>list</a></span><span class=o>(</span>plane <span class=o>=</span> <span class=nv>tailnum</span>, <span class=nf><a href=https://tidyselect.r-lib.org/reference/everything.html>everything</a></span><span class=o>(</span><span class=o>)</span><span class=o>)</span><span class=o>)</span>
<span class=c>#&gt; <span style=font-weight:700>Rows: </span><span style=color:#00b>32729</span> <span style=font-weight:700>Columns: </span><span style=color:#00b>19</span></span>
<span class=c>#&gt; <span style=color:#0bb>──</span> <span style=font-weight:700>Column specification</span> <span style=color:#0bb>───────────────────────────────────────────────────</span></span>
<span class=c>#&gt; <span style=font-weight:700>Delimiter:</span> "\t"</span>
<span class=c>#&gt; <span style=color:#b00>chr</span>   (4): carrier, tailnum, origin, dest</span>
<span class=c>#&gt; <span style=color:#0b0>dbl</span>  (14): year, month, day, dep_time, sched_dep_time, dep_delay, arr_t...</span>
<span class=c>#&gt; <span style=color:#00b>dttm</span>  (1): time_hour</span>
<span class=c>#&gt; </span>
<span class=c>#&gt; <span style=color:#0bb>ℹ</span> Use <span style=color:#000;background-color:#bbb>`spec()`</span> to retrieve the full column specification for this data.</span>
<span class=c>#&gt; <span style=color:#0bb>ℹ</span> Specify the column types or set <span style=color:#000;background-color:#bbb>`show_col_types = FALSE`</span> to quiet this message.</span>
<span class=nv>data</span>
<span class=c>#&gt; <span style=color:#555># A tibble: 32,729 x 19</span></span>
<span class=c>#&gt;    plane   year month   day dep_time sched_dep_time dep_delay arr_time</span>
<span class=c>#&gt;    <span style=color:#555;font-style:italic>&lt;chr&gt;</span>  <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>    <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>          <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>     <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>    <span style=color:#555;font-style:italic>&lt;dbl&gt;</span></span>
<span class=c>#&gt; <span style=color:#555> 1</span> N619AA  <span style=text-decoration:underline>2</span>013     1     1      542            540         2      923</span>
<span class=c>#&gt; <span style=color:#555> 2</span> N3ALAA  <span style=text-decoration:underline>2</span>013     1     1      558            600        -<span style=color:#b00>2</span>      753</span>
<span class=c>#&gt; <span style=color:#555> 3</span> N3DUAA  <span style=text-decoration:underline>2</span>013     1     1      559            600        -<span style=color:#b00>1</span>      941</span>
<span class=c>#&gt; <span style=color:#555> 4</span> N633AA  <span style=text-decoration:underline>2</span>013     1     1      606            610        -<span style=color:#b00>4</span>      858</span>
<span class=c>#&gt; <span style=color:#555> 5</span> N3EMAA  <span style=text-decoration:underline>2</span>013     1     1      623            610        13      920</span>
<span class=c>#&gt; <span style=color:#555> 6</span> N3BAAA  <span style=text-decoration:underline>2</span>013     1     1      628            630        -<span style=color:#b00>2</span>     <span style=text-decoration:underline>1</span>137</span>
<span class=c>#&gt; <span style=color:#555> 7</span> N3CYAA  <span style=text-decoration:underline>2</span>013     1     1      629            630        -<span style=color:#b00>1</span>      824</span>
<span class=c>#&gt; <span style=color:#555> 8</span> N3GKAA  <span style=text-decoration:underline>2</span>013     1     1      635            635         0     <span style=text-decoration:underline>1</span>028</span>
<span class=c>#&gt; <span style=color:#555> 9</span> N4WNAA  <span style=text-decoration:underline>2</span>013     1     1      656            700        -<span style=color:#b00>4</span>      854</span>
<span class=c>#&gt; <span style=color:#555>10</span> N5FMAA  <span style=text-decoration:underline>2</span>013     1     1      656            659        -<span style=color:#b00>3</span>      949</span>
<span class=c>#&gt; <span style=color:#555># … with 32,719 more rows, and 11 more variables: sched_arr_time &lt;dbl&gt;,</span></span>
<span class=c>#&gt; <span style=color:#555>#   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;dbl&gt;, origin &lt;chr&gt;,</span></span>
<span class=c>#&gt; <span style=color:#555>#   dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;, minute &lt;dbl&gt;,</span></span>
<span class=c>#&gt; <span style=color:#555>#   time_hour &lt;dttm&gt;</span></span></code></pre></div></li></ul><h2 id=name-repair>Name repair
<a href=#name-repair><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>Often the names of columns in the original dataset are not ideal to work with. The 2nd edition uses the same
<a href=https://www.tidyverse.org/articles/2019/01/tibble-2.0.1/#name-repair target=_blank rel=noopener>name_repair</a> argument as in the tibble package, so you can use one of the default name repair strategies or provide a custom function. One useful approach is to use the
<a href=http://sfirke.github.io/janitor/ target=_blank rel=noopener>janitor::make_clean_names()</a> function.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nf><a href=https://readr.tidyverse.org/reference/read_delim.html>read_tsv</a></span><span class=o>(</span><span class=s>"/tmp/flights_AA.tsv"</span>, name_repair <span class=o>=</span> <span class=nf>janitor</span><span class=nf>::</span><span class=nv><a href=https://rdrr.io/pkg/janitor/man/make_clean_names.html>make_clean_names</a></span><span class=o>)</span>
<span class=c>#&gt; <span style=color:#555># A tibble: 32,729 x 19</span></span>
<span class=c>#&gt;     year month   day dep_time sched_dep_time dep_delay arr_time</span>
<span class=c>#&gt;    <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>    <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>          <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>     <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>    <span style=color:#555;font-style:italic>&lt;dbl&gt;</span></span>
<span class=c>#&gt; <span style=color:#555> 1</span>  <span style=text-decoration:underline>2</span>013     1     1      542            540         2      923</span>
<span class=c>#&gt; <span style=color:#555> 2</span>  <span style=text-decoration:underline>2</span>013     1     1      558            600        -<span style=color:#b00>2</span>      753</span>
<span class=c>#&gt; <span style=color:#555> 3</span>  <span style=text-decoration:underline>2</span>013     1     1      559            600        -<span style=color:#b00>1</span>      941</span>
<span class=c>#&gt; <span style=color:#555> 4</span>  <span style=text-decoration:underline>2</span>013     1     1      606            610        -<span style=color:#b00>4</span>      858</span>
<span class=c>#&gt; <span style=color:#555> 5</span>  <span style=text-decoration:underline>2</span>013     1     1      623            610        13      920</span>
<span class=c>#&gt; <span style=color:#555> 6</span>  <span style=text-decoration:underline>2</span>013     1     1      628            630        -<span style=color:#b00>2</span>     <span style=text-decoration:underline>1</span>137</span>
<span class=c>#&gt; <span style=color:#555> 7</span>  <span style=text-decoration:underline>2</span>013     1     1      629            630        -<span style=color:#b00>1</span>      824</span>
<span class=c>#&gt; <span style=color:#555> 8</span>  <span style=text-decoration:underline>2</span>013     1     1      635            635         0     <span style=text-decoration:underline>1</span>028</span>
<span class=c>#&gt; <span style=color:#555> 9</span>  <span style=text-decoration:underline>2</span>013     1     1      656            700        -<span style=color:#b00>4</span>      854</span>
<span class=c>#&gt; <span style=color:#555>10</span>  <span style=text-decoration:underline>2</span>013     1     1      656            659        -<span style=color:#b00>3</span>      949</span>
<span class=c>#&gt; <span style=color:#555># … with 32,719 more rows, and 12 more variables: sched_arr_time &lt;dbl&gt;,</span></span>
<span class=c>#&gt; <span style=color:#555>#   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;dbl&gt;, tailnum &lt;chr&gt;,</span></span>
<span class=c>#&gt; <span style=color:#555>#   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,</span></span>
<span class=c>#&gt; <span style=color:#555>#   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</span></span>

<span class=nf><a href=https://readr.tidyverse.org/reference/read_delim.html>read_tsv</a></span><span class=o>(</span><span class=s>"/tmp/flights_AA.tsv"</span>, name_repair <span class=o>=</span> <span class=o>~</span> <span class=nf>janitor</span><span class=nf>::</span><span class=nf><a href=https://rdrr.io/pkg/janitor/man/make_clean_names.html>make_clean_names</a></span><span class=o>(</span><span class=nv>.</span>, case <span class=o>=</span> <span class=s>"lower_camel"</span><span class=o>)</span><span class=o>)</span>
<span class=c>#&gt; <span style=color:#555># A tibble: 32,729 x 19</span></span>
<span class=c>#&gt;     year month   day depTime schedDepTime depDelay arrTime schedArrTime</span>
<span class=c>#&gt;    <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>   <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>        <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>    <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>   <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>        <span style=color:#555;font-style:italic>&lt;dbl&gt;</span></span>
<span class=c>#&gt; <span style=color:#555> 1</span>  <span style=text-decoration:underline>2</span>013     1     1     542          540        2     923          850</span>
<span class=c>#&gt; <span style=color:#555> 2</span>  <span style=text-decoration:underline>2</span>013     1     1     558          600       -<span style=color:#b00>2</span>     753          745</span>
<span class=c>#&gt; <span style=color:#555> 3</span>  <span style=text-decoration:underline>2</span>013     1     1     559          600       -<span style=color:#b00>1</span>     941          910</span>
<span class=c>#&gt; <span style=color:#555> 4</span>  <span style=text-decoration:underline>2</span>013     1     1     606          610       -<span style=color:#b00>4</span>     858          910</span>
<span class=c>#&gt; <span style=color:#555> 5</span>  <span style=text-decoration:underline>2</span>013     1     1     623          610       13     920          915</span>
<span class=c>#&gt; <span style=color:#555> 6</span>  <span style=text-decoration:underline>2</span>013     1     1     628          630       -<span style=color:#b00>2</span>    <span style=text-decoration:underline>1</span>137         <span style=text-decoration:underline>1</span>140</span>
<span class=c>#&gt; <span style=color:#555> 7</span>  <span style=text-decoration:underline>2</span>013     1     1     629          630       -<span style=color:#b00>1</span>     824          810</span>
<span class=c>#&gt; <span style=color:#555> 8</span>  <span style=text-decoration:underline>2</span>013     1     1     635          635        0    <span style=text-decoration:underline>1</span>028          940</span>
<span class=c>#&gt; <span style=color:#555> 9</span>  <span style=text-decoration:underline>2</span>013     1     1     656          700       -<span style=color:#b00>4</span>     854          850</span>
<span class=c>#&gt; <span style=color:#555>10</span>  <span style=text-decoration:underline>2</span>013     1     1     656          659       -<span style=color:#b00>3</span>     949          959</span>
<span class=c>#&gt; <span style=color:#555># … with 32,719 more rows, and 11 more variables: arrDelay &lt;dbl&gt;,</span></span>
<span class=c>#&gt; <span style=color:#555>#   carrier &lt;chr&gt;, flight &lt;dbl&gt;, tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;,</span></span>
<span class=c>#&gt; <span style=color:#555>#   airTime &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;, minute &lt;dbl&gt;,</span></span>
<span class=c>#&gt; <span style=color:#555>#   timeHour &lt;dttm&gt;</span></span></code></pre></div><h2 id=utf-16-and-utf-32-support>UTF-16 and UTF-32 support
<a href=#utf-16-and-utf-32-support><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>The 2nd edition now has much better support for UTF-16 and UTF-32 multi-byte unicode encodings. When files with these encodings are read they are automatically converted to UTF-8 internally in an efficient streaming fashion.</p><h2 id=control-over-quoting-and-escaping-when-writing>Control over quoting and escaping when writing
<a href=#control-over-quoting-and-escaping-when-writing><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>You can now explicitly control how fields are quoted and escaped when writing with the <code>quote</code> and <code>escape</code> arguments to <code>write_*()</code> functions.</p><p><code>quote</code> has three options.</p><ol><li>&lsquo;needed&rsquo; - which will quote fields only when needed.</li><li>&lsquo;all&rsquo; - which will always quote all fields.</li><li>&lsquo;none&rsquo; - which will never quote any fields.</li></ol><p><code>escape</code> also has three options, to control how quote characters are escaped.</p><ol><li>&lsquo;double&rsquo; - which will use double quotes to escape quotes.</li><li>&lsquo;backslash&rsquo; - which will use a backslash to escape quotes.</li><li>&lsquo;none&rsquo; - which will not do anything to escape quotes.</li></ol><p>We hope these options will give people the flexibility they need when writing files using readr.</p><h2 id=literal-data>Literal data
<a href=#literal-data><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>In the 1st edition the reading functions treated any input with a newline in it or vectors of length > 1 as literal data. In the 2nd edition two vectors of length > 1 are now assumed to correspond to multiple files. Because of this we now have a more explicit way to represent literal data, by putting
<a href=https://rdrr.io/r/base/AsIs.html target=_blank rel=noopener><code>I()</code></a> around the input.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nf>readr</span><span class=nf>::</span><span class=nf><a href=https://readr.tidyverse.org/reference/read_delim.html>read_csv</a></span><span class=o>(</span><span class=nf><a href=https://rdrr.io/r/base/AsIs.html>I</a></span><span class=o>(</span><span class=s>"a,b\n1,2"</span><span class=o>)</span><span class=o>)</span>
<span class=c>#&gt; <span style=font-weight:700>Rows: </span><span style=color:#00b>1</span> <span style=font-weight:700>Columns: </span><span style=color:#00b>2</span></span>
<span class=c>#&gt; <span style=color:#0bb>──</span> <span style=font-weight:700>Column specification</span> <span style=color:#0bb>───────────────────────────────────────────────────</span></span>
<span class=c>#&gt; <span style=font-weight:700>Delimiter:</span> ","</span>
<span class=c>#&gt; <span style=color:#0b0>dbl</span> (2): a, b</span>
<span class=c>#&gt; </span>
<span class=c>#&gt; <span style=color:#0bb>ℹ</span> Use <span style=color:#000;background-color:#bbb>`spec()`</span> to retrieve the full column specification for this data.</span>
<span class=c>#&gt; <span style=color:#0bb>ℹ</span> Specify the column types or set <span style=color:#000;background-color:#bbb>`show_col_types = FALSE`</span> to quiet this message.</span>
<span class=c>#&gt; <span style=color:#555># A tibble: 1 x 2</span></span>
<span class=c>#&gt;       a     b</span>
<span class=c>#&gt;   <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span></span>
<span class=c>#&gt; <span style=color:#555>1</span>     1     2</span></code></pre></div><h2 id=lighter-installation-requirements>Lighter installation requirements
<a href=#lighter-installation-requirements><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>readr now should be much easier to install. Previous versions of readr used the Boost C++ library to do some of the numeric parsing. While these are well written, robust libraries, the BH package which contains them has a large number of files (1500+) which can take a long time to install. In addition the code within these headers is complicated and can take a large amount of memory (2+ Gb) to compile, which made it challenging to compile readr from source in some cases.</p><p>readr no longer depends on Boost or the BH package, so should compile more quickly in most cases.</p><h2 id=deprecated-and-superseded-functions-and-features>Deprecated and superseded functions and features
<a href=#deprecated-and-superseded-functions-and-features><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><ul><li><p><a href=https://readr.tidyverse.org/reference/melt_delim.html target=_blank rel=noopener><code>melt_csv()</code></a>,
<a href=https://readr.tidyverse.org/reference/melt_delim.html target=_blank rel=noopener><code>melt_delim()</code></a>,
<a href=https://readr.tidyverse.org/reference/melt_delim.html target=_blank rel=noopener><code>melt_tsv()</code></a> and
<a href=https://readr.tidyverse.org/reference/melt_fwf.html target=_blank rel=noopener><code>melt_fwf()</code></a> have been superseded by functions in the same name in the meltr package. The versions in readr have been deprecated. These functions rely on the 1st edition parsing code and would be challenging to update to the new parser. When the 1st edition parsing code is eventually removed from readr they will be removed.</p></li><li><p><a href=https://readr.tidyverse.org/reference/read_table2.html target=_blank rel=noopener><code>read_table2()</code></a> has been renamed to
<a href=https://readr.tidyverse.org/reference/read_table.html target=_blank rel=noopener><code>read_table()</code></a> and
<a href=https://readr.tidyverse.org/reference/read_table2.html target=_blank rel=noopener><code>read_table2()</code></a> has been deprecated. Most users seem to expect
<a href=https://readr.tidyverse.org/reference/read_table.html target=_blank rel=noopener><code>read_table()</code></a> to work like
<a href=https://rdrr.io/r/utils/read.table.html target=_blank rel=noopener><code>utils::read.table()</code></a>, so the different names caused confusion. If you want the previous strict behavior of
<a href=https://readr.tidyverse.org/reference/read_table.html target=_blank rel=noopener><code>read_table()</code></a> you can use
<a href=https://readr.tidyverse.org/reference/read_fwf.html target=_blank rel=noopener><code>read_fwf()</code></a> with
<a href=https://readr.tidyverse.org/reference/read_fwf.html target=_blank rel=noopener><code>fwf_empty()</code></a> directly (#717).</p></li><li><p>Normalizing newlines in files with just carriage returns <code>\r</code> is no longer supported. The last major OS to use only CR as the newline was &lsquo;classic&rsquo; Mac OS, which had its final release in 2001.</p></li></ul><h2 id=license-changes>License changes
<a href=#license-changes><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>We are systematically re-licensing tidyverse and r-lib packages to use the MIT license, to make our package licenses as clear and permissive as possible.</p><p>To this end the readr and vroom packages are now released under the MIT license.</p><h2 id=acknowledgements>Acknowledgements
<a href=#acknowledgements><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>A big thanks to everyone who helped make this release possible by testing the development versions, asking questions, providing reprexes, writing code and more!
<a href=https://github.com/Aariq target=_blank rel=noopener>@Aariq</a>,
<a href=https://github.com/adamroyjones target=_blank rel=noopener>@adamroyjones</a>,
<a href=https://github.com/antoine-sachet target=_blank rel=noopener>@antoine-sachet</a>,
<a href=https://github.com/basille target=_blank rel=noopener>@basille</a>,
<a href=https://github.com/batpigandme target=_blank rel=noopener>@batpigandme</a>,
<a href=https://github.com/benjaminhlina target=_blank rel=noopener>@benjaminhlina</a>,
<a href=https://github.com/bigey target=_blank rel=noopener>@bigey</a>,
<a href=https://github.com/billdenney target=_blank rel=noopener>@billdenney</a>,
<a href=https://github.com/binkleym target=_blank rel=noopener>@binkleym</a>,
<a href=https://github.com/BrianOB target=_blank rel=noopener>@BrianOB</a>,
<a href=https://github.com/cboettig target=_blank rel=noopener>@cboettig</a>,
<a href=https://github.com/CTMCBP target=_blank rel=noopener>@CTMCBP</a>,
<a href=https://github.com/Dana996 target=_blank rel=noopener>@Dana996</a>,
<a href=https://github.com/DarwinAwardWinner target=_blank rel=noopener>@DarwinAwardWinner</a>,
<a href=https://github.com/deeenes target=_blank rel=noopener>@deeenes</a>,
<a href=https://github.com/dernst target=_blank rel=noopener>@dernst</a>,
<a href=https://github.com/dicorynia target=_blank rel=noopener>@dicorynia</a>,
<a href=https://github.com/estroger34 target=_blank rel=noopener>@estroger34</a>,
<a href=https://github.com/FixTestRepeat target=_blank rel=noopener>@FixTestRepeat</a>,
<a href=https://github.com/GegznaV target=_blank rel=noopener>@GegznaV</a>,
<a href=https://github.com/giocomai target=_blank rel=noopener>@giocomai</a>,
<a href=https://github.com/GiuliaPais target=_blank rel=noopener>@GiuliaPais</a>,
<a href=https://github.com/hadley target=_blank rel=noopener>@hadley</a>,
<a href=https://github.com/HedvigS target=_blank rel=noopener>@HedvigS</a>,
<a href=https://github.com/HenrikBengtsson target=_blank rel=noopener>@HenrikBengtsson</a>,
<a href=https://github.com/hidekoji target=_blank rel=noopener>@hidekoji</a>,
<a href=https://github.com/hongooi73 target=_blank rel=noopener>@hongooi73</a>,
<a href=https://github.com/hsbadr target=_blank rel=noopener>@hsbadr</a>,
<a href=https://github.com/idshklein target=_blank rel=noopener>@idshklein</a>,
<a href=https://github.com/jasyael target=_blank rel=noopener>@jasyael</a>,
<a href=https://github.com/JeremyPasco target=_blank rel=noopener>@JeremyPasco</a>,
<a href=https://github.com/jimhester target=_blank rel=noopener>@jimhester</a>,
<a href=https://github.com/jonasfoe target=_blank rel=noopener>@jonasfoe</a>,
<a href=https://github.com/jzadra target=_blank rel=noopener>@jzadra</a>,
<a href=https://github.com/KasperThystrup target=_blank rel=noopener>@KasperThystrup</a>,
<a href=https://github.com/keesdeschepper target=_blank rel=noopener>@keesdeschepper</a>,
<a href=https://github.com/kingcrimsontianyu target=_blank rel=noopener>@kingcrimsontianyu</a>,
<a href=https://github.com/KnutEBakke target=_blank rel=noopener>@KnutEBakke</a>,
<a href=https://github.com/krlmlr target=_blank rel=noopener>@krlmlr</a>,
<a href=https://github.com/larnsce target=_blank rel=noopener>@larnsce</a>,
<a href=https://github.com/ldecicco-USGS target=_blank rel=noopener>@ldecicco-USGS</a>,
<a href=https://github.com/M3IT target=_blank rel=noopener>@M3IT</a>,
<a href=https://github.com/maelle target=_blank rel=noopener>@maelle</a>,
<a href=https://github.com/martinmodrak target=_blank rel=noopener>@martinmodrak</a>,
<a href=https://github.com/meowcat target=_blank rel=noopener>@meowcat</a>,
<a href=https://github.com/messersc target=_blank rel=noopener>@messersc</a>,
<a href=https://github.com/mewu3 target=_blank rel=noopener>@mewu3</a>,
<a href=https://github.com/mgperry target=_blank rel=noopener>@mgperry</a>,
<a href=https://github.com/michaelquinn32 target=_blank rel=noopener>@michaelquinn32</a>,
<a href=https://github.com/MikeJohnPage target=_blank rel=noopener>@MikeJohnPage</a>,
<a href=https://github.com/mine-cetinkaya-rundel target=_blank rel=noopener>@mine-cetinkaya-rundel</a>,
<a href=https://github.com/msberends target=_blank rel=noopener>@msberends</a>,
<a href=https://github.com/nbenn target=_blank rel=noopener>@nbenn</a>,
<a href=https://github.com/niheaven target=_blank rel=noopener>@niheaven</a>,
<a href=https://github.com/peranti target=_blank rel=noopener>@peranti</a>,
<a href=https://github.com/petrbouchal target=_blank rel=noopener>@petrbouchal</a>,
<a href=https://github.com/pfh target=_blank rel=noopener>@pfh</a>,
<a href=https://github.com/pgramme target=_blank rel=noopener>@pgramme</a>,
<a href=https://github.com/Raesu target=_blank rel=noopener>@Raesu</a>,
<a href=https://github.com/rmcd1024 target=_blank rel=noopener>@rmcd1024</a>,
<a href=https://github.com/rmvpaeme target=_blank rel=noopener>@rmvpaeme</a>,
<a href=https://github.com/sebneus target=_blank rel=noopener>@sebneus</a>,
<a href=https://github.com/seth127 target=_blank rel=noopener>@seth127</a>,
<a href=https://github.com/Shians target=_blank rel=noopener>@Shians</a>,
<a href=https://github.com/sonicdoe target=_blank rel=noopener>@sonicdoe</a>,
<a href=https://github.com/svraka target=_blank rel=noopener>@svraka</a>,
<a href=https://github.com/timothy-barry target=_blank rel=noopener>@timothy-barry</a>,
<a href=https://github.com/tmalsburg target=_blank rel=noopener>@tmalsburg</a>,
<a href=https://github.com/vankesteren target=_blank rel=noopener>@vankesteren</a>,
<a href=https://github.com/xuqingyu target=_blank rel=noopener>@xuqingyu</a>, and
<a href=https://github.com/yutannihilation target=_blank rel=noopener>@yutannihilation</a>.</p></div></div><div class=column25><div class="section hideOnMobile"><div class=sectionTitle>Contents</div><nav id=TableOfContents><ul><li><a href=#readr-2nd-edition>readr 2nd edition</a></li><li><a href=#reading-multiple-files-at-once>Reading multiple files at once</a></li><li><a href=#lazy-reading>Lazy reading</a></li><li><a href=#delimiter-guessing>Delimiter guessing</a></li><li><a href=#new-column-specification-output>New column specification output</a></li><li><a href=#column-selection>Column selection</a></li><li><a href=#name-repair>Name repair</a></li><li><a href=#utf-16-and-utf-32-support>UTF-16 and UTF-32 support</a></li><li><a href=#control-over-quoting-and-escaping-when-writing>Control over quoting and escaping when writing</a></li><li><a href=#literal-data>Literal data</a></li><li><a href=#lighter-installation-requirements>Lighter installation requirements</a></li><li><a href=#deprecated-and-superseded-functions-and-features>Deprecated and superseded functions and features</a></li><li><a href=#license-changes>License changes</a></li><li><a href=#acknowledgements>Acknowledgements</a></li></ul></nav></div><div class=section></div></div></div></div></div><div id=rStudioFooter class=band><div class=bandContent><div id=copyright>The tidyverse is proudly supported by <a class=rstudioLogo href=https://posit.co/ aria-label="Posit Homepage"></a></div><div id=logos><a href=https://www.tidyverse.org/google_privacy_policy>Privacy policy</a>
<a href=https://github.com/tidyverse class="footerLogo gitHub" aria-label="Tidyverse GitHub organization"></a><a href=https://twitter.com/hashtag/rstats class="footerLogo twitter" aria-label="rstats hashtag on twitter.com"></a></div></div></div></div></div><script src=/js/math-code.js></script><script type=text/x-mathjax-config>
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    processEscapes: true
  }
});
</script><script async src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script type=application/javascript>var dnt=(navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack);var doNotTrack=(dnt=="1"||dnt=="yes");if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');if(window.sessionStorage){var GA_SESSION_STORAGE_KEY='ga:clientId';ga('create','UA-115082821-1',{'storage':'none','clientId':sessionStorage.getItem(GA_SESSION_STORAGE_KEY)});ga(function(tracker){sessionStorage.setItem(GA_SESSION_STORAGE_KEY,tracker.get('clientId'));});}
ga('set','anonymizeIp',true);ga('send','pageview');}</script></body></html></div></div></body></html>