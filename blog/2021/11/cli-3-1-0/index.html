<!doctype html><html><head><!doctype html><html lang=en-us><link rel=stylesheet href=/css/fonts.css><link rel=stylesheet href=/css/main-site.css><link rel=stylesheet href=/css/fa5-all.css><style type=text/css>body{background-color:#fff;color:#1a1917}a{color:#38577f}a:hover{color:#42709b}a:focus{outline-color:#42709b}.column25-left .sectionTitle a:hover:not(.current),.column16-left .sectionTitle a:hover:not(.current){color:#1a1917}.icon-attribution,.icon-attribution a{color:#1a1917;opacity:75%}#homeContent .band.first{background-color:#fff}#homeContent .band.second{background-color:#fdeba4}#homeContent .band.third{background-color:#fff}#rStudioHeader{background-color:#1a162d;color:#fff}#rStudioHeader .productName{color:#fff}#rStudioHeader .productName:hover,#rStudioHeader .productName:focus{color:#fdeba4}#rStudioHeader #menu .menuItem.a{background-color:#75aadb;color:#fff}#rStudioHeader #menu .menuItem:hover{background-color:#484557;color:#fff}#rStudioHeader #menu .menuItem.current{background-color:#fff;color:#1a162d;text-decoration:none}#rStudioFooter.band{background-color:#767381}#rStudioFooter .bandContent #copyright{color:#e3eef8}table tbody tr:nth-child(even){background-color:#f7faff}table tbody tr:nth-child(odd){background-color:#fff}.latest{border-top:.5em solid <no value>}.event{-moz-box-shadow:0 0 0 0 rgba(0,0,0,.1);-webkit-box-shadow:0 0 0 0 rgba(0,0,0,.1);box-shadow:0 0 0 0 rgba(0,0,0,.1)}.section .event{background-color:#eab0c41a}.section .event{border-top:7pt solid #a19ea936}.section .event a{color:#1a162d}.section .event{color:#404040}</style><link rel=stylesheet href=/css/tidyverse.css><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Hugo 0.71.1"><title>cli 3.1.0</title><meta property="og:title" content="cli 3.1.0"><meta property="og:description" content="cli 3.1.0 introduces customizable color palettes plus it comes with a number of other smaller improvements."><meta property="og:type" content="article"><meta property="og:url" content="https://www.tidyverse.org/blog/2021/11/cli-3-1-0/"><meta property="twitter:card" content="summary_large_image"><meta property="og:title" content="cli 3.1.0 - Tidyverse"><meta property="description" content="cli 3.1.0 introduces customizable color palettes plus it comes with a number of other smaller improvements."><meta property="og:description" content="cli 3.1.0 introduces customizable color palettes plus it comes with a number of other smaller improvements."><meta property="og:image" content="https://www.tidyverse.org/blog/2021/11/cli-3-1-0/thumbnail-sq.jpg"><meta name=twitter:image content="https://www.tidyverse.org/blog/2021/11/cli-3-1-0/thumbnail-wd.jpg"><link rel=apple-touch-icon sizes=180x180 href=/images/favicons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/images/favicons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/images/favicons/favicon-16x16.png><link rel=manifest href=/images/favicons/site.webmanifest><link rel=mask-icon href=/images/favicons/safari-pinned-tab.svg><link rel="shortcut icon" href=/images/favicons/favicon.ico><meta name=msapplication-TileColor content="#da532c"><meta name=msapplication-config href=/images/favicons/browserconfig.xml><script type=text/javascript src=/js/jquery-3.5.1.min.js></script><script type=text/javascript src=/js/site.js></script><link rel=icon href=/images/favicon.ico><script type=text/javascript src=/js/clipboard.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin=anonymous></script><script defer data-domain=tidyverse.org,all.tidyverse.org src=https://plausible.io/js/plausible.js></script></head><body><div id=appTidyverseSite class="shrinkHeader alwaysShrinkHeader"><div id=main><div id=rStudioHeader><nav class=band><div class="innards bandContent"><div><a class=productName href=/>Tidyverse</a></div><div id=menu><div id=menuToggler></div><div id=menuItems><a class=menuItem href=/packages/>Packages</a>
<a class="menuItem current" href=/blog/>Blog</a>
<a class=menuItem href=/learn/>Learn</a>
<a class=menuItem href=/help/>Help</a>
<a class=menuItem href=/contribute/>Contribute</a></div></div></div></nav></div><main><div class="band padForHeader pushFooter"><div class=bandContent><div class="full splitColumns withMobileMargins"><div class=column75><h1 class=article-title>cli 3.1.0</h1><div class=article-header aria-hidden=true><div class=photo><img src=/blog/2021/11/cli-3-1-0/thumbnail-wd.jpg></div><div class=photoCredit>Photo by <a href=https://www.pexels.com/photo/colorful-hot-air-balloon-3580627>Yumi</a></div></div><span class=article-date><i class="fas fa-calendar-day fa-fw"></i>&nbsp;&nbsp;2021/11/19</span></p><p style=margin-top:.5em><i class="fas fa-user-circle fa-fw"></i>&nbsp;
G√°bor Cs√°rdi</p><div class=article-content><p>We&rsquo;re very chuffed to announce the release of
<a href=https://cli.r-lib.org title="cli homepage" target=_blank rel=noopener>cli</a> 3.1.0. cli helps you create a consistent and convenient command line interface.</p><p>You can install it from CRAN with:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nf><a href=https://rdrr.io/r/utils/install.packages.html>install.packages</a></span><span class=o>(</span><span class=s>"cli"</span><span class=o>)</span></code></pre></div><p>This release of cli comes with an important feature for end users: the ability to select or define their preferred palettes. The selected palette is respected by every package that relies on either cli or the crayon package. We also show some other improvements in this post, these are mainly aimed at developers.</p><p>You can see a full list of changes in the
<a href=https://github.com/r-lib/cli/releases/tag/v3.1.0 target=_blank rel=noopener>release notes</a>.</p><h2 id=color-palettes>Color palettes
<a href=#color-palettes><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><h3 id=built-in-palettes>Built-in palettes
<a href=#built-in-palettes><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=kr><a href=https://rdrr.io/r/base/library.html>library</a></span><span class=o>(</span><span class=nv><a href=https://cli.r-lib.org>cli</a></span><span class=o>)</span></code></pre></div><p>This release of cli adds support for ANSI color customization. Now the 16 foreground colors, created via the <code>col_*()</code> functions, and the 16 background colors, created via the <code>bg_*()</code> functions, can be customized with the <code>cli.palette</code> option.</p><p>You can set <code>cli.palette</code> to one of the built-in cli palettes, or you can create your own palette. See all built-in palettes at the
<a href=https://cli.r-lib.org/articles/palettes.html target=_blank rel=noopener>cli homepage</a>. You can also look at the <code>ansi_palettes</code> object, which is a data frame of RGB colors, with one row for each palette. To look at a single palette, run
<a href=https://cli.r-lib.org/reference/ansi_palettes.html target=_blank rel=noopener><code>ansi_palette_show()</code></a>. It shows the current palette by default:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nf><a href=https://cli.r-lib.org/reference/ansi_palettes.html>ansi_palette_show</a></span><span class=o>(</span><span class=o>)</span></code></pre></div><div class=highlight><p><img src=figs//default.svg width=700px style=display:block;margin:auto></p></div><p>To use a built-in palette, set <code>cli.palette</code> to the palette name. To make this permanent, put this setting into your <code>.Rprofile</code>:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nf><a href=https://rdrr.io/r/base/options.html>options</a></span><span class=o>(</span>cli.palette <span class=o>=</span> <span class=s>"dichro"</span><span class=o>)</span></code></pre></div><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nf><a href=https://cli.r-lib.org/reference/ansi_palettes.html>ansi_palette_show</a></span><span class=o>(</span><span class=o>)</span></code></pre></div><div class=highlight><p><img src=figs//dichro.svg width=700px style=display:block;margin:auto></p></div><p>To set the default palette again, set <code>cli.palette</code> to <code>NULL</code>:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nf><a href=https://rdrr.io/r/base/options.html>options</a></span><span class=o>(</span>cli.palette <span class=o>=</span> <span class=kc>NULL</span><span class=o>)</span></code></pre></div><h3 id=custom-palettes>Custom palettes
<a href=#custom-palettes><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><p>To create a custom palette, set the <code>cli.palette</code> option to a named list where the names are the same as the column names in <code>ansi_palettes</code>. Colors can be specified with RGB color strings of the <code>#rrggbb</code> form or R color names (see the output of
<a href=https://rdrr.io/r/grDevices/colors.html target=_blank rel=noopener><code>grDevices::colors()</code></a>). For example:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nf><a href=https://rdrr.io/r/base/options.html>options</a></span><span class=o>(</span>cli.palette <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/list.html>list</a></span><span class=o>(</span>
  black    <span class=o>=</span> <span class=s>"#010101"</span>, red        <span class=o>=</span> <span class=s>"#de382b"</span>,
  green    <span class=o>=</span> <span class=s>"#39b54a"</span>, yellow     <span class=o>=</span> <span class=s>"#ffc706"</span>,
  blue     <span class=o>=</span> <span class=s>"#006fb8"</span>, magenta    <span class=o>=</span> <span class=s>"#762671"</span>,
  cyan     <span class=o>=</span> <span class=s>"#2cb5e9"</span>, white      <span class=o>=</span> <span class=s>"#cccccc"</span>,
  br_black <span class=o>=</span> <span class=s>"#808080"</span>, br_red     <span class=o>=</span> <span class=s>"#ff0000"</span>, 
  br_green <span class=o>=</span> <span class=s>"#00ff00"</span>, br_yellow  <span class=o>=</span> <span class=s>"#ffff00"</span>, 
  br_blue  <span class=o>=</span> <span class=s>"#0000ff"</span>, br_magenta <span class=o>=</span> <span class=s>"#ff00ff"</span>, 
  br_cyan  <span class=o>=</span> <span class=s>"#00ffff"</span>, br_white   <span class=o>=</span> <span class=s>"#ffffff"</span>
<span class=o>)</span><span class=o>)</span></code></pre></div><h3 id=color-interpolation>Color interpolation
<a href=#color-interpolation><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><p>For color palettes your terminal or IDE needs to support at least 256 ANSI colors. On terminals with true color ANSI support cli will use the exact colors, as specified in the <code>cli.palette</code> option. On consoles with 256 ANSI colors, e.g.¬†the RStudio console, cli will interpolate the specified colors to the closest ANSI-256 color. This means that the actual output will probably look slightly different from the specified RGB colors on these displays.</p><h3 id=what-about-the-crayon-package>What about the crayon package?
<a href=#what-about-the-crayon-package><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><p>crayon is an older package than cli, with a smaller scope: adding ANSI colors to your display. More than 300 packages use crayon, so to make sure that cli palettes are respected in these packages as well, we added palette support to the latest release of crayon. Specifying the <code>cli.palette</code> option changes the colors in cli and in crayon as well, the same way.</p><p>This said, cli does have some additional features compared to crayon, e.g.¬†the support of bright colors. Our focus will be on improving the cli package in the future, and crayon will only receive important bug fixes. If you already use both cli and crayon, then it might make sense to completely switch to cli.</p><h3 id=palettes-in-terminals>Palettes in terminals
<a href=#palettes-in-terminals><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><p>Many modern terminal emulators, e.g.¬†iTerm on macOS, already allow the customization of ANSI colors, and some also support themes with custom ANSI palettes. If you already use this method to customize ANSI colors, then you don&rsquo;t need to set the <code>cli.palette</code> option. If you use both terminals and RStudio then you can set it only in RStudio:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=kr>if</span> <span class=o>(</span><span class=nf><a href=https://rdrr.io/r/base/Sys.getenv.html>Sys.getenv</a></span><span class=o>(</span><span class=s>"RSTUDIO"</span><span class=o>)</span><span class=o>==</span><span class=s>"1"</span><span class=o>)</span> <span class=nf><a href=https://rdrr.io/r/base/options.html>options</a></span><span class=o>(</span>cli.palette <span class=o>=</span> <span class=s>"dichro"</span><span class=o>)</span></code></pre></div><h2 id=other-improvements>Other improvements
<a href=#other-improvements><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><h3 id=bright-ansi-colors>Bright ANSI colors
<a href=#bright-ansi-colors><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><p>cli now has a new set of functions to create the bright version of the 8 base ANSI colors. The <code>col_br_*()</code> functions set the foreground and the <code>bg_br_*()</code> functions set the background colors of strings:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nf>cli</span><span class=nf>::</span><span class=nf><a href=https://cli.r-lib.org/reference/ansi-styles.html>col_blue</a></span><span class=o>(</span><span class=s>"This is blue."</span><span class=o>)</span>
<span class=nf>cli</span><span class=nf>::</span><span class=nf><a href=https://cli.r-lib.org/reference/ansi-styles.html>col_br_blue</a></span><span class=o>(</span><span class=s>"This is bright blue."</span><span class=o>)</span></code></pre></div><div class=highlight><p><img src=figs//bright.svg width=700px style=display:block;margin:auto></p></div><h3 id=true-color-ansi>True color ANSI
<a href=#true-color-ansi><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><p>cli now supports true color ANSI consoles better. Now custom styles made with
<a href=https://cli.r-lib.org/reference/make_ansi_style.html target=_blank rel=noopener><code>make_ansi_style()</code></a> will not interpolate the specified color on these displays:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nv>orange</span> <span class=o>&lt;-</span> <span class=nf><a href=https://cli.r-lib.org/reference/make_ansi_style.html>make_ansi_style</a></span><span class=o>(</span><span class=s>"#eb6123"</span><span class=o>)</span>
<span class=nf>orange</span><span class=o>(</span><span class=s>"This will be halloween orange."</span><span class=o>)</span></code></pre></div><div class=highlight><p><img src=figs//orange.svg width=700px style=display:block;margin:auto></p></div><h3 id=unicode-graphemes>Unicode graphemes
<a href=#unicode-graphemes><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><p>cli&rsquo;s <code>ansi_*()</code> functions and the new <code>utf8_*()</code> functions now handle Unicode graphemes properly. For example
<a href=https://cli.r-lib.org/reference/ansi_nchar.html target=_blank rel=noopener><code>ansi_nchar()</code></a> and
<a href=https://cli.r-lib.org/reference/utf8_nchar.html target=_blank rel=noopener><code>utf8_nchar()</code></a> count graphemes by default, and
<a href=https://cli.r-lib.org/reference/ansi_substr.html target=_blank rel=noopener><code>ansi_substr()</code></a> and
<a href=https://cli.r-lib.org/reference/utf8_substr.html target=_blank rel=noopener><code>utf8_substr()</code></a> will break the input strings at grapheme boundaries.</p><p>Consider this Unicode grapheme: üë∑üèΩ‚Äç‚ôÄÔ∏è (female construction worker, medium skin tone). It consists of five Unicode code points:</p><ul><li><code>\U{1f477}</code>, construction worker,</li><li><code>\U{1f3fd}</code>, emoji modifier Fitzpatrick type-4, for the skin tone,</li><li><code>\u200d</code>, zero width joiner,</li><li><code>\u2640</code>, female sign,</li><li><code>\ufe0f</code>, variation selector-16, to specify that the preceding character should be displayed as an emoji.</li></ul><p>cli functions handle this grapheme properly:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nv>wrk</span> <span class=o>&lt;-</span> <span class=s>"üë∑üèΩ‚Äç‚ôÄÔ∏è"</span>
<span class=nf><a href=https://rdrr.io/r/base/hexmode.html>as.hexmode</a></span><span class=o>(</span><span class=nf><a href=https://rdrr.io/r/base/utf8Conversion.html>utf8ToInt</a></span><span class=o>(</span><span class=nv>wrk</span><span class=o>)</span><span class=o>)</span>
<span class=c>#&gt; [1] "1f477" "1f3fd" "0200d" "02640" "0fe0f"</span></code></pre></div><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=c># graphemes by default</span>
<span class=nf><a href=https://cli.r-lib.org/reference/utf8_nchar.html>utf8_nchar</a></span><span class=o>(</span><span class=nv>wrk</span><span class=o>)</span>
<span class=c>#&gt; [1] 1</span>
<span class=c># code points</span>
<span class=nf><a href=https://cli.r-lib.org/reference/utf8_nchar.html>utf8_nchar</a></span><span class=o>(</span><span class=nv>wrk</span>, type <span class=o>=</span> <span class=s>"codepoints"</span><span class=o>)</span>
<span class=c>#&gt; [1] 5</span>
<span class=c># correct display width</span>
<span class=nf><a href=https://cli.r-lib.org/reference/utf8_nchar.html>utf8_nchar</a></span><span class=o>(</span><span class=nv>wrk</span>, type <span class=o>=</span> <span class=s>"width"</span><span class=o>)</span>
<span class=c>#&gt; [1] 2</span></code></pre></div><h3 id=syntax-highlight-r-code>Syntax highlight R code
<a href=#syntax-highlight-r-code><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><p>The new
<a href=https://cli.r-lib.org/reference/code_highlight.html target=_blank rel=noopener><code>code_highlight()</code></a> function parses and syntax highlights R code using ANSI colors and styles. You can use
<a href=https://rdrr.io/r/base/deparse.html target=_blank rel=noopener><code>deparse()</code></a> to highlight the code of an existing function:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nf><a href=https://rdrr.io/r/base/writeLines.html>writeLines</a></span><span class=o>(</span><span class=nf><a href=https://cli.r-lib.org/reference/code_highlight.html>code_highlight</a></span><span class=o>(</span><span class=nf><a href=https://rdrr.io/r/base/deparse.html>deparse</a></span><span class=o>(</span><span class=nf>cli</span><span class=nf>::</span><span class=nv><a href=https://cli.r-lib.org/reference/hash_emoji.html>hash_emoji</a></span><span class=o>)</span><span class=o>)</span><span class=o>)</span></code></pre></div><div class=highlight><p><img src=figs//code.svg width=700px style=display:block;margin:auto></p></div><h3 id=human-readable-hash-functions>Human readable hash functions
<a href=#human-readable-hash-functions><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><p>Sometimes it is convenient to create a short hash of a string, that is easy to compare to other hashes. The new
<a href=https://cli.r-lib.org/reference/hash_emoji.html target=_blank rel=noopener><code>hash_emoji()</code></a> function creates a very short emoji hash of a string. The new
<a href=https://cli.r-lib.org/reference/hash_animal.html target=_blank rel=noopener><code>hash_animal()</code></a> function uses a short expression with one or more adjectives and an animal name:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nv>txt</span> <span class=o>&lt;-</span> <span class=s>"Hash this string please!"</span>
<span class=nf><a href=https://cli.r-lib.org/reference/hash_emoji.html>hash_emoji</a></span><span class=o>(</span><span class=nv>txt</span><span class=o>)</span><span class=o>$</span><span class=nv>hash</span>
<span class=c>#&gt; [1] "üë®‚Äçüë©‚Äçüë¶‚Äçüë¶üçòüòΩ"</span>
<span class=nf><a href=https://cli.r-lib.org/reference/hash_emoji.html>hash_emoji</a></span><span class=o>(</span><span class=nv>txt</span><span class=o>)</span><span class=o>$</span><span class=nv>text</span>
<span class=c>#&gt; [1] "family: man, woman, boy, boy, rice cracker, kissing cat"</span>
<span class=nf><a href=https://cli.r-lib.org/reference/hash_animal.html>hash_animal</a></span><span class=o>(</span><span class=nv>txt</span><span class=o>)</span><span class=o>$</span><span class=nv>hash</span>
<span class=c>#&gt; [1] "deadsmooth anaemic bighorn"</span></code></pre></div><p>If you are using the new version of the
<a href=https://r-lib.github.io/sessioninfo/ target=_blank rel=noopener>sessioninfo</a> package, then you already see an emoji hash on top of the
<a href=https://r-lib.github.io/sessioninfo/reference/session_info.html target=_blank rel=noopener><code>sessioninfo::session_info()</code></a> output. This makes trivial to decide if <code>session_info()</code> outputs are the same or not, without comparing them line by line.</p><h2 id=acknowledgements>Acknowledgements
<a href=#acknowledgements><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>A big thanks to all 76 contributors who filed issues and contributed code to this and past cli releases:</p><p><a href=https://github.com/aedobbyn target=_blank rel=noopener>@aedobbyn</a>,
<a href=https://github.com/AkhilGNair target=_blank rel=noopener>@AkhilGNair</a>,
<a href=https://github.com/AlbertRapp target=_blank rel=noopener>@AlbertRapp</a>,
<a href=https://github.com/assignUser target=_blank rel=noopener>@assignUser</a>,
<a href=https://github.com/batpigandme target=_blank rel=noopener>@batpigandme</a>,
<a href=https://github.com/brodieG target=_blank rel=noopener>@brodieG</a>,
<a href=https://github.com/bwiernik target=_blank rel=noopener>@bwiernik</a>,
<a href=https://github.com/cderv target=_blank rel=noopener>@cderv</a>,
<a href=https://github.com/cfhammill target=_blank rel=noopener>@cfhammill</a>,
<a href=https://github.com/cjyetman target=_blank rel=noopener>@cjyetman</a>,
<a href=https://github.com/ColinFay target=_blank rel=noopener>@ColinFay</a>,
<a href=https://github.com/combiz target=_blank rel=noopener>@combiz</a>,
<a href=https://github.com/cpsievert target=_blank rel=noopener>@cpsievert</a>,
<a href=https://github.com/danielvartan target=_blank rel=noopener>@danielvartan</a>,
<a href=https://github.com/datafj target=_blank rel=noopener>@datafj</a>,
<a href=https://github.com/DavisVaughan target=_blank rel=noopener>@DavisVaughan</a>,
<a href=https://github.com/dchiu911 target=_blank rel=noopener>@dchiu911</a>,
<a href=https://github.com/dfalbel target=_blank rel=noopener>@dfalbel</a>,
<a href=https://github.com/dgkf target=_blank rel=noopener>@dgkf</a>,
<a href=https://github.com/elinw target=_blank rel=noopener>@elinw</a>,
<a href=https://github.com/flying-sheep target=_blank rel=noopener>@flying-sheep</a>,
<a href=https://github.com/fmichonneau target=_blank rel=noopener>@fmichonneau</a>,
<a href=https://github.com/fmmattioni target=_blank rel=noopener>@fmmattioni</a>,
<a href=https://github.com/gaborcsardi target=_blank rel=noopener>@gaborcsardi</a>,
<a href=https://github.com/gavinsimpson target=_blank rel=noopener>@gavinsimpson</a>,
<a href=https://github.com/GjjvdBurg target=_blank rel=noopener>@GjjvdBurg</a>,
<a href=https://github.com/gregleleu target=_blank rel=noopener>@gregleleu</a>,
<a href=https://github.com/GregorDeCillia target=_blank rel=noopener>@GregorDeCillia</a>,
<a href=https://github.com/gwd999 target=_blank rel=noopener>@gwd999</a>,
<a href=https://github.com/hadley target=_blank rel=noopener>@hadley</a>,
<a href=https://github.com/IndrajeetPatil target=_blank rel=noopener>@IndrajeetPatil</a>,
<a href=https://github.com/jennybc target=_blank rel=noopener>@jennybc</a>,
<a href=https://github.com/jimhester target=_blank rel=noopener>@jimhester</a>,
<a href=https://github.com/jonkeane target=_blank rel=noopener>@jonkeane</a>,
<a href=https://github.com/jonocarroll target=_blank rel=noopener>@jonocarroll</a>,
<a href=https://github.com/juniperlsimonis target=_blank rel=noopener>@juniperlsimonis</a>,
<a href=https://github.com/krlmlr target=_blank rel=noopener>@krlmlr</a>,
<a href=https://github.com/lazappi target=_blank rel=noopener>@lazappi</a>,
<a href=https://github.com/leeper target=_blank rel=noopener>@leeper</a>,
<a href=https://github.com/lionel- target=_blank rel=noopener>@lionel-</a>,
<a href=https://github.com/llrs target=_blank rel=noopener>@llrs</a>,
<a href=https://github.com/lorenzwalthert target=_blank rel=noopener>@lorenzwalthert</a>,
<a href=https://github.com/MarkEdmondson1234 target=_blank rel=noopener>@MarkEdmondson1234</a>,
<a href=https://github.com/markwsac target=_blank rel=noopener>@markwsac</a>,
<a href=https://github.com/mattfidler target=_blank rel=noopener>@mattfidler</a>,
<a href=https://github.com/matthiaskaeding target=_blank rel=noopener>@matthiaskaeding</a>,
<a href=https://github.com/mgirlich target=_blank rel=noopener>@mgirlich</a>,
<a href=https://github.com/MilesMcBain target=_blank rel=noopener>@MilesMcBain</a>,
<a href=https://github.com/MislavSag target=_blank rel=noopener>@MislavSag</a>,
<a href=https://github.com/mjsteinbaugh target=_blank rel=noopener>@mjsteinbaugh</a>,
<a href=https://github.com/MLopez-Ibanez target=_blank rel=noopener>@MLopez-Ibanez</a>,
<a href=https://github.com/mrcaseb target=_blank rel=noopener>@mrcaseb</a>,
<a href=https://github.com/ms609 target=_blank rel=noopener>@ms609</a>,
<a href=https://github.com/nfancy target=_blank rel=noopener>@nfancy</a>,
<a href=https://github.com/nick-komick target=_blank rel=noopener>@nick-komick</a>,
<a href=https://github.com/overmar target=_blank rel=noopener>@overmar</a>,
<a href=https://github.com/pat-s target=_blank rel=noopener>@pat-s</a>,
<a href=https://github.com/paul-sheridan target=_blank rel=noopener>@paul-sheridan</a>,
<a href=https://github.com/QuLogic target=_blank rel=noopener>@QuLogic</a>,
<a href=https://github.com/ramiromagno target=_blank rel=noopener>@ramiromagno</a>,
<a href=https://github.com/rrodrigueznt target=_blank rel=noopener>@rrodrigueznt</a>,
<a href=https://github.com/rundel target=_blank rel=noopener>@rundel</a>,
<a href=https://github.com/salim-b target=_blank rel=noopener>@salim-b</a>,
<a href=https://github.com/sgibb target=_blank rel=noopener>@sgibb</a>,
<a href=https://github.com/ShixiangWang target=_blank rel=noopener>@ShixiangWang</a>,
<a href=https://github.com/sthibaul target=_blank rel=noopener>@sthibaul</a>,
<a href=https://github.com/tentacles-from-outer-space target=_blank rel=noopener>@tentacles-from-outer-space</a>,
<a href=https://github.com/thothal target=_blank rel=noopener>@thothal</a>,
<a href=https://github.com/topepo target=_blank rel=noopener>@topepo</a>,
<a href=https://github.com/torfason target=_blank rel=noopener>@torfason</a>,
<a href=https://github.com/trestletech target=_blank rel=noopener>@trestletech</a>,
<a href=https://github.com/tzakharko target=_blank rel=noopener>@tzakharko</a>,
<a href=https://github.com/wngrtn target=_blank rel=noopener>@wngrtn</a>,
<a href=https://github.com/x1o target=_blank rel=noopener>@x1o</a>,
<a href=https://github.com/yutannihilation target=_blank rel=noopener>@yutannihilation</a>, and
<a href=https://github.com/zachary-foster target=_blank rel=noopener>@zachary-foster</a>.</p></div></div><div class=column25><div class="section hideOnMobile"><div class=sectionTitle>Contents</div><nav id=TableOfContents><ul><li><a href=#color-palettes>Color palettes</a></li><li><a href=#other-improvements>Other improvements</a></li><li><a href=#acknowledgements>Acknowledgements</a></li></ul></nav></div><div class=section></div></div></div></div></div><div id=rStudioFooter class=band><div class=bandContent><div id=copyright>The tidyverse is proudly supported by <a class=rstudioLogo href=https://posit.co/ aria-label="Posit Homepage"></a></div><div id=logos><a href=https://www.tidyverse.org/google_privacy_policy>Privacy policy</a>
<a href=https://github.com/tidyverse class="footerLogo gitHub" aria-label="Tidyverse GitHub organization"></a><a href=https://twitter.com/hashtag/rstats class="footerLogo twitter" aria-label="rstats hashtag on twitter.com"></a></div></div></div></div></div><script src=/js/math-code.js></script><script type=text/x-mathjax-config>
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    processEscapes: true
  }
});
</script><script async src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script type=application/javascript>var dnt=(navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack);var doNotTrack=(dnt=="1"||dnt=="yes");if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');if(window.sessionStorage){var GA_SESSION_STORAGE_KEY='ga:clientId';ga('create','UA-115082821-1',{'storage':'none','clientId':sessionStorage.getItem(GA_SESSION_STORAGE_KEY)});ga(function(tracker){sessionStorage.setItem(GA_SESSION_STORAGE_KEY,tracker.get('clientId'));});}
ga('set','anonymizeIp',true);ga('send','pageview');}</script></body></html></div></div></body></html>