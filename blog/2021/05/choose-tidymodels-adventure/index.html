<!doctype html><html><head><!doctype html><html lang=en-us><link rel=stylesheet href=/css/fonts.css><link rel=stylesheet href=/css/main-site.css><link rel=stylesheet href=/css/fa5-all.css><style type=text/css>body{background-color:#fff;color:#1a1917}a{color:#38577f}a:hover{color:#42709b}a:focus{outline-color:#42709b}.column25-left .sectionTitle a:hover:not(.current),.column16-left .sectionTitle a:hover:not(.current){color:#1a1917}.icon-attribution,.icon-attribution a{color:#1a1917;opacity:75%}#homeContent .band.first{background-color:#fff}#homeContent .band.second{background-color:#fdeba4}#homeContent .band.third{background-color:#fff}#rStudioHeader{background-color:#1a162d;color:#fff}#rStudioHeader .productName{color:#fff}#rStudioHeader .productName:hover,#rStudioHeader .productName:focus{color:#fdeba4}#rStudioHeader #menu .menuItem.a{background-color:#75aadb;color:#fff}#rStudioHeader #menu .menuItem:hover{background-color:#484557;color:#fff}#rStudioHeader #menu .menuItem.current{background-color:#fff;color:#1a162d;text-decoration:none}#rStudioFooter.band{background-color:#767381}#rStudioFooter .bandContent #copyright{color:#e3eef8}table tbody tr:nth-child(even){background-color:#f7faff}table tbody tr:nth-child(odd){background-color:#fff}.latest{border-top:.5em solid <no value>}.event{-moz-box-shadow:0 0 0 0 rgba(0,0,0,.1);-webkit-box-shadow:0 0 0 0 rgba(0,0,0,.1);box-shadow:0 0 0 0 rgba(0,0,0,.1)}.section .event{background-color:#eab0c41a}.section .event{border-top:7pt solid #a19ea936}.section .event a{color:#1a162d}.section .event{color:#404040}</style><link rel=stylesheet href=/css/tidyverse.css><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Hugo 0.71.1"><title>Choose your own tidymodels adventure</title><meta property="og:title" content="Choose your own tidymodels adventure"><meta property="og:description" content="The tidymodels ecosystem is modular and flexible, which can sometimes make choosing an approach overwhelming for newcomers. This post offers opinionated  guidance on where to start!"><meta property="og:type" content="article"><meta property="og:url" content="https://www.tidyverse.org/blog/2021/05/choose-tidymodels-adventure/"><meta property="twitter:card" content="summary_large_image"><meta property="og:title" content="Choose your own tidymodels adventure - Tidyverse"><meta property="description" content="The tidymodels ecosystem is modular and flexible, which can sometimes make choosing an approach overwhelming for newcomers. This post offers opinionated  guidance on where to start!"><meta property="og:description" content="The tidymodels ecosystem is modular and flexible, which can sometimes make choosing an approach overwhelming for newcomers. This post offers opinionated  guidance on where to start!"><meta property="og:image" content="https://www.tidyverse.org/blog/2021/05/choose-tidymodels-adventure/thumbnail-sq.jpg"><meta name=twitter:image content="https://www.tidyverse.org/blog/2021/05/choose-tidymodels-adventure/thumbnail-wd.jpg"><link rel=apple-touch-icon sizes=180x180 href=/images/favicons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/images/favicons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/images/favicons/favicon-16x16.png><link rel=manifest href=/images/favicons/site.webmanifest><link rel=mask-icon href=/images/favicons/safari-pinned-tab.svg><link rel="shortcut icon" href=/images/favicons/favicon.ico><meta name=msapplication-TileColor content="#da532c"><meta name=msapplication-config href=/images/favicons/browserconfig.xml><script type=text/javascript src=/js/jquery-3.5.1.min.js></script><script type=text/javascript src=/js/site.js></script><link rel=icon href=/images/favicon.ico><script type=text/javascript src=/js/clipboard.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin=anonymous></script><script defer data-domain=tidyverse.org,all.tidyverse.org src=https://plausible.io/js/plausible.js></script></head><body><div id=appTidyverseSite class="shrinkHeader alwaysShrinkHeader"><div id=main><div id=rStudioHeader><nav class=band><div class="innards bandContent"><div><a class=productName href=/>Tidyverse</a></div><div id=menu><div id=menuToggler></div><div id=menuItems><a class=menuItem href=/packages/>Packages</a>
<a class="menuItem current" href=/blog/>Blog</a>
<a class=menuItem href=/learn/>Learn</a>
<a class=menuItem href=/help/>Help</a>
<a class=menuItem href=/contribute/>Contribute</a></div></div></div></nav></div><main><div class="band padForHeader pushFooter"><div class=bandContent><div class="full splitColumns withMobileMargins"><div class=column75><h1 class=article-title>Choose your own tidymodels adventure</h1><div class=article-header aria-hidden=true><div class=photo><img src=/blog/2021/05/choose-tidymodels-adventure/thumbnail-wd.jpg></div><div class=photoCredit>Photo by <a href=https://unsplash.com/photos/0LXFLzDOfuA>Jonathan Fox</a></div></div><span class=article-date><i class="fas fa-calendar-day fa-fw"></i>&nbsp;&nbsp;2021/05/24</span><p style=margin-bottom:.5em;margin-top:.85em><i class="fas fa-tags"></i>&nbsp;
<a href=/tags/tidymodels/>tidymodels</a>,
<a href=/tags/parsnip/>parsnip</a>,
<a href=/tags/workflows/>workflows</a>,
<a href=/tags/workflowsets/>workflowsets</a></p><p style=margin-top:.5em><i class="fas fa-user-circle fa-fw"></i>&nbsp;
Julia Silge</p><div class=article-content><p>The
<a href=https://www.tidymodels.org/ target=_blank rel=noopener>tidymodels</a> framework is a collection of R packages for modeling and machine learning using tidyverse principles. You can install the tidymodels suite of packages from CRAN with:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nf>install.packages</span><span class=p>(</span><span class=s>&#34;tidymodels&#34;</span><span class=p>)</span>
</code></pre></div><p>The packages in tidymodels are designed to work together in a unified ecosystem, but they are flexible and modular; you can use tidymodels packages for certain parts of a modeling analysis without committing to the entire ecosystem, when preferred. We purposefully write code in these small, modular packages both to make them easier to maintain and easier to use in production systems. This does mean that it can be challenging for a newcomer to know where their specific problem fits in this ecosystem.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nf>library</span><span class=p>(</span><span class=n>tidymodels</span><span class=p>)</span>
<span class=c1>#&gt; ── Attaching packages ────────────────────────────────── tidymodels 0.1.3 ──</span>
<span class=c1>#&gt; ✓ broom        0.7.6      ✓ recipes      0.1.16</span>
<span class=c1>#&gt; ✓ dials        0.0.9      ✓ rsample      0.1.0 </span>
<span class=c1>#&gt; ✓ dplyr        1.0.6      ✓ tibble       3.1.2 </span>
<span class=c1>#&gt; ✓ ggplot2      3.3.3      ✓ tidyr        1.1.3 </span>
<span class=c1>#&gt; ✓ infer        0.5.4      ✓ tune         0.1.5 </span>
<span class=c1>#&gt; ✓ modeldata    0.1.0      ✓ workflows    0.2.2 </span>
<span class=c1>#&gt; ✓ parsnip      0.1.5      ✓ workflowsets 0.0.2 </span>
<span class=c1>#&gt; ✓ purrr        0.3.4      ✓ yardstick    0.0.8</span>
<span class=c1>#&gt; ── Conflicts ───────────────────────────────────── tidymodels_conflicts() ──</span>
<span class=c1>#&gt; x purrr::discard() masks scales::discard()</span>
<span class=c1>#&gt; x dplyr::filter()  masks stats::filter()</span>
<span class=c1>#&gt; x dplyr::lag()     masks stats::lag()</span>
<span class=c1>#&gt; x recipes::step()  masks stats::step()</span>
<span class=c1>#&gt; • Use tidymodels_prefer() to resolve common conflicts.</span>
</code></pre></div><p>In general, we recommend a couple of resources for folks learning about tidymodels: the
<a href=https://www.tidymodels.org/start/ target=_blank rel=noopener><strong>Get Started</strong> section of tidymodels.org</a> to get going quickly and our book
<a href=https://www.tmwr.org/ target=_blank rel=noopener><em>Tidy Modeling with R</em></a> to dig deeper. This post takes on a more specific task for a newcomer to tidymodels. We consider several categories of real-world modeling analyses and recommend ways to
<a href=https://en.wikipedia.org/wiki/Choose_Your_Own_Adventure target=_blank rel=noopener>choose your own adventure</a> in the tidymodels ecosystem. In tidymodels, you can train:</p><ul><li><p>a single model,</p></li><li><p>a workflow, or</p></li><li><p>a set of workflows.</p></li></ul><p>Each of these choices is best in difference circumstances, and we&rsquo;ll consider each in the following sections.</p><h2 id=starting-with-the-basics-a-parsnip-model>Starting with the basics: a <strong>parsnip</strong> model
<a href=#starting-with-the-basics-a-parsnip-model><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>A fully featured ecosystem for modeling and machine learning requires interfaces to, well, models, and the tidymodels package that provides those functions and interfaces is
<a href=https://parsnip.tidymodels.org/ target=_blank rel=noopener>parsnip</a>. If your modeling adventure involves smaller data and straightforward data preprocessing (like that provided by
<a href=https://www.tmwr.org/base-r.html#formula target=_blank rel=noopener>R&rsquo;s model formula</a>), you may be well-served by focusing on parsnip. The parsnip package is a good choice for fitting a straightforward model to a smaller data set like this one:</p><p><img src=https://juliasilge.com/blog/student-debt/index_files/figure-html/unnamed-chunk-3-1.png title="Plot showing student loan debt by race across time" alt="Plot showing student loan debt by race across time" width=70%></p><p>To learn more about how to fit and evaluate parsnip models, check out
<a href=https://www.tidymodels.org/start/models/ target=_blank rel=noopener>this article at tidymodel.org&rsquo;s <strong>Get Started</strong> section</a> and
<a href=https://juliasilge.com/blog/student-debt/ target=_blank rel=noopener>this blog post (complete with screencast) by me</a>. You can use
<a href=https://www.tidyverse.org/blog/2021/03/tidymodels-2021-q1/#choose-parsnip-models-with-an-rstudio-addin target=_blank rel=noopener>parsnip&rsquo;s RStudio addin</a> to generate code for one or more models!</p><p>We don&rsquo;t believe most people using tidymodels fall into this first category, but we think that the tools we&rsquo;ve built for these kinds of straightforward analyses are well-designed and will set you up for statistical and practical success in the short and long term. Instead of fitting a model with, say, <code>lm()</code>, in parsnip we specify a model with code such as:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nf>linear_reg</span><span class=p>()</span> <span class=o>%&gt;%</span> <span class=nf>set_engine</span><span class=p>(</span><span class=s>&#34;lm&#34;</span><span class=p>)</span>
<span class=c1>#&gt; Linear Regression Model Specification (regression)</span>
<span class=c1>#&gt; </span>
<span class=c1>#&gt; Computational engine: lm</span>
</code></pre></div><p>We then <code>fit()</code> that model to data. More code is required to fit a simple model than you may be used to, but learning and using parsnip opens up the door for all the other things you can do with the same pipeline.</p><h2 id=holistic-model-workflows>Holistic model <strong>workflows</strong>
<a href=#holistic-model-workflows><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>When you are setting off on a modeling adventure, it might be worth asking what we even mean by the word &ldquo;model&rdquo;; it is a word that gets overloaded really quickly! In the tidymodels ecosystem, we carefully incorporate <em>both</em> feature engineering (also called data preprocessing) that must be learned from training data <em>and</em> a model fit into a modeling workflow that is estimated together. For example, if you trained a least squares regression model with features learned from principal component analysis, the PCA preprocessing step should be considered part of the model workflow:</p><p><img src=https://www.tmwr.org/premade/proper-workflow.svg title="Diagram showing that PCA preprocessing is part of the modeling process, together with least squares estimation" alt="Diagram showing that PCA preprocessing is part of the modeling process, together with least squares estimation"></p><p>In the tidymodels ecosystem, we use the
<a href=https://workflows.tidymodels.org/ target=_blank rel=noopener>workflows</a> package to bundle together model components and promote more fluent modeling processes. You can fit, tune, and resample workflows, and using workflows has benefits from making it easier to keep track of model components in your code to avoiding data leakage in feature engineering.</p><p>We generally expect that most people using tidymodels fall into this middle category, and most of our ecosystem is designed to optimize for these users&rsquo; experience. Choose a <code>workflow()</code> if you want to try several model and/or feature engineering options with your data, if you prefer a simpler and more unified interface for fitting and tuning, or if you like composable and pipeable code for analyses. The
<a href=https://usemodels.tidymodels.org/ target=_blank rel=noopener>usemodels</a> package can even automate the creation of a workflow, using <em>your</em> data to determine a good recipe along with the model of your choice.</p><p>To learn more about using workflows, see them
<a href=https://www.tidymodels.org/start/case-study/ target=_blank rel=noopener>used in action in this <strong>Get Started</strong> article</a>. Also, I have quite a number of blog posts and screencasts that walk through how to use workflows, such as
<a href=https://juliasilge.com/blog/palmer-penguins/ target=_blank rel=noopener>this one</a> that compares two approaches for the same modeling problem and
<a href=https://juliasilge.com/blog/water-sources/ target=_blank rel=noopener>this one</a> that trains and evaluates a single workflow (one preprocessor + model).</p><h2 id=screening-many-models-workflowsets>Screening many models: <strong>workflowsets</strong>
<a href=#screening-many-models-workflowsets><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>Sometimes a modeling practitioner is in a situation where they don&rsquo;t want to try out just a few approaches on a given data set, but <em>many</em>: not just two or three or four, but A LOT. This is most common when a practitioner starts a new modeling project with a data set that is not well understood and there is little (or maybe no) <em>a priori</em> knowledge about what kind of approach will work well.</p><p>For this kind of tidymodels adventure, we encourage users to try the
<a href=https://workflowsets.tidymodels.org/ target=_blank rel=noopener>workflowsets</a> package, which supports the creation, fitting, and comparison of sets of multiple workflows. Combinations of preprocessors and models can be created, and the resulting workflow set can be tuned or resampled, then evaluated (perhaps using Bayesian analysis):</p><p><img src=https://www.tidyverse.org/blog/2021/03/workflowsets-0-0-1/figure/plot-bayes-1.svg title="Plot showing RMSE by workflow rank for many models" alt="Plot showing RMSE by workflow rank for many models"></p><p>We don&rsquo;t expect that most people using tidymodels will use workflowsets, as it is a specialized tool only useful in some contexts. If you are familiar with AutoML tools, you may notice some similarities between them and what this package does; it has many of the same pros and cons. To learn more about workflowsets (including why our group was hesitant to support and build this functionality!) watch
<a href=https://youtu.be/2OfTEakSFXQ target=_blank rel=noopener>Max&rsquo;s recent talk for the LA RUG</a>, and also
<a href=https://www.tmwr.org/workflow-sets.html target=_blank rel=noopener>read this chapter of our book</a>.</p><h2 id=your-own-tidymodels-adventure>Your own tidymodels adventure
<a href=#your-own-tidymodels-adventure><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>We believe these three general categories cover most of the modeling adventures you as a practitioner might want to embark on, and our guidance here outlines the best choices given the current status of the tidymodels ecosystem here in the middle of 2021. The ecosystem is growing ever more mature, and packages like parsnip and workflows are more stable, while workflowsets is quite new and may be considered more experimental for now.</p><p>For questions and discussions about tidymodels packages, modeling, and machine learning, join us
<a href=https://rstd.io/tidymodels-community target=_blank rel=noopener>in discussion on RStudio Community</a>.</p></div></div><div class=column25><div class="section hideOnMobile"><div class=sectionTitle>Contents</div><nav id=TableOfContents><ul><li><a href=#starting-with-the-basics-a-parsnip-model>Starting with the basics: a <strong>parsnip</strong> model</a></li><li><a href=#holistic-model-workflows>Holistic model <strong>workflows</strong></a></li><li><a href=#screening-many-models-workflowsets>Screening many models: <strong>workflowsets</strong></a></li><li><a href=#your-own-tidymodels-adventure>Your own tidymodels adventure</a></li></ul></nav></div><div class=section></div></div></div></div></div><div id=rStudioFooter class=band><div class=bandContent><div id=copyright>The tidyverse is proudly supported by <a class=rstudioLogo href=https://posit.co/ aria-label="Posit Homepage"></a></div><div id=logos><a href=https://www.tidyverse.org/google_privacy_policy>Privacy policy</a>
<a href=https://github.com/tidyverse class="footerLogo gitHub" aria-label="Tidyverse GitHub organization"></a><a href=https://twitter.com/hashtag/rstats class="footerLogo twitter" aria-label="rstats hashtag on twitter.com"></a></div></div></div></div></div><script type=application/javascript>var dnt=(navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack);var doNotTrack=(dnt=="1"||dnt=="yes");if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');if(window.sessionStorage){var GA_SESSION_STORAGE_KEY='ga:clientId';ga('create','UA-115082821-1',{'storage':'none','clientId':sessionStorage.getItem(GA_SESSION_STORAGE_KEY)});ga(function(tracker){sessionStorage.setItem(GA_SESSION_STORAGE_KEY,tracker.get('clientId'));});}
ga('set','anonymizeIp',true);ga('send','pageview');}</script></body></html></div></div></body></html>