<!doctype html><html><head><!doctype html><html lang=en-us><link rel=stylesheet href=/css/fonts.css><link rel=stylesheet href=/css/main-site.css><link rel=stylesheet href=/css/fa5-all.css><style type=text/css>body{background-color:#fff;color:#1a1917}a{color:#38577f}a:hover{color:#42709b}a:focus{outline-color:#42709b}.column25-left .sectionTitle a:hover:not(.current),.column16-left .sectionTitle a:hover:not(.current){color:#1a1917}.icon-attribution,.icon-attribution a{color:#1a1917;opacity:75%}#homeContent .band.first{background-color:#fff}#homeContent .band.second{background-color:#fdeba4}#homeContent .band.third{background-color:#fff}#rStudioHeader{background-color:#1a162d;color:#fff}#rStudioHeader .productName{color:#fff}#rStudioHeader .productName:hover,#rStudioHeader .productName:focus{color:#fdeba4}#rStudioHeader #menu .menuItem.a{background-color:#75aadb;color:#fff}#rStudioHeader #menu .menuItem:hover{background-color:#484557;color:#fff}#rStudioHeader #menu .menuItem.current{background-color:#fff;color:#1a162d;text-decoration:none}#rStudioFooter.band{background-color:#767381}#rStudioFooter .bandContent #copyright{color:#e3eef8}table tbody tr:nth-child(even){background-color:#f7faff}table tbody tr:nth-child(odd){background-color:#fff}.latest{border-top:.5em solid <no value>}.event{-moz-box-shadow:0 0 0 0 rgba(0,0,0,.1);-webkit-box-shadow:0 0 0 0 rgba(0,0,0,.1);box-shadow:0 0 0 0 rgba(0,0,0,.1)}.section .event{background-color:#eab0c41a}.section .event{border-top:7pt solid #a19ea936}.section .event a{color:#1a162d}.section .event{color:#404040}</style><link rel=stylesheet href=/css/tidyverse.css><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Hugo 0.71.1"><title>dbplyr 1.2.0</title><meta property="og:title" content="dbplyr 1.2.0"><meta property="og:description" content="New version now on CRAN. It features new database backends, an enhanced copy_to(), and initial stringr support"><meta property="og:type" content="article"><meta property="og:url" content="https://www.tidyverse.org/blog/2018/01/dbplyr-1-2/"><meta property="twitter:card" content="summary_large_image"><meta property="og:title" content="dbplyr 1.2.0 - Tidyverse"><meta property="description" content="New version now on CRAN. It features new database backends, an enhanced copy_to(), and initial stringr support"><meta property="og:description" content="New version now on CRAN. It features new database backends, an enhanced copy_to(), and initial stringr support"><meta property="og:image" content="https://www.tidyverse.org/blog/2018/01/dbplyr-1-2/dbplyr-1-2-sq.jpg"><meta name=twitter:image content="https://www.tidyverse.org/blog/2018/01/dbplyr-1-2/dbplyr-1-2-wd.jpg"><link rel=apple-touch-icon sizes=180x180 href=/images/favicons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/images/favicons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/images/favicons/favicon-16x16.png><link rel=manifest href=/images/favicons/site.webmanifest><link rel=mask-icon href=/images/favicons/safari-pinned-tab.svg><link rel="shortcut icon" href=/images/favicons/favicon.ico><meta name=msapplication-TileColor content="#da532c"><meta name=msapplication-config href=/images/favicons/browserconfig.xml><script type=text/javascript src=/js/jquery-3.5.1.min.js></script><script type=text/javascript src=/js/site.js></script><link rel=icon href=/images/favicon.ico><script type=text/javascript src=/js/clipboard.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin=anonymous></script><script defer data-domain=tidyverse.org,all.tidyverse.org src=https://plausible.io/js/plausible.js></script></head><body><div id=appTidyverseSite class="shrinkHeader alwaysShrinkHeader"><div id=main><div id=rStudioHeader><nav class=band><div class="innards bandContent"><div><a class=productName href=/%20/>Tidyverse</a></div><div id=menu><div id=menuToggler></div><div id=menuItems><a class=menuItem href=/packages/>Packages</a>
<a class="menuItem current" href=/blog/>Blog</a>
<a class=menuItem href=/learn/>Learn</a>
<a class=menuItem href=/help/>Help</a>
<a class=menuItem href=/contribute/>Contribute</a></div></div></div></nav></div><main><div class="band padForHeader pushFooter"><div class=bandContent><div class="full splitColumns withMobileMargins"><div class=column75><h1 class=article-title>dbplyr 1.2.0</h1><div class=article-header aria-hidden=true><div class=photo><img src=/blog/2018/01/dbplyr-1-2/dbplyr-1-2-wd.jpg></div><div class=photoCredit>Photo by <a href=https://unsplash.com/photos/y7rGTFyOzxc>Giulia Bertelli</a></div></div><span class=article-date><i class="fas fa-calendar-day fa-fw"></i>&nbsp;&nbsp;2018/01/08</span><p style=margin-bottom:.5em;margin-top:.85em><i class="fas fa-tags"></i>&nbsp;
<a href=/tags/dplyr/>dplyr</a>,
<a href=/tags/tidyverse/>tidyverse</a>,
<a href=/tags/dbplyr/>dbplyr</a>,
<a href=/tags/databases/>databases</a></p><p style=margin-top:.5em><i class="fas fa-user-circle fa-fw"></i>&nbsp;
Edgar Ruiz</p><div class=article-content><p>We are very excited to announce that <a href=http://dbplyr.tidyverse.org/>dbplyr 1.2.0</a> is now available on CRAN! <strong>dbplyr</strong> is the database backend for dplyr. It interacts with databases directly by translating dplyr code into SQL queries. dbplyr is part of an expanding ecosystem of packages meant to help analysts access and analyze data in databases. To learn more, visit our website dedicated to <em>all things R and databases</em>: <a href=http://db.rstudio.com/ class=uri>http://db.rstudio.com/</a></p><p>Install the latest version of dbplyr with:</p><pre class=r><code>install.packages(&quot;dbplyr&quot;)</code></pre><div id=whats-new class="section level2"><h2>Whatâ€™s new?</h2><p>Here are some highlights of new features and fixes found in this release. To see the full details please refer to the <a href=https://github.com/tidyverse/dbplyr/blob/master/NEWS.md#dbplyr-120>release notes</a>:</p><ul><li><p>New custom translation for <strong>Microsoft Access</strong> and <a href=http://db.rstudio.com/databases/teradata/>Teradata</a></p></li><li><p><a href=http://db.rstudio.com/databases/redshift/>Amazon Redshift</a> connections now point to the PostgreSQL translation.</p></li><li>Adds support for <strong>two new database R packages</strong>. These new packages are fully <a href=http://db.rstudio.com/dbi/>DBI</a>-compliant and tested with <a href=https://cran.r-project.org/web/packages/DBItest/index.html>DBItest</a>. We recommend to use these instead of older packages:<ol style=list-style-type:decimal><li><a href=https://cran.r-project.org/web/packages/RMariaDB/index.html>RMariaDB</a>, use in favor of RMySQL</li><li><a href=https://cran.r-project.org/web/packages/RPostgres/index.html>RPostgres</a>, use in favor of RPostgreSQL</li></ol></li><li><a href=https://cran.r-project.org/web/packages/ROracle/index.html>ROracle</a> connections now point to the <a href=http://db.rstudio.com/databases/oracle/>Oracle</a> translation.</li><li><p>Cache query results using <code>copy_to</code>. This feature is very useful because after cached, the results of a long running query can be iteratively analyzed without having to wait for the same base query to run over and over.</p></li><li><p>stringr functions: <code>str_length()</code>, <code>str_to_upper()</code>, <code>str_to_lower()</code>, <code>str_replace_all()</code>, <code>str_detect()</code>, and <code>str_trim()</code> are now supported.</p></li><li><p><code>in_schema()</code> should now work in more places, particularly in <code>copy_to()</code></p></li><li><p>For those who need to extract the resulting SQL query from dplyr code, there is now a new function called <code>remote_query()</code>. Unlike <code>show_query()</code>, <code>remote_query()</code> returns a character object, and unlike <code>sql_render()</code>, the new function automatically detects the type of database attached to the given dplyr code and translates accordingly. There are four additional functions that provide a standard API to get metadata about a remote <code>tbl</code>, these are: <code>remote_name()</code>, <code>remote_con()</code>, <code>remote_src()</code>, and <code>remote_query_plan()</code>.</p></li><li><p>Adds support for temporary tables in Microsoft SQL Server. Additionally, the issue of certain operators working only in <code>mutate()</code> or only in <code>filter()</code> has been resolved.</p></li><li><p>Two new functions for developers: <code>sql_aggregate()</code> and <code>win_aggregate()</code>. They are for generating SQL and windowed SQL functions for aggregates.</p></li></ul></div><div id=caching-results class="section level2"><h2>Caching results</h2><p>The <code>copy_to()</code> function is now able to <strong>cache the results of a set of dplyr database transformations</strong>. An additional advantage is that <code>copy_to()</code> uses the database to run and cache the data, so there is no data being transmitted back to R. For this feature to work, the user needs sufficient rights to create temporary tables in the database.</p><pre class=r><code>con &lt;- DBI::dbConnect(RSQLite::SQLite(), &quot;:memory:&quot;)
mtcars_db &lt;- copy_to(con, rownames_to_column(mtcars), &quot;mtcars&quot;)

only_auto &lt;- mtcars_db %&gt;%
  filter(am == 1) %&gt;%
  select(mpg, cyl, am)

auto &lt;- copy_to(con, only_auto, &quot;auto&quot;) # New in dbplyr 1.2.0
head(auto)
#&gt; # Source: lazy query [?? x 3]
#&gt; # Database: sqlite 3.19.3 [:memory:]
#&gt;     mpg   cyl    am
#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
#&gt; 1  21.0  6.00  1.00
#&gt; 2  21.0  6.00  1.00
#&gt; 3  22.8  4.00  1.00
#&gt; 4  32.4  4.00  1.00
#&gt; 5  30.4  4.00  1.00
#&gt; 6  33.9  4.00  1.00</code></pre><p>If the set of dplyr transformations need to be cached to a <strong>different database</strong>, <code>copy_to()</code> is smart enough to download the data into memory in R, and then uploads the data to the target database.</p><pre class=r><code>second_con &lt;- DBI::dbConnect(RSQLite::SQLite(), &quot;:memory:&quot;)
second_auto &lt;- copy_to(second_con, only_auto, &quot;auto&quot;) # New in dbplyr 1.2.0
head(second_auto)
#&gt; # Source: lazy query [?? x 3]
#&gt; # Database: sqlite 3.19.3 [:memory:]
#&gt;     mpg   cyl    am
#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
#&gt; 1  21.0  6.00  1.00
#&gt; 2  21.0  6.00  1.00
#&gt; 3  22.8  4.00  1.00
#&gt; 4  32.4  4.00  1.00
#&gt; 5  30.4  4.00  1.00
#&gt; 6  33.9  4.00  1.00</code></pre></div><div id=stringr-functions class="section level2"><h2>stringr functions</h2><p>Six stringr functions are now supported. Regular expression support varies from database to database, but most simple regular expressions should be ok. The functions are:</p><ol style=list-style-type:decimal><li><code>str_length()</code></li><li><code>str_to_upper()</code></li><li><code>str_to_lower()</code></li><li><code>str_replace_all()</code></li><li><code>str_detect()</code></li><li><code>str_trim()</code></li></ol><pre class=r><code>tbl(con, &quot;mtcars&quot;) %&gt;%
  head() %&gt;%
  select(rowname) %&gt;%
  mutate(
    s1 = str_length(rowname),                 # New in dbplyr 1.2.0
    s2 = str_to_upper(rowname),               # New in dbplyr 1.2.0
    s3 = str_to_lower(rowname),               # New in dbplyr 1.2.0
    s4 = str_replace_all(rowname, &quot;M&quot;, &quot;X&quot;),  # New in dbplyr 1.2.0
    s5 = str_detect(rowname, &quot;M&quot;),            # New in dbplyr 1.2.0
    s6 = str_trim(rowname)                    # New in dbplyr 1.2.0
  )
#&gt; # Source: lazy query [?? x 7]
#&gt; # Database: sqlite 3.19.3 [:memory:]
#&gt;   rowname              s1 s2                s3       s4         s5 s6
#&gt;   &lt;chr&gt;             &lt;int&gt; &lt;chr&gt;             &lt;chr&gt;    &lt;chr&gt;   &lt;int&gt; &lt;chr&gt;
#&gt; 1 Mazda RX4             9 MAZDA RX4         mazda r~ Xazda ~     0 Mazda ~
#&gt; 2 Mazda RX4 Wag        13 MAZDA RX4 WAG     mazda r~ Xazda ~     0 Mazda ~
#&gt; 3 Datsun 710           10 DATSUN 710        datsun ~ Datsun~     0 Datsun~
#&gt; 4 Hornet 4 Drive       14 HORNET 4 DRIVE    hornet ~ Hornet~     0 Hornet~
#&gt; 5 Hornet Sportabout    17 HORNET SPORTABOUT hornet ~ Hornet~     0 Hornet~
#&gt; 6 Valiant               7 VALIANT           valiant  Valiant     0 Valiant</code></pre></div><div id=contributors class="section level2"><h2>Contributors</h2><p>A big thanks goes to those who made this release possible by contributing code or documentation: <a href=https://github.com/DavisVaughan>@DavisVaughan</a>, <a href=https://github.com/baileych>@baileych</a>, <a href=https://github.com/Hong-Revo>@Hong-Revo</a>, <a href=https://github.com/cwarden>@cwarden</a>, <a href=https://github.com/zozlak>@zozlak</a>, <a href=https://github.com/denismaciel>@denismaciel</a>, <a href=https://github.com/jonassundman>@jonassundman</a>, <a href=https://github.com/wibeasley>@wibeasley</a>, <a href=https://github.com/mungojam>@mungojam</a>, <a href=https://github.com/hoxo-m>@hoxo-m</a>, <a href=https://github.com/dpprdan>@dpprdan</a>,<a href=https://github.com/jimhester>@jimhester</a>, <a href=https://github.com/krlmlr>@krlmlr</a>, and <a href=https://github.com/javierluraschi>@javierluraschi</a>. Also, a thank you to those who helped up improve this package by suggesting features and reporting issues: <a href=https://github.com/drf5n>@drf5n</a>, <a href=https://github.com/larspijnappel>@larspijnappel</a>, <a href=https://github.com/lbakerIsazi>@lbakerIsazi</a>, <a href=https://github.com/mtmorgan>@mtmorgan</a>, <a href=https://github.com/refik>@refik</a>, <a href=https://github.com/sicarul>@sicarul</a>, and <a href=https://github.com/vitallish>@vitallish</a></p></div></div></div><div class=column25><div class="section hideOnMobile"></div><div class=section></div></div></div></div></div><div id=rStudioFooter class=band><div class=bandContent><div id=copyright>The tidyverse is proudly supported by <a class=rstudioLogo href=https://posit.co/ aria-label="Posit Homepage"></a></div><div id=logos><a href=https://www.tidyverse.org/google_privacy_policy>Privacy policy</a>
<a href=https://github.com/tidyverse class="footerLogo gitHub" aria-label="Tidyverse GitHub organization"></a><a href=https://twitter.com/hashtag/rstats class="footerLogo twitter" aria-label="rstats hashtag on twitter.com"></a></div></div></div></div></div><script type=application/javascript>var dnt=(navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack);var doNotTrack=(dnt=="1"||dnt=="yes");if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');if(window.sessionStorage){var GA_SESSION_STORAGE_KEY='ga:clientId';ga('create','UA-115082821-1',{'storage':'none','clientId':sessionStorage.getItem(GA_SESSION_STORAGE_KEY)});ga(function(tracker){sessionStorage.setItem(GA_SESSION_STORAGE_KEY,tracker.get('clientId'));});}
ga('set','anonymizeIp',true);ga('send','pageview');}</script></body></html></div></div></body></html>