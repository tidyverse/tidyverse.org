<!doctype html><html><head><!doctype html><html lang=en-us><link rel=stylesheet href=/css/fonts.css><link rel=stylesheet href=/css/main-site.css><link rel=stylesheet href=/css/fa5-all.css><style type=text/css>body{background-color:#fff;color:#1a1917}a{color:#38577f}a:hover{color:#42709b}a:focus{outline-color:#42709b}.column25-left .sectionTitle a:hover:not(.current),.column16-left .sectionTitle a:hover:not(.current){color:#1a1917}.icon-attribution,.icon-attribution a{color:#1a1917;opacity:75%}#homeContent .band.first{background-color:#fff}#homeContent .band.second{background-color:#fdeba4}#homeContent .band.third{background-color:#fff}#rStudioHeader{background-color:#1a162d;color:#fff}#rStudioHeader .productName{color:#fff}#rStudioHeader .productName:hover,#rStudioHeader .productName:focus{color:#fdeba4}#rStudioHeader #menu .menuItem.a{background-color:#75aadb;color:#fff}#rStudioHeader #menu .menuItem:hover{background-color:#484557;color:#fff}#rStudioHeader #menu .menuItem.current{background-color:#fff;color:#1a162d;text-decoration:none}#rStudioFooter.band{background-color:#767381}#rStudioFooter .bandContent #copyright{color:#e3eef8}table tbody tr:nth-child(even){background-color:#f7faff}table tbody tr:nth-child(odd){background-color:#fff}.latest{border-top:.5em solid <no value>}.event{-moz-box-shadow:0 0 0 0 rgba(0,0,0,.1);-webkit-box-shadow:0 0 0 0 rgba(0,0,0,.1);box-shadow:0 0 0 0 rgba(0,0,0,.1)}.section .event{background-color:#eab0c41a}.section .event{border-top:7pt solid #a19ea936}.section .event a{color:#1a162d}.section .event{color:#404040}</style><link rel=stylesheet href=/css/tidyverse.css><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Hugo 0.71.1"><title>generics 0.0.1</title><meta property="og:title" content="generics 0.0.1"><meta property="og:description" content="Reduce package dependencies by using common lightweight S3 generics."><meta property="og:type" content="article"><meta property="og:url" content="https://www.tidyverse.org/blog/2018/11/generics-0.0.1/"><meta property="twitter:card" content="summary_large_image"><meta property="og:title" content="generics 0.0.1 - Tidyverse"><meta property="description" content="Reduce package dependencies by using common lightweight S3 generics."><meta property="og:description" content="Reduce package dependencies by using common lightweight S3 generics."><meta property="og:image" content="https://www.tidyverse.org/blog/2018/11/generics-0.0.1/generics-0.0.1-sq.jpg"><meta name=twitter:image content="https://www.tidyverse.org/blog/2018/11/generics-0.0.1/generics-0.0.1-wd.jpg"><link rel=apple-touch-icon sizes=180x180 href=/images/favicons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/images/favicons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/images/favicons/favicon-16x16.png><link rel=manifest href=/images/favicons/site.webmanifest><link rel=mask-icon href=/images/favicons/safari-pinned-tab.svg><link rel="shortcut icon" href=/images/favicons/favicon.ico><meta name=msapplication-TileColor content="#da532c"><meta name=msapplication-config href=/images/favicons/browserconfig.xml><script type=text/javascript src=/js/jquery-3.5.1.min.js></script><script type=text/javascript src=/js/site.js></script><link rel=icon href=/images/favicon.ico><script type=text/javascript src=/js/clipboard.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin=anonymous></script><script defer data-domain=tidyverse.org,all.tidyverse.org src=https://plausible.io/js/plausible.js></script></head><body><div id=appTidyverseSite class="shrinkHeader alwaysShrinkHeader"><div id=main><div id=rStudioHeader><nav class=band><div class="innards bandContent"><div><a class=productName href=/>Tidyverse</a></div><div id=menu><div id=menuToggler></div><div id=menuItems><a class=menuItem href=/packages/>Packages</a>
<a class="menuItem current" href=/blog/>Blog</a>
<a class=menuItem href=/learn/>Learn</a>
<a class=menuItem href=/help/>Help</a>
<a class=menuItem href=/contribute/>Contribute</a></div></div></div></nav></div><main><div class="band padForHeader pushFooter"><div class=bandContent><div class="full splitColumns withMobileMargins"><div class=column75><h1 class=article-title>generics 0.0.1</h1><div class=article-header aria-hidden=true><div class=photo><img src=/blog/2018/11/generics-0.0.1/generics-0.0.1-wd.jpg></div><div class=photoCredit>Photo by <a href=https://unsplash.com/photos/9GMO0Sxyw_Y>Jonathan Knepper</a></div></div><span class=article-date><i class="fas fa-calendar-day fa-fw"></i>&nbsp;&nbsp;2018/11/14</span><p style=margin-bottom:.5em;margin-top:.85em><i class="fas fa-tags"></i>&nbsp;
<a href=/tags/r-lib/>r-lib</a>,
<a href=/tags/generics/>generics</a></p><p style=margin-top:.5em><i class="fas fa-user-circle fa-fw"></i>&nbsp;
Max Kuhn, Davis Vaughan</p><div class=article-content><p>The
<a href=https://github.com/r-lib/generics target=_blank rel=noopener><code>generics</code></a> package is now on CRAN. <code>generics</code> is a lightweight package that is designed to help developers reduce dependencies for their packages.</p><p>The idea is to have many generic S3 functions live in a single package that has almost no dependencies. Normally, if you wanted to create a <code>broom::tidy()</code> method, you would import <code>broom</code> as a dependency, import the <code>tidy()</code> generic, then export it so that package users can have access to that specific method. One issue with this is that your package now carries along the dependencies of the package that defines the generic (in this case, <code>broom</code>).</p><p>Consider <code>fit()</code>. There are at least 15 packages that export an object called <code>fit</code> (either a function or method), and at least 12 have specific S3 <code>fit()</code> methods. When more than one is loaded, there is a potential for conflicts to arise:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nf>library</span><span class=p>(</span><span class=n>NMF</span><span class=p>)</span>
<span class=nf>library</span><span class=p>(</span><span class=n>text2vec</span><span class=p>)</span>
<span class=c1>#&gt; </span>
<span class=c1>#&gt; Attaching package: &#39;text2vec&#39;</span>
<span class=c1>#&gt; The following object is masked from &#39;package:NMF&#39;:</span>
<span class=c1>#&gt; </span>
<span class=c1>#&gt;     fit</span>
</code></pre></div><p><code>generics</code> provides a way to avoid such conflicts. To do so, a package would include <code>generics</code> as an import dependency, import the generic function of interest, then re-export using the <code>roxygen2</code> commands:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=c1>#&#39; @importFrom generics fit</span>
<span class=c1>#&#39; @export</span>
<span class=n>generics</span><span class=o>::</span><span class=n>fit</span>
</code></pre></div><p>One interesting aspect of the package is that the <code>generics</code> function documentation is dynamic. Suppose that <code>generics</code> is loaded in a clean R session. If you look at the help file <code>?generics::tidy</code>, the documentation page has:</p><pre><code>Methods:

     No methods found in currently loaded packages.
</code></pre><p>However, once another package is loaded with an exported <code>tidy()</code> method, <code>?generics::tidy</code> shows a list of all exported methods and includes a link to the help page specific to each one. For example, after loading the <code>embed</code> package:</p><pre><code>Methods:

     See the following help topics for more details about individual
     methods:

     ‘embed’

        • ‘step_embed’: ‘step_embed’

        • ‘step_lencode_bayes’: ‘step_lencode_bayes’

        • ‘step_lencode_glm’: ‘step_lencode_glm’

        • ‘step_lencode_mixed’: ‘step_lencode_mixed’

     ‘recipes’

        • ‘check_cols’: ‘check_cols’

        • ‘check_missing’: ‘check_missing’

        • ‘check_range’: ‘check_range’
</code></pre><p>The current list of S3 generics that are included in the package are: <code>as.factor</code>, <code>as.ordered</code>, <code>augment</code>, <code>calculate</code>, <code>compile</code>, <code>components</code>, <code>equation</code>, <code>estfun</code>, <code>evaluate</code>, <code>explain</code>, <code>fit</code>, <code>fit_xy</code>, <code>generate</code>, <code>glance</code>, <code>hypothesize</code>, <code>interpolate</code>, <code>intersect</code>, <code>is.element</code>, <code>learn</code>, <code>prune</code>, <code>refit</code>, <code>setdiff</code>, <code>setequal</code>, <code>specify</code>, <code>tidy</code>, <code>train</code>, <code>union</code>, <code>var_imp</code>, <code>varying_args</code>, and <code>visualize</code>.</p><p>Thanks to those who contributed to the discussion prior to releasing the package: Achim Zeileis, Alex Hayes, Andrew Bray, Andy Liaw, Chester Ismay, Davis Vaughan, Hadley Wickham, Mitchell O&rsquo;Hara-Wild, Przemyslaw Biecek, Rob Hyndman, Thomas Lin Pedersen, and Torsten Hothorn.</p></div></div><div class=column25><div class="section hideOnMobile"></div><div class=section></div></div></div></div></div><div id=rStudioFooter class=band><div class=bandContent><div id=copyright>The tidyverse is proudly supported by <a class=rstudioLogo href=https://posit.co/ aria-label="Posit Homepage"></a></div><div id=logos><a href=https://www.tidyverse.org/google_privacy_policy>Privacy policy</a>
<a href=https://github.com/tidyverse class="footerLogo gitHub" aria-label="Tidyverse GitHub organization"></a><a href=https://twitter.com/hashtag/rstats class="footerLogo twitter" aria-label="rstats hashtag on twitter.com"></a></div></div></div></div></div><script type=application/javascript>var dnt=(navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack);var doNotTrack=(dnt=="1"||dnt=="yes");if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');if(window.sessionStorage){var GA_SESSION_STORAGE_KEY='ga:clientId';ga('create','UA-115082821-1',{'storage':'none','clientId':sessionStorage.getItem(GA_SESSION_STORAGE_KEY)});ga(function(tracker){sessionStorage.setItem(GA_SESSION_STORAGE_KEY,tracker.get('clientId'));});}
ga('set','anonymizeIp',true);ga('send','pageview');}</script></body></html></div></div></body></html>