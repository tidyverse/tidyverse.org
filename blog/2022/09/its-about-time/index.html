<!doctype html><html><head><!doctype html><html lang=en-us><link rel=stylesheet href=/css/fonts.css><link rel=stylesheet href=/css/main-site.css><link rel=stylesheet href=/css/fa5-all.css><style type=text/css>body{background-color:#fff;color:#1a1917}a{color:#38577f}a:hover{color:#42709b}a:focus{outline-color:#42709b}.column25-left .sectionTitle a:hover:not(.current),.column16-left .sectionTitle a:hover:not(.current){color:#1a1917}.icon-attribution,.icon-attribution a{color:#1a1917;opacity:75%}#homeContent .band.first{background-color:#fff}#homeContent .band.second{background-color:#fdeba4}#homeContent .band.third{background-color:#fff}#rStudioHeader{background-color:#1a162d;color:#fff}#rStudioHeader .productName{color:#fff}#rStudioHeader .productName:hover,#rStudioHeader .productName:focus{color:#fdeba4}#rStudioHeader #menu .menuItem.a{background-color:#75aadb;color:#fff}#rStudioHeader #menu .menuItem:hover{background-color:#484557;color:#fff}#rStudioHeader #menu .menuItem.current{background-color:#fff;color:#1a162d;text-decoration:none}#rStudioFooter.band{background-color:#767381}#rStudioFooter .bandContent #copyright{color:#e3eef8}table tbody tr:nth-child(even){background-color:#f7faff}table tbody tr:nth-child(odd){background-color:#fff}.latest{border-top:.5em solid <no value>}.event{-moz-box-shadow:0 0 0 0 rgba(0,0,0,.1);-webkit-box-shadow:0 0 0 0 rgba(0,0,0,.1);box-shadow:0 0 0 0 rgba(0,0,0,.1)}.section .event{background-color:#eab0c41a}.section .event{border-top:7pt solid #a19ea936}.section .event a{color:#1a162d}.section .event{color:#404040}</style><link rel=stylesheet href=/css/tidyverse.css><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Hugo 0.71.1"><title>It's about time</title><meta property="og:title" content="It's about time"><meta property="og:description" content="Davis Vaughan's talk from rstudio::conf(2022) on clock, an R package that aims to provide comprehensive and safe handling of date-times."><meta property="og:type" content="article"><meta property="og:url" content="https://www.tidyverse.org/blog/2022/09/its-about-time/"><meta property="twitter:card" content="summary_large_image"><meta property="og:title" content="It's about time - Tidyverse"><meta property="description" content="Davis Vaughan's talk from rstudio::conf(2022) on clock, an R package that aims to provide comprehensive and safe handling of date-times."><meta property="og:description" content="Davis Vaughan's talk from rstudio::conf(2022) on clock, an R package that aims to provide comprehensive and safe handling of date-times."><meta property="og:image" content="https://www.tidyverse.org/blog/2022/09/its-about-time/thumbnail-sq.jpg"><meta name=twitter:image content="https://www.tidyverse.org/blog/2022/09/its-about-time/thumbnail-wd.jpg"><link rel=apple-touch-icon sizes=180x180 href=/images/favicons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/images/favicons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/images/favicons/favicon-16x16.png><link rel=manifest href=/images/favicons/site.webmanifest><link rel=mask-icon href=/images/favicons/safari-pinned-tab.svg><link rel="shortcut icon" href=/images/favicons/favicon.ico><meta name=msapplication-TileColor content="#da532c"><meta name=msapplication-config href=/images/favicons/browserconfig.xml><script type=text/javascript src=/js/jquery-3.5.1.min.js></script><script type=text/javascript src=/js/site.js></script><link rel=icon href=/images/favicon.ico><script type=text/javascript src=/js/clipboard.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin=anonymous></script><script defer data-domain=tidyverse.org,all.tidyverse.org src=https://plausible.io/js/plausible.js></script></head><body><div id=appTidyverseSite class="shrinkHeader alwaysShrinkHeader"><div id=main><div id=rStudioHeader><nav class=band><div class="innards bandContent"><div><a class=productName href=/%20/>Tidyverse</a></div><div id=menu><div id=menuToggler></div><div id=menuItems><a class=menuItem href=/packages/>Packages</a>
<a class="menuItem current" href=/blog/>Blog</a>
<a class=menuItem href=/learn/>Learn</a>
<a class=menuItem href=/help/>Help</a>
<a class=menuItem href=/contribute/>Contribute</a></div></div></div></nav></div><main><div class="band padForHeader pushFooter"><div class=bandContent><div class="full splitColumns withMobileMargins"><div class=column75><h1 class=article-title>It&rsquo;s about time</h1><div class=article-header aria-hidden=true><div class=photo><img src=/blog/2022/09/its-about-time/thumbnail-wd.jpg></div><div class=photoCredit>Photo by <a href=https://www.pexels.com/photo/collection-of-retro-wall-clocks-in-antique-store-2168241/>Teddy Yang</a></div></div><span class=article-date><i class="fas fa-calendar-day fa-fw"></i>&nbsp;&nbsp;2022/09/28</span><p style=margin-bottom:.5em;margin-top:.85em><i class="fas fa-tags"></i>&nbsp;
<a href=/tags/r-lib/>r-lib</a>,
<a href=/tags/clock/>clock</a></p><p style=margin-top:.5em><i class="fas fa-user-circle fa-fw"></i>&nbsp;
Mara Averick</p><div class=article-content><p>At rstudio::conf(2022), Davis Vaughan gave a lightning talk on
<a href=https://clock.r-lib.org/ target=_blank rel=noopener>clock</a>, an R package that aims to provide comprehensive and safe handling of date-times. clock goes beyond the date and date-time types that base R provides, implementing new types for year-month, year-quarter, ISO year-week, and many other date-like formats, all with up to nanosecond precision. clock is <strong>not</strong> replacing
<a href=https://lubridate.tidyverse.org/ target=_blank rel=noopener>lubridate</a>. lubridate will never go away, and is not being deprecated or superseded. In the future, we expect to update lubridate to use clock as a backend (so clock becomes
<a href=https://stringi.gagolewski.com/ target=_blank rel=noopener>stringi</a> to lubridate&rsquo;s
<a href=https://stringr.tidyverse.org/ target=_blank rel=noopener>stringr</a>).</p><p>In Davis&rsquo; talk, you&rsquo;ll see how clock emphasizes &ldquo;safety first&rdquo; when manipulating date-times, and how its new date-time types can be used in your own work.</p><script src=https://fast.wistia.com/embed/medias/pzuyostdz8.jsonp async></script><script src=https://fast.wistia.com/assets/external/E-v1.js async></script><div class=wistia_responsive_padding style="padding:56.25% 0 0;position:relative"><div class=wistia_responsive_wrapper style=height:100%;left:0;position:absolute;top:0;width:100%><div class="wistia_embed wistia_async_pzuyostdz8 videoFoam=true" style=height:100%;position:relative;width:100%><div class=wistia_swatch style="height:100%;left:0;opacity:0;overflow:hidden;position:absolute;top:0;transition:opacity 200ms;width:100%"><p><img src=https://fast.wistia.com/embed/medias/pzuyostdz8/swatch style=filter:blur(5px);height:100%;object-fit:contain;width:100% alt aria-hidden=true onload="this.parentNode.style.opacity=1;"></p></div></div></div></div><details><summary><strong>Transcript</strong></summary><p>I am here to talk about time, which is obviously everyone&rsquo;s favorite subject. In particular, I&rsquo;m actually here to talk about a package called clock.</p><p>So, clock is a date time manipulation library kind of in the same way that lubridate is a date time manipulation library. It does things you might expect add dates, subtract dates, format and parse them. All kinds of other manipulation. If you get anything out of this talk, it&rsquo;s really that clock is not here to replace lubridate in any way. The only idea would be that in the end clock might be a back end for lubridate in the same way that dtplyr or dbplyr are different types of back ends for dplyr. And I&rsquo;m not even going to spend the rest of this talk talking about features that overlap with lubridate.</p><p>Instead, I want to talk about things that are pretty unique to clock. One of those is safety. And one of those is calendars.</p><p>Because I only have 5 minutes, I&rsquo;m going to do that with one date, January 30th of this year. Safety is built into clock from the ground up to hopefully avoid issues like this, time zone issues, invalid date issues, things that are pretty common when you&rsquo;re working with time series and just drive you up the wall.</p><p>So let&rsquo;s jump into safety. Here&rsquo;s a timeline. This is January 30th, our date in question marked in blue on our timeline. It continues through to February. On the next line, you&rsquo;ll see this gap between February and March because February only has 28 days, but January had 31, so it doesn&rsquo;t necessarily map 1 to 1. If I were to ask you this seemingly innocuous question. Please add one month to this date. What would you get?</p><p>Well, if we were to ask lubridate, it gives you a somewhat reasonable answer of NA. There is nothing that maps 1 to 1 from January 30th to something in February, maybe. And there&rsquo;s nothing particularly wrong with this except for the fact that it&rsquo;s not the most useful answer. Generally, you&rsquo;ll be running this code and it happens silently. And then five steps downstream. All of a sudden, you discover there&rsquo;s some NAs here. Like, I didn&rsquo;t have those to begin with. Where did those come from? And you have to backtrack up through your calculations and figure out why they appeared.</p><p>If you were to ask clock this question with add months, it actually gives you an error in this special case by default. It says, whoa, hold up. There&rsquo;s something wrong here. Go look at location 1. If you had a vector, it might be location five, seven, whatever. And check out the invalid argument to learn more about this case. You go and you look at the documentation and you come out with the idea that maybe I could set this thing called invalid equals previous. That allows you to say, give me the previous valid date when I have this kind of problem. That&rsquo;s the end of February. I think that&rsquo;s a pretty reasonable result in this case. But you also might want to say, depending on your specific problem, invalid equals next to map forward to the beginning of March instead. If you actually do like that lubridate behavior, that&rsquo;s fine. You can say invalid equals NA any time that occurs, you&rsquo;ll get an NA instead. So that&rsquo;s about safety.</p><p>Let&rsquo;s talk about calendars. Calendars are just the idea of a way to represent a unique point in time. With our date in question, we could use a calendar called year month day to represent this date using three components the year, the month, and the day of the month. But this isn&rsquo;t the only way you could represent this date. You could also use the year and the day of the year, or you could use one of these many other calendar types that are built into clock.</p><p>If your finance person, you might be particularly interested in year quarter day, which uses a true fiscal year to represent your date. These are really nice because they&rsquo;re all convertible to each other. You can work with any particular calendar type and say you need to get the quarter out. You convert to year quarter day, you do manipulation over there, you convert back. It&rsquo;s obviously convertible with the date in POSIXct as well, since those are the date time types that you&rsquo;re most likely to start out with.</p><p>The other really neat thing that I find really fun about these calendar types is that they have what&rsquo;s known as variable precision. These are all day precision calendar types at this point, but we could narrow that down to month precision as needed. And you&rsquo;ve got a built-in year month type in clock. Similarly, you could have a built-in year quarter type. You can actually go the other way, too. You can widen it out all the way to nanoseconds if you need it.</p><p>The last thing I&rsquo;ll say is that clock is completely compatible with some of the other packages you might be familiar with that I&rsquo;ve created called slider and IVs. Slider is one for rolling averages, so you can use clock types as the index to say, give me a rolling average. looking back four or five quarters IVs is a relatively new package. You might not have heard of this one yet, but it deals with date ranges and you can use clock types as the components of those ranges.</p><p>So to sum up, lubridate is not going anywhere. Don&rsquo;t worry, but please try clock for enhanced safety in these powerful new types. Thank you.</p></details><h2 id=try-clock>Try clock
<a href=#try-clock><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>To try clock out, you can install the released version from
<a href=https://cran.r-project.org/ target=_blank rel=noopener>CRAN</a> with:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nf><a href=https://rdrr.io/r/utils/install.packages.html>install.packages</a></span><span class=o>(</span><span class=s>"clock"</span><span class=o>)</span></span></code></pre></div><p>Or, install the development version from its
<a href=https://github.com/r-lib/clock target=_blank rel=noopener>GitHub repo</a> with:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=c># install.packages("remotes")</span></span>
<span><span class=nf>remotes</span><span class=nf>::</span><span class=nf><a href=https://remotes.r-lib.org/reference/install_github.html>install_github</a></span><span class=o>(</span><span class=s>"r-lib/clock"</span><span class=o>)</span></span></code></pre></div><h2 id=learn-more>Learn more
<a href=#learn-more><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>You can learn more about clock by reading Davis&rsquo; blog post announcing its first release,
<a href=https://www.tidyverse.org/blog/2021/03/clock-0-1-0/ target=_blank rel=noopener>Comprehensive date-time handling for R</a>. Also be sure to check out its vignettes:</p><ul><li><p><a href=https://clock.r-lib.org/articles/clock.html target=_blank rel=noopener>Getting started</a></p></li><li><p><a href=https://clock.r-lib.org/articles/articles/motivations.html target=_blank rel=noopener>Motivations for clock</a></p></li><li><p><a href=https://clock.r-lib.org/articles/recipes.html target=_blank rel=noopener>Examples and recipes</a></p></li><li><p><a href=https://clock.r-lib.org/articles/faq.html target=_blank rel=noopener>Frequently asked questions</a></p></li></ul></div></div><div class=column25><div class="section hideOnMobile"><div class=sectionTitle>Contents</div><nav id=TableOfContents><ul><li><a href=#try-clock>Try clock</a></li><li><a href=#learn-more>Learn more</a></li></ul></nav></div><div class=section></div></div></div></div></div><div id=rStudioFooter class=band><div class=bandContent><div id=copyright>The tidyverse is proudly supported by <a class=rstudioLogo href=https://posit.co/ aria-label="Posit Homepage"></a></div><div id=logos><a href=https://www.tidyverse.org/google_privacy_policy>Privacy policy</a>
<a href=https://github.com/tidyverse class="footerLogo gitHub" aria-label="Tidyverse GitHub organization"></a><a href=https://twitter.com/hashtag/rstats class="footerLogo twitter" aria-label="rstats hashtag on twitter.com"></a></div></div></div></div></div><script type=application/javascript>var dnt=(navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack);var doNotTrack=(dnt=="1"||dnt=="yes");if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');if(window.sessionStorage){var GA_SESSION_STORAGE_KEY='ga:clientId';ga('create','UA-115082821-1',{'storage':'none','clientId':sessionStorage.getItem(GA_SESSION_STORAGE_KEY)});ga(function(tracker){sessionStorage.setItem(GA_SESSION_STORAGE_KEY,tracker.get('clientId'));});}
ga('set','anonymizeIp',true);ga('send','pageview');}</script></body></html></div></div></body></html>