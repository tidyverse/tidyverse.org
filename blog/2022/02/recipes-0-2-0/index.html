<!doctype html><html><head><!doctype html><html lang=en-us><link rel=stylesheet href=/css/fonts.css><link rel=stylesheet href=/css/main-site.css><link rel=stylesheet href=/css/fa5-all.css><style type=text/css>body{background-color:#fff;color:#1a1917}a{color:#38577f}a:hover{color:#42709b}a:focus{outline-color:#42709b}.column25-left .sectionTitle a:hover:not(.current),.column16-left .sectionTitle a:hover:not(.current){color:#1a1917}.icon-attribution,.icon-attribution a{color:#1a1917;opacity:75%}#homeContent .band.first{background-color:#fff}#homeContent .band.second{background-color:#fdeba4}#homeContent .band.third{background-color:#fff}#rStudioHeader{background-color:#1a162d;color:#fff}#rStudioHeader .productName{color:#fff}#rStudioHeader .productName:hover,#rStudioHeader .productName:focus{color:#fdeba4}#rStudioHeader #menu .menuItem.a{background-color:#75aadb;color:#fff}#rStudioHeader #menu .menuItem:hover{background-color:#484557;color:#fff}#rStudioHeader #menu .menuItem.current{background-color:#fff;color:#1a162d;text-decoration:none}#rStudioFooter.band{background-color:#767381}#rStudioFooter .bandContent #copyright{color:#e3eef8}table tbody tr:nth-child(even){background-color:#f7faff}table tbody tr:nth-child(odd){background-color:#fff}.latest{border-top:.5em solid <no value>}.event{-moz-box-shadow:0 0 0 0 rgba(0,0,0,.1);-webkit-box-shadow:0 0 0 0 rgba(0,0,0,.1);box-shadow:0 0 0 0 rgba(0,0,0,.1)}.section .event{background-color:#eab0c41a}.section .event{border-top:7pt solid #a19ea936}.section .event a{color:#1a162d}.section .event{color:#404040}</style><link rel=stylesheet href=/css/tidyverse.css><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Hugo 0.71.1"><title>recipes 0.2.0</title><meta property="og:title" content="recipes 0.2.0"><meta property="og:description" content="Recipes has added a few new steps along with many improvements."><meta property="og:type" content="article"><meta property="og:url" content="https://www.tidyverse.org/blog/2022/02/recipes-0-2-0/"><meta property="twitter:card" content="summary_large_image"><meta property="og:title" content="recipes 0.2.0 - Tidyverse"><meta property="description" content="Recipes has added a few new steps along with many improvements."><meta property="og:description" content="Recipes has added a few new steps along with many improvements."><meta property="og:image" content="https://www.tidyverse.org/blog/2022/02/recipes-0-2-0/thumbnail-sq.jpg"><meta name=twitter:image content="https://www.tidyverse.org/blog/2022/02/recipes-0-2-0/thumbnail-wd.jpg"><link rel=apple-touch-icon sizes=180x180 href=/images/favicons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/images/favicons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/images/favicons/favicon-16x16.png><link rel=manifest href=/images/favicons/site.webmanifest><link rel=mask-icon href=/images/favicons/safari-pinned-tab.svg><link rel="shortcut icon" href=/images/favicons/favicon.ico><meta name=msapplication-TileColor content="#da532c"><meta name=msapplication-config href=/images/favicons/browserconfig.xml><script type=text/javascript src=/js/jquery-3.5.1.min.js></script><script type=text/javascript src=/js/site.js></script><link rel=icon href=/images/favicon.ico><script type=text/javascript src=/js/clipboard.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin=anonymous></script><script defer data-domain=tidyverse.org,all.tidyverse.org src=https://plausible.io/js/plausible.js></script></head><body><div id=appTidyverseSite class="shrinkHeader alwaysShrinkHeader"><div id=main><div id=rStudioHeader><nav class=band><div class="innards bandContent"><div><a class=productName href=/%20/>Tidyverse</a></div><div id=menu><div id=menuToggler></div><div id=menuItems><a class=menuItem href=/packages/>Packages</a>
<a class="menuItem current" href=/blog/>Blog</a>
<a class=menuItem href=/learn/>Learn</a>
<a class=menuItem href=/help/>Help</a>
<a class=menuItem href=/contribute/>Contribute</a></div></div></div></nav></div><main><div class="band padForHeader pushFooter"><div class=bandContent><div class="full splitColumns withMobileMargins"><div class=column75><h1 class=article-title>recipes 0.2.0</h1><div class=article-header aria-hidden=true><div class=photo><img src=/blog/2022/02/recipes-0-2-0/thumbnail-wd.jpg></div><div class=photoCredit>Photo by <a href=https://unsplash.com/photos/xZa4JUE7EdM>Jonny Clow</a></div></div><span class=article-date><i class="fas fa-calendar-day fa-fw"></i>&nbsp;&nbsp;2022/02/22</span><p style=margin-bottom:.5em;margin-top:.85em><i class="fas fa-tags"></i>&nbsp;
<a href=/tags/recipes/>recipes</a>,
<a href=/tags/tidymodels/>tidymodels</a></p><p style=margin-top:.5em><i class="fas fa-user-circle fa-fw"></i>&nbsp;
Max Kuhn</p><div class=article-content><p>We&rsquo;re very excited to announce the release of
<a href=https://recipes.tidymodels.org/ target=_blank rel=noopener>recipes</a> 0.2.0. recipes is a package for preprocessing data before using it in models or visualizations. You can think of it as a mash-up of <code>model.matrix()</code> and dplyr.</p><p>You can install it from CRAN with:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nf>install.packages</span><span class=p>(</span><span class=s>&#34;recipes&#34;</span><span class=p>)</span>
</code></pre></div><p>This blog post will describe the highlights of what&rsquo;s new. You can see a full list of changes in the
<a href=https://github.com/tidymodels/recipes/blob/main/NEWS.md target=_blank rel=noopener>release notes</a>.</p><h2 id=new-steps>New Steps
<a href=#new-steps><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p><code>step_nnmf_sparse()</code> was added to produce features using non-negative matrix factorization (via the
<a href=https://github.com/zdebruine/RcppML target=_blank rel=noopener>RcppML</a> package). This will supersede the existing <code>step_nnmf()</code> since that step was difficult to support and use. The new step allows for a sparse representation via regularization and, from our initial testing, is <strong>much faster</strong> than the original NNMF step.</p><p>The new step <code>step_dummy_extract()</code> helps create indicator variables from text data, especially those with multiple choice values. For example, if a row of a variable had a value of <code>"red,black,brown"</code>, the step can separate these values and make all of the required binary dummy variables.</p><p>Here&rsquo;s a real example from
<a href=https://www.kaggle.com/c/sliced-s01e08-KJSEks target=_blank rel=noopener>Episode 8 of <em>Sliced</em></a> where a column of data from Spotify had the artist(s) of a song:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nf>library</span><span class=p>(</span><span class=n>recipes</span><span class=p>)</span>
<span class=n>spotify</span> <span class=o>&lt;-</span> 
  <span class=n>tibble</span><span class=o>::</span><span class=nf>tribble</span><span class=p>(</span>
    <span class=o>~</span> <span class=n>artists</span><span class=p>,</span>
    <span class=s>&#34;[&#39;Genesis&#39;]&#34;</span><span class=p>,</span>
    <span class=s>&#34;[&#39;Billie Holiday&#39;, &#39;Teddy Wilson&#39;]&#34;</span><span class=p>,</span>
    <span class=s>&#34;[&#39;Jimmy Barnes&#39;, &#39;INXS&#39;]&#34;</span>
  <span class=p>)</span>
<span class=nf>recipe</span><span class=p>(</span><span class=o>~</span> <span class=n>artists</span><span class=p>,</span> <span class=n>data</span> <span class=o>=</span> <span class=n>spotify</span><span class=p>)</span> <span class=o>%&gt;%</span> 
  <span class=nf>step_dummy_extract</span><span class=p>(</span><span class=n>artists</span><span class=p>,</span> <span class=n>pattern</span> <span class=o>=</span> <span class=s>&#34;(?&lt;=&#39;)[^&#39;,]+(?=&#39;)&#34;</span><span class=p>)</span> <span class=o>%&gt;%</span> 
  <span class=nf>prep</span><span class=p>()</span> <span class=o>%&gt;%</span> 
  <span class=nf>bake</span><span class=p>(</span><span class=n>new_data</span> <span class=o>=</span> <span class=kc>NULL</span><span class=p>)</span> <span class=o>%&gt;%</span> 
  <span class=nf>glimpse</span><span class=p>()</span>
</code></pre></div><pre><code>## Rows: 3
## Columns: 6
## $ artists_Billie.Holiday &lt;dbl&gt; 0, 1, 0
## $ artists_Genesis        &lt;dbl&gt; 1, 0, 0
## $ artists_INXS           &lt;dbl&gt; 0, 0, 1
## $ artists_Jimmy.Barnes   &lt;dbl&gt; 0, 0, 1
## $ artists_Teddy.Wilson   &lt;dbl&gt; 0, 1, 0
## $ artists_other          &lt;dbl&gt; 0, 0, 0
</code></pre><p>Note that this step produces an &ldquo;other&rdquo; column and has arguments similar to <code>step_other()</code> and <code>step_dummy_multi_choice()</code>.</p><p><code>step_percentile()</code> is a new step function after it had previously only been an example in the developer documentation. It can determine the empirical distribution of a variable using the training set, then convert any value to the percentile of this distribution.</p><p>Finally, a new filtering function (<code>step_filter_missing()</code>) can filter out columns that have too many missing values (for some definition of &ldquo;too many&rdquo;).</p><h2 id=other-notable-new-features>Other notable new features
<a href=#other-notable-new-features><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p><code>step_zv()</code> now has a <code>group</code> argument. This can be helpful for models such as naive Bayes or quadratic discriminant analysis where the predictors must have at least two unique values <em>within each class</em>.</p><p>All recipe steps now officially support empty selections to be more aligned with dplyr and other packages that use tidyselect. For example, if a previous step removed all of the columns needed for a later step, the recipe does not fail when it is estimated (with the exception of <code>step_mutate()</code>). The documentation in <code>?selections</code> has been updated with advice for writing selectors when filtering steps are used.</p><p>There are new <code>extract_parameter_set_dials()</code> and <code>extract_parameter_dials()</code> methods to extract parameter sets and single parameters from a recipe. Since this is related to tuning parameters, the tune package should be loaded before they are used.</p><h2 id=breaking-changes>Breaking changes
<a href=#breaking-changes><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>Changes in <code>step_ica()</code> and <code>step_kpca*()</code> will now cause recipe objects from previous versions to error when applied to new data. You will need to update these recipes with the current version to be able to use them.</p><h2 id=acknowledgements>Acknowledgements
<a href=#acknowledgements><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>We&rsquo;d like to thank everyone that has contributed since the last release:
<a href=https://github.com/agwalker82 target=_blank rel=noopener>@agwalker82</a>,
<a href=https://github.com/albert-ying target=_blank rel=noopener>@albert-ying</a>,
<a href=https://github.com/AshesITR target=_blank rel=noopener>@AshesITR</a>,
<a href=https://github.com/ddsjoberg target=_blank rel=noopener>@ddsjoberg</a>,
<a href=https://github.com/DoktorMike target=_blank rel=noopener>@DoktorMike</a>,
<a href=https://github.com/EmilHvitfeldt target=_blank rel=noopener>@EmilHvitfeldt</a>,
<a href=https://github.com/emmansh target=_blank rel=noopener>@emmansh</a>,
<a href=https://github.com/hermandr target=_blank rel=noopener>@hermandr</a>,
<a href=https://github.com/hfrick target=_blank rel=noopener>@hfrick</a>,
<a href=https://github.com/jacekkotowski target=_blank rel=noopener>@jacekkotowski</a>,
<a href=https://github.com/JensPMB target=_blank rel=noopener>@JensPMB</a>,
<a href=https://github.com/jkennel target=_blank rel=noopener>@jkennel</a>,
<a href=https://github.com/juliasilge target=_blank rel=noopener>@juliasilge</a>,
<a href=https://github.com/lg1000 target=_blank rel=noopener>@lg1000</a>,
<a href=https://github.com/lionel- target=_blank rel=noopener>@lionel-</a>,
<a href=https://github.com/markjrieke target=_blank rel=noopener>@markjrieke</a>,
<a href=https://github.com/mattwarkentin target=_blank rel=noopener>@mattwarkentin</a>,
<a href=https://github.com/MichaelChirico target=_blank rel=noopener>@MichaelChirico</a>,
<a href=https://github.com/ninohardt target=_blank rel=noopener>@ninohardt</a>,
<a href=https://github.com/SewerynGrodny target=_blank rel=noopener>@SewerynGrodny</a>,
<a href=https://github.com/SimonCoulombe target=_blank rel=noopener>@SimonCoulombe</a>,
<a href=https://github.com/spsanderson target=_blank rel=noopener>@spsanderson</a>,
<a href=https://github.com/tedmoorman target=_blank rel=noopener>@tedmoorman</a>,
<a href=https://github.com/topepo target=_blank rel=noopener>@topepo</a>,
<a href=https://github.com/tsengj target=_blank rel=noopener>@tsengj</a>,
<a href=https://github.com/walrossker target=_blank rel=noopener>@walrossker</a>,
<a href=https://github.com/williamshell target=_blank rel=noopener>@williamshell</a>, and
<a href=https://github.com/xiaoxi-david target=_blank rel=noopener>@xiaoxi-david</a>.</p></div></div><div class=column25><div class="section hideOnMobile"><div class=sectionTitle>Contents</div><nav id=TableOfContents><ul><li><a href=#new-steps>New Steps</a></li><li><a href=#other-notable-new-features>Other notable new features</a></li><li><a href=#breaking-changes>Breaking changes</a></li><li><a href=#acknowledgements>Acknowledgements</a></li></ul></nav></div><div class=section></div></div></div></div></div><div id=rStudioFooter class=band><div class=bandContent><div id=copyright>The tidyverse is proudly supported by <a class=rstudioLogo href=https://posit.co/ aria-label="Posit Homepage"></a></div><div id=logos><a href=https://www.tidyverse.org/google_privacy_policy>Privacy policy</a>
<a href=https://github.com/tidyverse class="footerLogo gitHub" aria-label="Tidyverse GitHub organization"></a><a href=https://twitter.com/hashtag/rstats class="footerLogo twitter" aria-label="rstats hashtag on twitter.com"></a></div></div></div></div></div><script src=/js/math-code.js></script><script type=text/x-mathjax-config>
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    processEscapes: true
  }
});
</script><script async src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script type=application/javascript>var dnt=(navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack);var doNotTrack=(dnt=="1"||dnt=="yes");if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');if(window.sessionStorage){var GA_SESSION_STORAGE_KEY='ga:clientId';ga('create','UA-115082821-1',{'storage':'none','clientId':sessionStorage.getItem(GA_SESSION_STORAGE_KEY)});ga(function(tracker){sessionStorage.setItem(GA_SESSION_STORAGE_KEY,tracker.get('clientId'));});}
ga('set','anonymizeIp',true);ga('send','pageview');}</script></body></html></div></div></body></html>