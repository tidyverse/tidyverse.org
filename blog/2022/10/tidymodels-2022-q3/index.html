<!doctype html><html><head><!doctype html><html lang=en-us><link rel=stylesheet href=/css/fonts.css><link rel=stylesheet href=/css/main-site.css><link rel=stylesheet href=/css/fa5-all.css><style type=text/css>body{background-color:#fff;color:#1a1917}a{color:#38577f}a:hover{color:#42709b}a:focus{outline-color:#42709b}.column25-left .sectionTitle a:hover:not(.current),.column16-left .sectionTitle a:hover:not(.current){color:#1a1917}.icon-attribution,.icon-attribution a{color:#1a1917;opacity:75%}#homeContent .band.first{background-color:#fff}#homeContent .band.second{background-color:#fdeba4}#homeContent .band.third{background-color:#fff}#rStudioHeader{background-color:#1a162d;color:#fff}#rStudioHeader .productName{color:#fff}#rStudioHeader .productName:hover,#rStudioHeader .productName:focus{color:#fdeba4}#rStudioHeader #menu .menuItem.a{background-color:#75aadb;color:#fff}#rStudioHeader #menu .menuItem:hover{background-color:#484557;color:#fff}#rStudioHeader #menu .menuItem.current{background-color:#fff;color:#1a162d;text-decoration:none}#rStudioFooter.band{background-color:#767381}#rStudioFooter .bandContent #copyright{color:#e3eef8}table tbody tr:nth-child(even){background-color:#f7faff}table tbody tr:nth-child(odd){background-color:#fff}.latest{border-top:.5em solid <no value>}.event{-moz-box-shadow:0 0 0 0 rgba(0,0,0,.1);-webkit-box-shadow:0 0 0 0 rgba(0,0,0,.1);box-shadow:0 0 0 0 rgba(0,0,0,.1)}.section .event{background-color:#eab0c41a}.section .event{border-top:7pt solid #a19ea936}.section .event a{color:#1a162d}.section .event{color:#404040}</style><link rel=stylesheet href=/css/tidyverse.css><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Hugo 0.71.1"><title>Q3 2022 tidymodels digest</title><meta property="og:title" content="Q3 2022 tidymodels digest"><meta property="og:description" content="Our post-RStudio conference productivity has been high! This post talks about tidymodels updates from the last few months."><meta property="og:type" content="article"><meta property="og:url" content="https://www.tidyverse.org/blog/2022/10/tidymodels-2022-q3/"><meta property="twitter:card" content="summary_large_image"><meta property="og:title" content="Q3 2022 tidymodels digest - Tidyverse"><meta property="description" content="Our post-RStudio conference productivity has been high! This post talks about tidymodels updates from the last few months."><meta property="og:description" content="Our post-RStudio conference productivity has been high! This post talks about tidymodels updates from the last few months."><meta property="og:image" content="https://www.tidyverse.org/blog/2022/10/tidymodels-2022-q3/thumbnail-sq.jpg"><meta name=twitter:image content="https://www.tidyverse.org/blog/2022/10/tidymodels-2022-q3/thumbnail-wd.jpg"><link rel=apple-touch-icon sizes=180x180 href=/images/favicons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/images/favicons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/images/favicons/favicon-16x16.png><link rel=manifest href=/images/favicons/site.webmanifest><link rel=mask-icon href=/images/favicons/safari-pinned-tab.svg><link rel="shortcut icon" href=/images/favicons/favicon.ico><meta name=msapplication-TileColor content="#da532c"><meta name=msapplication-config href=/images/favicons/browserconfig.xml><script type=text/javascript src=/js/jquery-3.5.1.min.js></script><script type=text/javascript src=/js/site.js></script><link rel=icon href=/images/favicon.ico><script type=text/javascript src=/js/clipboard.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin=anonymous></script><script defer data-domain=tidyverse.org,all.tidyverse.org src=https://plausible.io/js/plausible.js></script></head><body><div id=appTidyverseSite class="shrinkHeader alwaysShrinkHeader"><div id=main><div id=rStudioHeader><nav class=band><div class="innards bandContent"><div><a class=productName href=/%20/>Tidyverse</a></div><div id=menu><div id=menuToggler></div><div id=menuItems><a class=menuItem href=/packages/>Packages</a>
<a class="menuItem current" href=/blog/>Blog</a>
<a class=menuItem href=/learn/>Learn</a>
<a class=menuItem href=/help/>Help</a>
<a class=menuItem href=/contribute/>Contribute</a></div></div></div></nav></div><main><div class="band padForHeader pushFooter"><div class=bandContent><div class="full splitColumns withMobileMargins"><div class=column75><h1 class=article-title>Q3 2022 tidymodels digest</h1><div class=article-header aria-hidden=true><div class=photo><img src=/blog/2022/10/tidymodels-2022-q3/thumbnail-wd.jpg></div><div class=photoCredit>Photo by <a href=https://unsplash.com/photos/PyDaL4PcLoQ>Simon Spieske</a></div></div><span class=article-date><i class="fas fa-calendar-day fa-fw"></i>&nbsp;&nbsp;2022/10/19</span><p style=margin-bottom:.5em;margin-top:.85em><i class="fas fa-tags"></i>&nbsp;
<a href=/tags/tidymodels/>tidymodels</a>,
<a href=/tags/recipes/>recipes</a>,
<a href=/tags/agua/>agua</a>,
<a href=/tags/h2o/>h2o</a></p><p style=margin-top:.5em><i class="fas fa-user-circle fa-fw"></i>&nbsp;
Max Kuhn</p><div class=article-content><p>The
<a href=https://www.tidymodels.org/ target=_blank rel=noopener>tidymodels</a> framework is a collection of R packages for modeling and machine learning using tidyverse principles.</p><p>Since the beginning of 2021, we have been publishing
<a href=https://www.tidyverse.org/categories/roundup/ target=_blank rel=noopener>quarterly updates</a> here on the tidyverse blog summarizing what&rsquo;s new in the tidymodels ecosystem. The purpose of these regular posts is to share useful new features and any updates you may have missed. You can check out the
<a href=https://www.tidyverse.org/tags/tidymodels/ target=_blank rel=noopener><code>tidymodels</code> tag</a> to find all tidymodels blog posts here, including our roundup posts as well as those that are more focused, like these from the past month or so:</p><ul><li><a href=https://www.tidyverse.org/blog/2022/10/parsnip-checking-1-0-2/ target=_blank rel=noopener>Improvements to model specification checking in tidymodels</a></li><li><a href=https://www.tidyverse.org/blog/2022/09/brulee-0-2-0/ target=_blank rel=noopener>brulee 0.2.0</a></li><li><a href=https://www.tidyverse.org/blog/2022/09/bundle-0-1-0/ target=_blank rel=noopener>Announcing bundle</a></li><li><a href=https://www.tidyverse.org/blog/2022/08/censored-0-1-0/ target=_blank rel=noopener>censored 0.1.0</a></li><li><a href=https://www.tidyverse.org/blog/2022/08/rsample-1-1-0/ target=_blank rel=noopener>rsample 1.1.0</a></li></ul><p>Since
<a href=https://www.tidyverse.org/blog/2022/07/tidymodels-2022-q2/ target=_blank rel=noopener>our last roundup post</a>, there have been CRAN releases of 22 tidymodels packages. Here are links to their NEWS files:</p><div class=highlight><ul><li>agua
<a href=https://agua.tidymodels.org/news/index.html target=_blank rel=noopener>(0.1.0)</a></li><li>applicable
<a href=https://github.com/tidymodels/applicable/blob/develop/NEWS.md target=_blank rel=noopener>(0.1.0)</a></li><li>bonsai
<a href=https://bonsai.tidymodels.org/news/index.html target=_blank rel=noopener>(0.2.0)</a></li><li>broom
<a href=https://broom.tidymodels.org/news/index.html target=_blank rel=noopener>(1.0.1)</a></li><li>brulee
<a href=https://brulee.tidymodels.org/news/index.html target=_blank rel=noopener>(0.2.0)</a></li><li>butcher
<a href=https://butcher.tidymodels.org/news/index.html target=_blank rel=noopener>(0.3.0)</a></li><li>censored
<a href=https://censored.tidymodels.org/news/index.html target=_blank rel=noopener>(0.1.1)</a></li><li>corrr
<a href=https://corrr.tidymodels.org/news/index.html target=_blank rel=noopener>(0.4.4)</a></li><li>finetune
<a href=https://finetune.tidymodels.org/news/index.html target=_blank rel=noopener>(1.0.1)</a></li><li>modeldata
<a href=https://modeldata.tidymodels.org/news/index.html target=_blank rel=noopener>(1.0.1)</a></li><li>modeldb
<a href=https://modeldb.tidymodels.org/news/index.html target=_blank rel=noopener>(0.2.3)</a></li><li>parsnip
<a href=https://parsnip.tidymodels.org/news/index.html target=_blank rel=noopener>(1.0.2)</a></li><li>plsmod
<a href=https://plsmod.tidymodels.org/news/index.html target=_blank rel=noopener>(1.0.0)</a></li><li>poissonreg
<a href=https://poissonreg.tidymodels.org/news/index.html target=_blank rel=noopener>(1.0.1)</a></li><li>probably
<a href=https://probably.tidymodels.org/news/index.html target=_blank rel=noopener>(0.1.0)</a></li><li>recipes
<a href=https://recipes.tidymodels.org/news/index.html target=_blank rel=noopener>(1.0.2)</a></li><li>rsample
<a href=https://rsample.tidymodels.org/news/index.html target=_blank rel=noopener>(1.1.0)</a></li><li>spatialsample
<a href=https://spatialsample.tidymodels.org/news/index.html target=_blank rel=noopener>(0.2.1)</a></li><li>textrecipes
<a href=https://textrecipes.tidymodels.org/news/index.html target=_blank rel=noopener>(1.0.1)</a></li><li>tune
<a href=https://tune.tidymodels.org/news/index.html target=_blank rel=noopener>(1.0.1)</a></li><li>workflows
<a href=https://workflows.tidymodels.org/news/index.html target=_blank rel=noopener>(1.1.0)</a></li><li>yardstick
<a href=https://yardstick.tidymodels.org/news/index.html target=_blank rel=noopener>(1.1.0)</a></li></ul></div><p>We&rsquo;ll highlight two specific upgrades: one for agua and another for recipes.</p><h2 id=a-big-upgrade-for-agua>A big upgrade for agua
<a href=#a-big-upgrade-for-agua><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>With version 3.38.0.1 of the
<a href="https://cran.r-project.org/package=h2o" target=_blank rel=noopener>h2o</a> package, agua can now tune h2o models as if they were any other type of model engine.</p><p><a href=https://h2o.ai target=_blank rel=noopener>h2o</a> has an excellent server-based computational engine for fitting a variety of different machine learning and statistical models. The h2o server can run locally or on some external high performance computing server. The downside is that it is light on tools for feature engineering and interactive data analysis.</p><p>Using h2o with tidymodels enables users to leverage the benefits of packages like recipes along with fast, server-based parallel processing.</p><p>While the syntax for model fitting and tuning are the same as any other non-h2o model, there are different ways to parallelize the work:</p><ul><li><p>The h2o server has the ability to internally parallelize individual model computations. For example, when fitting trees, the search for the best split can be done using multiple threads. The number of threads that each model should be used is set with
<a href=https://docs.h2o.ai/h2o/latest-stable/h2o-r/docs/reference/h2o.init.html target=_blank rel=noopener>h2o.init(nthreads)</a>. The default (<code>-1</code>) is to use all CPUs on the host.</p></li><li><p>When using grid search,
<a href=https://docs.h2o.ai/h2o/latest-stable/h2o-r/docs/reference/h2o.grid.html target=_blank rel=noopener>h2o.grid(parallelism)</a> determines how many models the h2o server should process at the same time. The default (<code>1</code>) constrains the server to run the models sequentially.</p></li><li><p>R has external parallelization tools (such as the foreach and future packages) that can start new R processes to simultaneously do work. This would run many models in parallel. For h2o, this determines how many models the agua package could send to the server at once. This does not appear to be constrained by the <code>parallelism</code> argument to <code>h2o.grid()</code>.</p></li></ul><p>With h2o and tidymodels, you should probably <strong>use h2o&rsquo;s parallelization</strong>. Using multiple approaches <em>can</em> work but only for some technologies. It&rsquo;s still
<a href=https://github.com/topepo/agua-h2o-benchmark target=_blank rel=noopener>pretty complicated</a> but we are working on un-complicating it.</p><p>To set up h2o parallelization, there is a new control argument called <code>backend_options</code>. If you were doing a grid search, you first define how many threads the h2o server should use:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nf>library</span><span class=p>(</span><span class=n>tidymodels</span><span class=p>)</span>
<span class=nf>library</span><span class=p>(</span><span class=n>agua</span><span class=p>)</span>
<span class=nf>library</span><span class=p>(</span><span class=n>finetune</span><span class=p>)</span>

<span class=n>h2o_thread_spec</span> <span class=o>&lt;-</span> <span class=nf>agua_backend_options</span><span class=p>(</span><span class=n>parallelism</span> <span class=o>=</span> <span class=m>10</span><span class=p>)</span> 
</code></pre></div><p>Then, pass the output to any of the existing control functions:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=n>grid_ctrl</span> <span class=o>&lt;-</span> <span class=nf>control_grid</span><span class=p>(</span><span class=n>backend_options</span> <span class=o>=</span> <span class=n>h2o_thread_spec</span><span class=p>)</span>
</code></pre></div><p>Now h2o can parallel process 10 models at once.</p><p>Here is an example using a simulated data set with a numeric outcome:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=kr><a href=https://rdrr.io/r/base/library.html>library</a></span><span class=o>(</span><span class=nv><a href=https://tidymodels.tidymodels.org>tidymodels</a></span><span class=o>)</span>
<span class=kr><a href=https://rdrr.io/r/base/library.html>library</a></span><span class=o>(</span><span class=nv><a href=https://agua.tidymodels.org/>agua</a></span><span class=o>)</span>
<span class=kr><a href=https://rdrr.io/r/base/library.html>library</a></span><span class=o>(</span><span class=nv><a href=https://github.com/tidymodels/finetune>finetune</a></span><span class=o>)</span>

<span class=c># Simulate the data</span>
<span class=nv>n_train</span> <span class=o>&lt;-</span> <span class=m>200</span>
<span class=nf><a href=https://rdrr.io/r/base/Random.html>set.seed</a></span><span class=o>(</span><span class=m>6147</span><span class=o>)</span>
<span class=nv>sim_dat</span> <span class=o>&lt;-</span> <span class=nf>sim_regression</span><span class=o>(</span><span class=nv>n_train</span><span class=o>)</span>

<span class=c># Resample using 10-fold cross-validation</span>
<span class=nf><a href=https://rdrr.io/r/base/Random.html>set.seed</a></span><span class=o>(</span><span class=m>91</span><span class=o>)</span>
<span class=nv>sim_rs</span> <span class=o>&lt;-</span> <span class=nf>vfold_cv</span><span class=o>(</span><span class=nv>sim_dat</span><span class=o>)</span>
</code></pre></div><p>We&rsquo;ll use grid search to tune a boosted tree:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nv>boost_spec</span> <span class=o>&lt;-</span>
  <span class=nf><a href=https://parsnip.tidymodels.org/reference/boost_tree.html>boost_tree</a></span><span class=o>(</span>
    trees <span class=o>=</span> <span class=nf><a href=https://hardhat.tidymodels.org/reference/tune.html>tune</a></span><span class=o>(</span><span class=o>)</span>,
    min_n <span class=o>=</span> <span class=nf><a href=https://hardhat.tidymodels.org/reference/tune.html>tune</a></span><span class=o>(</span><span class=o>)</span>,
    tree_depth <span class=o>=</span> <span class=nf><a href=https://hardhat.tidymodels.org/reference/tune.html>tune</a></span><span class=o>(</span><span class=o>)</span>,
    learn_rate <span class=o>=</span> <span class=nf><a href=https://hardhat.tidymodels.org/reference/tune.html>tune</a></span><span class=o>(</span><span class=o>)</span>,
    loss_reduction <span class=o>=</span> <span class=nf><a href=https://hardhat.tidymodels.org/reference/tune.html>tune</a></span><span class=o>(</span><span class=o>)</span>
  <span class=o>)</span> <span class=o><a href=https://magrittr.tidyverse.org/reference/pipe.html>%&gt;%</a></span>
  <span class=nf><a href=https://parsnip.tidymodels.org/reference/set_engine.html>set_engine</a></span><span class=o>(</span><span class=s>"h2o"</span><span class=o>)</span> <span class=o><a href=https://magrittr.tidyverse.org/reference/pipe.html>%&gt;%</a></span>
  <span class=nf><a href=https://parsnip.tidymodels.org/reference/set_args.html>set_mode</a></span><span class=o>(</span><span class=s>"regression"</span><span class=o>)</span>
</code></pre></div><p>Now, let&rsquo;s parallel process our computations.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=c># Start the h2o server</span>
<span class=nf>h2o</span><span class=nf>::</span><span class=nf><a href=https://rdrr.io/pkg/h2o/man/h2o.init.html>h2o.init</a></span><span class=o>(</span><span class=o>)</span>

<span class=c># Multi-thread the model fits</span>
<span class=nv>h2o_thread_spec</span> <span class=o>&lt;-</span> <span class=nf><a href=https://agua.tidymodels.org/reference/h2o_tune.html>agua_backend_options</a></span><span class=o>(</span>parallelism <span class=o>=</span> <span class=m>10</span><span class=o>)</span>
<span class=nv>grid_ctrl</span> <span class=o>&lt;-</span> <span class=nf><a href=https://tune.tidymodels.org/reference/control_grid.html>control_grid</a></span><span class=o>(</span>backend_options <span class=o>=</span> <span class=nv>h2o_thread_spec</span><span class=o>)</span>
</code></pre></div><p>We&rsquo;ll evaluate a very small grid at first:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nf><a href=https://rdrr.io/r/base/Random.html>set.seed</a></span><span class=o>(</span><span class=m>7616</span><span class=o>)</span>
<span class=nv>grid_res</span> <span class=o>&lt;-</span>
  <span class=nv>boost_spec</span> <span class=o><a href=https://magrittr.tidyverse.org/reference/pipe.html>%&gt;%</a></span>
  <span class=nf><a href=https://tune.tidymodels.org/reference/tune_grid.html>tune_grid</a></span><span class=o>(</span><span class=nv>outcome</span> <span class=o>~</span> <span class=nv>.</span>, resamples <span class=o>=</span> <span class=nv>sim_rs</span>, grid <span class=o>=</span> <span class=m>10</span>, control <span class=o>=</span> <span class=nv>grid_ctrl</span><span class=o>)</span>
</code></pre></div><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nf><a href=https://tune.tidymodels.org/reference/show_best.html>show_best</a></span><span class=o>(</span><span class=nv>grid_res</span>, metric <span class=o>=</span> <span class=s>"rmse"</span><span class=o>)</span> <span class=o><a href=https://magrittr.tidyverse.org/reference/pipe.html>%&gt;%</a></span> <span class=nf>select</span><span class=o>(</span><span class=o>-</span><span class=nv>.config</span>, <span class=o>-</span><span class=nv>.metric</span>, <span class=o>-</span><span class=nv>.estimator</span><span class=o>)</span>

<span class=c>#&gt; <span style=color:#555># A tibble: 5 × 8</span></span>
<span class=c>#&gt;   trees min_n tree_depth    learn_rate loss_reduction  mean     n std_err</span>
<span class=c>#&gt;   <span style=color:#555;font-style:italic>&lt;int&gt;</span> <span style=color:#555;font-style:italic>&lt;int&gt;</span>      <span style=color:#555;font-style:italic>&lt;int&gt;</span>         <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>          <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;int&gt;</span>   <span style=color:#555;font-style:italic>&lt;dbl&gt;</span></span>
<span class=c>#&gt; <span style=color:#555>1</span>  <span style=text-decoration:underline>1</span>954    17         13 0.031<span style=text-decoration:underline>8</span>               6.08<span style=color:#555>e</span><span style=color:#b00>-8</span>  13.1    10   0.828</span>
<span class=c>#&gt; <span style=color:#555>2</span>   184    25          4 0.000<span style=text-decoration:underline>000</span>001<span style=text-decoration:underline>64</span>        6.56<span style=color:#555>e</span><span style=color:#b00>-1</span>  15.7    10   1.03 </span>
<span class=c>#&gt; <span style=color:#555>3</span>  <span style=text-decoration:underline>1</span>068    10          8 0.000<span style=text-decoration:underline>040</span>9            1.19<span style=color:#555>e</span>+1  17.4    10   1.08 </span>
<span class=c>#&gt; <span style=color:#555>4</span>  <span style=text-decoration:underline>1</span>500    37         10 0.000<span style=text-decoration:underline>010</span>8            9.97<span style=color:#555>e</span><span style=color:#b00>-9</span>  18.3    10   1.03 </span>
<span class=c>#&gt; <span style=color:#555>5</span>   985    18          7 0.000<span style=text-decoration:underline>000</span>045<span style=text-decoration:underline>4</span>         1.84<span style=color:#555>e</span><span style=color:#b00>-3</span>  18.4    10   1.04</span>

<span class=nf><a href=https://ggplot2.tidyverse.org/reference/autoplot.html>autoplot</a></span><span class=o>(</span><span class=nv>grid_res</span>, metric <span class=o>=</span> <span class=s>"rmse"</span><span class=o>)</span>

</code></pre><p><img src=figs/grid-plot-1.svg width=90% style=display:block;margin:auto></p></div><p>It was a small grid and most of the configurations were not especially good. We can further optimize the results by applying simulated annealing search to the best grid results.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nv>sa_ctrl</span> <span class=o>&lt;-</span> <span class=nf><a href=https://finetune.tidymodels.org/reference/control_sim_anneal.html>control_sim_anneal</a></span><span class=o>(</span>backend_options <span class=o>=</span> <span class=nv>h2o_thread_spec</span><span class=o>)</span>

<span class=nf><a href=https://rdrr.io/r/base/Random.html>set.seed</a></span><span class=o>(</span><span class=m>4</span><span class=o>)</span>
<span class=nv>sa_res</span> <span class=o>&lt;-</span>
  <span class=nv>boost_spec</span> <span class=o><a href=https://magrittr.tidyverse.org/reference/pipe.html>%&gt;%</a></span>
  <span class=nf><a href=https://finetune.tidymodels.org/reference/tune_sim_anneal.html>tune_sim_anneal</a></span><span class=o>(</span>
    <span class=nv>outcome</span> <span class=o>~</span> <span class=nv>.</span>,
    resamples <span class=o>=</span> <span class=nv>sim_rs</span>,
    initial <span class=o>=</span> <span class=nv>grid_res</span>,
    iter <span class=o>=</span> <span class=m>25</span>,
    control <span class=o>=</span> <span class=nv>sa_ctrl</span>
  <span class=o>)</span>

<span class=c>#&gt; <span style=color:#000>Optimizing rmse</span></span>
<span class=c>#&gt; <span style=color:#000>Initial best: 13.06400</span></span>
<span class=c>#&gt; <span style=color:#000> 1 </span><span style=color:#0b0>♥ new best          </span><span style=color:#000> rmse=12.688  (+/-0.7899)</span></span>
<span class=c>#&gt; <span style=color:#000> 2 </span><span style=color:#bb0>◯ accept suboptimal </span><span style=color:#000> rmse=12.849  (+/-0.8304)</span></span>
<span class=c>#&gt; <span style=color:#000> 3 </span><span style=color:#bb0>◯ accept suboptimal </span><span style=color:#000> rmse=13.129  (+/-0.8266)</span></span>
<span class=c>#&gt; <span style=color:#000> 4 </span><span style=color:#bb0>◯ accept suboptimal </span><span style=color:#000> rmse=13.678  (+/-0.9544)</span></span>
<span class=c>#&gt; <span style=color:#000> 5 </span><span style=color:#0b0>+ better suboptimal </span><span style=color:#000> rmse=13.433  (+/-0.792)</span></span>
<span class=c>#&gt; <span style=color:#000> 6 </span><span style=color:#0b0>+ better suboptimal </span><span style=color:#000> rmse=12.99  (+/-0.9031)</span></span>
<span class=c>#&gt; <span style=color:#000> 7 </span><span style=color:#b00>─ discard suboptimal</span><span style=color:#000> rmse=16.531  (+/-1.027)</span></span>
<span class=c>#&gt; <span style=color:#000> 8 </span><span style=color:#b00>─ discard suboptimal</span><span style=color:#000> rmse=13.522  (+/-0.9802)</span></span>
<span class=c>#&gt; <span style=color:#000> 9 </span><span style=color:#b00>✖ restart from best </span><span style=color:#000> rmse=13.097  (+/-0.8109)</span></span>
<span class=c>#&gt; <span style=color:#000>10 </span><span style=color:#0b0>♥ new best          </span><span style=color:#000> rmse=12.66  (+/-0.8028)</span></span>
<span class=c>#&gt; <span style=color:#000>11 </span><span style=color:#bb0>◯ accept suboptimal </span><span style=color:#000> rmse=13.116  (+/-0.8135)</span></span>
<span class=c>#&gt; <span style=color:#000>12 </span><span style=color:#0b0>+ better suboptimal </span><span style=color:#000> rmse=12.714  (+/-0.7747)</span></span>
<span class=c>#&gt; <span style=color:#000>13 </span><span style=color:#b00>─ discard suboptimal</span><span style=color:#000> rmse=13.074  (+/-0.6598)</span></span>
<span class=c>#&gt; <span style=color:#000>14 </span><span style=color:#b00>─ discard suboptimal</span><span style=color:#000> rmse=14.489  (+/-1.028)</span></span>
<span class=c>#&gt; <span style=color:#000>15 </span><span style=color:#bb0>◯ accept suboptimal </span><span style=color:#000> rmse=12.715  (+/-0.8043)</span></span>
<span class=c>#&gt; <span style=color:#000>16 </span><span style=color:#b00>─ discard suboptimal</span><span style=color:#000> rmse=13.788  (+/-1.027)</span></span>
<span class=c>#&gt; <span style=color:#000>17 </span><span style=color:#b00>─ discard suboptimal</span><span style=color:#000> rmse=13.057  (+/-0.7716)</span></span>
<span class=c>#&gt; <span style=color:#000>18 </span><span style=color:#b00>✖ restart from best </span><span style=color:#000> rmse=13.064  (+/-0.7095)</span></span>
<span class=c>#&gt; <span style=color:#000>19 </span><span style=color:#0b0>♥ new best          </span><span style=color:#000> rmse=12.645  (+/-0.7706)</span></span>
<span class=c>#&gt; <span style=color:#000>20 </span><span style=color:#bb0>◯ accept suboptimal </span><span style=color:#000> rmse=12.7  (+/-0.821)</span></span>
<span class=c>#&gt; <span style=color:#000>21 </span><span style=color:#b00>─ discard suboptimal</span><span style=color:#000> rmse=13.018  (+/-0.8047)</span></span>
<span class=c>#&gt; <span style=color:#000>22 </span><span style=color:#b00>─ discard suboptimal</span><span style=color:#000> rmse=14.812  (+/-1.017)</span></span>
<span class=c>#&gt; <span style=color:#000>23 </span><span style=color:#b00>─ discard suboptimal</span><span style=color:#000> rmse=13.098  (+/-0.921)</span></span>
<span class=c>#&gt; <span style=color:#000>24 </span><span style=color:#bb0>◯ accept suboptimal </span><span style=color:#000> rmse=12.708  (+/-0.7538)</span></span>
<span class=c>#&gt; <span style=color:#000>25 </span><span style=color:#bb0>◯ accept suboptimal </span><span style=color:#000> rmse=13.054  (+/-0.9046)</span></span></code></pre></div><p>Again, h2o is doing all of the computational work for fitting models and tidymodels is proposing new parameter configurations.</p><p>One other nice feature of the new agua release is the h2o engine for the
<a href=https://parsnip.tidymodels.org/reference/auto_ml.html target=_blank rel=noopener><code>auto_ml()</code></a> model. This builds a stacked ensemble on a set of different models (not unlike our
<a href=https://stacks.tidymodels.org target=_blank rel=noopener>stacks</a> package but with far less code).</p><p>There is a great worked example
<a href=https://agua.tidymodels.org/articles/auto_ml.html target=_blank rel=noopener>on the agua website</a> so make sure to check this out!</p><h2 id=more-spline-recipe-steps>More spline recipe steps
<a href=#more-spline-recipe-steps><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>Spline techniques allow linear models to produce nonlinear model curves. These are called
<a href=https://bookdown.org/max/FES/numeric-one-to-many.html#numeric-basis-functions target=_blank rel=noopener>basis expansion methods</a> since they take a single numeric predictor and make additional nonlinear feature columns.</p><p>If you have ever used <code>geom:smooth()</code>, you have probably used a spline function.</p><p>The recipes package now has an expanded set of spline functions (with a common naming convention):</p><ul><li><a href=https://recipes.tidymodels.org/dev/reference/step_spline_b.html target=_blank rel=noopener><code>step_spline_b()</code></a></li><li><a href=https://recipes.tidymodels.org/dev/reference/step_spline_convex.html target=_blank rel=noopener><code>step_spline_convex()</code></a></li><li><a href=https://recipes.tidymodels.org/dev/reference/step_spline_monotone.html target=_blank rel=noopener><code>step_spline_monotone()</code></a></li><li><a href=https://recipes.tidymodels.org/dev/reference/step_spline_natural.html target=_blank rel=noopener><code>step_spline_natural()</code></a></li><li><a href=https://recipes.tidymodels.org/dev/reference/step_spline_nonnegative.html target=_blank rel=noopener><code>step_spline_nonnegative()</code></a></li></ul><p>There is also another step to make polynomial functions:
<a href=https://recipes.tidymodels.org/dev/reference/step_poly_bernstein.html target=_blank rel=noopener><code>step_poly_bernstein()</code></a></p><p>These functions take different approaches to creating the new set of features. Take a look at the references to see the technical details.</p><p>Here is a simple example using the
<a href=https://www.tmwr.org/ames.html target=_blank rel=noopener>Ames data</a> where we model the sale price as a nonlinear function of the longitude using a convex basis function:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nf><a href=https://rdrr.io/r/utils/data.html>data</a></span><span class=o>(</span><span class=nv>ames</span><span class=o>)</span>

<span class=nv>ames</span><span class=o>$</span><span class=nv>Sale_Price</span> <span class=o>&lt;-</span> <span class=nf><a href=https://rdrr.io/r/base/Log.html>log10</a></span><span class=o>(</span><span class=nv>ames</span><span class=o>$</span><span class=nv>Sale_Price</span><span class=o>)</span>

<span class=nv>spline_rec</span> <span class=o>&lt;-</span> <span class=nf>recipe</span><span class=o>(</span><span class=nv>Sale_Price</span> <span class=o>~</span> <span class=nv>Longitude</span>, data <span class=o>=</span> <span class=nv>ames</span><span class=o>)</span> <span class=o><a href=https://magrittr.tidyverse.org/reference/pipe.html>%&gt;%</a></span> 
  <span class=nf>step_spline_convex</span><span class=o>(</span><span class=nv>Longitude</span>, deg_free <span class=o>=</span> <span class=m>25</span><span class=o>)</span>

<span class=nv>spline_fit</span> <span class=o>&lt;-</span> 
  <span class=nv>spline_rec</span> <span class=o><a href=https://magrittr.tidyverse.org/reference/pipe.html>%&gt;%</a></span> 
  <span class=nf>workflow</span><span class=o>(</span> <span class=nf><a href=https://parsnip.tidymodels.org/reference/linear_reg.html>linear_reg</a></span><span class=o>(</span><span class=o>)</span> <span class=o>)</span> <span class=o><a href=https://magrittr.tidyverse.org/reference/pipe.html>%&gt;%</a></span> 
  <span class=nf><a href=https://generics.r-lib.org/reference/fit.html>fit</a></span><span class=o>(</span>data <span class=o>=</span> <span class=nv>ames</span><span class=o>)</span>

<span class=nv>spline_fit</span> <span class=o><a href=https://magrittr.tidyverse.org/reference/pipe.html>%&gt;%</a></span> 
  <span class=nf><a href=https://generics.r-lib.org/reference/augment.html>augment</a></span><span class=o>(</span><span class=nv>ames</span><span class=o>)</span> <span class=o><a href=https://magrittr.tidyverse.org/reference/pipe.html>%&gt;%</a></span> 
  <span class=nf>ggplot</span><span class=o>(</span><span class=nf>aes</span><span class=o>(</span><span class=nv>Longitude</span><span class=o>)</span><span class=o>)</span> <span class=o>+</span> 
  <span class=nf>geom_point</span><span class=o>(</span><span class=nf>aes</span><span class=o>(</span>y <span class=o>=</span> <span class=nv>Sale_Price</span><span class=o>)</span>, alpha <span class=o>=</span> <span class=m>1</span> <span class=o>/</span> <span class=m>3</span><span class=o>)</span> <span class=o>+</span>
  <span class=nf>geom_line</span><span class=o>(</span><span class=nf>aes</span><span class=o>(</span>y <span class=o>=</span> <span class=nv>.pred</span><span class=o>)</span>, col <span class=o>=</span> <span class=s>"red"</span>, lwd <span class=o>=</span> <span class=m>1.5</span><span class=o>)</span>

</code></pre><p><img src=figs/Longitude-1.svg width=70% style=display:block;margin:auto></p></div><p>Not too bad but the model clearly over-fits on the extreme right tail of the predictor distribution.</p><h2 id=acknowledgements>Acknowledgements
<a href=#acknowledgements><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>It&rsquo;s important that we thank everyone in the community that contributed to tidymodels:</p><div class=highlight><ul><li>agua:
<a href=https://github.com/coforfe target=_blank rel=noopener>@coforfe</a>,
<a href=https://github.com/gouthaman87 target=_blank rel=noopener>@gouthaman87</a>,
<a href=https://github.com/jeliason target=_blank rel=noopener>@jeliason</a>,
<a href=https://github.com/qiushiyan target=_blank rel=noopener>@qiushiyan</a>, and
<a href=https://github.com/topepo target=_blank rel=noopener>@topepo</a>.</li><li>applicable:
<a href=https://github.com/topepo target=_blank rel=noopener>@topepo</a>.</li><li>bonsai:
<a href=https://github.com/barrettlayman target=_blank rel=noopener>@barrettlayman</a>,
<a href=https://github.com/DesmondChoy target=_blank rel=noopener>@DesmondChoy</a>,
<a href=https://github.com/dfsnow target=_blank rel=noopener>@dfsnow</a>,
<a href=https://github.com/dpprdan target=_blank rel=noopener>@dpprdan</a>,
<a href=https://github.com/jameslamb target=_blank rel=noopener>@jameslamb</a>, and
<a href=https://github.com/simonpcouch target=_blank rel=noopener>@simonpcouch</a>.</li><li>broom:
<a href=https://github.com/AaronRendahl target=_blank rel=noopener>@AaronRendahl</a>,
<a href=https://github.com/AmeliaMN target=_blank rel=noopener>@AmeliaMN</a>,
<a href=https://github.com/bbolker target=_blank rel=noopener>@bbolker</a>,
<a href=https://github.com/capnrefsmmat target=_blank rel=noopener>@capnrefsmmat</a>,
<a href=https://github.com/corybrunson target=_blank rel=noopener>@corybrunson</a>,
<a href=https://github.com/ddsjoberg target=_blank rel=noopener>@ddsjoberg</a>,
<a href=https://github.com/friendly target=_blank rel=noopener>@friendly</a>,
<a href=https://github.com/johanneskoch94 target=_blank rel=noopener>@johanneskoch94</a>, and
<a href=https://github.com/simonpcouch target=_blank rel=noopener>@simonpcouch</a>.</li><li>brulee:
<a href=https://github.com/topepo target=_blank rel=noopener>@topepo</a>.</li><li>butcher:
<a href=https://github.com/DavisVaughan target=_blank rel=noopener>@DavisVaughan</a>,
<a href=https://github.com/EmilHvitfeldt target=_blank rel=noopener>@EmilHvitfeldt</a>,
<a href=https://github.com/juliasilge target=_blank rel=noopener>@juliasilge</a>, and
<a href=https://github.com/topepo target=_blank rel=noopener>@topepo</a>.</li><li>censored:
<a href=https://github.com/bcjaeger target=_blank rel=noopener>@bcjaeger</a>,
<a href=https://github.com/hfrick target=_blank rel=noopener>@hfrick</a>,
<a href=https://github.com/mattwarkentin target=_blank rel=noopener>@mattwarkentin</a>,
<a href=https://github.com/simonpcouch target=_blank rel=noopener>@simonpcouch</a>,
<a href=https://github.com/therneau target=_blank rel=noopener>@therneau</a>, and
<a href=https://github.com/topepo target=_blank rel=noopener>@topepo</a>.</li><li>corrr:
<a href=https://github.com/jagodap target=_blank rel=noopener>@jagodap</a>, and
<a href=https://github.com/topepo target=_blank rel=noopener>@topepo</a>.</li><li>finetune:
<a href=https://github.com/DMozzanica target=_blank rel=noopener>@DMozzanica</a>,
<a href=https://github.com/EmilHvitfeldt target=_blank rel=noopener>@EmilHvitfeldt</a>,
<a href=https://github.com/qiushiyan target=_blank rel=noopener>@qiushiyan</a>,
<a href=https://github.com/simonpcouch target=_blank rel=noopener>@simonpcouch</a>, and
<a href=https://github.com/topepo target=_blank rel=noopener>@topepo</a>.</li><li>modeldata:
<a href=https://github.com/topepo target=_blank rel=noopener>@topepo</a>.</li><li>modeldb:
<a href=https://github.com/topepo target=_blank rel=noopener>@topepo</a>.</li><li>parsnip:
<a href=https://github.com/barnabywalker target=_blank rel=noopener>@barnabywalker</a>,
<a href=https://github.com/bcjaeger target=_blank rel=noopener>@bcjaeger</a>,
<a href=https://github.com/ben-e target=_blank rel=noopener>@ben-e</a>,
<a href=https://github.com/CarmenCiardiello target=_blank rel=noopener>@CarmenCiardiello</a>,
<a href=https://github.com/daniel-althoff target=_blank rel=noopener>@daniel-althoff</a>,
<a href=https://github.com/EmilHvitfeldt target=_blank rel=noopener>@EmilHvitfeldt</a>,
<a href=https://github.com/gustavomodelli target=_blank rel=noopener>@gustavomodelli</a>,
<a href=https://github.com/hfrick target=_blank rel=noopener>@hfrick</a>,
<a href=https://github.com/joeycouse target=_blank rel=noopener>@joeycouse</a>,
<a href=https://github.com/john-b-edwards target=_blank rel=noopener>@john-b-edwards</a>,
<a href=https://github.com/juliasilge target=_blank rel=noopener>@juliasilge</a>,
<a href=https://github.com/mdneuzerling target=_blank rel=noopener>@mdneuzerling</a>,
<a href=https://github.com/mikemahoney218 target=_blank rel=noopener>@mikemahoney218</a>,
<a href=https://github.com/mrkaye97 target=_blank rel=noopener>@mrkaye97</a>,
<a href=https://github.com/qiushiyan target=_blank rel=noopener>@qiushiyan</a>,
<a href=https://github.com/siegfried target=_blank rel=noopener>@siegfried</a>,
<a href=https://github.com/simonpcouch target=_blank rel=noopener>@simonpcouch</a>,
<a href=https://github.com/topepo target=_blank rel=noopener>@topepo</a>,
<a href=https://github.com/TylerGrantSmith target=_blank rel=noopener>@TylerGrantSmith</a>, and
<a href=https://github.com/zhaoliang0302 target=_blank rel=noopener>@zhaoliang0302</a>.</li><li>plsmod:
<a href=https://github.com/topepo target=_blank rel=noopener>@topepo</a>.</li><li>poissonreg:
<a href=https://github.com/hfrick target=_blank rel=noopener>@hfrick</a>,
<a href=https://github.com/mattwarkentin target=_blank rel=noopener>@mattwarkentin</a>, and
<a href=https://github.com/simonpcouch target=_blank rel=noopener>@simonpcouch</a>.</li><li>probably:
<a href=https://github.com/DavisVaughan target=_blank rel=noopener>@DavisVaughan</a>.</li><li>recipes:
<a href=https://github.com/abichat target=_blank rel=noopener>@abichat</a>,
<a href=https://github.com/adisarid target=_blank rel=noopener>@adisarid</a>,
<a href=https://github.com/EmilHvitfeldt target=_blank rel=noopener>@EmilHvitfeldt</a>,
<a href=https://github.com/JamesHWade target=_blank rel=noopener>@JamesHWade</a>,
<a href=https://github.com/juliasilge target=_blank rel=noopener>@juliasilge</a>,
<a href=https://github.com/luisDVA target=_blank rel=noopener>@luisDVA</a>,
<a href=https://github.com/naveranoc target=_blank rel=noopener>@naveranoc</a>,
<a href=https://github.com/nhward target=_blank rel=noopener>@nhward</a>,
<a href=https://github.com/RMHogervorst target=_blank rel=noopener>@RMHogervorst</a>,
<a href=https://github.com/ruddnr target=_blank rel=noopener>@ruddnr</a>,
<a href=https://github.com/simonpcouch target=_blank rel=noopener>@simonpcouch</a>,
<a href=https://github.com/topepo target=_blank rel=noopener>@topepo</a>, and
<a href=https://github.com/zhaoliang0302 target=_blank rel=noopener>@zhaoliang0302</a>.</li><li>rsample:
<a href=https://github.com/DavisVaughan target=_blank rel=noopener>@DavisVaughan</a>,
<a href=https://github.com/EmilHvitfeldt target=_blank rel=noopener>@EmilHvitfeldt</a>,
<a href=https://github.com/hfrick target=_blank rel=noopener>@hfrick</a>,
<a href=https://github.com/juliasilge target=_blank rel=noopener>@juliasilge</a>,
<a href=https://github.com/mikemahoney218 target=_blank rel=noopener>@mikemahoney218</a>, and
<a href=https://github.com/tjmahr target=_blank rel=noopener>@tjmahr</a>.</li><li>spatialsample:
<a href=https://github.com/mikemahoney218 target=_blank rel=noopener>@mikemahoney218</a>.</li><li>textrecipes:
<a href=https://github.com/EmilHvitfeldt target=_blank rel=noopener>@EmilHvitfeldt</a>,
<a href=https://github.com/hadley target=_blank rel=noopener>@hadley</a>, and
<a href=https://github.com/PursuitOfDataScience target=_blank rel=noopener>@PursuitOfDataScience</a>.</li><li>tune:
<a href=https://github.com/Athospd target=_blank rel=noopener>@Athospd</a>,
<a href=https://github.com/EmilHvitfeldt target=_blank rel=noopener>@EmilHvitfeldt</a>,
<a href=https://github.com/frankhezemans target=_blank rel=noopener>@frankhezemans</a>,
<a href=https://github.com/kevin199011 target=_blank rel=noopener>@kevin199011</a>,
<a href=https://github.com/misken target=_blank rel=noopener>@misken</a>,
<a href=https://github.com/PursuitOfDataScience target=_blank rel=noopener>@PursuitOfDataScience</a>,
<a href=https://github.com/qiushiyan target=_blank rel=noopener>@qiushiyan</a>,
<a href=https://github.com/simonpcouch target=_blank rel=noopener>@simonpcouch</a>, and
<a href=https://github.com/topepo target=_blank rel=noopener>@topepo</a>.</li><li>workflows:
<a href=https://github.com/DavisVaughan target=_blank rel=noopener>@DavisVaughan</a>,
<a href=https://github.com/EmilHvitfeldt target=_blank rel=noopener>@EmilHvitfeldt</a>,
<a href=https://github.com/JosiahParry target=_blank rel=noopener>@JosiahParry</a>,
<a href=https://github.com/lrossouw target=_blank rel=noopener>@lrossouw</a>,
<a href=https://github.com/msberends target=_blank rel=noopener>@msberends</a>,
<a href=https://github.com/simonpcouch target=_blank rel=noopener>@simonpcouch</a>, and
<a href=https://github.com/topepo target=_blank rel=noopener>@topepo</a>.</li><li>yardstick:
<a href=https://github.com/DavisVaughan target=_blank rel=noopener>@DavisVaughan</a>,
<a href=https://github.com/deschen1 target=_blank rel=noopener>@deschen1</a>,
<a href=https://github.com/EmilHvitfeldt target=_blank rel=noopener>@EmilHvitfeldt</a>,
<a href=https://github.com/juliasilge target=_blank rel=noopener>@juliasilge</a>,
<a href=https://github.com/leonhGeis target=_blank rel=noopener>@leonhGeis</a>,
<a href=https://github.com/PriitPaluoja target=_blank rel=noopener>@PriitPaluoja</a>, and
<a href=https://github.com/topepo target=_blank rel=noopener>@topepo</a>.</li></ul></div></div></div><div class=column25><div class="section hideOnMobile"><div class=sectionTitle>Contents</div><nav id=TableOfContents><ul><li><a href=#a-big-upgrade-for-agua>A big upgrade for agua</a></li><li><a href=#more-spline-recipe-steps>More spline recipe steps</a></li><li><a href=#acknowledgements>Acknowledgements</a></li></ul></nav></div><div class=section></div></div></div></div></div><div id=rStudioFooter class=band><div class=bandContent><div id=copyright>The tidyverse is proudly supported by <a class=rstudioLogo href=https://posit.co/ aria-label="Posit Homepage"></a></div><div id=logos><a href=https://www.tidyverse.org/google_privacy_policy>Privacy policy</a>
<a href=https://github.com/tidyverse class="footerLogo gitHub" aria-label="Tidyverse GitHub organization"></a><a href=https://twitter.com/hashtag/rstats class="footerLogo twitter" aria-label="rstats hashtag on twitter.com"></a></div></div></div></div></div><script src=/js/math-code.js></script><script type=text/x-mathjax-config>
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    processEscapes: true
  }
});
</script><script async src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script type=application/javascript>var dnt=(navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack);var doNotTrack=(dnt=="1"||dnt=="yes");if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');if(window.sessionStorage){var GA_SESSION_STORAGE_KEY='ga:clientId';ga('create','UA-115082821-1',{'storage':'none','clientId':sessionStorage.getItem(GA_SESSION_STORAGE_KEY)});ga(function(tracker){sessionStorage.setItem(GA_SESSION_STORAGE_KEY,tracker.get('clientId'));});}
ga('set','anonymizeIp',true);ga('send','pageview');}</script></body></html></div></div></body></html>