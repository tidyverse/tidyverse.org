<!doctype html><html><head><!doctype html><html lang=en-us><link rel=stylesheet href=/css/fonts.css><link rel=stylesheet href=/css/main-site.css><link rel=stylesheet href=/css/fa5-all.css><style type=text/css>body{background-color:#fff;color:#1a1917}a{color:#38577f}a:hover{color:#42709b}a:focus{outline-color:#42709b}.column25-left .sectionTitle a:hover:not(.current),.column16-left .sectionTitle a:hover:not(.current){color:#1a1917}.icon-attribution,.icon-attribution a{color:#1a1917;opacity:75%}#homeContent .band.first{background-color:#fff}#homeContent .band.second{background-color:#fdeba4}#homeContent .band.third{background-color:#fff}#rStudioHeader{background-color:#1a162d;color:#fff}#rStudioHeader .productName{color:#fff}#rStudioHeader .productName:hover,#rStudioHeader .productName:focus{color:#fdeba4}#rStudioHeader #menu .menuItem.a{background-color:#75aadb;color:#fff}#rStudioHeader #menu .menuItem:hover{background-color:#484557;color:#fff}#rStudioHeader #menu .menuItem.current{background-color:#fff;color:#1a162d;text-decoration:none}#rStudioFooter.band{background-color:#767381}#rStudioFooter .bandContent #copyright{color:#e3eef8}table tbody tr:nth-child(even){background-color:#f7faff}table tbody tr:nth-child(odd){background-color:#fff}.latest{border-top:.5em solid <no value>}.event{-moz-box-shadow:0 0 0 0 rgba(0,0,0,.1);-webkit-box-shadow:0 0 0 0 rgba(0,0,0,.1);box-shadow:0 0 0 0 rgba(0,0,0,.1)}.section .event{background-color:#eab0c41a}.section .event{border-top:7pt solid #a19ea936}.section .event a{color:#1a162d}.section .event{color:#404040}</style><link rel=stylesheet href=/css/tidyverse.css><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Hugo 0.71.1"><title>ggplot2 3.4.0</title><meta property="og:title" content="ggplot2 3.4.0"><meta property="og:description" content="ggplot2 3.4.0 is now on CRAN. Read all about the (mostly internal) changes that make up this release."><meta property="og:type" content="article"><meta property="og:url" content="https://www.tidyverse.org/blog/2022/11/ggplot2-3-4-0/"><meta property="twitter:card" content="summary_large_image"><meta property="og:title" content="ggplot2 3.4.0 - Tidyverse"><meta property="description" content="ggplot2 3.4.0 is now on CRAN. Read all about the (mostly internal) changes that make up this release."><meta property="og:description" content="ggplot2 3.4.0 is now on CRAN. Read all about the (mostly internal) changes that make up this release."><meta property="og:image" content="https://www.tidyverse.org/blog/2022/11/ggplot2-3-4-0/thumbnail-sq.jpg"><meta name=twitter:image content="https://www.tidyverse.org/blog/2022/11/ggplot2-3-4-0/thumbnail-wd.jpg"><link rel=apple-touch-icon sizes=180x180 href=/images/favicons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/images/favicons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/images/favicons/favicon-16x16.png><link rel=manifest href=/images/favicons/site.webmanifest><link rel=mask-icon href=/images/favicons/safari-pinned-tab.svg><link rel="shortcut icon" href=/images/favicons/favicon.ico><meta name=msapplication-TileColor content="#da532c"><meta name=msapplication-config href=/images/favicons/browserconfig.xml><script type=text/javascript src=/js/jquery-3.5.1.min.js></script><script type=text/javascript src=/js/site.js></script><link rel=icon href=/images/favicon.ico><script type=text/javascript src=/js/clipboard.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin=anonymous></script><script defer data-domain=tidyverse.org,all.tidyverse.org src=https://plausible.io/js/plausible.js></script></head><body><div id=appTidyverseSite class="shrinkHeader alwaysShrinkHeader"><div id=main><div id=rStudioHeader><nav class=band><div class="innards bandContent"><div><a class=productName href=/%20/>Tidyverse</a></div><div id=menu><div id=menuToggler></div><div id=menuItems><a class=menuItem href=/packages/>Packages</a>
<a class="menuItem current" href=/blog/>Blog</a>
<a class=menuItem href=/learn/>Learn</a>
<a class=menuItem href=/help/>Help</a>
<a class=menuItem href=/contribute/>Contribute</a></div></div></div></nav></div><main><div class="band padForHeader pushFooter"><div class=bandContent><div class="full splitColumns withMobileMargins"><div class=column75><h1 class=article-title>ggplot2 3.4.0</h1><div class=article-header aria-hidden=true><div class=photo><img src=/blog/2022/11/ggplot2-3-4-0/thumbnail-wd.jpg></div><div class=photoCredit>Photo by <a href=https://data-imaginist.com/art>Thomas Lin Pedersen</a></div></div><span class=article-date><i class="fas fa-calendar-day fa-fw"></i>&nbsp;&nbsp;2022/11/07</span><p style=margin-bottom:.5em;margin-top:.85em><i class="fas fa-tags"></i>&nbsp;
<a href=/tags/ggplot2/>ggplot2</a>,
<a href=/tags/graphics/>graphics</a></p><p style=margin-top:.5em><i class="fas fa-user-circle fa-fw"></i>&nbsp;
Thomas Lin Pedersen</p><div class=article-content><p>We&rsquo;re so happy to announce the release of
<a href=https://ggplot2.tidyverse.org target=_blank rel=noopener>ggplot2</a> 3.4.0 on CRAN. ggplot2 is a system for declaratively creating graphics, based on The Grammar of Graphics. You provide the data, tell ggplot2 how to map variables to aesthetics, what graphical primitives to use, and it takes care of the details. The new version can be installed from CRAN using <code>install.packages("ggplot2")</code>.</p><p>This release is not full of exciting new features. Instead we have focused on the internals, tightening up of the API, and improving the messaging, especially when it comes to errors and warnings. While the release also contains a few new features these other aspects are the stars of this release.</p><p>You can see a full list of changes in the
<a href=https://ggplot2.tidyverse.org/news/index.html target=_blank rel=noopener>release notes</a></p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=kr><a href=https://rdrr.io/r/base/library.html>library</a></span><span class=o>(</span><span class=nv><a href=https://ggplot2.tidyverse.org>ggplot2</a></span><span class=o>)</span>
<span class=kr><a href=https://rdrr.io/r/base/library.html>library</a></span><span class=o>(</span><span class=nv><a href=https://patchwork.data-imaginist.com>patchwork</a></span><span class=o>)</span>
<span class=kr><a href=https://rdrr.io/r/base/library.html>library</a></span><span class=o>(</span><span class=nv><a href=https://dplyr.tidyverse.org>dplyr</a></span><span class=o>)</span></code></pre></div><h2 id=hello-linewidth>Hello <code>linewidth</code>
<a href=#hello-linewidth><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>Arguably the biggest user.visible change in this release is the introduction of a new fundamental aesthetic. From this release on, <code>linewidth</code> will take over sizing of the width of lines&mdash;something that was earlier handled by <code>size</code>. The reason for this change is that prior to this release <code>size</code> was used for two related, but different, properties: the size of points (and glyphs) and the width of lines. Since one is area based and one is length based they fundamentally needs different scaling and the default size scale has always catered to area sizing, using a square root transform. This conflation has also made it hard for composite geoms like
<a href=https://ggplot2.tidyverse.org/reference/geom_linerange.html target=_blank rel=noopener><code>geom_pointrange()</code></a> to control the line width and point size separately.</p><p>There is not much to discuss when it comes to how to use this &ldquo;feature&rdquo;, as it is a matter of switching out <code>size</code> with <code>linewidth</code> whenever you target stroke sizing:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nf><a href=https://ggplot2.tidyverse.org/reference/ggplot.html>ggplot</a></span><span class=o>(</span><span class=nv>airquality</span><span class=o>)</span> <span class=o>+</span> 
  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/geom_path.html>geom_line</a></span><span class=o>(</span><span class=nf><a href=https://ggplot2.tidyverse.org/reference/aes.html>aes</a></span><span class=o>(</span><span class=nv>Day</span>, <span class=nv>Temp</span>, linewidth <span class=o>=</span> <span class=nv>Month</span>, group <span class=o>=</span> <span class=nv>Month</span><span class=o>)</span><span class=o>)</span> <span class=o>+</span> 
  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/scale_linewidth.html>scale_linewidth</a></span><span class=o>(</span>range <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/c.html>c</a></span><span class=o>(</span><span class=m>0.5</span>, <span class=m>3</span><span class=o>)</span><span class=o>)</span>
</code></pre><p><img src=figs/unnamed-chunk-1-1.png width=700px style=display:block;margin:auto></p></div><p>Now, changing such a fundamental thing when a package is as old and widely used as ggplot2 is no small undertaking, and I wish it had been done earlier, but better late than never. We have gone to great lengths to ensure that old code continues to work. For the most part using size will continue to behave like before:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nf><a href=https://ggplot2.tidyverse.org/reference/ggplot.html>ggplot</a></span><span class=o>(</span><span class=nv>airquality</span><span class=o>)</span> <span class=o>+</span> 
  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/geom_path.html>geom_line</a></span><span class=o>(</span><span class=nf><a href=https://ggplot2.tidyverse.org/reference/aes.html>aes</a></span><span class=o>(</span><span class=nv>Day</span>, <span class=nv>Temp</span>, size <span class=o>=</span> <span class=nv>Month</span>, group <span class=o>=</span> <span class=nv>Month</span><span class=o>)</span><span class=o>)</span> <span class=o>+</span> 
  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/scale_size.html>scale_size</a></span><span class=o>(</span>range <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/c.html>c</a></span><span class=o>(</span><span class=m>0.5</span>, <span class=m>3</span><span class=o>)</span><span class=o>)</span>
<span class=c>#&gt; Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.</span>
<span class=c>#&gt; <span style=color:#0bb>ℹ</span> Please use `linewidth` instead.</span>
</code></pre><p><img src=figs/unnamed-chunk-2-1.png width=700px style=display:block;margin:auto></p></div><p>As you can see you get the expected plot but also gets a deprecation warning asking you to update your code. Comparing the two legends we can also see the discrepancy in scaling that we discussed above, showing a much more even progression with <code>linewidth</code>.</p><p>All of this should work with all the geoms provided by ggplot2 (and we have described
<a href=https://www.tidyverse.org/blog/2022/08/ggplot2-3-4-0-size-to-linewidth/ target=_blank rel=noopener>a clear upgrade path for extension developers to adopt this</a>), except for a few instances where <code>size</code> remains a valid aesthetic for the geom. In these cases you will not get a deprecation warning and your output may change in look when running old code. The two geoms this concerns are
<a href=https://ggplot2.tidyverse.org/reference/geom_linerange.html target=_blank rel=noopener><code>geom_pointrange()</code></a> and
<a href=https://ggplot2.tidyverse.org/reference/ggsf.html target=_blank rel=noopener><code>geom_sf()</code></a> which both continues to use <code>size</code> to scale points. Comparing the output from e.g. 
<a href=https://ggplot2.tidyverse.org/reference/geom_linerange.html target=_blank rel=noopener><code>geom_pointrange()</code></a> we can see how using <code>size</code> now only targets the point and not the line:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nf><a href=https://ggplot2.tidyverse.org/reference/ggplot.html>ggplot</a></span><span class=o>(</span><span class=nv>airquality</span><span class=o>)</span> <span class=o>+</span> 
  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/geom_linerange.html>geom_pointrange</a></span><span class=o>(</span><span class=nf><a href=https://ggplot2.tidyverse.org/reference/aes.html>aes</a></span><span class=o>(</span>x <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/factor.html>factor</a></span><span class=o>(</span><span class=nv>Month</span><span class=o>)</span>, y <span class=o>=</span> <span class=nv>Temp</span><span class=o>)</span>, stat <span class=o>=</span> <span class=s>"summary"</span>, size <span class=o>=</span> <span class=m>2</span><span class=o>)</span>
<span class=c>#&gt; No summary function supplied, defaulting to `mean_se()`</span>
</code></pre><p><img src=figs/unnamed-chunk-3-1.png width=700px style=display:block;margin:auto></p></div><p>We recognize that introducing silent visual changes like this is not optimal but we weighted both sides and decided that it was better in the long run to rip the band-aid off and commit fully to the <code>linewidth</code> change in one release.</p><p>The switch to <code>linewidth</code> goes beyond aesthetics and should target every part of the API that have used <code>size</code> to target line width. This is mostly present in theming where
<a href=https://ggplot2.tidyverse.org/reference/element.html target=_blank rel=noopener><code>element_rect()</code></a> and
<a href=https://ggplot2.tidyverse.org/reference/element.html target=_blank rel=noopener><code>element_line()</code></a> now uses <code>linewidth</code> as argument instead of <code>size</code>. As above a deprecation warning will inform you of this change:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nf><a href=https://ggplot2.tidyverse.org/reference/ggplot.html>ggplot</a></span><span class=o>(</span><span class=nv>mtcars</span><span class=o>)</span> <span class=o>+</span> 
  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/geom_point.html>geom_point</a></span><span class=o>(</span><span class=nf><a href=https://ggplot2.tidyverse.org/reference/aes.html>aes</a></span><span class=o>(</span>x <span class=o>=</span> <span class=nv>mpg</span>, y <span class=o>=</span> <span class=nv>disp</span><span class=o>)</span><span class=o>)</span> <span class=o>+</span> 
  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/theme.html>theme</a></span><span class=o>(</span>panel.grid <span class=o>=</span> <span class=nf><a href=https://ggplot2.tidyverse.org/reference/element.html>element_line</a></span><span class=o>(</span>linewidth <span class=o>=</span> <span class=m>0.2</span><span class=o>)</span><span class=o>)</span>
</code></pre><p><img src=figs/unnamed-chunk-4-1.png width=700px style=display:block;margin:auto></p></div><p>We have done our best to ensure that it is easy for our extension developers to follow the path laid out by ggplot2 when it comes to embracing the new aesthetic, but you will probably experience a period of discrepancy between some of your favorite extensions and ggplot2. I have full confidence that our amazing extension developers will adapt quickly so that period will probably be short.</p><h3 id=on-the-topic-of-line-width>On the topic of line width
<a href=#on-the-topic-of-line-width><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><p>We have made a few other internal changes when it comes to line widths. The biggest of these are perhaps a new default for polygon line width in
<a href=https://ggplot2.tidyverse.org/reference/ggsf.html target=_blank rel=noopener><code>geom_sf()</code></a>. The change came about as we already had induced visual changes to old code due to the <code>linewidth</code> aesthetic introduction and based on feedback from the spatial community we saw that <code>size</code> was most often used to thin the polygon borders. The new default is 0.2 (down from 0.5) and hopefully strikes a nice balance:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nv>nc</span> <span class=o>&lt;-</span> <span class=nf>sf</span><span class=nf>::</span><span class=nf><a href=https://r-spatial.github.io/sf/reference/st_read.html>st_read</a></span><span class=o>(</span><span class=nf><a href=https://rdrr.io/r/base/system.file.html>system.file</a></span><span class=o>(</span><span class=s>"shape/nc.shp"</span>, package <span class=o>=</span> <span class=s>"sf"</span><span class=o>)</span>, quiet <span class=o>=</span> <span class=kc>TRUE</span><span class=o>)</span>
<span class=nv>p1</span> <span class=o>&lt;-</span> <span class=nf><a href=https://ggplot2.tidyverse.org/reference/ggplot.html>ggplot</a></span><span class=o>(</span><span class=nv>nc</span><span class=o>)</span> <span class=o>+</span>
  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/ggsf.html>geom_sf</a></span><span class=o>(</span>linewidth <span class=o>=</span> <span class=m>0.5</span><span class=o>)</span> <span class=o>+</span> 
  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/labs.html>ggtitle</a></span><span class=o>(</span><span class=s>"Old default"</span><span class=o>)</span>

<span class=nv>p2</span> <span class=o>&lt;-</span> <span class=nf><a href=https://ggplot2.tidyverse.org/reference/ggplot.html>ggplot</a></span><span class=o>(</span><span class=nv>nc</span><span class=o>)</span> <span class=o>+</span>
  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/ggsf.html>geom_sf</a></span><span class=o>(</span><span class=o>)</span> <span class=o>+</span> 
  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/labs.html>ggtitle</a></span><span class=o>(</span><span class=s>"New default"</span><span class=o>)</span>

<span class=nv>p1</span><span class=o>/</span><span class=nv>p2</span>
</code></pre><p><img src=figs/unnamed-chunk-5-1.png width=700px style=display:block;margin:auto></p></div><p>More minor is a small fix we did to
<a href=https://ggplot2.tidyverse.org/reference/guide_colourbar.html target=_blank rel=noopener><code>guide_colorbar()</code></a> where it was brought to our attention that the <code>ticks.linewidth</code> and <code>frame.linewidth</code> weren&rsquo;t given in the same unit as every other line width in ggplot2. This has been corrected and the default has been adjusted to retain the same look but if you have given these specifically in your code you are likely to notice a visual change.</p><h2 id=other-breaking-changes>Other breaking changes
<a href=#other-breaking-changes><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>In the grab-bag of breaking changes we have now formally deprecated
<a href=https://ggplot2.tidyverse.org/reference/qplot.html target=_blank rel=noopener><code>qplot()</code></a>. It will continue to work as always but will be a bit noisy about it. Don&rsquo;t expect the function to disappear, but the deprecation signals that we don&rsquo;t intend to do further work on
<a href=https://ggplot2.tidyverse.org/reference/qplot.html target=_blank rel=noopener><code>qplot()</code></a> to keep it current with new features etc. In the same vein,
<a href=https://ggplot2.tidyverse.org/reference/aes_eval.html target=_blank rel=noopener><code>stat()</code></a> and <code>..var..</code> for marking aesthetics from stats are also formally deprecated in favor of
<a href=https://ggplot2.tidyverse.org/reference/aes_eval.html target=_blank rel=noopener><code>after_stat()</code></a>. Again, the result is that using these old APIs will be noisy but still work.</p><p>On the topic of
<a href=https://ggplot2.tidyverse.org/reference/aes_eval.html target=_blank rel=noopener><code>after_stat()</code></a>, the values and computations inside of it now use the un-transformed variables rather than the transformed ones. This is a bit esoteric and only applies to aesthetics that have had a scale transformation applied to them, so you may never notice.</p><p>Lastly, we have made a switch to using
<a href=https://rlang.r-lib.org/reference/hash.html target=_blank rel=noopener><code>rlang::hash()</code></a> instead of
<a href=https://rdrr.io/pkg/digest/man/digest.html target=_blank rel=noopener><code>digest::digest()</code></a> which may result in the automatic ordering of legends changing, again a pretty minor change. If you care about the ordering of the legends you can always take control of it using the <code>order</code> argument inside the different <code>guide_*()</code> constructors.</p><h2 id=better-errors>Better errors
<a href=#better-errors><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>One of the most substantial changes in usability in this release is a complete rewrite of the errors and warnings. This goes deeper than changing wordings as the messaging is now based on the signal handling in the
<a href=https://cli.r-lib.org target=_blank rel=noopener>cli</a> package that provides rich text formatting and better ways to guide the user to a resolution. Consider the following easy to make mistake of using the pipe instead of <code>+</code>:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nf><a href=https://ggplot2.tidyverse.org/reference/ggplot.html>ggplot</a></span><span class=o>(</span><span class=nv>mtcars</span><span class=o>)</span> |&gt; 
  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/geom_point.html>geom_point</a></span><span class=o>(</span><span class=nf><a href=https://ggplot2.tidyverse.org/reference/aes.html>aes</a></span><span class=o>(</span><span class=nv>mpg</span>, <span class=nv>disp</span><span class=o>)</span><span class=o>)</span>
<span class=c>#&gt; <span style=color:#bb0;font-weight:700>Error</span><span style=font-weight:700> in `geom_point()`:</span></span>
<span class=c>#&gt; <span style=color:#bb0>!</span> `mapping` must be created by `aes()`</span>
<span class=c>#&gt; <span style=color:#0bb>ℹ</span> Did you use `%&gt;%` or `|&gt;` instead of `+`?</span></code></pre></div><p>As can be seen, the error now clearly states where it is happening, then tells you what is wrong, and lastly gives you a hint at what might be the solution.</p><p>However, this is not all. One of the biggest issues with error reporting in ggplot2 is that most code is evaluated during rendering, not when the API calls are made. Because of this it has been difficult to link a user error in a geom specification to the actual error message that arises. This could send the user on a treasure hunt to identify what to change in order to fix the code. With the changes in 3.4.0 we are now much better at directing the user to the right place in their code when errors in the rendering happens:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nv>huron</span> <span class=o>&lt;-</span> <span class=nf><a href=https://rdrr.io/r/base/data.frame.html>data.frame</a></span><span class=o>(</span>year <span class=o>=</span> <span class=m>1875</span><span class=o>:</span><span class=m>1972</span>, level <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/vector.html>as.vector</a></span><span class=o>(</span><span class=nv>LakeHuron</span><span class=o>)</span><span class=o>)</span>
<span class=nf><a href=https://ggplot2.tidyverse.org/reference/ggplot.html>ggplot</a></span><span class=o>(</span><span class=nv>huron</span><span class=o>)</span> <span class=o>+</span>
  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/geom_path.html>geom_line</a></span><span class=o>(</span><span class=nf><a href=https://ggplot2.tidyverse.org/reference/aes.html>aes</a></span><span class=o>(</span><span class=nv>year</span>, <span class=nv>level</span><span class=o>)</span><span class=o>)</span> <span class=o>+</span> 
  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/geom_ribbon.html>geom_ribbon</a></span><span class=o>(</span><span class=nf><a href=https://ggplot2.tidyverse.org/reference/aes.html>aes</a></span><span class=o>(</span><span class=nv>year</span>, xmin <span class=o>=</span> <span class=nv>level</span> <span class=o>-</span> <span class=m>5</span>, xmax <span class=o>=</span> <span class=nv>level</span> <span class=o>+</span> <span class=m>5</span><span class=o>)</span><span class=o>)</span>
<span class=c>#&gt; <span style=color:#bb0;font-weight:700>Error</span><span style=font-weight:700> in `geom_ribbon()`:</span></span>
<span class=c>#&gt; <span style=color:#bb0>!</span> Problem while setting up geom.</span>
<span class=c>#&gt; <span style=color:#0bb>ℹ</span> Error occurred in the 2nd layer.</span>
<span class=c>#&gt; <span style=font-weight:700>Caused by error in `compute_geom_1()` at </span><a href=file:///Users/thomas/Dropbox/GitHub/ggplot2/R/ggproto.r><span style=font-weight:700>ggplot2/R/ggproto.r:182:16</span></a><span style=font-weight:700>:</span></span>
<span class=c>#&gt; <span style=color:#bb0>!</span> `geom_ribbon()` requires the following missing aesthetics: <span style=color:#0b0>ymin</span> and</span>
<span class=c>#&gt;   <span style=color:#0b0>ymax</span> <span style=font-weight:700>or</span> <span style=color:#0b0>y</span></span></code></pre></div><p>We can see that the error message correctly identifies the geom responsible for the layer, communicates during what part of the rendering it happened during, and points to the index of the layer in the case that multiple layers from the same geom have been used. Lastly it shows the original error that can help you with solving the issue.</p><p>Hopefully the changes goes a long way to make ggplot2 even more welcoming to new and seasoned users alike. However, this effort is never done and we continue to appreciate issues in the github repository pointing out unhelpful errors or warnings that arises so that we may improve it further.</p><h2 id=vctrs-inside>vctrs inside
<a href=#vctrs-inside><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>The last part of the large housekeeping changes in this release is that ggplot2 finally embraces
<a href=https://vctrs.r-lib.org target=_blank rel=noopener>vctrs</a> and uses it&rsquo;s functions internally primarily for binding data together. Apart from a nice bump in rendering speed it also means that we now better support data types built upon vctrs and subscribe to the more well-defined coercion rules that it provides. The last point is a double edged sword though, as your code may contain a diverse mix of data types in different layers that worked before but doesn&rsquo;t align with the strictness of vctrs. While we have gone to lengths to ensure that your code still works you will begin to see deprecation notices if you e.g. factor on a variable that is incompatible across layers:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nv>labels</span> <span class=o>&lt;-</span> <span class=nf><a href=https://rdrr.io/r/base/data.frame.html>data.frame</a></span><span class=o>(</span>
  label <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/paste.html>paste</a></span><span class=o>(</span><span class=s>"gear"</span>, <span class=m>3</span><span class=o>:</span><span class=m>5</span><span class=o>)</span>,
  gear <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/character.html>as.character</a></span><span class=o>(</span><span class=m>3</span><span class=o>:</span><span class=m>5</span><span class=o>)</span>,
  x <span class=o>=</span> <span class=m>100</span>,
  y <span class=o>=</span> <span class=m>11</span>
<span class=o>)</span>
<span class=nf><a href=https://ggplot2.tidyverse.org/reference/ggplot.html>ggplot</a></span><span class=o>(</span><span class=nv>mtcars</span><span class=o>)</span> <span class=o>+</span> 
  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/geom_point.html>geom_point</a></span><span class=o>(</span><span class=nf><a href=https://ggplot2.tidyverse.org/reference/aes.html>aes</a></span><span class=o>(</span><span class=nv>disp</span>, <span class=nv>mpg</span><span class=o>)</span><span class=o>)</span> <span class=o>+</span> 
  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/geom_text.html>geom_text</a></span><span class=o>(</span><span class=nf><a href=https://ggplot2.tidyverse.org/reference/aes.html>aes</a></span><span class=o>(</span><span class=nv>x</span>, <span class=nv>y</span>, label <span class=o>=</span> <span class=nv>label</span><span class=o>)</span>, <span class=nv>labels</span>, hjust <span class=o>=</span> <span class=s>"left"</span><span class=o>)</span> <span class=o>+</span> 
  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/facet_wrap.html>facet_wrap</a></span><span class=o>(</span><span class=o>~</span><span class=nv>gear</span><span class=o>)</span>
<span class=c>#&gt; Warning: Combining variables of class &lt;numeric&gt; and &lt;character&gt; was deprecated in</span>
<span class=c>#&gt; ggplot2 3.4.0.</span>
<span class=c>#&gt; <span style=color:#0bb>ℹ</span> Please ensure your variables are compatible before plotting (location:</span>
<span class=c>#&gt;   `combine_vars()`)</span>
</code></pre><p><img src=figs/unnamed-chunk-8-1.png width=700px style=display:block;margin:auto></p></div><p>While this may seem like an unnecessary annoyance we hope that you&rsquo;ll learn to appreciate that this strictness can save you from silent bugs where you end up combining variables that are basically incompatible.</p><h2 id=new-features>New features
<a href=#new-features><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>While most of the focus has been on internal housekeeping in this release a few new features has also crept in, courtesy of our amazing contributors from the community:</p><h3 id=stacking-non-aligned-data>Stacking non-aligned data
<a href=#stacking-non-aligned-data><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><p><a href=https://ggplot2.tidyverse.org/reference/position_stack.html target=_blank rel=noopener><code>position_stack()</code></a> has always required that groups share a common x-value to be stacked. The nature of most time series data etc. makes it so that this is often the case, but not always. We have now introduced a
<a href=https://ggplot2.tidyverse.org/reference/geom_ribbon.html target=_blank rel=noopener><code>stat_align()</code></a> that takes care of interpolating y-values in each group at every unique x-value in the data so that they can be stacked. This stat is now the default for
<a href=https://ggplot2.tidyverse.org/reference/geom_ribbon.html target=_blank rel=noopener><code>geom_area()</code></a>:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nv>df</span> <span class=o>&lt;-</span> <span class=nf>tibble</span><span class=nf>::</span><span class=nf><a href=https://tibble.tidyverse.org/reference/tribble.html>tribble</a></span><span class=o>(</span>
    <span class=o>~</span><span class=nv>g</span>, <span class=o>~</span><span class=nv>x</span>, <span class=o>~</span><span class=nv>y</span>,
    <span class=s>"a"</span>, <span class=m>1</span>, <span class=m>2</span>,
    <span class=s>"a"</span>, <span class=m>3</span>, <span class=m>5</span>,
    <span class=s>"a"</span>, <span class=m>5</span>, <span class=m>1</span>,
    <span class=s>"b"</span>, <span class=m>2</span>, <span class=m>0</span>,
    <span class=s>"b"</span>, <span class=m>4</span>, <span class=m>6</span>,
    <span class=s>"b"</span>, <span class=m>6</span>, <span class=m>7</span>
<span class=o>)</span>
<span class=nv>p1</span> <span class=o>&lt;-</span> <span class=nf><a href=https://ggplot2.tidyverse.org/reference/ggplot.html>ggplot</a></span><span class=o>(</span><span class=nv>df</span>, <span class=nf><a href=https://ggplot2.tidyverse.org/reference/aes.html>aes</a></span><span class=o>(</span><span class=nv>x</span>, <span class=nv>y</span>, fill <span class=o>=</span> <span class=nv>g</span><span class=o>)</span><span class=o>)</span> <span class=o>+</span> 
  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/geom_ribbon.html>geom_area</a></span><span class=o>(</span>stat <span class=o>=</span> <span class=s>"identity"</span>, alpha <span class=o>=</span> <span class=m>0.5</span><span class=o>)</span> <span class=o>+</span> 
  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/labs.html>ggtitle</a></span><span class=o>(</span><span class=s>"stat_identity()"</span><span class=o>)</span>
<span class=nv>p2</span> <span class=o>&lt;-</span> <span class=nf><a href=https://ggplot2.tidyverse.org/reference/ggplot.html>ggplot</a></span><span class=o>(</span><span class=nv>df</span>, <span class=nf><a href=https://ggplot2.tidyverse.org/reference/aes.html>aes</a></span><span class=o>(</span><span class=nv>x</span>, <span class=nv>y</span>, fill <span class=o>=</span> <span class=nv>g</span><span class=o>)</span><span class=o>)</span> <span class=o>+</span> 
  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/geom_ribbon.html>geom_area</a></span><span class=o>(</span>alpha <span class=o>=</span> <span class=m>0.5</span><span class=o>)</span> <span class=o>+</span> 
  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/labs.html>ggtitle</a></span><span class=o>(</span><span class=s>"stat_align()"</span><span class=o>)</span>

<span class=o>(</span><span class=nv>p1</span> <span class=o>|</span> <span class=nv>p2</span><span class=o>)</span> <span class=o>&amp;</span> <span class=nf><a href=https://ggplot2.tidyverse.org/reference/theme.html>theme</a></span><span class=o>(</span>legend.position <span class=o>=</span> <span class=s>"none"</span><span class=o>)</span>
</code></pre><p><img src=figs/unnamed-chunk-9-1.png width=700px style=display:block;margin:auto></p></div><h3 id=bounded-density-estimation>Bounded density estimation
<a href=#bounded-density-estimation><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><p><a href=https://ggplot2.tidyverse.org/reference/geom_density.html target=_blank rel=noopener><code>geom_density()</code></a> have gained a <code>bounds</code> argument allowing you to perform density estimation with bound correction. This can leads to might better edge estimates when bounds are known for a sample:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nv>data</span> <span class=o>&lt;-</span> <span class=nf><a href=https://rdrr.io/r/base/data.frame.html>data.frame</a></span><span class=o>(</span>x <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/stats/Exponential.html>rexp</a></span><span class=o>(</span><span class=m>100</span><span class=o>)</span><span class=o>)</span>
<span class=nf><a href=https://ggplot2.tidyverse.org/reference/ggplot.html>ggplot</a></span><span class=o>(</span><span class=nv>data</span>, <span class=nf><a href=https://ggplot2.tidyverse.org/reference/aes.html>aes</a></span><span class=o>(</span><span class=nv>x</span><span class=o>)</span><span class=o>)</span> <span class=o>+</span>
  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/geom_density.html>geom_density</a></span><span class=o>(</span><span class=nf><a href=https://ggplot2.tidyverse.org/reference/aes.html>aes</a></span><span class=o>(</span>colour <span class=o>=</span> <span class=s>"unbounded"</span><span class=o>)</span>, key_glyph <span class=o>=</span> <span class=s>"path"</span><span class=o>)</span> <span class=o>+</span>
  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/geom_density.html>geom_density</a></span><span class=o>(</span><span class=nf><a href=https://ggplot2.tidyverse.org/reference/aes.html>aes</a></span><span class=o>(</span>colour <span class=o>=</span> <span class=s>"bounded"</span><span class=o>)</span>, bounds <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/c.html>c</a></span><span class=o>(</span><span class=m>0</span>, <span class=kc>Inf</span><span class=o>)</span>, key_glyph <span class=o>=</span> <span class=s>"path"</span><span class=o>)</span> <span class=o>+</span>
  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/geom_function.html>stat_function</a></span><span class=o>(</span><span class=nf><a href=https://ggplot2.tidyverse.org/reference/aes.html>aes</a></span><span class=o>(</span>colour <span class=o>=</span> <span class=s>"true distribution"</span><span class=o>)</span>, fun <span class=o>=</span> <span class=nv>dexp</span><span class=o>)</span> <span class=o>+</span> 
  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/scale_manual.html>scale_colour_manual</a></span><span class=o>(</span>
    name <span class=o>=</span> <span class=kc>NULL</span>, 
    values <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/c.html>c</a></span><span class=o>(</span><span class=s>"black"</span>, <span class=s>"firebrick"</span>, <span class=s>"forestgreen"</span><span class=o>)</span>,
    breaks <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/c.html>c</a></span><span class=o>(</span><span class=s>"true distribution"</span>, <span class=s>"unbounded"</span>, <span class=s>"bounded"</span><span class=o>)</span>
  <span class=o>)</span>
</code></pre><p><img src=figs/unnamed-chunk-10-1.png width=700px style=display:block;margin:auto></p></div><h3 id=no-clipping-in-facet-strips>No clipping in facet strips
<a href=#no-clipping-in-facet-strips><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><p>It is now possible to turn clipping in the facet strips off. For the most part the default works fine but in certain situations you&rsquo;d like the strip text or the border to be seen in full. The new feature is a theme setting:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nv>p</span> <span class=o>&lt;-</span> <span class=nf><a href=https://ggplot2.tidyverse.org/reference/ggplot.html>ggplot</a></span><span class=o>(</span><span class=nv>diamonds</span><span class=o>)</span> <span class=o>+</span> 
  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/geom_bar.html>geom_bar</a></span><span class=o>(</span><span class=nf><a href=https://ggplot2.tidyverse.org/reference/aes.html>aes</a></span><span class=o>(</span>y <span class=o>=</span> <span class=nv>color</span><span class=o>)</span><span class=o>)</span> <span class=o>+</span> 
  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/facet_wrap.html>facet_wrap</a></span><span class=o>(</span><span class=o>~</span> <span class=nv>cut</span><span class=o>)</span> <span class=o>+</span> 
  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/ggtheme.html>theme_minimal</a></span><span class=o>(</span><span class=o>)</span> <span class=o>+</span> 
  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/theme.html>theme</a></span><span class=o>(</span>
    strip.background <span class=o>=</span> <span class=nf><a href=https://ggplot2.tidyverse.org/reference/element.html>element_rect</a></span><span class=o>(</span><span class=s>"grey90"</span>, colour <span class=o>=</span> <span class=s>"grey90"</span>, linewidth <span class=o>=</span> <span class=m>1</span><span class=o>)</span>,
    axis.line.y <span class=o>=</span> <span class=nf><a href=https://ggplot2.tidyverse.org/reference/element.html>element_line</a></span><span class=o>(</span>linewidth <span class=o>=</span> <span class=m>1</span><span class=o>)</span>
  <span class=o>)</span>
<span class=nv>p</span>
</code></pre><p><img src=figs/unnamed-chunk-11-1.png width=700px style=display:block;margin:auto></p></div><p>In the (a bit contrived) theme above we see a jarring step between the strip background and the axis line because the border of the strip is clipped to the extent of the strip. We can fix this by turning off clipping:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nv>p</span> <span class=o>+</span> <span class=nf><a href=https://ggplot2.tidyverse.org/reference/theme.html>theme</a></span><span class=o>(</span>strip.clip <span class=o>=</span> <span class=s>"off"</span><span class=o>)</span>
</code></pre><p><img src=figs/unnamed-chunk-12-1.png width=700px style=display:block;margin:auto></p></div><h3 id=justification-in-geom_bargeom_col>Justification in <code>geom_bar()</code>/<code>geom_col()</code>
<a href=#justification-in-geom_bargeom_col><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><p>You can now specify how the bars in
<a href=https://ggplot2.tidyverse.org/reference/geom_bar.html target=_blank rel=noopener><code>geom_bar()</code></a> should be justified with respect to the position on the axis they are tied to:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span class=nv>mtcars_centered</span> <span class=o>&lt;-</span> <span class=nf><a href=https://dplyr.tidyverse.org/reference/mutate.html>mutate</a></span><span class=o>(</span><span class=nv>mtcars</span>, justification <span class=o>=</span> <span class=s>"centered"</span><span class=o>)</span>
<span class=nv>mtcars_left</span> <span class=o>&lt;-</span> <span class=nf><a href=https://dplyr.tidyverse.org/reference/mutate.html>mutate</a></span><span class=o>(</span><span class=nv>mtcars</span>, justification <span class=o>=</span> <span class=s>"left aligned"</span><span class=o>)</span>
<span class=nf><a href=https://ggplot2.tidyverse.org/reference/ggplot.html>ggplot</a></span><span class=o>(</span>mapping <span class=o>=</span> <span class=nf><a href=https://ggplot2.tidyverse.org/reference/aes.html>aes</a></span><span class=o>(</span>x <span class=o>=</span> <span class=nv>gear</span><span class=o>)</span><span class=o>)</span> <span class=o>+</span> 
  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/geom_bar.html>geom_bar</a></span><span class=o>(</span>data <span class=o>=</span> <span class=nv>mtcars_centered</span><span class=o>)</span> <span class=o>+</span> 
  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/geom_bar.html>geom_bar</a></span><span class=o>(</span>data <span class=o>=</span> <span class=nv>mtcars_left</span>, just <span class=o>=</span> <span class=m>0</span><span class=o>)</span> <span class=o>+</span> 
  <span class=nf><a href=https://ggplot2.tidyverse.org/reference/facet_wrap.html>facet_wrap</a></span><span class=o>(</span><span class=o>~</span><span class=nv>justification</span>, ncol <span class=o>=</span> <span class=m>1</span><span class=o>)</span>
</code></pre><p><img src=figs/unnamed-chunk-13-1.png width=700px style=display:block;margin:auto></p></div><p>It goes without saying that you should only do this for good reasons because it goes against how people in general expect bar plots to behave, but for certain layout needs it can be a boon.</p><h2 id=acknowledgements>Acknowledgements
<a href=#acknowledgements><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>As always, this release could not be possible without contributions from our amazing community. A huge thanks goes out to everyone who has helped made ggplot2 3.4.0 a reality:</p><p><a href=https://github.com/92amartins target=_blank rel=noopener>@92amartins</a>,
<a href=https://github.com/acircleda target=_blank rel=noopener>@acircleda</a>,
<a href=https://github.com/AlgaeKat target=_blank rel=noopener>@AlgaeKat</a>,
<a href=https://github.com/andreaskuepfer target=_blank rel=noopener>@andreaskuepfer</a>,
<a href=https://github.com/angleik target=_blank rel=noopener>@angleik</a>,
<a href=https://github.com/aphalo target=_blank rel=noopener>@aphalo</a>,
<a href=https://github.com/artuurC target=_blank rel=noopener>@artuurC</a>,
<a href=https://github.com/asolisc target=_blank rel=noopener>@asolisc</a>,
<a href=https://github.com/baderstine target=_blank rel=noopener>@baderstine</a>,
<a href=https://github.com/basille target=_blank rel=noopener>@basille</a>,
<a href=https://github.com/bergsmat target=_blank rel=noopener>@bergsmat</a>,
<a href=https://github.com/bersbersbers target=_blank rel=noopener>@bersbersbers</a>,
<a href=https://github.com/billdenney target=_blank rel=noopener>@billdenney</a>,
<a href=https://github.com/brianmsm target=_blank rel=noopener>@brianmsm</a>,
<a href=https://github.com/brunomioto target=_blank rel=noopener>@brunomioto</a>,
<a href=https://github.com/bwiernik target=_blank rel=noopener>@bwiernik</a>,
<a href=https://github.com/capnrefsmmat target=_blank rel=noopener>@capnrefsmmat</a>,
<a href=https://github.com/clauswilke target=_blank rel=noopener>@clauswilke</a>,
<a href=https://github.com/cmartin target=_blank rel=noopener>@cmartin</a>,
<a href=https://github.com/ConchuirohAodha target=_blank rel=noopener>@ConchuirohAodha</a>,
<a href=https://github.com/corybrunson target=_blank rel=noopener>@corybrunson</a>,
<a href=https://github.com/DanChaltiel target=_blank rel=noopener>@DanChaltiel</a>,
<a href=https://github.com/DarioS target=_blank rel=noopener>@DarioS</a>,
<a href=https://github.com/Darxor target=_blank rel=noopener>@Darxor</a>,
<a href=https://github.com/davidchall target=_blank rel=noopener>@davidchall</a>,
<a href=https://github.com/davidhodge931 target=_blank rel=noopener>@davidhodge931</a>,
<a href=https://github.com/dhrhzz target=_blank rel=noopener>@dhrhzz</a>,
<a href=https://github.com/DiegoJArg target=_blank rel=noopener>@DiegoJArg</a>,
<a href=https://github.com/DISOhda target=_blank rel=noopener>@DISOhda</a>,
<a href=https://github.com/drtoche target=_blank rel=noopener>@drtoche</a>,
<a href=https://github.com/Enterprise-J target=_blank rel=noopener>@Enterprise-J</a>,
<a href=https://github.com/ewallace target=_blank rel=noopener>@ewallace</a>,
<a href=https://github.com/gbrlrgrs target=_blank rel=noopener>@gbrlrgrs</a>,
<a href=https://github.com/ggrothendieck target=_blank rel=noopener>@ggrothendieck</a>,
<a href=https://github.com/GregorDall target=_blank rel=noopener>@GregorDall</a>,
<a href=https://github.com/hadley target=_blank rel=noopener>@hadley</a>,
<a href=https://github.com/henningpohl target=_blank rel=noopener>@henningpohl</a>,
<a href=https://github.com/Hugh-Mungo target=_blank rel=noopener>@Hugh-Mungo</a>,
<a href=https://github.com/IndrajeetPatil target=_blank rel=noopener>@IndrajeetPatil</a>,
<a href=https://github.com/JacobElder target=_blank rel=noopener>@JacobElder</a>,
<a href=https://github.com/jarauh target=_blank rel=noopener>@jarauh</a>,
<a href=https://github.com/javlon target=_blank rel=noopener>@javlon</a>,
<a href=https://github.com/jdonland target=_blank rel=noopener>@jdonland</a>,
<a href=https://github.com/jessexknight target=_blank rel=noopener>@jessexknight</a>,
<a href=https://github.com/jfunction target=_blank rel=noopener>@jfunction</a>,
<a href=https://github.com/JobNmadu target=_blank rel=noopener>@JobNmadu</a>,
<a href=https://github.com/JoFAM target=_blank rel=noopener>@JoFAM</a>,
<a href=https://github.com/jooyoungseo target=_blank rel=noopener>@jooyoungseo</a>,
<a href=https://github.com/jpquast target=_blank rel=noopener>@jpquast</a>,
<a href=https://github.com/jtlandis target=_blank rel=noopener>@jtlandis</a>,
<a href=https://github.com/junjunlab target=_blank rel=noopener>@junjunlab</a>,
<a href=https://github.com/jwhendy target=_blank rel=noopener>@jwhendy</a>,
<a href=https://github.com/kapsner target=_blank rel=noopener>@kapsner</a>,
<a href=https://github.com/KasperThystrup target=_blank rel=noopener>@KasperThystrup</a>,
<a href=https://github.com/kongdd target=_blank rel=noopener>@kongdd</a>,
<a href=https://github.com/LarryVincent target=_blank rel=noopener>@LarryVincent</a>,
<a href=https://github.com/leonjessen target=_blank rel=noopener>@leonjessen</a>,
<a href=https://github.com/Lisamrshhsr target=_blank rel=noopener>@Lisamrshhsr</a>,
<a href=https://github.com/llrs target=_blank rel=noopener>@llrs</a>,
<a href=https://github.com/LuisLauM target=_blank rel=noopener>@LuisLauM</a>,
<a href=https://github.com/lynn242 target=_blank rel=noopener>@lynn242</a>,
<a href=https://github.com/makrez target=_blank rel=noopener>@makrez</a>,
<a href=https://github.com/MichaelChirico target=_blank rel=noopener>@MichaelChirico</a>,
<a href=https://github.com/michaelgrund target=_blank rel=noopener>@michaelgrund</a>,
<a href=https://github.com/mikeroswell target=_blank rel=noopener>@mikeroswell</a>,
<a href=https://github.com/mjsmith037 target=_blank rel=noopener>@mjsmith037</a>,
<a href=https://github.com/moodymudskipper target=_blank rel=noopener>@moodymudskipper</a>,
<a href=https://github.com/mvanaman target=_blank rel=noopener>@mvanaman</a>,
<a href=https://github.com/netique target=_blank rel=noopener>@netique</a>,
<a href=https://github.com/nfancy target=_blank rel=noopener>@nfancy</a>,
<a href=https://github.com/ngreifer target=_blank rel=noopener>@ngreifer</a>,
<a href=https://github.com/nkehrein target=_blank rel=noopener>@nkehrein</a>,
<a href=https://github.com/olobiolo target=_blank rel=noopener>@olobiolo</a>,
<a href=https://github.com/orgadish target=_blank rel=noopener>@orgadish</a>,
<a href=https://github.com/pachadotdev target=_blank rel=noopener>@pachadotdev</a>,
<a href=https://github.com/padpadpadpad target=_blank rel=noopener>@padpadpadpad</a>,
<a href=https://github.com/paupaiz target=_blank rel=noopener>@paupaiz</a>,
<a href=https://github.com/ProfessorPeregrine target=_blank rel=noopener>@ProfessorPeregrine</a>,
<a href=https://github.com/PursuitOfDataScience target=_blank rel=noopener>@PursuitOfDataScience</a>,
<a href=https://github.com/rikudoukarthik target=_blank rel=noopener>@rikudoukarthik</a>,
<a href=https://github.com/rjake target=_blank rel=noopener>@rjake</a>,
<a href=https://github.com/rressler target=_blank rel=noopener>@rressler</a>,
<a href=https://github.com/SarenT target=_blank rel=noopener>@SarenT</a>,
<a href=https://github.com/Sebas256 target=_blank rel=noopener>@Sebas256</a>,
<a href=https://github.com/shenzhenzth target=_blank rel=noopener>@shenzhenzth</a>,
<a href=https://github.com/skyroam target=_blank rel=noopener>@skyroam</a>,
<a href=https://github.com/stargorg target=_blank rel=noopener>@stargorg</a>,
<a href=https://github.com/stefanoborini target=_blank rel=noopener>@stefanoborini</a>,
<a href=https://github.com/steveharoz target=_blank rel=noopener>@steveharoz</a>,
<a href=https://github.com/stragu target=_blank rel=noopener>@stragu</a>,
<a href=https://github.com/szimmer target=_blank rel=noopener>@szimmer</a>,
<a href=https://github.com/tamas-ferenci target=_blank rel=noopener>@tamas-ferenci</a>,
<a href=https://github.com/teunbrand target=_blank rel=noopener>@teunbrand</a>,
<a href=https://github.com/tfjaeger target=_blank rel=noopener>@tfjaeger</a>,
<a href=https://github.com/thomasp85 target=_blank rel=noopener>@thomasp85</a>,
<a href=https://github.com/thoolihan target=_blank rel=noopener>@thoolihan</a>,
<a href=https://github.com/tjebo target=_blank rel=noopener>@tjebo</a>,
<a href=https://github.com/topepo target=_blank rel=noopener>@topepo</a>,
<a href=https://github.com/trevorld target=_blank rel=noopener>@trevorld</a>,
<a href=https://github.com/tungttnguyen target=_blank rel=noopener>@tungttnguyen</a>,
<a href=https://github.com/twest820 target=_blank rel=noopener>@twest820</a>,
<a href=https://github.com/waynerroper target=_blank rel=noopener>@waynerroper</a>,
<a href=https://github.com/willgearty target=_blank rel=noopener>@willgearty</a>,
<a href=https://github.com/wmacnair target=_blank rel=noopener>@wmacnair</a>,
<a href=https://github.com/wurli target=_blank rel=noopener>@wurli</a>,
<a href=https://github.com/yutannihilation target=_blank rel=noopener>@yutannihilation</a>, and
<a href=https://github.com/zeehio target=_blank rel=noopener>@zeehio</a>.</p></div></div><div class=column25><div class="section hideOnMobile"><div class=sectionTitle>Contents</div><nav id=TableOfContents><ul><li><a href=#hello-linewidth>Hello <code>linewidth</code></a></li><li><a href=#other-breaking-changes>Other breaking changes</a></li><li><a href=#better-errors>Better errors</a></li><li><a href=#vctrs-inside>vctrs inside</a></li><li><a href=#new-features>New features</a></li><li><a href=#acknowledgements>Acknowledgements</a></li></ul></nav></div><div class=section></div></div></div></div></div><div id=rStudioFooter class=band><div class=bandContent><div id=copyright>The tidyverse is proudly supported by <a class=rstudioLogo href=https://posit.co/ aria-label="Posit Homepage"></a></div><div id=logos><a href=https://www.tidyverse.org/google_privacy_policy>Privacy policy</a>
<a href=https://github.com/tidyverse class="footerLogo gitHub" aria-label="Tidyverse GitHub organization"></a><a href=https://twitter.com/hashtag/rstats class="footerLogo twitter" aria-label="rstats hashtag on twitter.com"></a></div></div></div></div></div><script type=application/javascript>var dnt=(navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack);var doNotTrack=(dnt=="1"||dnt=="yes");if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');if(window.sessionStorage){var GA_SESSION_STORAGE_KEY='ga:clientId';ga('create','UA-115082821-1',{'storage':'none','clientId':sessionStorage.getItem(GA_SESSION_STORAGE_KEY)});ga(function(tracker){sessionStorage.setItem(GA_SESSION_STORAGE_KEY,tracker.get('clientId'));});}
ga('set','anonymizeIp',true);ga('send','pageview');}</script></body></html></div></div></body></html>