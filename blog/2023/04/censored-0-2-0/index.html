<!doctype html><html><head><!doctype html><html lang=en-us><link rel=stylesheet href=/css/fonts.css><link rel=stylesheet href=/css/main-site.css><link rel=stylesheet href=/css/fa5-all.css><style type=text/css>body{background-color:#fff;color:#1a1917}a{color:#38577f}a:hover{color:#42709b}a:focus{outline-color:#42709b}.column25-left .sectionTitle a:hover:not(.current),.column16-left .sectionTitle a:hover:not(.current){color:#1a1917}.icon-attribution,.icon-attribution a{color:#1a1917;opacity:75%}#homeContent .band.first{background-color:#fff}#homeContent .band.second{background-color:#fdeba4}#homeContent .band.third{background-color:#fff}#rStudioHeader{background-color:#1a162d;color:#fff}#rStudioHeader .productName{color:#fff}#rStudioHeader .productName:hover,#rStudioHeader .productName:focus{color:#fdeba4}#rStudioHeader #menu .menuItem.a{background-color:#75aadb;color:#fff}#rStudioHeader #menu .menuItem:hover{background-color:#484557;color:#fff}#rStudioHeader #menu .menuItem.current{background-color:#fff;color:#1a162d;text-decoration:none}#rStudioFooter.band{background-color:#767381}#rStudioFooter .bandContent #copyright{color:#e3eef8}table tbody tr:nth-child(even){background-color:#f7faff}table tbody tr:nth-child(odd){background-color:#fff}.latest{border-top:.5em solid <no value>}.event{-moz-box-shadow:0 0 0 0 rgba(0,0,0,.1);-webkit-box-shadow:0 0 0 0 rgba(0,0,0,.1);box-shadow:0 0 0 0 rgba(0,0,0,.1)}.section .event{background-color:#eab0c41a}.section .event{border-top:7pt solid #a19ea936}.section .event a{color:#1a162d}.section .event{color:#404040}</style><link rel=stylesheet href=/css/tidyverse.css><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Hugo 0.71.1"><title>censored 0.2.0</title><meta property="og:title" content="censored 0.2.0"><meta property="og:description" content="censored 0.2.0 is on CRAN! censored has two new engines for random forests  and parametric survival models."><meta property="og:type" content="article"><meta property="og:url" content="https://www.tidyverse.org/blog/2023/04/censored-0-2-0/"><meta property="twitter:card" content="summary_large_image"><meta property="og:title" content="censored 0.2.0 - Tidyverse"><meta property="description" content="censored 0.2.0 is on CRAN! censored has two new engines for random forests  and parametric survival models."><meta property="og:description" content="censored 0.2.0 is on CRAN! censored has two new engines for random forests  and parametric survival models."><meta property="og:image" content="https://www.tidyverse.org/blog/2023/04/censored-0-2-0/thumbnail-sq.jpg"><meta name=twitter:image content="https://www.tidyverse.org/blog/2023/04/censored-0-2-0/thumbnail-wd.jpg"><link rel=apple-touch-icon sizes=180x180 href=/images/favicons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/images/favicons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/images/favicons/favicon-16x16.png><link rel=manifest href=/images/favicons/site.webmanifest><link rel=mask-icon href=/images/favicons/safari-pinned-tab.svg><link rel="shortcut icon" href=/images/favicons/favicon.ico><meta name=msapplication-TileColor content="#da532c"><meta name=msapplication-config href=/images/favicons/browserconfig.xml><script type=text/javascript src=/js/jquery-3.5.1.min.js></script><script type=text/javascript src=/js/site.js></script><link rel=icon href=/images/favicon.ico><script type=text/javascript src=/js/clipboard.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin=anonymous></script><script defer data-domain=tidyverse.org,all.tidyverse.org src=https://plausible.io/js/plausible.js></script></head><body><div id=appTidyverseSite class="shrinkHeader alwaysShrinkHeader"><div id=main><div id=rStudioHeader><nav class=band><div class="innards bandContent"><div><a class=productName href=/%20/>Tidyverse</a></div><div id=menu><div id=menuToggler></div><div id=menuItems><a class=menuItem href=/packages/>Packages</a>
<a class="menuItem current" href=/blog/>Blog</a>
<a class=menuItem href=/learn/>Learn</a>
<a class=menuItem href=/help/>Help</a>
<a class=menuItem href=/contribute/>Contribute</a></div></div></div></nav></div><main><div class="band padForHeader pushFooter"><div class=bandContent><div class="full splitColumns withMobileMargins"><div class=column75><h1 class=article-title>censored 0.2.0</h1><div class=article-header aria-hidden=true><div class=photo><img src=/blog/2023/04/censored-0-2-0/thumbnail-wd.jpg></div><div class=photoCredit>Photo by <a href=https://unsplash.com/photos/TuAZPj1uaZs>Sam Poullain</a></div></div><span class=article-date><i class="fas fa-calendar-day fa-fw"></i>&nbsp;&nbsp;2023/04/19</span><p style=margin-bottom:.5em;margin-top:.85em><i class="fas fa-tags"></i>&nbsp;
<a href=/tags/tidymodels/>tidymodels</a>,
<a href=/tags/parsnip/>parsnip</a>,
<a href=/tags/censored/>censored</a></p><p style=margin-top:.5em><i class="fas fa-user-circle fa-fw"></i>&nbsp;
Hannah Frick</p><div class=article-content><p>We&rsquo;re thrilled to announce the release of
<a href=https://censored.tidymodels.org/ target=_blank rel=noopener>censored</a> 0.2.0. censored is a parsnip extension package for survival models.</p><p>You can install it from CRAN with:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nf><a href=https://rdrr.io/r/utils/install.packages.html>install.packages</a></span><span class=o>(</span><span class=s>"censored"</span><span class=o>)</span></span></code></pre></div><p>This blog post will introduce you to a new argument name, <code>eval_time</code>, and two new engines for fitting random forests and parametric survival models.</p><p>You can see a full list of changes in the
<a href=https://github.com/tidymodels/censored/releases/tag/v0.2.0 target=_blank rel=noopener>release notes</a>.</p><h2 id=introducing-eval_time>Introducing <code>eval_time</code>
<a href=#introducing-eval_time><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>As we continue to add support for survival analysis across tidymodels, we have seen a need to be more explicit about which time we mean when we say &ldquo;time&rdquo;: event time, observed time, censoring time, time at which to predict survival probability at? The last one is a particular mouthful. We now refer to this time as &ldquo;evaluation time.&rdquo; In preparation for dynamic survival performance metrics which can be calculated at different evaluation time points, the argument to set these evaluation time points for
<a href=https://rdrr.io/r/stats/predict.html target=_blank rel=noopener><code>predict()</code></a> is now called <code>eval_time</code> instead of just <code>time</code>.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nv>cox</span> <span class=o>&lt;-</span> <span class=nf><a href=https://parsnip.tidymodels.org/reference/proportional_hazards.html>proportional_hazards</a></span><span class=o>(</span><span class=o>)</span> <span class=o>|&gt;</span> </span>
<span>  <span class=nf><a href=https://parsnip.tidymodels.org/reference/set_engine.html>set_engine</a></span><span class=o>(</span><span class=s>"survival"</span><span class=o>)</span> <span class=o>|&gt;</span> </span>
<span>  <span class=nf><a href=https://parsnip.tidymodels.org/reference/set_args.html>set_mode</a></span><span class=o>(</span><span class=s>"censored regression"</span><span class=o>)</span> <span class=o>|&gt;</span> </span>
<span>  <span class=nf><a href=https://generics.r-lib.org/reference/fit.html>fit</a></span><span class=o>(</span><span class=nf><a href=https://rdrr.io/pkg/survival/man/Surv.html>Surv</a></span><span class=o>(</span><span class=nv>time</span>, <span class=nv>status</span><span class=o>)</span> <span class=o>~</span> <span class=nv>.</span>, data <span class=o>=</span> <span class=nv>lung</span><span class=o>)</span></span>
<span><span class=nv>pred</span> <span class=o>&lt;-</span> <span class=nf><a href=https://rdrr.io/r/stats/predict.html>predict</a></span><span class=o>(</span><span class=nv>cox</span>, <span class=nv>lung</span><span class=o>[</span><span class=m>1</span><span class=o>:</span><span class=m>3</span>, <span class=o>]</span>, type <span class=o>=</span> <span class=s>"survival"</span>, eval_time <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/c.html>c</a></span><span class=o>(</span><span class=m>100</span>, <span class=m>500</span><span class=o>)</span><span class=o>)</span></span>
<span><span class=nv>pred</span></span>
<span><span class=c>#&gt; <span style=color:#555># A tibble: 3 × 1</span></span></span>
<span><span class=c>#&gt;   .pred           </span></span>
<span><span class=c>#&gt;   <span style=color:#555;font-style:italic>&lt;list&gt;</span>          </span></span>
<span><span class=c>#&gt; <span style=color:#555>1</span> <span style=color:#555>&lt;tibble [2 × 2]&gt;</span></span></span>
<span><span class=c>#&gt; <span style=color:#555>2</span> <span style=color:#555>&lt;tibble [2 × 2]&gt;</span></span></span>
<span><span class=c>#&gt; <span style=color:#555>3</span> <span style=color:#555>&lt;tibble [2 × 2]&gt;</span></span></span>
<span></span></code></pre></div><p>The predictions follow the tidymodels principle of one row per observation, and the nested tibble contains the predicted survival probability, <code>.pred_survival</code>, as well as the corresponding evaluation time. The column for the evaluation time is now called <code>.eval_time</code> instead of <code>.time</code>.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nv>pred</span><span class=o>$</span><span class=nv>.pred</span><span class=o>[[</span><span class=m>2</span><span class=o>]</span><span class=o>]</span></span>
<span><span class=c>#&gt; <span style=color:#555># A tibble: 2 × 2</span></span></span>
<span><span class=c>#&gt;   .eval_time .pred_survival</span></span>
<span><span class=c>#&gt;        <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>          <span style=color:#555;font-style:italic>&lt;dbl&gt;</span></span></span>
<span><span class=c>#&gt; <span style=color:#555>1</span>        100          0.910</span></span>
<span><span class=c>#&gt; <span style=color:#555>2</span>        500          0.422</span></span>
<span></span></code></pre></div><h2 id=new-engines>New engines
<a href=#new-engines><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>censored contains engines for parametric, semi-parametric, and tree-based models. This release adds two new engines:</p><ul><li>the <code>"aorsf"</code> engine for random forests via
<a href=https://parsnip.tidymodels.org/reference/rand_forest.html target=_blank rel=noopener><code>rand_forest()</code></a></li><li>the <code>"flexsurvspline"</code> engine for parametric models via
<a href=https://parsnip.tidymodels.org/reference/survival_reg.html target=_blank rel=noopener><code>survival_reg()</code></a></li></ul><h3 id=new-aorsf-engine-for-rand_forest>New <code>"aorsf"</code> engine for <code>rand_forest()</code>
<a href=#new-aorsf-engine-for-rand_forest><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><p>This engine has been contributed by
<a href=https://github.com/bcjaeger target=_blank rel=noopener>Byron Jaeger</a> and enables users to fit oblique random survival forests with the aorsf package. What&rsquo;s with the <em>oblique</em> you ask?</p><p>Oblique describes how the decision trees that form the random forest make their splits at each node. If the split is based on a single predictor, the resulting tree is called <em>axis-based</em> because the split is perpendicular to the axis of the predictor. If the split is based on a linear combination of predictors, there is a lot more flexibility in how the data is split: the split does not need to be perpendicular to any of the predictor axes. Such trees are called <em>oblique</em>.</p><p>The documentation for the
<a href=https://docs.ropensci.org/aorsf target=_blank rel=noopener>aorsf</a> package includes a nice illustration of this with the splits for an axis-based tree on the left and an oblique tree on the right:</p><p><img src=https://docs.ropensci.org/aorsf/reference/figures/tree_axis_v_oblique.png alt="Two scatter plots of data with two predictors, X1 and X2, and two classes, coded as pink dots and orange squares. The lefthand plot shows the splits of an axis-based decision tree which are at a right angle to the axis. The resulting partition generally separates the classes well but not perfectly. The righthand plot shows the splits of an oblique tree which achieves perfect separation on this example because it can cut across the predictor space diagnonally."></p><p>To fit such a model, set the engine for a random forest to <code>"aorsf"</code>:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nv>lung</span> <span class=o>&lt;-</span> <span class=nf><a href=https://rdrr.io/r/stats/na.fail.html>na.omit</a></span><span class=o>(</span><span class=nv>lung</span><span class=o>)</span></span>
<span></span>
<span><span class=nv>forest</span> <span class=o>&lt;-</span> <span class=nf><a href=https://parsnip.tidymodels.org/reference/rand_forest.html>rand_forest</a></span><span class=o>(</span><span class=o>)</span> <span class=o>|&gt;</span> </span>
<span>  <span class=nf><a href=https://parsnip.tidymodels.org/reference/set_engine.html>set_engine</a></span><span class=o>(</span><span class=s>"aorsf"</span><span class=o>)</span> <span class=o>|&gt;</span> </span>
<span>  <span class=nf><a href=https://parsnip.tidymodels.org/reference/set_args.html>set_mode</a></span><span class=o>(</span><span class=s>"censored regression"</span><span class=o>)</span> <span class=o>|&gt;</span> </span>
<span>  <span class=nf><a href=https://generics.r-lib.org/reference/fit.html>fit</a></span><span class=o>(</span><span class=nf><a href=https://rdrr.io/pkg/survival/man/Surv.html>Surv</a></span><span class=o>(</span><span class=nv>time</span>, <span class=nv>status</span><span class=o>)</span> <span class=o>~</span> <span class=nv>.</span>, data <span class=o>=</span> <span class=nv>lung</span><span class=o>)</span></span>
<span></span>
<span><span class=nv>pred</span> <span class=o>&lt;-</span> <span class=nf><a href=https://rdrr.io/r/stats/predict.html>predict</a></span><span class=o>(</span><span class=nv>forest</span>, <span class=nv>lung</span><span class=o>[</span><span class=m>1</span><span class=o>:</span><span class=m>3</span>, <span class=o>]</span>, type <span class=o>=</span> <span class=s>"survival"</span>, eval_time <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/c.html>c</a></span><span class=o>(</span><span class=m>100</span>, <span class=m>500</span><span class=o>)</span><span class=o>)</span></span>
<span><span class=nv>pred</span><span class=o>$</span><span class=nv>.pred</span><span class=o>[[</span><span class=m>1</span><span class=o>]</span><span class=o>]</span></span>
<span><span class=c>#&gt; <span style=color:#555># A tibble: 2 × 2</span></span></span>
<span><span class=c>#&gt;   .eval_time .pred_survival</span></span>
<span><span class=c>#&gt;        <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>          <span style=color:#555;font-style:italic>&lt;dbl&gt;</span></span></span>
<span><span class=c>#&gt; <span style=color:#555>1</span>        100          0.928</span></span>
<span><span class=c>#&gt; <span style=color:#555>2</span>        500          0.368</span></span>
<span></span></code></pre></div><h3 id=new-flexsurvspline-engine-for-survival_reg>New <code>"flexsurvspline"</code> engine for <code>survival_reg()</code>
<a href=#new-flexsurvspline-engine-for-survival_reg><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><p>This engine has been contributed by
<a href=https://github.com/mattwarkentin target=_blank rel=noopener>Matt Warkentin</a> and enables users to fit a parametric survival model with splines via
<a href=https://rdrr.io/pkg/flexsurv/man/flexsurvspline.html target=_blank rel=noopener><code>flexsurv::flexsurvspline()</code></a>.</p><p>This model uses natural cubic splines to model a transformation of the survival function, e.g., the log cumulative hazard. This gives a lot more flexibility to a parametric model allowing us, for example, to represent more irregular hazard curves. Let&rsquo;s illustrate that with a data set of survival times of breast cancer patients, based on the example from
<a href=https://www.jstatsoft.org/article/view/v070i08 target=_blank rel=noopener>Jackson (2016)</a>.</p><p>The flexibility of the model is governed by <code>k</code>, the number of knots in the spline. We set <code>scale = "odds"</code> for a proportional hazards model.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nf><a href=https://rdrr.io/r/utils/data.html>data</a></span><span class=o>(</span><span class=nv>bc</span>, package <span class=o>=</span> <span class=s>"flexsurv"</span><span class=o>)</span></span>
<span></span>
<span><span class=nv>fit_splines</span> <span class=o>&lt;-</span> <span class=nf><a href=https://parsnip.tidymodels.org/reference/survival_reg.html>survival_reg</a></span><span class=o>(</span><span class=o>)</span> <span class=o>|&gt;</span> </span>
<span>  <span class=nf><a href=https://parsnip.tidymodels.org/reference/set_engine.html>set_engine</a></span><span class=o>(</span><span class=s>"flexsurvspline"</span>, k <span class=o>=</span> <span class=m>5</span>, scale <span class=o>=</span> <span class=s>"odds"</span><span class=o>)</span> <span class=o>|&gt;</span> </span>
<span>  <span class=nf><a href=https://generics.r-lib.org/reference/fit.html>fit</a></span><span class=o>(</span><span class=nf><a href=https://rdrr.io/pkg/survival/man/Surv.html>Surv</a></span><span class=o>(</span><span class=nv>recyrs</span>, <span class=nv>censrec</span><span class=o>)</span> <span class=o>~</span> <span class=nv>group</span>, data <span class=o>=</span> <span class=nv>bc</span><span class=o>)</span></span></code></pre></div><p>For comparison, we also fit a parametric model without splines.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nv>fit_gengamma</span> <span class=o>&lt;-</span> <span class=nf><a href=https://parsnip.tidymodels.org/reference/survival_reg.html>survival_reg</a></span><span class=o>(</span>dist <span class=o>=</span> <span class=s>"gengamma"</span><span class=o>)</span> <span class=o>|&gt;</span> </span>
<span>  <span class=nf><a href=https://parsnip.tidymodels.org/reference/set_engine.html>set_engine</a></span><span class=o>(</span><span class=s>"flexsurv"</span><span class=o>)</span> <span class=o>|&gt;</span> </span>
<span>  <span class=nf><a href=https://generics.r-lib.org/reference/fit.html>fit</a></span><span class=o>(</span><span class=nf><a href=https://rdrr.io/pkg/survival/man/Surv.html>Surv</a></span><span class=o>(</span><span class=nv>recyrs</span>, <span class=nv>censrec</span><span class=o>)</span> <span class=o>~</span> <span class=nv>group</span>, data <span class=o>=</span> <span class=nv>bc</span><span class=o>)</span></span></code></pre></div><p>We can predict the hazard for the three levels of the prognostic <code>group</code>.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nv>bc_groups</span> <span class=o>&lt;-</span> <span class=nf>tibble</span><span class=o>(</span>group <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/c.html>c</a></span><span class=o>(</span><span class=s>"Poor"</span>,<span class=s>"Medium"</span>,<span class=s>"Good"</span><span class=o>)</span><span class=o>)</span></span>
<span></span>
<span><span class=nv>pred_splines</span> <span class=o>&lt;-</span> <span class=nf><a href=https://rdrr.io/r/stats/predict.html>predict</a></span><span class=o>(</span><span class=nv>fit_splines</span>, new_data <span class=o>=</span> <span class=nv>bc_groups</span>, type <span class=o>=</span> <span class=s>"hazard"</span>, </span>
<span>                        eval_time <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/seq.html>seq</a></span><span class=o>(</span><span class=m>0.1</span>, <span class=m>8</span>, by <span class=o>=</span> <span class=m>0.1</span><span class=o>)</span><span class=o>)</span> <span class=o>|&gt;</span> </span>
<span>  <span class=nf>mutate</span><span class=o>(</span>model <span class=o>=</span> <span class=s>"splines"</span><span class=o>)</span> <span class=o>|&gt;</span> </span>
<span>  <span class=nf>bind_cols</span><span class=o>(</span><span class=nv>bc_groups</span><span class=o>)</span></span>
<span></span>
<span><span class=nv>pred_gengamma</span> <span class=o>&lt;-</span> <span class=nf><a href=https://rdrr.io/r/stats/predict.html>predict</a></span><span class=o>(</span><span class=nv>fit_gengamma</span>, new_data <span class=o>=</span> <span class=nv>bc_groups</span>, type <span class=o>=</span> <span class=s>"hazard"</span>, </span>
<span>                         eval_time <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/seq.html>seq</a></span><span class=o>(</span><span class=m>0.1</span>, <span class=m>8</span>, by <span class=o>=</span> <span class=m>0.1</span><span class=o>)</span><span class=o>)</span> <span class=o>|&gt;</span> </span>
<span>  <span class=nf>mutate</span><span class=o>(</span>model <span class=o>=</span> <span class=s>"gengamma"</span><span class=o>)</span> <span class=o>|&gt;</span> </span>
<span>  <span class=nf>bind_cols</span><span class=o>(</span><span class=nv>bc_groups</span><span class=o>)</span></span></code></pre></div><p>Plotting the predictions of both models shows a lot more flexibility in the splines model.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nf>bind_rows</span><span class=o>(</span><span class=nv>pred_splines</span>, <span class=nv>pred_gengamma</span><span class=o>)</span> <span class=o><a href=https://magrittr.tidyverse.org/reference/pipe.html>%&gt;%</a></span> </span>
<span>  <span class=nf>mutate</span><span class=o>(</span>group <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/factor.html>factor</a></span><span class=o>(</span><span class=nv>group</span>, levels <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/c.html>c</a></span><span class=o>(</span><span class=s>"Poor"</span>,<span class=s>"Medium"</span>,<span class=s>"Good"</span><span class=o>)</span><span class=o>)</span><span class=o>)</span> <span class=o>|&gt;</span> </span>
<span>  <span class=nf>tidyr</span><span class=nf>::</span><span class=nf><a href=https://tidyr.tidyverse.org/reference/unnest.html>unnest</a></span><span class=o>(</span>cols <span class=o>=</span> <span class=nv>.pred</span><span class=o>)</span> <span class=o>|&gt;</span> </span>
<span>  <span class=nf>ggplot</span><span class=o>(</span><span class=o>)</span> <span class=o>+</span></span>
<span>  <span class=nf>geom_line</span><span class=o>(</span><span class=nf>aes</span><span class=o>(</span>x <span class=o>=</span> <span class=nv>.eval_time</span>, y <span class=o>=</span> <span class=nv>.pred_hazard</span>, group <span class=o>=</span> <span class=nv>group</span>, col <span class=o>=</span> <span class=nv>group</span><span class=o>)</span><span class=o>)</span> <span class=o>+</span></span>
<span>  <span class=nf>facet_wrap</span><span class=o>(</span><span class=o>~</span> <span class=nv>model</span><span class=o>)</span></span>
</code></pre><p><img src=figs/unnamed-chunk-8-1.png alt="Two panels side by side, showing the predicted hazard curves for the three prognostic groups from the parametric model on the left and the spline model on the right. The curves for the spline model show more wiggliness, having more flexibility to adapt to the data than the curves from the parametric model which have to follow a generalized gamma distribution." width=700px style=display:block;margin:auto></p></div><h2 id=acknowledgements>Acknowledgements
<a href=#acknowledgements><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>Special thanks to Matt Warkentin and Byron Jaeger for the new engines! A big thank you to all the people who have contributed to censored since the release of v0.1.0:</p><p><a href=https://github.com/bcjaeger target=_blank rel=noopener>@bcjaeger</a>,
<a href=https://github.com/hfrick target=_blank rel=noopener>@hfrick</a>,
<a href=https://github.com/mattwarkentin target=_blank rel=noopener>@mattwarkentin</a>,
<a href=https://github.com/simonpcouch target=_blank rel=noopener>@simonpcouch</a>,
<a href=https://github.com/therneau target=_blank rel=noopener>@therneau</a>, and
<a href=https://github.com/topepo target=_blank rel=noopener>@topepo</a>.</p></div></div><div class=column25><div class="section hideOnMobile"><div class=sectionTitle>Contents</div><nav id=TableOfContents><ul><li><a href=#introducing-eval_time>Introducing <code>eval_time</code></a></li><li><a href=#new-engines>New engines</a></li><li><a href=#acknowledgements>Acknowledgements</a></li></ul></nav></div><div class=section></div></div></div></div></div><div id=rStudioFooter class=band><div class=bandContent><div id=copyright>The tidyverse is proudly supported by <a class=rstudioLogo href=https://posit.co/ aria-label="Posit Homepage"></a></div><div id=logos><a href=https://www.tidyverse.org/google_privacy_policy>Privacy policy</a>
<a href=https://github.com/tidyverse class="footerLogo gitHub" aria-label="Tidyverse GitHub organization"></a><a href=https://twitter.com/hashtag/rstats class="footerLogo twitter" aria-label="rstats hashtag on twitter.com"></a></div></div></div></div></div><script src=/js/math-code.js></script><script type=text/x-mathjax-config>
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    processEscapes: true
  }
});
</script><script async src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script type=application/javascript>var dnt=(navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack);var doNotTrack=(dnt=="1"||dnt=="yes");if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');if(window.sessionStorage){var GA_SESSION_STORAGE_KEY='ga:clientId';ga('create','UA-115082821-1',{'storage':'none','clientId':sessionStorage.getItem(GA_SESSION_STORAGE_KEY)});ga(function(tracker){sessionStorage.setItem(GA_SESSION_STORAGE_KEY,tracker.get('clientId'));});}
ga('set','anonymizeIp',true);ga('send','pageview');}</script></body></html></div></div></body></html>