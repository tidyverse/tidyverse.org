<!doctype html><html><head><!doctype html><html lang=en-us><link rel=stylesheet href=/css/fonts.css><link rel=stylesheet href=/css/main-site.css><link rel=stylesheet href=/css/fa5-all.css><style type=text/css>body{background-color:#fff;color:#1a1917}a{color:#38577f}a:hover{color:#42709b}a:focus{outline-color:#42709b}.column25-left .sectionTitle a:hover:not(.current),.column16-left .sectionTitle a:hover:not(.current){color:#1a1917}.icon-attribution,.icon-attribution a{color:#1a1917;opacity:75%}#homeContent .band.first{background-color:#fff}#homeContent .band.second{background-color:#fdeba4}#homeContent .band.third{background-color:#fff}#rStudioHeader{background-color:#1a162d;color:#fff}#rStudioHeader .productName{color:#fff}#rStudioHeader .productName:hover,#rStudioHeader .productName:focus{color:#fdeba4}#rStudioHeader #menu .menuItem.a{background-color:#75aadb;color:#fff}#rStudioHeader #menu .menuItem:hover{background-color:#484557;color:#fff}#rStudioHeader #menu .menuItem.current{background-color:#fff;color:#1a162d;text-decoration:none}#rStudioFooter.band{background-color:#767381}#rStudioFooter .bandContent #copyright{color:#e3eef8}table tbody tr:nth-child(even){background-color:#f7faff}table tbody tr:nth-child(odd){background-color:#fff}.latest{border-top:.5em solid <no value>}.event{-moz-box-shadow:0 0 0 0 rgba(0,0,0,.1);-webkit-box-shadow:0 0 0 0 rgba(0,0,0,.1);box-shadow:0 0 0 0 rgba(0,0,0,.1)}.section .event{background-color:#eab0c41a}.section .event{border-top:7pt solid #a19ea936}.section .event a{color:#1a162d}.section .event{color:#404040}</style><link rel=stylesheet href=/css/tidyverse.css><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Hugo 0.71.1"><title>dplyr 1.1.0: Joins</title><meta property="og:title" content="dplyr 1.1.0: Joins"><meta property="og:description" content="In dplyr 1.1.0, joins have been greatly reworked, including a new way to specify join columns, support for inequality, rolling, and overlap joins, and two new quality control arguments."><meta property="og:type" content="article"><meta property="og:url" content="https://www.tidyverse.org/blog/2023/01/dplyr-1-1-0-joins/"><meta property="twitter:card" content="summary_large_image"><meta property="og:title" content="dplyr 1.1.0: Joins - Tidyverse"><meta property="description" content="In dplyr 1.1.0, joins have been greatly reworked, including a new way to specify join columns, support for inequality, rolling, and overlap joins, and two new quality control arguments."><meta property="og:description" content="In dplyr 1.1.0, joins have been greatly reworked, including a new way to specify join columns, support for inequality, rolling, and overlap joins, and two new quality control arguments."><meta property="og:image" content="https://www.tidyverse.org/blog/2023/01/dplyr-1-1-0-joins/thumbnail-sq.jpg"><meta name=twitter:image content="https://www.tidyverse.org/blog/2023/01/dplyr-1-1-0-joins/thumbnail-wd.jpg"><link rel=apple-touch-icon sizes=180x180 href=/images/favicons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/images/favicons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/images/favicons/favicon-16x16.png><link rel=manifest href=/images/favicons/site.webmanifest><link rel=mask-icon href=/images/favicons/safari-pinned-tab.svg><link rel="shortcut icon" href=/images/favicons/favicon.ico><meta name=msapplication-TileColor content="#da532c"><meta name=msapplication-config href=/images/favicons/browserconfig.xml><script type=text/javascript src=/js/jquery-3.5.1.min.js></script><script type=text/javascript src=/js/site.js></script><link rel=icon href=/images/favicon.ico><script type=text/javascript src=/js/clipboard.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin=anonymous></script><script defer data-domain=tidyverse.org,all.tidyverse.org src=https://plausible.io/js/plausible.js></script></head><body><div id=appTidyverseSite class="shrinkHeader alwaysShrinkHeader"><div id=main><div id=rStudioHeader><nav class=band><div class="innards bandContent"><div><a class=productName href=/%20/>Tidyverse</a></div><div id=menu><div id=menuToggler></div><div id=menuItems><a class=menuItem href=/packages/>Packages</a>
<a class="menuItem current" href=/blog/>Blog</a>
<a class=menuItem href=/learn/>Learn</a>
<a class=menuItem href=/help/>Help</a>
<a class=menuItem href=/contribute/>Contribute</a></div></div></div></nav></div><main><div class="band padForHeader pushFooter"><div class=bandContent><div class="full splitColumns withMobileMargins"><div class=column75><h1 class=article-title>dplyr 1.1.0: Joins</h1><div class=article-header aria-hidden=true><div class=photo><img src=/blog/2023/01/dplyr-1-1-0-joins/thumbnail-wd.jpg></div><div class=photoCredit>Photo by <a href=https://unsplash.com/photos/Cecb0_8Hx-o>Duy Pham</a></div></div><span class=article-date><i class="fas fa-calendar-day fa-fw"></i>&nbsp;&nbsp;2023/01/31</span><p style=margin-bottom:.5em;margin-top:.85em><i class="fas fa-tags"></i>&nbsp;
<a href=/tags/dplyr/>dplyr</a>,
<a href=/tags/dplyr-1-1-0/>dplyr-1-1-0</a></p><p style=margin-top:.5em><i class="fas fa-user-circle fa-fw"></i>&nbsp;
Davis Vaughan</p><div class=article-content><p><a href=https://dplyr.tidyverse.org/news/index.html#dplyr-110 target=_blank rel=noopener>dplyr 1.1.0</a> is out now! This is a giant release, so we&rsquo;re splitting the release announcement up into four blog posts which we&rsquo;ll post over the course of this week. Today, we&rsquo;re focusing on joins, including the new
<a href=https://dplyr.tidyverse.org/reference/join_by.html target=_blank rel=noopener><code>join_by()</code></a> syntax, new warnings for multiple matches, inequality joins, rolling joins, and new tools for handling unmatched rows. To learn more about joins, you might want to read the updated
<a href=https://r4ds.hadley.nz/joins.html target=_blank rel=noopener>joins chapter</a> in the upcoming 2nd edition of
<a href=https://r4ds.hadley.nz target=_blank rel=noopener>R for Data Science</a>.</p><p>This version of dplyr includes a number of features inspired by our
<a href=https://cran.r-project.org/web/packages/data.table/index.html target=_blank rel=noopener>data.table</a> friends. The inequality and rolling joins we discuss today were popularized in R by data.table, and greatly inspired our own implementation.</p><p>To see the other blog posts in this series, head
<a href=https://www.tidyverse.org/tags/dplyr-1-1-0/ target=_blank rel=noopener>here</a>.</p><p>You can install it from CRAN with:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nf><a href=https://rdrr.io/r/utils/install.packages.html>install.packages</a></span><span class=o>(</span><span class=s>"dplyr"</span><span class=o>)</span></span></code></pre></div><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=kr><a href=https://rdrr.io/r/base/library.html>library</a></span><span class=o>(</span><span class=nv><a href=https://dplyr.tidyverse.org>dplyr</a></span><span class=o>)</span></span></code></pre></div><h2 id=join_by><code>join_by()</code>
<a href=#join_by><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>Consider the following two tables, <code>transactions</code> and <code>companies</code>. <code>transactions</code> tracks sales across various years for different companies, and <code>companies</code> connects the short company id to its actual company name - either Patagonia (a fellow B-Corp!) or RStudio.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nv>transactions</span> <span class=o>&lt;-</span> <span class=nf><a href=https://tibble.tidyverse.org/reference/tibble.html>tibble</a></span><span class=o>(</span></span>
<span>  company <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/c.html>c</a></span><span class=o>(</span><span class=s>"A"</span>, <span class=s>"A"</span>, <span class=s>"B"</span>, <span class=s>"B"</span><span class=o>)</span>,</span>
<span>  year <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/c.html>c</a></span><span class=o>(</span><span class=m>2019</span>, <span class=m>2020</span>, <span class=m>2021</span>, <span class=m>2023</span><span class=o>)</span>,</span>
<span>  revenue <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/c.html>c</a></span><span class=o>(</span><span class=m>50</span>, <span class=m>4</span>, <span class=m>10</span>, <span class=m>12</span><span class=o>)</span></span>
<span><span class=o>)</span></span>
<span><span class=nv>transactions</span></span>
<span><span class=c>#&gt; <span style=color:#555># A tibble: 4 Ã— 3</span></span></span>
<span><span class=c>#&gt;   company  year revenue</span></span>
<span><span class=c>#&gt;   <span style=color:#555;font-style:italic>&lt;chr&gt;</span>   <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>   <span style=color:#555;font-style:italic>&lt;dbl&gt;</span></span></span>
<span><span class=c>#&gt; <span style=color:#555>1</span> A        <span style=text-decoration:underline>2</span>019      50</span></span>
<span><span class=c>#&gt; <span style=color:#555>2</span> A        <span style=text-decoration:underline>2</span>020       4</span></span>
<span><span class=c>#&gt; <span style=color:#555>3</span> B        <span style=text-decoration:underline>2</span>021      10</span></span>
<span><span class=c>#&gt; <span style=color:#555>4</span> B        <span style=text-decoration:underline>2</span>023      12</span></span>
<span></span><span></span>
<span><span class=nv>companies</span> <span class=o>&lt;-</span> <span class=nf><a href=https://tibble.tidyverse.org/reference/tibble.html>tibble</a></span><span class=o>(</span></span>
<span>  id <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/c.html>c</a></span><span class=o>(</span><span class=s>"A"</span>, <span class=s>"B"</span><span class=o>)</span>,</span>
<span>  name <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/c.html>c</a></span><span class=o>(</span><span class=s>"Patagonia"</span>, <span class=s>"RStudio"</span><span class=o>)</span></span>
<span><span class=o>)</span></span>
<span><span class=nv>companies</span></span>
<span><span class=c>#&gt; <span style=color:#555># A tibble: 2 Ã— 2</span></span></span>
<span><span class=c>#&gt;   id    name     </span></span>
<span><span class=c>#&gt;   <span style=color:#555;font-style:italic>&lt;chr&gt;</span> <span style=color:#555;font-style:italic>&lt;chr&gt;</span>    </span></span>
<span><span class=c>#&gt; <span style=color:#555>1</span> A     Patagonia</span></span>
<span><span class=c>#&gt; <span style=color:#555>2</span> B     RStudio</span></span>
<span></span></code></pre></div><p>To join these two tables together, we might use an inner join:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nv>transactions</span> <span class=o>|&gt;</span> </span>
<span>  <span class=nf><a href=https://dplyr.tidyverse.org/reference/mutate-joins.html>inner_join</a></span><span class=o>(</span><span class=nv>companies</span>, by <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/c.html>c</a></span><span class=o>(</span>company <span class=o>=</span> <span class=s>"id"</span><span class=o>)</span><span class=o>)</span></span>
<span><span class=c>#&gt; <span style=color:#555># A tibble: 4 Ã— 4</span></span></span>
<span><span class=c>#&gt;   company  year revenue name     </span></span>
<span><span class=c>#&gt;   <span style=color:#555;font-style:italic>&lt;chr&gt;</span>   <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>   <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;chr&gt;</span>    </span></span>
<span><span class=c>#&gt; <span style=color:#555>1</span> A        <span style=text-decoration:underline>2</span>019      50 Patagonia</span></span>
<span><span class=c>#&gt; <span style=color:#555>2</span> A        <span style=text-decoration:underline>2</span>020       4 Patagonia</span></span>
<span><span class=c>#&gt; <span style=color:#555>3</span> B        <span style=text-decoration:underline>2</span>021      10 RStudio  </span></span>
<span><span class=c>#&gt; <span style=color:#555>4</span> B        <span style=text-decoration:underline>2</span>023      12 RStudio</span></span>
<span></span></code></pre></div><p>This works great, but has always felt a little clunky. Specifying <code>c(company = "id")</code> is a little awkward because it uses <code>=</code>, not <code>==</code>: here we&rsquo;re asserting that we want <code>company</code> to equal <code>id</code>, not naming a function argument or performing assignment. We&rsquo;ve improved on this with a new helper,
<a href=https://dplyr.tidyverse.org/reference/join_by.html target=_blank rel=noopener><code>join_by()</code></a>, which takes expressions in a way that allows you to more naturally express this join:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nf><a href=https://dplyr.tidyverse.org/reference/join_by.html>join_by</a></span><span class=o>(</span><span class=nv>company</span> <span class=o>==</span> <span class=nv>id</span><span class=o>)</span></span>
<span><span class=c>#&gt; Join By:</span></span>
<span><span class=c>#&gt; - company == id</span></span>
<span></span></code></pre></div><p>This <em>join specification</em> can be used as the <code>by</code> argument in any of the <code>*_join()</code> functions:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nv>transactions</span> <span class=o>|&gt;</span> </span>
<span>  <span class=nf><a href=https://dplyr.tidyverse.org/reference/mutate-joins.html>inner_join</a></span><span class=o>(</span><span class=nv>companies</span>, by <span class=o>=</span> <span class=nf><a href=https://dplyr.tidyverse.org/reference/join_by.html>join_by</a></span><span class=o>(</span><span class=nv>company</span> <span class=o>==</span> <span class=nv>id</span><span class=o>)</span><span class=o>)</span></span>
<span><span class=c>#&gt; <span style=color:#555># A tibble: 4 Ã— 4</span></span></span>
<span><span class=c>#&gt;   company  year revenue name     </span></span>
<span><span class=c>#&gt;   <span style=color:#555;font-style:italic>&lt;chr&gt;</span>   <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>   <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;chr&gt;</span>    </span></span>
<span><span class=c>#&gt; <span style=color:#555>1</span> A        <span style=text-decoration:underline>2</span>019      50 Patagonia</span></span>
<span><span class=c>#&gt; <span style=color:#555>2</span> A        <span style=text-decoration:underline>2</span>020       4 Patagonia</span></span>
<span><span class=c>#&gt; <span style=color:#555>3</span> B        <span style=text-decoration:underline>2</span>021      10 RStudio  </span></span>
<span><span class=c>#&gt; <span style=color:#555>4</span> B        <span style=text-decoration:underline>2</span>023      12 RStudio</span></span>
<span></span></code></pre></div><p>This small quality of life improvement is just one of the many new features that come with
<a href=https://dplyr.tidyverse.org/reference/join_by.html target=_blank rel=noopener><code>join_by()</code></a>. We&rsquo;ll look at more of these next.</p><h2 id=multiple-matches>Multiple matches
<a href=#multiple-matches><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><hr><p><strong>Update</strong>: As of March 22, dplyr 1.1.1 is available on CRAN, which alters the behavior of multiple match detection so that you see warnings much less often. Read
<a href=/blog/2023/03/dplyr-1-1-1/>all about it</a> or install it now with <code>install.packages("dplyr")</code>.</p><hr><p>To make things a little more interesting, we&rsquo;ll add one more column to <code>companies</code>, and one more row:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nv>companies</span> <span class=o>&lt;-</span> <span class=nf><a href=https://tibble.tidyverse.org/reference/tibble.html>tibble</a></span><span class=o>(</span></span>
<span>  id <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/c.html>c</a></span><span class=o>(</span><span class=s>"A"</span>, <span class=s>"B"</span>, <span class=s>"B"</span><span class=o>)</span>,</span>
<span>  since <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/c.html>c</a></span><span class=o>(</span><span class=m>1973</span>, <span class=m>2009</span>, <span class=m>2022</span><span class=o>)</span>,</span>
<span>  name <span class=o>=</span> <span class=nf><a href=https://rdrr.io/r/base/c.html>c</a></span><span class=o>(</span><span class=s>"Patagonia"</span>, <span class=s>"RStudio"</span>, <span class=s>"Posit"</span><span class=o>)</span></span>
<span><span class=o>)</span></span>
<span></span>
<span><span class=nv>companies</span></span>
<span><span class=c>#&gt; <span style=color:#555># A tibble: 3 Ã— 3</span></span></span>
<span><span class=c>#&gt;   id    since name     </span></span>
<span><span class=c>#&gt;   <span style=color:#555;font-style:italic>&lt;chr&gt;</span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;chr&gt;</span>    </span></span>
<span><span class=c>#&gt; <span style=color:#555>1</span> A      <span style=text-decoration:underline>1</span>973 Patagonia</span></span>
<span><span class=c>#&gt; <span style=color:#555>2</span> B      <span style=text-decoration:underline>2</span>009 RStudio  </span></span>
<span><span class=c>#&gt; <span style=color:#555>3</span> B      <span style=text-decoration:underline>2</span>022 Posit</span></span>
<span></span></code></pre></div><p>This table now also tracks name changes that have happened over the course of a company&rsquo;s history. In 2022, we changed our name from RStudio to Posit, so we&rsquo;ve tracked that as an additional row in our dataset. Note that both RStudio and Posit are given an <code>id</code> of <code>B</code>, which links back to the <code>transactions</code> table.</p><p>If we were to join these two tables together, ideally we&rsquo;d bring over the name that was in effect when the transaction took place. For example, for the transaction in 2021, the company was still RStudio, so ideally we&rsquo;d only match up against the RStudio row in <code>companies</code>. If we colored the expected matches, they&rsquo;d look something like this:</p><p><img src=img/ideal-join.png alt></p><p>How can we do this? We can try the same join from before, but we won&rsquo;t like the results:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nv>faulty</span> <span class=o>&lt;-</span> <span class=nv>transactions</span> <span class=o>|&gt;</span> </span>
<span>  <span class=nf><a href=https://dplyr.tidyverse.org/reference/mutate-joins.html>inner_join</a></span><span class=o>(</span><span class=nv>companies</span>, by <span class=o>=</span> <span class=nf><a href=https://dplyr.tidyverse.org/reference/join_by.html>join_by</a></span><span class=o>(</span><span class=nv>company</span> <span class=o>==</span> <span class=nv>id</span><span class=o>)</span><span class=o>)</span></span>
<span><span class=c>#&gt; Warning in inner_join(transactions, companies, by = join_by(company == id)): Each row in `x` is expected to match at most 1 row in `y`.</span></span>
<span><span class=c>#&gt; <span style=color:#0bb>â„¹</span> Row 3 of `x` matches multiple rows.</span></span>
<span><span class=c>#&gt; <span style=color:#0bb>â„¹</span> If multiple matches are expected, set `multiple = "all"` to silence this</span></span>
<span><span class=c>#&gt;   warning.</span></span>
<span></span><span></span>
<span><span class=nv>faulty</span></span>
<span><span class=c>#&gt; <span style=color:#555># A tibble: 6 Ã— 5</span></span></span>
<span><span class=c>#&gt;   company  year revenue since name     </span></span>
<span><span class=c>#&gt;   <span style=color:#555;font-style:italic>&lt;chr&gt;</span>   <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>   <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;chr&gt;</span>    </span></span>
<span><span class=c>#&gt; <span style=color:#555>1</span> A        <span style=text-decoration:underline>2</span>019      50  <span style=text-decoration:underline>1</span>973 Patagonia</span></span>
<span><span class=c>#&gt; <span style=color:#555>2</span> A        <span style=text-decoration:underline>2</span>020       4  <span style=text-decoration:underline>1</span>973 Patagonia</span></span>
<span><span class=c>#&gt; <span style=color:#555>3</span> B        <span style=text-decoration:underline>2</span>021      10  <span style=text-decoration:underline>2</span>009 RStudio  </span></span>
<span><span class=c>#&gt; <span style=color:#555>4</span> B        <span style=text-decoration:underline>2</span>021      10  <span style=text-decoration:underline>2</span>022 Posit    </span></span>
<span><span class=c>#&gt; <span style=color:#555>5</span> B        <span style=text-decoration:underline>2</span>023      12  <span style=text-decoration:underline>2</span>009 RStudio  </span></span>
<span><span class=c>#&gt; <span style=color:#555>6</span> B        <span style=text-decoration:underline>2</span>023      12  <span style=text-decoration:underline>2</span>022 Posit</span></span>
<span></span></code></pre></div><p>Company <code>A</code> matches correctly, but since we only joined on the company id, we get <em>multiple matches</em> for each of company <code>B</code>'s transactions and end up with more rows than we started with. This is a problem, as we were expecting a 1:1 match for each row in <code>transactions</code>. Multiple matches in equality joins like this one are typically unexpected (even though they are baked in to SQL) so we&rsquo;ve also added a new warning to alert you when this happens. If multiple matches are expected, you can explicitly set <code>multiple = "all"</code> to silence this warning. This also serves as a code &ldquo;sign post&rdquo; for future readers of your code to let them know that this is a join that is expected to increase the number of rows in the data. If multiple matches <em>aren&rsquo;t</em> expected, you can also set <code>multiple = "error"</code> to immediately halt the analysis. We expect this will be useful as a quality control check for production code where you might rerun analyses with new data on a rolling basis.</p><h2 id=inequality-joins>Inequality joins
<a href=#inequality-joins><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>To actually fix this issue, we&rsquo;ll need to expand our join specification to include another condition. Let&rsquo;s zoom in to just 2021:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nf><a href=https://dplyr.tidyverse.org/reference/filter.html>filter</a></span><span class=o>(</span><span class=nv>faulty</span>, <span class=nv>company</span> <span class=o>==</span> <span class=s>"B"</span>, <span class=nv>year</span> <span class=o>==</span> <span class=m>2021</span><span class=o>)</span></span>
<span><span class=c>#&gt; <span style=color:#555># A tibble: 2 Ã— 5</span></span></span>
<span><span class=c>#&gt;   company  year revenue since name   </span></span>
<span><span class=c>#&gt;   <span style=color:#555;font-style:italic>&lt;chr&gt;</span>   <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>   <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;chr&gt;</span>  </span></span>
<span><span class=c>#&gt; <span style=color:#555>1</span> B        <span style=text-decoration:underline>2</span>021      10  <span style=text-decoration:underline>2</span>009 RStudio</span></span>
<span><span class=c>#&gt; <span style=color:#555>2</span> B        <span style=text-decoration:underline>2</span>021      10  <span style=text-decoration:underline>2</span>022 Posit</span></span>
<span></span></code></pre></div><p>We want to retain the match with RStudio, but not with Posit (because the name hasn&rsquo;t changed yet). One way to express this is by using the <code>year</code> and <code>since</code> columns to state that you only want a match if the transaction <code>year</code> occurred <em>after</em> a name change:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=c># `year[i] &gt;= since`?</span></span>
<span><span class=m>2021</span> <span class=o>&gt;=</span> <span class=m>2009</span></span>
<span><span class=c>#&gt; [1] TRUE</span></span>
<span></span><span><span class=m>2021</span> <span class=o>&gt;=</span> <span class=m>2022</span></span>
<span><span class=c>#&gt; [1] FALSE</span></span>
<span></span></code></pre></div><p>Because
<a href=https://dplyr.tidyverse.org/reference/join_by.html target=_blank rel=noopener><code>join_by()</code></a> accepts expressions, we can express this inequality directly inside the join specification:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nf><a href=https://dplyr.tidyverse.org/reference/join_by.html>join_by</a></span><span class=o>(</span><span class=nv>company</span> <span class=o>==</span> <span class=nv>id</span>, <span class=nv>year</span> <span class=o>&gt;=</span> <span class=nv>since</span><span class=o>)</span></span>
<span><span class=c>#&gt; Join By:</span></span>
<span><span class=c>#&gt; - company == id</span></span>
<span><span class=c>#&gt; - year &gt;= since</span></span>
<span></span></code></pre></div><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nv>transactions</span> <span class=o>|&gt;</span></span>
<span>  <span class=nf><a href=https://dplyr.tidyverse.org/reference/mutate-joins.html>inner_join</a></span><span class=o>(</span><span class=nv>companies</span>, <span class=nf><a href=https://dplyr.tidyverse.org/reference/join_by.html>join_by</a></span><span class=o>(</span><span class=nv>company</span> <span class=o>==</span> <span class=nv>id</span>, <span class=nv>year</span> <span class=o>&gt;=</span> <span class=nv>since</span><span class=o>)</span><span class=o>)</span></span>
<span><span class=c>#&gt; <span style=color:#555># A tibble: 5 Ã— 5</span></span></span>
<span><span class=c>#&gt;   company  year revenue since name     </span></span>
<span><span class=c>#&gt;   <span style=color:#555;font-style:italic>&lt;chr&gt;</span>   <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>   <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;chr&gt;</span>    </span></span>
<span><span class=c>#&gt; <span style=color:#555>1</span> A        <span style=text-decoration:underline>2</span>019      50  <span style=text-decoration:underline>1</span>973 Patagonia</span></span>
<span><span class=c>#&gt; <span style=color:#555>2</span> A        <span style=text-decoration:underline>2</span>020       4  <span style=text-decoration:underline>1</span>973 Patagonia</span></span>
<span><span class=c>#&gt; <span style=color:#555>3</span> B        <span style=text-decoration:underline>2</span>021      10  <span style=text-decoration:underline>2</span>009 RStudio  </span></span>
<span><span class=c>#&gt; <span style=color:#555>4</span> B        <span style=text-decoration:underline>2</span>023      12  <span style=text-decoration:underline>2</span>009 RStudio  </span></span>
<span><span class=c>#&gt; <span style=color:#555>5</span> B        <span style=text-decoration:underline>2</span>023      12  <span style=text-decoration:underline>2</span>022 Posit</span></span>
<span></span></code></pre></div><p>This eliminated the 2021 match to Posit, as expected! This type of join is known as an <em>inequality join</em>, i.e.Â it involves at least one join expression containing one of the following inequality conditions: <code>>=</code>, <code>></code>, <code>&lt;=</code>, or <code>&lt;</code>.</p><p>However, we still have 2 matches corresponding to the 2023 year. In this case, we only wanted the match to Posit. We can understand why we are still getting multiple matches here by running the same row-by-row analysis as before:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=c># `year[i] &gt;= since`? Both are true!</span></span>
<span><span class=m>2023</span> <span class=o>&gt;=</span> <span class=m>2009</span></span>
<span><span class=c>#&gt; [1] TRUE</span></span>
<span></span><span><span class=m>2023</span> <span class=o>&gt;=</span> <span class=m>2022</span></span>
<span><span class=c>#&gt; [1] TRUE</span></span>
<span></span></code></pre></div><p>To remove the last problematic match of the 2023 transaction to the RStudio name, we&rsquo;ll need to refine our join specification one more time.</p><h2 id=rolling-joins>Rolling joins
<a href=#rolling-joins><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>Inequality conditions like <code>year >= since</code> are powerful, but since the condition is only bounded on one side it is common for them to return a large number of matches. Since multiple matches are the typical case with inequality joins, we don&rsquo;t get a warning like with the equality join, but we clearly still haven&rsquo;t gotten the join right. As a reminder, here are where we still have too many matches:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nv>transactions</span> <span class=o>|&gt;</span></span>
<span>  <span class=nf><a href=https://dplyr.tidyverse.org/reference/mutate-joins.html>inner_join</a></span><span class=o>(</span><span class=nv>companies</span>, <span class=nf><a href=https://dplyr.tidyverse.org/reference/join_by.html>join_by</a></span><span class=o>(</span><span class=nv>company</span> <span class=o>==</span> <span class=nv>id</span>, <span class=nv>year</span> <span class=o>&gt;=</span> <span class=nv>since</span><span class=o>)</span><span class=o>)</span> <span class=o>|&gt;</span></span>
<span>  <span class=nf><a href=https://dplyr.tidyverse.org/reference/filter.html>filter</a></span><span class=o>(</span><span class=nv>company</span> <span class=o>==</span> <span class=s>"B"</span>, <span class=nv>year</span> <span class=o>==</span> <span class=m>2023</span><span class=o>)</span></span>
<span><span class=c>#&gt; <span style=color:#555># A tibble: 2 Ã— 5</span></span></span>
<span><span class=c>#&gt;   company  year revenue since name   </span></span>
<span><span class=c>#&gt;   <span style=color:#555;font-style:italic>&lt;chr&gt;</span>   <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>   <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;chr&gt;</span>  </span></span>
<span><span class=c>#&gt; <span style=color:#555>1</span> B        <span style=text-decoration:underline>2</span>023      12  <span style=text-decoration:underline>2</span>009 RStudio</span></span>
<span><span class=c>#&gt; <span style=color:#555>2</span> B        <span style=text-decoration:underline>2</span>023      12  <span style=text-decoration:underline>2</span>022 Posit</span></span>
<span></span></code></pre></div><p>We need a way to filter down the matches returned from <code>year >= since</code> to only the most recent name change. In other words, we prefer the Posit match over the RStudio match because 2022 is <em>closer</em> to the transaction year of 2023 than 2009 is. We can express this in
<a href=https://dplyr.tidyverse.org/reference/join_by.html target=_blank rel=noopener><code>join_by()</code></a> by using a helper named <code>closest()</code>.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nv>transactions</span> <span class=o>|&gt;</span></span>
<span>  <span class=nf><a href=https://dplyr.tidyverse.org/reference/mutate-joins.html>inner_join</a></span><span class=o>(</span><span class=nv>companies</span>, <span class=nf><a href=https://dplyr.tidyverse.org/reference/join_by.html>join_by</a></span><span class=o>(</span><span class=nv>company</span> <span class=o>==</span> <span class=nv>id</span>, <span class=nf>closest</span><span class=o>(</span><span class=nv>year</span> <span class=o>&gt;=</span> <span class=nv>since</span><span class=o>)</span><span class=o>)</span><span class=o>)</span></span>
<span><span class=c>#&gt; <span style=color:#555># A tibble: 4 Ã— 5</span></span></span>
<span><span class=c>#&gt;   company  year revenue since name     </span></span>
<span><span class=c>#&gt;   <span style=color:#555;font-style:italic>&lt;chr&gt;</span>   <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>   <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;chr&gt;</span>    </span></span>
<span><span class=c>#&gt; <span style=color:#555>1</span> A        <span style=text-decoration:underline>2</span>019      50  <span style=text-decoration:underline>1</span>973 Patagonia</span></span>
<span><span class=c>#&gt; <span style=color:#555>2</span> A        <span style=text-decoration:underline>2</span>020       4  <span style=text-decoration:underline>1</span>973 Patagonia</span></span>
<span><span class=c>#&gt; <span style=color:#555>3</span> B        <span style=text-decoration:underline>2</span>021      10  <span style=text-decoration:underline>2</span>009 RStudio  </span></span>
<span><span class=c>#&gt; <span style=color:#555>4</span> B        <span style=text-decoration:underline>2</span>023      12  <span style=text-decoration:underline>2</span>022 Posit</span></span>
<span></span></code></pre></div><p><code>closest(year >= since)</code> finds all of the matches in <code>since</code> for a particular <code>year</code>, and then filters them down to only the closest match to that <code>year</code>. This is known as a <em>rolling join</em>, because in this case it <em>rolls</em> the most recent name change forward to match up with the transaction. Rolling joins were popularized by data.table, and are related to <code>ASOF</code> joins supported by some SQL flavors.</p><p>There is a third new class of joins supported by
<a href=https://dplyr.tidyverse.org/reference/join_by.html target=_blank rel=noopener><code>join_by()</code></a> that we won&rsquo;t discuss today known as <em>overlap joins</em>. These are particularly useful in time series where you are looking for cases where a date or range of dates from one table <em>overlaps</em> a range of dates in another table. There are three helpers for overlap joins:
<a href=https://dplyr.tidyverse.org/reference/join_by.html#overlap-joins target=_blank rel=noopener><code>between()</code></a>,
<a href=https://dplyr.tidyverse.org/reference/join_by.html#overlap-joins target=_blank rel=noopener><code>overlaps()</code></a>, and
<a href=https://dplyr.tidyverse.org/reference/join_by.html#overlap-joins target=_blank rel=noopener><code>within()</code></a>, which you can read more about
<a href=https://dplyr.tidyverse.org/reference/join_by.html#overlap-joins target=_blank rel=noopener>in the documentation</a>.</p><h2 id=unmatched-rows>Unmatched rows
<a href=#unmatched-rows><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="currentcolor"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>I mentioned earlier that we expected a 1:1 match between <code>transactions</code> and <code>companies</code>. We saw that <code>multiple</code> can help protect us from having too many matches, but what about not having enough? Consider what happens if we add a new company to <code>transactions</code> without a corresponding match in <code>companies</code>.</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nv>transactions</span> <span class=o>&lt;-</span> <span class=nv>transactions</span> <span class=o>|&gt;</span></span>
<span>  <span class=nf>tibble</span><span class=nf>::</span><span class=nf><a href=https://tibble.tidyverse.org/reference/add_row.html>add_row</a></span><span class=o>(</span>company <span class=o>=</span> <span class=s>"C"</span>, year <span class=o>=</span> <span class=m>2023</span>, revenue <span class=o>=</span> <span class=m>15</span><span class=o>)</span></span>
<span></span>
<span><span class=nv>transactions</span></span>
<span><span class=c>#&gt; <span style=color:#555># A tibble: 5 Ã— 3</span></span></span>
<span><span class=c>#&gt;   company  year revenue</span></span>
<span><span class=c>#&gt;   <span style=color:#555;font-style:italic>&lt;chr&gt;</span>   <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>   <span style=color:#555;font-style:italic>&lt;dbl&gt;</span></span></span>
<span><span class=c>#&gt; <span style=color:#555>1</span> A        <span style=text-decoration:underline>2</span>019      50</span></span>
<span><span class=c>#&gt; <span style=color:#555>2</span> A        <span style=text-decoration:underline>2</span>020       4</span></span>
<span><span class=c>#&gt; <span style=color:#555>3</span> B        <span style=text-decoration:underline>2</span>021      10</span></span>
<span><span class=c>#&gt; <span style=color:#555>4</span> B        <span style=text-decoration:underline>2</span>023      12</span></span>
<span><span class=c>#&gt; <span style=color:#555>5</span> C        <span style=text-decoration:underline>2</span>023      15</span></span>
<span></span></code></pre></div><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nv>transactions</span> <span class=o>|&gt;</span></span>
<span>  <span class=nf><a href=https://dplyr.tidyverse.org/reference/mutate-joins.html>inner_join</a></span><span class=o>(</span></span>
<span>    <span class=nv>companies</span>, </span>
<span>    <span class=nf><a href=https://dplyr.tidyverse.org/reference/join_by.html>join_by</a></span><span class=o>(</span><span class=nv>company</span> <span class=o>==</span> <span class=nv>id</span>, <span class=nf>closest</span><span class=o>(</span><span class=nv>year</span> <span class=o>&gt;=</span> <span class=nv>since</span><span class=o>)</span><span class=o>)</span></span>
<span>  <span class=o>)</span></span>
<span><span class=c>#&gt; <span style=color:#555># A tibble: 4 Ã— 5</span></span></span>
<span><span class=c>#&gt;   company  year revenue since name     </span></span>
<span><span class=c>#&gt;   <span style=color:#555;font-style:italic>&lt;chr&gt;</span>   <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>   <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;chr&gt;</span>    </span></span>
<span><span class=c>#&gt; <span style=color:#555>1</span> A        <span style=text-decoration:underline>2</span>019      50  <span style=text-decoration:underline>1</span>973 Patagonia</span></span>
<span><span class=c>#&gt; <span style=color:#555>2</span> A        <span style=text-decoration:underline>2</span>020       4  <span style=text-decoration:underline>1</span>973 Patagonia</span></span>
<span><span class=c>#&gt; <span style=color:#555>3</span> B        <span style=text-decoration:underline>2</span>021      10  <span style=text-decoration:underline>2</span>009 RStudio  </span></span>
<span><span class=c>#&gt; <span style=color:#555>4</span> B        <span style=text-decoration:underline>2</span>023      12  <span style=text-decoration:underline>2</span>022 Posit</span></span>
<span></span></code></pre></div><p>We&rsquo;ve accidentally lost the <code>C</code> row! If you don&rsquo;t expect any unmatched rows, you can now catch this problem automatically by using our other new quality control argument, <code>unmatched</code>:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nv>transactions</span> <span class=o>|&gt;</span></span>
<span>  <span class=nf><a href=https://dplyr.tidyverse.org/reference/mutate-joins.html>inner_join</a></span><span class=o>(</span></span>
<span>    <span class=nv>companies</span>, </span>
<span>    <span class=nf><a href=https://dplyr.tidyverse.org/reference/join_by.html>join_by</a></span><span class=o>(</span><span class=nv>company</span> <span class=o>==</span> <span class=nv>id</span>, <span class=nf>closest</span><span class=o>(</span><span class=nv>year</span> <span class=o>&gt;=</span> <span class=nv>since</span><span class=o>)</span><span class=o>)</span>,</span>
<span>    unmatched <span class=o>=</span> <span class=s>"error"</span></span>
<span>  <span class=o>)</span></span>
<span><span class=c>#&gt; <span style=color:#bb0;font-weight:700>Error</span><span style=font-weight:700> in `inner_join()`:</span></span></span>
<span><span class=c>#&gt; <span style=color:#bb0>!</span> Each row of `x` must have a match in `y`.</span></span>
<span><span class=c>#&gt; <span style=color:#0bb>â„¹</span> Row 5 of `x` does not have a match.</span></span>
<span></span></code></pre></div><p>If you&rsquo;ve been questioning why I&rsquo;ve been using an
<a href=https://dplyr.tidyverse.org/reference/mutate-joins.html target=_blank rel=noopener><code>inner_join()</code></a> over a
<a href=https://dplyr.tidyverse.org/reference/mutate-joins.html target=_blank rel=noopener><code>left_join()</code></a> this whole time, <code>unmatched</code> is why. We could use a
<a href=https://dplyr.tidyverse.org/reference/mutate-joins.html target=_blank rel=noopener><code>left_join()</code></a>:</p><div class=highlight><pre class=chroma><code class=language-r data-lang=r><span><span class=nv>transactions</span> <span class=o>|&gt;</span></span>
<span>  <span class=nf><a href=https://dplyr.tidyverse.org/reference/mutate-joins.html>left_join</a></span><span class=o>(</span></span>
<span>    <span class=nv>companies</span>, </span>
<span>    <span class=nf><a href=https://dplyr.tidyverse.org/reference/join_by.html>join_by</a></span><span class=o>(</span><span class=nv>company</span> <span class=o>==</span> <span class=nv>id</span>, <span class=nf>closest</span><span class=o>(</span><span class=nv>year</span> <span class=o>&gt;=</span> <span class=nv>since</span><span class=o>)</span><span class=o>)</span>,</span>
<span>    unmatched <span class=o>=</span> <span class=s>"error"</span></span>
<span>  <span class=o>)</span></span>
<span><span class=c>#&gt; <span style=color:#555># A tibble: 5 Ã— 5</span></span></span>
<span><span class=c>#&gt;   company  year revenue since name     </span></span>
<span><span class=c>#&gt;   <span style=color:#555;font-style:italic>&lt;chr&gt;</span>   <span style=color:#555;font-style:italic>&lt;dbl&gt;</span>   <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;dbl&gt;</span> <span style=color:#555;font-style:italic>&lt;chr&gt;</span>    </span></span>
<span><span class=c>#&gt; <span style=color:#555>1</span> A        <span style=text-decoration:underline>2</span>019      50  <span style=text-decoration:underline>1</span>973 Patagonia</span></span>
<span><span class=c>#&gt; <span style=color:#555>2</span> A        <span style=text-decoration:underline>2</span>020       4  <span style=text-decoration:underline>1</span>973 Patagonia</span></span>
<span><span class=c>#&gt; <span style=color:#555>3</span> B        <span style=text-decoration:underline>2</span>021      10  <span style=text-decoration:underline>2</span>009 RStudio  </span></span>
<span><span class=c>#&gt; <span style=color:#555>4</span> B        <span style=text-decoration:underline>2</span>023      12  <span style=text-decoration:underline>2</span>022 Posit    </span></span>
<span><span class=c>#&gt; <span style=color:#555>5</span> C        <span style=text-decoration:underline>2</span>023      15    <span style=color:#b00>NA</span> <span style=color:#b00>NA</span></span></span>
<span></span></code></pre></div><p>But you&rsquo;ll notice that we don&rsquo;t get an error here. <code>unmatched</code> will only error if the input that has the potential to drop rows has an unmatched row. The reason you&rsquo;d use a
<a href=https://dplyr.tidyverse.org/reference/mutate-joins.html target=_blank rel=noopener><code>left_join()</code></a> is to ensure that rows from <code>x</code> are always retained, so it wouldn&rsquo;t make sense to error when rows from <code>x</code> are also unmatched. If <code>y</code> had unmatched rows instead, <em>then</em> it would have errored because those rows would otherwise be lost from the join. In an
<a href=https://dplyr.tidyverse.org/reference/mutate-joins.html target=_blank rel=noopener><code>inner_join()</code></a>, both inputs can potentially drop rows, so <code>unmatched = "error"</code> checks for unmatched rows in both inputs.</p></div></div><div class=column25><div class="section hideOnMobile"><div class=sectionTitle>Contents</div><nav id=TableOfContents><ul><li><a href=#join_by><code>join_by()</code></a></li><li><a href=#multiple-matches>Multiple matches</a></li><li><a href=#inequality-joins>Inequality joins</a></li><li><a href=#rolling-joins>Rolling joins</a></li><li><a href=#unmatched-rows>Unmatched rows</a></li></ul></nav></div><div class=section></div></div></div></div></div><div id=rStudioFooter class=band><div class=bandContent><div id=copyright>The tidyverse is proudly supported by <a class=rstudioLogo href=https://posit.co/ aria-label="Posit Homepage"></a></div><div id=logos><a href=https://www.tidyverse.org/google_privacy_policy>Privacy policy</a>
<a href=https://github.com/tidyverse class="footerLogo gitHub" aria-label="Tidyverse GitHub organization"></a><a href=https://twitter.com/hashtag/rstats class="footerLogo twitter" aria-label="rstats hashtag on twitter.com"></a></div></div></div></div></div><script type=application/javascript>var dnt=(navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack);var doNotTrack=(dnt=="1"||dnt=="yes");if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');if(window.sessionStorage){var GA_SESSION_STORAGE_KEY='ga:clientId';ga('create','UA-115082821-1',{'storage':'none','clientId':sessionStorage.getItem(GA_SESSION_STORAGE_KEY)});ga(function(tracker){sessionStorage.setItem(GA_SESSION_STORAGE_KEY,tracker.get('clientId'));});}
ga('set','anonymizeIp',true);ga('send','pageview');}</script></body></html></div></div></body></html>