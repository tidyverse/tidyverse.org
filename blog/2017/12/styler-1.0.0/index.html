<!doctype html><html><head><!doctype html><html lang=en-us><link rel=stylesheet href=/css/fonts.css><link rel=stylesheet href=/css/main-site.css><link rel=stylesheet href=/css/fa5-all.css><style type=text/css>body{background-color:#fff;color:#1a1917}a{color:#38577f}a:hover{color:#42709b}a:focus{outline-color:#42709b}.column25-left .sectionTitle a:hover:not(.current),.column16-left .sectionTitle a:hover:not(.current){color:#1a1917}.icon-attribution,.icon-attribution a{color:#1a1917;opacity:75%}#homeContent .band.first{background-color:#fff}#homeContent .band.second{background-color:#fdeba4}#homeContent .band.third{background-color:#fff}#rStudioHeader{background-color:#1a162d;color:#fff}#rStudioHeader .productName{color:#fff}#rStudioHeader .productName:hover,#rStudioHeader .productName:focus{color:#fdeba4}#rStudioHeader #menu .menuItem.a{background-color:#75aadb;color:#fff}#rStudioHeader #menu .menuItem:hover{background-color:#484557;color:#fff}#rStudioHeader #menu .menuItem.current{background-color:#fff;color:#1a162d;text-decoration:none}#rStudioFooter.band{background-color:#767381}#rStudioFooter .bandContent #copyright{color:#e3eef8}table tbody tr:nth-child(even){background-color:#f7faff}table tbody tr:nth-child(odd){background-color:#fff}.latest{border-top:.5em solid <no value>}.event{-moz-box-shadow:0 0 0 0 rgba(0,0,0,.1);-webkit-box-shadow:0 0 0 0 rgba(0,0,0,.1);box-shadow:0 0 0 0 rgba(0,0,0,.1)}.section .event{background-color:#eab0c41a}.section .event{border-top:7pt solid #a19ea936}.section .event a{color:#1a162d}.section .event{color:#404040}</style><link rel=stylesheet href=/css/tidyverse.css><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Hugo 0.71.1"><title>styler 1.0.0</title><meta property="og:title" content="styler 1.0.0"><meta property="og:description" content="styler, a package that can format your code according to the tidyverse style guide, is now on CRAN."><meta property="og:type" content="article"><meta property="og:url" content="https://www.tidyverse.org/blog/2017/12/styler-1.0.0/"><meta property="twitter:card" content="summary_large_image"><meta property="og:title" content="styler 1.0.0 - Tidyverse"><meta property="description" content="styler, a package that can format your code according to the tidyverse style guide, is now on CRAN."><meta property="og:description" content="styler, a package that can format your code according to the tidyverse style guide, is now on CRAN."><meta property="og:image" content="https://www.tidyverse.org/blog/2017/12/styler-1.0.0/styler-1.0.0-sq.jpg"><meta name=twitter:image content="https://www.tidyverse.org/blog/2017/12/styler-1.0.0/styler-1.0.0-wd.jpg"><link rel=apple-touch-icon sizes=180x180 href=/images/favicons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/images/favicons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/images/favicons/favicon-16x16.png><link rel=manifest href=/images/favicons/site.webmanifest><link rel=mask-icon href=/images/favicons/safari-pinned-tab.svg><link rel="shortcut icon" href=/images/favicons/favicon.ico><meta name=msapplication-TileColor content="#da532c"><meta name=msapplication-config href=/images/favicons/browserconfig.xml><script type=text/javascript src=/js/jquery-3.5.1.min.js></script><script type=text/javascript src=/js/site.js></script><link rel=icon href=/images/favicon.ico><script type=text/javascript src=/js/clipboard.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin=anonymous></script><script defer data-domain=tidyverse.org,all.tidyverse.org src=https://plausible.io/js/plausible.js></script></head><body><div id=appTidyverseSite class="shrinkHeader alwaysShrinkHeader"><div id=main><div id=rStudioHeader><nav class=band><div class="innards bandContent"><div><a class=productName href=/%20/>Tidyverse</a></div><div id=menu><div id=menuToggler></div><div id=menuItems><a class=menuItem href=/packages/>Packages</a>
<a class="menuItem current" href=/blog/>Blog</a>
<a class=menuItem href=/learn/>Learn</a>
<a class=menuItem href=/help/>Help</a>
<a class=menuItem href=/contribute/>Contribute</a></div></div></div></nav></div><main><div class="band padForHeader pushFooter"><div class=bandContent><div class="full splitColumns withMobileMargins"><div class=column75><h1 class=article-title>styler 1.0.0</h1><div class=article-header aria-hidden=true><div class=photo><img src=/blog/2017/12/styler-1.0.0/styler-1.0.0-wd.jpg></div><div class=photoCredit>Photo by <a href=https://unsplash.com/photos/mpdIPhYqZ4Y>Heng Films</a></div></div><span class=article-date><i class="fas fa-calendar-day fa-fw"></i>&nbsp;&nbsp;2017/12/20</span></p><p style=margin-top:.5em><i class="fas fa-user-circle fa-fw"></i>&nbsp;
Lorenz Walthert, Kirill Müller</p><div class=article-content><script src=/rmarkdown-libs/header-attrs/header-attrs.js></script><p>We’re pleased to announce the release of <a href=https://github.com/r-lib/styler/releases/tag/v1.0.0>styler 1.0.0</a>. styler is a source code formatter - a package to format R code according to a style guide. It defaults to our implementation of the <a href=http://style.tidyverse.org>tidyverse style guide</a>, but there is plenty of flexibility for a user to specify their own style. A coherent style is important for consistency and legibility. Just as it is important to putspcesbetweenwords.
You can install styler from CRAN:</p><pre class=r><code>install.packages(&quot;styler&quot;)</code></pre><p>styler can style text, single files, packages and entire
R source trees with the following functions:</p><ul><li><code>style_text()</code> styles a character vector.</li><li><code>style_file()</code> styles R and Rmd files.</li><li><code>style_dir()</code> styles all R and/or Rmd files in a directory.</li><li><code>style_pkg()</code> styles the source files of an R package.</li><li>An RStudio Addin that styles the active R or Rmd file, the current
package or the highlighted code.</li></ul><p>The following screenshot illustrates how the active file can be styled conveniently with the RStudio Addin.</p><p><img src=styler-1.0.0-addin.png width=800px></p><p>Note that all functions except <code>style_text()</code> modify <em>in place</em>, that is, they overwrite the source. <code>style_file()</code> for example modifies the files it is given without creating a backup copy. We therefore strongly advise to use version control in conjunction with styler and consider the implications this might have on your workflow.</p><div id=styling-options class="section level2"><h2>styling options</h2><p>A distinguishing feature of styler is its flexibility. The following options are available:</p><ul><li><code>scope</code>. What is to be styled, e.g. just spacing or also indention, line breaks, tokens?</li><li><code>strict</code>. How strictly should the rules be applied?</li><li><code>math_token_spacing</code>. Granular control for spacing around math tokens.</li><li><code>reindention</code>. Allows to set the indention of certain regex patterns manually.</li></ul><p>We will briefly describe all of them below.</p><div id=scope class="section level3"><h3>scope</h3><p><code>scope</code> can take one of the following values:</p><ul><li>“none”: Performs no transformation at all.</li><li>“spaces”: Manipulates spacing between tokens on the same line.</li><li>“indention”: In addition to “spaces”, this option also manipulates the indention level.</li><li>“line_breaks”: In addition to “indention”, this option also manipulates line breaks.</li><li>“tokens”: In addition to “line_breaks”, this option also manipulates tokens.</li></ul><p>Hence, <code>scope &lt; "tokens"</code> will never change code in the sense that the expression remains the same before and after styling, as only spaces and line breaks between the tokens are modified. styler can internally validate the styling, so you can be sure that it has not broken your code. Although extensively tested, we recommend to inspect the styling result with <code>scope = "tokens"</code>, since in this case, an automatic validation is not possible.</p><p>Let’s now see a few examples. We can limit ourselves to styling just spacing information:</p><pre class=r><code>library(&quot;styler&quot;)
style_text(&quot;a=3; 2&quot;, scope = &quot;spaces&quot;)</code></pre><pre><code>a = 3; 2</code></pre><p>Or, on the other extreme of the scale, styling spaces, indention, line breaks
and tokens:</p><pre class=r><code>style_text(&quot;a=3; 2&quot;, scope = &quot;tokens&quot;)</code></pre><pre><code>a &lt;- 3
2</code></pre><p>For the reader’s convenience, we will now switch the mode of display. In the new mode, the above example looks like this:</p><pre class=styler><code># Before
a=3; 2</code></pre><pre><code># After style_text(..., scope = tokens)
a &lt;- 3
2</code></pre><p>Where <code>...</code> refers to the code to style.</p><p>In the next example, we want to style spaces and indention, but not line breaks
and tokens:</p><pre class=styler><code># Before
a=  function( x) {
  &#39;x&#39;
  }</code></pre><pre><code># After style_text(..., scope = indention)
a = function(x) {
  &#39;x&#39;
}</code></pre></div><div id=strict class="section level3"><h3>strict</h3><p>Another option that is helpful to determine the level of ‘invasiveness’ is <code>strict</code>. If set to <code>TRUE</code>, spaces and line breaks before or after tokens are set to either zero or one. However, in some situations, this might be undesirable (so we set <code>strict = FALSE</code>), as the following example shows:</p><pre class=styler><code># Before
data_frame(
     small  = 2 ,
     medium = 4,#comment without space
     large  =6
)</code></pre><pre><code># After style_text(..., strict = FALSE)
data_frame(
  small  = 2,
  medium = 4, # comment without space
  large  = 6
)</code></pre><p>We prefer to keep the equal sign after “small”, “medium” and “large” aligned, so we set <code>strict = FALSE</code> to set spacing to <em>at least</em> one around <code>=</code>.</p><p>Also, with <code>scope >= "line_breaks"</code>, <code>strict = TRUE</code> will break the lines in the following call, whereas <code>strict = FALSE</code> will leave them as is:</p><pre class=styler><code># Before
do_a_long_and_complicated_fun_cal(&#39;which&#39;, has, way, to, 
                              &#39;and longer then lorem ipsum in its full length&#39;
)</code></pre><pre><code># After 
do_a_long_and_complicated_fun_cal(
  &quot;which&quot;, has, way, to,
  &quot;and longer then lorem ipsum in its full length&quot;
)</code></pre><p>In addition, the <code>strict</code> option also adds braces (if <code>scope = "tokens"</code>) to conditional statements if they are multi-line:</p><pre class=styler><code># Before
if (set_q(x))
    3 else 
    5</code></pre><pre><code># After style_text(..., strict = TRUE)
if (set_q(x)) {
  3
} else {
  5
}</code></pre></div><div id=math-token-spacing class="section level3"><h3>math token spacing</h3><p>styler can identify and handle unary operators and other math tokens:</p><pre class=styler><code># Before
1++1-1-1/2</code></pre><pre><code># After 
1 + +1 - 1 - 1 / 2</code></pre><p>This is tidyverse style. However, styler offers very granular control for math token spacing. Assuming you like spacing around <code>+</code> and <code>-</code>, but not around <code>/</code> and <code>*</code> and <code>^</code>. This can be achieved as follows:</p><pre class=styler><code># Before
1++1/2*2^2 </code></pre><pre><code># After style_text(..., math_token_spacing = list(one = c(&quot;&#39;+&#39;&quot;, &quot;&#39;-&#39;&quot;), zero = c(&quot;&#39;/&#39;&quot;, &quot;&#39;*&#39;&quot;, &quot;&#39;^&#39;&quot;)))
1 + +1/2*2^2</code></pre></div><div id=reindention class="section level3"><h3>reindention</h3><p>You can set the indention of lines that match a certain regular expression manually. For example, if you don’t want comments starting with <code>###</code> to be indented, you can formulate an unindention rule:</p><pre class=styler><code># Before
a &lt;- function() {
    ### not to be indented
    # indent normally
    33
    }</code></pre><pre><code># After style_text(..., reindention = list(regex_pattern = &quot;^###&quot;, indention = 0, comments_only = TRUE))
a &lt;- function() {
### not to be indented
  # indent normally
  33
}</code></pre><p>These are options that allow flexible reformatting. You can even go further, as described in the <a href=http://styler.r-lib.org/articles/customizing_styler.html>“Customizing styler”</a> vignette.</p></div></div><div id=a-few-more-examples class="section level1"><h1>A few more examples</h1><p>Now that you know that the rules can be applied in a flexible fashion, let’s focus on <code>scope = "tokens"</code> and <code>strict = TRUE</code> and illustrate how specific rules of the tidyverse style guide are implemented.</p><p>Spaces are placed around operators such as <code>=</code>, after (but not before) commas, before comments etc.</p><pre class=styler><code># Before
split_fast&lt;-split_into_fractions(target=&quot;fast&quot;,origin  =&quot;E2-k3&quot;,...)#comment</code></pre><pre><code># After 
split_fast &lt;- split_into_fractions(target = &quot;fast&quot;, origin = &quot;E2-k3&quot;, ...) # comment</code></pre><p>Function declarations are indented if multi-line:</p><pre class=styler><code># Before
my_fun &lt;- function(x, 
y, 
z) {
  just(z)
}</code></pre><pre><code># After 
my_fun &lt;- function(x,
                   y,
                   z) {
  just(z)
}</code></pre><p>styler can also format complicated expressions that involve line breaking and indention based on both brace expressions and operators:</p><pre class=styler><code># Before
if (x &gt;3) {stop(&quot;this is an error&quot;)} else {
c(there_are_fairly_long,
1 / 33 * 
2 * long_long_variable_names)%&gt;% k(

) }</code></pre><pre><code># After 
if (x &gt; 3) {
  stop(&quot;this is an error&quot;)
} else {
  c(
    there_are_fairly_long,
    1 / 33 *
      2 * long_long_variable_names
  ) %&gt;% k()
}</code></pre><p>Lines are broken after <code>(</code> if a function call spans multiple lines:</p><pre class=styler><code># Before
do_a_long_and_complicated_fun_cal(&quot;which&quot;, has, way, to, 
                              &quot;and longer then lorem ipsum in its full length&quot;
                              )</code></pre><pre><code># After 
do_a_long_and_complicated_fun_cal(
  &quot;which&quot;, has, way, to,
  &quot;and longer then lorem ipsum in its full length&quot;
)</code></pre><p>styler replaces <code>=</code> with <code>&lt;-</code> for assignment if necessary:</p><pre class=styler><code># Before
one = 3
data_frame(a = 3)</code></pre><pre><code># After 
one &lt;- 3
data_frame(a = 3)</code></pre><p>It also handles single quotes according to the tidyverse style guide:</p><pre class=styler><code># Before
&#39;one string&#39;
&#39;one string in a &quot;string&quot;&#39;
&quot;one string in a &#39;string&#39;&quot;
</code></pre><pre><code># After 
&quot;one string&quot;
&#39;one string in a &quot;string&quot;&#39;
&quot;one string in a &#39;string&#39;&quot;</code></pre><p>Braces are added to function calls in pipes:</p><pre class=styler><code># Before
a %&gt;%
  b %&gt;%
  c</code></pre><pre><code># After 
a %&gt;%
  b() %&gt;%
  c()</code></pre><p>tidyeval syntax is handled properly:</p><pre class=styler><code># Before
mtcars %&gt;%
  group_by(!!!my_vars)</code></pre><pre><code># After 
mtcars %&gt;%
  group_by(!!!my_vars)</code></pre><p>That was a quick overview of styler. Please feel free to grab styler from CRAN, run it on your own package and tell us what you think.</p></div></div></div><div class=column25><div class="section hideOnMobile"></div><div class=section></div></div></div></div></div><div id=rStudioFooter class=band><div class=bandContent><div id=copyright>The tidyverse is proudly supported by <a class=rstudioLogo href=https://posit.co/ aria-label="Posit Homepage"></a></div><div id=logos><a href=https://www.tidyverse.org/google_privacy_policy>Privacy policy</a>
<a href=https://github.com/tidyverse class="footerLogo gitHub" aria-label="Tidyverse GitHub organization"></a><a href=https://twitter.com/hashtag/rstats class="footerLogo twitter" aria-label="rstats hashtag on twitter.com"></a></div></div></div></div></div><script type=application/javascript>var dnt=(navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack);var doNotTrack=(dnt=="1"||dnt=="yes");if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');if(window.sessionStorage){var GA_SESSION_STORAGE_KEY='ga:clientId';ga('create','UA-115082821-1',{'storage':'none','clientId':sessionStorage.getItem(GA_SESSION_STORAGE_KEY)});ga(function(tracker){sessionStorage.setItem(GA_SESSION_STORAGE_KEY,tracker.get('clientId'));});}
ga('set','anonymizeIp',true);ga('send','pageview');}</script></body></html></div></div></body></html>